var hce=Object.defineProperty;var zj=n=>{throw TypeError(n)};var fce=(n,e,r)=>e in n?hce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Be=(n,e,r)=>fce(n,typeof e!="symbol"?e+"":e,r),DS=(n,e,r)=>e.has(n)||zj("Cannot "+r);var me=(n,e,r)=>(DS(n,e,"read from private field"),r?r.call(n):e.get(n)),pt=(n,e,r)=>e.has(n)?zj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),We=(n,e,r,i)=>(DS(n,e,"write to private field"),i?i.call(n,r):e.set(n,r),r),Qt=(n,e,r)=>(DS(n,e,"access private method"),r);var My=(n,e,r,i)=>({set _(s){We(n,e,s,r)},get _(){return me(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function C1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var KK={exports:{}},E1={},XK={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb=Symbol.for("react.element"),pce=Symbol.for("react.portal"),mce=Symbol.for("react.fragment"),gce=Symbol.for("react.strict_mode"),bce=Symbol.for("react.profiler"),yce=Symbol.for("react.provider"),vce=Symbol.for("react.context"),xce=Symbol.for("react.forward_ref"),wce=Symbol.for("react.suspense"),_ce=Symbol.for("react.memo"),Sce=Symbol.for("react.lazy"),Uj=Symbol.iterator;function kce(n){return n===null||typeof n!="object"?null:(n=Uj&&n[Uj]||n["@@iterator"],typeof n=="function"?n:null)}var QK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JK=Object.assign,ZK={};function Hp(n,e,r){this.props=n,this.context=e,this.refs=ZK,this.updater=r||QK}Hp.prototype.isReactComponent={};Hp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eX(){}eX.prototype=Hp.prototype;function dR(n,e,r){this.props=n,this.context=e,this.refs=ZK,this.updater=r||QK}var hR=dR.prototype=new eX;hR.constructor=dR;JK(hR,Hp.prototype);hR.isPureReactComponent=!0;var Wj=Array.isArray,tX=Object.prototype.hasOwnProperty,fR={current:null},nX={key:!0,ref:!0,__self:!0,__source:!0};function rX(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)tX.call(e,i)&&!nX.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:kb,type:n,key:o,ref:a,props:s,_owner:fR.current}}function Cce(n,e){return{$$typeof:kb,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pR(n){return typeof n=="object"&&n!==null&&n.$$typeof===kb}function Ece(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var qj=/\/+/g;function OS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Ece(""+n.key):e.toString(36)}function nx(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case kb:case pce:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+OS(a,0):i,Wj(s)?(r="",n!=null&&(r=n.replace(qj,"$&/")+"/"),nx(s,e,r,"",function(u){return u})):s!=null&&(pR(s)&&(s=Cce(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qj,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",Wj(n))for(var l=0;l<n.length;l++){o=n[l];var c=i+OS(o,l);a+=nx(o,e,r,c,s)}else if(c=kce(n),typeof c=="function")for(n=c.call(n),l=0;!(o=n.next()).done;)o=o.value,c=i+OS(o,l++),a+=nx(o,e,r,c,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Dy(n,e,r){if(n==null)return n;var i=[],s=0;return nx(n,i,"","",function(o){return e.call(r,o,s++)}),i}function Tce(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Mi={current:null},rx={transition:null},Pce={ReactCurrentDispatcher:Mi,ReactCurrentBatchConfig:rx,ReactCurrentOwner:fR};function iX(){throw Error("act(...) is not supported in production builds of React.")}Kt.Children={map:Dy,forEach:function(n,e,r){Dy(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Dy(n,function(){e++}),e},toArray:function(n){return Dy(n,function(e){return e})||[]},only:function(n){if(!pR(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Kt.Component=Hp;Kt.Fragment=mce;Kt.Profiler=bce;Kt.PureComponent=dR;Kt.StrictMode=gce;Kt.Suspense=wce;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pce;Kt.act=iX;Kt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=JK({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=fR.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)tX.call(e,c)&&!nX.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:kb,type:n.type,key:s,ref:o,props:i,_owner:a}};Kt.createContext=function(n){return n={$$typeof:vce,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:yce,_context:n},n.Consumer=n};Kt.createElement=rX;Kt.createFactory=function(n){var e=rX.bind(null,n);return e.type=n,e};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(n){return{$$typeof:xce,render:n}};Kt.isValidElement=pR;Kt.lazy=function(n){return{$$typeof:Sce,_payload:{_status:-1,_result:n},_init:Tce}};Kt.memo=function(n,e){return{$$typeof:_ce,type:n,compare:e===void 0?null:e}};Kt.startTransition=function(n){var e=rx.transition;rx.transition={};try{n()}finally{rx.transition=e}};Kt.unstable_act=iX;Kt.useCallback=function(n,e){return Mi.current.useCallback(n,e)};Kt.useContext=function(n){return Mi.current.useContext(n)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(n){return Mi.current.useDeferredValue(n)};Kt.useEffect=function(n,e){return Mi.current.useEffect(n,e)};Kt.useId=function(){return Mi.current.useId()};Kt.useImperativeHandle=function(n,e,r){return Mi.current.useImperativeHandle(n,e,r)};Kt.useInsertionEffect=function(n,e){return Mi.current.useInsertionEffect(n,e)};Kt.useLayoutEffect=function(n,e){return Mi.current.useLayoutEffect(n,e)};Kt.useMemo=function(n,e){return Mi.current.useMemo(n,e)};Kt.useReducer=function(n,e,r){return Mi.current.useReducer(n,e,r)};Kt.useRef=function(n){return Mi.current.useRef(n)};Kt.useState=function(n){return Mi.current.useState(n)};Kt.useSyncExternalStore=function(n,e,r){return Mi.current.useSyncExternalStore(n,e,r)};Kt.useTransition=function(){return Mi.current.useTransition()};Kt.version="18.3.1";XK.exports=Kt;var E=XK.exports;const Ke=C1(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mce=E,Dce=Symbol.for("react.element"),Oce=Symbol.for("react.fragment"),Ice=Object.prototype.hasOwnProperty,Ace=Mce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rce={key:!0,ref:!0,__self:!0,__source:!0};function sX(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Ice.call(e,i)&&!Rce.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:Dce,type:n,key:o,ref:a,props:s,_owner:Ace.current}}E1.Fragment=Oce;E1.jsx=sX;E1.jsxs=sX;KK.exports=E1;var p=KK.exports,uO={},oX={exports:{}},ws={},aX={exports:{}},lX={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,W){var Y=R.length;R.push(W);e:for(;0<Y;){var K=Y-1>>>1,H=R[K];if(0<s(H,W))R[K]=W,R[Y]=H,Y=K;else break e}}function r(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],Y=R.pop();if(Y!==W){R[0]=Y;e:for(var K=0,H=R.length,Q=H>>>1;K<Q;){var G=2*(K+1)-1,X=R[G],de=G+1,ye=R[de];if(0>s(X,Y))de<H&&0>s(ye,X)?(R[K]=ye,R[de]=Y,K=de):(R[K]=X,R[G]=Y,K=G);else if(de<H&&0>s(ye,Y))R[K]=ye,R[de]=Y,K=de;else break e}}return W}function s(R,W){var Y=R.sortIndex-W.sortIndex;return Y!==0?Y:R.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,m=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(R){for(var W=r(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=R)i(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(u)}}function S(R){if(b=!1,k(R),!g)if(r(c)!==null)g=!0,F(_);else{var W=r(u);W!==null&&N(S,W.startTime-R)}}function _(R,W){g=!1,b&&(b=!1,v(T),T=-1),m=!0;var Y=f;try{for(k(W),d=r(c);d!==null&&(!(d.expirationTime>W)||R&&!I());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var H=K(d.expirationTime<=W);W=n.unstable_now(),typeof H=="function"?d.callback=H:d===r(c)&&i(c),k(W)}else i(c);d=r(c)}if(d!==null)var Q=!0;else{var G=r(u);G!==null&&N(S,G.startTime-W),Q=!1}return Q}finally{d=null,f=Y,m=!1}}var C=!1,P=null,T=-1,O=5,D=-1;function I(){return!(n.unstable_now()-D<O)}function U(){if(P!==null){var R=n.unstable_now();D=R;var W=!0;try{W=P(!0,R)}finally{W?B():(C=!1,P=null)}}else C=!1}var B;if(typeof w=="function")B=function(){w(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,j=z.port2;z.port1.onmessage=U,B=function(){j.postMessage(null)}}else B=function(){y(U,0)};function F(R){P=R,C||(C=!0,B())}function N(R,W){T=y(function(){R(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,F(_))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(R){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var Y=f;f=W;try{return R()}finally{f=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=f;f=R;try{return W()}finally{f=Y}},n.unstable_scheduleCallback=function(R,W,Y){var K=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?K+Y:K):Y=K,R){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Y+H,R={id:h++,callback:W,priorityLevel:R,startTime:Y,expirationTime:H,sortIndex:-1},Y>K?(R.sortIndex=Y,e(u,R),r(c)===null&&R===r(u)&&(b?(v(T),T=-1):b=!0,N(S,Y-K))):(R.sortIndex=H,e(c,R),g||m||(g=!0,F(_))),R},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(R){var W=f;return function(){var Y=f;f=W;try{return R.apply(this,arguments)}finally{f=Y}}}})(lX);aX.exports=lX;var Nce=aX.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jce=E,ys=Nce;function nt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cX=new Set,o0={};function Yd(n,e){ip(n,e),ip(n+"Capture",e)}function ip(n,e){for(o0[n]=e,n=0;n<e.length;n++)cX.add(e[n])}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dO=Object.prototype.hasOwnProperty,Lce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hj={},Vj={};function Fce(n){return dO.call(Vj,n)?!0:dO.call(Hj,n)?!1:Lce.test(n)?Vj[n]=!0:(Hj[n]=!0,!1)}function $ce(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Bce(n,e,r,i){if(e===null||typeof e>"u"||$ce(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Di(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Zr[n]=new Di(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Zr[e]=new Di(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Zr[n]=new Di(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Zr[n]=new Di(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Zr[n]=new Di(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Zr[n]=new Di(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Zr[n]=new Di(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Zr[n]=new Di(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Zr[n]=new Di(n,5,!1,n.toLowerCase(),null,!1,!1)});var mR=/[\-:]([a-z])/g;function gR(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(mR,gR);Zr[e]=new Di(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(mR,gR);Zr[e]=new Di(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(mR,gR);Zr[e]=new Di(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Zr[n]=new Di(n,1,!1,n.toLowerCase(),null,!1,!1)});Zr.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Zr[n]=new Di(n,1,!1,n.toLowerCase(),null,!0,!0)});function bR(n,e,r,i){var s=Zr.hasOwnProperty(e)?Zr[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bce(e,r,s,i)&&(r=null),i||s===null?Fce(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Ol=jce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oy=Symbol.for("react.element"),qh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),yR=Symbol.for("react.strict_mode"),hO=Symbol.for("react.profiler"),uX=Symbol.for("react.provider"),dX=Symbol.for("react.context"),vR=Symbol.for("react.forward_ref"),fO=Symbol.for("react.suspense"),pO=Symbol.for("react.suspense_list"),xR=Symbol.for("react.memo"),lc=Symbol.for("react.lazy"),hX=Symbol.for("react.offscreen"),Yj=Symbol.iterator;function Sm(n){return n===null||typeof n!="object"?null:(n=Yj&&n[Yj]||n["@@iterator"],typeof n=="function"?n:null)}var Jn=Object.assign,IS;function ug(n){if(IS===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);IS=e&&e[1]||""}return`
`+IS+n}var AS=!1;function RS(n,e){if(!n||AS)return"";AS=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{AS=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?ug(n):""}function zce(n){switch(n.tag){case 5:return ug(n.type);case 16:return ug("Lazy");case 13:return ug("Suspense");case 19:return ug("SuspenseList");case 0:case 2:case 15:return n=RS(n.type,!1),n;case 11:return n=RS(n.type.render,!1),n;case 1:return n=RS(n.type,!0),n;default:return""}}function mO(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Hh:return"Fragment";case qh:return"Portal";case hO:return"Profiler";case yR:return"StrictMode";case fO:return"Suspense";case pO:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dX:return(n.displayName||"Context")+".Consumer";case uX:return(n._context.displayName||"Context")+".Provider";case vR:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xR:return e=n.displayName||null,e!==null?e:mO(n.type)||"Memo";case lc:e=n._payload,n=n._init;try{return mO(n(e))}catch{}}return null}function Uce(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mO(e);case 8:return e===yR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fX(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wce(n){var e=fX(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Iy(n){n._valueTracker||(n._valueTracker=Wce(n))}function pX(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=fX(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function zx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function gO(n,e){var r=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function Gj(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Gc(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mX(n,e){e=e.checked,e!=null&&bR(n,"checked",e,!1)}function bO(n,e){mX(n,e);var r=Gc(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?yO(n,e.type,r):e.hasOwnProperty("defaultValue")&&yO(n,e.type,Gc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Kj(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function yO(n,e,r){(e!=="number"||zx(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var dg=Array.isArray;function ff(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+Gc(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function vO(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(nt(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xj(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(nt(92));if(dg(r)){if(1<r.length)throw Error(nt(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:Gc(r)}}function gX(n,e){var r=Gc(e.value),i=Gc(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function Qj(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function bX(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xO(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?bX(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ay,yX=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ay=Ay||document.createElement("div"),Ay.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ay.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function a0(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var Dg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qce=["Webkit","ms","Moz","O"];Object.keys(Dg).forEach(function(n){qce.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Dg[e]=Dg[n]})});function vX(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Dg.hasOwnProperty(n)&&Dg[n]?(""+e).trim():e+"px"}function xX(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=vX(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var Hce=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wO(n,e){if(e){if(Hce[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(nt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(nt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(nt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(nt(62))}}function _O(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SO=null;function wR(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var kO=null,pf=null,mf=null;function Jj(n){if(n=Tb(n)){if(typeof kO!="function")throw Error(nt(280));var e=n.stateNode;e&&(e=O1(e),kO(n.stateNode,n.type,e))}}function wX(n){pf?mf?mf.push(n):mf=[n]:pf=n}function _X(){if(pf){var n=pf,e=mf;if(mf=pf=null,Jj(n),e)for(n=0;n<e.length;n++)Jj(e[n])}}function SX(n,e){return n(e)}function kX(){}var NS=!1;function CX(n,e,r){if(NS)return n(e,r);NS=!0;try{return SX(n,e,r)}finally{NS=!1,(pf!==null||mf!==null)&&(kX(),_X())}}function l0(n,e){var r=n.stateNode;if(r===null)return null;var i=O1(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(nt(231,e,typeof r));return r}var CO=!1;if(Sl)try{var km={};Object.defineProperty(km,"passive",{get:function(){CO=!0}}),window.addEventListener("test",km,km),window.removeEventListener("test",km,km)}catch{CO=!1}function Vce(n,e,r,i,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Og=!1,Ux=null,Wx=!1,EO=null,Yce={onError:function(n){Og=!0,Ux=n}};function Gce(n,e,r,i,s,o,a,l,c){Og=!1,Ux=null,Vce.apply(Yce,arguments)}function Kce(n,e,r,i,s,o,a,l,c){if(Gce.apply(this,arguments),Og){if(Og){var u=Ux;Og=!1,Ux=null}else throw Error(nt(198));Wx||(Wx=!0,EO=u)}}function Gd(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function EX(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Zj(n){if(Gd(n)!==n)throw Error(nt(188))}function Xce(n){var e=n.alternate;if(!e){if(e=Gd(n),e===null)throw Error(nt(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Zj(s),n;if(o===i)return Zj(s),e;o=o.sibling}throw Error(nt(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(nt(189))}}if(r.alternate!==i)throw Error(nt(190))}if(r.tag!==3)throw Error(nt(188));return r.stateNode.current===r?n:e}function TX(n){return n=Xce(n),n!==null?PX(n):null}function PX(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=PX(n);if(e!==null)return e;n=n.sibling}return null}var MX=ys.unstable_scheduleCallback,e4=ys.unstable_cancelCallback,Qce=ys.unstable_shouldYield,Jce=ys.unstable_requestPaint,dr=ys.unstable_now,Zce=ys.unstable_getCurrentPriorityLevel,_R=ys.unstable_ImmediatePriority,DX=ys.unstable_UserBlockingPriority,qx=ys.unstable_NormalPriority,eue=ys.unstable_LowPriority,OX=ys.unstable_IdlePriority,T1=null,ua=null;function tue(n){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(T1,n,void 0,(n.current.flags&128)===128)}catch{}}var Co=Math.clz32?Math.clz32:iue,nue=Math.log,rue=Math.LN2;function iue(n){return n>>>=0,n===0?32:31-(nue(n)/rue|0)|0}var Ry=64,Ny=4194304;function hg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hx(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=hg(l):(o&=a,o!==0&&(i=hg(o)))}else a=r&~s,a!==0?i=hg(a):o!==0&&(i=hg(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-Co(e),s=1<<r,i|=n[r],e&=~s;return i}function sue(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oue(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-Co(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&i)&&(s[a]=sue(l,e)):c<=e&&(n.expiredLanes|=l),o&=~l}}function TO(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function IX(){var n=Ry;return Ry<<=1,!(Ry&4194240)&&(Ry=64),n}function jS(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function Cb(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Co(e),n[e]=r}function aue(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-Co(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function SR(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-Co(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var bn=0;function AX(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var RX,kR,NX,jX,LX,PO=!1,jy=[],Oc=null,Ic=null,Ac=null,c0=new Map,u0=new Map,uc=[],lue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t4(n,e){switch(n){case"focusin":case"focusout":Oc=null;break;case"dragenter":case"dragleave":Ic=null;break;case"mouseover":case"mouseout":Ac=null;break;case"pointerover":case"pointerout":c0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":u0.delete(e.pointerId)}}function Cm(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Tb(e),e!==null&&kR(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function cue(n,e,r,i,s){switch(e){case"focusin":return Oc=Cm(Oc,n,e,r,i,s),!0;case"dragenter":return Ic=Cm(Ic,n,e,r,i,s),!0;case"mouseover":return Ac=Cm(Ac,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return c0.set(o,Cm(c0.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,u0.set(o,Cm(u0.get(o)||null,n,e,r,i,s)),!0}return!1}function FX(n){var e=Hu(n.target);if(e!==null){var r=Gd(e);if(r!==null){if(e=r.tag,e===13){if(e=EX(r),e!==null){n.blockedOn=e,LX(n.priority,function(){NX(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ix(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=MO(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);SO=i,r.target.dispatchEvent(i),SO=null}else return e=Tb(r),e!==null&&kR(e),n.blockedOn=r,!1;e.shift()}return!0}function n4(n,e,r){ix(n)&&r.delete(e)}function uue(){PO=!1,Oc!==null&&ix(Oc)&&(Oc=null),Ic!==null&&ix(Ic)&&(Ic=null),Ac!==null&&ix(Ac)&&(Ac=null),c0.forEach(n4),u0.forEach(n4)}function Em(n,e){n.blockedOn===e&&(n.blockedOn=null,PO||(PO=!0,ys.unstable_scheduleCallback(ys.unstable_NormalPriority,uue)))}function d0(n){function e(s){return Em(s,n)}if(0<jy.length){Em(jy[0],n);for(var r=1;r<jy.length;r++){var i=jy[r];i.blockedOn===n&&(i.blockedOn=null)}}for(Oc!==null&&Em(Oc,n),Ic!==null&&Em(Ic,n),Ac!==null&&Em(Ac,n),c0.forEach(e),u0.forEach(e),r=0;r<uc.length;r++)i=uc[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<uc.length&&(r=uc[0],r.blockedOn===null);)FX(r),r.blockedOn===null&&uc.shift()}var gf=Ol.ReactCurrentBatchConfig,Vx=!0;function due(n,e,r,i){var s=bn,o=gf.transition;gf.transition=null;try{bn=1,CR(n,e,r,i)}finally{bn=s,gf.transition=o}}function hue(n,e,r,i){var s=bn,o=gf.transition;gf.transition=null;try{bn=4,CR(n,e,r,i)}finally{bn=s,gf.transition=o}}function CR(n,e,r,i){if(Vx){var s=MO(n,e,r,i);if(s===null)VS(n,e,i,Yx,r),t4(n,i);else if(cue(s,n,e,r,i))i.stopPropagation();else if(t4(n,i),e&4&&-1<lue.indexOf(n)){for(;s!==null;){var o=Tb(s);if(o!==null&&RX(o),o=MO(n,e,r,i),o===null&&VS(n,e,i,Yx,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else VS(n,e,i,null,r)}}var Yx=null;function MO(n,e,r,i){if(Yx=null,n=wR(i),n=Hu(n),n!==null)if(e=Gd(n),e===null)n=null;else if(r=e.tag,r===13){if(n=EX(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Yx=n,null}function $X(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zce()){case _R:return 1;case DX:return 4;case qx:case eue:return 16;case OX:return 536870912;default:return 16}default:return 16}}var Cc=null,ER=null,sx=null;function BX(){if(sx)return sx;var n,e=ER,r=e.length,i,s="value"in Cc?Cc.value:Cc.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return sx=s.slice(n,1<i?1-i:void 0)}function ox(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ly(){return!0}function r4(){return!1}function _s(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ly:r4,this.isPropagationStopped=r4,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ly)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ly)},persist:function(){},isPersistent:Ly}),e}var Vp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TR=_s(Vp),Eb=Jn({},Vp,{view:0,detail:0}),fue=_s(Eb),LS,FS,Tm,P1=Jn({},Eb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PR,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Tm&&(Tm&&n.type==="mousemove"?(LS=n.screenX-Tm.screenX,FS=n.screenY-Tm.screenY):FS=LS=0,Tm=n),LS)},movementY:function(n){return"movementY"in n?n.movementY:FS}}),i4=_s(P1),pue=Jn({},P1,{dataTransfer:0}),mue=_s(pue),gue=Jn({},Eb,{relatedTarget:0}),$S=_s(gue),bue=Jn({},Vp,{animationName:0,elapsedTime:0,pseudoElement:0}),yue=_s(bue),vue=Jn({},Vp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xue=_s(vue),wue=Jn({},Vp,{data:0}),s4=_s(wue),_ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cue(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=kue[n])?!!e[n]:!1}function PR(){return Cue}var Eue=Jn({},Eb,{key:function(n){if(n.key){var e=_ue[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ox(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sue[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PR,charCode:function(n){return n.type==="keypress"?ox(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ox(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Tue=_s(Eue),Pue=Jn({},P1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o4=_s(Pue),Mue=Jn({},Eb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PR}),Due=_s(Mue),Oue=Jn({},Vp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iue=_s(Oue),Aue=Jn({},P1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Rue=_s(Aue),Nue=[9,13,27,32],MR=Sl&&"CompositionEvent"in window,Ig=null;Sl&&"documentMode"in document&&(Ig=document.documentMode);var jue=Sl&&"TextEvent"in window&&!Ig,zX=Sl&&(!MR||Ig&&8<Ig&&11>=Ig),a4=" ",l4=!1;function UX(n,e){switch(n){case"keyup":return Nue.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WX(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vh=!1;function Lue(n,e){switch(n){case"compositionend":return WX(e);case"keypress":return e.which!==32?null:(l4=!0,a4);case"textInput":return n=e.data,n===a4&&l4?null:n;default:return null}}function Fue(n,e){if(Vh)return n==="compositionend"||!MR&&UX(n,e)?(n=BX(),sx=ER=Cc=null,Vh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zX&&e.locale!=="ko"?null:e.data;default:return null}}var $ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c4(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!$ue[n.type]:e==="textarea"}function qX(n,e,r,i){wX(i),e=Gx(e,"onChange"),0<e.length&&(r=new TR("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var Ag=null,h0=null;function Bue(n){tQ(n,0)}function M1(n){var e=Kh(n);if(pX(e))return n}function zue(n,e){if(n==="change")return e}var HX=!1;if(Sl){var BS;if(Sl){var zS="oninput"in document;if(!zS){var u4=document.createElement("div");u4.setAttribute("oninput","return;"),zS=typeof u4.oninput=="function"}BS=zS}else BS=!1;HX=BS&&(!document.documentMode||9<document.documentMode)}function d4(){Ag&&(Ag.detachEvent("onpropertychange",VX),h0=Ag=null)}function VX(n){if(n.propertyName==="value"&&M1(h0)){var e=[];qX(e,h0,n,wR(n)),CX(Bue,e)}}function Uue(n,e,r){n==="focusin"?(d4(),Ag=e,h0=r,Ag.attachEvent("onpropertychange",VX)):n==="focusout"&&d4()}function Wue(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return M1(h0)}function que(n,e){if(n==="click")return M1(e)}function Hue(n,e){if(n==="input"||n==="change")return M1(e)}function Vue(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Po=typeof Object.is=="function"?Object.is:Vue;function f0(n,e){if(Po(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!dO.call(e,s)||!Po(n[s],e[s]))return!1}return!0}function h4(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function f4(n,e){var r=h4(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h4(r)}}function YX(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?YX(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function GX(){for(var n=window,e=zx();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=zx(n.document)}return e}function DR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Yue(n){var e=GX(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&YX(r.ownerDocument.documentElement,r)){if(i!==null&&DR(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=f4(r,o);var a=f4(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Gue=Sl&&"documentMode"in document&&11>=document.documentMode,Yh=null,DO=null,Rg=null,OO=!1;function p4(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;OO||Yh==null||Yh!==zx(i)||(i=Yh,"selectionStart"in i&&DR(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rg&&f0(Rg,i)||(Rg=i,i=Gx(DO,"onSelect"),0<i.length&&(e=new TR("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=Yh)))}function Fy(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var Gh={animationend:Fy("Animation","AnimationEnd"),animationiteration:Fy("Animation","AnimationIteration"),animationstart:Fy("Animation","AnimationStart"),transitionend:Fy("Transition","TransitionEnd")},US={},KX={};Sl&&(KX=document.createElement("div").style,"AnimationEvent"in window||(delete Gh.animationend.animation,delete Gh.animationiteration.animation,delete Gh.animationstart.animation),"TransitionEvent"in window||delete Gh.transitionend.transition);function D1(n){if(US[n])return US[n];if(!Gh[n])return n;var e=Gh[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in KX)return US[n]=e[r];return n}var XX=D1("animationend"),QX=D1("animationiteration"),JX=D1("animationstart"),ZX=D1("transitionend"),eQ=new Map,m4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eu(n,e){eQ.set(n,e),Yd(e,[n])}for(var WS=0;WS<m4.length;WS++){var qS=m4[WS],Kue=qS.toLowerCase(),Xue=qS[0].toUpperCase()+qS.slice(1);eu(Kue,"on"+Xue)}eu(XX,"onAnimationEnd");eu(QX,"onAnimationIteration");eu(JX,"onAnimationStart");eu("dblclick","onDoubleClick");eu("focusin","onFocus");eu("focusout","onBlur");eu(ZX,"onTransitionEnd");ip("onMouseEnter",["mouseout","mouseover"]);ip("onMouseLeave",["mouseout","mouseover"]);ip("onPointerEnter",["pointerout","pointerover"]);ip("onPointerLeave",["pointerout","pointerover"]);Yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Que=new Set("cancel close invalid load scroll toggle".split(" ").concat(fg));function g4(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,Kce(i,e,void 0,n),n.currentTarget=null}function tQ(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;g4(s,l,u),o=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;g4(s,l,u),o=c}}}if(Wx)throw n=EO,Wx=!1,EO=null,n}function Nn(n,e){var r=e[jO];r===void 0&&(r=e[jO]=new Set);var i=n+"__bubble";r.has(i)||(nQ(e,n,2,!1),r.add(i))}function HS(n,e,r){var i=0;e&&(i|=4),nQ(r,n,i,e)}var $y="_reactListening"+Math.random().toString(36).slice(2);function p0(n){if(!n[$y]){n[$y]=!0,cX.forEach(function(r){r!=="selectionchange"&&(Que.has(r)||HS(r,!1,n),HS(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[$y]||(e[$y]=!0,HS("selectionchange",!1,e))}}function nQ(n,e,r,i){switch($X(e)){case 1:var s=due;break;case 4:s=hue;break;default:s=CR}r=s.bind(null,e,r,n),s=void 0,!CO||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function VS(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Hu(l),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}l=l.parentNode}}i=i.return}CX(function(){var u=o,h=wR(r),d=[];e:{var f=eQ.get(n);if(f!==void 0){var m=TR,g=n;switch(n){case"keypress":if(ox(r)===0)break e;case"keydown":case"keyup":m=Tue;break;case"focusin":g="focus",m=$S;break;case"focusout":g="blur",m=$S;break;case"beforeblur":case"afterblur":m=$S;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=i4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Due;break;case XX:case QX:case JX:m=yue;break;case ZX:m=Iue;break;case"scroll":m=fue;break;case"wheel":m=Rue;break;case"copy":case"cut":case"paste":m=xue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=o4}var b=(e&4)!==0,y=!b&&n==="scroll",v=b?f!==null?f+"Capture":null:f;b=[];for(var w=u,k;w!==null;){k=w;var S=k.stateNode;if(k.tag===5&&S!==null&&(k=S,v!==null&&(S=l0(w,v),S!=null&&b.push(m0(w,S,k)))),y)break;w=w.return}0<b.length&&(f=new m(f,g,null,r,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&r!==SO&&(g=r.relatedTarget||r.fromElement)&&(Hu(g)||g[kl]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Hu(g):null,g!==null&&(y=Gd(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(b=i4,S="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(b=o4,S="onPointerLeave",v="onPointerEnter",w="pointer"),y=m==null?f:Kh(m),k=g==null?f:Kh(g),f=new b(S,w+"leave",m,r,h),f.target=y,f.relatedTarget=k,S=null,Hu(h)===u&&(b=new b(v,w+"enter",g,r,h),b.target=k,b.relatedTarget=y,S=b),y=S,m&&g)t:{for(b=m,v=g,w=0,k=b;k;k=wh(k))w++;for(k=0,S=v;S;S=wh(S))k++;for(;0<w-k;)b=wh(b),w--;for(;0<k-w;)v=wh(v),k--;for(;w--;){if(b===v||v!==null&&b===v.alternate)break t;b=wh(b),v=wh(v)}b=null}else b=null;m!==null&&b4(d,f,m,b,!1),g!==null&&y!==null&&b4(d,y,g,b,!0)}}e:{if(f=u?Kh(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=zue;else if(c4(f))if(HX)_=Hue;else{_=Wue;var C=Uue}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=que);if(_&&(_=_(n,u))){qX(d,_,r,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&yO(f,"number",f.value)}switch(C=u?Kh(u):window,n){case"focusin":(c4(C)||C.contentEditable==="true")&&(Yh=C,DO=u,Rg=null);break;case"focusout":Rg=DO=Yh=null;break;case"mousedown":OO=!0;break;case"contextmenu":case"mouseup":case"dragend":OO=!1,p4(d,r,h);break;case"selectionchange":if(Gue)break;case"keydown":case"keyup":p4(d,r,h)}var P;if(MR)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vh?UX(n,r)&&(T="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(zX&&r.locale!=="ko"&&(Vh||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vh&&(P=BX()):(Cc=h,ER="value"in Cc?Cc.value:Cc.textContent,Vh=!0)),C=Gx(u,T),0<C.length&&(T=new s4(T,n,null,r,h),d.push({event:T,listeners:C}),P?T.data=P:(P=WX(r),P!==null&&(T.data=P)))),(P=jue?Lue(n,r):Fue(n,r))&&(u=Gx(u,"onBeforeInput"),0<u.length&&(h=new s4("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=P))}tQ(d,e)})}function m0(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Gx(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=l0(n,r),o!=null&&i.unshift(m0(n,o,s)),o=l0(n,e),o!=null&&i.push(m0(n,o,s))),n=n.return}return i}function wh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function b4(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=l0(r,o),c!=null&&a.unshift(m0(r,c,l))):s||(c=l0(r,o),c!=null&&a.push(m0(r,c,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var Jue=/\r\n?/g,Zue=/\u0000|\uFFFD/g;function y4(n){return(typeof n=="string"?n:""+n).replace(Jue,`
`).replace(Zue,"")}function By(n,e,r){if(e=y4(e),y4(n)!==e&&r)throw Error(nt(425))}function Kx(){}var IO=null,AO=null;function RO(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NO=typeof setTimeout=="function"?setTimeout:void 0,ede=typeof clearTimeout=="function"?clearTimeout:void 0,v4=typeof Promise=="function"?Promise:void 0,tde=typeof queueMicrotask=="function"?queueMicrotask:typeof v4<"u"?function(n){return v4.resolve(null).then(n).catch(nde)}:NO;function nde(n){setTimeout(function(){throw n})}function YS(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),d0(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);d0(e)}function Rc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function x4(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var Yp=Math.random().toString(36).slice(2),ia="__reactFiber$"+Yp,g0="__reactProps$"+Yp,kl="__reactContainer$"+Yp,jO="__reactEvents$"+Yp,rde="__reactListeners$"+Yp,ide="__reactHandles$"+Yp;function Hu(n){var e=n[ia];if(e)return e;for(var r=n.parentNode;r;){if(e=r[kl]||r[ia]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=x4(n);n!==null;){if(r=n[ia])return r;n=x4(n)}return e}n=r,r=n.parentNode}return null}function Tb(n){return n=n[ia]||n[kl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Kh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(nt(33))}function O1(n){return n[g0]||null}var LO=[],Xh=-1;function tu(n){return{current:n}}function Ln(n){0>Xh||(n.current=LO[Xh],LO[Xh]=null,Xh--)}function Dn(n,e){Xh++,LO[Xh]=n.current,n.current=e}var Kc={},ui=tu(Kc),Wi=tu(!1),kd=Kc;function sp(n,e){var r=n.type.contextTypes;if(!r)return Kc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function qi(n){return n=n.childContextTypes,n!=null}function Xx(){Ln(Wi),Ln(ui)}function w4(n,e,r){if(ui.current!==Kc)throw Error(nt(168));Dn(ui,e),Dn(Wi,r)}function rQ(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(nt(108,Uce(n)||"Unknown",s));return Jn({},r,i)}function Qx(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kc,kd=ui.current,Dn(ui,n),Dn(Wi,Wi.current),!0}function _4(n,e,r){var i=n.stateNode;if(!i)throw Error(nt(169));r?(n=rQ(n,e,kd),i.__reactInternalMemoizedMergedChildContext=n,Ln(Wi),Ln(ui),Dn(ui,n)):Ln(Wi),Dn(Wi,r)}var Va=null,I1=!1,GS=!1;function iQ(n){Va===null?Va=[n]:Va.push(n)}function sde(n){I1=!0,iQ(n)}function nu(){if(!GS&&Va!==null){GS=!0;var n=0,e=bn;try{var r=Va;for(bn=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}Va=null,I1=!1}catch(s){throw Va!==null&&(Va=Va.slice(n+1)),MX(_R,nu),s}finally{bn=e,GS=!1}}return null}var Qh=[],Jh=0,Jx=null,Zx=0,Us=[],Ws=0,Cd=null,il=1,sl="";function Ou(n,e){Qh[Jh++]=Zx,Qh[Jh++]=Jx,Jx=n,Zx=e}function sQ(n,e,r){Us[Ws++]=il,Us[Ws++]=sl,Us[Ws++]=Cd,Cd=n;var i=il;n=sl;var s=32-Co(i)-1;i&=~(1<<s),r+=1;var o=32-Co(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,il=1<<32-Co(e)+s|r<<s|i,sl=o+n}else il=1<<o|r<<s|i,sl=n}function OR(n){n.return!==null&&(Ou(n,1),sQ(n,1,0))}function IR(n){for(;n===Jx;)Jx=Qh[--Jh],Qh[Jh]=null,Zx=Qh[--Jh],Qh[Jh]=null;for(;n===Cd;)Cd=Us[--Ws],Us[Ws]=null,sl=Us[--Ws],Us[Ws]=null,il=Us[--Ws],Us[Ws]=null}var fs=null,hs=null,Yn=!1,xo=null;function oQ(n,e){var r=Hs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function S4(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fs=n,hs=Rc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fs=n,hs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Cd!==null?{id:il,overflow:sl}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Hs(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,fs=n,hs=null,!0):!1;default:return!1}}function FO(n){return(n.mode&1)!==0&&(n.flags&128)===0}function $O(n){if(Yn){var e=hs;if(e){var r=e;if(!S4(n,e)){if(FO(n))throw Error(nt(418));e=Rc(r.nextSibling);var i=fs;e&&S4(n,e)?oQ(i,r):(n.flags=n.flags&-4097|2,Yn=!1,fs=n)}}else{if(FO(n))throw Error(nt(418));n.flags=n.flags&-4097|2,Yn=!1,fs=n}}}function k4(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fs=n}function zy(n){if(n!==fs)return!1;if(!Yn)return k4(n),Yn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!RO(n.type,n.memoizedProps)),e&&(e=hs)){if(FO(n))throw aQ(),Error(nt(418));for(;e;)oQ(n,e),e=Rc(e.nextSibling)}if(k4(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(nt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){hs=Rc(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}hs=null}}else hs=fs?Rc(n.stateNode.nextSibling):null;return!0}function aQ(){for(var n=hs;n;)n=Rc(n.nextSibling)}function op(){hs=fs=null,Yn=!1}function AR(n){xo===null?xo=[n]:xo.push(n)}var ode=Ol.ReactCurrentBatchConfig;function Pm(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(nt(309));var i=r.stateNode}if(!i)throw Error(nt(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(nt(284));if(!r._owner)throw Error(nt(290,n))}return n}function Uy(n,e){throw n=Object.prototype.toString.call(e),Error(nt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function C4(n){var e=n._init;return e(n._payload)}function lQ(n){function e(v,w){if(n){var k=v.deletions;k===null?(v.deletions=[w],v.flags|=16):k.push(w)}}function r(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Fc(v,w),v.index=0,v.sibling=null,v}function o(v,w,k){return v.index=k,n?(k=v.alternate,k!==null?(k=k.index,k<w?(v.flags|=2,w):k):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,w,k,S){return w===null||w.tag!==6?(w=tk(k,v.mode,S),w.return=v,w):(w=s(w,k),w.return=v,w)}function c(v,w,k,S){var _=k.type;return _===Hh?h(v,w,k.props.children,S,k.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===lc&&C4(_)===w.type)?(S=s(w,k.props),S.ref=Pm(v,w,k),S.return=v,S):(S=fx(k.type,k.key,k.props,null,v.mode,S),S.ref=Pm(v,w,k),S.return=v,S)}function u(v,w,k,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=nk(k,v.mode,S),w.return=v,w):(w=s(w,k.children||[]),w.return=v,w)}function h(v,w,k,S,_){return w===null||w.tag!==7?(w=fd(k,v.mode,S,_),w.return=v,w):(w=s(w,k),w.return=v,w)}function d(v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tk(""+w,v.mode,k),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oy:return k=fx(w.type,w.key,w.props,null,v.mode,k),k.ref=Pm(v,null,w),k.return=v,k;case qh:return w=nk(w,v.mode,k),w.return=v,w;case lc:var S=w._init;return d(v,S(w._payload),k)}if(dg(w)||Sm(w))return w=fd(w,v.mode,k,null),w.return=v,w;Uy(v,w)}return null}function f(v,w,k,S){var _=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return _!==null?null:l(v,w,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Oy:return k.key===_?c(v,w,k,S):null;case qh:return k.key===_?u(v,w,k,S):null;case lc:return _=k._init,f(v,w,_(k._payload),S)}if(dg(k)||Sm(k))return _!==null?null:h(v,w,k,S,null);Uy(v,k)}return null}function m(v,w,k,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(k)||null,l(w,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Oy:return v=v.get(S.key===null?k:S.key)||null,c(w,v,S,_);case qh:return v=v.get(S.key===null?k:S.key)||null,u(w,v,S,_);case lc:var C=S._init;return m(v,w,k,C(S._payload),_)}if(dg(S)||Sm(S))return v=v.get(k)||null,h(w,v,S,_,null);Uy(w,S)}return null}function g(v,w,k,S){for(var _=null,C=null,P=w,T=w=0,O=null;P!==null&&T<k.length;T++){P.index>T?(O=P,P=null):O=P.sibling;var D=f(v,P,k[T],S);if(D===null){P===null&&(P=O);break}n&&P&&D.alternate===null&&e(v,P),w=o(D,w,T),C===null?_=D:C.sibling=D,C=D,P=O}if(T===k.length)return r(v,P),Yn&&Ou(v,T),_;if(P===null){for(;T<k.length;T++)P=d(v,k[T],S),P!==null&&(w=o(P,w,T),C===null?_=P:C.sibling=P,C=P);return Yn&&Ou(v,T),_}for(P=i(v,P);T<k.length;T++)O=m(P,v,T,k[T],S),O!==null&&(n&&O.alternate!==null&&P.delete(O.key===null?T:O.key),w=o(O,w,T),C===null?_=O:C.sibling=O,C=O);return n&&P.forEach(function(I){return e(v,I)}),Yn&&Ou(v,T),_}function b(v,w,k,S){var _=Sm(k);if(typeof _!="function")throw Error(nt(150));if(k=_.call(k),k==null)throw Error(nt(151));for(var C=_=null,P=w,T=w=0,O=null,D=k.next();P!==null&&!D.done;T++,D=k.next()){P.index>T?(O=P,P=null):O=P.sibling;var I=f(v,P,D.value,S);if(I===null){P===null&&(P=O);break}n&&P&&I.alternate===null&&e(v,P),w=o(I,w,T),C===null?_=I:C.sibling=I,C=I,P=O}if(D.done)return r(v,P),Yn&&Ou(v,T),_;if(P===null){for(;!D.done;T++,D=k.next())D=d(v,D.value,S),D!==null&&(w=o(D,w,T),C===null?_=D:C.sibling=D,C=D);return Yn&&Ou(v,T),_}for(P=i(v,P);!D.done;T++,D=k.next())D=m(P,v,T,D.value,S),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?T:D.key),w=o(D,w,T),C===null?_=D:C.sibling=D,C=D);return n&&P.forEach(function(U){return e(v,U)}),Yn&&Ou(v,T),_}function y(v,w,k,S){if(typeof k=="object"&&k!==null&&k.type===Hh&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Oy:e:{for(var _=k.key,C=w;C!==null;){if(C.key===_){if(_=k.type,_===Hh){if(C.tag===7){r(v,C.sibling),w=s(C,k.props.children),w.return=v,v=w;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===lc&&C4(_)===C.type){r(v,C.sibling),w=s(C,k.props),w.ref=Pm(v,C,k),w.return=v,v=w;break e}r(v,C);break}else e(v,C);C=C.sibling}k.type===Hh?(w=fd(k.props.children,v.mode,S,k.key),w.return=v,v=w):(S=fx(k.type,k.key,k.props,null,v.mode,S),S.ref=Pm(v,w,k),S.return=v,v=S)}return a(v);case qh:e:{for(C=k.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){r(v,w.sibling),w=s(w,k.children||[]),w.return=v,v=w;break e}else{r(v,w);break}else e(v,w);w=w.sibling}w=nk(k,v.mode,S),w.return=v,v=w}return a(v);case lc:return C=k._init,y(v,w,C(k._payload),S)}if(dg(k))return g(v,w,k,S);if(Sm(k))return b(v,w,k,S);Uy(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(r(v,w.sibling),w=s(w,k),w.return=v,v=w):(r(v,w),w=tk(k,v.mode,S),w.return=v,v=w),a(v)):r(v,w)}return y}var ap=lQ(!0),cQ=lQ(!1),ew=tu(null),tw=null,Zh=null,RR=null;function NR(){RR=Zh=tw=null}function jR(n){var e=ew.current;Ln(ew),n._currentValue=e}function BO(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function bf(n,e){tw=n,RR=Zh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zi=!0),n.firstContext=null)}function Qs(n){var e=n._currentValue;if(RR!==n)if(n={context:n,memoizedValue:e,next:null},Zh===null){if(tw===null)throw Error(nt(308));Zh=n,tw.dependencies={lanes:0,firstContext:n}}else Zh=Zh.next=n;return e}var Vu=null;function LR(n){Vu===null?Vu=[n]:Vu.push(n)}function uQ(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,LR(e)):(r.next=s.next,s.next=r),e.interleaved=r,Cl(n,i)}function Cl(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var cc=!1;function FR(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dQ(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function dl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Nc(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,on&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Cl(n,r)}return s=i.interleaved,s===null?(e.next=e,LR(i)):(e.next=s.next,s.next=e),i.interleaved=e,Cl(n,r)}function ax(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,SR(n,r)}}function E4(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function nw(n,e,r,i){var s=n.updateQueue;cc=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;a=0,h=u=c=null,l=o;do{var f=l.lane,m=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,b=l;switch(f=e,m=r,b.tag){case 1:if(g=b.payload,typeof g=="function"){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,f=typeof g=="function"?g.call(m,d,f):g,f==null)break e;d=Jn({},d,f);break e;case 2:cc=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,c=d):h=h.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Td|=a,n.lanes=a,n.memoizedState=d}}function T4(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(nt(191,s));s.call(i)}}}var Pb={},da=tu(Pb),b0=tu(Pb),y0=tu(Pb);function Yu(n){if(n===Pb)throw Error(nt(174));return n}function $R(n,e){switch(Dn(y0,e),Dn(b0,n),Dn(da,Pb),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xO(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=xO(e,n)}Ln(da),Dn(da,e)}function lp(){Ln(da),Ln(b0),Ln(y0)}function hQ(n){Yu(y0.current);var e=Yu(da.current),r=xO(e,n.type);e!==r&&(Dn(b0,n),Dn(da,r))}function BR(n){b0.current===n&&(Ln(da),Ln(b0))}var Xn=tu(0);function rw(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var KS=[];function zR(){for(var n=0;n<KS.length;n++)KS[n]._workInProgressVersionPrimary=null;KS.length=0}var lx=Ol.ReactCurrentDispatcher,XS=Ol.ReactCurrentBatchConfig,Ed=0,Qn=null,Cr=null,Or=null,iw=!1,Ng=!1,v0=0,ade=0;function ti(){throw Error(nt(321))}function UR(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!Po(n[r],e[r]))return!1;return!0}function WR(n,e,r,i,s,o){if(Ed=o,Qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lx.current=n===null||n.memoizedState===null?dde:hde,n=r(i,s),Ng){o=0;do{if(Ng=!1,v0=0,25<=o)throw Error(nt(301));o+=1,Or=Cr=null,e.updateQueue=null,lx.current=fde,n=r(i,s)}while(Ng)}if(lx.current=sw,e=Cr!==null&&Cr.next!==null,Ed=0,Or=Cr=Qn=null,iw=!1,e)throw Error(nt(300));return n}function qR(){var n=v0!==0;return v0=0,n}function Vo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Qn.memoizedState=Or=n:Or=Or.next=n,Or}function Js(){if(Cr===null){var n=Qn.alternate;n=n!==null?n.memoizedState:null}else n=Cr.next;var e=Or===null?Qn.memoizedState:Or.next;if(e!==null)Or=e,Cr=n;else{if(n===null)throw Error(nt(310));Cr=n,n={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Or===null?Qn.memoizedState=Or=n:Or=Or.next=n}return Or}function x0(n,e){return typeof e=="function"?e(n):e}function QS(n){var e=Js(),r=e.queue;if(r===null)throw Error(nt(311));r.lastRenderedReducer=n;var i=Cr,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((Ed&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=i):c=c.next=d,Qn.lanes|=h,Td|=h}u=u.next}while(u!==null&&u!==o);c===null?a=i:c.next=l,Po(i,e.memoizedState)||(zi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Qn.lanes|=o,Td|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function JS(n){var e=Js(),r=e.queue;if(r===null)throw Error(nt(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);Po(o,e.memoizedState)||(zi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function fQ(){}function pQ(n,e){var r=Qn,i=Js(),s=e(),o=!Po(i.memoizedState,s);if(o&&(i.memoizedState=s,zi=!0),i=i.queue,HR(bQ.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,w0(9,gQ.bind(null,r,i,s,e),void 0,null),Lr===null)throw Error(nt(349));Ed&30||mQ(r,e,s)}return s}function mQ(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function gQ(n,e,r,i){e.value=r,e.getSnapshot=i,yQ(e)&&vQ(n)}function bQ(n,e,r){return r(function(){yQ(e)&&vQ(n)})}function yQ(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!Po(n,r)}catch{return!0}}function vQ(n){var e=Cl(n,1);e!==null&&Eo(e,n,1,-1)}function P4(n){var e=Vo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x0,lastRenderedState:n},e.queue=n,n=n.dispatch=ude.bind(null,Qn,n),[e.memoizedState,n]}function w0(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function xQ(){return Js().memoizedState}function cx(n,e,r,i){var s=Vo();Qn.flags|=n,s.memoizedState=w0(1|e,r,void 0,i===void 0?null:i)}function A1(n,e,r,i){var s=Js();i=i===void 0?null:i;var o=void 0;if(Cr!==null){var a=Cr.memoizedState;if(o=a.destroy,i!==null&&UR(i,a.deps)){s.memoizedState=w0(e,r,o,i);return}}Qn.flags|=n,s.memoizedState=w0(1|e,r,o,i)}function M4(n,e){return cx(8390656,8,n,e)}function HR(n,e){return A1(2048,8,n,e)}function wQ(n,e){return A1(4,2,n,e)}function _Q(n,e){return A1(4,4,n,e)}function SQ(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function kQ(n,e,r){return r=r!=null?r.concat([n]):null,A1(4,4,SQ.bind(null,e,n),r)}function VR(){}function CQ(n,e){var r=Js();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&UR(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function EQ(n,e){var r=Js();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&UR(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function TQ(n,e,r){return Ed&21?(Po(r,e)||(r=IX(),Qn.lanes|=r,Td|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zi=!0),n.memoizedState=r)}function lde(n,e){var r=bn;bn=r!==0&&4>r?r:4,n(!0);var i=XS.transition;XS.transition={};try{n(!1),e()}finally{bn=r,XS.transition=i}}function PQ(){return Js().memoizedState}function cde(n,e,r){var i=Lc(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},MQ(n))DQ(e,r);else if(r=uQ(n,e,r,i),r!==null){var s=Ci();Eo(r,n,i,s),OQ(r,e,i)}}function ude(n,e,r){var i=Lc(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(MQ(n))DQ(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Po(l,a)){var c=e.interleaved;c===null?(s.next=s,LR(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=uQ(n,e,s,i),r!==null&&(s=Ci(),Eo(r,n,i,s),OQ(r,e,i))}}function MQ(n){var e=n.alternate;return n===Qn||e!==null&&e===Qn}function DQ(n,e){Ng=iw=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function OQ(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,SR(n,r)}}var sw={readContext:Qs,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},dde={readContext:Qs,useCallback:function(n,e){return Vo().memoizedState=[n,e===void 0?null:e],n},useContext:Qs,useEffect:M4,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,cx(4194308,4,SQ.bind(null,e,n),r)},useLayoutEffect:function(n,e){return cx(4194308,4,n,e)},useInsertionEffect:function(n,e){return cx(4,2,n,e)},useMemo:function(n,e){var r=Vo();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Vo();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=cde.bind(null,Qn,n),[i.memoizedState,n]},useRef:function(n){var e=Vo();return n={current:n},e.memoizedState=n},useState:P4,useDebugValue:VR,useDeferredValue:function(n){return Vo().memoizedState=n},useTransition:function(){var n=P4(!1),e=n[0];return n=lde.bind(null,n[1]),Vo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Qn,s=Vo();if(Yn){if(r===void 0)throw Error(nt(407));r=r()}else{if(r=e(),Lr===null)throw Error(nt(349));Ed&30||mQ(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,M4(bQ.bind(null,i,o,n),[n]),i.flags|=2048,w0(9,gQ.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Vo(),e=Lr.identifierPrefix;if(Yn){var r=sl,i=il;r=(i&~(1<<32-Co(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=v0++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ade++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},hde={readContext:Qs,useCallback:CQ,useContext:Qs,useEffect:HR,useImperativeHandle:kQ,useInsertionEffect:wQ,useLayoutEffect:_Q,useMemo:EQ,useReducer:QS,useRef:xQ,useState:function(){return QS(x0)},useDebugValue:VR,useDeferredValue:function(n){var e=Js();return TQ(e,Cr.memoizedState,n)},useTransition:function(){var n=QS(x0)[0],e=Js().memoizedState;return[n,e]},useMutableSource:fQ,useSyncExternalStore:pQ,useId:PQ,unstable_isNewReconciler:!1},fde={readContext:Qs,useCallback:CQ,useContext:Qs,useEffect:HR,useImperativeHandle:kQ,useInsertionEffect:wQ,useLayoutEffect:_Q,useMemo:EQ,useReducer:JS,useRef:xQ,useState:function(){return JS(x0)},useDebugValue:VR,useDeferredValue:function(n){var e=Js();return Cr===null?e.memoizedState=n:TQ(e,Cr.memoizedState,n)},useTransition:function(){var n=JS(x0)[0],e=Js().memoizedState;return[n,e]},useMutableSource:fQ,useSyncExternalStore:pQ,useId:PQ,unstable_isNewReconciler:!1};function fo(n,e){if(n&&n.defaultProps){e=Jn({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function zO(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Jn({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var R1={isMounted:function(n){return(n=n._reactInternals)?Gd(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Ci(),s=Lc(n),o=dl(i,s);o.payload=e,r!=null&&(o.callback=r),e=Nc(n,o,s),e!==null&&(Eo(e,n,s,i),ax(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Ci(),s=Lc(n),o=dl(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Nc(n,o,s),e!==null&&(Eo(e,n,s,i),ax(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Ci(),i=Lc(n),s=dl(r,i);s.tag=2,e!=null&&(s.callback=e),e=Nc(n,s,i),e!==null&&(Eo(e,n,i,r),ax(e,n,i))}};function D4(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!f0(r,i)||!f0(s,o):!0}function IQ(n,e,r){var i=!1,s=Kc,o=e.contextType;return typeof o=="object"&&o!==null?o=Qs(o):(s=qi(e)?kd:ui.current,i=e.contextTypes,o=(i=i!=null)?sp(n,s):Kc),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=R1,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function O4(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&R1.enqueueReplaceState(e,e.state,null)}function UO(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},FR(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Qs(o):(o=qi(e)?kd:ui.current,s.context=sp(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(zO(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&R1.enqueueReplaceState(s,s.state,null),nw(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function cp(n,e){try{var r="",i=e;do r+=zce(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function ZS(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function WO(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var pde=typeof WeakMap=="function"?WeakMap:Map;function AQ(n,e,r){r=dl(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){aw||(aw=!0,ZO=i),WO(n,e)},r}function RQ(n,e,r){r=dl(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){WO(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){WO(n,e),typeof i!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function I4(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new pde;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=Pde.bind(null,n,e,r),e.then(n,n))}function A4(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function R4(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=dl(-1,1),e.tag=2,Nc(r,e,1))),r.lanes|=1),n)}var mde=Ol.ReactCurrentOwner,zi=!1;function yi(n,e,r,i){e.child=n===null?cQ(e,null,r,i):ap(e,n.child,r,i)}function N4(n,e,r,i,s){r=r.render;var o=e.ref;return bf(e,s),i=WR(n,e,r,i,o,s),r=qR(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,El(n,e,s)):(Yn&&r&&OR(e),e.flags|=1,yi(n,e,i,s),e.child)}function j4(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!eN(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,NQ(n,e,o,i,s)):(n=fx(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:f0,r(a,i)&&n.ref===e.ref)return El(n,e,s)}return e.flags|=1,n=Fc(o,i),n.ref=e.ref,n.return=e,e.child=n}function NQ(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(f0(o,i)&&n.ref===e.ref)if(zi=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(zi=!0);else return e.lanes=n.lanes,El(n,e,s)}return qO(n,e,r,i,s)}function jQ(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(tf,as),as|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Dn(tf,as),as|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,Dn(tf,as),as|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,Dn(tf,as),as|=i;return yi(n,e,s,r),e.child}function LQ(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function qO(n,e,r,i,s){var o=qi(r)?kd:ui.current;return o=sp(e,o),bf(e,s),r=WR(n,e,r,i,o,s),i=qR(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,El(n,e,s)):(Yn&&i&&OR(e),e.flags|=1,yi(n,e,r,s),e.child)}function L4(n,e,r,i,s){if(qi(r)){var o=!0;Qx(e)}else o=!1;if(bf(e,s),e.stateNode===null)ux(n,e),IQ(e,r,i),UO(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qs(u):(u=qi(r)?kd:ui.current,u=sp(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&O4(e,a,i,u),cc=!1;var f=e.memoizedState;a.state=f,nw(e,i,a,s),c=e.memoizedState,l!==i||f!==c||Wi.current||cc?(typeof h=="function"&&(zO(e,r,h,i),c=e.memoizedState),(l=cc||D4(e,r,l,i,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,dQ(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:fo(e.type,l),a.props=u,d=e.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qs(c):(c=qi(r)?kd:ui.current,c=sp(e,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||f!==c)&&O4(e,a,i,c),cc=!1,f=e.memoizedState,a.state=f,nw(e,i,a,s);var g=e.memoizedState;l!==d||f!==g||Wi.current||cc?(typeof m=="function"&&(zO(e,r,m,i),g=e.memoizedState),(u=cc||D4(e,r,u,i,f,g,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return HO(n,e,r,i,o,s)}function HO(n,e,r,i,s,o){LQ(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&_4(e,r,!1),El(n,e,o);i=e.stateNode,mde.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=ap(e,n.child,null,o),e.child=ap(e,null,l,o)):yi(n,e,l,o),e.memoizedState=i.state,s&&_4(e,r,!0),e.child}function FQ(n){var e=n.stateNode;e.pendingContext?w4(n,e.pendingContext,e.pendingContext!==e.context):e.context&&w4(n,e.context,!1),$R(n,e.containerInfo)}function F4(n,e,r,i,s){return op(),AR(s),e.flags|=256,yi(n,e,r,i),e.child}var VO={dehydrated:null,treeContext:null,retryLane:0};function YO(n){return{baseLanes:n,cachePool:null,transitions:null}}function $Q(n,e,r){var i=e.pendingProps,s=Xn.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Dn(Xn,s&1),n===null)return $O(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=L1(a,i,0,null),n=fd(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=YO(r),e.memoizedState=VO,n):YR(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gde(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Fc(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Fc(l,o):(o=fd(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?YO(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=VO,i}return o=n.child,n=o.sibling,i=Fc(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function YR(n,e){return e=L1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Wy(n,e,r,i){return i!==null&&AR(i),ap(e,n.child,null,r),n=YR(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function gde(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=ZS(Error(nt(422))),Wy(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=L1({mode:"visible",children:i.children},s,0,null),o=fd(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ap(e,n.child,null,a),e.child.memoizedState=YO(a),e.memoizedState=VO,o);if(!(e.mode&1))return Wy(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(nt(419)),i=ZS(o,i,void 0),Wy(n,e,a,i)}if(l=(a&n.childLanes)!==0,zi||l){if(i=Lr,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Cl(n,s),Eo(i,n,s,-1))}return ZR(),i=ZS(Error(nt(421))),Wy(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=Mde.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,hs=Rc(s.nextSibling),fs=e,Yn=!0,xo=null,n!==null&&(Us[Ws++]=il,Us[Ws++]=sl,Us[Ws++]=Cd,il=n.id,sl=n.overflow,Cd=e),e=YR(e,i.children),e.flags|=4096,e)}function $4(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),BO(n.return,e,r)}function ek(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function BQ(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(yi(n,e,i.children,r),i=Xn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$4(n,r,e);else if(n.tag===19)$4(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Dn(Xn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&rw(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),ek(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&rw(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}ek(e,!0,r,null,o);break;case"together":ek(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ux(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function El(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Td|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(nt(153));if(e.child!==null){for(n=e.child,r=Fc(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=Fc(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function bde(n,e,r){switch(e.tag){case 3:FQ(e),op();break;case 5:hQ(e);break;case 1:qi(e.type)&&Qx(e);break;case 4:$R(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Dn(ew,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Dn(Xn,Xn.current&1),e.flags|=128,null):r&e.child.childLanes?$Q(n,e,r):(Dn(Xn,Xn.current&1),n=El(n,e,r),n!==null?n.sibling:null);Dn(Xn,Xn.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return BQ(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dn(Xn,Xn.current),i)break;return null;case 22:case 23:return e.lanes=0,jQ(n,e,r)}return El(n,e,r)}var zQ,GO,UQ,WQ;zQ=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};GO=function(){};UQ=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Yu(da.current);var o=null;switch(r){case"input":s=gO(n,s),i=gO(n,i),o=[];break;case"select":s=Jn({},s,{value:void 0}),i=Jn({},i,{value:void 0}),o=[];break;case"textarea":s=vO(n,s),i=vO(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Kx)}wO(r,i);var a;r=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(o0.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(o0.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Nn("scroll",n),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};WQ=function(n,e,r,i){r!==i&&(e.flags|=4)};function Mm(n,e){if(!Yn)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ni(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function yde(n,e,r){var i=e.pendingProps;switch(IR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(e),null;case 1:return qi(e.type)&&Xx(),ni(e),null;case 3:return i=e.stateNode,lp(),Ln(Wi),Ln(ui),zR(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(zy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xo!==null&&(nI(xo),xo=null))),GO(n,e),ni(e),null;case 5:BR(e);var s=Yu(y0.current);if(r=e.type,n!==null&&e.stateNode!=null)UQ(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(nt(166));return ni(e),null}if(n=Yu(da.current),zy(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[ia]=e,i[g0]=o,n=(e.mode&1)!==0,r){case"dialog":Nn("cancel",i),Nn("close",i);break;case"iframe":case"object":case"embed":Nn("load",i);break;case"video":case"audio":for(s=0;s<fg.length;s++)Nn(fg[s],i);break;case"source":Nn("error",i);break;case"img":case"image":case"link":Nn("error",i),Nn("load",i);break;case"details":Nn("toggle",i);break;case"input":Gj(i,o),Nn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Nn("invalid",i);break;case"textarea":Xj(i,o),Nn("invalid",i)}wO(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&By(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&By(i.textContent,l,n),s=["children",""+l]):o0.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Nn("scroll",i)}switch(r){case"input":Iy(i),Kj(i,o,!0);break;case"textarea":Iy(i),Qj(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Kx)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=bX(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[ia]=e,n[g0]=i,zQ(n,e,!1,!1),e.stateNode=n;e:{switch(a=_O(r,i),r){case"dialog":Nn("cancel",n),Nn("close",n),s=i;break;case"iframe":case"object":case"embed":Nn("load",n),s=i;break;case"video":case"audio":for(s=0;s<fg.length;s++)Nn(fg[s],n);s=i;break;case"source":Nn("error",n),s=i;break;case"img":case"image":case"link":Nn("error",n),Nn("load",n),s=i;break;case"details":Nn("toggle",n),s=i;break;case"input":Gj(n,i),s=gO(n,i),Nn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Jn({},i,{value:void 0}),Nn("invalid",n);break;case"textarea":Xj(n,i),s=vO(n,i),Nn("invalid",n);break;default:s=i}wO(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?xX(n,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yX(n,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&a0(n,c):typeof c=="number"&&a0(n,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(o0.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Nn("scroll",n):c!=null&&bR(n,o,c,a))}switch(r){case"input":Iy(n),Kj(n,i,!1);break;case"textarea":Iy(n),Qj(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Gc(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?ff(n,!!i.multiple,o,!1):i.defaultValue!=null&&ff(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Kx)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ni(e),null;case 6:if(n&&e.stateNode!=null)WQ(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(nt(166));if(r=Yu(y0.current),Yu(da.current),zy(e)){if(i=e.stateNode,r=e.memoizedProps,i[ia]=e,(o=i.nodeValue!==r)&&(n=fs,n!==null))switch(n.tag){case 3:By(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&By(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[ia]=e,e.stateNode=i}return ni(e),null;case 13:if(Ln(Xn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Yn&&hs!==null&&e.mode&1&&!(e.flags&128))aQ(),op(),e.flags|=98560,o=!1;else if(o=zy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(nt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(nt(317));o[ia]=e}else op(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ni(e),o=!1}else xo!==null&&(nI(xo),xo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Xn.current&1?Er===0&&(Er=3):ZR())),e.updateQueue!==null&&(e.flags|=4),ni(e),null);case 4:return lp(),GO(n,e),n===null&&p0(e.stateNode.containerInfo),ni(e),null;case 10:return jR(e.type._context),ni(e),null;case 17:return qi(e.type)&&Xx(),ni(e),null;case 19:if(Ln(Xn),o=e.memoizedState,o===null)return ni(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Mm(o,!1);else{if(Er!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=rw(n),a!==null){for(e.flags|=128,Mm(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Dn(Xn,Xn.current&1|2),e.child}n=n.sibling}o.tail!==null&&dr()>up&&(e.flags|=128,i=!0,Mm(o,!1),e.lanes=4194304)}else{if(!i)if(n=rw(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Yn)return ni(e),null}else 2*dr()-o.renderingStartTime>up&&r!==1073741824&&(e.flags|=128,i=!0,Mm(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dr(),e.sibling=null,r=Xn.current,Dn(Xn,i?r&1|2:r&1),e):(ni(e),null);case 22:case 23:return JR(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?as&1073741824&&(ni(e),e.subtreeFlags&6&&(e.flags|=8192)):ni(e),null;case 24:return null;case 25:return null}throw Error(nt(156,e.tag))}function vde(n,e){switch(IR(e),e.tag){case 1:return qi(e.type)&&Xx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return lp(),Ln(Wi),Ln(ui),zR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return BR(e),null;case 13:if(Ln(Xn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(nt(340));op()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ln(Xn),null;case 4:return lp(),null;case 10:return jR(e.type._context),null;case 22:case 23:return JR(),null;case 24:return null;default:return null}}var qy=!1,ai=!1,xde=typeof WeakSet=="function"?WeakSet:Set,xt=null;function ef(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){nr(n,e,i)}else r.current=null}function KO(n,e,r){try{r()}catch(i){nr(n,e,i)}}var B4=!1;function wde(n,e){if(IO=Vx,n=GX(),DR(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var m;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==o||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===n)break t;if(f===r&&++u===s&&(l=a),f===o&&++h===i&&(c=a),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(AO={focusedElem:n,selectionRange:r},Vx=!1,xt=e;xt!==null;)if(e=xt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,xt=n;else for(;xt!==null;){e=xt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,y=g.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:fo(e.type,b),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(nt(163))}}catch(S){nr(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,xt=n;break}xt=e.return}return g=B4,B4=!1,g}function jg(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&KO(e,r,o)}s=s.next}while(s!==i)}}function N1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function XO(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function qQ(n){var e=n.alternate;e!==null&&(n.alternate=null,qQ(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ia],delete e[g0],delete e[jO],delete e[rde],delete e[ide])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function HQ(n){return n.tag===5||n.tag===3||n.tag===4}function z4(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||HQ(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function QO(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Kx));else if(i!==4&&(n=n.child,n!==null))for(QO(n,e,r),n=n.sibling;n!==null;)QO(n,e,r),n=n.sibling}function JO(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(JO(n,e,r),n=n.sibling;n!==null;)JO(n,e,r),n=n.sibling}var Hr=null,yo=!1;function Wl(n,e,r){for(r=r.child;r!==null;)VQ(n,e,r),r=r.sibling}function VQ(n,e,r){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(T1,r)}catch{}switch(r.tag){case 5:ai||ef(r,e);case 6:var i=Hr,s=yo;Hr=null,Wl(n,e,r),Hr=i,yo=s,Hr!==null&&(yo?(n=Hr,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):Hr.removeChild(r.stateNode));break;case 18:Hr!==null&&(yo?(n=Hr,r=r.stateNode,n.nodeType===8?YS(n.parentNode,r):n.nodeType===1&&YS(n,r),d0(n)):YS(Hr,r.stateNode));break;case 4:i=Hr,s=yo,Hr=r.stateNode.containerInfo,yo=!0,Wl(n,e,r),Hr=i,yo=s;break;case 0:case 11:case 14:case 15:if(!ai&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&KO(r,e,a),s=s.next}while(s!==i)}Wl(n,e,r);break;case 1:if(!ai&&(ef(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){nr(r,e,l)}Wl(n,e,r);break;case 21:Wl(n,e,r);break;case 22:r.mode&1?(ai=(i=ai)||r.memoizedState!==null,Wl(n,e,r),ai=i):Wl(n,e,r);break;default:Wl(n,e,r)}}function U4(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new xde),e.forEach(function(i){var s=Dde.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function oo(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Hr=l.stateNode,yo=!1;break e;case 3:Hr=l.stateNode.containerInfo,yo=!0;break e;case 4:Hr=l.stateNode.containerInfo,yo=!0;break e}l=l.return}if(Hr===null)throw Error(nt(160));VQ(o,a,s),Hr=null,yo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){nr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YQ(e,n),e=e.sibling}function YQ(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(oo(e,n),Fo(n),i&4){try{jg(3,n,n.return),N1(3,n)}catch(b){nr(n,n.return,b)}try{jg(5,n,n.return)}catch(b){nr(n,n.return,b)}}break;case 1:oo(e,n),Fo(n),i&512&&r!==null&&ef(r,r.return);break;case 5:if(oo(e,n),Fo(n),i&512&&r!==null&&ef(r,r.return),n.flags&32){var s=n.stateNode;try{a0(s,"")}catch(b){nr(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&mX(s,o),_O(l,a);var u=_O(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?xX(s,d):h==="dangerouslySetInnerHTML"?yX(s,d):h==="children"?a0(s,d):bR(s,h,d,u)}switch(l){case"input":bO(s,o);break;case"textarea":gX(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?ff(s,!!o.multiple,m,!1):f!==!!o.multiple&&(o.defaultValue!=null?ff(s,!!o.multiple,o.defaultValue,!0):ff(s,!!o.multiple,o.multiple?[]:"",!1))}s[g0]=o}catch(b){nr(n,n.return,b)}}break;case 6:if(oo(e,n),Fo(n),i&4){if(n.stateNode===null)throw Error(nt(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(b){nr(n,n.return,b)}}break;case 3:if(oo(e,n),Fo(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{d0(e.containerInfo)}catch(b){nr(n,n.return,b)}break;case 4:oo(e,n),Fo(n);break;case 13:oo(e,n),Fo(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(XR=dr())),i&4&&U4(n);break;case 22:if(h=r!==null&&r.memoizedState!==null,n.mode&1?(ai=(u=ai)||h,oo(e,n),ai=u):oo(e,n),Fo(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(xt=n,h=n.child;h!==null;){for(d=xt=h;xt!==null;){switch(f=xt,m=f.child,f.tag){case 0:case 11:case 14:case 15:jg(4,f,f.return);break;case 1:ef(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,r=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(b){nr(i,r,b)}}break;case 5:ef(f,f.return);break;case 22:if(f.memoizedState!==null){q4(d);continue}}m!==null?(m.return=f,xt=m):q4(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=vX("display",a))}catch(b){nr(n,n.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){nr(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oo(e,n),Fo(n),i&4&&U4(n);break;case 21:break;default:oo(e,n),Fo(n)}}function Fo(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(HQ(r)){var i=r;break e}r=r.return}throw Error(nt(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(a0(s,""),i.flags&=-33);var o=z4(n);JO(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=z4(n);QO(n,l,a);break;default:throw Error(nt(161))}}catch(c){nr(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function _de(n,e,r){xt=n,GQ(n)}function GQ(n,e,r){for(var i=(n.mode&1)!==0;xt!==null;){var s=xt,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||qy;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ai;l=qy;var u=ai;if(qy=a,(ai=c)&&!u)for(xt=s;xt!==null;)a=xt,c=a.child,a.tag===22&&a.memoizedState!==null?H4(s):c!==null?(c.return=a,xt=c):H4(s);for(;o!==null;)xt=o,GQ(o),o=o.sibling;xt=s,qy=l,ai=u}W4(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,xt=o):W4(n)}}function W4(n){for(;xt!==null;){var e=xt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ai||N1(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ai)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:fo(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&T4(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}T4(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&d0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(nt(163))}ai||e.flags&512&&XO(e)}catch(f){nr(e,e.return,f)}}if(e===n){xt=null;break}if(r=e.sibling,r!==null){r.return=e.return,xt=r;break}xt=e.return}}function q4(n){for(;xt!==null;){var e=xt;if(e===n){xt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xt=r;break}xt=e.return}}function H4(n){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{N1(4,e)}catch(c){nr(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){nr(e,s,c)}}var o=e.return;try{XO(e)}catch(c){nr(e,o,c)}break;case 5:var a=e.return;try{XO(e)}catch(c){nr(e,a,c)}}}catch(c){nr(e,e.return,c)}if(e===n){xt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,xt=l;break}xt=e.return}}var Sde=Math.ceil,ow=Ol.ReactCurrentDispatcher,GR=Ol.ReactCurrentOwner,Ks=Ol.ReactCurrentBatchConfig,on=0,Lr=null,wr=null,Jr=0,as=0,tf=tu(0),Er=0,_0=null,Td=0,j1=0,KR=0,Lg=null,Fi=null,XR=0,up=1/0,qa=null,aw=!1,ZO=null,jc=null,Hy=!1,Ec=null,lw=0,Fg=0,eI=null,dx=-1,hx=0;function Ci(){return on&6?dr():dx!==-1?dx:dx=dr()}function Lc(n){return n.mode&1?on&2&&Jr!==0?Jr&-Jr:ode.transition!==null?(hx===0&&(hx=IX()),hx):(n=bn,n!==0||(n=window.event,n=n===void 0?16:$X(n.type)),n):1}function Eo(n,e,r,i){if(50<Fg)throw Fg=0,eI=null,Error(nt(185));Cb(n,r,i),(!(on&2)||n!==Lr)&&(n===Lr&&(!(on&2)&&(j1|=r),Er===4&&dc(n,Jr)),Hi(n,i),r===1&&on===0&&!(e.mode&1)&&(up=dr()+500,I1&&nu()))}function Hi(n,e){var r=n.callbackNode;oue(n,e);var i=Hx(n,n===Lr?Jr:0);if(i===0)r!==null&&e4(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&e4(r),e===1)n.tag===0?sde(V4.bind(null,n)):iQ(V4.bind(null,n)),tde(function(){!(on&6)&&nu()}),r=null;else{switch(AX(i)){case 1:r=_R;break;case 4:r=DX;break;case 16:r=qx;break;case 536870912:r=OX;break;default:r=qx}r=nJ(r,KQ.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function KQ(n,e){if(dx=-1,hx=0,on&6)throw Error(nt(327));var r=n.callbackNode;if(yf()&&n.callbackNode!==r)return null;var i=Hx(n,n===Lr?Jr:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=cw(n,i);else{e=i;var s=on;on|=2;var o=QQ();(Lr!==n||Jr!==e)&&(qa=null,up=dr()+500,hd(n,e));do try{Ede();break}catch(l){XQ(n,l)}while(!0);NR(),ow.current=o,on=s,wr!==null?e=0:(Lr=null,Jr=0,e=Er)}if(e!==0){if(e===2&&(s=TO(n),s!==0&&(i=s,e=tI(n,s))),e===1)throw r=_0,hd(n,0),dc(n,i),Hi(n,dr()),r;if(e===6)dc(n,i);else{if(s=n.current.alternate,!(i&30)&&!kde(s)&&(e=cw(n,i),e===2&&(o=TO(n),o!==0&&(i=o,e=tI(n,o))),e===1))throw r=_0,hd(n,0),dc(n,i),Hi(n,dr()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(nt(345));case 2:Iu(n,Fi,qa);break;case 3:if(dc(n,i),(i&130023424)===i&&(e=XR+500-dr(),10<e)){if(Hx(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Ci(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=NO(Iu.bind(null,n,Fi,qa),e);break}Iu(n,Fi,qa);break;case 4:if(dc(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-Co(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=dr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sde(i/1960))-i,10<i){n.timeoutHandle=NO(Iu.bind(null,n,Fi,qa),i);break}Iu(n,Fi,qa);break;case 5:Iu(n,Fi,qa);break;default:throw Error(nt(329))}}}return Hi(n,dr()),n.callbackNode===r?KQ.bind(null,n):null}function tI(n,e){var r=Lg;return n.current.memoizedState.isDehydrated&&(hd(n,e).flags|=256),n=cw(n,e),n!==2&&(e=Fi,Fi=r,e!==null&&nI(e)),n}function nI(n){Fi===null?Fi=n:Fi.push.apply(Fi,n)}function kde(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!Po(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dc(n,e){for(e&=~KR,e&=~j1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-Co(e),i=1<<r;n[r]=-1,e&=~i}}function V4(n){if(on&6)throw Error(nt(327));yf();var e=Hx(n,0);if(!(e&1))return Hi(n,dr()),null;var r=cw(n,e);if(n.tag!==0&&r===2){var i=TO(n);i!==0&&(e=i,r=tI(n,i))}if(r===1)throw r=_0,hd(n,0),dc(n,e),Hi(n,dr()),r;if(r===6)throw Error(nt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Iu(n,Fi,qa),Hi(n,dr()),null}function QR(n,e){var r=on;on|=1;try{return n(e)}finally{on=r,on===0&&(up=dr()+500,I1&&nu())}}function Pd(n){Ec!==null&&Ec.tag===0&&!(on&6)&&yf();var e=on;on|=1;var r=Ks.transition,i=bn;try{if(Ks.transition=null,bn=1,n)return n()}finally{bn=i,Ks.transition=r,on=e,!(on&6)&&nu()}}function JR(){as=tf.current,Ln(tf)}function hd(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,ede(r)),wr!==null)for(r=wr.return;r!==null;){var i=r;switch(IR(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xx();break;case 3:lp(),Ln(Wi),Ln(ui),zR();break;case 5:BR(i);break;case 4:lp();break;case 13:Ln(Xn);break;case 19:Ln(Xn);break;case 10:jR(i.type._context);break;case 22:case 23:JR()}r=r.return}if(Lr=n,wr=n=Fc(n.current,null),Jr=as=e,Er=0,_0=null,KR=j1=Td=0,Fi=Lg=null,Vu!==null){for(e=0;e<Vu.length;e++)if(r=Vu[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}Vu=null}return n}function XQ(n,e){do{var r=wr;try{if(NR(),lx.current=sw,iw){for(var i=Qn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}iw=!1}if(Ed=0,Or=Cr=Qn=null,Ng=!1,v0=0,GR.current=null,r===null||r.return===null){Er=1,_0=e,wr=null;break}e:{var o=n,a=r.return,l=r,c=e;if(e=Jr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=A4(a);if(m!==null){m.flags&=-257,R4(m,a,l,o,e),m.mode&1&&I4(o,u,e),e=m,c=u;var g=e.updateQueue;if(g===null){var b=new Set;b.add(c),e.updateQueue=b}else g.add(c);break e}else{if(!(e&1)){I4(o,u,e),ZR();break e}c=Error(nt(426))}}else if(Yn&&l.mode&1){var y=A4(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),R4(y,a,l,o,e),AR(cp(c,l));break e}}o=c=cp(c,l),Er!==4&&(Er=2),Lg===null?Lg=[o]:Lg.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=AQ(o,c,e);E4(o,v);break e;case 1:l=c;var w=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(jc===null||!jc.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=RQ(o,l,e);E4(o,S);break e}}o=o.return}while(o!==null)}ZQ(r)}catch(_){e=_,wr===r&&r!==null&&(wr=r=r.return);continue}break}while(!0)}function QQ(){var n=ow.current;return ow.current=sw,n===null?sw:n}function ZR(){(Er===0||Er===3||Er===2)&&(Er=4),Lr===null||!(Td&268435455)&&!(j1&268435455)||dc(Lr,Jr)}function cw(n,e){var r=on;on|=2;var i=QQ();(Lr!==n||Jr!==e)&&(qa=null,hd(n,e));do try{Cde();break}catch(s){XQ(n,s)}while(!0);if(NR(),on=r,ow.current=i,wr!==null)throw Error(nt(261));return Lr=null,Jr=0,Er}function Cde(){for(;wr!==null;)JQ(wr)}function Ede(){for(;wr!==null&&!Qce();)JQ(wr)}function JQ(n){var e=tJ(n.alternate,n,as);n.memoizedProps=n.pendingProps,e===null?ZQ(n):wr=e,GR.current=null}function ZQ(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=vde(r,e),r!==null){r.flags&=32767,wr=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Er=6,wr=null;return}}else if(r=yde(r,e,as),r!==null){wr=r;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=n}while(e!==null);Er===0&&(Er=5)}function Iu(n,e,r){var i=bn,s=Ks.transition;try{Ks.transition=null,bn=1,Tde(n,e,r,i)}finally{Ks.transition=s,bn=i}return null}function Tde(n,e,r,i){do yf();while(Ec!==null);if(on&6)throw Error(nt(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(nt(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(aue(n,o),n===Lr&&(wr=Lr=null,Jr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hy||(Hy=!0,nJ(qx,function(){return yf(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ks.transition,Ks.transition=null;var a=bn;bn=1;var l=on;on|=4,GR.current=null,wde(n,r),YQ(r,n),Yue(AO),Vx=!!IO,AO=IO=null,n.current=r,_de(r),Jce(),on=l,bn=a,Ks.transition=o}else n.current=r;if(Hy&&(Hy=!1,Ec=n,lw=s),o=n.pendingLanes,o===0&&(jc=null),tue(r.stateNode),Hi(n,dr()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(aw)throw aw=!1,n=ZO,ZO=null,n;return lw&1&&n.tag!==0&&yf(),o=n.pendingLanes,o&1?n===eI?Fg++:(Fg=0,eI=n):Fg=0,nu(),null}function yf(){if(Ec!==null){var n=AX(lw),e=Ks.transition,r=bn;try{if(Ks.transition=null,bn=16>n?16:n,Ec===null)var i=!1;else{if(n=Ec,Ec=null,lw=0,on&6)throw Error(nt(331));var s=on;for(on|=4,xt=n.current;xt!==null;){var o=xt,a=o.child;if(xt.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(xt=u;xt!==null;){var h=xt;switch(h.tag){case 0:case 11:case 15:jg(8,h,o)}var d=h.child;if(d!==null)d.return=h,xt=d;else for(;xt!==null;){h=xt;var f=h.sibling,m=h.return;if(qQ(h),h===u){xt=null;break}if(f!==null){f.return=m,xt=f;break}xt=m}}}var g=o.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var y=b.sibling;b.sibling=null,b=y}while(b!==null)}}xt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,xt=a;else e:for(;xt!==null;){if(o=xt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:jg(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,xt=v;break e}xt=o.return}}var w=n.current;for(xt=w;xt!==null;){a=xt;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,xt=k;else e:for(a=w;xt!==null;){if(l=xt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:N1(9,l)}}catch(_){nr(l,l.return,_)}if(l===a){xt=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,xt=S;break e}xt=l.return}}if(on=s,nu(),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(T1,n)}catch{}i=!0}return i}finally{bn=r,Ks.transition=e}}return!1}function Y4(n,e,r){e=cp(r,e),e=AQ(n,e,1),n=Nc(n,e,1),e=Ci(),n!==null&&(Cb(n,1,e),Hi(n,e))}function nr(n,e,r){if(n.tag===3)Y4(n,n,r);else for(;e!==null;){if(e.tag===3){Y4(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(jc===null||!jc.has(i))){n=cp(r,n),n=RQ(e,n,1),e=Nc(e,n,1),n=Ci(),e!==null&&(Cb(e,1,n),Hi(e,n));break}}e=e.return}}function Pde(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Ci(),n.pingedLanes|=n.suspendedLanes&r,Lr===n&&(Jr&r)===r&&(Er===4||Er===3&&(Jr&130023424)===Jr&&500>dr()-XR?hd(n,0):KR|=r),Hi(n,e)}function eJ(n,e){e===0&&(n.mode&1?(e=Ny,Ny<<=1,!(Ny&130023424)&&(Ny=4194304)):e=1);var r=Ci();n=Cl(n,e),n!==null&&(Cb(n,e,r),Hi(n,r))}function Mde(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),eJ(n,r)}function Dde(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(nt(314))}i!==null&&i.delete(e),eJ(n,r)}var tJ;tJ=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||Wi.current)zi=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return zi=!1,bde(n,e,r);zi=!!(n.flags&131072)}else zi=!1,Yn&&e.flags&1048576&&sQ(e,Zx,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ux(n,e),n=e.pendingProps;var s=sp(e,ui.current);bf(e,r),s=WR(null,e,i,n,s,r);var o=qR();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(i)?(o=!0,Qx(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,FR(e),s.updater=R1,e.stateNode=s,s._reactInternals=e,UO(e,i,n,r),e=HO(null,e,i,!0,o,r)):(e.tag=0,Yn&&o&&OR(e),yi(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(ux(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Ide(i),n=fo(i,n),s){case 0:e=qO(null,e,i,n,r);break e;case 1:e=L4(null,e,i,n,r);break e;case 11:e=N4(null,e,i,n,r);break e;case 14:e=j4(null,e,i,fo(i.type,n),r);break e}throw Error(nt(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fo(i,s),qO(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fo(i,s),L4(n,e,i,s,r);case 3:e:{if(FQ(e),n===null)throw Error(nt(387));i=e.pendingProps,o=e.memoizedState,s=o.element,dQ(n,e),nw(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=cp(Error(nt(423)),e),e=F4(n,e,i,r,s);break e}else if(i!==s){s=cp(Error(nt(424)),e),e=F4(n,e,i,r,s);break e}else for(hs=Rc(e.stateNode.containerInfo.firstChild),fs=e,Yn=!0,xo=null,r=cQ(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(op(),i===s){e=El(n,e,r);break e}yi(n,e,i,r)}e=e.child}return e;case 5:return hQ(e),n===null&&$O(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,RO(i,s)?a=null:o!==null&&RO(i,o)&&(e.flags|=32),LQ(n,e),yi(n,e,a,r),e.child;case 6:return n===null&&$O(e),null;case 13:return $Q(n,e,r);case 4:return $R(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=ap(e,null,i,r):yi(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fo(i,s),N4(n,e,i,s,r);case 7:return yi(n,e,e.pendingProps,r),e.child;case 8:return yi(n,e,e.pendingProps.children,r),e.child;case 12:return yi(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Dn(ew,i._currentValue),i._currentValue=a,o!==null)if(Po(o.value,a)){if(o.children===s.children&&!Wi.current){e=El(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=dl(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),BO(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(nt(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),BO(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}yi(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,bf(e,r),s=Qs(s),i=i(s),e.flags|=1,yi(n,e,i,r),e.child;case 14:return i=e.type,s=fo(i,e.pendingProps),s=fo(i.type,s),j4(n,e,i,s,r);case 15:return NQ(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fo(i,s),ux(n,e),e.tag=1,qi(i)?(n=!0,Qx(e)):n=!1,bf(e,r),IQ(e,i,s),UO(e,i,s,r),HO(null,e,i,!0,n,r);case 19:return BQ(n,e,r);case 22:return jQ(n,e,r)}throw Error(nt(156,e.tag))};function nJ(n,e){return MX(n,e)}function Ode(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(n,e,r,i){return new Ode(n,e,r,i)}function eN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ide(n){if(typeof n=="function")return eN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===vR)return 11;if(n===xR)return 14}return 2}function Fc(n,e){var r=n.alternate;return r===null?(r=Hs(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function fx(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")eN(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Hh:return fd(r.children,s,o,e);case yR:a=8,s|=8;break;case hO:return n=Hs(12,r,e,s|2),n.elementType=hO,n.lanes=o,n;case fO:return n=Hs(13,r,e,s),n.elementType=fO,n.lanes=o,n;case pO:return n=Hs(19,r,e,s),n.elementType=pO,n.lanes=o,n;case hX:return L1(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uX:a=10;break e;case dX:a=9;break e;case vR:a=11;break e;case xR:a=14;break e;case lc:a=16,i=null;break e}throw Error(nt(130,n==null?n:typeof n,""))}return e=Hs(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function fd(n,e,r,i){return n=Hs(7,n,i,e),n.lanes=r,n}function L1(n,e,r,i){return n=Hs(22,n,i,e),n.elementType=hX,n.lanes=r,n.stateNode={isHidden:!1},n}function tk(n,e,r){return n=Hs(6,n,null,e),n.lanes=r,n}function nk(n,e,r){return e=Hs(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Ade(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jS(0),this.expirationTimes=jS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jS(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tN(n,e,r,i,s,o,a,l,c){return n=new Ade(n,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Hs(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},FR(o),n}function Rde(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qh,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function rJ(n){if(!n)return Kc;n=n._reactInternals;e:{if(Gd(n)!==n||n.tag!==1)throw Error(nt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(nt(171))}if(n.tag===1){var r=n.type;if(qi(r))return rQ(n,r,e)}return e}function iJ(n,e,r,i,s,o,a,l,c){return n=tN(r,i,!0,n,s,o,a,l,c),n.context=rJ(null),r=n.current,i=Ci(),s=Lc(r),o=dl(i,s),o.callback=e??null,Nc(r,o,s),n.current.lanes=s,Cb(n,s,i),Hi(n,i),n}function F1(n,e,r,i){var s=e.current,o=Ci(),a=Lc(s);return r=rJ(r),e.context===null?e.context=r:e.pendingContext=r,e=dl(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Nc(s,e,a),n!==null&&(Eo(n,s,a,o),ax(n,s,a)),a}function uw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function G4(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function nN(n,e){G4(n,e),(n=n.alternate)&&G4(n,e)}function Nde(){return null}var sJ=typeof reportError=="function"?reportError:function(n){console.error(n)};function rN(n){this._internalRoot=n}$1.prototype.render=rN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(nt(409));F1(n,e,null,null)};$1.prototype.unmount=rN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Pd(function(){F1(null,n,null,null)}),e[kl]=null}};function $1(n){this._internalRoot=n}$1.prototype.unstable_scheduleHydration=function(n){if(n){var e=jX();n={blockedOn:null,target:n,priority:e};for(var r=0;r<uc.length&&e!==0&&e<uc[r].priority;r++);uc.splice(r,0,n),r===0&&FX(n)}};function iN(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function B1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function K4(){}function jde(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var u=uw(a);o.call(u)}}var a=iJ(e,i,n,0,null,!1,!1,"",K4);return n._reactRootContainer=a,n[kl]=a.current,p0(n.nodeType===8?n.parentNode:n),Pd(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=uw(c);l.call(u)}}var c=tN(n,0,!1,null,null,!1,!1,"",K4);return n._reactRootContainer=c,n[kl]=c.current,p0(n.nodeType===8?n.parentNode:n),Pd(function(){F1(e,c,r,i)}),c}function z1(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=uw(a);l.call(c)}}F1(e,a,n,s)}else a=jde(r,e,n,s,i);return uw(a)}RX=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=hg(e.pendingLanes);r!==0&&(SR(e,r|1),Hi(e,dr()),!(on&6)&&(up=dr()+500,nu()))}break;case 13:Pd(function(){var i=Cl(n,1);if(i!==null){var s=Ci();Eo(i,n,1,s)}}),nN(n,1)}};kR=function(n){if(n.tag===13){var e=Cl(n,134217728);if(e!==null){var r=Ci();Eo(e,n,134217728,r)}nN(n,134217728)}};NX=function(n){if(n.tag===13){var e=Lc(n),r=Cl(n,e);if(r!==null){var i=Ci();Eo(r,n,e,i)}nN(n,e)}};jX=function(){return bn};LX=function(n,e){var r=bn;try{return bn=n,e()}finally{bn=r}};kO=function(n,e,r){switch(e){case"input":if(bO(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=O1(i);if(!s)throw Error(nt(90));pX(i),bO(i,s)}}}break;case"textarea":gX(n,r);break;case"select":e=r.value,e!=null&&ff(n,!!r.multiple,e,!1)}};SX=QR;kX=Pd;var Lde={usingClientEntryPoint:!1,Events:[Tb,Kh,O1,wX,_X,QR]},Dm={findFiberByHostInstance:Hu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fde={bundleType:Dm.bundleType,version:Dm.version,rendererPackageName:Dm.rendererPackageName,rendererConfig:Dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=TX(n),n===null?null:n.stateNode},findFiberByHostInstance:Dm.findFiberByHostInstance||Nde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{T1=Vy.inject(Fde),ua=Vy}catch{}}ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lde;ws.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iN(e))throw Error(nt(200));return Rde(n,e,null,r)};ws.createRoot=function(n,e){if(!iN(n))throw Error(nt(299));var r=!1,i="",s=sJ;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tN(n,1,!1,null,null,r,!1,i,s),n[kl]=e.current,p0(n.nodeType===8?n.parentNode:n),new rN(e)};ws.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(nt(188)):(n=Object.keys(n).join(","),Error(nt(268,n)));return n=TX(e),n=n===null?null:n.stateNode,n};ws.flushSync=function(n){return Pd(n)};ws.hydrate=function(n,e,r){if(!B1(e))throw Error(nt(200));return z1(null,n,e,!0,r)};ws.hydrateRoot=function(n,e,r){if(!iN(n))throw Error(nt(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=sJ;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=iJ(e,null,n,1,r??null,s,!1,o,a),n[kl]=e.current,p0(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new $1(e)};ws.render=function(n,e,r){if(!B1(e))throw Error(nt(200));return z1(null,n,e,!1,r)};ws.unmountComponentAtNode=function(n){if(!B1(n))throw Error(nt(40));return n._reactRootContainer?(Pd(function(){z1(null,null,n,!1,function(){n._reactRootContainer=null,n[kl]=null})}),!0):!1};ws.unstable_batchedUpdates=QR;ws.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!B1(r))throw Error(nt(200));if(n==null||n._reactInternals===void 0)throw Error(nt(38));return z1(n,e,r,!1,i)};ws.version="18.3.1-next-f1338f8080-20240426";function oJ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oJ)}catch(n){console.error(n)}}oJ(),oX.exports=ws;var ba=oX.exports;const $de=C1(ba);var X4=ba;uO.createRoot=X4.createRoot,uO.hydrateRoot=X4.hydrateRoot;var Mb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bde={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},mc,uR,FK,zde=(FK=class{constructor(){pt(this,mc,Bde);pt(this,uR,!1)}setTimeoutProvider(n){We(this,mc,n)}setTimeout(n,e){return me(this,mc).setTimeout(n,e)}clearTimeout(n){me(this,mc).clearTimeout(n)}setInterval(n,e){return me(this,mc).setInterval(n,e)}clearInterval(n){me(this,mc).clearInterval(n)}},mc=new WeakMap,uR=new WeakMap,FK),rI=new zde;function Ude(n){setTimeout(n,0)}var U1=typeof window>"u"||"Deno"in globalThis;function $s(){}function Wde(n,e){return typeof n=="function"?n(e):n}function qde(n){return typeof n=="number"&&n>=0&&n!==1/0}function Hde(n,e){return Math.max(n+(e||0)-Date.now(),0)}function iI(n,e){return typeof n=="function"?n(e):n}function Vde(n,e){return typeof n=="function"?n(e):n}function Q4(n,e){const{type:r="all",exact:i,fetchStatus:s,predicate:o,queryKey:a,stale:l}=n;if(a){if(i){if(e.queryHash!==sN(a,e.options))return!1}else if(!S0(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function J4(n,e){const{exact:r,status:i,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(r){if(Md(e.options.mutationKey)!==Md(o))return!1}else if(!S0(e.options.mutationKey,o))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function sN(n,e){return((e==null?void 0:e.queryKeyHashFn)||Md)(n)}function Md(n){return JSON.stringify(n,(e,r)=>sI(r)?Object.keys(r).sort().reduce((i,s)=>(i[s]=r[s],i),{}):r)}function S0(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(r=>S0(n[r],e[r])):!1}var Yde=Object.prototype.hasOwnProperty;function aJ(n,e){if(n===e)return n;const r=Z4(n)&&Z4(e);if(!r&&!(sI(n)&&sI(e)))return e;const s=(r?n:Object.keys(n)).length,o=r?e:Object.keys(e),a=o.length,l=r?new Array(a):{};let c=0;for(let u=0;u<a;u++){const h=r?u:o[u],d=n[h],f=e[h];if(d===f){l[h]=d,(r?u<s:Yde.call(n,h))&&c++;continue}if(d===null||f===null||typeof d!="object"||typeof f!="object"){l[h]=f;continue}const m=aJ(d,f);l[h]=m,m===d&&c++}return s===a&&c===s?n:l}function Gde(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}function Z4(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function sI(n){if(!eL(n))return!1;const e=n.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!eL(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function eL(n){return Object.prototype.toString.call(n)==="[object Object]"}function Kde(n){return new Promise(e=>{rI.setTimeout(e,n)})}function Xde(n,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(n,e):r.structuralSharing!==!1?aJ(n,e):e}function Qde(n,e,r=0){const i=[...n,e];return r&&i.length>r?i.slice(1):i}function Jde(n,e,r=0){const i=[e,...n];return r&&i.length>r?i.slice(0,-1):i}var oN=Symbol();function lJ(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===oN?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Zde(n,e){return typeof n=="function"?n(...e):!!n}var rd,gc,Df,$K,ehe=($K=class extends Mb{constructor(){super();pt(this,rd);pt(this,gc);pt(this,Df);We(this,Df,e=>{if(!U1&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){me(this,gc)||this.setEventListener(me(this,Df))}onUnsubscribe(){var e;this.hasListeners()||((e=me(this,gc))==null||e.call(this),We(this,gc,void 0))}setEventListener(e){var r;We(this,Df,e),(r=me(this,gc))==null||r.call(this),We(this,gc,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){me(this,rd)!==e&&(We(this,rd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof me(this,rd)=="boolean"?me(this,rd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rd=new WeakMap,gc=new WeakMap,Df=new WeakMap,$K),cJ=new ehe;function the(){let n,e;const r=new Promise((s,o)=>{n=s,e=o});r.status="pending",r.catch(()=>{});function i(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},r.reject=s=>{i({status:"rejected",reason:s}),e(s)},r}var nhe=Ude;function rhe(){let n=[],e=0,r=l=>{l()},i=l=>{l()},s=nhe;const o=l=>{e?n.push(l):s(()=>{r(l)})},a=()=>{const l=n;n=[],l.length&&s(()=>{i(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{s=l}}}var Yr=rhe(),Of,bc,If,BK,ihe=(BK=class extends Mb{constructor(){super();pt(this,Of,!0);pt(this,bc);pt(this,If);We(this,If,e=>{if(!U1&&window.addEventListener){const r=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){me(this,bc)||this.setEventListener(me(this,If))}onUnsubscribe(){var e;this.hasListeners()||((e=me(this,bc))==null||e.call(this),We(this,bc,void 0))}setEventListener(e){var r;We(this,If,e),(r=me(this,bc))==null||r.call(this),We(this,bc,e(this.setOnline.bind(this)))}setOnline(e){me(this,Of)!==e&&(We(this,Of,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return me(this,Of)}},Of=new WeakMap,bc=new WeakMap,If=new WeakMap,BK),dw=new ihe;function she(n){return Math.min(1e3*2**n,3e4)}function uJ(n){return(n??"online")==="online"?dw.isOnline():!0}var oI=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function dJ(n){let e=!1,r=0,i;const s=the(),o=()=>s.status!=="pending",a=b=>{var y;if(!o()){const v=new oI(b);f(v),(y=n.onCancel)==null||y.call(n,v)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>cJ.isFocused()&&(n.networkMode==="always"||dw.isOnline())&&n.canRun(),h=()=>uJ(n.networkMode)&&n.canRun(),d=b=>{o()||(i==null||i(),s.resolve(b))},f=b=>{o()||(i==null||i(),s.reject(b))},m=()=>new Promise(b=>{var y;i=v=>{(o()||u())&&b(v)},(y=n.onPause)==null||y.call(n)}).then(()=>{var b;i=void 0,o()||(b=n.onContinue)==null||b.call(n)}),g=()=>{if(o())return;let b;const y=r===0?n.initialPromise:void 0;try{b=y??n.fn()}catch(v){b=Promise.reject(v)}Promise.resolve(b).then(d).catch(v=>{var C;if(o())return;const w=n.retry??(U1?0:3),k=n.retryDelay??she,S=typeof k=="function"?k(r,v):k,_=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,v);if(e||!_){f(v);return}r++,(C=n.onFail)==null||C.call(n,r,v),Kde(S).then(()=>u()?void 0:m()).then(()=>{e?f(v):g()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?g():m().then(g),s)}}var id,zK,hJ=(zK=class{constructor(){pt(this,id)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qde(this.gcTime)&&We(this,id,rI.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(U1?1/0:5*60*1e3))}clearGcTimeout(){me(this,id)&&(rI.clearTimeout(me(this,id)),We(this,id,void 0))}},id=new WeakMap,zK),sd,Af,Fs,od,Dr,bb,ad,mo,Ba,UK,ohe=(UK=class extends hJ{constructor(e){super();pt(this,mo);pt(this,sd);pt(this,Af);pt(this,Fs);pt(this,od);pt(this,Dr);pt(this,bb);pt(this,ad);We(this,ad,!1),We(this,bb,e.defaultOptions),this.setOptions(e.options),this.observers=[],We(this,od,e.client),We(this,Fs,me(this,od).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,We(this,sd,nL(this.options)),this.state=e.state??me(this,sd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=me(this,Dr))==null?void 0:e.promise}setOptions(e){if(this.options={...me(this,bb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=nL(this.options);r.data!==void 0&&(this.setState(tL(r.data,r.dataUpdatedAt)),We(this,sd,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&me(this,Fs).remove(this)}setData(e,r){const i=Xde(this.state.data,e,this.options);return Qt(this,mo,Ba).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(e,r){Qt(this,mo,Ba).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var i,s;const r=(i=me(this,Dr))==null?void 0:i.promise;return(s=me(this,Dr))==null||s.cancel(e),r?r.then($s).catch($s):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(me(this,sd))}isActive(){return this.observers.some(e=>Vde(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>iI(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Hde(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=me(this,Dr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=me(this,Dr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),me(this,Fs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(me(this,Dr)&&(me(this,ad)?me(this,Dr).cancel({revert:!0}):me(this,Dr).cancelRetry()),this.scheduleGc()),me(this,Fs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qt(this,mo,Ba).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,h,d,f,m,g,b,y,v,w,k;if(this.state.fetchStatus!=="idle"&&((c=me(this,Dr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(me(this,Dr))return me(this,Dr).continueRetry(),me(this,Dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(_=>_.options.queryFn);S&&this.setOptions(S.options)}const i=new AbortController,s=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(We(this,ad,!0),i.signal)})},o=()=>{const S=lJ(this.options,r),C=(()=>{const P={client:me(this,od),queryKey:this.queryKey,meta:this.meta};return s(P),P})();return We(this,ad,!1),this.options.persister?this.options.persister(S,C,this):S(C)},l=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:me(this,od),state:this.state,fetchFn:o};return s(S),S})();(u=this.options.behavior)==null||u.onFetch(l,this),We(this,Af,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Qt(this,mo,Ba).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),We(this,Dr,dJ({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:S=>{S instanceof oI&&S.revert&&this.setState({...me(this,Af),fetchStatus:"idle"}),i.abort()},onFail:(S,_)=>{Qt(this,mo,Ba).call(this,{type:"failed",failureCount:S,error:_})},onPause:()=>{Qt(this,mo,Ba).call(this,{type:"pause"})},onContinue:()=>{Qt(this,mo,Ba).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const S=await me(this,Dr).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(m=(f=me(this,Fs).config).onSuccess)==null||m.call(f,S,this),(b=(g=me(this,Fs).config).onSettled)==null||b.call(g,S,this.state.error,this),S}catch(S){if(S instanceof oI){if(S.silent)return me(this,Dr).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw Qt(this,mo,Ba).call(this,{type:"error",error:S}),(v=(y=me(this,Fs).config).onError)==null||v.call(y,S,this),(k=(w=me(this,Fs).config).onSettled)==null||k.call(w,this.state.data,S,this),S}finally{this.scheduleGc()}}},sd=new WeakMap,Af=new WeakMap,Fs=new WeakMap,od=new WeakMap,Dr=new WeakMap,bb=new WeakMap,ad=new WeakMap,mo=new WeakSet,Ba=function(e){const r=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...ahe(i.data,this.options),fetchMeta:e.meta??null};case"success":const s={...i,...tL(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return We(this,Af,e.manual?s:void 0),s;case"error":const o=e.error;return{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=r(this.state),Yr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),me(this,Fs).notify({query:this,type:"updated",action:e})})},UK);function ahe(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uJ(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function tL(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function nL(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,r=e!==void 0,i=r?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function rL(n){return{onFetch:(e,r)=>{var h,d,f,m,g;const i=e.options,s=(f=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],a=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let b=!1;const y=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},v=lJ(e.options,e.fetchOptions),w=async(k,S,_)=>{if(b)return Promise.reject();if(S==null&&k.pages.length)return Promise.resolve(k);const P=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};return y(I),I})(),T=await v(P),{maxPages:O}=e.options,D=_?Jde:Qde;return{pages:D(k.pages,T,O),pageParams:D(k.pageParams,S,O)}};if(s&&o.length){const k=s==="backward",S=k?lhe:iL,_={pages:o,pageParams:a},C=S(i,_);l=await w(_,C,k)}else{const k=n??o.length;do{const S=c===0?a[0]??i.initialPageParam:iL(i,l);if(c>0&&S==null)break;l=await w(l,S),c++}while(c<k)}return l};e.options.persister?e.fetchFn=()=>{var b,y;return(y=(b=e.options).persister)==null?void 0:y.call(b,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function iL(n,{pages:e,pageParams:r}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,r[i],r):void 0}function lhe(n,{pages:e,pageParams:r}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,r[0],r):void 0}var yb,Zo,bi,ld,ea,ic,WK,che=(WK=class extends hJ{constructor(e){super();pt(this,ea);pt(this,yb);pt(this,Zo);pt(this,bi);pt(this,ld);We(this,yb,e.client),this.mutationId=e.mutationId,We(this,bi,e.mutationCache),We(this,Zo,[]),this.state=e.state||fJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){me(this,Zo).includes(e)||(me(this,Zo).push(e),this.clearGcTimeout(),me(this,bi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){We(this,Zo,me(this,Zo).filter(r=>r!==e)),this.scheduleGc(),me(this,bi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){me(this,Zo).length||(this.state.status==="pending"?this.scheduleGc():me(this,bi).remove(this))}continue(){var e;return((e=me(this,ld))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,c,u,h,d,f,m,g,b,y,v,w,k,S,_,C,P,T,O;const r=()=>{Qt(this,ea,ic).call(this,{type:"continue"})},i={client:me(this,yb),meta:this.options.meta,mutationKey:this.options.mutationKey};We(this,ld,dJ({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(D,I)=>{Qt(this,ea,ic).call(this,{type:"failed",failureCount:D,error:I})},onPause:()=>{Qt(this,ea,ic).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>me(this,bi).canRun(this)}));const s=this.state.status==="pending",o=!me(this,ld).canStart();try{if(s)r();else{Qt(this,ea,ic).call(this,{type:"pending",variables:e,isPaused:o}),await((l=(a=me(this,bi).config).onMutate)==null?void 0:l.call(a,e,this,i));const I=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,i));I!==this.state.context&&Qt(this,ea,ic).call(this,{type:"pending",context:I,variables:e,isPaused:o})}const D=await me(this,ld).start();return await((d=(h=me(this,bi).config).onSuccess)==null?void 0:d.call(h,D,e,this.state.context,this,i)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,D,e,this.state.context,i)),await((b=(g=me(this,bi).config).onSettled)==null?void 0:b.call(g,D,null,this.state.variables,this.state.context,this,i)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,D,null,e,this.state.context,i)),Qt(this,ea,ic).call(this,{type:"success",data:D}),D}catch(D){try{throw await((k=(w=me(this,bi).config).onError)==null?void 0:k.call(w,D,e,this.state.context,this,i)),await((_=(S=this.options).onError)==null?void 0:_.call(S,D,e,this.state.context,i)),await((P=(C=me(this,bi).config).onSettled)==null?void 0:P.call(C,void 0,D,this.state.variables,this.state.context,this,i)),await((O=(T=this.options).onSettled)==null?void 0:O.call(T,void 0,D,e,this.state.context,i)),D}finally{Qt(this,ea,ic).call(this,{type:"error",error:D})}}finally{me(this,bi).runNext(this)}}},yb=new WeakMap,Zo=new WeakMap,bi=new WeakMap,ld=new WeakMap,ea=new WeakSet,ic=function(e){const r=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Yr.batch(()=>{me(this,Zo).forEach(i=>{i.onMutationUpdate(e)}),me(this,bi).notify({mutation:this,type:"updated",action:e})})},WK);function fJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qa,go,vb,qK,uhe=(qK=class extends Mb{constructor(e={}){super();pt(this,Qa);pt(this,go);pt(this,vb);this.config=e,We(this,Qa,new Set),We(this,go,new Map),We(this,vb,0)}build(e,r,i){const s=new che({client:e,mutationCache:this,mutationId:++My(this,vb)._,options:e.defaultMutationOptions(r),state:i});return this.add(s),s}add(e){me(this,Qa).add(e);const r=Yy(e);if(typeof r=="string"){const i=me(this,go).get(r);i?i.push(e):me(this,go).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(me(this,Qa).delete(e)){const r=Yy(e);if(typeof r=="string"){const i=me(this,go).get(r);if(i)if(i.length>1){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}else i[0]===e&&me(this,go).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Yy(e);if(typeof r=="string"){const i=me(this,go).get(r),s=i==null?void 0:i.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var i;const r=Yy(e);if(typeof r=="string"){const s=(i=me(this,go).get(r))==null?void 0:i.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yr.batch(()=>{me(this,Qa).forEach(e=>{this.notify({type:"removed",mutation:e})}),me(this,Qa).clear(),me(this,go).clear()})}getAll(){return Array.from(me(this,Qa))}find(e){const r={exact:!0,...e};return this.getAll().find(i=>J4(r,i))}findAll(e={}){return this.getAll().filter(r=>J4(e,r))}notify(e){Yr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Yr.batch(()=>Promise.all(e.map(r=>r.continue().catch($s))))}},Qa=new WeakMap,go=new WeakMap,vb=new WeakMap,qK);function Yy(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Ja,yc,Ni,Za,_l,px,aI,HK,dhe=(HK=class extends Mb{constructor(r,i){super();pt(this,_l);pt(this,Ja);pt(this,yc);pt(this,Ni);pt(this,Za);We(this,Ja,r),this.setOptions(i),this.bindMethods(),Qt(this,_l,px).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const i=this.options;this.options=me(this,Ja).defaultMutationOptions(r),Gde(this.options,i)||me(this,Ja).getMutationCache().notify({type:"observerOptionsUpdated",mutation:me(this,Ni),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&Md(i.mutationKey)!==Md(this.options.mutationKey)?this.reset():((s=me(this,Ni))==null?void 0:s.state.status)==="pending"&&me(this,Ni).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=me(this,Ni))==null||r.removeObserver(this)}onMutationUpdate(r){Qt(this,_l,px).call(this),Qt(this,_l,aI).call(this,r)}getCurrentResult(){return me(this,yc)}reset(){var r;(r=me(this,Ni))==null||r.removeObserver(this),We(this,Ni,void 0),Qt(this,_l,px).call(this),Qt(this,_l,aI).call(this)}mutate(r,i){var s;return We(this,Za,i),(s=me(this,Ni))==null||s.removeObserver(this),We(this,Ni,me(this,Ja).getMutationCache().build(me(this,Ja),this.options)),me(this,Ni).addObserver(this),me(this,Ni).execute(r)}},Ja=new WeakMap,yc=new WeakMap,Ni=new WeakMap,Za=new WeakMap,_l=new WeakSet,px=function(){var i;const r=((i=me(this,Ni))==null?void 0:i.state)??fJ();We(this,yc,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},aI=function(r){Yr.batch(()=>{var i,s,o,a,l,c,u,h;if(me(this,Za)&&this.hasListeners()){const d=me(this,yc).variables,f=me(this,yc).context,m={client:me(this,Ja),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((s=(i=me(this,Za)).onSuccess)==null||s.call(i,r.data,d,f,m),(a=(o=me(this,Za)).onSettled)==null||a.call(o,r.data,null,d,f,m)):(r==null?void 0:r.type)==="error"&&((c=(l=me(this,Za)).onError)==null||c.call(l,r.error,d,f,m),(h=(u=me(this,Za)).onSettled)==null||h.call(u,void 0,r.error,d,f,m))}this.listeners.forEach(d=>{d(me(this,yc))})})},HK),ta,VK,hhe=(VK=class extends Mb{constructor(e={}){super();pt(this,ta);this.config=e,We(this,ta,new Map)}build(e,r,i){const s=r.queryKey,o=r.queryHash??sN(s,r);let a=this.get(o);return a||(a=new ohe({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){me(this,ta).has(e.queryHash)||(me(this,ta).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=me(this,ta).get(e.queryHash);r&&(e.destroy(),r===e&&me(this,ta).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return me(this,ta).get(e)}getAll(){return[...me(this,ta).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(i=>Q4(r,i))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(i=>Q4(e,i)):r}notify(e){Yr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Yr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ta=new WeakMap,VK),tr,vc,xc,Rf,Nf,wc,jf,Lf,YK,fhe=(YK=class{constructor(n={}){pt(this,tr);pt(this,vc);pt(this,xc);pt(this,Rf);pt(this,Nf);pt(this,wc);pt(this,jf);pt(this,Lf);We(this,tr,n.queryCache||new hhe),We(this,vc,n.mutationCache||new uhe),We(this,xc,n.defaultOptions||{}),We(this,Rf,new Map),We(this,Nf,new Map),We(this,wc,0)}mount(){My(this,wc)._++,me(this,wc)===1&&(We(this,jf,cJ.subscribe(async n=>{n&&(await this.resumePausedMutations(),me(this,tr).onFocus())})),We(this,Lf,dw.subscribe(async n=>{n&&(await this.resumePausedMutations(),me(this,tr).onOnline())})))}unmount(){var n,e;My(this,wc)._--,me(this,wc)===0&&((n=me(this,jf))==null||n.call(this),We(this,jf,void 0),(e=me(this,Lf))==null||e.call(this),We(this,Lf,void 0))}isFetching(n){return me(this,tr).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return me(this,vc).findAll({...n,status:"pending"}).length}getQueryData(n){var r;const e=this.defaultQueryOptions({queryKey:n});return(r=me(this,tr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),r=me(this,tr).build(this,e),i=r.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&r.isStaleByTime(iI(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return me(this,tr).findAll(n).map(({queryKey:e,state:r})=>{const i=r.data;return[e,i]})}setQueryData(n,e,r){const i=this.defaultQueryOptions({queryKey:n}),s=me(this,tr).get(i.queryHash),o=s==null?void 0:s.state.data,a=Wde(e,o);if(a!==void 0)return me(this,tr).build(this,i).setData(a,{...r,manual:!0})}setQueriesData(n,e,r){return Yr.batch(()=>me(this,tr).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,r)]))}getQueryState(n){var r;const e=this.defaultQueryOptions({queryKey:n});return(r=me(this,tr).get(e.queryHash))==null?void 0:r.state}removeQueries(n){const e=me(this,tr);Yr.batch(()=>{e.findAll(n).forEach(r=>{e.remove(r)})})}resetQueries(n,e){const r=me(this,tr);return Yr.batch(()=>(r.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const r={revert:!0,...e},i=Yr.batch(()=>me(this,tr).findAll(n).map(s=>s.cancel(r)));return Promise.all(i).then($s).catch($s)}invalidateQueries(n,e={}){return Yr.batch(()=>(me(this,tr).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},i=Yr.batch(()=>me(this,tr).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch($s)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then($s)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const r=me(this,tr).build(this,e);return r.isStaleByTime(iI(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(n){return this.fetchQuery(n).then($s).catch($s)}fetchInfiniteQuery(n){return n.behavior=rL(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then($s).catch($s)}ensureInfiniteQueryData(n){return n.behavior=rL(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return dw.isOnline()?me(this,vc).resumePausedMutations():Promise.resolve()}getQueryCache(){return me(this,tr)}getMutationCache(){return me(this,vc)}getDefaultOptions(){return me(this,xc)}setDefaultOptions(n){We(this,xc,n)}setQueryDefaults(n,e){me(this,Rf).set(Md(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...me(this,Rf).values()],r={};return e.forEach(i=>{S0(n,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(n,e){me(this,Nf).set(Md(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...me(this,Nf).values()],r={};return e.forEach(i=>{S0(n,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(n){if(n._defaulted)return n;const e={...me(this,xc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=sN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===oN&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...me(this,xc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){me(this,tr).clear(),me(this,vc).clear()}},tr=new WeakMap,vc=new WeakMap,xc=new WeakMap,Rf=new WeakMap,Nf=new WeakMap,wc=new WeakMap,jf=new WeakMap,Lf=new WeakMap,YK),pJ=E.createContext(void 0),phe=n=>{const e=E.useContext(pJ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mhe=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(pJ.Provider,{value:n,children:e}));function aN(n,e){const r=phe(),[i]=E.useState(()=>new dhe(r,n));E.useEffect(()=>{i.setOptions(n)},[i,n]);const s=E.useSyncExternalStore(E.useCallback(a=>i.subscribe(Yr.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=E.useCallback((a,l)=>{i.mutate(a,l).catch($s)},[i]);if(s.error&&Zde(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}function lN(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function hw(n){return lN(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const mJ="2.43.2";let Om={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:r})=>e?`${n??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${mJ}`},hi=class lI extends Error{constructor(e,r={}){var l;const i=(()=>{var c;return r.cause instanceof lI?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof lI&&r.cause.docsPath||r.docsPath,o=(l=Om.getDocsUrl)==null?void 0:l.call(Om,{...r,docsPath:s}),a=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...i?[`Details: ${i}`]:[],...Om.version?[`Version: ${Om.version}`]:[]].join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=mJ}walk(e){return gJ(this,e)}};function gJ(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?gJ(n.cause,e):e?null:n}class ghe extends hi{constructor({expectedSize:e,givenSize:r}){super(`Expected bytes${e}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class bJ extends hi{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class yJ extends hi{constructor({size:e,targetSize:r,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Db(n,{dir:e,size:r=32}={}){return typeof n=="string"?bhe(n,{dir:e,size:r}):yhe(n,{dir:e,size:r})}function bhe(n,{dir:e,size:r=32}={}){if(r===null)return n;const i=n.replace("0x","");if(i.length>r*2)throw new yJ({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function yhe(n,{dir:e,size:r=32}={}){if(r===null)return n;if(n.length>r)throw new yJ({size:n.length,targetSize:r,type:"bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=e==="right";i[o?s:r-s-1]=n[o?s:n.length-s-1]}return i}class vhe extends hi{constructor({max:e,min:r,signed:i,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class xhe extends hi{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function W1(n,{size:e}){if(hw(n)>e)throw new xhe({givenSize:hw(n),maxSize:e})}const whe=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function _he(n,e={}){let r="";for(let s=0;s<n.length;s++)r+=whe[n[s]];const i=`0x${r}`;return typeof e.size=="number"?(W1(i,{size:e.size}),Db(i,{dir:"right",size:e.size})):i}function fw(n,e={}){const{signed:r,size:i}=e,s=BigInt(n);let o;i?r?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof n=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof o=="bigint"&&r?-o-1n:0;if(o&&s>o||s<a){const c=typeof n=="bigint"?"n":"";throw new vhe({max:o?`${o}${c}`:void 0,min:`${a}${c}`,signed:r,size:i,value:`${n}${c}`})}const l=`0x${(r&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Db(l,{size:i}):l}const She=new TextEncoder;function khe(n,e={}){const r=She.encode(n);return _he(r,e)}const Che=new TextEncoder;function Ehe(n,e={}){return typeof n=="number"||typeof n=="bigint"?Phe(n,e):typeof n=="boolean"?The(n,e):lN(n)?vJ(n,e):xJ(n,e)}function The(n,e={}){const r=new Uint8Array(1);return r[0]=Number(n),typeof e.size=="number"?(W1(r,{size:e.size}),Db(r,{size:e.size})):r}const Ia={zero:48,nine:57,A:65,F:70,a:97,f:102};function sL(n){if(n>=Ia.zero&&n<=Ia.nine)return n-Ia.zero;if(n>=Ia.A&&n<=Ia.F)return n-(Ia.A-10);if(n>=Ia.a&&n<=Ia.f)return n-(Ia.a-10)}function vJ(n,e={}){let r=n;e.size&&(W1(r,{size:e.size}),r=Db(r,{dir:"right",size:e.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,l=0;a<s;a++){const c=sL(i.charCodeAt(l++)),u=sL(i.charCodeAt(l++));if(c===void 0||u===void 0)throw new hi(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);o[a]=c*16+u}return o}function Phe(n,e){const r=fw(n,e);return vJ(r)}function xJ(n,e={}){const r=Che.encode(n);return typeof e.size=="number"?(W1(r,{size:e.size}),Db(r,{dir:"right",size:e.size})):r}const Gy=BigInt(2**32-1),oL=BigInt(32);function Mhe(n,e=!1){return e?{h:Number(n&Gy),l:Number(n>>oL&Gy)}:{h:Number(n>>oL&Gy)|0,l:Number(n&Gy)|0}}function Dhe(n,e=!1){const r=n.length;let i=new Uint32Array(r),s=new Uint32Array(r);for(let o=0;o<r;o++){const{h:a,l}=Mhe(n[o],e);[i[o],s[o]]=[a,l]}return[i,s]}const Ohe=(n,e,r)=>n<<r|e>>>32-r,Ihe=(n,e,r)=>e<<r|n>>>32-r,Ahe=(n,e,r)=>e<<r-32|n>>>64-r,Rhe=(n,e,r)=>n<<r-32|e>>>64-r;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Nhe(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function aL(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function pw(n,...e){if(!Nhe(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function lL(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function jhe(n,e){pw(n);const r=e.outputLen;if(n.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Lhe(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function wJ(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}const Fhe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $he(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Bhe(n){for(let e=0;e<n.length;e++)n[e]=$he(n[e]);return n}const cL=Fhe?n=>n:Bhe;function zhe(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function _J(n){return typeof n=="string"&&(n=zhe(n)),pw(n),n}let Uhe=class{};function Whe(n){const e=i=>n().update(_J(i)).digest(),r=n();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>n(),e}const qhe=BigInt(0),Im=BigInt(1),Hhe=BigInt(2),Vhe=BigInt(7),Yhe=BigInt(256),Ghe=BigInt(113),SJ=[],kJ=[],CJ=[];for(let n=0,e=Im,r=1,i=0;n<24;n++){[r,i]=[i,(2*r+3*i)%5],SJ.push(2*(5*i+r)),kJ.push((n+1)*(n+2)/2%64);let s=qhe;for(let o=0;o<7;o++)e=(e<<Im^(e>>Vhe)*Ghe)%Yhe,e&Hhe&&(s^=Im<<(Im<<BigInt(o))-Im);CJ.push(s)}const EJ=Dhe(CJ,!0),Khe=EJ[0],Xhe=EJ[1],uL=(n,e,r)=>r>32?Ahe(n,e,r):Ohe(n,e,r),dL=(n,e,r)=>r>32?Rhe(n,e,r):Ihe(n,e,r);function Qhe(n,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)r[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,c=(a+2)%10,u=r[c],h=r[c+1],d=uL(u,h,1)^r[l],f=dL(u,h,1)^r[l+1];for(let m=0;m<50;m+=10)n[a+m]^=d,n[a+m+1]^=f}let s=n[2],o=n[3];for(let a=0;a<24;a++){const l=kJ[a],c=uL(s,o,l),u=dL(s,o,l),h=SJ[a];s=n[h],o=n[h+1],n[h]=c,n[h+1]=u}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)r[l]=n[a+l];for(let l=0;l<10;l++)n[a+l]^=~r[(l+2)%10]&r[(l+4)%10]}n[0]^=Khe[i],n[1]^=Xhe[i]}wJ(r)}let Jhe=class TJ extends Uhe{constructor(e,r,i,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=s,this.rounds=o,aL(i),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Lhe(this.state)}clone(){return this._cloneInto()}keccak(){cL(this.state32),Qhe(this.state32,this.rounds),cL(this.state32),this.posOut=0,this.pos=0}update(e){lL(this),e=_J(e),pw(e);const{blockLen:r,state:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);for(let l=0;l<a;l++)i[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:s}=this;e[i]^=r,r&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){lL(this,!1),pw(e),this.finish();const r=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const a=Math.min(i-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return aL(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jhe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,wJ(this.state)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:s,rounds:o,enableXOF:a}=this;return e||(e=new TJ(r,i,s,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const Zhe=(n,e,r)=>Whe(()=>new Jhe(e,n,r)),efe=Zhe(1,136,256/8);function tfe(n,e){return efe(lN(n,{strict:!1})?Ehe(n):n)}class cN extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}}const nfe=/^0x[a-fA-F0-9]{40}$/,rk=new cN(8192);function PJ(n,e){const{strict:r=!0}=e??{},i=`${n}.${r}`;if(rk.has(i))return rk.get(i);const s=nfe.test(n)?n.toLowerCase()===n?!0:r?MJ(n)===n:!0:!1;return rk.set(i,s),s}const ik=new cN(8192);function MJ(n,e){if(ik.has(`${n}.${e}`))return ik.get(`${n}.${e}`);const r=n.substring(2).toLowerCase(),i=tfe(xJ(r)),s=r.split("");for(let a=0;a<40;a+=2)i[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(i[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const o=`0x${s.join("")}`;return ik.set(`${n}.${e}`,o),o}function pg(n,e){if(!PJ(n,{strict:!1}))throw new bJ({address:n});return MJ(n,e)}const rfe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ife=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function uN(n){return typeof n=="string"?{address:n,type:"json-rpc"}:n}const hl=(n,e,r)=>JSON.stringify(n,(i,s)=>typeof s=="bigint"?s.toString():s,r),dN=n=>n;class $g extends hi{constructor({body:e,cause:r,details:i,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:r,details:i,metaMessages:[o&&`Status: ${o}`,`URL: ${dN(a)}`,e&&`Request body: ${hl(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=a}}class DJ extends hi{constructor({body:e,error:r,url:i}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${dN(i)}`,`Request body: ${hl(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=i}}class hL extends hi{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${dN(r)}`,`Request body: ${hl(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const sfe=-1;class Xi extends hi{constructor(e,{code:r,docsPath:i,metaMessages:s,name:o,shortMessage:a}){super(a,{cause:e,docsPath:i,metaMessages:s||(e==null?void 0:e.metaMessages),name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof DJ?e.code:r??sfe}}class Ss extends Xi{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class k0 extends Xi{constructor(e){super(e,{code:k0.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(k0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class C0 extends Xi{constructor(e){super(e,{code:C0.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(C0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class E0 extends Xi{constructor(e,{method:r}={}){super(e,{code:E0.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(E0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class T0 extends Xi{constructor(e){super(e,{code:T0.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(T0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class dp extends Xi{constructor(e){super(e,{code:dp.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class P0 extends Xi{constructor(e){super(e,{code:P0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(P0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class M0 extends Xi{constructor(e){super(e,{code:M0.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(M0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class $c extends Xi{constructor(e){super(e,{code:$c.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty($c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class D0 extends Xi{constructor(e){super(e,{code:D0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(D0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Gu extends Xi{constructor(e,{method:r}={}){super(e,{code:Gu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class hp extends Xi{constructor(e){super(e,{code:hp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class O0 extends Xi{constructor(e){super(e,{code:O0.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(O0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vi extends Ss{constructor(e){super(e,{code:vi.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class I0 extends Ss{constructor(e){super(e,{code:I0.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(I0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class A0 extends Ss{constructor(e,{method:r}={}){super(e,{code:A0.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(A0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class R0 extends Ss{constructor(e){super(e,{code:R0.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(R0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class N0 extends Ss{constructor(e){super(e,{code:N0.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(N0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Dd extends Ss{constructor(e){super(e,{code:Dd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Dd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class j0 extends Ss{constructor(e){super(e,{code:j0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(j0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class L0 extends Ss{constructor(e){super(e,{code:L0.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(L0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class F0 extends Ss{constructor(e){super(e,{code:F0.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(F0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $0 extends Ss{constructor(e){super(e,{code:$0.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class B0 extends Ss{constructor(e){super(e,{code:B0.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(B0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class z0 extends Ss{constructor(e){super(e,{code:z0.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(z0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class U0 extends Ss{constructor(e){super(e,{code:U0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(U0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ofe extends Xi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const afe="modulepreload",lfe=function(n){return"/"+n},fL={},OJ=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=lfe(c),c in fL)return;fL[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":afe,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function cfe(){let n=()=>{},e=()=>{};return{promise:new Promise((i,s)=>{n=i,e=s}),resolve:n,reject:e}}const sk=new Map;function ufe({fn:n,id:e,shouldSplitBatch:r,wait:i=0,sort:s}){const o=async()=>{const h=c();a();const d=h.map(({args:f})=>f);d.length!==0&&n(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let m=0;m<h.length;m++){const{resolve:g}=h[m];g==null||g([f[m],f])}}).catch(f=>{for(let m=0;m<h.length;m++){const{reject:g}=h[m];g==null||g(f)}})},a=()=>sk.delete(e),l=()=>c().map(({args:h})=>h),c=()=>sk.get(e)||[],u=h=>sk.set(e,[...c(),h]);return{flush:a,async schedule(h){const{promise:d,resolve:f,reject:m}=cfe();return(r==null?void 0:r([...l(),h]))&&o(),c().length>0?(u({args:h,resolve:f,reject:m}),d):(u({args:h,resolve:f,reject:m}),setTimeout(o,i),d)}}}const Ky=new cN(8192);function dfe(n,{enabled:e=!0,id:r}){if(!e||!r)return n();if(Ky.get(r))return Ky.get(r);const i=n().finally(()=>Ky.delete(r));return Ky.set(r,i),i}async function hfe(n){return new Promise(e=>setTimeout(e,n))}function IJ(n,{delay:e=100,retryCount:r=2,shouldRetry:i=()=>!0}={}){return new Promise((s,o)=>{const a=async({count:l=0}={})=>{const c=async({error:u})=>{const h=typeof e=="function"?e({count:l,error:u}):e;h&&await hfe(h),a({count:l+1})};try{const u=await n();s(u)}catch(u){if(l<r&&await i({count:l,error:u}))return c({error:u});o(u)}};a()})}function ffe(n,e={}){return async(r,i={})=>{var d;const{dedupe:s=!1,methods:o,retryDelay:a=150,retryCount:l=3,uid:c}={...e,...i},{method:u}=r;if((d=o==null?void 0:o.exclude)!=null&&d.includes(u))throw new Gu(new Error("method not supported"),{method:u});if(o!=null&&o.include&&!o.include.includes(u))throw new Gu(new Error("method not supported"),{method:u});const h=s?khe(`${c}.${hl(r)}`):void 0;return dfe(()=>IJ(async()=>{try{return await n(r)}catch(f){const m=f;switch(m.code){case k0.code:throw new k0(m);case C0.code:throw new C0(m);case E0.code:throw new E0(m,{method:r.method});case T0.code:throw new T0(m);case dp.code:throw new dp(m);case P0.code:throw new P0(m);case M0.code:throw new M0(m);case $c.code:throw new $c(m);case D0.code:throw new D0(m);case Gu.code:throw new Gu(m,{method:r.method});case hp.code:throw new hp(m);case O0.code:throw new O0(m);case vi.code:throw new vi(m);case I0.code:throw new I0(m);case A0.code:throw new A0(m);case R0.code:throw new R0(m);case N0.code:throw new N0(m);case Dd.code:throw new Dd(m);case j0.code:throw new j0(m);case L0.code:throw new L0(m);case F0.code:throw new F0(m);case $0.code:throw new $0(m);case B0.code:throw new B0(m);case z0.code:throw new z0(m);case U0.code:throw new U0(m);case 5e3:throw new vi(m);default:throw f instanceof hi?f:new ofe(m)}}},{delay:({count:f,error:m})=>{var g;if(m&&m instanceof $g){const b=(g=m==null?void 0:m.headers)==null?void 0:g.get("Retry-After");if(b!=null&&b.match(/\d/))return Number.parseInt(b,10)*1e3}return~~(1<<f)*a},retryCount:l,shouldRetry:({error:f})=>pfe(f)}),{enabled:s,id:h})}}function pfe(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===hp.code||n.code===dp.code:n instanceof $g&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function AJ(n){const e={formatters:void 0,fees:void 0,serializers:void 0,...n};function r(i){return s=>{const o=typeof s=="function"?s(i):s,a={...i,...o};return Object.assign(a,{extend:r(a)})}}return Object.assign(e,{extend:r(e)})}function RJ(n,{errorInstance:e=new Error("timed out"),timeout:r,signal:i}){return new Promise((s,o)=>{(async()=>{let a;try{const l=new AbortController;r>0&&(a=setTimeout(()=>{i?l.abort():o(e)},r)),s(await n({signal:(l==null?void 0:l.signal)||null}))}catch(l){(l==null?void 0:l.name)==="AbortError"&&o(e),o(l)}finally{clearTimeout(a)}})()})}function mfe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const pL=mfe();function gfe(n,e={}){return{async request(r){var f;const{body:i,fetchFn:s=e.fetchFn??fetch,onRequest:o=e.onRequest,onResponse:a=e.onResponse,timeout:l=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:h,signal:d}=c;try{const m=await RJ(async({signal:b})=>{const y={...c,body:Array.isArray(i)?hl(i.map(S=>({jsonrpc:"2.0",id:S.id??pL.take(),...S}))):hl({jsonrpc:"2.0",id:i.id??pL.take(),...i}),headers:{"Content-Type":"application/json",...u},method:h||"POST",signal:d||(l>0?b:null)},v=new Request(n,y),w=await(o==null?void 0:o(v,y))??{...y,url:n};return await s(w.url??n,w)},{errorInstance:new hL({body:i,url:n}),timeout:l,signal:!0});a&&await a(m);let g;if((f=m.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))g=await m.json();else{g=await m.text();try{g=JSON.parse(g||"{}")}catch(b){if(m.ok)throw b;g={error:g}}}if(!m.ok)throw new $g({body:i,details:hl(g.error)||m.statusText,headers:m.headers,status:m.status,url:n});return g}catch(m){throw m instanceof $g||m instanceof hL?m:new $g({body:i,cause:m,url:n})}}}}class bfe extends hi{constructor({domain:e}){super(`Invalid domain "${hl(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class yfe extends hi{constructor({primaryType:e,types:r}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class vfe extends hi{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function xfe(n){const{domain:e,message:r,primaryType:i,types:s}=n,o=(c,u)=>{const h={...u};for(const d of c){const{name:f,type:m}=d;m==="address"&&(h[f]=h[f].toLowerCase())}return h},a=s.EIP712Domain?e?o(s.EIP712Domain,e):{}:{},l=(()=>{if(i!=="EIP712Domain")return o(s[i],r)})();return hl({domain:a,message:l,primaryType:i,types:s})}function wfe(n){const{domain:e,message:r,primaryType:i,types:s}=n,o=(a,l)=>{for(const c of a){const{name:u,type:h}=c,d=l[u],f=h.match(ife);if(f&&(typeof d=="number"||typeof d=="bigint")){const[b,y,v]=f;fw(d,{signed:y==="int",size:Number.parseInt(v,10)/8})}if(h==="address"&&typeof d=="string"&&!PJ(d))throw new bJ({address:d});const m=h.match(rfe);if(m){const[b,y]=m;if(y&&hw(d)!==Number.parseInt(y,10))throw new ghe({expectedSize:Number.parseInt(y,10),givenSize:hw(d)})}const g=s[h];g&&(Sfe(h),o(g,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new bfe({domain:e});o(s.EIP712Domain,e)}if(i!=="EIP712Domain")if(s[i])o(s[i],r);else throw new yfe({primaryType:i,types:s})}function _fe({domain:n}){return[typeof(n==null?void 0:n.name)=="string"&&{name:"name",type:"string"},(n==null?void 0:n.version)&&{name:"version",type:"string"},(typeof(n==null?void 0:n.chainId)=="number"||typeof(n==null?void 0:n.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(n==null?void 0:n.verifyingContract)&&{name:"verifyingContract",type:"address"},(n==null?void 0:n.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Sfe(n){if(n==="address"||n==="bool"||n==="string"||n.startsWith("bytes")||n.startsWith("uint")||n.startsWith("int"))throw new vfe({type:n})}class kfe extends hi{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function Cfe(n,e){const{account:r=n.account,domain:i,message:s,primaryType:o}=e;if(!r)throw new kfe({docsPath:"/docs/actions/wallet/signTypedData"});const a=uN(r),l={EIP712Domain:_fe({domain:i}),...e.types};if(wfe({domain:i,message:s,primaryType:o,types:l}),a.signTypedData)return a.signTypedData({domain:i,message:s,primaryType:o,types:l});const c=xfe({domain:i,message:s,primaryType:o,types:l});return n.request({method:"eth_signTypedData_v4",params:[a.address,c]},{retryCount:0})}function Efe(n,e,r){const i=n[e.name];if(typeof i=="function")return i;const s=n[r];return typeof s=="function"?s:o=>e(n,o)}const mx="3.0.0",Tfe=()=>`@wagmi/core@${mx}`;var NJ=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},mw,jJ;let ru=class cI extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Tfe()}constructor(e,r={}){var o;super(),mw.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const i=r.cause instanceof cI?r.cause.details:(o=r.cause)!=null&&o.message?r.cause.message:r.details,s=r.cause instanceof cI&&r.cause.docsPath||r.docsPath;this.message=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${r.docsSlug?`#${r.docsSlug}`:""}`]:[],...i?[`Details: ${i}`]:[],`Version: ${this.version}`].join(`
`),r.cause&&(this.cause=r.cause),this.details=i,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}walk(e){return NJ(this,mw,"m",jJ).call(this,this,e)}};mw=new WeakSet,jJ=function n(e,r){return r!=null&&r(e)?e:e.cause?NJ(this,mw,"m",n).call(this,e.cause,r):e};class uI extends ru{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Pfe extends ru{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Mfe extends ru{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Dfe extends ru{constructor({address:e,connector:r}){super(`Account "${e}" not found for connector "${r.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Ofe extends ru{constructor({connectionChainId:e,connectorChainId:r}){super(`The current chain of the connector (id: ${r}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Ife extends ru{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Afe(n,e){var i;let r;if(typeof e.connector=="function"?r=n._internal.connectors.setup(e.connector):r=e.connector,r.uid===n.state.current)throw new Pfe;try{n.setState(l=>({...l,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});const{connector:s,...o}=e,a=await r.connect(o);return r.emitter.off("connect",n._internal.events.connect),r.emitter.on("change",n._internal.events.change),r.emitter.on("disconnect",n._internal.events.disconnect),await((i=n.storage)==null?void 0:i.setItem("recentConnectorId",r.id)),n.setState(l=>({...l,connections:new Map(l.connections).set(r.uid,{accounts:o.withCapabilities?a.accounts.map(c=>typeof c=="object"?c.address:c):a.accounts,chainId:a.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:o.withCapabilities?a.accounts.map(l=>typeof l=="object"?l:{address:l,capabilities:{}}):a.accounts,chainId:a.chainId}}catch(s){throw n.setState(o=>({...o,status:o.current?"connected":"disconnected"})),s}}const dI=256;let Xy=dI,Qy;function LJ(n=11){if(!Qy||Xy+n>dI*2){Qy="",Xy=0;for(let e=0;e<dI;e++)Qy+=(256+Math.random()*256|0).toString(16).substring(1)}return Qy.substring(Xy,Xy+++n)}function FJ(n){const{batch:e,chain:r,ccipRead:i,key:s="base",name:o="Base Client",type:a="base"}=n,l=n.experimental_blockTag??(typeof(r==null?void 0:r.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(r==null?void 0:r.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),h=n.pollingInterval??u,d=n.cacheTime??h,f=n.account?uN(n.account):void 0,{config:m,request:g,value:b}=n.transport({account:f,chain:r,pollingInterval:h}),y={...m,...b},v={account:f,batch:e,cacheTime:d,ccipRead:i,chain:r,key:s,name:o,pollingInterval:h,request:g,transport:y,type:a,uid:LJ(),...l?{experimental_blockTag:l}:{}};function w(k){return S=>{const _=S(k);for(const P in v)delete _[P];const C={...k,..._};return Object.assign(C,{extend:w(C)})}}return Object.assign(v,{extend:w(v)})}function $J({key:n,methods:e,name:r,request:i,retryCount:s=3,retryDelay:o=150,timeout:a,type:l},c){const u=LJ();return{config:{key:n,methods:e,name:r,request:i,retryCount:s,retryDelay:o,timeout:a,type:l},request:ffe(i,{methods:e,retryCount:s,retryDelay:o,uid:u}),value:c}}function Rfe(n,e={}){const{key:r="custom",methods:i,name:s="Custom Provider",retryDelay:o}=e;return({retryCount:a})=>$J({key:r,methods:i,name:s,request:n.request.bind(n),retryCount:e.retryCount??a,retryDelay:o,type:"custom"})}class Nfe extends hi{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function mL(n,e={}){const{batch:r,fetchFn:i,fetchOptions:s,key:o="http",methods:a,name:l="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:h,raw:d}=e;return({chain:f,retryCount:m,timeout:g})=>{const{batchSize:b=1e3,wait:y=0}=typeof r=="object"?r:{},v=e.retryCount??m,w=g??e.timeout??1e4,k=f==null?void 0:f.rpcUrls.default.http[0];if(!k)throw new Nfe;const S=gfe(k,{fetchFn:i,fetchOptions:s,onRequest:c,onResponse:u,timeout:w});return $J({key:o,methods:a,name:l,async request({method:_,params:C}){const P={method:_,params:C},{schedule:T}=ufe({id:k,wait:y,shouldSplitBatch(U){return U.length>b},fn:U=>S.request({body:U}),sort:(U,B)=>U.id-B.id}),O=async U=>r?T(U):[await S.request({body:U})],[{error:D,result:I}]=await O(P);if(d)return{error:D,result:I};if(D)throw new DJ({body:P,error:D,url:k});return I},retryCount:v,retryDelay:h,timeout:w,type:"http"},{fetchOptions:s,url:k})}}async function jfe(n,e={}){const{assertChainId:r=!0}=e;let i;if(e.connector){const{connector:h}=e;if(n.state.status==="reconnecting"&&!h.getAccounts&&!h.getChainId)throw new Ife({connector:h});const[d,f]=await Promise.all([h.getAccounts().catch(m=>{if(e.account===null)return[];throw m}),h.getChainId()]);i={accounts:d,chainId:f,connector:h}}else i=n.state.connections.get(n.state.current);if(!i)throw new Mfe;const s=e.chainId??i.chainId,o=await i.connector.getChainId();if(r&&o!==s)throw new Ofe({connectionChainId:s,connectorChainId:o});const a=i.connector;if(a.getClient)return a.getClient({chainId:s});const l=uN(e.account??i.accounts[0]);if(l&&(l.address=pg(l.address)),e.account&&!i.accounts.some(h=>h.toLowerCase()===l.address.toLowerCase()))throw new Dfe({address:l.address,connector:a});const c=n.chains.find(h=>h.id===s),u=await i.connector.getProvider({chainId:s});return FJ({account:l,chain:c,name:"Connector Client",transport:h=>Rfe(u)({...h,retryCount:0})})}async function Lfe(n,e={}){var s,o;let r;if(e.connector)r=e.connector;else{const{connections:a,current:l}=n.state,c=a.get(l);r=c==null?void 0:c.connector}const i=n.state.connections;r&&(await r.disconnect(),r.emitter.off("change",n._internal.events.change),r.emitter.off("disconnect",n._internal.events.disconnect),r.emitter.on("connect",n._internal.events.connect),i.delete(r.uid)),n.setState(a=>{if(i.size===0)return{...a,connections:new Map,current:null,status:"disconnected"};const l=i.values().next().value;return{...a,connections:new Map(i),current:l.connector.uid}});{const a=n.state.current;if(!a)return;const l=(s=n.state.connections.get(a))==null?void 0:s.connector;if(!l)return;await((o=n.storage)==null?void 0:o.setItem("recentConnectorId",l.id))}}function gL(n){return n.state.chainId}function fp(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let r,i;if(Array.isArray(n)&&Array.isArray(e)){if(r=n.length,r!==e.length)return!1;for(i=r;i--!==0;)if(!fp(n[i],e[i]))return!1;return!0}if(typeof n.valueOf=="function"&&n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(typeof n.toString=="function"&&n.toString!==Object.prototype.toString)return n.toString()===e.toString();const s=Object.keys(n);if(r=s.length,r!==Object.keys(e).length)return!1;for(i=r;i--!==0;)if(!Object.hasOwn(e,s[i]))return!1;for(i=r;i--!==0;){const o=s[i];if(o&&!fp(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function BJ(n){const e=n.state.current,r=n.state.connections.get(e),i=r==null?void 0:r.accounts,s=i==null?void 0:i[0],o=n.chains.find(l=>l.id===(r==null?void 0:r.chainId)),a=n.state.status;switch(a){case"connected":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:a};case"reconnecting":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:a};case"connecting":return{address:s,addresses:i,chain:o,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:a};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:a}}}let Jy=[];function hI(n){const e=[...n.state.connections.values()];return n.state.status==="reconnecting"||fp(Jy,e)?Jy:(Jy=e,e)}let Zy=[];function bL(n){const e=n.connectors;return Zy.length===e.length&&Zy.every((r,i)=>r===e[i])?Zy:(Zy=e,e)}let ok=!1;async function Ffe(n,e={}){var u,h;if(ok)return[];ok=!0,n.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const r=[];if((u=e.connectors)!=null&&u.length)for(const d of e.connectors){let f;typeof d=="function"?f=n._internal.connectors.setup(d):f=d,r.push(f)}else r.push(...n.connectors);let i;try{i=await((h=n.storage)==null?void 0:h.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of n.state.connections)s[d.connector.id]=1;i&&(s[i]=0);const o=Object.keys(s).length>0?[...r].sort((d,f)=>(s[d.id]??10)-(s[f.id]??10)):r;let a=!1;const l=[],c=[];for(const d of o){const f=await d.getProvider().catch(()=>{});if(!f||c.some(b=>b===f)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",n._internal.events.connect),d.emitter.on("change",n._internal.events.change),d.emitter.on("disconnect",n._internal.events.disconnect),n.setState(b=>{const y=new Map(a?b.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...b,current:a?b.current:d.uid,connections:y}}),l.push({accounts:g.accounts,chainId:g.chainId,connector:d}),c.push(f),a=!0)}return(n.state.status==="reconnecting"||n.state.status==="connecting")&&(a?n.setState(d=>({...d,status:"connected"})):n.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),ok=!1,l}async function $fe(n,e){const{account:r,connector:i,...s}=e;let o;return typeof r=="object"&&r.type==="local"?o=n.getClient():o=await jfe(n,{account:r,connector:i}),Efe(o,Cfe,"signTypedData")({...s,...r?{account:r}:{}})}class _h extends ru{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function Bfe(n,e){const{onChange:r}=e;return n.subscribe(i=>i.chainId,r)}function zfe(n,e){const{onChange:r}=e;return n.subscribe(()=>BJ(n),r,{equalityFn(i,s){const{connector:o,...a}=i,{connector:l,...c}=s;return fp(a,c)&&(o==null?void 0:o.id)===(l==null?void 0:l.id)&&(o==null?void 0:o.uid)===(l==null?void 0:l.uid)}})}function Ufe(n,e){const{onChange:r}=e;return n.subscribe(()=>hI(n),r,{equalityFn:fp})}function Wfe(n,e){const{onChange:r}=e;return n._internal.connectors.subscribe((i,s)=>{r(Object.values(i),s)})}q1.type="injected";function q1(n={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:r}=n;function i(){const c=n.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...qfe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,o,a,l;return c=>({get icon(){return i().icon},get id(){return i().id},get name(){return i().name},type:q1.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&n.target&&(a||(a=this.onConnect.bind(this),u.on("connect",a)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:h,withCapabilities:d}={}){var g,b,y,v,w,k;const f=await this.getProvider();if(!f)throw new _h;let m=[];if(h)m=await this.getAccounts().catch(()=>[]);else if(e)try{m=(v=(y=(b=(g=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:b[0])==null?void 0:y.value)==null?void 0:v.map(_=>pg(_)),m.length>0&&(m=await this.getAccounts())}catch(S){const _=S;if(_.code===vi.code)throw new vi(_);if(_.code===$c.code)throw _}try{!(m!=null&&m.length)&&!h&&(m=(await f.request({method:"eth_requestAccounts"})).map(C=>pg(C))),a&&(f.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),f.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l));let S=await this.getChainId();if(u&&S!==u){const _=await this.switchChain({chainId:u}).catch(C=>{if(C.code===vi.code)throw C;return{id:S}});S=(_==null?void 0:_.id)??S}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),n.target||await((k=c.storage)==null?void 0:k.setItem("injected.connected",!0)),{accounts:d?m.map(_=>({address:_,capabilities:{}})):m,chainId:S}}catch(S){const _=S;throw _.code===vi.code?new vi(_):_.code===$c.code?new $c(_):_}},async disconnect(){var h,d;const u=await this.getProvider();if(!u)throw new _h;o&&(u.removeListener("chainChanged",o),o=void 0),l&&(u.removeListener("disconnect",l),l=void 0),a||(a=this.onConnect.bind(this),u.on("connect",a));try{await RJ(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((h=c.storage)==null?void 0:h.setItem(`${this.id}.disconnected`,!0)),n.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new _h;return(await u.request({method:"eth_accounts"})).map(d=>pg(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new _h;const h=await u.request({method:"eth_chainId"});return Number(h)},async getProvider(){if(typeof window>"u")return;let u;const h=i();return typeof h.provider=="function"?u=h.provider(window):typeof h.provider=="string"?u=gx(window,h.provider):u=h.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,h;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!n.target&&!await((h=c.storage)==null?void 0:h.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(r!==void 0&&r!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),b=typeof r=="number"?r:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(v=>window.addEventListener("ethereum#initialized",()=>v(g()),{once:!0}))]:[],new Promise(v=>setTimeout(()=>v(g()),b))]))return!0}throw new _h}return!!(await IJ(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:h}){var g,b,y,v;const d=await this.getProvider();if(!d)throw new _h;const f=c.chains.find(w=>w.id===h);if(!f)throw new Dd(new uI);const m=new Promise(w=>{const k=S=>{"chainId"in S&&S.chainId===h&&(c.emitter.off("change",k),w())};c.emitter.on("change",k)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:fw(h)}]}).then(async()=>{await this.getChainId()===h&&c.emitter.emit("change",{chainId:h})}),m]),f}catch(w){const k=w;if(k.code===4902||((b=(g=k==null?void 0:k.data)==null?void 0:g.originalError)==null?void 0:b.code)===4902)try{const{default:S,..._}=f.blockExplorers??{};let C;u!=null&&u.blockExplorerUrls?C=u.blockExplorerUrls:S&&(C=[S.url,...Object.values(_).map(O=>O.url)]);let P;(y=u==null?void 0:u.rpcUrls)!=null&&y.length?P=u.rpcUrls:P=[((v=f.rpcUrls.default)==null?void 0:v.http[0])??""];const T={blockExplorerUrls:C,chainId:fw(h),chainName:(u==null?void 0:u.chainName)??f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??f.nativeCurrency,rpcUrls:P};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===h)c.emitter.emit("change",{chainId:h});else throw new vi(new Error("User rejected switch after adding network."))}),m]),f}catch(S){throw new vi(S)}throw k.code===vi.code?new vi(k):new Dd(k)}},async onAccountsChanged(u){var h;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((h=c.storage)==null?void 0:h.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(d=>pg(d))})},onChainChanged(u){const h=Number(u);c.emitter.emit("change",{chainId:h})},async onConnect(u){const h=await this.getAccounts();if(h.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:h,chainId:d});const f=await this.getProvider();f&&(a&&(f.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),f.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l)))},async onDisconnect(u){const h=await this.getProvider();u&&u.code===1013&&h&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),h&&(o&&(h.removeListener("chainChanged",o),o=void 0),l&&(h.removeListener("disconnect",l),l=void 0),a||(a=this.onConnect.bind(this),h.on("connect",a))))}})}const qfe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(n){return n!=null&&n.coinbaseWalletExtension?n.coinbaseWalletExtension:gx(n,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(n){return gx(n,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const r=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const i of r)if(e[i])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(n){var e,r;return(e=n==null?void 0:n.phantom)!=null&&e.ethereum?(r=n.phantom)==null?void 0:r.ethereum:gx(n,"isPhantom")}}};function gx(n,e){function r(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const i=n.ethereum;if(i!=null&&i.providers)return i.providers.find(s=>r(s));if(i&&r(i))return i}function Hfe(n){if(typeof window>"u")return;const e=r=>n(r.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Vfe(){const n=new Set;let e=[];const r=()=>Hfe(s=>{e.some(({info:o})=>o.uuid===s.info.uuid)||(e=[...e,s],n.forEach(o=>o(e,{added:[s]})))});let i=r();return{_listeners(){return n},clear(){n.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),n.clear(),i==null||i()},findProvider({rdns:s}){return e.find(o=>o.info.rdns===s)},getProviders(){return e},reset(){this.clear(),i==null||i(),i=r()},subscribe(s,{emitImmediately:o}={}){return n.add(s),o&&s(e,{added:e}),()=>n.delete(s)}}}const Yfe=n=>(e,r,i)=>{const s=i.subscribe;return i.subscribe=(a,l,c)=>{let u=a;if(l){const h=(c==null?void 0:c.equalityFn)||Object.is;let d=a(i.getState());u=f=>{const m=a(f);if(!h(d,m)){const g=d;l(d=m,g)}},c!=null&&c.fireImmediately&&l(d,d)}return s(u)},n(e,r,i)},Gfe=Yfe;function Kfe(n,e){let r;try{r=n()}catch{return}return{getItem:s=>{var o;const a=c=>c===null?null:JSON.parse(c,void 0),l=(o=r.getItem(s))!=null?o:null;return l instanceof Promise?l.then(a):a(l)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const fI=n=>e=>{try{const r=n(e);return r instanceof Promise?r:{then(i){return fI(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return fI(i)(r)}}}},Xfe=(n,e)=>(r,i,s)=>{let o={storage:Kfe(()=>localStorage),partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...e},a=!1;const l=new Set,c=new Set;let u=o.storage;if(!u)return n((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...b)},i,s);const h=()=>{const b=o.partialize({...i()});return u.setItem(o.name,{state:b,version:o.version})},d=s.setState;s.setState=(b,y)=>{d(b,y),h()};const f=n((...b)=>{r(...b),h()},i,s);s.getInitialState=()=>f;let m;const g=()=>{var b,y;if(!u)return;a=!1,l.forEach(w=>{var k;return w((k=i())!=null?k:f)});const v=((y=o.onRehydrateStorage)==null?void 0:y.call(o,(b=i())!=null?b:f))||void 0;return fI(u.getItem.bind(u))(o.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==o.version){if(o.migrate)return[!0,o.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var k;const[S,_]=w;if(m=o.merge(_,(k=i())!=null?k:f),r(m,!0),S)return h()}).then(()=>{v==null||v(m,void 0),m=i(),a=!0,c.forEach(w=>w(m))}).catch(w=>{v==null||v(void 0,w)})};return s.persist={setOptions:b=>{o={...o,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},o.skipHydration||g(),m||f},Qfe=Xfe,yL=n=>{let e;const r=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(m=>m(e,f))}},s=()=>e,l={setState:i,getState:s,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=n(i,s,l);return l},ak=n=>n?yL(n):yL;var zJ={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function o(c,u,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new s(h,d||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)e.call(h,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=r?r+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,g=new Array(m);f<m;f++)g[f]=d[f].fn;return g},l.prototype.listenerCount=function(u){var h=r?r+u:u,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,h,d,f,m,g){var b=r?r+u:u;if(!this._events[b])return!1;var y=this._events[b],v=arguments.length,w,k;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,d),!0;case 4:return y.fn.call(y.context,h,d,f),!0;case 5:return y.fn.call(y.context,h,d,f,m),!0;case 6:return y.fn.call(y.context,h,d,f,m,g),!0}for(k=1,w=new Array(v-1);k<v;k++)w[k-1]=arguments[k];y.fn.apply(y.context,w)}else{var S=y.length,_;for(k=0;k<S;k++)switch(y[k].once&&this.removeListener(u,y[k].fn,void 0,!0),v){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,h);break;case 3:y[k].fn.call(y[k].context,h,d);break;case 4:y[k].fn.call(y[k].context,h,d,f);break;default:if(!w)for(_=1,w=new Array(v-1);_<v;_++)w[_-1]=arguments[_];y[k].fn.apply(y[k].context,w)}}return!0},l.prototype.on=function(u,h,d){return o(this,u,h,d,!1)},l.prototype.once=function(u,h,d){return o(this,u,h,d,!0)},l.prototype.removeListener=function(u,h,d,f){var m=r?r+u:u;if(!this._events[m])return this;if(!h)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===h&&(!f||g.once)&&(!d||g.context===d)&&a(this,m);else{for(var b=0,y=[],v=g.length;b<v;b++)(g[b].fn!==h||f&&!g[b].once||d&&g[b].context!==d)&&y.push(g[b]);y.length?this._events[m]=y.length===1?y[0]:y:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,n.exports=l})(zJ);var Jfe=zJ.exports;const Zfe=C1(Jfe);let epe=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Zfe})}on(e,r){this._emitter.on(e,r)}once(e,r){this._emitter.once(e,r)}off(e,r){this._emitter.off(e,r)}emit(e,...r){const i=r[0];this._emitter.emit(e,{uid:this.uid,...i})}listenerCount(e){return this._emitter.listenerCount(e)}};function tpe(n){return new epe(n)}function npe(n,e){return JSON.parse(n,(r,i)=>{let s=i;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(r,s))??s})}function vL(n,e){return n.slice(0,e).join(".")||"."}function xL(n,e){const{length:r}=n;for(let i=0;i<r;++i)if(n[i]===e)return i+1;return 0}function rpe(n,e){const r=typeof n=="function",i=typeof e=="function",s=[],o=[];return function(l,c){if(typeof c=="object")if(s.length){const u=xL(s,this);u===0?s[s.length]=this:(s.splice(u),o.splice(u)),o[o.length]=l;const h=xL(s,c);if(h!==0)return i?e.call(this,l,c,vL(o,h)):`[ref=${vL(o,h)}]`}else s[0]=c,o[0]=l;return r?n.call(this,l,c):c}}function ipe(n,e,r,i){return JSON.stringify(n,rpe((s,o)=>{let a=o;return typeof a=="bigint"&&(a={__type:"bigint",value:o.toString()}),a instanceof Map&&(a={__type:"Map",value:Array.from(o.entries())}),(e==null?void 0:e(s,a))??a},i),r??void 0)}function spe(n){const{deserialize:e=npe,key:r="wagmi",serialize:i=ipe,storage:s=UJ}=n;function o(a){return a instanceof Promise?a.then(l=>l).catch(()=>null):a}return{...s,key:r,async getItem(a,l){const c=s.getItem(`${r}.${a}`),u=await o(c);return u?e(u)??null:l??null},async setItem(a,l){const c=`${r}.${a}`;l===null?await o(s.removeItem(c)):await o(s.setItem(c,i(l)))},async removeItem(a){await o(s.removeItem(`${r}.${a}`))}}}const UJ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function ope(){const n=typeof window<"u"&&window.localStorage?window.localStorage:UJ;return{getItem(e){return n.getItem(e)},removeItem(e){n.removeItem(e)},setItem(e,r){try{n.setItem(e,r)}catch{}}}}const pI=256;let ev=pI,tv;function ape(n=11){if(!tv||ev+n>pI*2){tv="",ev=0;for(let e=0;e<pI;e++)tv+=(256+Math.random()*256|0).toString(16).substring(1)}return tv.substring(ev,ev+++n)}function lpe(n){const{multiInjectedProviderDiscovery:e=!0,storage:r=spe({storage:ope()}),syncConnectedChain:i=!0,ssr:s=!1,...o}=n,a=typeof window<"u"&&e?Vfe():void 0,l=ak(()=>o.chains),c=ak(()=>{const _=[],C=new Set;for(const P of o.connectors??[]){const T=u(P);if(_.push(T),!s&&T.rdns){const O=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const D of O)C.add(D)}}if(!s&&a){const P=a.getProviders();for(const T of P)C.has(T.info.rdns)||_.push(u(h(T)))}return _});function u(_){var T;const C=tpe(ape()),P={..._({emitter:C,chains:l.getState(),storage:r,transports:o.transports}),emitter:C,uid:C.uid};return C.on("connect",k),(T=P.setup)==null||T.call(P),P}function h(_){const{info:C}=_,P=_.provider;return q1({target:{...C,id:C.rdns,provider:P}})}const d=new Map;function f(_={}){const C=_.chainId??y.getState().chainId,P=l.getState().find(O=>O.id===C);if(_.chainId&&!P)throw new uI;{const O=d.get(y.getState().chainId);if(O&&!P)return O;if(!P)throw new uI}{const O=d.get(C);if(O)return O}let T;if(o.client)T=o.client({chain:P});else{const O=P.id,D=l.getState().map(B=>B.id),I={},U=Object.entries(o);for(const[B,z]of U)if(!(B==="chains"||B==="client"||B==="connectors"||B==="transports"))if(typeof z=="object")if(O in z)I[B]=z[O];else{if(D.some(F=>F in z))continue;I[B]=z}else I[B]=z;T=FJ({...I,chain:P,batch:I.batch??{multicall:!0},transport:B=>o.transports[O]({...B,connectors:c})})}return d.set(C,T),T}function m(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const b="0.0.0-canary-";mx.startsWith(b)?g=Number.parseInt(mx.replace(b,""),10):g=Number.parseInt(mx.split(".")[0]??"0",10);const y=ak(Gfe(r?Qfe(m,{migrate(_,C){if(C===g)return _;const P=m(),T=v(_,P.chainId);return{...P,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([C,P])=>{const{id:T,name:O,type:D,uid:I}=P.connector;return[C,{...P,connector:{id:T,name:O,type:D,uid:I}}]})},chainId:_.chainId,current:_.current}},merge(_,C){typeof _=="object"&&_&&"status"in _&&delete _.status;const P=v(_,C.chainId);return{...C,..._,chainId:P}},skipHydration:s,storage:r,version:g}):m));y.setState(m());function v(_,C){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&l.getState().some(P=>P.id===_.chainId)?_.chainId:C}i&&y.subscribe(({connections:_,current:C})=>{var P;return C?(P=_.get(C))==null?void 0:P.chainId:void 0},_=>{if(l.getState().some(P=>P.id===_))return y.setState(P=>({...P,chainId:_??P.chainId}))}),a==null||a.subscribe(_=>{const C=new Set,P=new Set;for(const O of c.getState())if(C.add(O.id),O.rdns){const D=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const I of D)P.add(I)}const T=[];for(const O of _){if(P.has(O.info.rdns))continue;const D=u(h(O));C.has(D.id)||T.push(D)}r&&!y.persist.hasHydrated()||c.setState(O=>[...O,...T],!0)});function w(_){y.setState(C=>{const P=C.connections.get(_.uid);return P?{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts??P.accounts,chainId:_.chainId??P.chainId,connector:P.connector})}:C})}function k(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(C=>{const P=c.getState().find(T=>T.uid===_.uid);return P?(P.emitter.listenerCount("connect")&&P.emitter.off("connect",w),P.emitter.listenerCount("change")||P.emitter.on("change",w),P.emitter.listenerCount("disconnect")||P.emitter.on("disconnect",S),{...C,connections:new Map(C.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:P}),current:_.uid,status:"connected"}):C})}function S(_){y.setState(C=>{const P=C.connections.get(_.uid);if(P){const O=P.connector;O.emitter.listenerCount("change")&&P.connector.emitter.off("change",w),O.emitter.listenerCount("disconnect")&&P.connector.emitter.off("disconnect",S),O.emitter.listenerCount("connect")||P.connector.emitter.on("connect",k)}if(C.connections.delete(_.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const T=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:T.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return c.getState()},storage:r,getClient:f,get state(){return y.getState()},setState(_){let C;typeof _=="function"?C=_(y.getState()):C=_;const P=m();typeof C!="object"&&(C=P),Object.keys(P).some(O=>!(O in C))&&(C=P),y.setState(C,!0)},subscribe(_,C,P){return y.subscribe(_,C,P?{...P,fireImmediately:P.emitImmediately}:void 0)},_internal:{mipd:a,async revalidate(){const _=y.getState(),C=_.connections;let P=_.current;for(const[,T]of C){const O=T.connector;O.isAuthorized&&await O.isAuthorized()||(C.delete(O.uid),P===O.uid&&(P=null))}y.setState(T=>({...T,connections:C,current:P}))},store:y,ssr:!!s,syncConnectedChain:i,transports:o.transports,chains:{setState(_){const C=typeof _=="function"?_(l.getState()):_;if(C.length!==0)return l.setState(C,!0)},subscribe(_){return l.subscribe(_)}},connectors:{providerDetailToConnector:h,setup:u,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:w,connect:k,disconnect:S}}}}function cpe(n,e){const{initialState:r,reconnectOnMount:i}=e;return r&&!n._internal.store.persist.hasHydrated()&&n.setState({...r,chainId:n.chains.some(s=>s.id===r.chainId)?r.chainId:n.chains[0].id,connections:i?r.connections:new Map,status:i?"reconnecting":"disconnected"}),{async onMount(){n._internal.ssr&&(await n._internal.store.persist.rehydrate(),n._internal.mipd&&n._internal.connectors.setState(s=>{var c;const o=new Set;for(const u of s??[])if(u.rdns){const h=Array.isArray(u.rdns)?u.rdns:[u.rdns];for(const d of h)o.add(d)}const a=[],l=((c=n._internal.mipd)==null?void 0:c.getProviders())??[];for(const u of l){if(o.has(u.info.rdns))continue;const h=n._internal.connectors.providerDetailToConnector(u),d=n._internal.connectors.setup(h);a.push(d)}return[...s,...a]})),i?Ffe(n):n.storage&&n.setState(s=>({...s,connections:new Map}))}}}function upe(n){const{children:e,config:r,initialState:i,reconnectOnMount:s=!0}=n,{onMount:o}=cpe(r,{initialState:i,reconnectOnMount:s});r._internal.ssr||o();const a=E.useRef(!0);return E.useEffect(()=>{if(a.current&&r._internal.ssr)return o(),()=>{a.current=!1}},[]),e}const WJ=E.createContext(void 0);function dpe(n){const{children:e,config:r}=n,i={value:r};return E.createElement(upe,n,E.createElement(WJ.Provider,i,e))}const hpe="3.1.0",fpe=()=>`wagmi@${hpe}`;class ppe extends ru{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return fpe()}}class mpe extends ppe{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function gpe(n){return{mutationFn(e){return Afe(n,e)},mutationKey:["connect"]}}function bpe(n){return{mutationFn(e){return Lfe(n,e)},mutationKey:["disconnect"]}}function ype(n){return{mutationFn(e){return $fe(n,e)},mutationKey:["signTypedData"]}}function Kd(n={}){const e=n.config??E.useContext(WJ);if(!e)throw new mpe;return e}function qJ(n={}){const e=Kd(n);return E.useSyncExternalStore(r=>Bfe(e,{onChange:r}),()=>gL(e),()=>gL(e))}var HJ={exports:{}},VJ={},YJ={exports:{}},GJ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp=E;function vpe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var xpe=typeof Object.is=="function"?Object.is:vpe,wpe=pp.useState,_pe=pp.useEffect,Spe=pp.useLayoutEffect,kpe=pp.useDebugValue;function Cpe(n,e){var r=e(),i=wpe({inst:{value:r,getSnapshot:e}}),s=i[0].inst,o=i[1];return Spe(function(){s.value=r,s.getSnapshot=e,lk(s)&&o({inst:s})},[n,r,e]),_pe(function(){return lk(s)&&o({inst:s}),n(function(){lk(s)&&o({inst:s})})},[n]),kpe(r),r}function lk(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!xpe(n,r)}catch{return!0}}function Epe(n,e){return e()}var Tpe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Epe:Cpe;GJ.useSyncExternalStore=pp.useSyncExternalStore!==void 0?pp.useSyncExternalStore:Tpe;YJ.exports=GJ;var Ppe=YJ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=E,Mpe=Ppe;function Dpe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ope=typeof Object.is=="function"?Object.is:Dpe,Ipe=Mpe.useSyncExternalStore,Ape=H1.useRef,Rpe=H1.useEffect,Npe=H1.useMemo,jpe=H1.useDebugValue;VJ.useSyncExternalStoreWithSelector=function(n,e,r,i,s){var o=Ape(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Npe(function(){function c(m){if(!u){if(u=!0,h=m,m=i(m),s!==void 0&&a.hasValue){var g=a.value;if(s(g,m))return d=g}return d=m}if(g=d,Ope(h,m))return g;var b=i(m);return s!==void 0&&s(g,b)?(h=m,g):(h=m,d=b)}var u=!1,h,d,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,i,s]);var l=Ipe(n,o[0],o[1]);return Rpe(function(){a.hasValue=!0,a.value=l},[l]),jpe(l),l};HJ.exports=VJ;var Lpe=HJ.exports;const ck=n=>typeof n=="object"&&!Array.isArray(n);function Fpe(n,e,r=e,i=fp){const s=E.useRef([]),o=Lpe.useSyncExternalStoreWithSelector(n,e,r,a=>a,(a,l)=>{if(ck(a)&&ck(l)&&s.current.length){for(const c of s.current)if(!i(a[c],l[c]))return!1;return!0}return i(a,l)});return E.useMemo(()=>{if(ck(o)){const a={...o};let l={};for(const[c,u]of Object.entries(a))l={...l,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),u)}};return Object.defineProperties(a,l),a}return o},[o])}function hN(n={}){const e=Kd(n);return Fpe(r=>zfe(e,{onChange:r}),()=>BJ(e))}function $pe(n={}){const e=Kd(n);return E.useSyncExternalStore(r=>Wfe(e,{onChange:r}),()=>bL(e),()=>bL(e))}function KJ(n={}){const e=Kd(n),r=gpe(e),i=aN({...n.mutation,...r});return E.useEffect(()=>e.subscribe(({status:s})=>s,(s,o)=>{o==="connected"&&s==="disconnected"&&i.reset()}),[e,i.reset]),{...i,connect:i.mutate,connectAsync:i.mutateAsync,connectors:$pe({config:e})}}function Bpe(n={}){const e=Kd(n);return E.useSyncExternalStore(r=>Ufe(e,{onChange:r}),()=>hI(e),()=>hI(e))}function XJ(n={}){const e=Kd(n),r=bpe(e),i=aN({...n.mutation,...r});return{...i,connectors:Bpe({config:e}).map(s=>s.connector),disconnect:i.mutate,disconnectAsync:i.mutateAsync}}function fN(n={}){const e=Kd(n),r=ype(e),i=aN({...n.mutation,...r});return{...i,mutate:i.mutate,mutateAsync:i.mutateAsync,signTypedData:i.mutate,signTypedDataAsync:i.mutateAsync}}class V1{constructor(e,r=3,i=3e4){Be(this,"baseURL");Be(this,"timeout");Be(this,"maxRetries");this.baseURL=e.replace(/\/$/,""),this.maxRetries=r,this.timeout=i}async do(e){const r=Date.now();let i=null;for(let s=1;s<=this.maxRetries;s++)try{return{...await this.doRequest(e),duration:Date.now()-r}}catch(o){if(i=o,this.isNonceError(o))throw o;if(s<this.maxRetries){const a=s*1e3;await this.delay(a)}}throw new Error(`Request failed after ${this.maxRetries} attempts: ${i==null?void 0:i.message}`)}async doRequest(e){const r=`${this.baseURL}${e.path}`,i={"Content-Type":"application/json",Accept:"application/json, */*",...e.headers},s={method:e.method,headers:i,signal:AbortSignal.timeout(this.timeout)};e.body&&e.method!=="GET"?s.body=JSON.stringify(e.body):e.method==="GET"&&(s.body=void 0);const o=await fetch(r,s);let a;const l=o.headers.get("content-type");if(l!=null&&l.includes("application/json"))try{a=await o.json()}catch{a=await o.text()}else a=await o.text();if(o.status>=400)throw new Error(`HTTP ${o.status}: ${JSON.stringify(a)}`);return{statusCode:o.status,body:a,headers:o.headers}}isNonceError(e){const r=(e==null?void 0:e.message)||"";return r.toLowerCase().includes("nonce")||r.includes("InvalidNonce")||r.includes("NonceError")}delay(e){return new Promise(r=>setTimeout(r,e))}async get(e,r){return this.do({method:"GET",path:e,headers:r})}async post(e,r,i){return this.do({method:"POST",path:e,body:r,headers:i})}async put(e,r,i){return this.do({method:"PUT",path:e,body:r,headers:i})}async delete(e,r){return this.do({method:"DELETE",path:e,headers:r})}getBaseURL(){return this.baseURL}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}}const Bc=1e8;function un(n){const e=typeof n=="string"?parseFloat(n):n;if(isNaN(e))throw new Error(`Invalid value for satoshi conversion: ${n}`);if(e<0)throw new Error(`Negative values not allowed for satoshi conversion: ${n}`);return BigInt(Math.floor(e*Bc)).toString()}function Ct(n){const e=BigInt(n),r=BigInt(Bc),i=e/r,s=e%r;return Number(i)+Number(s)/Bc}function pN(n){if(n<0)throw new Error(`Negative values not allowed: ${n}`);return Math.floor(n*Bc)}function mI(n){try{return BigInt(n)>=0n}catch{return!1}}function QJ(n){return n.map(un)}function JJ(n){return n.map(e=>Ct(typeof e=="string"?e:String(e)))}function gI(n){return`0x${(typeof n=="string"?parseInt(n,10):n).toString(16)}`}function Dt(n){if(n==null||n==="")return 0;if(typeof n=="string"||typeof n=="number")try{return Ct(typeof n=="string"?n:String(n))}catch{return 0}return 0}function zpe(n){if(n==null||n==="")return 0;try{if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?0:e}return typeof n=="number"?isNaN(n)?0:n:0}catch{return 0}}function gw(n){if(n==null||n==="")return BigInt(0);try{const e=typeof n=="string"?n:String(n);return e.trim()===""||isNaN(Number(e))?BigInt(0):BigInt(e)}catch{return BigInt(0)}}function Upe(n){return n===0?"":n.toFixed(6).replace(/\.?0+$/,"")}let Am={instance:null,module:null},Wpe=null;async function ZJ(){try{if(window.Go)console.log("wasm_exec.js already loaded");else{console.log("Loading wasm_exec.js...");const l=["/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.21.0/misc/wasm/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.20.0/misc/wasm/wasm_exec.js","https://unpkg.com/@go-wasm/wasm_exec@latest/wasm_exec.js"];let c=!1,u=null;for(const h of l)try{console.log(`Trying to load wasm_exec.js from: ${h}`),await new Promise((d,f)=>{const m=document.createElement("script");m.src=h,m.async=!0,m.onload=()=>{console.log(`Successfully loaded wasm_exec.js from: ${h}`),d()},m.onerror=()=>{f(new Error(`Failed to load from ${h}`))},document.head.appendChild(m)}),c=!0;break}catch(d){console.warn(`Failed to load from ${h}:`,d==null?void 0:d.message),u=d,document.head.querySelectorAll(`script[src="${h}"]`).forEach(m=>m.remove())}if(!c)throw new Error(`Failed to load wasm_exec.js from all sources. Last error: ${(u==null?void 0:u.message)||"Unknown error"}. Please ensure wasm_exec.js is available. You can download it from: https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js`);console.log("wasm_exec.js loaded successfully")}const n=window.Go;if(!n)throw new Error("Go runtime not available. Make sure wasm_exec.js is loaded.");console.log("Go runtime available");const e=new n;Wpe=e,console.log("Go instance created");const r="/morm_signer.wasm";console.log("Loading WASM from:",r);let i;try{const l=await fetch(r);if(console.log("WASM fetch response:",{status:l.status,statusText:l.statusText,ok:l.ok,url:l.url}),!l.ok){const c=await l.text().catch(()=>"Unable to read error response");throw new Error(`Failed to load WASM from ${r}: ${l.status} ${l.statusText}. Make sure the morm_signer.wasm file is available in the public directory.`)}i=await l.arrayBuffer(),console.log("WASM file loaded successfully, size:",i.byteLength,"bytes")}catch(l){throw console.error("WASM fetch failed:",l),new Error(`Failed to fetch WASM file: ${(l==null?void 0:l.message)||l}. The file should be accessible at ${window.location.origin}${r}`)}console.log("Instantiating WASM module...");let s;try{s=await WebAssembly.instantiate(i,e.importObject),console.log("WASM module instantiated successfully")}catch(l){throw console.error("Failed to instantiate WASM:",l),new Error(`Failed to instantiate WASM module: ${(l==null?void 0:l.message)||l}. The WASM file may be corrupted or incompatible.`)}Am.instance=s.instance,Am.module=s.module,console.log("Running Go program...");try{e.run(Am.instance),console.log("Go program started (run() completed)")}catch(l){throw console.error("Failed to run Go program:",l),new Error(`Failed to run Go program: ${(l==null?void 0:l.message)||l}. The WASM module may not be compatible with the current Go runtime.`)}console.log("Waiting for Go initialization and function exports...");const o=10;let a=[];for(let l=1;l<=o;l++){const c=Math.min(l*200,2e3);await new Promise(h=>setTimeout(h,c));const u=Object.keys(window).filter(h=>typeof window[h]=="function");if(a=u.filter(h=>h.startsWith("morm")||h.startsWith("derive")||h.startsWith("generate")||h.startsWith("Generate")||h.startsWith("verify")||h.startsWith("map")||h.startsWith("validate")||h==="GetSupportedSignatureTypes"||h==="IsSignatureTypeSupported"),console.log(`Attempt ${l}/${o}:`,{waitTime:`${c}ms`,allWindowFunctions:u.length,exportedFunctions:a,sampleWindowKeys:u.slice(0,20)}),a.length>0){console.log(" Go functions found!",a);break}l===o&&(console.warn(" No expected functions found. All window functions:",u.sort()),console.warn(" Check if functions are exported with different names or if there are Go runtime errors"))}if(a.length===0){const l=[],c=Object.keys(window);if(console.error("Debugging info:",{totalWindowKeys:c.length,allFunctions:c.filter(u=>typeof window[u]=="function"),hasGo:typeof window.Go=="function",wasmInstance:Am.instance!==null,wasmModule:Am.module!==null}),typeof window.InitWASMSigner=="function"){console.log("Found InitWASMSigner function, calling it...");try{window.InitWASMSigner(),await new Promise(h=>setTimeout(h,500));const u=Object.keys(window).filter(h=>typeof window[h]=="function"&&(h.startsWith("morm")||h.startsWith("derive")||h.startsWith("generate")||h.startsWith("Generate")||h==="GetSupportedSignatureTypes"||h==="IsSignatureTypeSupported"));u.length>0&&(console.log(" Functions found after InitWASMSigner!",u),a=u)}catch(u){console.error("Failed to call InitWASMSigner:",u)}}if(a.length===0)throw new Error(`Go functions not exported after initialization.

ROOT CAUSE: The Go main() function in main_wasm.go does not call InitWASMSigner(), which is required to export functions via js.Global().Set().

SOLUTION: The Go code needs to be fixed. In main_wasm.go, the main() function should call:
  InitWASMSigner(CreateTestnetDomain()) // or appropriate domain

Current status:
- WASM file loaded: 
- Go runtime loaded: ${typeof window.Go=="function"?"":""}
- Go program run: 
- Functions exported: 

Check the browser console for detailed debugging information.`)}return console.log("WASM module loaded and initialized successfully"),!0}catch(n){throw console.error("Failed to load WASM module:",n),new Error((n==null?void 0:n.message)||`Failed to load WASM module: ${String(n)}`)}}class qpe{constructor(){Be(this,"isInitialized",!1);Be(this,"wasmLoaded",!1)}async initialize(){try{return this.wasmLoaded=await ZJ(),this.isInitialized=this.wasmLoaded,this.wasmLoaded}catch(e){throw console.error("Failed to initialize MormSigner:",e),new Error((e==null?void 0:e.message)||"Failed to initialize WASM module")}}isReady(){return this.isInitialized&&this.wasmLoaded&&typeof window.mormGenerateEthereumKeypair=="function"&&typeof window.GenerateSingleSignature=="function"&&typeof window.GenerateMultisignSignatures=="function"&&typeof window.GetSupportedSignatureTypes=="function"&&typeof window.IsSignatureTypeSupported=="function"&&typeof window.deriveAddressChain=="function"}async generateAddress(e,r=0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const i=window.deriveAddress(e,r);return typeof i=="string"?{success:!0,address:i,index:r,mnemonic:e.substring(0,20)+"..."}:i&&i.error?{success:!1,error:i.error}:{success:!1,error:"Failed to derive address"}}catch(i){return console.error("Failed to generate address:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async generateAddressChain(e,r,i=0,s=!0){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};if(typeof window.deriveAddressChain!="function")return{success:!1,error:"deriveAddressChain function not available. Please update WASM module."};try{const o=window.deriveAddressChain(e,r,i,s);return typeof o=="string"?o.startsWith("error: ")?{success:!1,error:o.substring(7)}:{success:!0,address:o,chainType:r,index:i,isMainnet:s}:o&&o.error?{success:!1,error:o.error}:{success:!1,error:"Failed to derive address"}}catch(o){return console.error("Failed to generate multichain address:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async generateMnemonic(e=12){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.generateMnemonic(e);return typeof r=="string"?{success:!0,mnemonic:r}:r&&r.error?{success:!1,error:r.error}:{success:!1,error:"Failed to generate mnemonic"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async generateKeypair(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const e=window.mormGenerateEthereumKeypair();return e.error?{success:!1,error:e.error}:{success:!0,privateKey:e.privateKey,address:e.address}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async signMessage(e,r,i={}){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=(i.useEIP712,"ECDSA_LEGACY"),o=window.generateSignature(s,e,r);return typeof o=="string"?{success:!0,signature:o,message:r,options:i}:o&&o.error?{success:!1,error:o.error}:{success:!1,error:"Failed to generate signature"}}catch(s){return console.error("Failed to sign message:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async signDeposit(e,r,i,s={}){const o={...s,depositMode:!0,walletAddress:r,amount:i},a=JSON.stringify({action:"deposit",owner:r,amount:i,nonce:s.nonce||Date.now(),deadline:s.deadline||Date.now()+36e5}),l=await this.signMessage(e,a,o);return{success:l.success,signature:l.signature,message:l.message,address:r,options:l.options,error:l.error}}async signEIP712(e,r,i={}){const s={...i,useEIP712:!0};return this.signMessage(e,r,s)}async prepareAgentSign(e){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const r=window.mormPrepareAgentSign(e.owner,e.agent,e.expiresInDays,e.permissions,e.nonce);return r&&r.error?{success:!1,error:r.error}:{success:!0,typedData:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async signAgentApproval(e,r){const i=await this.prepareAgentSign(r);if(!i.success||!i.typedData)return i;const s=JSON.stringify({action:"agent::approve",wallet:r.owner,agent:r.agent,agentName:r.agentName||"",expiresInDays:r.expiresInDays,permissions:r.permissions,nonce:r.nonce,deadline:Date.now()+r.expiresInDays*24*60*60*1e3}),o=await this.signMessage(e,s,{useEIP712:!0});return o.success?{success:!0,typedData:i.typedData,signature:o.signature}:{success:!1,error:o.error}}async verifySignature(e,r,i){if(!this.isReady())throw new Error("MormSigner not initialized");try{const s=window.verifySignature(e,r,i);return typeof s=="boolean"?s:!1}catch(s){return console.error("Failed to verify signature:",s),!1}}mapAlgorithm(e){if(!this.isReady())return"ECDSA_LEGACY";try{return window.mapAlgorithm(e)}catch(r){return console.error("Failed to map algorithm:",r),"ECDSA_LEGACY"}}validateNonce(e,r,i){if(!this.isReady())return!1;try{const s=window.validateNonce(e,r,i);return typeof s=="boolean"?s:!1}catch(s){return console.error("Failed to validate nonce:",s),!1}}getStatus(){return{initialized:this.isInitialized,wasmLoaded:this.wasmLoaded,ready:this.isReady()}}async generateSingleSignature(e,r,i){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.GenerateSingleSignature(e,r,i);return s.error?{success:!1,error:s.error}:{success:!0,signature:s.signature}}catch(s){return console.error("Failed to generate single signature:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async generateMultisignSignatures(e,r,i=!1){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{const s=window.GenerateMultisignSignatures(e,r,i);if(s.error)return{success:!1,error:s.error};let o=null;if(s.tx)try{o=JSON.parse(s.tx)}catch(a){console.warn("Failed to parse updated transaction JSON:",a)}return{success:!0,tx:o,txJSON:s.tx}}catch(s){return console.error("Failed to generate multisign signatures:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}getSupportedSignatureTypes(){if(!this.isReady())return{success:!1,error:"MormSigner not initialized"};try{return{success:!0,types:window.GetSupportedSignatureTypes()}}catch(e){return console.error("Failed to get supported signature types:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}isSignatureTypeSupported(e){if(!this.isReady())return!1;try{return window.IsSignatureTypeSupported(e)}catch(r){return console.error("Failed to check signature type support:",r),!1}}}const At=new qpe,Hpe=6e4,wL=100,uk=24*60*60*1e3,dk=1;function nv(n,e){const r=n.toLowerCase();return e?`${r}:${e}`:r}class mN{constructor(e){Be(this,"infoClient");Be(this,"onChainState",new Map);Be(this,"offChainNonces",new Map);Be(this,"syncTimers",new Map);this.infoClient=e}getOrCreateState(e,r){const i=nv(e,r);let s=this.onChainState.get(i);return s||(s={confirmed:0,pending:[],lastSync:0,mu:!1},this.onChainState.set(i,s)),s}async acquireLock(e){for(;e.mu;)await new Promise(r=>setTimeout(r,10));e.mu=!0}releaseLock(e){e.mu=!1}async syncWithCore(e,r){const i=this.getOrCreateState(e,r),s=Date.now();if(!(s-i.lastSync<Hpe))try{const o=await this.infoClient.getNonceStatus(e,!1),a=(o==null?void 0:o.next_nonce)!==void 0?typeof o.next_nonce=="string"?parseInt(o.next_nonce,10):o.next_nonce:0;i.confirmed=a,i.lastSync=s}catch(o){const a=nv(e,r);console.warn(`[NonceManager] Failed to sync with core for ${a}:`,o)}}async getNonce(e,r="latest",i){const s=this.getOrCreateState(e,i);if(await this.syncWithCore(e,i),r==="latest")return s.confirmed;{const o=s.pending.length>0?Math.max(...s.pending):s.confirmed;return Math.max(s.confirmed,o)}}async validateNonce(e,r,i=!1,s){const o=this.getOrCreateState(e,s);await this.acquireLock(o);try{if(i||await this.syncWithCore(e,s),o.confirmed===0&&r<dk)throw new Error(`nonce too low for new account: got ${r}, minimum ${dk}`);if(o.confirmed>0&&r<=o.confirmed)throw new Error(`nonce too low: got ${r}, confirmed ${o.confirmed}`);if(o.pending.includes(r))throw new Error(`nonce already pending: ${r}`);if(o.pending.length>=wL)throw new Error(`pending nonce limit reached: max ${wL} pending nonces`);if(i){const a=e.toLowerCase(),l=this.offChainNonces.get(a);if(l){const c=l.get(r);if(c){const u=Date.now();if(u-c<uk)throw new Error(`nonce already used (off-chain): ${r}, expires in ${Math.floor((uk-(u-c))/1e3)}s`);l.delete(r)}}}o.pending.push(r),o.pending.sort((a,l)=>a-l)}finally{this.releaseLock(o)}}async commitNonce(e,r,i=!1,s){const o=this.getOrCreateState(e,s);await this.acquireLock(o);try{const a=o.pending.indexOf(r);if(a!==-1&&o.pending.splice(a,1),i){const l=e.toLowerCase();let c=this.offChainNonces.get(l);c||(c=new Map,this.offChainNonces.set(l,c)),c.set(r,Date.now())}else if(r===o.confirmed+1)for(o.confirmed=r;o.pending.length>0&&o.pending[0]===o.confirmed+1;){const l=o.pending.shift();o.confirmed=l}}finally{this.releaseLock(o)}}async rejectNonce(e,r,i=!1,s){const o=this.getOrCreateState(e,s);await this.acquireLock(o);try{const a=o.pending.indexOf(r);if(a!==-1&&o.pending.splice(a,1),i){const l=e.toLowerCase(),c=this.offChainNonces.get(l);c&&c.delete(r)}}finally{this.releaseLock(o)}}async getExpectedNextNonce(e,r=!1,i){await this.syncWithCore(e,i);const s=this.getOrCreateState(e,i),o=s.pending.length>0?Math.max(...s.pending):s.confirmed,a=Math.max(s.confirmed+1,o+1),l=a===0?dk:a;if(r)try{await this.validateNonce(e,l,!1,i)}catch(c){console.warn(`[NonceManager] Failed to reserve nonce ${l}:`,c.message)}return{next_nonce:l,reserved:r,timestamp:Date.now()}}cleanupExpiredOffChainNonces(){const e=Date.now();for(const[r,i]of this.offChainNonces.entries()){for(const[s,o]of i.entries())e-o>=uk&&i.delete(s);i.size===0&&this.offChainNonces.delete(r)}}resetNonce(e,r){const i=e.toLowerCase();if(r){const o=nv(e,r);this.onChainState.delete(o)}else{const o=[];for(const a of this.onChainState.keys())(a===i||a.startsWith(`${i}:`))&&o.push(a);o.forEach(a=>this.onChainState.delete(a))}this.offChainNonces.delete(i);const s=this.syncTimers.get(i);s&&(clearInterval(s),this.syncTimers.delete(i))}getState(e,r){const i=nv(e,r);return this.onChainState.get(i)}}class cr{constructor(e){Be(this,"httpClient");Be(this,"sessionToken");this.httpClient=new V1(e.baseURL),this.sessionToken=e.sessionToken}setSessionToken(e){this.sessionToken=e}getHeaders(){const e={Accept:"application/json, */*"};return this.sessionToken&&(e.Authorization=`Bearer ${this.sessionToken}`),e}async getMarkets(){const r=(await this.httpClient.get("/market/v1/all",this.getHeaders())).body;return Array.isArray(r)?r:r&&typeof r=="object"&&"markets"in r?r.markets:[]}async getMarketsWithFilters(e,r){let i="/market/v1/all";const s=[];e&&s.push(`filter=${e}`),r&&s.push("active_only=true"),s.length>0&&(i+="?"+s.join("&"));const a=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(a)?a:a&&typeof a=="object"&&"markets"in a?a.markets:[]}async getMarketByID(e){return(await this.httpClient.get(`/market/v1/market/${e}`,this.getHeaders())).body}async getMarketByMoniker(e){return(await this.httpClient.get(`/market/v1/market/by-moniker/${e}`,this.getHeaders())).body}async getMarketStats(e){return(await this.httpClient.get(`/market/v1/market/${e}/stats`,this.getHeaders())).body}async getTicker(e){return this.getMarketStats(e)}async getExchangeInfo(){return(await this.httpClient.get("/market/v1/exchangeInfo",this.getHeaders())).body}async getOrderbook(e,r=!0,i=20){let s=`/clob/v1/orderbook/${e}`,o=20;i>0&&i<100&&(o=i),s+=`?depth=${o}`;const l=(await this.httpClient.get(s,this.getHeaders())).body;return r&&l&&(l.bids&&Array.isArray(l.bids)&&(l.bids=l.bids.map(([c,u])=>[Ct(c),Ct(u)])),l.asks&&Array.isArray(l.asks)&&(l.asks=l.asks.map(([c,u])=>[Ct(c),Ct(u)]))),l}async getMarketTrades(e,r){let i=`/clob/v1/trades?market_id=${e}`;r&&r>0&&(i+=`&limit=${r}`);const s=await this.httpClient.get(i,this.getHeaders());console.debug("[InfoClient] getMarketTrades response for marketId:",e,"response:",s.body);const o=s.body;if(o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades))return o.trades;if(Array.isArray(o))return o;const a=o;return a!=null&&a.data&&Array.isArray(a.data)?a.data:(console.warn("[InfoClient] getMarketTrades: Unexpected response structure:",s.body),[])}async getRecentTrades(e,r=100){return this.getMarketTrades(e,r)}async getTrades(e,r){let i=`/clob/v1/trades?symbol=${e}`;r&&r>0&&(i+=`&limit=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;if(o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades))return o.trades;if(Array.isArray(o))return o;const a=o;return a!=null&&a.data&&Array.isArray(a.data)?a.data:[]}async getAggTrades(e,r,i,s){let o=`/market/v1/aggTrades?symbol=${e}`;return r&&r>0&&(o+=`&limit=${r}`),i&&i>0&&(o+=`&startTime=${i}`),s&&s>0&&(o+=`&endTime=${s}`),(await this.httpClient.get(o,this.getHeaders())).body}async getKlines(e,r,i,s,o){let a=`/clob/v1/klines?symbol=${e}&interval=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c)?c:[]}async getContinuousKlines(e,r,i,s,o,a){let l=`/market/v1/continuousKlines?pair=${e}&contractType=${r}&interval=${i}`;return s&&s>0&&(l+=`&limit=${s}`),o&&o>0&&(l+=`&startTime=${o}`),a&&a>0&&(l+=`&endTime=${a}`),(await this.httpClient.get(l,this.getHeaders())).body}async getPremiumIndex(e){let r="/market/v1/premiumIndex";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getFundingRate(e,r,i,s){let o="/market/v1/fundingRate";const a=[];e&&a.push(`symbol=${e}`),r&&r>0&&a.push(`limit=${r}`),i&&i>0&&a.push(`startTime=${i}`),s&&s>0&&a.push(`endTime=${s}`),a.length>0&&(o+="?"+a.join("&"));const c=(await this.httpClient.get(o,this.getHeaders())).body;return Array.isArray(c)?c:c&&typeof c=="object"&&"data"in c&&Array.isArray(c.data)?c.data:c?[c]:[]}async getFundingInfo(){const r=(await this.httpClient.get("/market/v1/fundingInfo",this.getHeaders())).body;return Array.isArray(r)?r:[]}async getDeliveryPrice(e){return(await this.httpClient.get(`/market/v1/deliveryPrice?pair=${e}`,this.getHeaders())).body}async getOpenInterest(e){return(await this.httpClient.get(`/market/v1/openInterest?symbol=${e}`,this.getHeaders())).body}async getTopLongShortPositionRatio(e,r,i,s,o){let a=`/market/v1/topLongShortPositionRatio?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getGlobalLongShortAccountRatio(e,r,i,s,o){let a=`/market/v1/globalLongShortAccountRatio?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getTicker24hr(e){let r="/market/v1/moniker/24hr";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getTickerPrice(e){let r="/market/v1/moniker/price";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getOrderbookMoniker(e){let r="/market/v1/moniker/bookTicker";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getBasis(e,r,i,s,o){let a=`/market/v1/basis?symbol=${e}&period=${r}`;i&&i>0&&(a+=`&limit=${i}`),s&&s>0&&(a+=`&startTime=${s}`),o&&o>0&&(a+=`&endTime=${o}`);const c=(await this.httpClient.get(a,this.getHeaders())).body;return Array.isArray(c),c}async getIndexInfo(e){let r="/market/v1/indexInfo";return e&&(r+=`?symbol=${e}`),(await this.httpClient.get(r,this.getHeaders())).body}async getAssetIndex(e){let r="/market/v1/assetIndex";e&&(r+=`?symbol=${e}`);const s=(await this.httpClient.get(r,this.getHeaders())).body;return Array.isArray(s),s}async getConstituents(e){return(await this.httpClient.get(`/market/v1/constituents?symbol=${e}`,this.getHeaders())).body}async getTWAP(e,r){return(await this.httpClient.get(`/market/v1/twap?symbol=${e}&duration=${r}`,this.getHeaders())).body}async getPositions(e,r){if(!e)throw new Error("walletAddress is required for getPositions");let i=`/bucket/v1/address/${e}/positions`;r!==void 0&&(i+=`?active_only=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return Array.isArray(o)?o:o&&typeof o=="object"&&"positions"in o&&Array.isArray(o.positions)?o.positions:[]}async getBalance(e,r){let i=`/bank/v1/balance/${e}?asset=${r}`;return(await this.httpClient.get(i,this.getHeaders())).body}async getBalances(e){const i=(await this.httpClient.get(`/bank/v1/balances/${e}`,this.getHeaders())).body;return i&&typeof i=="object"&&"balances"in i&&Array.isArray(i.balances)?i.balances:[]}async getBalanceDecimal(e,r){const i=await this.getBalance(e,r);if(i&&typeof i=="object"){const s={...i};return s.balance&&(s.balance=Ct(s.balance)),s.available_balance&&(s.available=Ct(s.available_balance),s.available_balance=Ct(s.available_balance)),s.available&&typeof s.available=="string"&&(s.available=Ct(s.available)),s.locked_balance&&(s.locked=Ct(s.locked_balance),s.locked_balance=Ct(s.locked_balance)),s.locked&&typeof s.locked=="string"&&(s.locked=Ct(s.locked)),s}return i}async getOrders(e,r){let i=`/clob/v1/address/orders?address=${encodeURIComponent(e)}`;return r&&(i+=`&asset_pair=${encodeURIComponent(r)}`),(await this.httpClient.get(i,this.getHeaders())).body}async getOrder(e){return(await this.httpClient.get(`/clob/v1/order/${e}`,this.getHeaders())).body}async getOrderHistory(e){return(await this.httpClient.get(`/clob/v1/address/orders/history?address=${e}`,this.getHeaders())).body}async getUserTrades(e,r){let i=`/clob/v1/address/trades?address=${e}`;r&&(i+=`&asset_pair=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;if(o&&typeof o=="object"&&"trades"in o&&Array.isArray(o.trades))return o.trades;if(Array.isArray(o))return o;const a=o;return a!=null&&a.data&&Array.isArray(a.data)?a.data:[]}async getTradeHistory(e,r){return this.getUserTrades(e,r)}async getPosition(e,r){let i=`/clob/v1/address/position?address=${e}`;r&&(i+=`&asset_pair=${r}`);const o=(await this.httpClient.get(i,this.getHeaders())).body;return o&&typeof o=="object"&&"positions"in o&&Array.isArray(o.positions)?o.positions:[]}async getBuckets(e){var i;const r=await this.httpClient.get(`/bucket/v1/address/${e}/buckets`,this.getHeaders());return(i=r.body)!=null&&i.buckets&&Array.isArray(r.body.buckets)?r.body.buckets:[]}async getBucket(e){return(await this.httpClient.get(`/bucket/v1/bucket/${e}`,this.getHeaders())).body}async getMarketData(e){return(await this.httpClient.get(`/clob/v1/market/data?asset_pair=${e}`,this.getHeaders())).body}async getMarketCandles(e,r,i){const o=(await this.httpClient.get(`/clob/v1/market/candles?asset_pair=${e}&interval=${r}&limit=${i}`,this.getHeaders())).body;return Array.isArray(o)?o:[]}async getNonceStatus(e,r=!1){let i=`/router/v1/nonce/status/${e}`;return r&&(i+="?reserve=true"),(await this.httpClient.get(i,this.getHeaders())).body}async getSupportedActions(){return(await this.httpClient.get("/router/v1/tx/supported-actions",this.getHeaders())).body}async validateAction(e){return(await this.httpClient.get(`/router/v1/tx/validate-action?action=${encodeURIComponent(e)}`,this.getHeaders())).body}async getHealthSummary(){return(await this.httpClient.get("/router/v1/health/summary",this.getHeaders())).body}async getHealthDaemons(){return(await this.httpClient.get("/router/v1/health/daemons",this.getHeaders())).body}async getHealthBucket(){return(await this.httpClient.get("/router/v1/health/bucket",this.getHeaders())).body}async getServerTime(){return(await this.httpClient.get("/router/v1/time",this.getHeaders())).body}async getMetricsTPS(){return(await this.httpClient.get("/router/v1/metrics/tps",this.getHeaders())).body}async getMetricsLatency(){return(await this.httpClient.get("/router/v1/metrics/latency",this.getHeaders())).body}}function Vpe(n){var l,c,u;if(!n)return!1;const e=String(n).toLowerCase(),r=((l=n==null?void 0:n.message)==null?void 0:l.toLowerCase())||e,i=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),s=((c=i==null?void 0:i.error)==null?void 0:c.toLowerCase())||((u=i==null?void 0:i.message)==null?void 0:u.toLowerCase())||"",o=["nonce too low","nonce too high","nonce already used","nonce already pending","nonce invalid","nonce expired","nonce mismatch","invalid nonce","nonce out of order"],a=`${r} ${e} ${s}`.toLowerCase();return o.some(h=>a.includes(h))}function Ype(n){var l,c,u;if(!n)return!1;const e=String(n).toLowerCase(),r=((l=n==null?void 0:n.message)==null?void 0:l.toLowerCase())||e,i=(n==null?void 0:n.responseBody)||(n==null?void 0:n.onboardResult),s=((c=i==null?void 0:i.error)==null?void 0:c.toLowerCase())||((u=i==null?void 0:i.message)==null?void 0:u.toLowerCase())||"",o=["signature verification failed","invalid signature","unauthenticated","signature mismatch","signature invalid"],a=`${r} ${e} ${s}`.toLowerCase();return o.some(h=>a.includes(h))}function Gpe(n){if(!n)return[!1,!1];const e=Vpe(n),r=Ype(n);return[e,r]}function gN(n){const[e,r]=Gpe(n);return e||r}const eZ="6.16.0";async function bN(n){const e=Object.keys(n);return(await Promise.all(e.map(i=>Promise.resolve(n[i])))).reduce((i,s,o)=>(i[e[o]]=s,i),{})}function ps(n,e,r){for(let i in e){let s=e[i];Object.defineProperty(n,i,{enumerable:!0,value:s,writable:!1})}}function nf(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(r=>nf(r,e)).join(", ")+" ]";if(n instanceof Uint8Array){const r="0123456789abcdef";let i="0x";for(let s=0;s<n.length;s++)i+=r[n[s]>>4],i+=r[n[s]&15];return i}if(typeof n=="object"&&typeof n.toJSON=="function")return nf(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const r=Object.keys(n);return r.sort(),"{ "+r.map(i=>`${nf(i,e)}: ${nf(n[i],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Kpe(n,e,r){let i=n;{const o=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${nf(r)}`);for(const a in r){if(a==="shortMessage")continue;const l=r[a];o.push(a+"="+nf(l))}}o.push(`code=${e}`),o.push(`version=${eZ}`),o.length&&(n+=" ("+o.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(n);break;default:s=new Error(n)}return ps(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&ps(s,{shortMessage:i}),s}function sn(n,e,r,i){if(!n)throw Kpe(e,r,i)}function Ne(n,e,r,i){sn(n,e,"INVALID_ARGUMENT",{argument:r,value:i})}const Xpe=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function tZ(n){sn(Xpe.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function Y1(n,e,r){if(r==null&&(r=""),n!==e){let i=r,s="new";r&&(i+=".",s+=" "+r),sn(!1,`private constructor; use ${i}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function nZ(n,e,r){if(n instanceof Uint8Array)return r?new Uint8Array(n):n;if(typeof n=="string"&&n.length%2===0&&n.match(/^0x[0-9a-f]*$/i)){const i=new Uint8Array((n.length-2)/2);let s=2;for(let o=0;o<i.length;o++)i[o]=parseInt(n.substring(s,s+2),16),s+=2;return i}Ne(!1,"invalid BytesLike value",e||"value",n)}function St(n,e){return nZ(n,e,!1)}function zh(n,e){return nZ(n,e,!0)}function ma(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function G1(n){return ma(n,!0)||n instanceof Uint8Array}const _L="0123456789abcdef";function yt(n){const e=St(n);let r="0x";for(let i=0;i<e.length;i++){const s=e[i];r+=_L[(s&240)>>4]+_L[s&15]}return r}function mr(n){return"0x"+n.map(e=>yt(e).substring(2)).join("")}function Bg(n){return ma(n,!0)?(n.length-2)/2:St(n).length}function yN(n,e,r){const i=St(n);return r>i.length&&sn(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),yt(i.slice(e,r))}function Qpe(n,e,r){const i=St(n);sn(e>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),s.set(i,e-i.length),yt(s)}function Xc(n,e){return Qpe(n,e)}const K1=BigInt(0),zu=BigInt(1),rf=9007199254740991;function Jpe(n,e){let r=Mn(n,"value");const i=BigInt(ms(e,"width")),s=zu<<i-zu;if(r<K1){r=-r,sn(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const o=(zu<<i)-zu;return(~r&o)+zu}else sn(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return r}function Zpe(n,e){const r=vN(n,"value"),i=BigInt(ms(e,"bits"));return r&(zu<<i)-zu}function Mn(n,e){switch(typeof n){case"bigint":return n;case"number":return Ne(Number.isInteger(n),"underflow",e||"value",n),Ne(n>=-rf&&n<=rf,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(r){Ne(!1,`invalid BigNumberish string: ${r.message}`,e||"value",n)}}Ne(!1,"invalid BigNumberish value",e||"value",n)}function vN(n,e){const r=Mn(n,e);return sn(r>=K1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),r}const SL="0123456789abcdef";function rZ(n){if(n instanceof Uint8Array){let e="0x0";for(const r of n)e+=SL[r>>4],e+=SL[r&15];return BigInt(e)}return Mn(n)}function ms(n,e){switch(typeof n){case"bigint":return Ne(n>=-rf&&n<=rf,"overflow",e||"value",n),Number(n);case"number":return Ne(Number.isInteger(n),"underflow",e||"value",n),Ne(n>=-rf&&n<=rf,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return ms(BigInt(n),e)}catch(r){Ne(!1,`invalid numeric string: ${r.message}`,e||"value",n)}}Ne(!1,"invalid numeric value",e||"value",n)}function mp(n,e){const r=vN(n,"value");let i=r.toString(16);{const s=ms(e,"width");if(s===0&&r===K1)return"0x";for(sn(s*2>=i.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});i.length<s*2;)i="0"+i}return"0x"+i}function fr(n,e){const r=vN(n,"value");if(r===K1)return new Uint8Array(0);let i=r.toString(16);i.length%2&&(i="0"+i);const s=new Uint8Array(i.length/2);for(let o=0;o<s.length;o++){const a=o*2;s[o]=parseInt(i.substring(a,a+2),16)}return s}function eme(n){let e=yt(G1(n)?n:fr(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const bw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let rv=null;function tme(n){if(rv==null){rv={};for(let r=0;r<bw.length;r++)rv[bw[r]]=BigInt(r)}const e=rv[n];return Ne(e!=null,"invalid base58 value","letter",n),e}const nme=BigInt(0),bI=BigInt(58);function rme(n){const e=St(n);let r=rZ(e),i="";for(;r;)i=bw[Number(r%bI)]+i,r/=bI;for(let s=0;s<e.length&&!e[s];s++)i=bw[0]+i;return i}function ime(n){let e=nme;for(let r=0;r<n.length;r++)e*=bI,e+=tme(n[r]);return e}function pd(n,e){Ne(typeof n=="string","invalid string value","str",n),e!=null&&(tZ(e),n=n.normalize(e));let r=[];for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){i++;const o=n.charCodeAt(i);Ne(i<n.length&&(o&64512)===56320,"invalid surrogate pair","str",n);const a=65536+((s&1023)<<10)+(o&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function sme(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function kL(n,e,r){let i=0;for(let s=0;s<r;s++)i=i*256+n[e+s];return i}function CL(n,e,r,i){const s=[];for(;r<e+1+i;){const o=iZ(n,r);s.push(o.result),r+=o.consumed,sn(r<=e+1+i,"child data too short","BUFFER_OVERRUN",{buffer:n,length:i,offset:e})}return{consumed:1+i,result:s}}function iZ(n,e){sn(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const r=i=>{sn(i<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:i})};if(n[e]>=248){const i=n[e]-247;r(e+1+i);const s=kL(n,e+1,i);return r(e+1+i+s),CL(n,e,e+1+i,i+s)}else if(n[e]>=192){const i=n[e]-192;return r(e+1+i),CL(n,e,e+1,i)}else if(n[e]>=184){const i=n[e]-183;r(e+1+i);const s=kL(n,e+1,i);r(e+1+i+s);const o=yt(n.slice(e+1+i,e+1+i+s));return{consumed:1+i+s,result:o}}else if(n[e]>=128){const i=n[e]-128;r(e+1+i);const s=yt(n.slice(e+1,e+1+i));return{consumed:1+i,result:s}}return{consumed:1,result:sme(n[e])}}function Ob(n){const e=St(n,"data"),r=iZ(e,0);return Ne(r.consumed===e.length,"unexpected junk after rlp payload","data",n),r.result}function EL(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function sZ(n){if(Array.isArray(n)){let i=[];if(n.forEach(function(o){i=i.concat(sZ(o))}),i.length<=55)return i.unshift(192+i.length),i;const s=EL(i.length);return s.unshift(247+s.length),s.concat(i)}const e=Array.prototype.slice.call(St(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=EL(e.length);return r.unshift(183+r.length),r.concat(e)}const TL="0123456789abcdef";function fl(n){let e="0x";for(const r of sZ(n))e+=TL[r>>4],e+=TL[r&15];return e}function ome(n){const e=St(n,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=yt(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}function ls(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function xN(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function oZ(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ls(n.outputLen),ls(n.blockLen)}function gp(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function aZ(n,e){xN(n);const r=e.outputLen;if(n.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const hk=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lZ=n=>n instanceof Uint8Array,bx=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),yx=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),$o=(n,e)=>n<<32-e|n>>>e,ame=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ame)throw new Error("Non little-endian hardware is not supported");const lme=async()=>{};async function PL(n,e,r){let i=Date.now();for(let s=0;s<n;s++){r(s);const o=Date.now()-i;o>=0&&o<e||(await lme(),i+=o)}}function cme(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function bp(n){if(typeof n=="string"&&(n=cme(n)),!lZ(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function ume(...n){const e=new Uint8Array(n.reduce((i,s)=>i+s.length,0));let r=0;return n.forEach(i=>{if(!lZ(i))throw new Error("Uint8Array expected");e.set(i,r),r+=i.length}),e}class wN{clone(){return this._cloneInto()}}const dme={}.toString;function cZ(n,e){if(e!==void 0&&dme.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function X1(n){const e=i=>n().update(bp(i)).digest(),r=n();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>n(),e}function hme(n=32){if(hk&&typeof hk.getRandomValues=="function")return hk.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class uZ extends wN{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,oZ(e);const i=bp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(i.length>s?e.create().update(i).digest():i);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=e.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(e){return gp(this),this.iHash.update(e),this}digestInto(e){gp(this),xN(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:s,destroyed:o,blockLen:a,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=a,e.outputLen=l,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Q1=(n,e,r)=>new uZ(n,e).update(r).digest();Q1.create=(n,e)=>new uZ(n,e);function fme(n,e,r,i){oZ(n);const s=cZ({dkLen:32,asyncTick:10},i),{c:o,dkLen:a,asyncTick:l}=s;if(ls(o),ls(a),ls(l),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=bp(e),u=bp(r),h=new Uint8Array(a),d=Q1.create(n,c),f=d._cloneInto().update(u);return{c:o,dkLen:a,asyncTick:l,DK:h,PRF:d,PRFSalt:f}}function pme(n,e,r,i,s){return n.destroy(),e.destroy(),i&&i.destroy(),s.fill(0),r}function _N(n,e,r,i){const{c:s,dkLen:o,DK:a,PRF:l,PRFSalt:c}=fme(n,e,r,i);let u;const h=new Uint8Array(4),d=yx(h),f=new Uint8Array(l.outputLen);for(let m=1,g=0;g<o;m++,g+=l.outputLen){const b=a.subarray(g,g+l.outputLen);d.setInt32(0,m,!1),(u=c._cloneInto(u)).update(h).digestInto(f),b.set(f.subarray(0,b.length));for(let y=1;y<s;y++){l._cloneInto(u).update(f).digestInto(f);for(let v=0;v<b.length;v++)b[v]^=f[v]}}return pme(l,c,a,u,f)}function mme(n,e,r,i){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,r,i);const s=BigInt(32),o=BigInt(4294967295),a=Number(r>>s&o),l=Number(r&o),c=i?4:0,u=i?0:4;n.setUint32(e+c,a,i),n.setUint32(e+u,l,i)}class SN extends wN{constructor(e,r,i,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yx(this.buffer)}update(e){gp(this);const{view:r,buffer:i,blockLen:s}=this;e=bp(e);const o=e.length;for(let a=0;a<o;){const l=Math.min(s-this.pos,o-a);if(l===s){const c=yx(e);for(;s<=o-a;a+=s)this.process(c,a);continue}i.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gp(this),aZ(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:s,isLE:o}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(i,0),a=0);for(let d=a;d<s;d++)r[d]=0;mme(i,s-8,BigInt(this.length*8),o),this.process(i,0);const l=yx(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)l.setUint32(4*d,h[d],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:s,finished:o,destroyed:a,pos:l}=this;return e.length=s,e.pos=l,e.finished=o,e.destroyed=a,s%r&&e.buffer.set(i),e}}const gme=(n,e,r)=>n&e^~n&r,bme=(n,e,r)=>n&e^n&r^e&r,yme=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ql=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hl=new Uint32Array(64);class vme extends SN{constructor(){super(64,32,8,!1),this.A=ql[0]|0,this.B=ql[1]|0,this.C=ql[2]|0,this.D=ql[3]|0,this.E=ql[4]|0,this.F=ql[5]|0,this.G=ql[6]|0,this.H=ql[7]|0}get(){const{A:e,B:r,C:i,D:s,E:o,F:a,G:l,H:c}=this;return[e,r,i,s,o,a,l,c]}set(e,r,i,s,o,a,l,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=l|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Hl[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Hl[d-15],m=Hl[d-2],g=$o(f,7)^$o(f,18)^f>>>3,b=$o(m,17)^$o(m,19)^m>>>10;Hl[d]=b+Hl[d-7]+g+Hl[d-16]|0}let{A:i,B:s,C:o,D:a,E:l,F:c,G:u,H:h}=this;for(let d=0;d<64;d++){const f=$o(l,6)^$o(l,11)^$o(l,25),m=h+f+gme(l,c,u)+yme[d]+Hl[d]|0,b=($o(i,2)^$o(i,13)^$o(i,22))+bme(i,s,o)|0;h=u,u=c,c=l,l=a+m|0,a=o,o=s,s=i,i=m+b|0}i=i+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(i,s,o,a,l,c,u,h)}roundClean(){Hl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Gp=X1(()=>new vme),iv=BigInt(2**32-1),yI=BigInt(32);function dZ(n,e=!1){return e?{h:Number(n&iv),l:Number(n>>yI&iv)}:{h:Number(n>>yI&iv)|0,l:Number(n&iv)|0}}function hZ(n,e=!1){let r=new Uint32Array(n.length),i=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:o,l:a}=dZ(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const xme=(n,e)=>BigInt(n>>>0)<<yI|BigInt(e>>>0),wme=(n,e,r)=>n>>>r,_me=(n,e,r)=>n<<32-r|e>>>r,Sme=(n,e,r)=>n>>>r|e<<32-r,kme=(n,e,r)=>n<<32-r|e>>>r,Cme=(n,e,r)=>n<<64-r|e>>>r-32,Eme=(n,e,r)=>n>>>r-32|e<<64-r,Tme=(n,e)=>e,Pme=(n,e)=>n,fZ=(n,e,r)=>n<<r|e>>>32-r,pZ=(n,e,r)=>e<<r|n>>>32-r,mZ=(n,e,r)=>e<<r-32|n>>>64-r,gZ=(n,e,r)=>n<<r-32|e>>>64-r;function Mme(n,e,r,i){const s=(e>>>0)+(i>>>0);return{h:n+r+(s/2**32|0)|0,l:s|0}}const Dme=(n,e,r)=>(n>>>0)+(e>>>0)+(r>>>0),Ome=(n,e,r,i)=>e+r+i+(n/2**32|0)|0,Ime=(n,e,r,i)=>(n>>>0)+(e>>>0)+(r>>>0)+(i>>>0),Ame=(n,e,r,i,s)=>e+r+i+s+(n/2**32|0)|0,Rme=(n,e,r,i,s)=>(n>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(s>>>0),Nme=(n,e,r,i,s,o)=>e+r+i+s+o+(n/2**32|0)|0,zt={fromBig:dZ,split:hZ,toBig:xme,shrSH:wme,shrSL:_me,rotrSH:Sme,rotrSL:kme,rotrBH:Cme,rotrBL:Eme,rotr32H:Tme,rotr32L:Pme,rotlSH:fZ,rotlSL:pZ,rotlBH:mZ,rotlBL:gZ,add:Mme,add3L:Dme,add3H:Ome,add4L:Ime,add4H:Ame,add5H:Nme,add5L:Rme},[jme,Lme]=zt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Vl=new Uint32Array(80),Yl=new Uint32Array(80);class Fme extends SN{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:m,Gl:g,Hh:b,Hl:y}=this;return[e,r,i,s,o,a,l,c,u,h,d,f,m,g,b,y]}set(e,r,i,s,o,a,l,c,u,h,d,f,m,g,b,y){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=s|0,this.Ch=o|0,this.Cl=a|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=d|0,this.Fl=f|0,this.Gh=m|0,this.Gl=g|0,this.Hh=b|0,this.Hl=y|0}process(e,r){for(let k=0;k<16;k++,r+=4)Vl[k]=e.getUint32(r),Yl[k]=e.getUint32(r+=4);for(let k=16;k<80;k++){const S=Vl[k-15]|0,_=Yl[k-15]|0,C=zt.rotrSH(S,_,1)^zt.rotrSH(S,_,8)^zt.shrSH(S,_,7),P=zt.rotrSL(S,_,1)^zt.rotrSL(S,_,8)^zt.shrSL(S,_,7),T=Vl[k-2]|0,O=Yl[k-2]|0,D=zt.rotrSH(T,O,19)^zt.rotrBH(T,O,61)^zt.shrSH(T,O,6),I=zt.rotrSL(T,O,19)^zt.rotrBL(T,O,61)^zt.shrSL(T,O,6),U=zt.add4L(P,I,Yl[k-7],Yl[k-16]),B=zt.add4H(U,C,D,Vl[k-7],Vl[k-16]);Vl[k]=B|0,Yl[k]=U|0}let{Ah:i,Al:s,Bh:o,Bl:a,Ch:l,Cl:c,Dh:u,Dl:h,Eh:d,El:f,Fh:m,Fl:g,Gh:b,Gl:y,Hh:v,Hl:w}=this;for(let k=0;k<80;k++){const S=zt.rotrSH(d,f,14)^zt.rotrSH(d,f,18)^zt.rotrBH(d,f,41),_=zt.rotrSL(d,f,14)^zt.rotrSL(d,f,18)^zt.rotrBL(d,f,41),C=d&m^~d&b,P=f&g^~f&y,T=zt.add5L(w,_,P,Lme[k],Yl[k]),O=zt.add5H(T,v,S,C,jme[k],Vl[k]),D=T|0,I=zt.rotrSH(i,s,28)^zt.rotrBH(i,s,34)^zt.rotrBH(i,s,39),U=zt.rotrSL(i,s,28)^zt.rotrBL(i,s,34)^zt.rotrBL(i,s,39),B=i&o^i&l^o&l,z=s&a^s&c^a&c;v=b|0,w=y|0,b=m|0,y=g|0,m=d|0,g=f|0,{h:d,l:f}=zt.add(u|0,h|0,O|0,D|0),u=l|0,h=c|0,l=o|0,c=a|0,o=i|0,a=s|0;const j=zt.add3L(D,U,z);i=zt.add3H(j,O,I,B),s=j|0}({h:i,l:s}=zt.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:o,l:a}=zt.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:l,l:c}=zt.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:h}=zt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:d,l:f}=zt.add(this.Eh|0,this.El|0,d|0,f|0),{h:m,l:g}=zt.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:b,l:y}=zt.add(this.Gh|0,this.Gl|0,b|0,y|0),{h:v,l:w}=zt.add(this.Hh|0,this.Hl|0,v|0,w|0),this.set(i,s,o,a,l,c,u,h,d,f,m,g,b,y,v,w)}roundClean(){Vl.fill(0),Yl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const kN=X1(()=>new Fme);function $me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const ML=$me(),DL=ML.crypto||ML.msCrypto;function Bme(n){switch(n){case"sha256":return Gp.create();case"sha512":return kN.create()}Ne(!1,"invalid hashing algorithm name","algorithm",n)}function zme(n,e){const r={sha256:Gp,sha512:kN}[n];return Ne(r!=null,"invalid hmac algorithm","algorithm",n),Q1.create(r,e)}function Ume(n,e,r,i,s){const o={sha256:Gp,sha512:kN}[s];return Ne(o!=null,"invalid pbkdf2 algorithm","algorithm",s),_N(o,n,e,{c:r,dkLen:i})}function Wme(n){sn(DL!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Ne(Number.isInteger(n)&&n>0&&n<=1024,"invalid length","length",n);const e=new Uint8Array(n);return DL.getRandomValues(e),e}let bZ=!1;const yZ=function(n,e,r){return zme(n,e).update(r).digest()};let vZ=yZ;function Kp(n,e,r){const i=St(e,"key"),s=St(r,"data");return yt(vZ(n,i,s))}Kp._=yZ;Kp.lock=function(){bZ=!0};Kp.register=function(n){if(bZ)throw new Error("computeHmac is locked");vZ=n};Object.freeze(Kp);const[xZ,wZ,_Z]=[[],[],[]],qme=BigInt(0),Rm=BigInt(1),Hme=BigInt(2),Vme=BigInt(7),Yme=BigInt(256),Gme=BigInt(113);for(let n=0,e=Rm,r=1,i=0;n<24;n++){[r,i]=[i,(2*r+3*i)%5],xZ.push(2*(5*i+r)),wZ.push((n+1)*(n+2)/2%64);let s=qme;for(let o=0;o<7;o++)e=(e<<Rm^(e>>Vme)*Gme)%Yme,e&Hme&&(s^=Rm<<(Rm<<BigInt(o))-Rm);_Z.push(s)}const[Kme,Xme]=hZ(_Z,!0),OL=(n,e,r)=>r>32?mZ(n,e,r):fZ(n,e,r),IL=(n,e,r)=>r>32?gZ(n,e,r):pZ(n,e,r);function Qme(n,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)r[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,c=(a+2)%10,u=r[c],h=r[c+1],d=OL(u,h,1)^r[l],f=IL(u,h,1)^r[l+1];for(let m=0;m<50;m+=10)n[a+m]^=d,n[a+m+1]^=f}let s=n[2],o=n[3];for(let a=0;a<24;a++){const l=wZ[a],c=OL(s,o,l),u=IL(s,o,l),h=xZ[a];s=n[h],o=n[h+1],n[h]=c,n[h+1]=u}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)r[l]=n[a+l];for(let l=0;l<10;l++)n[a+l]^=~r[(l+2)%10]&r[(l+4)%10]}n[0]^=Kme[i],n[1]^=Xme[i]}r.fill(0)}class CN extends wN{constructor(e,r,i,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ls(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=bx(this.state)}keccak(){Qme(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){gp(this);const{blockLen:r,state:i}=this;e=bp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);for(let l=0;l<a;l++)i[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:s}=this;e[i]^=r,r&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gp(this,!1),xN(e),this.finish();const r=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();const a=Math.min(i-this.posOut,o-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ls(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:s,rounds:o,enableXOF:a}=this;return e||(e=new CN(r,i,s,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Jme=(n,e,r)=>X1(()=>new CN(e,n,r)),Zme=Jme(1,136,256/8);let SZ=!1;const kZ=function(n){return Zme(n)};let CZ=kZ;function Rr(n){const e=St(n,"data");return yt(CZ(e))}Rr._=kZ;Rr.lock=function(){SZ=!0};Rr.register=function(n){if(SZ)throw new TypeError("keccak256 is locked");CZ=n};Object.freeze(Rr);const ege=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),EZ=Uint8Array.from({length:16},(n,e)=>e),tge=EZ.map(n=>(9*n+5)%16);let EN=[EZ],TN=[tge];for(let n=0;n<4;n++)for(let e of[EN,TN])e.push(e[n].map(r=>ege[r]));const TZ=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),nge=EN.map((n,e)=>n.map(r=>TZ[e][r])),rge=TN.map((n,e)=>n.map(r=>TZ[e][r])),ige=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),sge=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),sv=(n,e)=>n<<e|n>>>32-e;function AL(n,e,r,i){return n===0?e^r^i:n===1?e&r|~e&i:n===2?(e|~r)^i:n===3?e&i|r&~i:e^(r|~i)}const ov=new Uint32Array(16);class oge extends SN{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:r,h2:i,h3:s,h4:o}=this;return[e,r,i,s,o]}set(e,r,i,s,o){this.h0=e|0,this.h1=r|0,this.h2=i|0,this.h3=s|0,this.h4=o|0}process(e,r){for(let m=0;m<16;m++,r+=4)ov[m]=e.getUint32(r,!0);let i=this.h0|0,s=i,o=this.h1|0,a=o,l=this.h2|0,c=l,u=this.h3|0,h=u,d=this.h4|0,f=d;for(let m=0;m<5;m++){const g=4-m,b=ige[m],y=sge[m],v=EN[m],w=TN[m],k=nge[m],S=rge[m];for(let _=0;_<16;_++){const C=sv(i+AL(m,o,l,u)+ov[v[_]]+b,k[_])+d|0;i=d,d=u,u=sv(l,10)|0,l=o,o=C}for(let _=0;_<16;_++){const C=sv(s+AL(g,a,c,h)+ov[w[_]]+y,S[_])+f|0;s=f,f=h,h=sv(c,10)|0,c=a,a=C}}this.set(this.h1+l+h|0,this.h2+u+f|0,this.h3+d+s|0,this.h4+i+a|0,this.h0+o+c|0)}roundClean(){ov.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const age=X1(()=>new oge);let PZ=!1;const MZ=function(n){return age(n)};let DZ=MZ;function Xp(n){const e=St(n,"data");return yt(DZ(e))}Xp._=MZ;Xp.lock=function(){PZ=!0};Xp.register=function(n){if(PZ)throw new TypeError("ripemd160 is locked");DZ=n};Object.freeze(Xp);let OZ=!1;const IZ=function(n,e,r,i,s){return Ume(n,e,r,i,s)};let AZ=IZ;function Ib(n,e,r,i,s){const o=St(n,"password"),a=St(e,"salt");return yt(AZ(o,a,r,i,s))}Ib._=IZ;Ib.lock=function(){OZ=!0};Ib.register=function(n){if(OZ)throw new Error("pbkdf2 is locked");AZ=n};Object.freeze(Ib);let RZ=!1;const NZ=function(n){return new Uint8Array(Wme(n))};let jZ=NZ;function pl(n){return jZ(n)}pl._=NZ;pl.lock=function(){RZ=!0};pl.register=function(n){if(RZ)throw new Error("randomBytes is locked");jZ=n};Object.freeze(pl);const cn=(n,e)=>n<<e|n>>>32-e;function RL(n,e,r,i,s,o){let a=n[e++]^r[i++],l=n[e++]^r[i++],c=n[e++]^r[i++],u=n[e++]^r[i++],h=n[e++]^r[i++],d=n[e++]^r[i++],f=n[e++]^r[i++],m=n[e++]^r[i++],g=n[e++]^r[i++],b=n[e++]^r[i++],y=n[e++]^r[i++],v=n[e++]^r[i++],w=n[e++]^r[i++],k=n[e++]^r[i++],S=n[e++]^r[i++],_=n[e++]^r[i++],C=a,P=l,T=c,O=u,D=h,I=d,U=f,B=m,z=g,j=b,F=y,N=v,R=w,W=k,Y=S,K=_;for(let H=0;H<8;H+=2)D^=cn(C+R|0,7),z^=cn(D+C|0,9),R^=cn(z+D|0,13),C^=cn(R+z|0,18),j^=cn(I+P|0,7),W^=cn(j+I|0,9),P^=cn(W+j|0,13),I^=cn(P+W|0,18),Y^=cn(F+U|0,7),T^=cn(Y+F|0,9),U^=cn(T+Y|0,13),F^=cn(U+T|0,18),O^=cn(K+N|0,7),B^=cn(O+K|0,9),N^=cn(B+O|0,13),K^=cn(N+B|0,18),P^=cn(C+O|0,7),T^=cn(P+C|0,9),O^=cn(T+P|0,13),C^=cn(O+T|0,18),U^=cn(I+D|0,7),B^=cn(U+I|0,9),D^=cn(B+U|0,13),I^=cn(D+B|0,18),N^=cn(F+j|0,7),z^=cn(N+F|0,9),j^=cn(z+N|0,13),F^=cn(j+z|0,18),R^=cn(K+Y|0,7),W^=cn(R+K|0,9),Y^=cn(W+R|0,13),K^=cn(Y+W|0,18);s[o++]=a+C|0,s[o++]=l+P|0,s[o++]=c+T|0,s[o++]=u+O|0,s[o++]=h+D|0,s[o++]=d+I|0,s[o++]=f+U|0,s[o++]=m+B|0,s[o++]=g+z|0,s[o++]=b+j|0,s[o++]=y+F|0,s[o++]=v+N|0,s[o++]=w+R|0,s[o++]=k+W|0,s[o++]=S+Y|0,s[o++]=_+K|0}function vf(n,e,r,i,s){let o=i+0,a=i+16*s;for(let l=0;l<16;l++)r[a+l]=n[e+(2*s-1)*16+l];for(let l=0;l<s;l++,o+=16,e+=16)RL(r,a,n,e,r,o),l>0&&(a+=16),RL(r,o,n,e+=16,r,a)}function LZ(n,e,r){const i=cZ({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:s,r:o,p:a,dkLen:l,asyncTick:c,maxmem:u,onProgress:h}=i;if(ls(s),ls(o),ls(a),ls(l),ls(c),ls(u),h!==void 0&&typeof h!="function")throw new Error("progressCb should be function");const d=128*o,f=d/4;if(s<=1||s&s-1||s>=2**(d/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>(2**32-1)*32/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(l<0||l>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const m=d*(s+a);if(m>u)throw new Error(`Scrypt: parameters too large, ${m} (128 * r * (N + p)) > ${u} (maxmem)`);const g=_N(Gp,n,e,{c:1,dkLen:d*a}),b=bx(g),y=bx(new Uint8Array(d*s)),v=bx(new Uint8Array(d));let w=()=>{};if(h){const k=2*s*a,S=Math.max(Math.floor(k/1e4),1);let _=0;w=()=>{_++,h&&(!(_%S)||_===k)&&h(_/k)}}return{N:s,r:o,p:a,dkLen:l,blockSize32:f,V:y,B32:b,B:g,tmp:v,blockMixCb:w,asyncTick:c}}function FZ(n,e,r,i,s){const o=_N(Gp,n,r,{c:1,dkLen:e});return r.fill(0),i.fill(0),s.fill(0),o}function lge(n,e,r){const{N:i,r:s,p:o,dkLen:a,blockSize32:l,V:c,B32:u,B:h,tmp:d,blockMixCb:f}=LZ(n,e,r);for(let m=0;m<o;m++){const g=l*m;for(let b=0;b<l;b++)c[b]=u[g+b];for(let b=0,y=0;b<i-1;b++)vf(c,y,c,y+=l,s),f();vf(c,(i-1)*l,u,g,s),f();for(let b=0;b<i;b++){const y=u[g+l-16]%i;for(let v=0;v<l;v++)d[v]=u[g+v]^c[y*l+v];vf(d,0,u,g,s),f()}}return FZ(n,a,h,c,d)}async function cge(n,e,r){const{N:i,r:s,p:o,dkLen:a,blockSize32:l,V:c,B32:u,B:h,tmp:d,blockMixCb:f,asyncTick:m}=LZ(n,e,r);for(let g=0;g<o;g++){const b=l*g;for(let v=0;v<l;v++)c[v]=u[b+v];let y=0;await PL(i-1,m,()=>{vf(c,y,c,y+=l,s),f()}),vf(c,(i-1)*l,u,b,s),f(),await PL(i,m,()=>{const v=u[b+l-16]%i;for(let w=0;w<l;w++)d[w]=u[b+w]^c[v*l+w];vf(d,0,u,b,s),f()})}return FZ(n,a,h,c,d)}let $Z=!1,BZ=!1;const zZ=async function(n,e,r,i,s,o,a){return await cge(n,e,{N:r,r:i,p:s,dkLen:o,onProgress:a})},UZ=function(n,e,r,i,s,o){return lge(n,e,{N:r,r:i,p:s,dkLen:o})};let WZ=zZ,qZ=UZ;async function Ab(n,e,r,i,s,o,a){const l=St(n,"passwd"),c=St(e,"salt");return yt(await WZ(l,c,r,i,s,o,a))}Ab._=zZ;Ab.lock=function(){BZ=!0};Ab.register=function(n){if(BZ)throw new Error("scrypt is locked");WZ=n};Object.freeze(Ab);function Rb(n,e,r,i,s,o){const a=St(n,"passwd"),l=St(e,"salt");return yt(qZ(a,l,r,i,s,o))}Rb._=UZ;Rb.lock=function(){$Z=!0};Rb.register=function(n){if($Z)throw new Error("scryptSync is locked");qZ=n};Object.freeze(Rb);const HZ=function(n){return Bme("sha256").update(n).digest()};let VZ=HZ,YZ=!1;function Zs(n){const e=St(n,"data");return yt(VZ(e))}Zs._=HZ;Zs.lock=function(){YZ=!0};Zs.register=function(n){if(YZ)throw new Error("sha256 is locked");VZ=n};Object.freeze(Zs);Object.freeze(Zs);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GZ=BigInt(0),J1=BigInt(1),uge=BigInt(2),Z1=n=>n instanceof Uint8Array,dge=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function yp(n){if(!Z1(n))throw new Error("Uint8Array expected");let e="";for(let r=0;r<n.length;r++)e+=dge[n[r]];return e}function KZ(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function PN(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function vp(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let i=0;i<r.length;i++){const s=i*2,o=n.slice(s,s+2),a=Number.parseInt(o,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[i]=a}return r}function md(n){return PN(yp(n))}function MN(n){if(!Z1(n))throw new Error("Uint8Array expected");return PN(yp(Uint8Array.from(n).reverse()))}function xp(n,e){return vp(n.toString(16).padStart(e*2,"0"))}function DN(n,e){return xp(n,e).reverse()}function hge(n){return vp(KZ(n))}function po(n,e,r){let i;if(typeof e=="string")try{i=vp(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Z1(e))i=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=i.length;if(typeof r=="number"&&s!==r)throw new Error(`${n} expected ${r} bytes, got ${s}`);return i}function W0(...n){const e=new Uint8Array(n.reduce((i,s)=>i+s.length,0));let r=0;return n.forEach(i=>{if(!Z1(i))throw new Error("Uint8Array expected");e.set(i,r),r+=i.length}),e}function fge(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}function pge(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function mge(n){let e;for(e=0;n>GZ;n>>=J1,e+=1);return e}function gge(n,e){return n>>BigInt(e)&J1}const bge=(n,e,r)=>n|(r?J1:GZ)<<BigInt(e),ON=n=>(uge<<BigInt(n-1))-J1,fk=n=>new Uint8Array(n),NL=n=>Uint8Array.from(n);function XZ(n,e,r){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=fk(n),s=fk(n),o=0;const a=()=>{i.fill(1),s.fill(0),o=0},l=(...d)=>r(s,i,...d),c=(d=fk())=>{s=l(NL([0]),d),i=l(),d.length!==0&&(s=l(NL([1]),d),i=l())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){i=l();const m=i.slice();f.push(m),d+=i.length}return W0(...f)};return(d,f)=>{a(),c(d);let m;for(;!(m=f(u()));)c();return a(),m}}const yge={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Nb(n,e,r={}){const i=(s,o,a)=>{const l=yge[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const c=n[s];if(!(a&&c===void 0)&&!l(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${o}`)};for(const[s,o]of Object.entries(e))i(s,o,!1);for(const[s,o]of Object.entries(r))i(s,o,!0);return n}const vge=Object.freeze(Object.defineProperty({__proto__:null,bitGet:gge,bitLen:mge,bitMask:ON,bitSet:bge,bytesToHex:yp,bytesToNumberBE:md,bytesToNumberLE:MN,concatBytes:W0,createHmacDrbg:XZ,ensureBytes:po,equalBytes:fge,hexToBytes:vp,hexToNumber:PN,numberToBytesBE:xp,numberToBytesLE:DN,numberToHexUnpadded:KZ,numberToVarBytesBE:hge,utf8ToBytes:pge,validateObject:Nb},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nr=BigInt(0),hr=BigInt(1),Uu=BigInt(2),xge=BigInt(3),vI=BigInt(4),jL=BigInt(5),LL=BigInt(8);BigInt(9);BigInt(16);function Li(n,e){const r=n%e;return r>=Nr?r:e+r}function wge(n,e,r){if(r<=Nr||e<Nr)throw new Error("Expected power/modulo > 0");if(r===hr)return Nr;let i=hr;for(;e>Nr;)e&hr&&(i=i*n%r),n=n*n%r,e>>=hr;return i}function Es(n,e,r){let i=n;for(;e-- >Nr;)i*=i,i%=r;return i}function xI(n,e){if(n===Nr||e<=Nr)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let r=Li(n,e),i=e,s=Nr,o=hr;for(;r!==Nr;){const l=i/r,c=i%r,u=s-o*l;i=r,r=c,s=o,o=u}if(i!==hr)throw new Error("invert: does not exist");return Li(s,e)}function _ge(n){const e=(n-hr)/Uu;let r,i,s;for(r=n-hr,i=0;r%Uu===Nr;r/=Uu,i++);for(s=Uu;s<n&&wge(s,e,n)!==n-hr;s++);if(i===1){const a=(n+hr)/vI;return function(c,u){const h=c.pow(u,a);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}const o=(r+hr)/Uu;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=i,h=l.pow(l.mul(l.ONE,s),r),d=l.pow(c,o),f=l.pow(c,r);for(;!l.eql(f,l.ONE);){if(l.eql(f,l.ZERO))return l.ZERO;let m=1;for(let b=l.sqr(f);m<u&&!l.eql(b,l.ONE);m++)b=l.sqr(b);const g=l.pow(h,hr<<BigInt(u-m-1));h=l.sqr(g),d=l.mul(d,g),f=l.mul(f,h),u=m}return d}}function Sge(n){if(n%vI===xge){const e=(n+hr)/vI;return function(i,s){const o=i.pow(s,e);if(!i.eql(i.sqr(o),s))throw new Error("Cannot find square root");return o}}if(n%LL===jL){const e=(n-jL)/LL;return function(i,s){const o=i.mul(s,Uu),a=i.pow(o,e),l=i.mul(s,a),c=i.mul(i.mul(l,Uu),a),u=i.mul(l,i.sub(c,i.ONE));if(!i.eql(i.sqr(u),s))throw new Error("Cannot find square root");return u}}return _ge(n)}const kge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cge(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=kge.reduce((i,s)=>(i[s]="function",i),e);return Nb(n,r)}function Ege(n,e,r){if(r<Nr)throw new Error("Expected power > 0");if(r===Nr)return n.ONE;if(r===hr)return e;let i=n.ONE,s=e;for(;r>Nr;)r&hr&&(i=n.mul(i,s)),s=n.sqr(s),r>>=hr;return i}function Tge(n,e){const r=new Array(e.length),i=e.reduce((o,a,l)=>n.is0(a)?o:(r[l]=o,n.mul(o,a)),n.ONE),s=n.inv(i);return e.reduceRight((o,a,l)=>n.is0(a)?o:(r[l]=n.mul(o,r[l]),n.mul(o,a)),s),r}function QZ(n,e){const r=e!==void 0?e:n.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Pge(n,e,r=!1,i={}){if(n<=Nr)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:o}=QZ(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Sge(n),l=Object.freeze({ORDER:n,BITS:s,BYTES:o,MASK:ON(s),ZERO:Nr,ONE:hr,create:c=>Li(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Nr<=c&&c<n},is0:c=>c===Nr,isOdd:c=>(c&hr)===hr,neg:c=>Li(-c,n),eql:(c,u)=>c===u,sqr:c=>Li(c*c,n),add:(c,u)=>Li(c+u,n),sub:(c,u)=>Li(c-u,n),mul:(c,u)=>Li(c*u,n),pow:(c,u)=>Ege(l,c,u),div:(c,u)=>Li(c*xI(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>xI(c,n),sqrt:i.sqrt||(c=>a(l,c)),invertBatch:c=>Tge(l,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?DN(c,o):xp(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?MN(c):md(c)}});return Object.freeze(l)}function JZ(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function ZZ(n){const e=JZ(n);return e+Math.ceil(e/2)}function Mge(n,e,r=!1){const i=n.length,s=JZ(e),o=ZZ(e);if(i<16||i<o||i>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${i}`);const a=r?md(n):MN(n),l=Li(a,e-hr)+hr;return r?DN(l,s):xp(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dge=BigInt(0),pk=BigInt(1);function Oge(n,e){const r=(s,o)=>{const a=o.negate();return s?a:o},i=s=>{const o=Math.ceil(e/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(s,o){let a=n.ZERO,l=s;for(;o>Dge;)o&pk&&(a=a.add(l)),l=l.double(),o>>=pk;return a},precomputeWindow(s,o){const{windows:a,windowSize:l}=i(o),c=[];let u=s,h=u;for(let d=0;d<a;d++){h=u,c.push(h);for(let f=1;f<l;f++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(s,o,a){const{windows:l,windowSize:c}=i(s);let u=n.ZERO,h=n.BASE;const d=BigInt(2**s-1),f=2**s,m=BigInt(s);for(let g=0;g<l;g++){const b=g*c;let y=Number(a&d);a>>=m,y>c&&(y-=f,a+=pk);const v=b,w=b+Math.abs(y)-1,k=g%2!==0,S=y<0;y===0?h=h.add(r(k,o[v])):u=u.add(r(S,o[w]))}return{p:u,f:h}},wNAFCached(s,o,a,l){const c=s._WINDOW_SIZE||1;let u=o.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&o.set(s,l(u))),this.wNAF(c,u,a)}}}function eee(n){return Cge(n.Fp),Nb(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...QZ(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ige(n){const e=eee(n);Nb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:s}=e;if(r){if(!i.eql(s,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Age,hexToBytes:Rge}=vge,Ku={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Ku;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const r=n[1],i=n.subarray(2,r+2);if(!r||i.length!==r)throw new e("Invalid signature integer: wrong length");if(i[0]&128)throw new e("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Age(i),l:n.subarray(r+2)}},toSig(n){const{Err:e}=Ku,r=typeof n=="string"?Rge(n):n;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let i=r.length;if(i<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==i-2)throw new e("Invalid signature: incorrect length");const{d:s,l:o}=Ku._parseInt(r.subarray(2)),{d:a,l}=Ku._parseInt(o);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(n){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{const h=u.toString(16);return h.length&1?`0${h}`:h},i=e(r(n.s)),s=e(r(n.r)),o=i.length/2,a=s.length/2,l=r(o),c=r(a);return`30${r(a+o+4)}02${c}${s}02${l}${i}`}},nl=BigInt(0),Bs=BigInt(1);BigInt(2);const FL=BigInt(3);BigInt(4);function Nge(n){const e=Ige(n),{Fp:r}=e,i=e.toBytes||((g,b,y)=>{const v=b.toAffine();return W0(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),s=e.fromBytes||(g=>{const b=g.subarray(1),y=r.fromBytes(b.subarray(0,r.BYTES)),v=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:y,y:v}});function o(g){const{a:b,b:y}=e,v=r.sqr(g),w=r.mul(v,g);return r.add(r.add(w,r.mul(g,b)),y)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return typeof g=="bigint"&&nl<g&&g<e.n}function l(g){if(!a(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(g){const{allowedPrivateKeyLengths:b,nByteLength:y,wrapPrivateKey:v,n:w}=e;if(b&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=yp(g)),typeof g!="string"||!b.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let k;try{k=typeof g=="bigint"?g:md(po("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return v&&(k=Li(k,w)),l(k),k}const u=new Map;function h(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(b,y,v){if(this.px=b,this.py=y,this.pz=v,b==null||!r.isValid(b))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required")}static fromAffine(b){const{x:y,y:v}=b||{};if(!b||!r.isValid(y)||!r.isValid(v))throw new Error("invalid affine point");if(b instanceof d)throw new Error("projective point not allowed");const w=k=>r.eql(k,r.ZERO);return w(y)&&w(v)?d.ZERO:new d(y,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const y=r.invertBatch(b.map(v=>v.pz));return b.map((v,w)=>v.toAffine(y[w])).map(d.fromAffine)}static fromHex(b){const y=d.fromAffine(s(po("pointHex",b)));return y.assertValidity(),y}static fromPrivateKey(b){return d.BASE.multiply(c(b))}_setWindowSize(b){this._WINDOW_SIZE=b,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y}=this.toAffine();if(!r.isValid(b)||!r.isValid(y))throw new Error("bad point: x or y not FE");const v=r.sqr(y),w=o(b);if(!r.eql(v,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(r.isOdd)return!r.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){h(b);const{px:y,py:v,pz:w}=this,{px:k,py:S,pz:_}=b,C=r.eql(r.mul(y,_),r.mul(k,w)),P=r.eql(r.mul(v,_),r.mul(S,w));return C&&P}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:b,b:y}=e,v=r.mul(y,FL),{px:w,py:k,pz:S}=this;let _=r.ZERO,C=r.ZERO,P=r.ZERO,T=r.mul(w,w),O=r.mul(k,k),D=r.mul(S,S),I=r.mul(w,k);return I=r.add(I,I),P=r.mul(w,S),P=r.add(P,P),_=r.mul(b,P),C=r.mul(v,D),C=r.add(_,C),_=r.sub(O,C),C=r.add(O,C),C=r.mul(_,C),_=r.mul(I,_),P=r.mul(v,P),D=r.mul(b,D),I=r.sub(T,D),I=r.mul(b,I),I=r.add(I,P),P=r.add(T,T),T=r.add(P,T),T=r.add(T,D),T=r.mul(T,I),C=r.add(C,T),D=r.mul(k,S),D=r.add(D,D),T=r.mul(D,I),_=r.sub(_,T),P=r.mul(D,O),P=r.add(P,P),P=r.add(P,P),new d(_,C,P)}add(b){h(b);const{px:y,py:v,pz:w}=this,{px:k,py:S,pz:_}=b;let C=r.ZERO,P=r.ZERO,T=r.ZERO;const O=e.a,D=r.mul(e.b,FL);let I=r.mul(y,k),U=r.mul(v,S),B=r.mul(w,_),z=r.add(y,v),j=r.add(k,S);z=r.mul(z,j),j=r.add(I,U),z=r.sub(z,j),j=r.add(y,w);let F=r.add(k,_);return j=r.mul(j,F),F=r.add(I,B),j=r.sub(j,F),F=r.add(v,w),C=r.add(S,_),F=r.mul(F,C),C=r.add(U,B),F=r.sub(F,C),T=r.mul(O,j),C=r.mul(D,B),T=r.add(C,T),C=r.sub(U,T),T=r.add(U,T),P=r.mul(C,T),U=r.add(I,I),U=r.add(U,I),B=r.mul(O,B),j=r.mul(D,j),U=r.add(U,B),B=r.sub(I,B),B=r.mul(O,B),j=r.add(j,B),I=r.mul(U,j),P=r.add(P,I),I=r.mul(F,j),C=r.mul(z,C),C=r.sub(C,I),I=r.mul(z,U),T=r.mul(F,T),T=r.add(T,I),new d(C,P,T)}subtract(b){return this.add(b.negate())}is0(){return this.equals(d.ZERO)}wNAF(b){return m.wNAFCached(this,u,b,y=>{const v=r.invertBatch(y.map(w=>w.pz));return y.map((w,k)=>w.toAffine(v[k])).map(d.fromAffine)})}multiplyUnsafe(b){const y=d.ZERO;if(b===nl)return y;if(l(b),b===Bs)return this;const{endo:v}=e;if(!v)return m.unsafeLadder(this,b);let{k1neg:w,k1:k,k2neg:S,k2:_}=v.splitScalar(b),C=y,P=y,T=this;for(;k>nl||_>nl;)k&Bs&&(C=C.add(T)),_&Bs&&(P=P.add(T)),T=T.double(),k>>=Bs,_>>=Bs;return w&&(C=C.negate()),S&&(P=P.negate()),P=new d(r.mul(P.px,v.beta),P.py,P.pz),C.add(P)}multiply(b){l(b);let y=b,v,w;const{endo:k}=e;if(k){const{k1neg:S,k1:_,k2neg:C,k2:P}=k.splitScalar(y);let{p:T,f:O}=this.wNAF(_),{p:D,f:I}=this.wNAF(P);T=m.constTimeNegate(S,T),D=m.constTimeNegate(C,D),D=new d(r.mul(D.px,k.beta),D.py,D.pz),v=T.add(D),w=O.add(I)}else{const{p:S,f:_}=this.wNAF(y);v=S,w=_}return d.normalizeZ([v,w])[0]}multiplyAndAddUnsafe(b,y,v){const w=d.BASE,k=(_,C)=>C===nl||C===Bs||!_.equals(w)?_.multiplyUnsafe(C):_.multiply(C),S=k(this,y).add(k(b,v));return S.is0()?void 0:S}toAffine(b){const{px:y,py:v,pz:w}=this,k=this.is0();b==null&&(b=k?r.ONE:r.inv(w));const S=r.mul(y,b),_=r.mul(v,b),C=r.mul(w,b);if(k)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:S,y:_}}isTorsionFree(){const{h:b,isTorsionFree:y}=e;if(b===Bs)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:y}=e;return b===Bs?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),i(d,this,b)}toHex(b=!0){return yp(this.toRawBytes(b))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,m=Oge(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function jge(n){const e=eee(n);return Nb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Lge(n){const e=jge(n),{Fp:r,n:i}=e,s=r.BYTES+1,o=2*r.BYTES+1;function a(j){return nl<j&&j<r.ORDER}function l(j){return Li(j,i)}function c(j){return xI(j,i)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:d,isWithinCurveOrder:f}=Nge({...e,toBytes(j,F,N){const R=F.toAffine(),W=r.toBytes(R.x),Y=W0;return N?Y(Uint8Array.from([F.hasEvenY()?2:3]),W):Y(Uint8Array.from([4]),W,r.toBytes(R.y))},fromBytes(j){const F=j.length,N=j[0],R=j.subarray(1);if(F===s&&(N===2||N===3)){const W=md(R);if(!a(W))throw new Error("Point is not on curve");const Y=d(W);let K=r.sqrt(Y);const H=(K&Bs)===Bs;return(N&1)===1!==H&&(K=r.neg(K)),{x:W,y:K}}else if(F===o&&N===4){const W=r.fromBytes(R.subarray(0,r.BYTES)),Y=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:W,y:Y}}else throw new Error(`Point of length ${F} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),m=j=>yp(xp(j,e.nByteLength));function g(j){const F=i>>Bs;return j>F}function b(j){return g(j)?l(-j):j}const y=(j,F,N)=>md(j.slice(F,N));class v{constructor(F,N,R){this.r=F,this.s=N,this.recovery=R,this.assertValidity()}static fromCompact(F){const N=e.nByteLength;return F=po("compactSignature",F,N*2),new v(y(F,0,N),y(F,N,2*N))}static fromDER(F){const{r:N,s:R}=Ku.toSig(po("DER",F));return new v(N,R)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new v(this.r,this.s,F)}recoverPublicKey(F){const{r:N,s:R,recovery:W}=this,Y=P(po("msgHash",F));if(W==null||![0,1,2,3].includes(W))throw new Error("recovery id invalid");const K=W===2||W===3?N+e.n:N;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=W&1?"03":"02",Q=u.fromHex(H+m(K)),G=c(K),X=l(-Y*G),de=l(R*G),ye=u.BASE.multiplyAndAddUnsafe(Q,X,de);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return vp(this.toDERHex())}toDERHex(){return Ku.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return vp(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const w={isValidPrivateKey(j){try{return h(j),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const j=ZZ(e.n);return Mge(e.randomBytes(j),e.n)},precompute(j=8,F=u.BASE){return F._setWindowSize(j),F.multiply(BigInt(3)),F}};function k(j,F=!0){return u.fromPrivateKey(j).toRawBytes(F)}function S(j){const F=j instanceof Uint8Array,N=typeof j=="string",R=(F||N)&&j.length;return F?R===s||R===o:N?R===2*s||R===2*o:j instanceof u}function _(j,F,N=!0){if(S(j))throw new Error("first arg must be private key");if(!S(F))throw new Error("second arg must be public key");return u.fromHex(F).multiply(h(j)).toRawBytes(N)}const C=e.bits2int||function(j){const F=md(j),N=j.length*8-e.nBitLength;return N>0?F>>BigInt(N):F},P=e.bits2int_modN||function(j){return l(C(j))},T=ON(e.nBitLength);function O(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(nl<=j&&j<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xp(j,e.nByteLength)}function D(j,F,N=I){if(["recovered","canonical"].some(ie=>ie in N))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:W}=e;let{lowS:Y,prehash:K,extraEntropy:H}=N;Y==null&&(Y=!0),j=po("msgHash",j),K&&(j=po("prehashed msgHash",R(j)));const Q=P(j),G=h(F),X=[O(G),O(Q)];if(H!=null){const ie=H===!0?W(r.BYTES):H;X.push(po("extraEntropy",ie))}const de=W0(...X),ye=Q;function se(ie){const Pe=C(ie);if(!f(Pe))return;const ke=c(Pe),q=u.BASE.multiply(Pe).toAffine(),Ee=l(q.x);if(Ee===nl)return;const Je=l(ke*l(ye+Ee*G));if(Je===nl)return;let ct=(q.x===Ee?0:2)|Number(q.y&Bs),$e=Je;return Y&&g(Je)&&($e=b(Je),ct^=1),new v(Ee,$e,ct)}return{seed:de,k2sig:se}}const I={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function B(j,F,N=I){const{seed:R,k2sig:W}=D(j,F,N),Y=e;return XZ(Y.hash.outputLen,Y.nByteLength,Y.hmac)(R,W)}u.BASE._setWindowSize(8);function z(j,F,N,R=U){var q;const W=j;if(F=po("msgHash",F),N=po("publicKey",N),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:K}=R;let H,Q;try{if(typeof W=="string"||W instanceof Uint8Array)try{H=v.fromDER(W)}catch(Ee){if(!(Ee instanceof Ku.Err))throw Ee;H=v.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){const{r:Ee,s:Je}=W;H=new v(Ee,Je)}else throw new Error("PARSE");Q=u.fromHex(N)}catch(Ee){if(Ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&H.hasHighS())return!1;K&&(F=e.hash(F));const{r:G,s:X}=H,de=P(F),ye=c(X),se=l(de*ye),ie=l(G*ye),Pe=(q=u.BASE.multiplyAndAddUnsafe(Q,se,ie))==null?void 0:q.toAffine();return Pe?l(Pe.x)===G:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:_,sign:B,verify:z,ProjectivePoint:u,Signature:v,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fge(n){return{hash:n,hmac:(e,...r)=>Q1(n,e,ume(...r)),randomBytes:hme}}function $ge(n,e){const r=i=>Lge({...n,...Fge(i)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tee=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$L=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bge=BigInt(1),wI=BigInt(2),BL=(n,e)=>(n+e/wI)/e;function zge(n){const e=tee,r=BigInt(3),i=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),c=BigInt(88),u=n*n*n%e,h=u*u*n%e,d=Es(h,r,e)*h%e,f=Es(d,r,e)*h%e,m=Es(f,wI,e)*u%e,g=Es(m,s,e)*m%e,b=Es(g,o,e)*g%e,y=Es(b,l,e)*b%e,v=Es(y,c,e)*y%e,w=Es(v,l,e)*b%e,k=Es(w,r,e)*h%e,S=Es(k,a,e)*g%e,_=Es(S,i,e)*u%e,C=Es(_,wI,e);if(!_I.eql(_I.sqr(C),n))throw new Error("Cannot find square root");return C}const _I=Pge(tee,void 0,void 0,{sqrt:zge}),sc=$ge({a:BigInt(0),b:BigInt(7),Fp:_I,n:$L,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=$L,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Bge*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),l=BL(o*n,e),c=BL(-i*n,e);let u=Li(n-l*r-c*s,e),h=Li(-l*i-c*o,e);const d=u>a,f=h>a;if(d&&(u=e-u),f&&(h=e-h),u>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:d,k1:u,k2neg:f,k2:h}}}},Gp);BigInt(0);sc.ProjectivePoint;const nee="0x0000000000000000000000000000000000000000",zL="0x0000000000000000000000000000000000000000000000000000000000000000",Uge=`Ethereum Signed Message:
`,UL=BigInt(0),WL=BigInt(1),SI=BigInt(2),qL=BigInt(27),HL=BigInt(28),av=BigInt(35),ree=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wge=ree/SI,qge=Symbol.for("nodejs.util.inspect.custom"),vu={};function mk(n){return Xc(fr(n),32)}var Ff,na,$f,_c;const Ns=class Ns{constructor(e,r,i,s){pt(this,Ff);pt(this,na);pt(this,$f);pt(this,_c);Y1(e,vu,"Signature"),We(this,Ff,r),We(this,na,i),We(this,$f,s),We(this,_c,null)}get r(){return me(this,Ff)}set r(e){Ne(Bg(e)===32,"invalid r","value",e),We(this,Ff,yt(e))}get s(){return Ne(parseInt(me(this,na).substring(0,3))<8,"non-canonical s; use ._s","s",me(this,na)),me(this,na)}set s(e){Ne(Bg(e)===32,"invalid s","value",e),We(this,na,yt(e))}get _s(){return me(this,na)}isValid(){return BigInt(me(this,na))<=Wge}get v(){return me(this,$f)}set v(e){const r=ms(e,"value");Ne(r===27||r===28,"invalid v","v",e),We(this,$f,r)}get networkV(){return me(this,_c)}get legacyChainId(){const e=this.networkV;return e==null?null:Ns.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=St(this.s);return this.yParity&&(e[0]|=128),yt(e)}get compactSerialized(){return mr([this.r,this.yParityAndS])}get serialized(){return mr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=ree-BigInt(this._s),r=55-this.v,i=new Ns(vu,this.r,mk(e),r);return this.networkV&&We(i,_c,this.networkV),i}clone(){const e=new Ns(vu,this.r,this._s,this.v);return this.networkV&&We(e,_c,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[qge](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const r=Mn(e,"v");return r==qL||r==HL?UL:(Ne(r>=av,"invalid EIP-155 v","v",e),(r-av)/SI)}static getChainIdV(e,r){return Mn(e)*SI+BigInt(35+r-27)}static getNormalizedV(e){const r=Mn(e);return r===UL||r===qL?27:r===WL||r===HL?28:(Ne(r>=av,"invalid v","v",e),r&WL?27:28)}static from(e){function r(u,h){Ne(u,h,"signature",e)}if(e==null)return new Ns(vu,zL,zL,27);if(typeof e=="string"){const u=St(e,"signature");if(u.length===64){const h=yt(u.slice(0,32)),d=u.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new Ns(vu,h,yt(d),f)}if(u.length===65){const h=yt(u.slice(0,32)),d=yt(u.slice(32,64)),f=Ns.getNormalizedV(u[64]);return new Ns(vu,h,d,f)}r(!1,"invalid raw signature length")}if(e instanceof Ns)return e.clone();const i=e.r;r(i!=null,"missing r");const s=mk(i),o=function(u,h){if(u!=null)return mk(u);if(h!=null){r(ma(h,32),"invalid yParityAndS");const d=St(h);return d[0]&=127,yt(d)}r(!1,"missing s")}(e.s,e.yParityAndS),{networkV:a,v:l}=function(u,h,d){if(u!=null){const f=Mn(u);return{networkV:f>=av?f:void 0,v:Ns.getNormalizedV(f)}}if(h!=null)return r(ma(h,32),"invalid yParityAndS"),{v:St(h)[0]&128?28:27};if(d!=null){switch(ms(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Ns(vu,s,o,l);return a&&We(c,_c,a),r(e.yParity==null||ms(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Ff=new WeakMap,na=new WeakMap,$f=new WeakMap,_c=new WeakMap;let Mo=Ns;var el;const qu=class qu{constructor(e){pt(this,el);Ne(Bg(e)===32,"invalid private key","privateKey","[REDACTED]"),We(this,el,yt(e))}get privateKey(){return me(this,el)}get publicKey(){return qu.computePublicKey(me(this,el))}get compressedPublicKey(){return qu.computePublicKey(me(this,el),!0)}sign(e){Ne(Bg(e)===32,"invalid digest length","digest",e);const r=sc.sign(zh(e),zh(me(this,el)),{lowS:!0});return Mo.from({r:mp(r.r,32),s:mp(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=qu.computePublicKey(e);return yt(sc.getSharedSecret(zh(me(this,el)),St(r),!1))}static computePublicKey(e,r){let i=St(e,"key");if(i.length===32){const o=sc.getPublicKey(i,!!r);return yt(o)}if(i.length===64){const o=new Uint8Array(65);o[0]=4,o.set(i,1),i=o}const s=sc.ProjectivePoint.fromHex(i);return yt(s.toRawBytes(r))}static recoverPublicKey(e,r){Ne(Bg(e)===32,"invalid digest length","digest",e);const i=Mo.from(r);let s=sc.Signature.fromCompact(zh(mr([i.r,i.s])));s=s.addRecoveryBit(i.yParity);const o=s.recoverPublicKey(zh(e));return Ne(o!=null,"invalid signature for digest","signature",r),"0x"+o.toHex(!1)}static addPoints(e,r,i){const s=sc.ProjectivePoint.fromHex(qu.computePublicKey(e).substring(2)),o=sc.ProjectivePoint.fromHex(qu.computePublicKey(r).substring(2));return"0x"+s.add(o).toHex(!!i)}};el=new WeakMap;let ha=qu;const Hge=BigInt(0),Vge=BigInt(36);function VL(n){n=n.toLowerCase();const e=n.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const i=St(Rr(r));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const IN={};for(let n=0;n<10;n++)IN[String(n)]=String(n);for(let n=0;n<26;n++)IN[String.fromCharCode(65+n)]=String(10+n);const YL=15;function Yge(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(i=>IN[i]).join("");for(;e.length>=YL;){let i=e.substring(0,YL);e=parseInt(i,10)%97+e.substring(i.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const Gge=function(){const n={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[r]=BigInt(e)}return n}();function Kge(n){n=n.toLowerCase();let e=Hge;for(let r=0;r<n.length;r++)e=e*Vge+Gge[n[r]];return e}function eo(n){if(Ne(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=VL(n);return Ne(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Ne(n.substring(2,4)===Yge(n),"bad icap checksum","address",n);let e=Kge(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return VL("0x"+e)}Ne(!1,"invalid address","address",n)}function Xge(n){return n&&typeof n.getAddress=="function"}async function gk(n,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&(sn(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Ne(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),eo(r)}function zg(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?eo(n):(sn(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),gk(n,e.resolveName(n)));if(Xge(n))return gk(n,n.getAddress());if(n&&typeof n.then=="function")return gk(n,n);Ne(!1,"unsupported addressable value","target",n)}function bk(n,e){return{address:eo(n),storageKeys:e.map((r,i)=>(Ne(ma(r,32),"invalid slot",`storageKeys[${i}]`,r),r.toLowerCase()))}}function e_(n){if(Array.isArray(n))return n.map((r,i)=>Array.isArray(r)?(Ne(r.length===2,"invalid slot set",`value[${i}]`,r),bk(r[0],r[1])):(Ne(r!=null&&typeof r=="object","invalid address-slot set","value",n),bk(r.address,r.storageKeys)));Ne(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(r=>{const i=n[r].reduce((s,o)=>(s[o]=!0,s),{});return bk(r,Object.keys(i).sort())});return e.sort((r,i)=>r.address.localeCompare(i.address)),e}function Qge(n){return{address:eo(n.address),nonce:Mn(n.nonce!=null?n.nonce:0),chainId:Mn(n.chainId!=null?n.chainId:0),signature:Mo.from(n.signature)}}function jb(n){let e;return typeof n=="string"?e=ha.computePublicKey(n,!1):e=n.publicKey,eo(Rr("0x"+e.substring(4)).substring(26))}function Jge(n,e){return jb(ha.recoverPublicKey(n,e))}const Ir=BigInt(0),Zge=BigInt(2),e0e=BigInt(27),t0e=BigInt(28),n0e=BigInt(35),r0e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),i0e=Symbol.for("nodejs.util.inspect.custom"),yk=4096*32,vx=128;function s0e(n){return{blobToKzgCommitment:i=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return St(n.blobToKzgCommitment(yt(i)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return St(n.blobToKzgCommitment(i));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return St(n.blobToKZGCommitment(yt(i)));Ne(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(i,s)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return St(n.computeBlobProof(yt(i),yt(s)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(i,s);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return St(n.computeBlobKZGProof(yt(i),yt(s)));Ne(!1,"unsupported KZG library","kzg",n)}}}function GL(n,e){let r=n.toString(16);for(;r.length<2;)r="0"+r;return r+=Zs(e).substring(4),"0x"+r}function Qp(n){return n==="0x"?null:eo(n)}function t_(n,e){try{return e_(n)}catch(r){Ne(!1,r.message,e,n)}}function o0e(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!Array.isArray(s))throw new Error(`authorization[${i}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${i}]: wrong length`);if(!s[1])throw new Error(`authorization[${i}]: null address`);r.push({address:Qp(s[1]),nonce:wn(s[2],"nonce"),chainId:wn(s[0],"chainId"),signature:Mo.from({yParity:Xd(s[3],"yParity"),r:Xc(s[4],32),s:Xc(s[5],32)})})}return r}catch(r){Ne(!1,r.message,e,n)}}function Xd(n,e){return n==="0x"?0:ms(n,e)}function wn(n,e){if(n==="0x")return Ir;const r=Mn(n,e);return Ne(r<=r0e,"value exceeds uint size",e,r),r}function en(n,e){const r=Mn(n,"value"),i=fr(r);return Ne(i.length<=32,"value too large",`tx.${e}`,r),i}function n_(n){return e_(n).map(e=>[e.address,e.storageKeys])}function a0e(n){return n.map(e=>[en(e.chainId,"chainId"),e.address,en(e.nonce,"nonce"),en(e.signature.yParity,"yParity"),fr(e.signature.r),fr(e.signature._s)])}function l0e(n,e){Ne(Array.isArray(n),`invalid ${e}`,"value",n);for(let r=0;r<n.length;r++)Ne(ma(n[r],32),"invalid ${ param } hash",`value[${r}]`,n[r]);return n}function c0e(n){const e=Ob(n);Ne(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const r={type:0,nonce:Xd(e[0],"nonce"),gasPrice:wn(e[1],"gasPrice"),gasLimit:wn(e[2],"gasLimit"),to:Qp(e[3]),value:wn(e[4],"value"),data:yt(e[5]),chainId:Ir};if(e.length===6)return r;const i=wn(e[6],"v"),s=wn(e[7],"r"),o=wn(e[8],"s");if(s===Ir&&o===Ir)r.chainId=i;else{let a=(i-n0e)/Zge;a<Ir&&(a=Ir),r.chainId=a,Ne(a!==Ir||i===e0e||i===t0e,"non-canonical legacy v","v",e[6]),r.signature=Mo.from({r:Xc(e[7],32),s:Xc(e[8],32),v:i})}return r}function u0e(n,e){const r=[en(n.nonce,"nonce"),en(n.gasPrice||0,"gasPrice"),en(n.gasLimit,"gasLimit"),n.to||"0x",en(n.value,"value"),n.data];let i=Ir;if(n.chainId!=Ir)i=Mn(n.chainId,"tx.chainId"),Ne(!e||e.networkV==null||e.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const o=n.signature.legacyChainId;o!=null&&(i=o)}if(!e)return i!==Ir&&(r.push(fr(i)),r.push("0x"),r.push("0x")),fl(r);let s=BigInt(27+e.yParity);return i!==Ir?s=Mo.getChainIdV(i,e.v):BigInt(e.v)!==s&&Ne(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(fr(s)),r.push(fr(e.r)),r.push(fr(e._s)),fl(r)}function r_(n,e){let r;try{if(r=Xd(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{Ne(!1,"invalid yParity","yParity",e[0])}const i=Xc(e[1],32),s=Xc(e[2],32),o=Mo.from({r:i,s,yParity:r});n.signature=o}function d0e(n){const e=Ob(St(n).slice(1));Ne(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",yt(n));const r={type:2,chainId:wn(e[0],"chainId"),nonce:Xd(e[1],"nonce"),maxPriorityFeePerGas:wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wn(e[4],"gasLimit"),to:Qp(e[5]),value:wn(e[6],"value"),data:yt(e[7]),accessList:t_(e[8],"accessList")};return e.length===9||r_(r,e.slice(9)),r}function h0e(n,e){const r=[en(n.chainId,"chainId"),en(n.nonce,"nonce"),en(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),en(n.maxFeePerGas||0,"maxFeePerGas"),en(n.gasLimit,"gasLimit"),n.to||"0x",en(n.value,"value"),n.data,n_(n.accessList||[])];return e&&(r.push(en(e.yParity,"yParity")),r.push(fr(e.r)),r.push(fr(e.s))),mr(["0x02",fl(r)])}function f0e(n){const e=Ob(St(n).slice(1));Ne(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",yt(n));const r={type:1,chainId:wn(e[0],"chainId"),nonce:Xd(e[1],"nonce"),gasPrice:wn(e[2],"gasPrice"),gasLimit:wn(e[3],"gasLimit"),to:Qp(e[4]),value:wn(e[5],"value"),data:yt(e[6]),accessList:t_(e[7],"accessList")};return e.length===8||r_(r,e.slice(8)),r}function p0e(n,e){const r=[en(n.chainId,"chainId"),en(n.nonce,"nonce"),en(n.gasPrice||0,"gasPrice"),en(n.gasLimit,"gasLimit"),n.to||"0x",en(n.value,"value"),n.data,n_(n.accessList||[])];return e&&(r.push(en(e.yParity,"recoveryParam")),r.push(fr(e.r)),r.push(fr(e.s))),mr(["0x01",fl(r)])}function m0e(n){let e=Ob(St(n).slice(1)),r="3",i=null,s=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const a=e[1],l=e[2],c=e[3];Ne(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),Ne(Array.isArray(l),"invalid network format: commitments not an array","fields[2]",l),Ne(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),Ne(a.length===l.length,"invalid network format: blobs/commitments length mismatch","fields",e),Ne(a.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<e[1].length;u++)s.push({data:a[u],commitment:l[u],proof:c[u]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){r="3 (EIP-7594 network format)",i=ms(e[1]);const a=e[2],l=e[3],c=e[4];Ne(i===1,`unsupported EIP-7594 network format version: ${i}`,"fields[1]",i),Ne(Array.isArray(a),"invalid EIP-7594 network format: blobs not an array","fields[2]",a),Ne(Array.isArray(l),"invalid EIP-7594 network format: commitments not an array","fields[3]",l),Ne(Array.isArray(c),"invalid EIP-7594 network format: proofs not an array","fields[4]",c),Ne(a.length===l.length,"invalid network format: blobs/commitments length mismatch","fields",e),Ne(a.length*vx===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<a.length;u++){const h=[];for(let d=0;d<vx;d++)h.push(c[u*vx+d]);s.push({data:a[u],commitment:l[u],proof:mr(h)})}e=e[0]}Ne(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",yt(n));const o={type:3,chainId:wn(e[0],"chainId"),nonce:Xd(e[1],"nonce"),maxPriorityFeePerGas:wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wn(e[4],"gasLimit"),to:Qp(e[5]),value:wn(e[6],"value"),data:yt(e[7]),accessList:t_(e[8],"accessList"),maxFeePerBlobGas:wn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:i};s&&(o.blobs=s),Ne(o.to!=null,`invalid address for transaction type: ${r}`,"data",n),Ne(Array.isArray(o.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let a=0;a<o.blobVersionedHashes.length;a++)Ne(ma(o.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",n);return e.length===11||r_(o,e.slice(11)),o}function g0e(n,e,r){const i=[en(n.chainId,"chainId"),en(n.nonce,"nonce"),en(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),en(n.maxFeePerGas||0,"maxFeePerGas"),en(n.gasLimit,"gasLimit"),n.to||nee,en(n.value,"value"),n.data,n_(n.accessList||[]),en(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),l0e(n.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(i.push(en(e.yParity,"yParity")),i.push(fr(e.r)),i.push(fr(e.s)),r)){if(n.blobWrapperVersion!=null){const s=fr(n.blobWrapperVersion),o=[];for(const{proof:a}of r){const l=St(a),c=l.length/vx;for(let u=0;u<l.length;u+=c)o.push(l.subarray(u,u+c))}return mr(["0x03",fl([i,s,r.map(a=>a.data),r.map(a=>a.commitment),o])])}return mr(["0x03",fl([i,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])])}return mr(["0x03",fl(i)])}function b0e(n){const e=Ob(St(n).slice(1));Ne(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",yt(n));const r={type:4,chainId:wn(e[0],"chainId"),nonce:Xd(e[1],"nonce"),maxPriorityFeePerGas:wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:wn(e[4],"gasLimit"),to:Qp(e[5]),value:wn(e[6],"value"),data:yt(e[7]),accessList:t_(e[8],"accessList"),authorizationList:o0e(e[9],"authorizationList")};return e.length===10||r_(r,e.slice(10)),r}function y0e(n,e){const r=[en(n.chainId,"chainId"),en(n.nonce,"nonce"),en(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),en(n.maxFeePerGas||0,"maxFeePerGas"),en(n.gasLimit,"gasLimit"),n.to||"0x",en(n.value,"value"),n.data,n_(n.accessList||[]),a0e(n.authorizationList||[])];return e&&(r.push(en(e.yParity,"yParity")),r.push(fr(e.r)),r.push(fr(e.s))),mr(["0x04",fl(r)])}var bo,Bf,zf,Uf,Wf,qf,Hf,Vf,Yf,Gf,Kf,Xf,cd,Sc,ra,kc,Qf,Jf,Zf,xx;const Xo=class Xo{constructor(){pt(this,Zf);pt(this,bo);pt(this,Bf);pt(this,zf);pt(this,Uf);pt(this,Wf);pt(this,qf);pt(this,Hf);pt(this,Vf);pt(this,Yf);pt(this,Gf);pt(this,Kf);pt(this,Xf);pt(this,cd);pt(this,Sc);pt(this,ra);pt(this,kc);pt(this,Qf);pt(this,Jf);We(this,bo,null),We(this,Bf,null),We(this,Uf,0),We(this,Wf,Ir),We(this,qf,null),We(this,Hf,null),We(this,Vf,null),We(this,zf,"0x"),We(this,Yf,Ir),We(this,Gf,Ir),We(this,Kf,null),We(this,Xf,null),We(this,cd,null),We(this,Sc,null),We(this,ra,null),We(this,kc,null),We(this,Qf,null),We(this,Jf,null)}get type(){return me(this,bo)}set type(e){switch(e){case null:We(this,bo,null);break;case 0:case"legacy":We(this,bo,0);break;case 1:case"berlin":case"eip-2930":We(this,bo,1);break;case 2:case"london":case"eip-1559":We(this,bo,2);break;case 3:case"cancun":case"eip-4844":We(this,bo,3);break;case 4:case"pectra":case"eip-7702":We(this,bo,4);break;default:Ne(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=me(this,Bf);return e==null&&this.type===3?nee:e}set to(e){We(this,Bf,e==null?null:eo(e))}get nonce(){return me(this,Uf)}set nonce(e){We(this,Uf,ms(e,"value"))}get gasLimit(){return me(this,Wf)}set gasLimit(e){We(this,Wf,Mn(e))}get gasPrice(){const e=me(this,qf);return e==null&&(this.type===0||this.type===1)?Ir:e}set gasPrice(e){We(this,qf,e==null?null:Mn(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=me(this,Hf);return e??(this.type===2||this.type===3?Ir:null)}set maxPriorityFeePerGas(e){We(this,Hf,e==null?null:Mn(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=me(this,Vf);return e??(this.type===2||this.type===3?Ir:null)}set maxFeePerGas(e){We(this,Vf,e==null?null:Mn(e,"maxFeePerGas"))}get data(){return me(this,zf)}set data(e){We(this,zf,yt(e))}get value(){return me(this,Yf)}set value(e){We(this,Yf,Mn(e,"value"))}get chainId(){return me(this,Gf)}set chainId(e){We(this,Gf,Mn(e))}get signature(){return me(this,Kf)||null}set signature(e){We(this,Kf,e==null?null:Mo.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const r=this.authorizationList;if(r){for(const i of r)if(!i.signature.isValid())return!1}return!0}get accessList(){const e=me(this,Xf)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){We(this,Xf,e==null?null:e_(e))}get authorizationList(){const e=me(this,Qf)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){We(this,Qf,e==null?null:e.map(r=>Qge(r)))}get maxFeePerBlobGas(){const e=me(this,cd);return e==null&&this.type===3?Ir:e}set maxFeePerBlobGas(e){We(this,cd,e==null?null:Mn(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=me(this,Sc);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Ne(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)Ne(ma(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}We(this,Sc,e)}get blobs(){return me(this,kc)==null?null:me(this,kc).map(e=>Object.assign({},e))}set blobs(e){if(e==null){We(this,kc,null);return}const r=[],i=[];for(let s=0;s<e.length;s++){const o=e[s];if(G1(o)){sn(me(this,ra),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=St(o);if(Ne(a.length<=yk,"blob is too large",`blobs[${s}]`,o),a.length!==yk){const u=new Uint8Array(yk);u.set(a),a=u}const l=me(this,ra).blobToKzgCommitment(a),c=yt(me(this,ra).computeBlobKzgProof(a,l));r.push({data:yt(a),commitment:yt(l),proof:c}),i.push(GL(1,l))}else{const a=yt(o.data),l=yt(o.commitment),c=yt(o.proof);r.push({data:a,commitment:l,proof:c}),i.push(GL(1,l))}}We(this,kc,r),We(this,Sc,i)}get kzg(){return me(this,ra)}set kzg(e){e==null?We(this,ra,null):We(this,ra,s0e(e))}get blobWrapperVersion(){return me(this,Jf)}set blobWrapperVersion(e){We(this,Jf,e)}get hash(){return this.signature==null?null:Rr(Qt(this,Zf,xx).call(this,!0,!1))}get unsignedHash(){return Rr(this.unsignedSerialized)}get from(){return this.signature==null?null:Jge(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:ha.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return Qt(this,Zf,xx).call(this,!0,!0)}get unsignedSerialized(){return Qt(this,Zf,xx).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,i=this.accessList!=null,s=me(this,cd)!=null||me(this,Sc);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&sn(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),sn(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),sn(this.type!==0||!i,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):r?o.push(2):e?(o.push(1),i||o.push(0)):i?(o.push(1),o.push(2)):(s&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Xo.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[i0e](){return this.toString()}toString(){const e=[],r=s=>{let o=this[s];typeof o=="string"&&(o=JSON.stringify(o)),e.push(`${s}: ${o}`)};this.type&&r("type"),r("to"),r("data"),r("nonce"),r("gasLimit"),r("value"),this.chainId!=null&&r("chainId"),this.signature&&(r("from"),e.push(`signature: ${this.signature.toString()}`));const i=this.authorizationList;if(i){const s=[];for(const o of i){const a=[];a.push(`address: ${JSON.stringify(o.address)}`),o.nonce!=null&&a.push(`nonce: ${o.nonce}`),o.chainId!=null&&a.push(`chainId: ${o.chainId}`),o.signature&&a.push(`signature: ${o.signature.toString()}`),s.push(`Authorization { ${a.join(", ")} }`)}e.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Xo;if(typeof e=="string"){const i=St(e);if(i[0]>=127)return Xo.from(c0e(i));switch(i[0]){case 1:return Xo.from(f0e(i));case 2:return Xo.from(d0e(i));case 3:return Xo.from(m0e(i));case 4:return Xo.from(b0e(i))}sn(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new Xo;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Mo.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.authorizationList!=null&&(r.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobWrapperVersion!=null&&(r.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(Ne(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Ne(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Ne(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Ne(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}};bo=new WeakMap,Bf=new WeakMap,zf=new WeakMap,Uf=new WeakMap,Wf=new WeakMap,qf=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,Yf=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Xf=new WeakMap,cd=new WeakMap,Sc=new WeakMap,ra=new WeakMap,kc=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Zf=new WeakSet,xx=function(e,r){sn(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const i=e?this.signature:null;switch(this.inferType()){case 0:return u0e(this,i);case 1:return p0e(this,i);case 2:return h0e(this,i);case 3:return g0e(this,i,r?this.blobs:null);case 4:return y0e(this,i)}sn(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let yw=Xo;function v0e(n){return Ne(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),Rr(mr(["0x05",fl([n.chainId!=null?fr(n.chainId):"0x",eo(n.address),n.nonce!=null?fr(n.nonce):"0x"])]))}function AN(n){return Rr(pd(n))}function x0e(n){return typeof n=="string"&&(n=pd(n)),Rr(mr([pd(Uge),pd(String(n.length)),n]))}const iee=new Uint8Array(32);iee.fill(0);const w0e=BigInt(-1),see=BigInt(0),oee=BigInt(1),_0e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function S0e(n){const e=St(n),r=e.length%32;return r?mr([e,iee.slice(r)]):yt(e)}const k0e=mp(oee,32),C0e=mp(see,32),KL={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},vk=["name","version","chainId","verifyingContract","salt"];function XL(n){return function(e){return Ne(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const E0e={name:XL("name"),version:XL("version"),chainId:function(n){const e=Mn(n,"domain.chainId");return Ne(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):eme(e)},verifyingContract:function(n){try{return eo(n).toLowerCase()}catch{}Ne(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=St(n,"domain.salt");return Ne(e.length===32,'invalid domain value "salt"',"domain.salt",n),yt(e)}};function xk(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",i=parseInt(e[2]);Ne(i%8===0&&i!==0&&i<=256&&e[2]===String(i),"invalid numeric width","type",n);const s=Zpe(_0e,r?i-1:i),o=r?(s+oee)*w0e:see;return function(a){const l=Mn(a,"value");return Ne(l>=o&&l<=s,`value out-of-bounds for ${n}`,"value",l),mp(r?Jpe(l,256):l,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return Ne(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",n),function(i){const s=St(i);return Ne(s.length===r,`invalid length for ${n}`,"value",i),S0e(i)}}}switch(n){case"address":return function(e){return Xc(eo(e),32)};case"bool":return function(e){return e?k0e:C0e};case"bytes":return function(e){return Rr(e)};case"string":return function(e){return AN(e)}}return null}function QL(n,e){return`${n}(${e.map(({name:r,type:i})=>i+" "+r).join(",")})`}function lv(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var xb,tl,ep,S1,aee;const js=class js{constructor(e){pt(this,S1);Be(this,"primaryType");pt(this,xb);pt(this,tl);pt(this,ep);We(this,tl,new Map),We(this,ep,new Map);const r=new Map,i=new Map,s=new Map,o={};Object.keys(e).forEach(c=>{o[c]=e[c].map(({name:u,type:h})=>{let{base:d,index:f}=lv(h);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:u,type:d+(f||"")}}),r.set(c,new Set),i.set(c,[]),s.set(c,new Set)}),We(this,xb,JSON.stringify(o));for(const c in o){const u=new Set;for(const h of o[c]){Ne(!u.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",e),u.add(h.name);const d=lv(h.type).base;Ne(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!xk(d)&&(Ne(i.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),i.get(d).push(c),r.get(c).add(d))}}const a=Array.from(i.keys()).filter(c=>i.get(c).length===0);Ne(a.length!==0,"missing primary type","types",e),Ne(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),ps(this,{primaryType:a[0]});function l(c,u){Ne(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const h of r.get(c))if(i.has(h)){l(h,u);for(const d of u)s.get(d).add(h)}u.delete(c)}l(this.primaryType,new Set);for(const[c,u]of s){const h=Array.from(u);h.sort(),me(this,tl).set(c,QL(c,o[c])+h.map(d=>QL(d,o[d])).join(""))}}get types(){return JSON.parse(me(this,xb))}getEncoder(e){let r=me(this,ep).get(e);return r||(r=Qt(this,S1,aee).call(this,e),me(this,ep).set(e,r)),r}encodeType(e){const r=me(this,tl).get(e);return Ne(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Rr(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,i){if(xk(e))return i(e,r);const s=lv(e).array;if(s)return Ne(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(a=>this._visit(s.prefix,a,i));const o=this.types[e];if(o)return o.reduce((a,{name:l,type:c})=>(a[l]=this._visit(c,r[l],i),a),{});Ne(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new js(e)}static getPrimaryType(e){return js.from(e).primaryType}static hashStruct(e,r,i){return js.from(r).hashStruct(e,i)}static hashDomain(e){const r=[];for(const i in e){if(e[i]==null)continue;const s=KL[i];Ne(s,`invalid typed-data domain key: ${JSON.stringify(i)}`,"domain",e),r.push({name:i,type:s})}return r.sort((i,s)=>vk.indexOf(i.name)-vk.indexOf(s.name)),js.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,i){return mr(["0x1901",js.hashDomain(e),js.from(r).hash(i)])}static hash(e,r,i){return Rr(js.encode(e,r,i))}static async resolveNames(e,r,i,s){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const o={};e.verifyingContract&&!ma(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const a=js.from(r);a.visit(i,(l,c)=>(l==="address"&&!ma(c,20)&&(o[c]="0x"),c));for(const l in o)o[l]=await s(l);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),i=a.visit(i,(l,c)=>l==="address"&&o[c]?o[c]:c),{domain:e,value:i}}static getPayload(e,r,i){js.hashDomain(e);const s={},o=[];vk.forEach(c=>{const u=e[c];u!=null&&(s[c]=E0e[c](u),o.push({name:c,type:KL[c]}))});const a=js.from(r);r=a.types;const l=Object.assign({},r);return Ne(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),l.EIP712Domain=o,a.encode(i),{types:l,domain:s,primaryType:a.primaryType,message:a.visit(i,(c,u)=>{if(c.match(/^bytes(\d*)/))return yt(St(u));if(c.match(/^u?int/))return Mn(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return Ne(typeof u=="string","invalid string","value",u),u}Ne(!1,"unsupported type","type",c)})}}};xb=new WeakMap,tl=new WeakMap,ep=new WeakMap,S1=new WeakSet,aee=function(e){{const s=xk(e);if(s)return s}const r=lv(e).array;if(r){const s=r.prefix,o=this.getEncoder(s);return a=>{Ne(r.count===-1||r.count===a.length,`array length mismatch; expected length ${r.count}`,"value",a);let l=a.map(o);return me(this,tl).has(s)&&(l=l.map(Rr)),Rr(mr(l))}}const i=this.types[e];if(i){const s=AN(me(this,tl).get(e));return o=>{const a=i.map(({name:l,type:c})=>{const u=this.getEncoder(c)(o[l]);return me(this,tl).has(c)?Rr(u):u});return a.unshift(s),mr(a)}}Ne(!1,`unknown type: ${e}`,"type",e)};let vw=js;BigInt(0);function lee(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=yt(n.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in n)||n[s]==null||(e[s]=Mn(n[s],`request.${s}`));const i="type,nonce".split(/,/);for(const s of i)!(s in n)||n[s]==null||(e[s]=ms(n[s],`request.${s}`));return n.accessList&&(e.accessList=e_(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobWrapperVersion"in n&&(e.blobWrapperVersion=n.blobWrapperVersion),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>G1(s)?yt(s):Object.assign({},s))),e}function xu(n,e){if(n.provider)return n.provider;sn(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function JL(n,e){let r=lee(e);if(r.to!=null&&(r.to=zg(r.to,n)),r.from!=null){const i=r.from;r.from=Promise.all([n.getAddress(),zg(i,n)]).then(([s,o])=>(Ne(s.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),s))}else r.from=n.getAddress();return await bN(r)}class cee{constructor(e){Be(this,"provider");ps(this,{provider:e||null})}async getNonce(e){return xu(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await JL(this,e)}async populateTransaction(e){const r=xu(this,"populateTransaction"),i=await JL(this,e);i.nonce==null&&(i.nonce=await this.getNonce("pending")),i.gasLimit==null&&(i.gasLimit=await this.estimateGas(i));const s=await this.provider.getNetwork();if(i.chainId!=null){const a=Mn(i.chainId);Ne(a===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else i.chainId=s.chainId;const o=i.maxFeePerGas!=null||i.maxPriorityFeePerGas!=null;if(i.gasPrice!=null&&(i.type===2||o)?Ne(!1,"eip-1559 transaction do not support gasPrice","tx",e):(i.type===0||i.type===1)&&o&&Ne(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(i.type===2||i.type==null)&&i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)i.type=2;else if(i.type===0||i.type===1){const a=await r.getFeeData();sn(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),i.gasPrice==null&&(i.gasPrice=a.gasPrice)}else{const a=await r.getFeeData();if(i.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(i.authorizationList&&i.authorizationList.length?i.type=4:i.type=2,i.gasPrice!=null){const l=i.gasPrice;delete i.gasPrice,i.maxFeePerGas=l,i.maxPriorityFeePerGas=l}else i.maxFeePerGas==null&&(i.maxFeePerGas=a.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(sn(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),i.gasPrice==null&&(i.gasPrice=a.gasPrice),i.type=0):sn(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(i.type===2||i.type===3||i.type===4)&&(i.maxFeePerGas==null&&(i.maxFeePerGas=a.maxFeePerGas),i.maxPriorityFeePerGas==null&&(i.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await bN(i)}async populateAuthorization(e){const r=Object.assign({},e);return r.chainId==null&&(r.chainId=(await xu(this,"getNetwork").getNetwork()).chainId),r.nonce==null&&(r.nonce=await this.getNonce()),r}async estimateGas(e){return xu(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return xu(this,"call").call(await this.populateCall(e))}async resolveName(e){return await xu(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=xu(this,"sendTransaction"),i=await this.populateTransaction(e);delete i.from;const s=yw.from(i);return await r.broadcastTransaction(await this.signTransaction(s))}authorize(e){sn(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var tp,wx;const cj=class cj extends cee{constructor(r,i){super(i);pt(this,tp);Be(this,"address");ps(this,{address:r})}async getAddress(){return this.address}connect(r){return new cj(this.address,r)}async signTransaction(r){Qt(this,tp,wx).call(this,"transactions","signTransaction")}async signMessage(r){Qt(this,tp,wx).call(this,"messages","signMessage")}async signTypedData(r,i,s){Qt(this,tp,wx).call(this,"typed-data","signTypedData")}};tp=new WeakSet,wx=function(r,i){sn(!1,`VoidSigner cannot sign ${r}`,"UNSUPPORTED_OPERATION",{operation:i})};let kI=cj;var np;const uj=class uj extends cee{constructor(r,i){super(i);Be(this,"address");pt(this,np);Ne(r&&typeof r.sign=="function","invalid private key","privateKey","[ REDACTED ]"),We(this,np,r);const s=jb(this.signingKey.publicKey);ps(this,{address:s})}get signingKey(){return me(this,np)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(r){return new uj(me(this,np),r)}async signTransaction(r){r=lee(r);const{to:i,from:s}=await bN({to:r.to?zg(r.to,this):void 0,from:r.from?zg(r.from,this):void 0});i!=null&&(r.to=i),s!=null&&(r.from=s),r.from!=null&&(Ne(eo(r.from)===this.address,"transaction from address mismatch","tx.from",r.from),delete r.from);const o=yw.from(r);return o.signature=this.signingKey.sign(o.unsignedHash),o.serialized}async signMessage(r){return this.signMessageSync(r)}signMessageSync(r){return this.signingKey.sign(x0e(r)).serialized}authorizeSync(r){Ne(typeof r.address=="string","invalid address for authorizeSync","auth.address",r);const i=this.signingKey.sign(v0e(r));return Object.assign({},{address:eo(r.address),nonce:Mn(r.nonce||0),chainId:Mn(r.chainId||0)},{signature:i})}async authorize(r){return r=Object.assign({},r,{address:await zg(r.address,this)}),this.authorizeSync(await this.populateAuthorization(r))}async signTypedData(r,i,s){const o=await vw.resolveNames(r,i,s,async a=>{sn(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:a}});const l=await this.provider.resolveName(a);return sn(l!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:a}),l});return this.signingKey.sign(vw.hash(o.domain,i,o.value)).serialized}};np=new WeakMap;let CI=uj;const xw=" !#$%&'()*+,-./<=>?@[]^_`{|}~",T0e=/^[a-z]*$/i;function ZL(n,e){let r=97;return n.reduce((i,s)=>(s===e?r++:s.match(T0e)?i.push(String.fromCharCode(r)+s):(r=97,i.push(s)),i),[])}function P0e(n,e){for(let s=xw.length-1;s>=0;s--)n=n.split(xw[s]).join(e.substring(2*s,2*s+2));const r=[],i=n.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(s,o,a,l)=>{if(a)for(let c=parseInt(a);c>=0;c--)r.push(";");else r.push(o.toLowerCase());return""});if(i)throw new Error(`leftovers: ${JSON.stringify(i)}`);return ZL(ZL(r,";"),":")}function M0e(n){return Ne(n[0]==="0","unsupported auwl data","data",n),P0e(n.substring(1+2*xw.length),n.substring(1,1+2*xw.length))}class D0e{constructor(e){Be(this,"locale");ps(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var rp,wb,ud,_b,EI;class O0e extends D0e{constructor(r,i,s){super(r);pt(this,_b);pt(this,rp);pt(this,wb);pt(this,ud);We(this,rp,i),We(this,wb,s),We(this,ud,null)}get _data(){return me(this,rp)}_decodeWords(){return M0e(me(this,rp))}getWord(r){const i=Qt(this,_b,EI).call(this);return Ne(r>=0&&r<i.length,`invalid word index: ${r}`,"index",r),i[r]}getWordIndex(r){return Qt(this,_b,EI).call(this).indexOf(r)}}rp=new WeakMap,wb=new WeakMap,ud=new WeakMap,_b=new WeakSet,EI=function(){if(me(this,ud)==null){const r=this._decodeWords();if(AN(r.join(`
`)+`
`)!==me(this,wb))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);We(this,ud,r)}return me(this,ud)};const I0e="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",A0e="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let wk=null;class Od extends O0e{constructor(){super("en",I0e,A0e)}static wordlist(){return wk==null&&(wk=new Od),wk}}function uee(n){return(1<<n)-1<<8-n&255}function R0e(n){return(1<<n)-1&255}function _k(n,e){tZ("NFKD"),e==null&&(e=Od.wordlist());const r=e.split(n);Ne(r.length%3===0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const i=new Uint8Array(Math.ceil(11*r.length/8));let s=0;for(let u=0;u<r.length;u++){let h=e.getWordIndex(r[u].normalize("NFKD"));Ne(h>=0,`invalid mnemonic word at index ${u}`,"mnemonic","[ REDACTED ]");for(let d=0;d<11;d++)h&1<<10-d&&(i[s>>3]|=1<<7-s%8),s++}const o=32*r.length/3,a=r.length/3,l=uee(a),c=St(Zs(i.slice(0,o/8)))[0]&l;return Ne(c===(i[i.length-1]&l),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),yt(i.slice(0,o/8))}function Sk(n,e){Ne(n.length%4===0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Od.wordlist());const r=[0];let i=11;for(let a=0;a<n.length;a++)i>8?(r[r.length-1]<<=8,r[r.length-1]|=n[a],i-=8):(r[r.length-1]<<=i,r[r.length-1]|=n[a]>>8-i,r.push(n[a]&R0e(8-i)),i+=3);const s=n.length/4,o=parseInt(Zs(n).substring(2,4),16)&uee(s);return r[r.length-1]<<=s,r[r.length-1]|=o>>8-s,e.join(r.map(a=>e.getWord(a)))}const kk={};class q0{constructor(e,r,i,s,o){Be(this,"phrase");Be(this,"password");Be(this,"wordlist");Be(this,"entropy");s==null&&(s=""),o==null&&(o=Od.wordlist()),Y1(e,kk,"Mnemonic"),ps(this,{phrase:i,password:s,wordlist:o,entropy:r})}computeSeed(){const e=pd("mnemonic"+this.password,"NFKD");return Ib(pd(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,r,i){const s=_k(e,i);return e=Sk(St(s),i),new q0(kk,s,e,r,i)}static fromEntropy(e,r,i){const s=St(e,"entropy"),o=Sk(s,i);return new q0(kk,yt(s),o,r,i)}static entropyToPhrase(e,r){const i=St(e,"entropy");return Sk(i,r)}static phraseToEntropy(e,r){return _k(e,r)}static isValidMnemonic(e,r){try{return _k(e,r),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Wr=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},Ck=function(n,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,r):s?s.value=r:e.set(n,r),r},_x,Os,Wo;const N0e={16:10,24:12,32:14},j0e=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Ts=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],cv=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],L0e=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],F0e=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],$0e=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],B0e=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],z0e=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],U0e=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],W0e=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],q0e=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],H0e=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],V0e=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Y0e=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],G0e=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Ek(n){const e=[];for(let r=0;r<n.length;r+=4)e.push(n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]);return e}class RN{get key(){return Wr(this,_x,"f").slice()}constructor(e){if(_x.set(this,void 0),Os.set(this,void 0),Wo.set(this,void 0),!(this instanceof RN))throw Error("AES must be instanitated with `new`");Ck(this,_x,new Uint8Array(e),"f");const r=N0e[this.key.length];if(r==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Ck(this,Wo,[],"f"),Ck(this,Os,[],"f");for(let h=0;h<=r;h++)Wr(this,Wo,"f").push([0,0,0,0]),Wr(this,Os,"f").push([0,0,0,0]);const i=(r+1)*4,s=this.key.length/4,o=Ek(this.key);let a;for(let h=0;h<s;h++)a=h>>2,Wr(this,Wo,"f")[a][h%4]=o[h],Wr(this,Os,"f")[r-a][h%4]=o[h];let l=0,c=s,u;for(;c<i;){if(u=o[s-1],o[0]^=Ts[u>>16&255]<<24^Ts[u>>8&255]<<16^Ts[u&255]<<8^Ts[u>>24&255]^j0e[l]<<24,l+=1,s!=8)for(let m=1;m<s;m++)o[m]^=o[m-1];else{for(let m=1;m<s/2;m++)o[m]^=o[m-1];u=o[s/2-1],o[s/2]^=Ts[u&255]^Ts[u>>8&255]<<8^Ts[u>>16&255]<<16^Ts[u>>24&255]<<24;for(let m=s/2+1;m<s;m++)o[m]^=o[m-1]}let h=0,d,f;for(;h<s&&c<i;)d=c>>2,f=c%4,Wr(this,Wo,"f")[d][f]=o[h],Wr(this,Os,"f")[r-d][f]=o[h++],c++}for(let h=1;h<r;h++)for(let d=0;d<4;d++)u=Wr(this,Os,"f")[h][d],Wr(this,Os,"f")[h][d]=H0e[u>>24&255]^V0e[u>>16&255]^Y0e[u>>8&255]^G0e[u&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const r=Wr(this,Wo,"f").length-1,i=[0,0,0,0];let s=Ek(e);for(let l=0;l<4;l++)s[l]^=Wr(this,Wo,"f")[0][l];for(let l=1;l<r;l++){for(let c=0;c<4;c++)i[c]=L0e[s[c]>>24&255]^F0e[s[(c+1)%4]>>16&255]^$0e[s[(c+2)%4]>>8&255]^B0e[s[(c+3)%4]&255]^Wr(this,Wo,"f")[l][c];s=i.slice()}const o=new Uint8Array(16);let a=0;for(let l=0;l<4;l++)a=Wr(this,Wo,"f")[r][l],o[4*l]=(Ts[s[l]>>24&255]^a>>24)&255,o[4*l+1]=(Ts[s[(l+1)%4]>>16&255]^a>>16)&255,o[4*l+2]=(Ts[s[(l+2)%4]>>8&255]^a>>8)&255,o[4*l+3]=(Ts[s[(l+3)%4]&255]^a)&255;return o}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const r=Wr(this,Os,"f").length-1,i=[0,0,0,0];let s=Ek(e);for(let l=0;l<4;l++)s[l]^=Wr(this,Os,"f")[0][l];for(let l=1;l<r;l++){for(let c=0;c<4;c++)i[c]=z0e[s[c]>>24&255]^U0e[s[(c+3)%4]>>16&255]^W0e[s[(c+2)%4]>>8&255]^q0e[s[(c+1)%4]&255]^Wr(this,Os,"f")[l][c];s=i.slice()}const o=new Uint8Array(16);let a=0;for(let l=0;l<4;l++)a=Wr(this,Os,"f")[r][l],o[4*l]=(cv[s[l]>>24&255]^a>>24)&255,o[4*l+1]=(cv[s[(l+3)%4]>>16&255]^a>>16)&255,o[4*l+2]=(cv[s[(l+2)%4]>>8&255]^a>>8)&255,o[4*l+3]=(cv[s[(l+1)%4]&255]^a)&255;return o}}_x=new WeakMap,Os=new WeakMap,Wo=new WeakMap;class K0e{constructor(e,r,i){if(i&&!(this instanceof i))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new RN(r)},name:{enumerable:!0,value:e}})}}var Sh=function(n,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(n,r):s?s.value=r:e.set(n,r),r},Ps=function(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)},mg,Au,Is;class ww extends K0e{constructor(e,r){super("CTR",e,ww),mg.set(this,void 0),Au.set(this,void 0),Is.set(this,void 0),Sh(this,Is,new Uint8Array(16),"f"),Ps(this,Is,"f").fill(0),Sh(this,mg,Ps(this,Is,"f"),"f"),Sh(this,Au,16,"f"),r==null&&(r=1),typeof r=="number"?this.setCounterValue(r):this.setCounterBytes(r)}get counter(){return new Uint8Array(Ps(this,Is,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let r=15;r>=0;--r)Ps(this,Is,"f")[r]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Ps(this,Is,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Ps(this,Is,"f")[e]===255)Ps(this,Is,"f")[e]=0;else{Ps(this,Is,"f")[e]++;break}}encrypt(e){var r,i;const s=new Uint8Array(e);for(let o=0;o<s.length;o++)Ps(this,Au,"f")===16&&(Sh(this,mg,this.aes.encrypt(Ps(this,Is,"f")),"f"),Sh(this,Au,0,"f"),this.increment()),s[o]^=Ps(this,mg,"f")[Sh(this,Au,(i=Ps(this,Au,"f"),r=i++,i),"f"),r];return s}decrypt(e){return this.encrypt(e)}}mg=new WeakMap,Au=new WeakMap,Is=new WeakMap;function Nm(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function dee(n){return typeof n=="string"?pd(n,"NFKC"):zh(n)}const X0e="m/44'/60'/0'/0/0";function hee(n){const e=n.salt!=null?St(n.salt,"options.salt"):pl(32);let r=1<<17,i=8,s=1;return n.scrypt&&(n.scrypt.N&&(r=n.scrypt.N),n.scrypt.r&&(i=n.scrypt.r),n.scrypt.p&&(s=n.scrypt.p)),Ne(typeof r=="number"&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),Ne(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt r parameter","options.r",i),Ne(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:r,r:i,p:s}}function fee(n,e,r,i){const s=St(r.privateKey,"privateKey"),o=i.iv!=null?St(i.iv,"options.iv"):pl(16);Ne(o.length===16,"invalid options.iv length","options.iv",i.iv);const a=i.uuid!=null?St(i.uuid,"options.uuid"):pl(16);Ne(a.length===16,"invalid options.uuid length","options.uuid",i.iv);const l=n.slice(0,16),c=n.slice(16,32),u=new ww(l,o),h=St(u.encrypt(s)),d=Rr(mr([c,h])),f={address:r.address.substring(2).toLowerCase(),id:ome(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:yt(o).substring(2)},ciphertext:yt(h).substring(2),kdf:"scrypt",kdfparams:{salt:yt(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:d.substring(2)}};if(r.mnemonic){const m=i.client!=null?i.client:`ethers/${eZ}`,g=r.mnemonic.path||X0e,b=r.mnemonic.locale||"en",y=n.slice(32,64),v=St(r.mnemonic.entropy,"account.mnemonic.entropy"),w=pl(16),k=new ww(y,w),S=St(k.encrypt(v)),_=new Date,P="UTC--"+(_.getUTCFullYear()+"-"+Nm(_.getUTCMonth()+1,2)+"-"+Nm(_.getUTCDate(),2)+"T"+Nm(_.getUTCHours(),2)+"-"+Nm(_.getUTCMinutes(),2)+"-"+Nm(_.getUTCSeconds(),2)+".0Z")+"--"+f.address;f["x-ethers"]={client:m,gethFilename:P,path:g,locale:b,mnemonicCounter:yt(w).substring(2),mnemonicCiphertext:yt(S).substring(2),version:"0.1"}}return JSON.stringify(f)}function Q0e(n,e,r){r==null&&(r={});const i=dee(e),s=hee(r),o=Rb(i,s.salt,s.N,s.r,s.p,64);return fee(St(o),s,n,r)}async function J0e(n,e,r){r==null&&(r={});const i=dee(e),s=hee(r),o=await Ab(i,s.salt,s.N,s.r,s.p,64,r.progressCallback);return fee(St(o),s,n,r)}const Tk="m/44'/60'/0'/0/0",Z0e=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),zc=2147483648,ebe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tbe="0123456789abcdef";function _w(n,e){let r="";for(;n;)r=tbe[n%16]+r,n=Math.trunc(n/16);for(;r.length<e*2;)r="0"+r;return"0x"+r}function TI(n){const e=St(n),r=yN(Zs(Zs(e)),0,4),i=mr([e,r]);return rme(i)}const Qo={};function pee(n,e,r,i){const s=new Uint8Array(37);n&zc?(sn(i!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(St(i),1)):s.set(St(r));for(let a=24;a>=0;a-=8)s[33+(a>>3)]=n>>24-a&255;const o=St(Kp("sha512",e,s));return{IL:o.slice(0,32),IR:o.slice(32)}}function mee(n,e){const r=e.split("/");Ne(r.length>0,"invalid path","path",e),r[0]==="m"&&(Ne(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),r.shift());let i=n;for(let s=0;s<r.length;s++){const o=r[s];if(o.match(/^[0-9]+'$/)){const a=parseInt(o.substring(0,o.length-1));Ne(a<zc,"invalid path index",`path[${s}]`,o),i=i.deriveChild(zc+a)}else if(o.match(/^[0-9]+$/)){const a=parseInt(o);Ne(a<zc,"invalid path index",`path[${s}]`,o),i=i.deriveChild(a)}else Ne(!1,"invalid path component",`path[${s}]`,o)}return i}var Sb,PI,dd,gg;const ho=class ho extends CI{constructor(r,i,s,o,a,l,c,u,h){super(i,h);pt(this,Sb);Be(this,"publicKey");Be(this,"fingerprint");Be(this,"parentFingerprint");Be(this,"mnemonic");Be(this,"chainCode");Be(this,"path");Be(this,"index");Be(this,"depth");Y1(r,Qo,"HDNodeWallet"),ps(this,{publicKey:i.compressedPublicKey});const d=yN(Xp(Zs(this.publicKey)),0,4);ps(this,{parentFingerprint:s,fingerprint:d,chainCode:o,path:a,index:l,depth:c}),ps(this,{mnemonic:u})}connect(r){return new ho(Qo,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,r)}async encrypt(r,i){return await J0e(Qt(this,Sb,PI).call(this),r,{progressCallback:i})}encryptSync(r){return Q0e(Qt(this,Sb,PI).call(this),r)}get extendedKey(){return sn(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),TI(mr(["0x0488ADE4",_w(this.depth,1),this.parentFingerprint,_w(this.index,4),this.chainCode,mr(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new H0(Qo,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(r){const i=ms(r,"index");Ne(i<=4294967295,"invalid index","index",i);let s=this.path;s&&(s+="/"+(i&~zc),i&zc&&(s+="'"));const{IR:o,IL:a}=pee(i,this.chainCode,this.publicKey,this.privateKey),l=new ha(mp((rZ(a)+BigInt(this.privateKey))%ebe,32));return new ho(Qo,l,this.fingerprint,yt(o),s,i,this.depth+1,this.mnemonic,this.provider)}derivePath(r){return mee(this,r)}static fromExtendedKey(r){const i=fr(ime(r));Ne(i.length===82||TI(i.slice(0,78))===r,"invalid extended key","extendedKey","[ REDACTED ]");const s=i[4],o=yt(i.slice(5,9)),a=parseInt(yt(i.slice(9,13)).substring(2),16),l=yt(i.slice(13,45)),c=i.slice(45,78);switch(yt(i.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const u=yt(c);return new H0(Qo,jb(u),u,o,l,null,a,s,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new ho(Qo,new ha(c.slice(1)),o,l,null,a,s,null,null)}Ne(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(r,i,s){var a;r==null&&(r=""),i==null&&(i=Tk),s==null&&(s=Od.wordlist());const o=q0.fromEntropy(pl(16),r,s);return Qt(a=ho,dd,gg).call(a,o.computeSeed(),o).derivePath(i)}static fromMnemonic(r,i){var s;return i||(i=Tk),Qt(s=ho,dd,gg).call(s,r.computeSeed(),r).derivePath(i)}static fromPhrase(r,i,s,o){var l;i==null&&(i=""),s==null&&(s=Tk),o==null&&(o=Od.wordlist());const a=q0.fromPhrase(r,i,o);return Qt(l=ho,dd,gg).call(l,a.computeSeed(),a).derivePath(s)}static fromSeed(r){var i;return Qt(i=ho,dd,gg).call(i,r,null)}};Sb=new WeakSet,PI=function(){const r={address:this.address,privateKey:this.privateKey},i=this.mnemonic;return this.path&&i&&i.wordlist.locale==="en"&&i.password===""&&(r.mnemonic={path:this.path,locale:"en",entropy:i.entropy}),r},dd=new WeakSet,gg=function(r,i){Ne(G1(r),"invalid seed","seed","[REDACTED]");const s=St(r,"seed");Ne(s.length>=16&&s.length<=64,"invalid seed","seed","[REDACTED]");const o=St(Kp("sha512",Z0e,s)),a=new ha(yt(o.slice(0,32)));return new ho(Qo,a,"0x00000000",yt(o.slice(32)),"m",0,0,i,null)},pt(ho,dd);let wp=ho;class H0 extends kI{constructor(r,i,s,o,a,l,c,u,h){super(i,h);Be(this,"publicKey");Be(this,"fingerprint");Be(this,"parentFingerprint");Be(this,"chainCode");Be(this,"path");Be(this,"index");Be(this,"depth");Y1(r,Qo,"HDNodeVoidWallet"),ps(this,{publicKey:s});const d=yN(Xp(Zs(s)),0,4);ps(this,{publicKey:s,fingerprint:d,parentFingerprint:o,chainCode:a,path:l,index:c,depth:u})}connect(r){return new H0(Qo,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,r)}get extendedKey(){return sn(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),TI(mr(["0x0488B21E",_w(this.depth,1),this.parentFingerprint,_w(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(r){const i=ms(r,"index");Ne(i<=4294967295,"invalid index","index",i);let s=this.path;s&&(s+="/"+(i&~zc),i&zc&&(s+="'"));const{IR:o,IL:a}=pee(i,this.chainCode,this.publicKey,null),l=ha.addPoints(a,this.publicKey,!0),c=jb(l);return new H0(Qo,c,l,this.fingerprint,yt(o),s,i,this.depth+1,this.provider)}derivePath(r){return mee(this,r)}}class eF{constructor(e){Be(this,"mnemonic");Be(this,"walletAddress");Be(this,"chainID");this.mnemonic=e.mnemonic,this.walletAddress=e.walletAddress,this.chainID=e.chainID||10900}generateTxID(){const e=Date.now(),r=Math.floor(Math.random()*1e6);return`tx-${e}-${r}`}async getPrivateKeyHex(){const e=wp.fromPhrase(this.mnemonic.trim(),"","m/44'/60'/0'/0/0");if(e.address.toLowerCase()!==this.walletAddress.toLowerCase())throw new Error(`Address mismatch: derived ${e.address} does not match ${this.walletAddress}`);const r=BigInt(e.privateKey),i=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(r===0n||r>=i)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const o=r.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(o))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return o}async signPayload(e){const r=await this.getPrivateKeyHex(),i=Math.floor(Date.now()/1e3);let s;e.deadline&&(s=parseInt(e.deadline,10));const o={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:i,payload:e};s!==void 0&&(o.deadline=s);const a=await At.generateSingleSignature(JSON.stringify(o),r,this.walletAddress.toLowerCase());if(!a.success||!a.signature)throw new Error(a.error||"Failed to generate signature");return a.signature}async buildCompleteMessage(e,r,i=3600){const o=Math.floor(Date.now()/1e3)+i,a=await r.getNextNonce();return{...e,owner:this.walletAddress,nonce:a,deadline:o.toString()}}buildEIP712Tx(e,r,i){const s=Math.floor(Date.now()/1e3);let o;e.deadline&&(o=parseInt(e.deadline,10));const l={txhash:i||this.generateTxID(),sigType:1,threshold:1,timestamp:s,payload:e,signatures:[{signer:this.walletAddress,signature:r}]};return o!==void 0&&(l.deadline=o),l}getWalletAddress(){return this.walletAddress}getChainID(){return this.chainID}}function sa(n,e=Date.now()){if(!n)return e;if(typeof n=="object"&&n!==null&&typeof n.seconds=="number"){const i=n.seconds,s=n.nanos||0;return i*1e3+Math.floor(s/1e6)}const r=typeof n=="string"?Number(n):n;return typeof r=="number"&&!isNaN(r)&&r>0?r<9466848e5?r*1e3:r:e}function Ya(n){if(!n)return Date.now();const e=typeof n=="string"?Number(n):n;return isNaN(e)||e<=0?Date.now():e<9466848e5?e*1e3:e}function tF(n){if(!n)return"";if(typeof n=="string")return n;if(typeof n=="object"&&"seconds"in n&&"nanos"in n){const e=n.seconds,r=n.nanos||0,i=e*1e3+Math.floor(r/1e6),o=new Date(i).toISOString();if(r>0){const a=r.toString().padStart(9,"0");return o.replace(/\.\d{3}Z$/,`.${a}Z`)}return o}return""}function Pk(n){const r=new Date().toISOString(),i=r.match(/\.(\d{3})Z$/);if(i){const o=(parseInt(i[1])*1e6).toString().padStart(9,"0");return r.replace(/\.\d{3}Z$/,`.${o}Z`)}return r.replace(/Z$/,".000000000Z")}const i_="sys::onboard",NN="clob::change_margin_ratio",jN="clob::submit_order",Sw="clob::cancel_order",kw="bucket::close_position",gee="bucket::update_position_leverage",LN="clob::modify_order",bee="clob::change_leverage",FN="clob::inter_transfer",yee="bucket::create_margin_bucket",$N="clob::swap",BN="bank::mint",zN="bank::extract_to_bucket",UN="bank::withdraw_from_bucket",WN="bank::bucket_transfer",qN="bank::transfer";var kt=(n=>(n.Disconnected="disconnected",n.Connecting="connecting",n.Connected="connected",n.Reconnecting="reconnecting",n))(kt||{});function vee(n){return n.sub_channel==="orderbook"}function xee(n){return n.sub_channel==="trades"}function wee(n){return n.sub_channel==="positions"}function _ee(n){return n.sub_channel==="orders"}function See(n){return n.sub_channel==="buckets"}function kee(n){return n.sub_channel==="balances"}function MI(n){return n.sub_channel==="last_price"}function Cee(n){return n.sub_channel==="price_feed"}const Jp="http://localhost:8080",nbe="300px",rbe="300px",ibe="270px",Eee="630px",HN=5e3,sbe="1",obe=100,Tee=20,s_="legal winner thank year wave sausage worth useful legal winner thank yellow",Mk=1,nF=100,abe=1,uv=0,Dk=100,Ok=1,lbe=.01,rF=0,cbe="BINANCE:BTCUSDT",ube="5",dbe="https://s3.tradingview.com/tv.js",za=2,Pee=2,Tc="asc",xf="desc",DI="market",Ik="limit",V0="CROSS",hbe="ISOLATED",fbe="ONE_WAY",Y0="LONG",OI="SHORT",iF="symbol",sF="leverage",oF="size",aF="liquidationPrice",lF="unrealizedPnL",cF="entryPrice",uF="margin",Ak="all",dv="byBucket",dF="1.5fr 1.2fr 1fr 1fr 1fr 1.2fr 1.2fr 1fr",pbe="#51cf66",mbe="#ff6b6b",gbe="Loading positions...",bbe="No open positions",ybe="POSITIONS",vbe="All",xbe="By Bucket",Rk="--",hF="symbol",fF="side",pF="quantity",mF="price",gF="filledQuantity",bF="status",Gl="pending",yF="history",wbe="ORDER_STATUS_PENDING",_be="ORDER_STATUS_OPEN",Sbe="ORDER_STATUS_PARTIAL",kbe="PARTIALLY_FILLED",vF=[wbe,_be,Sbe,"PENDING","OPEN","NEW","PARTIAL",kbe],xF="#ffc107",Cbe="#17a2b8",Ebe="#28a745",Tbe="#dc3545",Pbe="#6c757d",Mbe="#51cf66",Dbe="#ff6b6b",wF="1.5fr 1fr 1fr 1.2fr 1.2fr 1.2fr 1fr 1fr",Obe="Loading pending orders...",Ibe="No pending orders",Abe="No historical orders",Rbe="OPEN ORDERS",Nbe="ORDER HISTORY",jbe="Wallet address required to view pending orders",Lbe="Pending",Fbe="History",$be="--",Bbe="Unknown";function II(n){return!n||!Array.isArray(n)||n.length===0?[]:[...n].sort((r,i)=>{const s=Ya(r.timestamp);return Ya(i.timestamp)-s}).map(r=>{const i=Ya(r.timestamp),s=Dt(r.quantity),o=Dt(r.price);return{time:i,size:s,price:o,is_buyer_maker:!1}})}function AI(n){let e;"position_id"in n&&n.position_id||"position_id"in n&&n.position_id?e=n.position_id:e=`${n.market_id}-${n.bucket_id||"default"}-${n.address}`;const r="average_entry_price"in n?n.average_entry_price:n.entry_price;let i;"position_side"in n&&n.position_side?i=n.position_side:"side"in n&&n.side?i=n.side==="SIDE_BUY"||n.side.toUpperCase().includes("BUY")?Y0:OI:i=Dt(n.size)>=0?Y0:OI;const s=Dt(n.size),o=Dt(r),a=Dt(n.mark_price),l=n.leverage?Dt(n.leverage):0;let c=0;if(n.unrealized_profit!==void 0||n.unrealized_loss!==void 0){const f=gw(n.unrealized_profit),m=gw(n.unrealized_loss),g=f-m;c=Dt(g.toString())}else"unrealized_pnl"in n&&n.unrealized_pnl!==void 0&&(c=Dt(n.unrealized_pnl));const h=Dt(n.margin_balance)||(l&&o&&s!==0?Math.abs(Math.abs(s)*o/l):0),d="margin_mode"in n&&n.margin_mode||"margin_type"in n&&n.margin_type||V0;return{positionId:e,marketId:n.market_id.toString(),symbol:n.symbol||`m-${n.market_id}`,size:Math.abs(s),entryPrice:o,markPrice:a,liquidationPrice:n.liquidation_price?Dt(n.liquidation_price):0,unrealizedPnL:c,leverage:l,margin:h,side:i,marginMode:d,bucketId:n.bucket_id?String(n.bucket_id):"",raw:n}}function RI(n){const e=n.side==="SIDE_BUY"?"BUY":"SELL";let r=n.status||"ORDER_STATUS_PENDING";r.includes("ORDER_STATUS_")&&(r=r.replace("ORDER_STATUS_",""));const i=n.time_in_force;let s=i;i&&i.includes("TIME_IN_FORCE_")&&(s=i.replace("TIME_IN_FORCE_",""));const o=d=>Dt(d),a=o(n.quantity),l=o(n.price),c=o(n.filled_quantity),u=a-c,h=sa(n.timestamp,Date.now());return{id:n.order_id,orderId:n.order_id,marketId:n.market_id||n.bucket_id,side:e,type:n.type,quantity:a,price:l,filledQuantity:c,remainingQuantity:u,status:r,timeInForce:s,createdAt:h,updatedAt:h,raw:n}}function VN(n){const e=new Date().toISOString();return{bucket_id:n.bucket_id,address:n.address,margin_type:n.margin_type.toLowerCase(),collateral_asset:"USDC",deposited_margin:"0",total_equity:n.total_equity,available_margin:n.available_margin,used_margin:n.used_margin,unrealized_profit:n.unrealized_profit,unrealized_loss:n.unrealized_loss,realized_profit:"0",realized_loss:"0",margin_ratio:"0",imr:"0",total_notional_value:"0",risk_level:"low",max_leverage:"0",correlation_offset:0,status:"active",created_at:e,updated_at:e}}function Cw(n){const e=n.bucket_id||"---",r=gw(n.unrealized_profit),i=gw(n.unrealized_loss),s=r-i,o=Ct(s.toString()),a=Dt(n.unrealized_profit),l=Dt(n.unrealized_loss),c=zpe(n.max_leverage);return{bucketId:e,address:n.address||"",marginType:n.margin_type||"cross",collateralAsset:n.collateral_asset||"",depositedMargin:Dt(n.deposited_margin),totalEquity:Dt(n.total_equity),availableMargin:Dt(n.available_margin),usedMargin:Dt(n.used_margin),unrealizedProfit:a,unrealizedLoss:l,realizedProfit:Dt(n.realized_profit),realizedLoss:Dt(n.realized_loss),unrealizedPnL:o,marginRatio:Dt(n.margin_ratio),imr:Dt(n.imr),totalNotionalValue:Dt(n.total_notional_value),riskLevel:n.risk_level||"",maxLeverage:c,correlationOffset:n.correlation_offset||0,status:n.status||"",createdAt:tF(n.created_at),updatedAt:tF(n.updated_at),leverage:c,marginMode:n.margin_type||"cross",raw:n}}function Sx(n){return n.totalEquity>0?Math.min(Math.max(n.usedMargin/n.totalEquity,0),1):0}function sf(n){const e=n.marginMode||n.marginType||"cross";return e==="ISOLATED"||e==="isolated"?"ISOLATED":"CROSS"}function YN(n){return"collateral_asset"in n}function Uh(n){return n!==null&&typeof n=="object"&&typeof n.price=="number"&&typeof n.market_id=="string"&&typeof n.quantity=="number"&&typeof n.timestamp=="number"&&typeof n.is_buyer_maker=="boolean"&&typeof n.trade_id=="string"}function kx(n){return n!==null&&typeof n=="object"&&typeof n.symbol=="string"&&typeof n.mark_price=="number"&&typeof n.timestamp=="number"}class iu{constructor(e){Be(this,"httpClient");Be(this,"infoClient");Be(this,"nonceManager");Be(this,"mnemonic");Be(this,"chainID");Be(this,"walletAddress");Be(this,"nonceCounter",null);Be(this,"signatureBuilder");this.httpClient=new V1(e.baseURL,e.maxRetries||3),this.infoClient=new cr({baseURL:e.baseURL}),this.nonceManager=new mN(this.infoClient),this.mnemonic=e.mnemonic,this.chainID=e.chainID||10900}getSignatureBuilder(){if(!this.signatureBuilder){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");this.signatureBuilder=new eF({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}return this.signatureBuilder}getNonceProvider(){return{getNextNonce:()=>this.getNextNonce()}}async initialize(){await At.initialize();const e=await At.generateAddress(this.mnemonic,0);if(!e.success||!e.address)throw new Error(`Failed to generate wallet address: ${e.error}`);this.walletAddress=e.address,this.signatureBuilder=new eF({mnemonic:this.mnemonic,walletAddress:this.walletAddress,chainID:this.chainID})}getWalletAddress(){if(!this.walletAddress)throw new Error("ExchangeClient not initialized. Call initialize() first.");return this.walletAddress}async refreshNonceFromServer(){const e=this.getWalletAddress(),r=await this.nonceManager.getExpectedNextNonce(e,!1);this.nonceCounter=r.next_nonce,console.log("[ExchangeClient] Refreshed nonce from server",{walletAddress:e,newNonce:this.nonceCounter})}async getNextNonce(){return this.nonceCounter===null&&await this.refreshNonceFromServer(),this.nonceCounter++,this.nonceCounter.toString()}buildOrderPayload(e){const r=un(e.price),i=un(e.quantity),s={action:jN,marketId:e.marketId,bucketId:e.bucketId,side:e.side.toUpperCase(),orderType:e.orderType.toUpperCase(),price:r,quantity:i};return e.leverage&&(s.leverage=e.leverage),e.takeProfit&&(s.takeProfit=e.takeProfit),e.stopLoss&&(s.stopLoss=e.stopLoss),s}async placeOrder(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.side||e.side.toUpperCase()!=="BUY"&&e.side.toUpperCase()!=="SELL")throw new Error("side must be BUY or SELL");if(!e.orderType||e.orderType.toUpperCase()!=="LIMIT"&&e.orderType.toUpperCase()!=="MARKET")throw new Error("orderType must be LIMIT or MARKET");if(!e.price||e.price<=0)throw new Error("price must be positive");if(!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");this.walletAddress||await this.initialize();const r=this.buildOrderPayload(e),i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=Math.floor(Date.now()/1e3)-5,l=`order-${Date.now()}-${Math.floor(Math.random()*1e6)}`,c=e.side.toUpperCase()==="BUY",u={address:this.getWalletAddress(),asset_pair:e.marketId,market_id:e.marketId,bucket_id:e.bucketId,price:s.price,size:s.quantity,is_buy:c,order_type:e.orderType.toUpperCase(),timestamp:a,client_order_id:l,nonce:s.nonce,deadline:s.deadline,signature:o,time_in_force:e.timeInForce||"GTC"};return e.leverage&&(u.leverage=e.leverage),e.takeProfit&&(u.take_profit=e.takeProfit),e.stopLoss&&(u.stop_loss=e.stopLoss),e.postOnly&&(u.post_only=!0),e.hidden&&(u.hidden=!0),e.displayQuantity&&(u.display_quantity=e.displayQuantity),e.reduceOnly&&(u.reduce_only=!0),(await this.httpClient.post("/clob/v1/order",u)).body}async cancelOrder(e){var u,h,d,f,m,g;if(!e.orderId||e.orderId==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: orderId is empty",e),new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw console.error("[ExchangeClient.cancelOrder] Validation failed: marketId is empty",e),new Error("marketId cannot be empty");console.log("[ExchangeClient.cancelOrder] Input validation passed",{orderId:e.orderId,marketId:e.marketId}),this.walletAddress?console.log("[ExchangeClient.cancelOrder] Using existing wallet",{walletAddress:this.walletAddress}):(console.log("[ExchangeClient.cancelOrder] Wallet not initialized, initializing now..."),await this.initialize(),console.log("[ExchangeClient.cancelOrder] Wallet initialized",{walletAddress:this.walletAddress}));const r=this.getWalletAddress(),i={action:Sw,orderId:e.orderId,marketId:e.marketId,address:r};console.log("[ExchangeClient.cancelOrder] Payload built",{payload:i,action:Sw});const s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider());console.log("[ExchangeClient.cancelOrder] Complete message built",{action:o.action,orderId:o.orderId,marketId:o.marketId,address:o.address,owner:o.owner,nonce:o.nonce,deadline:o.deadline,hasAllFields:!!(o.action&&o.orderId&&o.marketId&&o.owner&&o.nonce&&o.deadline)}),console.log("[ExchangeClient.cancelOrder] Generating signature...");const a=await s.signPayload(o);console.log("[ExchangeClient.cancelOrder] Signature generated",{signatureLength:a==null?void 0:a.length,signaturePrefix:(a==null?void 0:a.substring(0,10))+"..."});const l=s.buildEIP712Tx(o,a);console.log("[ExchangeClient.cancelOrder] EIP712Tx built",{eip712Tx:{txId:l.txId,sigType:l.sigType,threshold:l.threshold,timestamp:l.timestamp,deadline:l.deadline,payloadAction:(u=l.payload)==null?void 0:u.action,payloadOrderId:(h=l.payload)==null?void 0:h.orderId,payloadMarketId:(d=l.payload)==null?void 0:d.marketId,signaturesCount:(f=l.signatures)==null?void 0:f.length,signer:(g=(m=l.signatures)==null?void 0:m[0])==null?void 0:g.signer}});const c=this.httpClient.getBaseURL?this.httpClient.getBaseURL():"unknown";console.log("[ExchangeClient.cancelOrder] Submitting to /router/v1/tx endpoint...",{endpoint:"/router/v1/tx",baseURL:c,fullURL:`${c}/router/v1/tx`});try{const b=await this.httpClient.post("/router/v1/tx",l);return console.log("[ExchangeClient.cancelOrder] API response received",{status:b.statusCode,hasBody:!!b.body,responseBody:b.body,orderId:e.orderId}),b.body}catch(b){if(gN(b)){console.log("[ExchangeClient.cancelOrder] Nonce error detected, refreshing nonce from server",{error:b instanceof Error?b.message:String(b),orderId:e.orderId}),await this.refreshNonceFromServer();const y=this.getSignatureBuilder(),v=await y.buildCompleteMessage(i,this.getNonceProvider()),w=await y.signPayload(v),k=y.buildEIP712Tx(v,w);console.log("[ExchangeClient.cancelOrder] Retrying with refreshed nonce",v.nonce);const S=await this.httpClient.post("/router/v1/tx",k);return console.log("[ExchangeClient.cancelOrder] Retry successful",{status:S.statusCode,responseBody:S.body}),S.body}throw console.error("[ExchangeClient.cancelOrder] API call failed",{error:b,errorMessage:b instanceof Error?b.message:String(b),errorStack:b instanceof Error?b.stack:void 0,orderId:e.orderId,marketId:e.marketId,walletAddress:this.walletAddress}),b}}async modifyOrder(e){if(!e.orderId||e.orderId==="")throw new Error("orderId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.newPrice||e.newPrice<=0)throw new Error("newPrice must be positive");if(!e.newQuantity||e.newQuantity<=0)throw new Error("newQuantity must be positive");this.walletAddress||await this.initialize();const r={action:LN,orderId:e.orderId,marketId:e.marketId,newPrice:un(e.newPrice),newQuantity:un(e.newQuantity)},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async changeLeverage(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(e.newLeverage===void 0)throw new Error("newLeverage must be provided");if(this.walletAddress||await this.initialize(),e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");const r={action:gee,marketId:e.marketId,newLeverage:un(e.newLeverage),bucketId:e.bucketId,positionId:e.positionId||""};console.log("[changeLeverage] Payload fields:",Object.keys(r).length,Object.keys(r));const i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=["action","owner","marketId","newLeverage","bucketId","positionId","nonce","deadline"],a=Object.keys(s);console.log("[changeLeverage] Complete message fields:",a.length,a),console.log("[changeLeverage] Expected fields (8):",o),console.log("[changeLeverage] Complete message:",JSON.stringify(s,null,2));const l=await i.signPayload(s),c=i.buildEIP712Tx(s,l);return(await this.httpClient.post("/router/v1/tx",c)).body}async closePosition(e){if(!e.positionId||e.positionId.trim()==="")throw new Error("positionId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=Math.floor(Date.now()/1e3),s=i+300,o=await this.getNextNonce();let a;if(e.marketPrice&&e.marketPrice>0)a=e.marketPrice;else try{const g=await this.infoClient.getMarketStats(e.marketId);if(!g||!g.last_price)throw new Error("marketPrice is required and could not be fetched from ticker");a=Ct(g.last_price)}catch(g){throw new Error(`Failed to fetch market price: ${g instanceof Error?g.message:String(g)}`)}const l=un(a).toString(),c=e.quantity&&e.quantity>0?un(e.quantity).toString():"0",u={action:kw,address:r,marketId:e.marketId,closeSize:c,marketPrice:l,nonce:o,deadline:s},d=await this.getSignatureBuilder().signPayload(u),f={address:r,position_id:e.positionId,market_id:e.marketId,close_size:c,market_price:l,timestamp:i,sign_type:1,nonce:o.toString(),chain_id:this.chainID.toString(),deadline:s.toString(),signature:d};return(await this.httpClient.post("/bucket/v1/position/close",f)).body}async closePositionEIP712Tx(e){if(!e.positionId||e.positionId.trim()==="")throw new Error("positionId cannot be empty");if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(this.walletAddress||await this.initialize(),!e.quantity||e.quantity<=0)throw new Error("quantity must be positive");if(!e.marketPrice||e.marketPrice<=0)throw new Error("marketPrice must be positive");const r=un(e.quantity),i=un(e.marketPrice),s={action:kw,address:this.getWalletAddress(),positionId:e.positionId,marketId:e.marketId,closeSize:r,marketPrice:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=o.buildEIP712Tx(a,l);return(await this.httpClient.post("/router/v1/tx",c)).body}async swap(e){if(!e.fromToken||e.fromToken==="")throw new Error("fromToken cannot be empty");if(!e.toToken||e.toToken==="")throw new Error("toToken cannot be empty");if(!e.amountIn||e.amountIn<=0)throw new Error("amountIn must be positive");if(!e.minAmountOut||e.minAmountOut<=0)throw new Error("minAmountOut must be positive");this.walletAddress||await this.initialize();const r={action:$N,fromToken:e.fromToken,toToken:e.toToken,amountIn:un(e.amountIn),minAmountOut:un(e.minAmountOut)};e.path&&e.path.length>0&&(r.path=e.path);const i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async changeMarginRatioEIP712Tx(e){if(!e.marketId||e.marketId.trim()==="")throw new Error("marketId cannot be empty");if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");this.walletAddress||await this.initialize();const r={action:NN,marketId:e.marketId,bucketId:e.bucketId,positionId:e.positionId||""},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=["action","owner","marketId","bucketId","positionId","nonce","deadline"],a=Object.keys(s);console.log("[changeMarginRatio] Complete message fields:",a.length,a),console.log("[changeMarginRatio] Expected fields (8):",o),console.log("[changeMarginRatio] Complete message:",JSON.stringify(s,null,2));const l=await i.signPayload(s),c=i.buildEIP712Tx(s,l);return(await this.httpClient.post("/router/v1/tx",c)).body}async internTransferEIP712Tx(e){if(!e.fromAccount||e.fromAccount==="")throw new Error("fromAccount cannot be empty");if(!e.toAccount||e.toAccount==="")throw new Error("toAccount cannot be empty");if(!e.tokenAddress||e.tokenAddress==="")throw new Error("tokenAddress cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r={action:FN,fromAccount:e.fromAccount,toAccount:e.toAccount,amount:un(e.amount),tokenAddress:e.tokenAddress,address:this.getWalletAddress()},i=this.getSignatureBuilder(),s=await i.buildCompleteMessage(r,this.getNonceProvider()),o=await i.signPayload(s),a=i.buildEIP712Tx(s,o);return(await this.httpClient.post("/router/v1/tx",a)).body}async bucketTransfer(e){if(!e.fromBucketId||e.fromBucketId.trim()==="")throw new Error("fromBucketId cannot be empty");if(!e.toBucketId||e.toBucketId.trim()==="")throw new Error("toBucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=un(e.amount),s={action:WN,fromBucketId:e.fromBucketId,toBucketId:e.toBucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=["action","owner","fromBucketId","toBucketId","asset","amount","nonce","deadline"],c=Object.keys(a);if(console.log("[bucketTransfer] Initial payload:",s),console.log("[bucketTransfer] Complete message fields:",c),console.log("[bucketTransfer] Complete message:",JSON.stringify(a,null,2)),console.log("[bucketTransfer] Expected fields (8):",l),console.log("[bucketTransfer] Actual field count:",c.length,"expected:",l.length),c.length!==l.length){const m=c.filter(b=>!l.includes(b)),g=l.filter(b=>!c.includes(b));console.error("[bucketTransfer] Field count mismatch!"),m.length>0&&console.error("[bucketTransfer] Extra fields (should be removed):",m),g.length>0&&console.error("[bucketTransfer] Missing fields:",g)}const u=await o.signPayload(a),h=Math.floor(Date.now()/1e3),d={address:r,source_bucket_id:e.fromBucketId,target_bucket_id:e.toBucketId,amount:i,reason:"sdk_transfer",timestamp:h,nonce:a.nonce,deadline:a.deadline,signature:u,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bucket/v1/bucket/transfer",d)).body}async extractToBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=un(e.amount),s={action:zN,bucketId:e.bucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=["action","owner","bucketId","asset","amount","nonce","deadline"],c=Object.keys(a);if(console.log("[extractToBucket] Initial payload:",s),console.log("[extractToBucket] Complete message fields:",c),console.log("[extractToBucket] Complete message:",JSON.stringify(a,null,2)),console.log("[extractToBucket] Expected fields (7):",l),console.log("[extractToBucket] Actual field count:",c.length,"expected:",l.length),c.length!==l.length){const m=c.filter(b=>!l.includes(b)),g=l.filter(b=>!c.includes(b));console.error("[extractToBucket] Field count mismatch!"),m.length>0&&console.error("[extractToBucket] Extra fields (should be removed):",m),g.length>0&&console.error("[extractToBucket] Missing fields:",g)}const u=await o.signPayload(a),h=Pk(),d={address:r,bucket_id:e.bucketId,asset:e.assetId,amount:i,timestamp:h,nonce:a.nonce,deadline:a.deadline,signature:u,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/extract-to-bucket",d)).body}async createBucket(e){if(!e.bucketType||e.bucketType.trim()==="")throw new Error("bucketType cannot be empty");if(!e.marginType||e.marginType.trim()==="")throw new Error("marginType cannot be empty");const r=e.marginType.toUpperCase();if(r!=="CROSS"&&r!=="ISOLATED")throw new Error("marginType must be 'cross' or 'isolated'");this.walletAddress||await this.initialize();const i=this.getWalletAddress(),s=Pk(),o=e.asset&&e.asset.trim()!==""?e.asset:"USDC",a={action:yee,bucketType:e.bucketType,marginType:r.toLowerCase(),asset:o};(!a.asset||typeof a.asset!="string"||a.asset.trim()==="")&&(a.asset="USDC");const l=this.getSignatureBuilder(),c=await l.buildCompleteMessage(a,this.getNonceProvider(),3600),u=["action","owner","bucketType","marginType","asset","nonce","deadline"],h=Object.keys(c),d=u.filter(b=>!h.includes(b));if(console.log("[createBucket] Initial payload:",a),console.log("[createBucket] Complete message fields:",h),console.log("[createBucket] Complete message:",JSON.stringify(c,null,2)),console.log("[createBucket] Expected fields:",u),console.log("[createBucket] Field count:",h.length,"expected:",u.length),d.length>0&&(console.error("[createBucket] Missing fields in payload:",d),console.error("[createBucket] Actual payload fields:",h)),h.length!==u.length)throw new Error(`Payload field count mismatch: expected ${u.length} fields (action, owner, bucketType, marginType, asset, nonce, deadline), but got ${h.length} fields: ${h.join(", ")}`);const f=await l.signPayload(c),m={address:i,bucket_type:e.bucketType,margin_type:r.toLowerCase(),initial_margin:e.initialMargin||"0",timestamp:s,nonce:c.nonce,deadline:c.deadline,signature:f,chain_id:this.chainID.toString()};return e.bucketId&&(m.bucket_id=e.bucketId),(await this.httpClient.post("/bucket/v1/bucket",m)).body}async withdrawFromBucket(e){if(!e.bucketId||e.bucketId.trim()==="")throw new Error("bucketId cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=this.getWalletAddress(),i=un(e.amount),s={action:UN,bucketId:e.bucketId,asset:e.assetId,amount:i},o=this.getSignatureBuilder(),a=await o.buildCompleteMessage(s,this.getNonceProvider()),l=await o.signPayload(a),c=Pk(),u={address:r,bucket_id:e.bucketId,asset:e.assetId,amount:i,timestamp:c,nonce:a.nonce,deadline:a.deadline,signature:l,chain_id:this.chainID.toString()};return(await this.httpClient.post("/bank/v1/withdraw-from-bucket",u)).body}async bankMint(e){if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(e.amount===void 0||typeof e.amount=="number"&&e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=un(e.amount),i={action:BN,address:this.getWalletAddress(),asset:e.assetId,amount:r},s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider()),a=await s.signPayload(o),l=s.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}async bankTransfer(e){if(!e.to||e.to.trim()==="")throw new Error("to address cannot be empty");if(!e.assetId||e.assetId.trim()==="")throw new Error("assetId cannot be empty");if(!e.amount||e.amount<=0)throw new Error("amount must be positive");this.walletAddress||await this.initialize();const r=un(e.amount),i={action:qN,address:this.getWalletAddress(),to:e.to,asset:e.assetId,amount:r},s=this.getSignatureBuilder(),o=await s.buildCompleteMessage(i,this.getNonceProvider()),a=await s.signPayload(o),l=s.buildEIP712Tx(o,a);return(await this.httpClient.post("/router/v1/tx",l)).body}}class Ew{constructor(e){Be(this,"ws",null);Be(this,"state",kt.Disconnected);Be(this,"handlers",new Map);Be(this,"reconnectTimer",null);Be(this,"reconnectAttempts",0);Be(this,"config");Be(this,"originalConfig");Be(this,"pingInterval",null);Be(this,"stateChangeHandlers",new Set);Be(this,"authState","not_required");Be(this,"pendingSubscriptions",new Map);this.originalConfig=e;const r=this.convertHTTPToWebSocketURL(e.url);this.config={url:r,authToken:e.authToken||"",walletAddress:e.walletAddress||"",deviceID:e.deviceID||"",reconnectInterval:e.reconnectInterval||5e3,maxReconnectAttempts:e.maxReconnectAttempts||10}}convertHTTPToWebSocketURL(e){if(e.startsWith("ws://")||e.startsWith("wss://")){if(e.includes("router.morpheum.io")){const r=new URL(e);if(!r.pathname||r.pathname==="/")return r.pathname="/websocket",r.toString()}return e}if(e.includes("localhost")||e.includes("127.0.0.1")){const r=e.match(/:(\d+)/);return`ws://localhost:${r?r[1]:"8080"}/websocket`}if(e.startsWith("http://")){const r=e.replace("http://","ws://");return r.includes("/websocket")?r:r.endsWith("/")?`${r}websocket`:`${r}/websocket`}if(e.startsWith("https://")){const r=e.replace("https://","wss://");return r.includes("/websocket")?r:r.endsWith("/")?`${r}websocket`:`${r}/websocket`}if(!e||e.trim()===""||e.includes("router.morpheum.io"))return"wss://router.morpheum.io/websocket";try{const r=new URL(e.startsWith("http")?e:`https://${e}`),i=r.protocol==="https:"?"wss:":"ws:",s=r.pathname&&r.pathname!=="/"?r.pathname:"",o=s.endsWith("/websocket")?s:`${s}/websocket`;return`${i}//${r.host}${o}`}catch{return console.warn(`Failed to parse URL ${e}, defaulting to router.morpheum.io/websocket`),"wss://router.morpheum.io/websocket"}}getConnectionURL(){const e=[];this.config.authToken&&e.push(`token=${encodeURIComponent(this.config.authToken)}`),"walletAddress"in this.originalConfig&&this.originalConfig.walletAddress!==void 0&&e.push(`wallet=${encodeURIComponent(this.originalConfig.walletAddress||"")}`),this.config.deviceID&&e.push(`device_id=${encodeURIComponent(this.config.deviceID)}`);const r=this.config.url.includes("?")?"&":"?";return e.length>0?`${this.config.url}${r}${e.join("&")}`:this.config.url}async connect(){if(!(this.state===kt.Connected||this.state===kt.Connecting))return this.setState(kt.Connecting),new Promise((e,r)=>{let i=!1,s=!1,o=null;const a=l=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),this.setState(kt.Disconnected),r(l))};try{const l=this.getConnectionURL();console.log("Connecting to WebSocket:",l);const c=new WebSocket(l);o=window.setTimeout(()=>{!i&&!s&&(c.close(),a(new Error(`WebSocket connection timeout after 10 seconds. Unable to connect to ${l}. Check if the server is running and accessible.`)))},1e4),c.onopen=async()=>{o!==null&&(clearTimeout(o),o=null),i=!0,this.ws=c,this.setState(kt.Connected),this.reconnectAttempts=0,this.config.authToken?(this.authState="authenticated",console.log("[WebSocketClient] Authentication via URL token")):this.authState="not_required",this.startPing(),e()},c.onmessage=u=>{try{const h=JSON.parse(u.data);this.handleMessage(h)}catch(h){console.error("Failed to parse WebSocket message:",h)}},c.onerror=u=>{console.error("WebSocket error event:",u)},c.onclose=u=>{if(o!==null&&(clearTimeout(o),o=null),this.ws=null,this.stopPing(),this.authState="not_required",!i&&!s){const h=u.code,d=u.reason||"Unknown reason",f=u.wasClean;let m=`WebSocket connection failed. Close code: ${h}`;h===1006?m=`WebSocket connection failed (abnormal closure, code ${h}). Unable to connect to ${l}. Possible causes: Server is not running, network issue, firewall blocking connection, or incorrect URL.`:h===1002?m=`WebSocket protocol error (code ${h}). The server may not support WebSocket protocol or there's a protocol mismatch.`:h===1003?m=`WebSocket unsupported data type (code ${h}).`:h===1008?m=`WebSocket connection closed due to policy violation (code ${h}): ${d}`:h===1011?m=`WebSocket server error (code ${h}): ${d}`:h===1e3?m=`WebSocket connection closed normally (code ${h}) but before opening.`:d&&d!=="Unknown reason"&&(m+=` Reason: ${d}`),!f&&h===1006&&(m+=" This usually indicates the connection was refused or the server is unreachable."),a(new Error(m))}else i&&(this.setState(kt.Disconnected),this.scheduleReconnect())}}catch(l){o!==null&&(clearTimeout(o),o=null);const c=l instanceof Error?l.message:String(l);a(new Error(`Failed to create WebSocket connection: ${c}`))}})}disconnect(){this.cancelReconnect(),this.stopPing(),this.ws&&(this.ws.close(),this.ws=null),this.handlers.clear(),this.stateChangeHandlers.clear(),this.setState(kt.Disconnected)}send(e){var r;if(this.state!==kt.Connected||!this.ws)throw new Error("WebSocket not connected");if(this.ws.readyState!==WebSocket.OPEN){const i=this.ws.readyState===WebSocket.CONNECTING?"CONNECTING":this.ws.readyState===WebSocket.CLOSING?"CLOSING":this.ws.readyState===WebSocket.CLOSED?"CLOSED":"UNKNOWN";throw console.warn(`[WebSocketClient] WebSocket not in OPEN state (${i}), updating connection state`),this.setState(kt.Disconnected),new Error(`WebSocket not open (state: ${i})`)}try{e.params&&typeof e.params!="object"&&(console.warn("[WebSocketClient] params must be an object, converting:",e.params),e.params={});const i=JSON.stringify(e);this.ws.send(i)}catch(i){throw console.error("[WebSocketClient] Failed to send message:",i),((r=this.ws)==null?void 0:r.readyState)!==WebSocket.OPEN&&(console.warn("[WebSocketClient] WebSocket not open after send error, scheduling reconnect"),this.setState(kt.Disconnected),this.scheduleReconnect()),i}}on(e,r){this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(r)}off(e,r){if(!r){this.handlers.delete(e);return}const i=this.handlers.get(e);if(i){const s=i.indexOf(r);s>-1&&i.splice(s,1)}}getState(){return this.state}isConnected(){const e=this.state===kt.Connected,r=this.ws!==null&&this.ws.readyState===WebSocket.OPEN;return e&&!r?(console.warn("[WebSocketClient] State is Connected but WebSocket is not OPEN, updating state"),this.setState(kt.Disconnected),!1):e&&r}setState(e){const r=this.state;this.state=e,r!==e&&this.stateChangeHandlers.forEach(i=>{try{i(e)}catch(s){console.error("Error in state change handler:",s)}})}onStateChange(e){return this.stateChangeHandlers.add(e),()=>{this.stateChangeHandlers.delete(e)}}handleMessage(e){if(e.type==="ping"){try{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const o={type:"pong"};e.id&&(o.id=e.id),this.send(o)}}catch(o){console.error("[WebSocketClient] Failed to send pong:",o),this.ws&&this.ws.readyState!==WebSocket.OPEN&&(this.setState(kt.Disconnected),this.scheduleReconnect())}return}if(e.type==="ack"&&typeof e.channel=="string"){const o=this.pendingSubscriptions.get(e.channel);o&&(clearTimeout(o.timeout),o.resolve(),this.pendingSubscriptions.delete(e.channel))}if(e.action==="subscribed"&&typeof e.channel=="string"){const o=this.pendingSubscriptions.get(e.channel);o&&(clearTimeout(o.timeout),o.resolve(),this.pendingSubscriptions.delete(e.channel))}e.is_stale===!0&&(console.warn("[WebSocketClient] Received stale data:",e),(this.handlers.get("stale")||[]).forEach(a=>{try{a(e)}catch(l){console.error("[WebSocketClient] Error in stale data handler:",l)}}));let r;if(typeof e.action=="string")if(e.action==="subscribed")typeof e.channel=="string"?r=e.channel:r="subscribed";else if(e.action==="error")r="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message);else if(e.action==="pong")r="pong";else if(e.action==="data"||e.action==="update")if(typeof e.channel=="string")r=e.channel;else{console.error("[WebSocketClient] Missing channel in data message");return}else r=e.action;else if(typeof e.type=="string")if(e.type==="data")if(typeof e.channel=="string")r=e.channel;else{console.error("[WebSocketClient] Missing channel in data message");return}else e.type==="error"?(r="error",e.error?console.error("[WebSocketClient] Server error:",{code:e.error.code,message:e.error.message,details:e.error.details}):e.message&&console.error("[WebSocketClient] Server error:",e.message)):e.type==="ack"?typeof e.channel=="string"?r=e.channel:r="ack":e.type==="pong"?r="pong":r=e.type;else typeof e.event=="string"?r=e.event:typeof e.channel=="string"?r=e.channel:r="message";const i=this.handlers.get(r)||[],s=this.handlers.get("*")||[];i.forEach(o=>{try{o(e)}catch(a){console.error(`[WebSocketClient] Error in handler for ${r}:`,a)}}),r!=="error"&&s.forEach(o=>{try{o(e)}catch(a){console.error("[WebSocketClient] Error in wildcard handler:",a)}})}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("[WebSocketClient] Max reconnection attempts reached"),this.setState(kt.Disconnected);return}this.reconnectAttempts++,this.setState(kt.Reconnecting),this.reconnectTimer=window.setTimeout(()=>{this.connect().catch(e=>{console.error("[WebSocketClient] Reconnection failed:",e)})},this.config.reconnectInterval)}cancelReconnect(){this.reconnectTimer!==null&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectAttempts=0}startPing(){this.stopPing(),this.pingInterval=window.setInterval(()=>{if(this.ws&&this.state===kt.Connected)if(this.ws.readyState===WebSocket.OPEN)try{const e=`ping_${Date.now()}`;this.send({type:"ping",id:e})}catch(e){console.error("[WebSocketClient] Failed to send ping:",e),this.ws.readyState!==WebSocket.OPEN&&(console.warn("[WebSocketClient] WebSocket not open, scheduling reconnect"),this.setState(kt.Disconnected),this.scheduleReconnect())}else console.warn("[WebSocketClient] WebSocket not in OPEN state during ping, state:",this.ws.readyState),this.setState(kt.Disconnected),this.scheduleReconnect()},2e4)}stopPing(){this.pingInterval!==null&&(clearInterval(this.pingInterval),this.pingInterval=null)}setAuthToken(e,r,i){this.config.authToken=e,this.config.walletAddress=r,this.config.deviceID=i,this.originalConfig.authToken=e,this.originalConfig.walletAddress=r,this.originalConfig.deviceID=i,console.log(`Auth set: address=${r}, device=${i}`)}async updateAuth(e,r,i){e!==void 0&&(this.config.authToken=e,this.originalConfig.authToken=e),r!==void 0&&(this.config.walletAddress=r,this.originalConfig.walletAddress=r),i!==void 0&&(this.config.deviceID=i,this.originalConfig.deviceID=i),this.isConnected()&&(this.disconnect(),await this.connect())}waitForSubscription(e,r=5e3){return new Promise((i,s)=>{if(!this.pendingSubscriptions.has(e)){i();return}const o=window.setTimeout(()=>{this.pendingSubscriptions.delete(e),s(new Error(`Subscription acknowledgment timeout for channel: ${e}`))},r),a=this.pendingSubscriptions.get(e);a?(a.timeout=o,a.resolve=i,a.reject=s):(clearTimeout(o),i())})}registerPendingSubscription(e){this.pendingSubscriptions.has(e)||this.pendingSubscriptions.set(e,{resolve:()=>{},reject:()=>{},timeout:0})}isReadyForSubscriptions(){const e=this.state===kt.Connected,i=!this.config.authToken||this.authState==="authenticated";return e&&i}getAuthState(){return this.authState}}class zbe{constructor(e){Be(this,"wsClient");Be(this,"multiFeedSubscriptions",new Map);Be(this,"multiFeedCallbacks",[]);Be(this,"multiFeedHandlerRegistered",!1);Be(this,"multiFeedSubscribedMarkets",new Set);this.wsClient=e}isConnected(){return this.wsClient.isConnected()}validateSymbol(e){return e===""?!0:!e||typeof e!="string"||e.trim()===""?!1:e.includes("/")}validateMarketId(e){return e==null?!1:String(e).trim()!==""}validateKlineInterval(e){return["1m","5m","15m","1h","4h","1d"].includes(e)}handleMultiFeedMessage(e){const r=e.type==="data";if((e.action==="data"||e.action==="update"||r)&&e.channel==="multi_feed"&&e.sub_channel){const s=e,o=s.sub_channel,a=this.multiFeedSubscriptions.get(o)||[],l=this.multiFeedCallbacks;let c=s.data;if(typeof c=="string")try{c=JSON.parse(c)}catch(u){console.error("Failed to parse multi-feed data field:",u);return}if(c){let u=c;const h={...s,data:u};a.forEach(d=>{try{d(u)}catch(f){console.error(`Error in multi-feed sub-channel callback for ${o}:`,f)}}),l.forEach(d=>{try{d(h)}catch(f){console.error("Error in multi-feed callback:",f)}})}}}subscribeMultiFeed(e,r,i){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const s=e!=="";if(s&&!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);if(i!=null&&i.symbol&&!this.validateSymbol(i.symbol))throw new Error(`Invalid symbol: ${i.symbol}. Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC").`);if(i!=null&&i.interval&&!this.validateKlineInterval(i.interval))throw new Error(`Invalid interval: ${i.interval}. Interval must be one of: "1m", "5m", "15m", "1h", "4h", "1d".`);const o="multi_feed";this.multiFeedHandlerRegistered||(this.wsClient.on(o,this.handleMultiFeedMessage.bind(this)),this.multiFeedHandlerRegistered=!0),this.multiFeedCallbacks.push(r),this.wsClient.registerPendingSubscription(o);const a=s?e:"auth-only";if(!this.multiFeedSubscribedMarkets.has(a))try{const c={type:"subscribe",channel:"multi_feed",params:{}};s&&(c.params.market_id=e),i&&Object.assign(c.params,i),this.wsClient.send(c),this.multiFeedSubscribedMarkets.add(a)}catch(c){const u=this.multiFeedCallbacks.indexOf(r);throw u>-1&&this.multiFeedCallbacks.splice(u,1),c}}subscribeMultiFeedSubChannel(e,r,i,s){this.multiFeedSubscriptions.has(e)||this.multiFeedSubscriptions.set(e,[]),this.multiFeedSubscriptions.get(e).push(i);const a=r!==""?r:"auth-only";if(!this.multiFeedSubscribedMarkets.has(a)){const l=()=>{};this.subscribeMultiFeed(r,l,s)}}unsubscribeMultiFeed(e,r,i){if(i){const s=this.multiFeedCallbacks.indexOf(i);s>-1&&this.multiFeedCallbacks.splice(s,1)}else this.multiFeedCallbacks=[];if(this.multiFeedCallbacks.length===0&&(this.multiFeedSubscriptions.clear(),this.multiFeedSubscribedMarkets.clear()),this.multiFeedCallbacks.length===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"multi_feed"}),this.multiFeedSubscribedMarkets.clear()}catch(s){console.error("Failed to send unsubscribe message:",s)}}unsubscribeMultiFeedSubChannel(e,r){const i=this.multiFeedSubscriptions.get(e)||[];if(r){const s=i.indexOf(r);s>-1&&(i.splice(s,1),i.length===0?this.multiFeedSubscriptions.delete(e):this.multiFeedSubscriptions.set(e,i))}else this.multiFeedSubscriptions.delete(e)}disconnect(){this.multiFeedSubscriptions.clear(),this.multiFeedCallbacks=[],this.multiFeedHandlerRegistered=!1,this.multiFeedSubscribedMarkets.clear()}}class _p{constructor(e){Be(this,"wsClient");Be(this,"subscriptions",new Map);Be(this,"lastPriceWrappedCallbacks",new Map);Be(this,"wrappedCallbacks",new Map);Be(this,"multiplexClient");this.wsClient=new Ew({url:e.url,authToken:e.authToken,walletAddress:e.walletAddress,deviceID:e.deviceID}),this.multiplexClient=new zbe(this.wsClient)}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.lastPriceWrappedCallbacks.clear(),this.wrappedCallbacks.clear(),this.multiplexClient.disconnect()}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,r,i){this.wsClient.setAuthToken(e,r,i)}async updateAuth(e,r,i){return this.wsClient.updateAuth(e,r,i)}isReadyForSubscriptions(){return this.wsClient.isReadyForSubscriptions()}getAuthState(){return this.wsClient.getAuthState()}async waitForSubscription(e,r=5e3){return this.wsClient.waitForSubscription(e,r)}getWebSocketClient(){return this.wsClient}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(r){return console.error("Failed to parse router data field:",r),null}return e}extractRouterData(e){if(typeof e.action=="string"){if((e.action==="data"||e.action==="update")&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionClient] Failed to parse action-based data:",e.data),r}if(e.action==="data"||e.action==="update"){const{action:r,channel:i,...s}=e;return Object.keys(s).length>0?s:null}if(e.action==="error")return e.error?console.error("WebSocket error response:",e.error):e.message&&console.error("WebSocket error response:",e.message),null;if(e.action==="subscribed")return null}if(e.type==="data"&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionClient] Failed to parse router data:",e.data),r}if(e.type==="error")return e.error?console.error("WebSocket error response:",e.error):e.message&&console.error("WebSocket error response:",e.message),null;if(e.type==="ack")return null;if(e.channel&&!e.action&&!e.type){const{channel:r,...i}=e;return Object.keys(i).length>0?i:null}return e.action&&e.action!=="data"&&e.action!=="update"&&e.action!=="subscribed"&&e.action!=="error"?console.debug("[SubscriptionClient] Unexpected action:",e.action,"Full message:",e):e.type&&e.type!=="data"&&e.type!=="ack"&&e.type!=="error"?console.debug("[SubscriptionClient] Unexpected message type:",e.type,"Full message:",e):(e.action==="data"||e.action==="update"||e.type==="data")&&!e.data&&!e.channel&&console.warn("[SubscriptionClient] Message is data/update but missing data/channel field:",e),null}validateSymbol(e){return e===""?!0:!e||typeof e!="string"||e.trim()===""?!1:e.includes("/")}validateMarketId(e){return e==null?!1:String(e).trim()!==""}validateKlineInterval(e){return["1m","5m","15m","1h","4h","1d"].includes(e)}validateTWAPWindowSize(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}validatePrivateChannelAuth(){if(!this.isReadyForSubscriptions()){const e=this.getAuthState();if(e==="pending")throw new Error("Authentication is pending. Please wait for authentication to complete before subscribing to private channels.");if(e==="failed")throw new Error("Authentication failed. Please re-authenticate before subscribing to private channels.");{const r=this.wsClient.config;if(!r||!r.authToken)throw new Error("Authentication token is required for private channels. Please provide authToken in SubscriptionClient config.")}}}getMultiplexClient(){return this.multiplexClient}subscribeMultiFeed(e,r,i){return this.multiplexClient.subscribeMultiFeed(e,r,i)}subscribeMultiFeedSubChannel(e,r,i,s){return this.multiplexClient.subscribeMultiFeedSubChannel(e,r,i,s)}unsubscribeMultiFeed(e,r,i){return this.multiplexClient.unsubscribeMultiFeed(e,r,i)}unsubscribeMultiFeedSubChannel(e,r){return this.multiplexClient.unsubscribeMultiFeedSubChannel(e,r)}subscribeOrderbook(e,r,i=!1){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const s="orderbook";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=l=>{const c=this.extractRouterData(l);c&&(i&&c.bids&&Array.isArray(c.bids)&&(c.bids=c.bids.filter(u=>Array.isArray(u)&&u.length>=2).map(([u,h])=>[Ct(typeof u=="string"?u:String(u)),Ct(typeof h=="string"?h:String(h))])),i&&c.asks&&Array.isArray(c.asks)&&(c.asks=c.asks.filter(u=>Array.isArray(u)&&u.length>=2).map(([u,h])=>[Ct(u),Ct(h)])),r(c))};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(r,o),this.wsClient.on(s,o),this.wsClient.registerPendingSubscription(s);try{const l={type:"subscribe",channel:"orderbook",params:{market_id:e}};console.debug("[SubscriptionClient] Sending orderbook subscription:",l),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(r);const c=this.subscriptions.get(s)||[],u=c.indexOf(r);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeOrderbook(e,r){var o,a;const i="orderbook",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orderbook"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTrades(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="trades";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"trades",params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeTrades(e,r){var o,a;const i="trades",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"trades"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTicker(e,r){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="moniker",s="ticker";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=l=>{const c=this.extractRouterData(l);c&&r(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(r,o),this.wsClient.on(i,o);try{this.wsClient.send({type:"subscribe",channel:i,params:{market_id:e}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(r);const c=this.subscriptions.get(s)||[],u=c.indexOf(r);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeTicker(e,r){var a,l;const i="ticker",s="moniker",o=this.subscriptions.get(i)||[];if(r){const c=o.indexOf(r);if(c>-1){o.splice(c,1),this.subscriptions.set(i,o);const u=(a=this.wrappedCallbacks.get(i))==null?void 0:a.get(r);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(i).delete(r))}}else{const c=this.wrappedCallbacks.get(i);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((l=this.subscriptions.get(i))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:s})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeUserUpdates(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="positions";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"positions",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeUserUpdates(e){var s,o;const r="positions",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"positions"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeLastPrice(e,r,i=!0){if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const s="last_price";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],r]);const o=a=>{console.debug("[SubscriptionClient] last_price message received:",a);const l=this.extractRouterData(a);if(!l){console.warn("[SubscriptionClient] Failed to extract trade data from message:",a);return}if(console.debug("[SubscriptionClient] Extracted trade data:",l),!l.price){console.warn("[SubscriptionClient] Trade data missing price field:",l);return}i&&(l.price&&(l.price=Ct(typeof l.price=="string"?l.price:String(l.price))),l.quantity&&(l.quantity=Ct(typeof l.quantity=="string"?l.quantity:String(l.quantity)))),console.debug("[SubscriptionClient] Calling callback with trade data:",l),r(l)};this.lastPriceWrappedCallbacks.set(r,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"last_price",params:{market_id:e}})}catch(a){this.lastPriceWrappedCallbacks.delete(r);const l=this.subscriptions.get(s)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(s,l)),a}}unsubscribeLastPrice(e,r){var o;const i="last_price",s=this.subscriptions.get(i)||[];if(r){const a=s.indexOf(r);if(a>-1){s.splice(a,1),this.subscriptions.set(i,s);const l=this.lastPriceWrappedCallbacks.get(r);l&&(this.wsClient.off(i,l),this.lastPriceWrappedCallbacks.delete(r))}}else s.forEach(a=>{const l=this.lastPriceWrappedCallbacks.get(a);l&&(this.wsClient.off(i,l),this.lastPriceWrappedCallbacks.delete(a))}),this.subscriptions.delete(i);if(((o=this.subscriptions.get(i))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"last_price"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeFundingRate(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="funding_rate";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"funding_rate",params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeFundingRate(e,r){var o,a;const i="funding_rate",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"funding_rate"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeBuckets(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="buckets";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"buckets",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeBuckets(e){var s,o;const r="buckets",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"buckets"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeDeviation(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="deviation";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"deviation",params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeDeviation(e,r){var o,a;const i="deviation",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"deviation"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeIndexPrice(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="index_price";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"index_price",params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeIndexPrice(e,r){var o,a;const i="index_price",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"index_price"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeKline(e,r,i){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);if(!this.validateKlineInterval(r))throw new Error(`Invalid interval: ${r}. Interval must be one of: "1m", "5m", "15m", "1h", "4h", "1d".`);const s="kline";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],i]);const o=l=>{const c=this.extractRouterData(l);c&&i(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(i,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"kline",params:{market_id:e,interval:r}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(i);const c=this.subscriptions.get(s)||[],u=c.indexOf(i);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeKline(e,r,i){var a,l;const s="kline",o=this.subscriptions.get(s)||[];if(i){const c=o.indexOf(i);if(c>-1){o.splice(c,1),this.subscriptions.set(s,o);const u=(a=this.wrappedCallbacks.get(s))==null?void 0:a.get(i);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(s).delete(i))}}else{const c=this.wrappedCallbacks.get(s);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((l=this.subscriptions.get(s))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"kline"})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeMarkPrice(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="mark_price";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:i,params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeMarkPrice(e,r){var o,a;const i="mark_price",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"mark_price"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribePriceFeed(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);const i="price_feed";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],r]);const s=a=>{const l=this.extractRouterData(a);l&&r(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(r,s),this.wsClient.on(i,s);try{this.wsClient.send({type:"subscribe",channel:"price_feed",params:{market_id:e}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(r);const l=this.subscriptions.get(i)||[],c=l.indexOf(r);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribePriceFeed(e,r){var o,a;const i="price_feed",s=this.subscriptions.get(i)||[];if(r){const l=s.indexOf(r);if(l>-1){s.splice(l,1),this.subscriptions.set(i,s);const c=(o=this.wrappedCallbacks.get(i))==null?void 0:o.get(r);c&&(this.wsClient.off(i,c),this.wrappedCallbacks.get(i).delete(r))}}else{const l=this.wrappedCallbacks.get(i);l&&(l.forEach(c=>{this.wsClient.off(i,c)}),this.wrappedCallbacks.delete(i)),this.subscriptions.delete(i)}if(((a=this.subscriptions.get(i))==null?void 0:a.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"price_feed"})}catch(l){console.error("Failed to send unsubscribe message:",l)}}subscribeTWAP(e,r,i){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");if(!this.validateMarketId(e))throw new Error(`Invalid market ID: ${e}. Market ID must be a non-empty string.`);if(!this.validateTWAPWindowSize(r))throw new Error(`Invalid window size: ${r}. Window size must be a positive number.`);const s="twap";this.subscriptions.set(s,[...this.subscriptions.get(s)||[],i]);const o=l=>{const c=this.extractRouterData(l);c&&i(c)};this.wrappedCallbacks.has(s)||this.wrappedCallbacks.set(s,new Map),this.wrappedCallbacks.get(s).set(i,o),this.wsClient.on(s,o);try{this.wsClient.send({type:"subscribe",channel:"twap",params:{market_id:e,window_size:r}})}catch(l){(a=this.wrappedCallbacks.get(s))==null||a.delete(i);const c=this.subscriptions.get(s)||[],u=c.indexOf(i);throw u>-1&&(c.splice(u,1),this.subscriptions.set(s,c)),l}}unsubscribeTWAP(e,r,i){var a,l;const s="twap",o=this.subscriptions.get(s)||[];if(i){const c=o.indexOf(i);if(c>-1){o.splice(c,1),this.subscriptions.set(s,o);const u=(a=this.wrappedCallbacks.get(s))==null?void 0:a.get(i);u&&(this.wsClient.off(s,u),this.wrappedCallbacks.get(s).delete(i))}}else{const c=this.wrappedCallbacks.get(s);c&&(c.forEach(u=>{this.wsClient.off(s,u)}),this.wrappedCallbacks.delete(s)),this.subscriptions.delete(s)}if(((l=this.subscriptions.get(s))==null?void 0:l.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"twap"})}catch(c){console.error("Failed to send unsubscribe message:",c)}}subscribeBalances(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="balances";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"balances",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeBalances(e){var s,o;const r="balances",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"balances"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeOrders(e){var a;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");this.validatePrivateChannelAuth();const r="orders";this.subscriptions.set(r,[...this.subscriptions.get(r)||[],e]);const i=l=>{const c=this.extractRouterData(l);c&&e(c)};this.wrappedCallbacks.has(r)||this.wrappedCallbacks.set(r,new Map),this.wrappedCallbacks.get(r).set(e,i),this.wsClient.on(r,i),this.wsClient.registerPendingSubscription(r);const s=this.wsClient.config,o=s==null?void 0:s.authToken;try{const l={type:"subscribe",channel:"orders",params:{}};o&&(l.params.auth_token=o),this.wsClient.send(l)}catch(l){(a=this.wrappedCallbacks.get(r))==null||a.delete(e);const c=this.subscriptions.get(r)||[],u=c.indexOf(e);throw u>-1&&(c.splice(u,1),this.subscriptions.set(r,c)),l}}unsubscribeOrders(e){var s,o;const r="orders",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"orders"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}}class Mee{constructor(e){Be(this,"wsClient");Be(this,"subscriptions",new Map);Be(this,"wrappedCallbacks",new Map);if(e instanceof Ew)this.wsClient=e;else{const r=e;this.wsClient=new Ew({url:r.url,authToken:r.authToken,walletAddress:r.walletAddress,deviceID:r.deviceID})}}async connect(){await this.wsClient.connect()}disconnect(){this.wsClient.disconnect(),this.subscriptions.clear(),this.wrappedCallbacks.clear()}isConnected(){return this.wsClient.isConnected()}getState(){return this.wsClient.getState()}onStateChange(e){return this.wsClient.onStateChange(e)}setAuthToken(e,r,i){this.wsClient.setAuthToken(e,r,i)}async updateAuth(e,r,i){return this.wsClient.updateAuth(e,r,i)}isReadyForSubscriptions(){return this.wsClient.isReadyForSubscriptions()}getAuthState(){return this.wsClient.getAuthState()}async waitForSubscription(e,r=5e3){return this.wsClient.waitForSubscription(e,r)}parseRouterData(e){if(typeof e=="string")try{return JSON.parse(e)}catch(r){return console.error("Failed to parse router data field:",r),null}return e}extractRouterData(e){if(e.type==="data"&&e.data){const r=this.parseRouterData(e.data);return r||console.warn("[SubscriptionExplorer] Failed to parse router data:",e.data),r}return e.type==="error"&&e.error?(console.error("WebSocket error response:",e.error),null):(e.type==="ack"||(e.type!=="data"?console.debug("[SubscriptionExplorer] Unexpected message type:",e.type,"Full message:",e):e.data||console.warn("[SubscriptionExplorer] Message type is 'data' but missing data field:",e)),null)}subscribeConsensusFlat(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="consensus_flat";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],e]);const s=a=>{const l=this.extractRouterData(a);l&&e(l)};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(e,s),this.wsClient.on(i,s),this.wsClient.registerPendingSubscription(i);try{const a={};(r==null?void 0:r.shard_id)!==void 0&&(a.shard_id=r.shard_id.toString()),r!=null&&r.event_type&&(a.event_type=r.event_type),this.wsClient.send({type:"subscribe",channel:"consensus_flat",params:Object.keys(a).length>0?a:{}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(e);const l=this.subscriptions.get(i)||[],c=l.indexOf(e);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeConsensusFlat(e){var s,o;const r="consensus_flat",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"consensus_flat"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}subscribeTransactions(e,r){var o;if(!this.isConnected())throw new Error("WebSocket not connected. Call connect() first.");const i="transactions";this.subscriptions.set(i,[...this.subscriptions.get(i)||[],e]);const s=a=>{const l=this.extractRouterData(a);l&&(l&&typeof l=="object"&&l.event_type?e(l):console.warn("[SubscriptionExplorer] Invalid transaction event structure:",l))};this.wrappedCallbacks.has(i)||this.wrappedCallbacks.set(i,new Map),this.wrappedCallbacks.get(i).set(e,s),this.wsClient.on(i,s),this.wsClient.registerPendingSubscription(i);try{const a={};r!=null&&r.address&&(a.address=r.address),r!=null&&r.txhash&&(a.txhash=r.txhash),r!=null&&r.tx_types&&r.tx_types.length>0&&(a.tx_types=r.tx_types),(r==null?void 0:r.shard_id)!==void 0&&(a.shard_id=typeof r.shard_id=="number"?r.shard_id:parseInt(r.shard_id.toString(),10)),r!=null&&r.event_types&&r.event_types.length>0&&(a.event_types=r.event_types),this.wsClient.send({type:"subscribe",channel:"transactions",params:Object.keys(a).length>0?a:{}})}catch(a){(o=this.wrappedCallbacks.get(i))==null||o.delete(e);const l=this.subscriptions.get(i)||[],c=l.indexOf(e);throw c>-1&&(l.splice(c,1),this.subscriptions.set(i,l)),a}}unsubscribeTransactions(e){var s,o;const r="transactions",i=this.subscriptions.get(r)||[];if(e){const a=i.indexOf(e);if(a>-1){i.splice(a,1),this.subscriptions.set(r,i);const l=(s=this.wrappedCallbacks.get(r))==null?void 0:s.get(e);l&&(this.wsClient.off(r,l),this.wrappedCallbacks.get(r).delete(e))}}else{const a=this.wrappedCallbacks.get(r);a&&(a.forEach(l=>{this.wsClient.off(r,l)}),this.wrappedCallbacks.delete(r)),this.subscriptions.delete(r)}if(((o=this.subscriptions.get(r))==null?void 0:o.length)===0&&this.isConnected())try{this.wsClient.send({type:"unsubscribe",channel:"transactions"})}catch(a){console.error("Failed to send unsubscribe message:",a)}}}async function Ube(n,e,r,i,s){const o=wp.fromPhrase(n.trim(),"","m/44'/60'/0'/0/0");if(o.address.toLowerCase()!==e.toLowerCase())throw new Error(`Address mismatch: derived ${o.address} does not match provided ${e}`);let a;try{a=new ha(o.privateKey)}catch(S){throw new Error(`Invalid private key: cannot create signing key - ${S.message}`)}const l=jb(a.publicKey);if(l.toLowerCase()!==e.toLowerCase())throw new Error(`Private key validation failed: derived address ${l} does not match ${e}`);const c=BigInt(o.privateKey),u=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(c===0n||c>=u)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const d=c.toString(16).toLowerCase().padStart(64,"0"),f=St("0x"+d);if(f.length!==32)throw new Error(`Invalid private key: expected 32 bytes, got ${f.length}`);if(f.every(S=>S===0))throw new Error("Invalid private key: cannot be zero");const g=BigInt("0x"+d);if(g!==c)throw new Error(`Private key encoding error: bytes do not match BigInt value. Original: ${c.toString(16)}, Reconstructed: ${g.toString(16)}`);const b=d;if(b.length!==64)throw new Error(`Invalid private key format: expected exactly 64 hex chars, got ${b.length}. This should never happen with a valid 32-byte private key.`);if(!/^[0-9a-f]{64}$/.test(b))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");const y=b,v={action:i_,owner:e.toLowerCase(),nonce:r,timestamp:i,deadline:s},w={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:i,payload:v,deadline:parseInt(s,16)};console.log("[Onboard] Signing EIP-712 typed data with generateSingleSignature:",w),console.log("[Onboard] Private key format validated:",{length:y.length,format:"64 lowercase hex chars (no 0x prefix) - matches Go's hex.EncodeToString",preview:`${y.substring(0,8)}...${y.substring(56)}`,isValidSecp256k1:!0,withinCurveOrder:c<u,notZero:c!==0n,bytesLength:f.length,fullHex:y,firstByte:y.substring(0,2),lastByte:y.substring(62,64)}),console.log("[Onboard] Calling WASM GenerateSingleSignature with:",{txJSONLength:JSON.stringify(w).length,privateKeyHexLength:y.length,privateKeyHexPreview:y,signerAddress:e.toLowerCase()});const k=await At.generateSingleSignature(JSON.stringify(w),y,e.toLowerCase());if(console.log(k),!k.success||!k.signature)throw new Error(k.error||"Failed to generate signature");return console.log("[Onboard] signature:",k.signature),k.signature}async function Wbe(n){var e,r;try{const i=await Ube(n.mnemonic,n.walletAddress,n.message.nonce,n.message.timestamp,n.message.deadline);console.log("[Onboard] Signature generated successfully, length:",i.length);const s={address:n.walletAddress,signature:i,nonce:n.message.nonce,timestamp:n.timestamp,deadline:n.message.deadline,action:i_};n.username&&(s.username=n.username),n.referralCode&&(s.referral_code=n.referralCode),console.log("[Onboard] Request body:",{...s,signature:i.substring(0,20)+"..."});const a=await new V1(n.baseURL).post("/auth/v1/onboard",s);if(a.statusCode===200&&a.body){const l=a.body.access_token||a.body.authToken||a.body.token||a.body.accessToken,c=a.body.refresh_token||a.body.refreshToken,u=a.body.expires_at||a.body.expiresAt||(a.body.expires_in?n.timestamp+a.body.expires_in:void 0);return l?{success:!0,authToken:l,refreshToken:c,expiresAt:u}:{success:!1,error:"Response missing authToken field"}}else{const l=((e=a.body)==null?void 0:e.message)||((r=a.body)==null?void 0:r.error)||`HTTP ${a.statusCode}: ${a.body}`,c=new Error(l);throw c.responseBody=a.body,c.statusCode=a.statusCode,c}}catch(i){throw i}}const GN={auth:{maxRetries:4,baseDelay:500,maxDelay:3e3,jitter:!0,multiplier:2},http:{maxRetries:3,baseDelay:100,maxDelay:5e3,jitter:!0,multiplier:2},nonce:{maxRetries:5,baseDelay:200,maxDelay:2e3,jitter:!0,multiplier:1.5}};function qbe(n,e){let r=n.baseDelay*Math.pow(n.multiplier,e);if(r>n.maxDelay&&(r=n.maxDelay),n.jitter){const i=r*.25*Math.random();r+=i}return Math.floor(r)}function Hbe(n){return new Promise(e=>setTimeout(e,n))}async function o_(n,e,r=()=>!0){let i;for(let s=0;s<=n.maxRetries;s++)try{return await e()}catch(o){if(i=o,!await Promise.resolve(r(o)))throw o;if(s>=n.maxRetries)break;const l=qbe(n,s);await Hbe(l)}throw new Error(`Operation failed after ${n.maxRetries+1} attempts: ${(i==null?void 0:i.message)||i}`)}async function KN(n,e,r,i){try{At.isReady()||await At.initialize();const s=await At.generateAddress(n,0);if(!s.success||!s.address)return{success:!1,error:`Failed to generate address: ${s.error}`};const o=s.address.toLowerCase(),a=new cr({baseURL:e}),l=new mN(a);let c=null;try{return await o_(GN.auth,async()=>{console.log(`[Onboard] Attempt starting - currentNonce: ${c}`),c===null?(c=(await l.getExpectedNextNonce(o,!1)).next_nonce,console.log(`[Onboard] First attempt: queried server, using next nonce: ${c}`)):console.log(`[Onboard] Retry attempt: using incremented nonce ${c} from previous failure`);let h=0;const d=10;for(;h<d;)try{await l.validateNonce(o,c,!0);break}catch(y){if(h++,y.message.includes("already pending")||y.message.includes("already used")){if(c=c+1,console.log(`[Onboard] Nonce ${c-1} already pending, incrementing to ${c}`),h>=d)throw new Error(`Failed to find available nonce after ${d} attempts`)}else throw y}const f=Math.floor(Date.now()/1e3),m=f+3600,g={action:i_,owner:o,nonce:gI(c),timestamp:f,deadline:gI(m)};let b;try{b=await Wbe({mnemonic:n,walletAddress:o,message:g,baseURL:e,username:r,referralCode:i,timestamp:f})}catch(y){if(c!==null){const v=c;try{await l.rejectNonce(o,c,!0),c=c+1,console.log(`[Onboard] Rejected nonce ${v}, incremented to nonce ${c} (will use on retry)`)}catch(w){console.warn("[Onboard] Failed to reject nonce after thrown error:",w),c=c+1,console.log(`[Onboard] Incremented nonce to ${c} (reject failed but incrementing anyway)`)}}else console.warn("[Onboard] Error thrown but currentNonce is null, cannot reject/increment");throw y.currentNonce=c,y}if(!b.success){if(c!==null){const v=c;await l.rejectNonce(o,c,!0),c=c+1,console.log(`[Onboard] Request failed with nonce ${v}, rejected and incremented to ${c} (will keep incrementing until it works)`)}const y=new Error(b.error||"Onboarding failed");throw y.onboardResult=b,y}return c!==null&&await l.commitNonce(o,c,!0),b},async h=>{var v,w,k;const d=String(h).toLowerCase(),f=((v=h==null?void 0:h.message)==null?void 0:v.toLowerCase())||d,m=(h==null?void 0:h.responseBody)||(h==null?void 0:h.onboardResult),g=((w=m==null?void 0:m.error)==null?void 0:w.toLowerCase())||((k=m==null?void 0:m.message)==null?void 0:k.toLowerCase())||"";if(`${f} ${d} ${g}`.toLowerCase().includes("nonce already pending")){if(c!==null){const S=c;c=c+1,console.log(`[Onboard] Off-chain operation: nonce ${S} already pending/used, incrementing to ${c} (server will validate)`)}else try{c=(await l.getExpectedNextNonce(o,!1)).next_nonce,console.log(`[Onboard] currentNonce was null, queried server for starting nonce: ${c}`)}catch(S){console.warn("[Onboard] Failed to query server nonce:",S),c=1}return!0}return gN(h)?(console.log('[Onboard] Nonce-consuming error detected (not "already pending"), clearing currentNonce to force re-query'),c=null,!0):!["failed to generate address","address mismatch","invalid mnemonic"].some(S=>d.includes(S))})}catch(u){if(c!==null)try{await l.rejectNonce(o,c,!0)}catch(h){console.warn("[Onboard] Failed to reject nonce during cleanup:",h)}return{success:!1,error:(u==null?void 0:u.message)||"Unknown error during onboarding"}}}catch(s){return{success:!1,error:(s==null?void 0:s.message)||"Unknown error during onboarding"}}}const Vbe=Object.freeze(Object.defineProperty({__proto__:null,onboardAndGetAuthToken:KN},Symbol.toStringTag,{value:"Module"}));function wf(){if(typeof window>"u")return!1;const n=window.solana;return!!(n&&n.isPhantom)}function ol(){if(typeof window>"u")return null;const n=window.solana;return n&&n.isPhantom?n:null}async function XN(n){const e=n||ol();if(!e)throw new Error("Phantom Solana wallet not found");if(!e.isConnected)return(await e.connect()).publicKey.toString();if(e.publicKey)return e.publicKey.toString();throw new Error("Phantom Solana wallet is not connected")}async function Dee(n,e){n.isConnected||await n.connect();const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=await n.signMessage(i,"utf8"),o=Array.from(s.signature).map(l=>l.toString(16).padStart(2,"0")).join(""),a=s.publicKey.toString();return{signature:o,publicKey:a}}function Ha(){var e;if(typeof window>"u")return null;const n=(e=window.$onekey)==null?void 0:e.solana;return n||null}async function Ybe(n){const e=Ha();if(!e)throw new Error("OneKey Solana wallet not found");if(!e.isConnected)return(await e.connect()).publicKey.toString();if(e.publicKey)return e.publicKey.toString();throw new Error("OneKey Solana wallet is not connected")}async function Gbe(n,e){n.isConnected||await n.connect();const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=await n.signMessage(i,"utf8"),o=Array.from(s.signature).map(l=>l.toString(16).padStart(2,"0")).join(""),a=s.publicKey.toString();return{signature:o,publicKey:a}}function wu(){var e,r,i,s,o;if(typeof window>"u")return!1;if(((e=window.binancew3w)==null?void 0:e.isExtension)===!0&&((r=window.binancew3w)!=null&&r.solana))return!0;const n=window.solana;if(n){if(n.isBinance===!0)return!0;const a=n.name||n.providerName;if(typeof a=="string"&&a.toLowerCase().includes("binance")||((i=window.binancew3w)==null?void 0:i.isExtension)===!0)return!0}return!!((s=window.ethereum)!=null&&s.solana||(o=window.BinanceChain)!=null&&o.solana)}function uo(){var e,r,i,s,o;if(typeof window>"u")return null;if(((e=window.binancew3w)==null?void 0:e.isExtension)===!0&&((r=window.binancew3w)!=null&&r.solana))return window.binancew3w.solana;const n=window.solana;if(n){if(n.isBinance===!0)return n;const a=n.name||n.providerName;if(typeof a=="string"&&a.toLowerCase().includes("binance")||((i=window.binancew3w)==null?void 0:i.isExtension)===!0)return n}return(s=window.ethereum)!=null&&s.solana?window.ethereum.solana:(o=window.BinanceChain)!=null&&o.solana?window.BinanceChain.solana:null}async function Kbe(n){const e=uo();if(!e)throw new Error("Binance Solana wallet not found");if(!e.isConnected)return(await e.connect()).publicKey.toString();if(e.publicKey)return e.publicKey.toString();throw new Error("Binance Solana wallet is not connected")}function Nk(){if(typeof window>"u")return!1;const n=window.bitkeep;if(!n)return!1;const e=n.solana;return e&&typeof e.connect=="function"?(n.isBitKeep===!0||e.isBitKeep===!0,!0):!1}function Ru(){if(typeof window>"u")return null;const n=window.bitkeep;if(!n)return null;const e=n.solana;return e&&typeof e.connect=="function"?e:null}async function Xbe(n){const e=Ru();if(!e)throw new Error("Bitget Solana wallet not found");if(!(e.isConnected||typeof e.isConnected=="function"&&e.isConnected()))return(await e.connect()).publicKey.toString();if(e.publicKey)return e.publicKey.toString();throw new Error("Bitget Solana wallet is not connected")}async function Qbe(n,e){n.isConnected||await n.connect();const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=await n.signMessage(i,"utf8");return{signature:Array.from(s.signature).map(a=>a.toString(16).padStart(2,"0")).join(""),publicKey:s.publicKey.toString()}}function jk(){if(typeof window>"u")return!1;const n=window.solana;if(!n)return!1;if(n.name==="TokenPocket"||n.features&&n.features.name==="TokenPocket")return!0;try{const s=String(n),o=Object.values(n);if(s.includes("TokenPocket")||o.some(l=>String(l)==="TokenPocket"))return!0;const a=Object.getOwnPropertySymbols(n);for(const l of a){const c=n[l];if(c==="TokenPocket"||String(c)==="TokenPocket")return!0}}catch{}if(n.isPhantom===!0)return!1;const e=window.tokenpocket,r=window.ethereum,i=window.tp;if(typeof e<"u"&&n)return!0;if(i&&typeof i.isConnected=="function")try{if(i.isConnected()&&n)return!0}catch{}return!!((r==null?void 0:r.isTokenPocket)===!0&&n||n.isTokenPocket===!0||i&&typeof i=="object"&&n)}function NI(){if(typeof window>"u")return null;const n=window.solana;if(!n)return null;if(n.name==="TokenPocket"||n.features&&n.features.name==="TokenPocket")return n;try{const s=String(n),o=Object.values(n);if(s.includes("TokenPocket")||o.some(l=>String(l)==="TokenPocket"))return n;const a=Object.getOwnPropertySymbols(n);for(const l of a){const c=n[l];if(c==="TokenPocket"||String(c)==="TokenPocket")return n}}catch{}if(n.isPhantom===!0)return null;const e=window.tokenpocket,r=window.ethereum,i=window.tp;if(typeof e<"u")return n;if(i&&typeof i.isConnected=="function")try{if(i.isConnected())return n}catch{}return(r==null?void 0:r.isTokenPocket)===!0||n.isTokenPocket===!0||i&&typeof i=="object"?n:null}async function Jbe(n){const e=NI();if(!e)throw new Error("TokenPocket Solana wallet not found");if(!e.isConnected)return(await e.connect()).publicKey.toString();if(!e.publicKey)throw new Error("TokenPocket Solana wallet is connected but public key is not available");return e.publicKey.toString()}async function Zbe(n,e){n.isConnected||await n.connect();const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=await n.signMessage(i,"utf8");return{signature:Array.from(s.signature).map(a=>a.toString(16).padStart(2,"0")).join(""),publicKey:s.publicKey.toString()}}function _F(){if(typeof window>"u")return!1;const n=window.coinbaseSolana;if(n&&typeof n=="object"){const e=n._storage;if(e&&e.scope==="coinbaseSolana"||typeof n.connect=="function"&&typeof n.disconnect=="function"&&typeof n.signMessage=="function"&&typeof n.signTransaction=="function")return!0}return!1}function jI(){if(typeof window>"u")return null;const n=window.coinbaseSolana;if(n&&typeof n=="object"){const e=n._storage;if(e&&e.scope==="coinbaseSolana"||typeof n.connect=="function"&&typeof n.disconnect=="function"&&typeof n.signMessage=="function"&&typeof n.signTransaction=="function")return n}return null}async function eye(n){const e=jI();if(!e)throw new Error("Coinbase Wallet Solana wallet not found");if(!e.isConnected)return(await e.connect()).publicKey.toString();if(e.publicKey)return e.publicKey.toString();throw new Error("Coinbase Wallet Solana provider is connected but has no public key")}async function tye(n,e){n.isConnected||await n.connect();const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=await n.signMessage(i,"utf8"),o=Array.from(s.signature).map(l=>l.toString(16).padStart(2,"0")).join(""),a=s.publicKey.toString();return{signature:o,publicKey:a}}function nye(n){const e=ol();if(!e)return()=>{};let r=e.isConnected,i=null;const s=()=>{const a=e.isConnected;r&&!a&&(console.warn("[Phantom] Solana wallet disconnected (isConnected changed)"),n("Phantom","Connection lost")),r=a},o=()=>{console.warn("[Phantom] Solana wallet disconnected (event)"),n("Phantom","Disconnected"),r=!1};return e.on&&e.on("disconnect",o),i=setInterval(s,2e3),()=>{i&&(clearInterval(i),i=null),e.removeListener&&e.removeListener("disconnect",o)}}function rye(n){const e=Ha();if(!e)return()=>{};let r=e.isConnected,i=null;const s=()=>{const a=e.isConnected;r&&!a&&(console.warn("[OneKey] Solana wallet disconnected (isConnected changed)"),n("OneKey","Connection lost")),r=a},o=()=>{console.warn("[OneKey] Solana wallet disconnected (event)"),n("OneKey","Disconnected"),r=!1};return e.on&&e.on("disconnect",o),i=setInterval(s,2e3),()=>{i&&(clearInterval(i),i=null),e.removeListener&&e.removeListener("disconnect",o)}}function iye(n){const e=uo();if(!e)return()=>{};let r=e.isConnected,i=null;const s=()=>{const a=e.isConnected;r&&!a&&(console.warn("[Binance] Solana wallet disconnected (isConnected changed)"),n("Binance","Connection lost")),r=a},o=()=>{console.warn("[Binance] Solana wallet disconnected (event)"),n("Binance","Disconnected"),r=!1};return e.on&&e.on("disconnect",o),i=setInterval(s,2e3),()=>{i&&(clearInterval(i),i=null),e.removeListener&&e.removeListener("disconnect",o)}}const SF=n=>{let e;const r=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(m=>m(e,f))}},s=()=>e,l={setState:i,getState:s,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=n(i,s,l);return l},sye=n=>n?SF(n):SF,oye=n=>n;function aye(n,e=oye){const r=Ke.useSyncExternalStore(n.subscribe,Ke.useCallback(()=>e(n.getState()),[n,e]),Ke.useCallback(()=>e(n.getInitialState()),[n,e]));return Ke.useDebugValue(r),r}const kF=n=>{const e=sye(n),r=i=>aye(e,i);return Object.assign(r,e),r},lye=n=>n?kF(n):kF,vn=lye((n,e)=>({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,selectedMarketId:null,loadingMarkets:!1,loadingOrderbooks:new Set,loadingTickers:new Set,loadingTrades:new Set,errors:new Map,setMarkets:r=>{const i=new Map,s=new Map;r.forEach(l=>{i.set(l.id,l),l.symbol&&s.set(l.symbol,l),l.moniker&&s.set(l.moniker,l)});let a=e().selectedMarketId;if(!a&&r.length>0){const u=(r.find(h=>h.active)||r[0]).market_id;u&&(a=u)}n({markets:r,marketsById:i,marketsBySymbol:s,selectedMarketId:a,lastUpdated:new Map(e().lastUpdated).set("markets",Date.now())})},setMarket:r=>{const i=e(),s=new Map(i.marketsById),o=new Map(i.marketsBySymbol);s.set(r.id,r),r.symbol&&o.set(r.symbol,r),r.moniker&&o.set(r.moniker,r);const a=i.markets.find(l=>l.id===r.id)?i.markets.map(l=>l.id===r.id?r:l):[...i.markets,r];n({markets:a,marketsById:s,marketsBySymbol:o})},getMarket:r=>e().marketsById.get(r),getMarketBySymbol:r=>e().marketsBySymbol.get(r),setSelectedMarketId:r=>{n({selectedMarketId:r})},setOrderbook:(r,i)=>{const s=e(),o=new Map(s.orderbooks);o.set(r,{...i,timestamp:Date.now()}),n({orderbooks:o,lastUpdated:new Map(s.lastUpdated).set(r,Date.now())})},getOrderbook:r=>e().orderbooks.get(r),updateOrderbook:(r,i)=>{const s=e(),o=s.orderbooks.get(r);if(o){const a={...o,...i,timestamp:Date.now()};s.setOrderbook(r,a)}else s.setOrderbook(r,{bids:i.bids||[],asks:i.asks||[],timestamp:Date.now()})},setTicker:(r,i)=>{const s=e(),o=new Map(s.tickers);o.set(r,{...i,marketId:r,timestamp:Date.now()}),n({tickers:o,lastUpdated:new Map(s.lastUpdated).set(`ticker_${r}`,Date.now())})},getTicker:r=>e().tickers.get(r),setRecentTrades:(r,i)=>{const s=e(),o=new Map(s.recentTrades);o.set(r,i),n({recentTrades:o,lastUpdated:new Map(s.lastUpdated).set(`trades_${r}`,Date.now())})},getRecentTrades:r=>e().recentTrades.get(r),setLoading:(r,i)=>{const s=e();if(r==="markets")n({loadingMarkets:i});else if(r.startsWith("orderbook_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingOrderbooks);i?a.add(o):a.delete(o),n({loadingOrderbooks:a})}else if(r.startsWith("ticker_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingTickers);i?a.add(o):a.delete(o),n({loadingTickers:a})}else if(r.startsWith("trades_")){const o=r.split("_").slice(1).join("_"),a=new Set(s.loadingTrades);i?a.add(o):a.delete(o),n({loadingTrades:a})}},setError:(r,i)=>{const s=e(),o=new Map(s.errors);i?o.set(r,i):o.delete(r),n({errors:o})},clearError:r=>{e().setError(r,null)},clearCache:r=>{const i=e();if(r){const s=new Map(i.orderbooks),o=new Map(i.tickers),a=new Map(i.recentTrades),l=new Map(i.lastUpdated);s.delete(r),o.delete(r),a.delete(r),l.delete(r),l.delete(`ticker_${r}`),l.delete(`trades_${r}`),n({orderbooks:s,tickers:o,recentTrades:a,lastUpdated:l})}else n({orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map})},clearAllCache:()=>{n({markets:[],marketsById:new Map,marketsBySymbol:new Map,orderbooks:new Map,tickers:new Map,recentTrades:new Map,lastUpdated:new Map,errors:new Map,selectedMarketId:null})}})),cye=Object.freeze(Object.defineProperty({__proto__:null,ConnectionState:kt,ExchangeClient:iu,HttpClient:V1,InfoClient:cr,NonceManager:mN,OpBankBucketTransfer:WN,OpBankExtractToBucket:zN,OpBankMint:BN,OpBankTransfer:qN,OpBankWithdrawFromBucket:UN,OpCancelOrder:Sw,OpChangeLeverage:bee,OpChangeMarginRatio:NN,OpClosePosition:kw,OpCreateMarginBucket:yee,OpInternTransfer:FN,OpModifyOrder:LN,OpSubmitOrder:jN,OpSwap:$N,OpUpdatePositionLeverage:gee,OperationTypeOnboard:i_,SATOSHI_SCALE:Bc,SubscriptionClient:_p,SubscriptionExplorer:Mee,WebSocketClient:Ew,calculateRiskRatio:Sx,connectPhantomSolana:XN,convertMultiFeedToRawBucket:VN,fromSatoshi:Ct,fromSatoshiBatch:JJ,getDisplayMarginType:sf,getPhantomSolanaProvider:ol,initWasm:ZJ,isLastPriceData:Uh,isMarkPriceData:kx,isMultiFeedBalances:kee,isMultiFeedBuckets:See,isMultiFeedLastPrice:MI,isMultiFeedOrderbook:vee,isMultiFeedOrders:_ee,isMultiFeedPositions:wee,isMultiFeedPriceFeed:Cee,isMultiFeedTrades:xee,isPhantomSolanaAvailable:wf,isRawBucket:YN,isValidSatoshi:mI,mormSigner:At,onboardAndGetAuthToken:KN,signSolanaMessage:Dee,toSatoshi:un,toSatoshiBatch:QJ,toSatoshiUint64:pN,transformPosition:AI,transformRawBucketToBucket:Cw,transformRawOrderToPendingOrder:RI,transformRawTradesToRecentTradeDos:II,useMarketStore:vn},Symbol.toStringTag,{value:"Module"}));function uye(){const[n,e]=E.useState({loading:!0,loaded:!1,error:null}),[r,i]=E.useState({initialized:!1,wasmLoaded:!1,ready:!1});E.useEffect(()=>{(async()=>{try{e(l=>({...l,loading:!0,error:null})),await At.initialize()?(e({loading:!1,loaded:!0,error:null}),i(At.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),i(At.getStatus()))}catch(a){e({loading:!1,loaded:!1,error:a instanceof Error?a.message:"Unknown error"}),i(At.getStatus())}})()},[]),E.useEffect(()=>{if(n.loaded){const o=setInterval(()=>{i(At.getStatus())},1e3);return()=>clearInterval(o)}},[n.loaded]);const s=async()=>{e({loading:!0,loaded:!1,error:null});try{await At.initialize()?(e({loading:!1,loaded:!0,error:null}),i(At.getStatus())):(e({loading:!1,loaded:!1,error:"Failed to load WASM module"}),i(At.getStatus()))}catch(o){e({loading:!1,loaded:!1,error:o instanceof Error?o.message:"Unknown error"}),i(At.getStatus())}};return{wasmStatus:n,isReady:n.loaded&&r.ready,status:r,retry:s}}async function Tw(n,e,r=0,i=!0){const s=n.trim();if(!s)return{success:!1,error:"Mnemonic phrase is required"};if(!At.isReady())try{await At.initialize()}catch(o){return{success:!1,error:o instanceof Error?o.message:"Failed to initialize WASM module"}}try{return e!=="ethereum"?await At.generateAddressChain(s,e,r,i):await At.generateAddress(s,r)}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error during address generation"}}}function dye(n="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about",e=0,r="ethereum",i=!0){const[s,o]=E.useState(n),[a,l]=E.useState(e),[c,u]=E.useState(r),[h,d]=E.useState(i),[f,m]=E.useState(null),[g,b]=E.useState(!1);return{mnemonic:s,setMnemonic:o,addressIndex:a,setAddressIndex:l,chainType:c,setChainType:u,isMainnet:h,setIsMainnet:d,result:f,loading:g,generateAddress:async()=>{b(!0),m(null);try{const v=await Tw(s,c,a,h);m(v)}catch(v){m({success:!1,error:v instanceof Error?v.message:"Unknown error"})}finally{b(!1)}},isReady:At.isReady()}}function hye(){const[n,e]=E.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[r,i]=E.useState("Hello, World!"),[s,o]=E.useState(!1),[a,l]=E.useState(0),[c,u]=E.useState(null),[h,d]=E.useState(!1);return{mnemonic:n,setMnemonic:e,message:r,setMessage:i,useEIP712:s,setUseEIP712:o,addressIndex:a,setAddressIndex:l,result:c,loading:h,signMessage:async()=>{if(!At.isReady()){u({success:!1,error:"WASM module not ready"});return}d(!0),u(null);try{const m={addressIndex:a,useEIP712:s},g=s?await At.signEIP712(n,r,m):await At.signMessage(n,r,m);u(g)}catch(m){u({success:!1,error:m instanceof Error?m.message:"Unknown error"})}finally{d(!1)}},isReady:At.isReady()}}function Oee(){var i,s,o,a,l,c;if(typeof window>"u")return[];const n=[],e=!!window.$onekey;return(i=window.$onekey)!=null&&i.btc?n.push({name:"OneKey",provider:window.$onekey.btc,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"}):e&&window.unisat&&n.push({name:"OneKey",provider:window.unisat,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"}),window.unisat&&!e&&n.push({name:"Unisat",provider:window.unisat,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"}),(window.BitcoinProvider||window.XverseProvider)&&n.push({name:"Xverse",provider:window.BitcoinProvider||window.XverseProvider,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"}),(s=window.okxwallet)!=null&&s.bitcoin&&n.push({name:"OKX",provider:window.okxwallet.bitcoin,isAvailable:!0,supportsBIP322:!1,addressFormat:"all"}),(!!((o=window.bitkeep)!=null&&o.isBitKeep)||!!((l=(a=window.bitkeep)==null?void 0:a.ethereum)!=null&&l.isBitEthereum))&&((c=window.bitkeep)!=null&&c.unisat?n.push({name:"Bitget",provider:window.bitkeep.unisat,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"}):window.unisat&&!e&&n.push({name:"Bitget",provider:window.unisat,isAvailable:!0,supportsBIP322:!0,addressFormat:"all"})),n}function hc(){const n=Oee();return n.find(e=>e.name==="OneKey")||n.find(e=>e.name==="Unisat")||n.find(e=>e.name==="Xverse")||n.find(e=>e.name==="OKX")||n.find(e=>e.name==="Bitget")||n[0]||null}function Ga(){return Oee().length>0}function kh(){return typeof window>"u"?!1:!!window.okxwallet}function fye(n){try{if(typeof Buffer>"u"){const e=atob(n);return Array.from(e).map(r=>r.charCodeAt(0).toString(16).padStart(2,"0")).join("")}return Buffer.from(n,"base64").toString("hex")}catch(e){throw new Error(`Failed to convert base64 to hex: ${e}`)}}function a_(n,e){return e==="base64"?fye(n):e==="bip322"?n:n.startsWith("0x")?n.slice(2):n}async function pye(n,e="bip137"){const r=window.unisat;if(!r)throw new Error("Unisat wallet not found");const i=await r.requestAccounts();if(i.length===0)throw new Error("No accounts found in Unisat wallet");const s=i[0];let o;return e==="bip322"?o=await r.signMessage(n,"bip322-simple"):o=await r.signMessage(n,"ecdsa"),{signature:a_(o,e==="bip322"?"bip322":"compact"),address:s,method:e,format:e==="bip322"?"bip322":"compact"}}async function mye(n,e){const r=window.BitcoinProvider||window.XverseProvider;if(!r)throw new Error("Xverse wallet not found");const i=await r.request("signMessage",{address:e,message:n});return{signature:a_(i.signature,"base64"),address:i.address,method:"bip137",format:"compact"}}async function gye(n,e){var o;const r=(o=window.okxwallet)==null?void 0:o.bitcoin;if(!r)throw new Error("OKX Bitcoin wallet not found");if(!(await r.connect()).includes(e))throw new Error("Address not found in OKX wallet");const s=await r.signMessage(n,e);return{signature:a_(s,"compact"),address:e,method:"bip137",format:"compact"}}async function bye(n,e="bip137"){var a;let r=null;if((a=window.$onekey)!=null&&a.btc?r=window.$onekey.btc:window.$onekey&&window.unisat&&(r=window.unisat),!r)throw new Error("OneKey Bitcoin wallet not found");const i=await r.requestAccounts();if(i.length===0)throw new Error("No accounts found in OneKey Bitcoin wallet");const s=i[0];let o;return e==="bip322"?o=await r.signMessage(n,"bip322-simple"):o=await r.signMessage(n,"ecdsa"),{signature:a_(o,e==="bip322"?"bip322":"compact"),address:s,method:e,format:e==="bip322"?"bip322":"compact"}}async function yye(n,e,r="bip137"){const i=JSON.stringify(n),s=hc();if(!s)throw new Error("No Bitcoin wallet found. Please install OneKey, Unisat, Xverse, or OKX wallet.");const o=r==="bip322"&&s.supportsBIP322?"bip322":"bip137";try{if(s.name==="OneKey")return await bye(i,o);if(s.name==="Unisat")return await pye(i,o);if(s.name==="Xverse"){if(!e){const a=await s.provider.getAccounts();if(a.length===0)throw new Error("No accounts found in Xverse wallet");e=a[0]}if(!e)throw new Error("Address is required for Xverse signing");return await mye(i,e)}else if(s.name==="OKX"){if(!e){const a=await s.provider.connect();if(a.length===0)throw new Error("No accounts found in OKX wallet");e=a[0]}if(!e)throw new Error("Address is required for OKX signing");return await gye(i,e)}else throw new Error(`Unsupported wallet: ${s.name}`)}catch(a){throw new Error(`Failed to sign with ${s.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}async function Iee(){const n=hc();if(!n)throw new Error("No Bitcoin wallet found");try{if(n.name==="OneKey"){const e=await n.provider.requestAccounts();if(e.length===0)throw new Error("No accounts found in OneKey Bitcoin wallet");return e[0]}else if(n.name==="Unisat"){const e=await n.provider.requestAccounts();if(e.length===0)throw new Error("No accounts found in Unisat wallet");return e[0]}else if(n.name==="Xverse"){const e=await n.provider.getAccounts();if(e.length===0)throw new Error("No accounts found in Xverse wallet");return e[0]}else if(n.name==="OKX"){let e;if(typeof n.provider.requestAccounts=="function"){const r=await n.provider.requestAccounts();r&&r.length>0&&(e=r[0])}if(!e&&typeof n.provider.connect=="function"){const r=await n.provider.connect();Array.isArray(r)?r.length>0&&(e=r[0]):r&&typeof r=="object"&&(r.address?e=r.address:Array.isArray(r.accounts)&&r.accounts.length>0&&(e=r.accounts[0]))}if(!e)throw new Error("No accounts found in OKX wallet");return e}else throw new Error(`Unsupported wallet: ${n.name}`)}catch(e){throw new Error(`Failed to get address from ${n.name}: ${e instanceof Error?e.message:"Unknown error"}`)}}const vye="onboard_mnemonic",xye="onboard_wallet_address",wye="onboard_chain_type",Ch="agent_delegation_address",Eh="agent_delegation_private_key",Th="agent_delegation_expires_at",_u="agent_delegation_owner_address";function Sp(){var r,i,s,o;if(typeof window>"u")return!1;const n=window.ethereum;if(!n)return!1;if(n.isMetaMask===!0){if(n._metamask&&typeof n._metamask=="object"||((r=n.providerInfo)==null?void 0:r.rdns)==="io.metamask"||((i=n.providerInfo)==null?void 0:i.name)==="MetaMask"||(s=n.providerInfo)!=null&&s.uuid&&typeof n.providerInfo.uuid=="string"&&n.providerInfo.uuid.length>0)return!0;const a=!!window.okxwallet,l=Uc(),c=!!window.$onekey||n.isOneKey,u=!!((o=window.phantom)!=null&&o.ethereum)||n.isPhantom;if(!a&&!l&&!c&&!u)return!0}const e=window.solana;return(e==null?void 0:e.isMetaMask)===!0}function Uc(){var r,i,s,o,a,l,c,u;if(typeof window>"u")return!1;if(((r=window.binancew3w)==null?void 0:r.isExtension)===!0||window.BinanceChain)return!0;const n=window.ethereum;if(n!=null&&n.isBinance)return!0;if(n){const h=n.providerName||n.name||((i=n._state)==null?void 0:i.name)||(((s=n._metamask)==null?void 0:s.isUnlocked)===void 0?"Binance":null);if(typeof h=="string"&&h.toLowerCase().includes("binance"))return!0}if(n!=null&&n._postMessageToMp&&typeof n._postMessageToMp=="function"&&(n==null?void 0:n.namespace)==="eip155"||((o=window.binancew3w)==null?void 0:o.isExtension)===!0&&((a=window.binancew3w)!=null&&a.solana))return!0;const e=window.solana;if(e){if(e.isBinance===!0)return!0;const h=e.name||e.providerName;if(typeof h=="string"&&h.toLowerCase().includes("binance")||((l=window.binancew3w)==null?void 0:l.isExtension)===!0)return!0}return!!((c=window.ethereum)!=null&&c.solana||(u=window.BinanceChain)!=null&&u.solana)}function ml(){var a,l,c;if(typeof window>"u")return!1;const n=window.bitkeep;if(!n)return!1;if(n.isBitKeep===!0||((a=n.ethereum)==null?void 0:a.isBitEthereum)===!0)return!0;const e=!!n.ethereum&&typeof n.ethereum.request=="function",r=!!n.solana&&typeof n.solana.connect=="function",i=!!n.unisat,s=!!n.tronLink;if([e,r,i,s].filter(Boolean).length>=2||((l=n.solana)==null?void 0:l.isBitKeep)===!0)return!0;if(e){const u=!!window.okxwallet,h=Uc(),d=!!window.$onekey,f=!!((c=window.phantom)!=null&&c.ethereum),m=Sp();if(!u&&!h&&!d&&!f&&!m)return!0}return!1}function CF(){if(typeof window>"u")return null;const n=window.bitkeep;return!n||!ml()?null:n.ethereum&&typeof n.ethereum.request=="function"&&(n.ethereum.isBitEthereum===!0||n.isBitKeep===!0)?n.ethereum:null}async function EF(n=3e3,e=100){return typeof window>"u"?!1:ml()||typeof document<"u"&&document.readyState!=="complete"&&(await new Promise(r=>{if(document.readyState==="complete")r();else{const i=()=>{document.readyState==="complete"&&(document.removeEventListener("readystatechange",i),r())};document.addEventListener("readystatechange",i)}}),ml())?!0:new Promise(r=>{const i=Date.now();let s=0;const o=Math.ceil(n/e),a=()=>{if(s++,ml()){r(!0);return}if(Date.now()-i>=n||s>=o){r(!1);return}setTimeout(a,e)};a()})}function gl(){var h;if(typeof window>"u")return!1;if(typeof window.tokenpocket<"u")return!0;const n=window.ethereum;if(!n)return!1;if(n.isTokenPocket===!0||window.tp&&typeof window.tp=="object"||n.isTokenPocket!==void 0)return!0;const e=!!window.solana,r=!!window.unisat,i=e&&r,s=!!window.okxwallet,o=Uc(),a=!!window.$onekey,l=!!((h=window.phantom)!=null&&h.ethereum),c=Sp(),u=ml();return i&&!s&&!o&&!a&&!l&&!c&&!u&&n&&typeof n.request=="function",!1}function _ye(){return gl()}function Sye(){if(typeof window>"u")return!1;const n=window.solana;if(!n)return!1;if(n.name==="TokenPocket"||n.features&&n.features.name==="TokenPocket")return!0;try{const s=String(n),o=Object.values(n);if(s.includes("TokenPocket")||o.some(l=>String(l)==="TokenPocket"))return!0;const a=Object.getOwnPropertySymbols(n);for(const l of a){const c=n[l];if(c==="TokenPocket"||String(c)==="TokenPocket")return!0}}catch{}if(n.isPhantom===!0)return!1;const e=window.tokenpocket,r=window.ethereum,i=window.tp;if(typeof e<"u")return!0;if(i&&typeof i.isConnected=="function")try{if(i.isConnected())return!0}catch{}return!!((r==null?void 0:r.isTokenPocket)===!0||i&&typeof i=="object")}function TF(){if(typeof window>"u")return null;const n=window.ethereum;return!n||!gl()?null:n&&typeof n.request=="function"?n:null}async function PF(n=3e3,e=100){return typeof window>"u"?!1:gl()||typeof document<"u"&&document.readyState!=="complete"&&(await new Promise(r=>{if(document.readyState==="complete")r();else{const i=()=>{document.readyState==="complete"&&(document.removeEventListener("readystatechange",i),r())};document.addEventListener("readystatechange",i)}}),gl())?!0:new Promise(r=>{const i=Date.now();let s=0;const o=Math.ceil(n/e),a=()=>{if(s++,gl()){r(!0);return}if(Date.now()-i>=n||s>=o){r(!1);return}setTimeout(a,e)};a()})}function Wc(){if(typeof window>"u")return!1;const n=window.ethereum;if(!n)return!1;let e=n;if(Array.isArray(n.providers)){if(e=n.providers.find(r=>r.isCoinbaseWallet),!e)return!1}else if(!n.isCoinbaseWallet)return!1;return!(!e.isCoinbaseWallet||typeof e.host!="string"||!e.host.includes("coinbase.com")||typeof e.jsonRpcUrl!="string"||!e.jsonRpcUrl.includes("coinbase.com")||e.overridesMetaMask!==!1&&e.overridesMetaMask!==void 0||!e.isWalletLink||typeof window.CoinbaseWalletProvider!="function"||typeof window.WalletLinkProvider!="function")}function MF(){if(typeof window>"u")return null;const n=window.ethereum;if(!n)return null;if(Array.isArray(n.providers)){const e=n.providers.find(r=>r.isCoinbaseWallet);if(e&&typeof e.request=="function")return e}else if(n.isCoinbaseWallet&&typeof n.request=="function")return n;return null}function kye(){if(typeof window>"u")return!1;const n=window.coinbaseSolana;if(n&&typeof n=="object"){const e=n._storage;if(e&&e.scope==="coinbaseSolana"||typeof n.connect=="function"&&typeof n.disconnect=="function"&&typeof n.signMessage=="function"&&typeof n.signTransaction=="function")return!0}return!1}async function DF(n=3e3,e=100){return typeof window>"u"?!1:Wc()||typeof document<"u"&&document.readyState!=="complete"&&(await new Promise(r=>{if(document.readyState==="complete")r();else{const i=()=>{document.readyState==="complete"&&(document.removeEventListener("readystatechange",i),r())};document.addEventListener("readystatechange",i)}}),Wc())?!0:new Promise(r=>{const i=Date.now();let s=0;const o=Math.ceil(n/e),a=()=>{if(s++,Wc()){r(!0);return}if(Date.now()-i>=n||s>=o){r(!1);return}setTimeout(a,e)};a()})}async function Lk(n=3e3,e=100){return typeof window>"u"?!1:Uc()||typeof document<"u"&&document.readyState!=="complete"&&(await new Promise(r=>{if(document.readyState==="complete")r();else{const i=()=>{document.readyState==="complete"&&(document.removeEventListener("readystatechange",i),r())};document.addEventListener("readystatechange",i)}}),Uc())?!0:new Promise(r=>{const i=Date.now();let s=0;const o=Math.ceil(n/e),a=()=>{if(s++,Uc()){r(!0);return}if(Date.now()-i>=n||s>=o){r(!1);return}setTimeout(a,e)};a()})}function OF(){var e,r;if(typeof window>"u")return null;if(((e=window.binancew3w)==null?void 0:e.isExtension)===!0){const i=window.ethereum;if(i)return i}if(window.BinanceChain)return window.BinanceChain;const n=window.ethereum;if(n){if(n.isBinance)return n;const i=n.providerName||n.name||((r=n._state)==null?void 0:r.name);if(typeof i=="string"&&i.toLowerCase().includes("binance")||n._postMessageToMp&&typeof n._postMessageToMp=="function"&&(n==null?void 0:n.namespace)==="eip155")return n}return null}function Su(){var i,s,o,a,l,c,u,h,d;if(typeof window>"u")return null;if(((i=window.phantom)!=null&&i.ethereum||(s=window.ethereum)!=null&&s.isPhantom)&&!(window.$onekey||(o=window.ethereum)!=null&&o.isOneKey))return"phantom";if((a=window.$onekey)!=null&&a.ethereum||(l=window.ethereum)!=null&&l.isOneKey||window.$onekey)return"onekey";const n=!!((c=window.okxwallet)!=null&&c.solana),e=!!((u=window.okxwallet)!=null&&u.bitcoin);if(n&&e&&window.ethereum||(h=window.okxwallet)!=null&&h.ethereum||(d=window.ethereum)!=null&&d.isOKX||window.okxwallet)return"okx";if(ml())return"bitget";if(gl())return"tokenpocket";if(Wc())return"coinbase";if(Uc())return"binance";if(Sp())return"metamask";if(window.ethereum){if(ml())return"bitget";if(gl())return"tokenpocket";if(Wc())return"coinbase";const f=Uc(),m=Wc();if(Sp()&&!window.okxwallet&&!f&&!m)return"metamask";if(window.okxwallet)return"okx";if(f)return"binance";if(m)return"coinbase"}return null}function Cye(n){return n==="metamask"||n==="phantom"||n==="onekey"||n==="okx"||n==="binance"||n==="bitget"||n==="tokenpocket"||n==="coinbase"}function Eye(n,e,r=180,i="clob::submit_order,clob::cancel_order",s="BrowserUserAgent",o,a=0,l=!0){const c=()=>{if(n!=null&&n.mnemonic)return n.mnemonic;if(typeof window<"u"){const xe=localStorage.getItem(vye);if(xe)return xe}return"abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"},u=()=>{if(n!=null&&n.chainType)return n.chainType;if(typeof window<"u"){const xe=localStorage.getItem(wye);if(xe&&["ethereum","bitcoin_taproot","bitcoin_segwit","bitcoin_legacy","bitcoin_nested_segwit","solana"].includes(xe))return xe}return"ethereum"},h=()=>{if(n!=null&&n.walletAddress)return n.walletAddress;if(typeof window<"u"){const xe=localStorage.getItem(xye);if(xe)return xe}return""},[d,f]=E.useState(c()),[m,g]=E.useState(h()),[b,y]=E.useState(u()),[v,w]=E.useState(a),[k,S]=E.useState(l),[_,C]=E.useState(""),[P,T]=E.useState(""),[O,D]=E.useState(r),[I,U]=E.useState(i),[B,z]=E.useState(s),[j,F]=E.useState(Date.now().toString()),[N,R]=E.useState(null),[W,Y]=E.useState(!1);E.useEffect(()=>{n&&(n.mnemonic&&n.mnemonic!==d&&f(n.mnemonic),n.walletAddress&&n.chainType===b&&n.walletAddress!==m&&g(n.walletAddress),n.chainType&&n.chainType!==b&&y(n.chainType))},[n==null?void 0:n.mnemonic,n==null?void 0:n.walletAddress,n==null?void 0:n.chainType,d,m,b]),E.useEffect(()=>{try{const xe=sessionStorage.getItem(Ch),L=sessionStorage.getItem(Eh),re=sessionStorage.getItem(Th),fe=sessionStorage.getItem(_u);if(xe&&L&&re){const le=parseInt(re,10),ce=Date.now();!isNaN(le)&&ce<le&&(!fe||!m||fe.toLowerCase()===m.toLowerCase())?(C(xe),T(L)):(sessionStorage.removeItem(Ch),sessionStorage.removeItem(Eh),sessionStorage.removeItem(Th),sessionStorage.removeItem(_u))}}catch(xe){console.warn("Failed to restore agent credentials from sessionStorage:",xe)}},[]),E.useEffect(()=>{if(m){const xe=sessionStorage.getItem(_u);xe&&xe.toLowerCase()!==m.toLowerCase()&&(sessionStorage.removeItem(Ch),sessionStorage.removeItem(Eh),sessionStorage.removeItem(Th),sessionStorage.removeItem(_u),C(""),T(""))}},[m]);const K=async()=>{await H(b,v,k)},H=async(xe=b,L=v,re=k)=>{Y(!0);try{const fe=await Tw(d,xe,L,re);fe.success&&fe.address?(g(fe.address),xe!==b&&y(xe),L!==v&&w(L),re!==k&&S(re)):R({success:!1,error:fe.error||"Failed to generate owner address"})}catch(fe){R({success:!1,error:fe instanceof Error?fe.message:"Unknown error"})}finally{Y(!1)}},Q=async()=>{if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}Y(!0);try{const xe=await At.generateKeypair();if(xe.success&&xe.address&&xe.privateKey){C(xe.address),T(xe.privateKey);try{const L=Date.now()+O*24*60*60*1e3;sessionStorage.setItem(Ch,xe.address),sessionStorage.setItem(Eh,xe.privateKey),sessionStorage.setItem(Th,L.toString()),m&&sessionStorage.setItem(_u,m)}catch(L){console.warn("Failed to store agent credentials in sessionStorage:",L)}}else R({success:!1,error:xe.error||"Failed to generate agent keypair"})}catch(xe){R({success:!1,error:xe instanceof Error?xe.message:"Unknown error"})}finally{Y(!1)}},G=async()=>{if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner and agent addresses are required"});return}Y(!0),R(null);try{const xe=I.split(",").map(re=>re.trim()).filter(re=>re.length>0),L=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:xe,nonce:j,agentName:B});R(L)}catch(xe){R({success:!1,error:xe instanceof Error?xe.message:"Unknown error"})}finally{Y(!1)}},{address:X,isConnected:de,connector:ye}=hN(),{signTypedDataAsync:se,isPending:ie}=fN(),Pe=()=>{var re;if(!de||!ye)return null;const xe=Su();if(Cye(xe))return xe;const L=((re=ye.name)==null?void 0:re.toLowerCase())||"";return L.includes("phantom")?"phantom":L.includes("onekey")?"onekey":L.includes("okx")?"okx":L.includes("binance")?"binance":L.includes("bitget")||L.includes("bitkeep")?"bitget":L.includes("tokenpocket")||L.includes("tp")?"tokenpocket":L.includes("coinbase")?"coinbase":L.includes("metamask")?"metamask":null},ke=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your MetaMask wallet first"});return}if(Pe()!=="metamask"){const fe=Su();R(fe==="metamask"?{success:!1,error:'MetaMask wallet detected but not connected via wagmi. Please use the "Connect MetaMask" button first.'}:{success:!1,error:"This function is for MetaMask wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in MetaMask.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during MetaMask signing"})}finally{Y(!1)}},q=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your Phantom wallet first"});return}if(Pe()!=="phantom"){const fe=Su();R(fe==="phantom"?{success:!1,error:'Phantom wallet detected but not connected via wagmi. Please use the "Connect Phantom" button first.'}:{success:!1,error:"This function is for Phantom wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in Phantom.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during Phantom signing"})}finally{Y(!1)}},Ee=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your OneKey wallet first"});return}if(Pe()!=="onekey"){const fe=Su();R(fe==="onekey"?{success:!1,error:'OneKey wallet detected but not connected via wagmi. Please use the "Connect OneKey" button first.'}:{success:!1,error:"This function is for OneKey wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in OneKey.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during OneKey signing"})}finally{Y(!1)}},Je=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your Bitget wallet first"});return}if(Pe()!=="bitget"){const fe=Su();R(fe==="bitget"?{success:!1,error:'Bitget wallet detected but not connected via wagmi. Please use the "Connect Bitget" button first.'}:{success:!1,error:"This function is for Bitget wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in Bitget.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during Bitget signing"})}finally{Y(!1)}},ct=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your TokenPocket wallet first"});return}if(Pe()!=="tokenpocket"){const fe=Su();R(fe==="tokenpocket"?{success:!1,error:'TokenPocket wallet detected but not connected via wagmi. Please use the "Connect TokenPocket" button first.'}:{success:!1,error:"This function is for TokenPocket wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in TokenPocket.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during TokenPocket signing"})}finally{Y(!1)}},$e=async()=>{var L,re;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!de||!X){R({success:!1,error:"Please connect your Coinbase Wallet first"});return}if(Pe()!=="coinbase"){const fe=Su();R(fe==="coinbase"?{success:!1,error:'Coinbase Wallet detected but not connected via wagmi. Please use the "Connect Coinbase Wallet" button first.'}:{success:!1,error:"This function is for Coinbase Wallet only. Please use the appropriate button for your wallet."});return}if(X.toLowerCase()!==m.toLowerCase()){R({success:!1,error:`Connected address (${X}) does not match owner address (${m}). Please switch to the correct account in Coinbase Wallet.`});return}Y(!0),R(null);try{const fe=I.split(",").map(De=>De.trim()).filter(De=>De.length>0),le=await At.prepareAgentSign({owner:m,agent:_,expiresInDays:O,permissions:fe,nonce:j,agentName:B});if(!le.success||!le.typedData){R(le);return}const ce=le.typedData;let ge,J,he,pe;ce.domain&&ce.types&&ce.message?(ge=ce.domain,J=ce.types,he=ce.primaryType||ce.primaryType||"AgentApproval",pe=ce.message):(ge=ce.domain||{},J=ce.types||ce.Types||{},he=ce.primaryType||ce.PrimaryType||"AgentApproval",pe=ce.message||ce.Message||ce);const _e=await se({domain:ge,types:J,primaryType:he,message:pe});R({success:!0,typedData:le.typedData,signature:_e})}catch(fe){fe.code===4001||(L=fe.message)!=null&&L.includes("User rejected")||(re=fe.message)!=null&&re.includes("rejected")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:fe instanceof Error?fe.message:"Unknown error during Coinbase Wallet signing"})}finally{Y(!1)}},ut=async()=>{var L,re,fe;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!wf()){R({success:!1,error:"Phantom Solana wallet not found. Please install Phantom wallet extension."});return}const xe=ol();if(!xe){R({success:!1,error:"Phantom Solana provider not available"});return}Y(!0),R(null);try{const le=await XN(xe);if(le!==m){R({success:!1,error:`Connected address (${le}) does not match owner address (${m}). Please switch to the correct account in Phantom.`});return}const ce=I.split(",").map(he=>he.trim()).filter(he=>he.length>0),ge={action:"agent_approval",owner:m,agent:_,expiresInDays:O,permissions:ce,nonce:j,agentName:B,timestamp:Math.floor(Date.now()/1e3)},J=await Dee(xe,ge);R({success:!0,signature:J.signature,typedData:ge})}catch(le){le.code===4001||(L=le.message)!=null&&L.includes("User rejected")||(re=le.message)!=null&&re.includes("rejected")||(fe=le.message)!=null&&fe.includes("User cancelled")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:le instanceof Error?le.message:"Unknown error during Phantom Solana signing"})}finally{Y(!1)}},qe=async()=>{var xe,L,re,fe;if(!At.isReady()){R({success:!1,error:"WASM module not ready"});return}if(!m||!_){R({success:!1,error:"Owner address and agent address are required"});return}if(!Ga()){R({success:!1,error:"Bitcoin wallet not found. Please install Unisat, Xverse, or OKX wallet extension."});return}Y(!0),R(null);try{let le=m;try{const _e=await Iee();if(_e!==m){R({success:!1,error:`Wallet address (${_e}) does not match owner address (${m}). Please switch to the correct account in your Bitcoin wallet.`});return}le=_e}catch(_e){console.warn("Could not get address from wallet, using owner address:",_e)}const ce=I.split(",").map(_e=>_e.trim()).filter(_e=>_e.length>0),ge={action:"agent_approval",owner:le,agent:_,expiresInDays:O,permissions:ce,nonce:j,agentName:B,timestamp:Math.floor(Date.now()/1e3),deadline:(Date.now()+O*24*60*60*1e3).toString(16)},J=hc(),he=J!=null&&J.supportsBIP322?"bip322":"bip137",pe=await yye(ge,le,he);R({success:!0,signature:pe.signature,typedData:ge})}catch(le){le.code===4001||(xe=le.message)!=null&&xe.includes("User rejected")||(L=le.message)!=null&&L.includes("rejected")||(re=le.message)!=null&&re.includes("User cancelled")||(fe=le.message)!=null&&fe.includes("user reject")?R({success:!1,error:"User rejected the signature request"}):R({success:!1,error:le instanceof Error?le.message:"Unknown error during Bitcoin signing"})}finally{Y(!1)}},we=async()=>{switch(b){case"ethereum":const xe=Pe();return xe==="phantom"?q():xe==="onekey"?Ee():xe==="bitget"?Je():xe==="tokenpocket"?ct():xe==="coinbase"?$e():ke();case"solana":return ut();case"bitcoin_taproot":case"bitcoin_segwit":case"bitcoin_legacy":case"bitcoin_nested_segwit":return qe();default:R({success:!1,error:`Signing not yet supported for chain type: ${b}`})}},ze=de&&Pe()==="metamask"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),Me=()=>{if(b!=="solana")return!1;const xe=ol();return!xe||!xe.isConnected||!xe.publicKey?!1:xe.publicKey.toString()===m},Ie=()=>!(!(b==="bitcoin_taproot"||b==="bitcoin_segwit"||b==="bitcoin_legacy"||b==="bitcoin_nested_segwit")||!Ga()||!m);return{ownerMnemonic:d,setOwnerMnemonic:f,ownerAddress:m,setOwnerAddress:g,ownerChainType:b,setOwnerChainType:y,ownerAddressIndex:v,setOwnerAddressIndex:w,ownerIsMainnet:k,setOwnerIsMainnet:S,agentAddress:_,setAgentAddress:C,agentPrivateKey:P,setAgentPrivateKey:T,expiresInDays:O,setExpiresInDays:D,permissions:I,setPermissions:U,agentName:B,setAgentName:z,nonce:j,setNonce:F,result:N,loading:W||ie,generateOwnerAddress:K,generateOwnerAddressForChain:H,generateAgentKeypair:Q,prepareAgentSign:G,signAgentApproval:ke,signAgentApprovalWithPhantom:q,signAgentApprovalWithOneKey:Ee,signAgentApprovalWithBitget:Je,signAgentApprovalWithTokenPocket:ct,signAgentApprovalWithCoinbaseWallet:$e,signAgentApprovalWithPhantomSolana:ut,signAgentApprovalWithBitcoin:qe,signAgentApprovalForChain:we,clearAgentCredentials:()=>{C(""),T("");try{sessionStorage.removeItem(Ch),sessionStorage.removeItem(Eh),sessionStorage.removeItem(Th),sessionStorage.removeItem(_u)}catch(xe){console.warn("Failed to clear agent credentials from sessionStorage:",xe)}},isMetaMaskConnected:ze,isPhantomConnected:de&&Pe()==="phantom"&&b==="ethereum"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isPhantomSolanaConnected:Me(),isOneKeyConnected:de&&Pe()==="onekey"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isOKXConnected:de&&Pe()==="okx"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isBinanceConnected:de&&Pe()==="binance"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isBitgetConnected:de&&Pe()==="bitget"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isTokenPocketConnected:de&&Pe()==="tokenpocket"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isCoinbaseWalletConnected:de&&Pe()==="coinbase"&&(X==null?void 0:X.toLowerCase())===m.toLowerCase(),isPhantomSolanaAvailable:wf(),isBitcoinWalletAvailable:Ga(),isBitcoinWalletConnected:Ie(),isReady:At.isReady()}}function IF(n){const e=n.market_id;return{...n,id:e,symbol:n.moniker,baseAsset:n.base_asset,quoteAsset:n.quote_asset,active:n.status==="active",maxSizeLimit:40,minSizeLimit:1e-4}}function Tye(n,e){var s,o;const r=typeof n.timestamp=="string"?parseInt(n.timestamp,10)||Date.now():typeof n.timestamp=="number"?n.timestamp:Date.now(),i=(s=n.trade_type)!=null&&s.toLowerCase().includes("buy")||n.buy_order_id?"buy":(o=n.trade_type)!=null&&o.toLowerCase().includes("sell")||n.sell_order_id?"sell":"buy";return{...n,id:n.trade_id,marketId:n.market_id||e,price:n.price,size:n.quantity,side:i,timestamp:r}}function ya(n){const e=E.useRef(null),r=vn(H=>H.markets),i=vn(H=>H.marketsById),s=vn(H=>H.orderbooks),o=vn(H=>H.tickers),a=vn(H=>H.recentTrades),l=vn(H=>H.selectedMarketId),c=vn(H=>H.loadingMarkets),u=vn(H=>H.loadingOrderbooks),h=vn(H=>H.loadingTickers),d=vn(H=>H.loadingTrades),f=vn(H=>H.errors),m=vn(H=>H.setMarkets),g=vn(H=>H.setMarket),b=vn(H=>H.getMarket),y=vn(H=>H.getMarketBySymbol),v=vn(H=>H.setSelectedMarketId),w=vn(H=>H.setOrderbook),k=vn(H=>H.getOrderbook),S=vn(H=>H.updateOrderbook),_=vn(H=>H.setTicker),C=vn(H=>H.getTicker),P=vn(H=>H.setRecentTrades),T=vn(H=>H.getRecentTrades),O=vn(H=>H.setLoading),D=vn(H=>H.setError),I=vn(H=>H.clearError),U=vn(H=>H.clearCache);E.useEffect(()=>{e.current?n.sessionToken&&e.current.setSessionToken(n.sessionToken):e.current=new cr({baseURL:n.baseURL,sessionToken:n.sessionToken})},[n.baseURL,n.sessionToken]);const B=E.useCallback(async()=>{if(!e.current)throw new Error("InfoClient not initialized");const H="markets";O(H,!0),D(H,null);try{const Q=await e.current.getMarkets(),X=(Array.isArray(Q)?Q:[]).map(de=>{const ye=de.market_id;return{...de,id:ye,symbol:de.moniker,baseAsset:de.base_asset,quoteAsset:de.quote_asset,active:de.status==="active",maxSizeLimit:void 0,minSizeLimit:void 0}});return m(X),X}catch(Q){const G=Q instanceof Error?Q.message:"Failed to fetch markets";throw D(H,G),Q}finally{O(H,!1)}},[m,O,D]),z=E.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const Q=b(H);if(Q)return Q;try{const G=await e.current.getMarketByID(H);if(G){const X=IF(G);return g(X),X}return null}catch(G){const X=G instanceof Error?G.message:`Failed to fetch market ${H}`;throw D(`market_${H}`,X),G}},[b,g,D]),j=E.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const Q=y(H);if(Q)return Q;try{const G=await e.current.getMarketByMoniker(H);if(G){const X=IF(G);return g(X),X}return null}catch(G){const X=G instanceof Error?G.message:`Failed to fetch market ${H}`;throw D(`market_${H}`,X),G}},[y,g,D]),F=E.useCallback(async(H,Q=!0,G=20)=>{if(!e.current)throw new Error("InfoClient not initialized");const X=`orderbook_${H}`;O(X,!0),D(X,null);try{const de=await e.current.getOrderbook(H,Q,G);if(de&&(de.bids||de.asks)){const ye=ie=>ie.map(([Pe,ke])=>[typeof Pe=="string"?parseFloat(Pe):Pe,typeof ke=="string"?parseFloat(ke):ke]),se={bids:ye(de.bids||[]),asks:ye(de.asks||[]),timestamp:Date.now()};return w(H,se),se}return null}catch(de){const ye=de instanceof Error?de.message:`Failed to fetch orderbook for market ${H}`;throw D(X,ye),de}finally{O(X,!1)}},[w,O,D]),N=E.useCallback(async H=>{if(!e.current)throw new Error("InfoClient not initialized");const Q=`ticker_${H}`;O(Q,!0),D(Q,null);try{const G=await e.current.getMarketStats(H);if(G){const X={marketId:H,...G,timestamp:Date.now()};return _(H,X),X}return null}catch(G){const X=G instanceof Error?G.message:`Failed to fetch ticker for market ${H}`;throw D(Q,X),G}finally{O(Q,!1)}},[_,O,D]),R=E.useCallback(async(H,Q=100)=>{if(!e.current)throw new Error("InfoClient not initialized");const G=`trades_${H}`;O(G,!0),D(G,null);try{const X=await e.current.getRecentTrades(H,Q);if(X){const ye=(Array.isArray(X)?X:[]).map(se=>Tye(se,H));return P(H,ye),ye}return null}catch(X){const de=X instanceof Error?X.message:`Failed to fetch trades for market ${H}`;throw D(G,de),X}finally{O(G,!1)}},[P,O,D]);E.useEffect(()=>{n.autoFetchMarkets&&r.length===0&&!c&&B().catch(console.error)},[n.autoFetchMarkets,r.length,c,B]);const W=l?r.find(H=>{var Q;return H.market_id===l||((Q=H.id)==null?void 0:Q.toString())===l}):null,Y=W?W.moniker||W.symbol||(W.baseAsset&&W.quoteAsset?`${W.baseAsset}-${W.quoteAsset}`:null):null,K=E.useCallback(H=>{const Q=r.find(G=>{var X;return G.market_id===H||((X=G.id)==null?void 0:X.toString())===H});return Q?Q.moniker||Q.symbol||(Q.baseAsset&&Q.quoteAsset?`${Q.baseAsset}/${Q.quoteAsset}`:null):null},[r]);return{markets:r,marketsById:i,orderbooks:s,tickers:o,recentTrades:a,selectedMarketId:l,selectedMarket:W,selectedMarketSymbol:Y,loadingMarkets:c,loadingOrderbooks:u,loadingTickers:h,loadingTrades:d,isLoading:H=>{if(H==="markets")return c;if(H.startsWith("orderbook_")){const Q=H.split("_").slice(1).join("_");return u.has(Q)}if(H.startsWith("ticker_")){const Q=H.split("_").slice(1).join("_");return h.has(Q)}if(H.startsWith("trades_")){const Q=H.split("_").slice(1).join("_");return d.has(Q)}return!1},errors:f,getError:H=>f.get(H),getMarket:b,getMarketBySymbol:y,getSymbolByMarketId:K,getOrderbook:k,getTicker:C,getRecentTrades:T,fetchMarkets:B,fetchMarket:z,fetchMarketBySymbol:j,fetchOrderbook:F,fetchTicker:N,fetchRecentTrades:R,updateOrderbook:S,clearCache:U,clearError:I,setSelectedMarketId:v,infoClient:e.current}}function Aee(n){const[e,r]=E.useState(null),[i,s]=E.useState(null),[o,a]=E.useState(!1),[l,c]=E.useState(!1),[u,h]=E.useState(null),[d,f]=E.useState(DI),[m,g]=E.useState(0),[b,y]=E.useState(0),[v,w]=E.useState(0),[k,S]=E.useState(abe),[_,C]=E.useState(fbe),[P,T]=E.useState(V0),[O,D]=E.useState(0),[I,U]=E.useState(0),[B,z]=E.useState(n.marketId?String(n.marketId):"1");E.useEffect(()=>{n.marketId?z(String(n.marketId)):z("1")},[n.marketId]);const{markets:j}=ya({baseURL:n.baseURL,autoFetchMarkets:!0}),{maxSizeLimit:F,minSizeLimit:N}=E.useMemo(()=>{if(!B)return{maxSizeLimit:void 0,minSizeLimit:void 0};const ke=j.find(q=>q.market_id===B);return ke?{maxSizeLimit:ke.maxSizeLimit||40,minSizeLimit:ke.minSizeLimit||.001}:{maxSizeLimit:void 0,minSizeLimit:void 0}},[B,j]);E.useEffect(()=>{n.selectedBucketBalance!==void 0&&D(n.selectedBucketBalance)},[n.selectedBucketBalance]),E.useEffect(()=>{const ke=new iu({baseURL:n.baseURL,mnemonic:n.mnemonic}),q=new cr({baseURL:n.baseURL});r(ke),s(q),ke.initialize().then(()=>{a(!0)}).catch(Ee=>{console.error("Failed to initialize exchange client:",Ee),h({success:!1,error:`Initialization failed: ${Ee.message}`})})},[n.baseURL,n.mnemonic]);const R=E.useCallback(async()=>{if(!(!i||!e||!o)&&n.selectedBucketBalance===void 0)try{const ke=e.getWalletAddress(),q=await i.getBalanceDecimal(ke,"MORM");q&&q.available_balance!==void 0&&D(Dt(q.available_balance))}catch(ke){console.error("Failed to load balance:",ke)}},[i,e,o,n.selectedBucketBalance]);E.useEffect(()=>{o&&i&&e&&n.selectedBucketBalance===void 0&&R()},[o,i,e,n.selectedBucketBalance,R]);const W=E.useCallback(async()=>{if(i)try{const ke=await i.getMarketStats(B);if(ke&&ke.last_price){const q=Dt(ke.last_price);U(q)}}catch(ke){console.error("Failed to load market price:",ke)}},[i,B]);E.useEffect(()=>{o&&i&&W()},[o,i,W]);const Y=E.useCallback(()=>d==="market"?n.tradePrice&&n.tradePrice>0?n.tradePrice:I:v||0,[d,v,I,n.tradePrice]),K=E.useCallback(()=>O*k,[O,k]),H=E.useCallback(()=>{let ke;if(b>0)ke=b;else{const Ee=K()*m/100,Je=Y();if(Je<=0)return 0;ke=Ee/Je}return N!==void 0&&N>0&&ke<N?0:F!==void 0&&F>0&&ke>F?F:ke},[b,m,K,Y,F,N]),Q=E.useCallback(()=>{const ke=H(),q=Y();return ke*q},[H,Y]),G=E.useCallback(()=>{const ke=H(),q=Y(),Ee=ke*q;return pN(Ee)},[H,Y]),X=E.useCallback(()=>{const ke=G();return k<=0?0:Math.floor(ke/k)},[G,k]),de=E.useCallback(async()=>{if(!e||!o){h({success:!1,error:"Exchange client not ready"});return}const ke=H();if(ke<=0){h({success:!1,error:"Invalid order size"});return}const q=Y();if(q<=0){h({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!v){h({success:!1,error:"Price is required for limit orders"});return}if(!n.selectedBucketId||n.selectedBucketId.trim()===""){h({success:!1,error:"Bucket ID is required for order placement"});return}c(!0),h(null);try{const Ee=un(k.toString()),Je=await e.placeOrder({marketId:B,bucketId:n.selectedBucketId,side:"BUY",orderType:d,price:q,quantity:ke,leverage:Ee});h({success:!0,orderId:Je.order_id,message:"Buy order placed successfully"}),await R()}catch(Ee){h({success:!1,error:Ee instanceof Error?Ee.message:"Unknown error"})}finally{c(!1)}},[e,o,H,Y,d,v,k,B,n.selectedBucketId,R]),ye=E.useCallback(async()=>{if(!e||!o){h({success:!1,error:"Exchange client not ready"});return}const ke=H();if(ke<=0){h({success:!1,error:"Invalid order size"});return}const q=Y();if(q<=0){h({success:!1,error:d==="limit"?"Invalid price for limit order":"Market price not available. Please wait for price data to load."});return}if(d==="limit"&&!v){h({success:!1,error:"Price is required for limit orders"});return}if(!n.selectedBucketId||n.selectedBucketId.trim()===""){h({success:!1,error:"Bucket ID is required for order placement"});return}c(!0),h(null);try{const Ee=un(k.toString()),Je=await e.placeOrder({marketId:B,bucketId:n.selectedBucketId,side:"SELL",orderType:d,price:q,quantity:ke,leverage:Ee});h({success:!0,orderId:Je.order_id,message:"Sell order placed successfully"}),await R()}catch(Ee){h({success:!1,error:Ee instanceof Error?Ee.message:"Unknown error"})}finally{c(!1)}},[e,o,H,Y,d,v,k,B,n.selectedBucketId,R]),se=E.useCallback(async(ke,q)=>{if(!e||!o){h({success:!1,error:"Exchange client not ready"});return}if(!B||B.trim()===""){h({success:!1,error:"Market ID is required"});return}if(ke<=0){h({success:!1,error:"Leverage must be greater than 0"});return}if(!q.bucketId||q.bucketId.trim()===""){h({success:!1,error:"Bucket ID is required"});return}c(!0),h(null);try{const Ee=await e.changeLeverage({marketId:B,newLeverage:ke,bucketId:q.bucketId,leverageType:q.leverageType,reason:q.reason});S(ke),h({success:!0,message:"Leverage changed successfully",orderId:Ee.txhash}),await R()}catch(Ee){h({success:!1,error:Ee instanceof Error?Ee.message:"Unknown error"})}finally{c(!1)}},[e,o,B,R]),ie=E.useCallback(ke=>{const q=K(),Ee=q*ke/100,Je=Y();let $e=Je>0?Ee/Je:0;if(N!==void 0&&N>0&&$e<N&&($e=0),F!==void 0&&F>0&&$e>F)if($e=F,$e>0&&q>0&&Je>0){const qe=$e*Je/q*100;g(Math.min(100,Math.max(0,qe)))}else g(ke);else g(ke);y($e)},[K,Y,F,N]),Pe=E.useCallback(ke=>{let q=isNaN(ke)||ke<0?0:ke;F!==void 0&&F>0&&q>F&&(q=F),y(q);const Ee=K(),Je=Y();if(q>0&&Ee>0&&Je>0){const $e=q*Je/Ee*100;g(Math.min(100,Math.max(0,$e)))}else g(0)},[K,Y,F]);return{orderType:d,setOrderType:f,fundPercent:m,sizeInput:b,price:v,leverage:k,positionMode:_,marginMode:P,availableBalance:O,currentPrice:I,marketId:B,isReady:o,loading:l,result:u,setFundPercent:ie,setSizeInput:Pe,setPrice:w,setLeverage:S,setPositionMode:C,setMarginMode:T,setMarketId:z,placeBuyOrder:de,placeSellOrder:ye,changeLeverage:se,loadBalance:R,loadMarketPrice:W,calculateSize:H,calculateSizeUSD:Q,calculateValue:G,calculateMargin:X,getOrderPrice:Y,getAvailableTradeAmount:K}}function AF(n,e){return{asks:[],bids:[],spread:0,midPrice:0,market_id:n.market_id||e||"",sequence_id:n.sequence_id||"",first_update_id:n.first_update_id||0,last_update_id:n.last_update_id||0,checksum:n.checksum||"",timestamp:n.timestamp||""}}function Ph(n){return n.map(([e,r])=>[typeof e=="string"?parseFloat(e):e,typeof r=="string"?parseFloat(r):r])}function Mh(n){const e=[...n].sort((i,s)=>s[0]-i[0]);let r=0;return e.map(([i,s])=>(r+=s,{price:i,size:s,cumulative:r,flash:null}))}function QN(n){const e=n.useWebSocket!==!1,[r,i]=E.useState([]),[s,o]=E.useState([]),[a,l]=E.useState(0),[c,u]=E.useState(0),[h,d]=E.useState(""),[f,m]=E.useState(""),[g,b]=E.useState(0),[y,v]=E.useState(0),[w,k]=E.useState(""),[S,_]=E.useState(""),[C,P]=E.useState(!0),[T,O]=E.useState(null),[D,I]=E.useState(!1),[U,B]=E.useState(null),z=E.useRef(null),j=E.useRef(null),F=E.useRef(!1),N=E.useRef(null),R=E.useRef(null),W=E.useRef(null),Y=E.useRef(new Map),K=E.useRef({asks:[],bids:[],spread:0,midPrice:0,market_id:"",sequence_id:"",first_update_id:0,last_update_id:0,checksum:"",timestamp:""});E.useEffect(()=>{K.current={asks:r,bids:s,spread:a,midPrice:c,market_id:h,sequence_id:f,first_update_id:g,last_update_id:y,checksum:w,timestamp:S}},[r,s,a,c,h,f,g,y,w,S]);const H=E.useCallback((ie,Pe)=>{const ke=new Map,q=new Map,Ee=new Map,Je=new Map;ie.asks.forEach(L=>{L.size>0&&ke.set(L.price,L.size)}),ie.bids.forEach(L=>{L.size>0&&q.set(L.price,L.size)}),Pe.asks&&Pe.asks.forEach(([L,re])=>{if(typeof L!="number"||typeof re!="number"||isNaN(L)||isNaN(re)||L<=0||re<0){console.warn("[useOrderbook] Invalid delta entry skipped:",{price:L,size:re});return}const fe=ke.get(L)??0,le=ke.has(L);re===0?le&&ke.delete(L):le?fe!==re&&(ke.set(L,re),Ee.set(L,re>fe?"up":"down")):(ke.set(L,re),Ee.set(L,"up"))}),Pe.bids&&Pe.bids.forEach(([L,re])=>{if(typeof L!="number"||typeof re!="number"||isNaN(L)||isNaN(re)||L<=0||re<0){console.warn("[useOrderbook] Invalid delta entry skipped:",{price:L,size:re});return}const fe=q.get(L)??0,le=q.has(L);re===0?le&&q.delete(L):le?fe!==re&&(q.set(L,re),Je.set(L,re>fe?"up":"down")):(q.set(L,re),Je.set(L,"up"))});const ct=Array.from(ke.entries()),$e=Array.from(q.entries()),ut=Mh(ct),qe=Mh($e),we=Date.now();if(ut.forEach(L=>{const re=Ee.get(L.price);re?(L.flash=re,Y.current.set(`ask-${L.price}`,we)):L.flash=null}),qe.forEach(L=>{const re=Je.get(L.price);re?(L.flash=re,Y.current.set(`bid-${L.price}`,we)):L.flash=null}),Ee.size>0||Je.size>0){const L=ut.filter(fe=>fe.flash!==null).length,re=qe.filter(fe=>fe.flash!==null).length;(L!==Ee.size||re!==Je.size)&&console.warn("[useOrderbook] Flash indicator mismatch:",{askChangesCount:Ee.size,appliedAskFlashes:L,bidChangesCount:Je.size,appliedBidFlashes:re})}const ze=n.maxDepth||100,Me=ut.slice(0,ze),Ie=qe.slice(0,ze);let Ce=0,xe=0;if(Me.length>0&&Ie.length>0){const L=Me[Me.length-1].price,re=Ie[0].price;Ce=L-re,xe=(L+re)/2}return{asks:Me,bids:Ie,spread:Ce,midPrice:xe,market_id:ie.market_id,sequence_id:ie.sequence_id,first_update_id:ie.first_update_id,last_update_id:ie.last_update_id,checksum:ie.checksum,timestamp:ie.timestamp}},[n.maxDepth]),Q=E.useCallback(async(ie,Pe={})=>{if(!z.current){Pe.errorMessage&&console.error(Pe.errorMessage);return}const{setLoadingState:ke=!1,updateMarketIdRef:q=!1}=Pe;ke&&(P(!0),O(null));try{const Ee=await z.current.getOrderbook(ie,!0);if(Ee&&(Ee.bids||Ee.asks)){const Je=Ph(Ee.asks||[]),ct=Ph(Ee.bids||[]),$e=Mh(Je),ut=Mh(ct),qe=n.maxDepth||100,we=$e.slice(0,qe),ze=ut.slice(0,qe);let Me=0,Ie=0;if(we.length>0&&ze.length>0){const xe=we[we.length-1].price,L=ze[0].price;Me=xe-L,Ie=(xe+L)/2}q&&(N.current=ie);const Ce=K.current;i(we),o(ze),l(Me),u(Ie),d(ie),m(Ce.sequence_id||""),b(Ce.first_update_id||0),v(Ce.last_update_id||0),k(Ce.checksum||""),_(Ce.timestamp||new Date().toISOString())}}catch(Ee){const Je=Pe.errorMessage||(Ee instanceof Error?Ee.message:"Failed to load orderbook");ke?O(Je):console.error(Je)}finally{ke&&P(!1)}},[n.maxDepth,Ph]),G=E.useCallback(async()=>{const ie=K.current,Pe=AF(ie);i(Pe.asks),o(Pe.bids),l(Pe.spread),u(Pe.midPrice),await Q(n.marketId,{setLoadingState:!1,updateMarketIdRef:!1})},[n.marketId,Q]),X=E.useCallback(async()=>{const ie=K.current,Pe=AF(ie,n.marketId);i(Pe.asks),o(Pe.bids),l(Pe.spread),u(Pe.midPrice),d(Pe.market_id),await Q(n.marketId,{setLoadingState:!0,updateMarketIdRef:!1,errorMessage:"Failed to load orderbook"})},[n.marketId,Q]),de=E.useCallback(async ie=>{await Q(ie,{setLoadingState:!1,updateMarketIdRef:!0,errorMessage:`Failed to fetch snapshot for market ${ie}`}),console.log(`[useOrderbook] Fetched snapshot for market ${ie} and updated orderbook`)},[Q]),ye=E.useCallback((ie,Pe)=>{if(ie.snapshot===!0||ie.type==="snapshot"){const q=Ph(ie.asks||[]),Ee=Ph(ie.bids||[]),Je=Mh(q),ct=Mh(Ee),$e=n.maxDepth||100,ut=Je.slice(0,$e),qe=ct.slice(0,$e);let we=0,ze=0;if(ut.length>0&&qe.length>0){const Me=ut[ut.length-1].price,Ie=qe[0].price;we=Me-Ie,ze=(Me+Ie)/2}return{asks:ut,bids:qe,spread:we,midPrice:ze,market_id:ie.market_id||Pe.market_id,sequence_id:ie.sequence_id||Pe.sequence_id,first_update_id:ie.first_update_id??Pe.first_update_id,last_update_id:ie.last_update_id??Pe.last_update_id,checksum:ie.checksum||Pe.checksum,timestamp:ie.timestamp||Pe.timestamp,snapshot:ie.snapshot}}else{const q=H(Pe,{bids:ie.bids,asks:ie.asks});return{...q,market_id:ie.market_id||q.market_id,sequence_id:ie.sequence_id||q.sequence_id,first_update_id:ie.first_update_id??q.first_update_id,last_update_id:ie.last_update_id??q.last_update_id,checksum:ie.checksum||q.checksum,timestamp:ie.timestamp||q.timestamp}}},[H,n.maxDepth,Ph]),se=E.useCallback(async ie=>{if(!ie||!ie.bids&&!ie.asks){console.log("[useOrderbook] Invalid data: missing bids and asks");return}if(!ie.market_id||ie.sequence_id===void 0){console.log("[useOrderbook] Rejected: not multi-feed format (missing market_id or sequence_id)",{hasMarketId:!!ie.market_id,hasSequenceId:ie.sequence_id!==void 0});return}const Pe=N.current||n.marketId;ie.market_id!==Pe&&(console.log(`[useOrderbook] Received update for market ${ie.market_id}, current market is ${Pe}. Fetching snapshot...`),await de(ie.market_id));const ke={market_id:ie.market_id,sequence_id:ie.sequence_id,first_update_id:ie.first_update_id,last_update_id:ie.last_update_id,checksum:ie.checksum,timestamp:ie.timestamp,bids:ie.bids.map(([Je,ct])=>[Dt(Je),Dt(ct)]),asks:ie.asks.map(([Je,ct])=>[Dt(Je),Dt(ct)]),snapshot:ie.snapshot===!0};console.log("[useOrderbook] Processing orderbook update",{marketId:ke.market_id,sequenceId:ke.sequence_id,bidsCount:ke.bids.length,asksCount:ke.asks.length,isSnapshot:ke.snapshot,bestBid:ke.bids.length>0?ke.bids[0][0]:null,bestAsk:ke.asks.length>0?ke.asks[ke.asks.length-1][0]:null});const q=K.current,Ee=ye(ke,q);console.log("[useOrderbook] Orderbook updated successfully",{sequenceId:ke.sequence_id,bidsCount:Ee.bids.length,asksCount:Ee.asks.length,spread:Ee.spread,midPrice:Ee.midPrice,bestBid:Ee.bids.length>0?Ee.bids[0].price:null,bestAsk:Ee.asks.length>0?Ee.asks[Ee.asks.length-1].price:null}),i(Ee.asks),o(Ee.bids),l(Ee.spread),u(Ee.midPrice),d(Ee.market_id),m(Ee.sequence_id),b(Ee.first_update_id),v(Ee.last_update_id),k(Ee.checksum),_(Ee.timestamp)},[ye,de,n.marketId]);return E.useEffect(()=>{const ie=new cr({baseURL:n.baseURL});z.current=ie,j.current=n.subscriptionClient,N.current===null&&(N.current=n.marketId);const Pe=()=>{const q=j.current;if(q&&q.isConnected()){const Ee=N.current!==null?N.current:n.marketId;(!F.current||N.current!==Ee)&&(F.current&&N.current!==null&&N.current!==Ee&&q.unsubscribeMultiFeedSubChannel("orderbook",se),q.subscribeMultiFeedSubChannel("orderbook",Ee,se),F.current=!0,N.current=Ee)}},ke=n.subscriptionClient;if(e){ke.isConnected()?(I(!0),B(null),Pe()):(B("WebSocket not connected. Using HTTP polling."),I(!1),z.current&&R.current===null&&(G(),R.current=window.setInterval(()=>{G()},5e3)));const Je=ke.onStateChange(ct=>{ct===kt.Connected?(I(!0),B(null),R.current!==null&&(clearInterval(R.current),R.current=null),F.current&&Pe()):(ct===kt.Disconnected||ct===kt.Reconnecting)&&(I(!1),F.current=!1,B("WebSocket disconnected. Using static data."))});return()=>{const ct=N.current;W.current!==null&&(clearTimeout(W.current),W.current=null),F.current=!1,N.current=null,Je&&Je(),j.current&&ct!==null&&j.current.unsubscribeMultiFeedSubChannel("orderbook",se)}}else return I(!1),B(null),z.current&&R.current===null&&(G(),R.current=window.setInterval(()=>{G()},5e3)),()=>{R.current!==null&&(clearInterval(R.current),R.current=null),F.current=!1,N.current=null}},[n.baseURL,n.subscriptionClient,e]),E.useEffect(()=>{if(!z.current)return;const ie=N.current;return e&&j.current&&ie!==null&&ie!==n.marketId&&j.current.isConnected()&&(j.current.unsubscribeMultiFeedSubChannel("orderbook",se),F.current=!1),i([]),o([]),l(0),u(0),d(n.marketId),m(""),b(0),v(0),k(""),_(""),P(!0),O(null),B(null),X(),e&&j.current&&j.current.isConnected()&&(j.current.subscribeMultiFeedSubChannel("orderbook",n.marketId,se,{precision_size:"",delta_only:!0,row_count:20}),F.current=!0),N.current=n.marketId,()=>{e&&j.current&&j.current.isConnected()&&N.current===n.marketId&&(j.current.unsubscribeMultiFeedSubChannel("orderbook",se),F.current=!1)}},[n.marketId,e,se]),E.useEffect(()=>(R.current!==null&&(clearInterval(R.current),R.current=null),(!e||!D&&e)&&z.current&&!n.disablePolling&&(G(),R.current=window.setInterval(()=>{G()},3e4)),()=>{R.current!==null&&(clearInterval(R.current),R.current=null)}),[D,e,n.marketId,n.disablePolling,G]),E.useEffect(()=>{const ie=setInterval(()=>{const Pe=Date.now(),ke=500;let q=!1;const Ee=r.map(ct=>{const $e=`ask-${ct.price}`,ut=Y.current.get($e);return ct.flash&&ut&&Pe-ut>=ke?(q=!0,Y.current.delete($e),{...ct,flash:null}):ct}),Je=s.map(ct=>{const $e=`bid-${ct.price}`,ut=Y.current.get($e);return ct.flash&&ut&&Pe-ut>=ke?(q=!0,Y.current.delete($e),{...ct,flash:null}):ct});q&&(i(Ee),o(Je))},100);return()=>clearInterval(ie)},[r,s]),{asks:r,bids:s,spread:a,midPrice:c,market_id:h,sequence_id:f,first_update_id:g,last_update_id:y,checksum:w,timestamp:S,loading:C,error:T,isConnected:D,wsError:U,refresh:X}}function l_(n){const{getSymbolByMarketId:e}=ya({baseURL:n.baseURL,autoFetchMarkets:!0}),[r,i]=E.useState(null),[s,o]=E.useState(null),[a,l]=E.useState([]),[c,u]=E.useState(!0),[h,d]=E.useState(null),[f,m]=E.useState(!1),[g,b]=E.useState(null),y=E.useRef(null),v=E.useRef(null),w=E.useRef(!1),k=E.useRef(!1),S=E.useRef(null),_=E.useRef(null),C=E.useRef(null),P=E.useCallback(async()=>{if(!y.current){console.warn("[useTradePrice] pollRecentTrades called but infoClientRef.current is null");return}if(!n.marketId||n.marketId.trim()===""){console.warn("[useTradePrice] pollRecentTrades called but marketId is empty"),d("Market ID is required but was not provided");return}try{const B=n.limit||100,z=await y.current.getRecentTrades(n.marketId,B);if(z&&Array.isArray(z)&&z.length>0){const j=II(z);l(j);const N=[...z].sort((W,Y)=>{const K=Ya(W.timestamp);return Ya(Y.timestamp)-K})[0],R={market_id:n.marketId||N.market_id||"",price:Dt(N.price),quantity:Dt(N.quantity),timestamp:Ya(N.timestamp),is_buyer_maker:!1,trade_id:N.trade_id||""};i(W=>(W&&typeof W.price=="number"&&(R.price>W.price?b("up"):R.price<W.price&&b("down")),setTimeout(()=>b(null),500),R))}else console.warn("[useTradePrice] Polling returned no trades or invalid data:",z),l([])}catch(B){d(B instanceof Error?B.message:"Failed to load recent trades"),console.error("[useTradePrice] Failed to poll recent trades:",B)}},[n.marketId,n.limit]),T=E.useCallback(async()=>{if(y.current){if(!n.marketId||n.marketId.trim()===""){console.warn("[useTradePrice] initializeRecentTrades called but marketId is empty"),u(!1),d("Market ID is required but was not provided");return}u(!0),d(null);try{const B=n.limit||100,z=await y.current.getRecentTrades(n.marketId,B);if(z&&Array.isArray(z)&&z.length>0){const j=II(z);l(j);const N=[...z].sort((W,Y)=>{const K=Ya(W.timestamp);return Ya(Y.timestamp)-K})[0],R={market_id:n.marketId||N.market_id||"",price:Dt(N.price),quantity:Dt(N.quantity),timestamp:Ya(N.timestamp),is_buyer_maker:!1,trade_id:N.trade_id||""};i(R)}else console.warn("[useTradePrice] Initialization returned no trades or invalid data:",z),l([])}catch(B){d(B instanceof Error?B.message:"Failed to load recent trades"),console.error("Failed to initialize recent trades:",B),l([])}finally{u(!1)}}},[n.marketId,n.limit]),O=E.useCallback(B=>{if(console.debug("[useTradePrice] handleLastPriceUpdate called with data:",B),!B){console.warn("[useTradePrice] handleLastPriceUpdate received null/undefined data");return}if(!B.price||B.price===""){console.warn("[useTradePrice] handleLastPriceUpdate received data without price field:",B);return}B.derived===!0&&console.debug("[useTradePrice] Received derived price update (not an actual trade), will update lastPrice but not recentTrades");const z=Dt(B.price),j=Dt(B.quantity);if(isNaN(z)){console.warn("[useTradePrice] Invalid price value:",B.price);return}const F=sa(B.timestamp);i(N=>{Uh(N)&&typeof N.price=="number"&&(z>N.price?b("up"):z<N.price&&b("down")),setTimeout(()=>b(null),500);const R={market_id:n.marketId||B.market_id||"",price:z,quantity:j,timestamp:F,is_buyer_maker:B.is_buyer_maker||!1,trade_id:B.trade_id||""};return Uh(R)||console.error("[useTradePrice] Invalid LastPriceData structure:",R),console.debug("[useTradePrice] Setting lastPrice to:",R),console.debug("[useTradePrice] Type check - isLastPriceData:",Uh(R)),R}),B.derived||l(N=>{const R={time:F,size:j,price:z,is_buyer_maker:B.is_buyer_maker||!1};if(N.some(Q=>Q.time===F&&Q.price===z&&Q.size===j))return console.debug("[useTradePrice] Trade already exists in recentTrades, skipping duplicate"),N;const Y=[R,...N],K=n.limit||100,H=Y.slice(0,K);return console.debug("[useTradePrice] Added new trade to recentTrades:",R),H})},[n.marketId,n.limit,e]),D=E.useCallback(B=>{if(!B){console.warn("[useTradePrice] handleMarkPriceUpdate received null/undefined data");return}if(B.mark_price===void 0||B.mark_price===null){console.warn("[useTradePrice] handleMarkPriceUpdate received data without mark_price field:",B);return}const z=Dt(B.mark_price);if(isNaN(z)){console.warn("[useTradePrice] Invalid mark_price value:",B.mark_price);return}const j=e(n.marketId)||"",F={symbol:B.symbol||j,mark_price:z,timestamp:sa(B.timestamp)};kx(F)||console.error("[useTradePrice] Invalid MarkPriceData structure:",F),o(F)},[n.marketId,e]);E.useEffect(()=>{const B=new cr({baseURL:n.baseURL});y.current=B;const z=n.subscriptionClient;T(),v.current=z;const j=()=>{if(!n.marketId||n.marketId.trim()===""){console.warn("[useTradePrice] Cannot subscribe: marketId is empty"),d("Market ID is required but was not provided");return}if(!z.isReadyForSubscriptions()){if(z.isConnected()&&!z.isReadyForSubscriptions()){const R=z.getAuthState();R==="pending"?console.debug("[useTradePrice] Waiting for authentication to complete..."):R==="failed"&&(console.error("[useTradePrice] Authentication failed - cannot subscribe to trade price"),d("Authentication failed - cannot subscribe to trade price"))}return}if(!w.current||!k.current){if(w.current&&v.current)try{v.current.unsubscribeMultiFeedSubChannel("last_price",O)}catch(R){console.warn("[useTradePrice] Error unsubscribing from previous last_price subscription:",R)}if(k.current&&v.current)try{v.current.unsubscribeMultiFeedSubChannel("mark_price",D)}catch(R){console.warn("[useTradePrice] Error unsubscribing from previous mark_price subscription:",R)}try{n.marketId&&(z.subscribeMultiFeedSubChannel("last_price",n.marketId,O),w.current=!0,z.subscribeMultiFeedSubChannel("mark_price",n.marketId,D),k.current=!0,console.debug("[useTradePrice] Subscribed to mark_price:",n.marketId)),u(!1)}catch(R){console.error("[useTradePrice] Failed to subscribe:",R),d(R instanceof Error?R.message:"Failed to subscribe to trade price data"),w.current=!1,k.current=!1,u(!1)}}};m(z.isConnected()),u(!1),z.isReadyForSubscriptions()&&j();const F=z.onStateChange(N=>{console.debug("[useTradePrice] WebSocket state changed to:",N),m(N===kt.Connected),N===kt.Connected?(console.debug("[useTradePrice] WebSocket connected - stopping polling if active"),j()):(N===kt.Disconnected||N===kt.Reconnecting)&&console.debug("[useTradePrice] WebSocket disconnected/reconnecting - polling effect should start polling")});return()=>{if(w.current=!1,k.current=!1,F&&F(),v.current){try{v.current.unsubscribeMultiFeedSubChannel("last_price",O)}catch(N){console.warn("[useTradePrice] Error unsubscribing during cleanup:",N)}if(n.marketId)try{v.current.unsubscribeMultiFeedSubChannel("mark_price",D)}catch(N){console.warn("[useTradePrice] Error unsubscribing mark_price during cleanup:",N)}}}},[n.subscriptionClient,n.baseURL,n.marketId,O,D]),E.useEffect(()=>{const B=n.subscriptionClient;if(y.current&&B&&v.current){if(!n.marketId||n.marketId.trim()===""){console.warn("[useTradePrice] Cannot re-initialize: marketId is empty"),d("Market ID is required but was not provided");return}const z=e(n.marketId)||"BTC/USDC",j=_.current,F=C.current;if(B.isConnected()&&j!==null&&(j!==n.marketId||F!==z))try{v.current.unsubscribeMultiFeedSubChannel("last_price",O),v.current.unsubscribeMultiFeedSubChannel("mark_price",D),w.current=!1,k.current=!1}catch(N){console.warn("[useTradePrice] Error unsubscribing from previous market:",N)}if(T(),B.isReadyForSubscriptions())try{v.current.subscribeMultiFeedSubChannel("last_price",n.marketId,O),w.current=!0,console.debug("[useTradePrice] Subscribed to last_price:",{marketId:n.marketId}),v.current.subscribeMultiFeedSubChannel("mark_price",n.marketId,D),k.current=!0,console.debug("[useTradePrice] Subscribed to mark_price:",{marketId:n.marketId})}catch(N){console.error("[useTradePrice] Failed to re-subscribe:",N),d(N instanceof Error?N.message:"Failed to subscribe to trade price data"),w.current=!1,k.current=!1}_.current=n.marketId,C.current=z}},[n.subscriptionClient,n.marketId]),E.useEffect(()=>(console.debug("[useTradePrice] Polling effect triggered - isConnected:",f,"marketId:",n.marketId,"disablePolling:",n.disablePolling),S.current!==null&&(console.debug("[useTradePrice] Clearing existing polling interval (polling effect)"),clearInterval(S.current),S.current=null),!f&&y.current&&n.disablePolling===!1?(console.debug("[useTradePrice] Starting HTTP polling (WebSocket disconnected, marketId:",n.marketId,")"),P(),S.current=window.setInterval(()=>{P()},5e3),console.debug("[useTradePrice] HTTP polling interval set up (every 5 seconds)")):!f&&!y.current?console.warn("[useTradePrice] Cannot start polling: infoClientRef.current is null (isConnected:",f,")"):f?console.debug("[useTradePrice] WebSocket connected, polling not needed"):n.disablePolling!==!1&&console.debug("[useTradePrice] Polling disabled by config (default behavior)"),()=>{S.current!==null&&(console.debug("[useTradePrice] Cleaning up polling interval (polling effect cleanup)"),clearInterval(S.current),S.current=null)}),[f,n.marketId,n.disablePolling]);const{displayPrice:I,displayTimestamp:U}=E.useMemo(()=>{const B=Uh(r)&&r.price!=null,z=kx(s)&&s.mark_price!=null;if(B&&z){const j=r.timestamp||0,F=s.timestamp||0;return j>=F?{displayPrice:r.price,displayTimestamp:j}:{displayPrice:s.mark_price,displayTimestamp:F}}return B?{displayPrice:r.price,displayTimestamp:r.timestamp||0}:z?{displayPrice:s.mark_price,displayTimestamp:s.timestamp||0}:{displayPrice:null,displayTimestamp:null}},[r,s]);return{lastPrice:r,markPrice:s,displayPrice:I,displayTimestamp:U,recentTrades:a,loading:c,error:h,isConnected:f,priceChange:g,refresh:T,infoClient:y.current,isLastPriceData:Uh,isMarkPriceData:kx}}const hv=["funding_rate","deviation","twap"],Fk=n=>{if(n)return Array.isArray(n)?n[0]:n},$k=(n,e)=>`${n}-${e}`,Bk=n=>(n==null?void 0:n.isReadyForSubscriptions())??!1;function Ree(n){const e=n.historyDepth??10,r=n.marketId,[i,s]=E.useState(void 0),[o,a]=E.useState(void 0),[l,c]=E.useState(void 0),[u,h]=E.useState(!0),[d,f]=E.useState(null),[m,g]=E.useState(!1),b=E.useRef(null),y=E.useRef(new Map),v=E.useRef(null),w=E.useRef(null),k=(O,D,I)=>U=>{console.debug(`[useRates] Received ${O} message for market ${r}:`,U),I(B=>{if(D===1)return U;{const z=Array.isArray(B)?B:B?[B]:[];return[U,...z].slice(0,D)}})},S=E.useCallback(()=>{if(!r){console.warn("[useRates] Cannot subscribe: marketId not provided");return}const O=b.current;if(!O){console.warn("[useRates] Cannot subscribe: client not available");return}if(!Bk(O)){console.warn(`[useRates] Cannot subscribe to market ${r}: client not ready`);return}if(v.current===r&&hv.every(B=>{const z=$k(B,r);return y.current.has(z)})){console.debug(`[useRates] Already subscribed to all rate channels for market ${r}`);return}v.current&&v.current!==r&&_(!0);const D=[];for(const U of hv){const B=$k(U,r);if(y.current.has(B))continue;let z;switch(U){case"funding_rate":z=k(U,e,s);break;case"deviation":z=k(U,e,a);break;case"twap":z=k(U,e,c);break}D.push({subChannel:U,callback:z,key:B})}const I=[];for(const{subChannel:U,callback:B,key:z}of D)try{y.current.set(z,B),O.subscribeMultiFeedSubChannel(U,r,B),console.debug(`[useRates] Subscribed to ${U} for market ${r}`)}catch(j){console.error(`[useRates] Failed to subscribe to ${U} for market ${r}:`,j),y.current.delete(z),I.push(j instanceof Error?j.message:`Failed to subscribe to ${U}`)}I.length>0?f(`Failed to subscribe to some rate channels: ${I.join(", ")}`):D.length>0&&(f(null),console.debug(`[useRates] Successfully subscribed to all rate channels (${hv.join(", ")}) for market ${r}`)),v.current=r},[r,e]),_=E.useCallback((O=!1)=>{const D=v.current;if(!D)return;const I=b.current;I&&(hv.forEach(U=>{const B=$k(U,D),z=y.current.get(B);if(z){try{I.unsubscribeMultiFeedSubChannel(U,z)}catch(j){console.error(`[useRates] Failed to unsubscribe ${U} for ${D}:`,j)}y.current.delete(B)}}),v.current=null,O&&(s(void 0),a(void 0),c(void 0),f(null)))},[]);E.useEffect(()=>{const O=n.subscriptionClient,D=r;b.current=O,h(!1),g(O.isConnected());const I=w.current;w.current=D,I&&I!==D&&(s(void 0),a(void 0),c(void 0),f(null));const U=()=>{if(!Bk(O)){O.getAuthState()==="failed"&&f("Authentication failed - cannot subscribe to rates");return}S()};Bk(O)&&D&&U();const B=O.onStateChange(z=>{g(z===kt.Connected),z===kt.Connected&&D&&U()});return()=>{B==null||B(),_(!0)}},[n.subscriptionClient,n.baseURL,r,S,_]);const C=E.useMemo(()=>Fk(i),[i]),P=E.useMemo(()=>Fk(o),[o]),T=E.useMemo(()=>Fk(l),[l]);return{fundingRate:i,deviation:o,twap:l,latestFundingRate:C,latestDeviation:P,latestTWAP:T,getFundingRate:E.useCallback(()=>i,[i]),getLatestFundingRate:E.useCallback(()=>C,[C]),getDeviation:E.useCallback(()=>o,[o]),getLatestDeviation:E.useCallback(()=>P,[P]),getTWAP:E.useCallback(()=>l,[l]),getLatestTWAP:E.useCallback(()=>T,[T]),loading:u,error:d,isConnected:m}}function Nee(n){const e=n.useWebSocket!==!1,[r,i]=E.useState([]),[s,o]=E.useState(!0),[a,l]=E.useState(""),[c,u]=E.useState(!1),h=E.useRef(null),d=E.useRef(null),f=E.useRef(0),m=E.useRef(!1),g=E.useRef(null),b=E.useRef(null),y=E.useRef(n);y.current=n;const v=E.useCallback(async()=>{if(!h.current)return;const k=y.current;if(!k.walletAddress||k.walletAddress.trim()===""){l(""),i([]),o(!1);return}l("");try{const S=await o_(GN.http,()=>h.current.getPositions(k.walletAddress));if(Array.isArray(S)){const _=S.map(AI);i(C=>{if(C.length!==_.length)return _;const P=JSON.stringify(C),T=JSON.stringify(_);return P===T?C:_})}else i(_=>_.length===0?_:[])}catch(S){l(S instanceof Error?S.message:"Failed to load positions"),console.error("Failed to fetch positions after retries:",S)}finally{o(!1)}},[]),w=E.useCallback(k=>{if(k.market_id&&k.symbol){const S=AI(k);i(_=>{const C=_.findIndex(P=>P.positionId===S.positionId);if(C>=0){const P=[..._];P[C]=S;const T=JSON.stringify(_),O=JSON.stringify(P);return T===O?_:P}else return[..._,S]})}},[]);return E.useEffect(()=>{const k=new cr({baseURL:n.baseURL,sessionToken:n.authToken});h.current=k,v();const S=n.subscriptionClient;if(e){d.current=S;const _=()=>{if(!S.isReadyForSubscriptions()){if(S.isConnected()&&!S.isReadyForSubscriptions()){const D=S.getAuthState();D==="pending"?console.debug("[usePositions] Waiting for authentication to complete..."):D==="failed"&&(console.error("[usePositions] Authentication failed - cannot subscribe to positions"),l("Authentication failed - cannot subscribe to positions"))}return}const P=n.marketId??"0",T=n.symbol??"USDC/USDC";if(!m.current||g.current!==P||b.current!==T){if(m.current&&d.current)try{d.current.unsubscribeMultiFeedSubChannel("positions",w)}catch(D){console.warn("[usePositions] Error unsubscribing from previous positions subscription:",D)}try{S.subscribeMultiFeedSubChannel("positions",P,w,{symbol:T}),m.current=!0,g.current=P,b.current=T,o(!1),console.debug("[usePositions] Subscribed to positions:",{marketId:P,symbol:T})}catch(D){console.error("[usePositions] Failed to subscribe to positions:",D),l(D instanceof Error?D.message:"Failed to subscribe to positions"),m.current=!1,o(!1)}}};u(S.isConnected()),o(!1),S.isReadyForSubscriptions()&&_();const C=S.onStateChange(P=>{console.debug("[usePositions] WebSocket state changed to:",P),u(P===kt.Connected),P===kt.Connected?(_(),f.current!==null&&(clearInterval(f.current),f.current=0)):(P===kt.Disconnected||P===kt.Reconnecting)&&n.refreshInterval&&n.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{v()},n.refreshInterval))});return()=>{if(C&&C(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&m.current)try{d.current.unsubscribeMultiFeedSubChannel("positions",w)}catch(P){console.warn("[usePositions] Error unsubscribing during cleanup:",P)}m.current=!1,g.current=null,b.current=null}}else return n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},n.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[n.subscriptionClient,n.baseURL,n.authToken,n.walletAddress,n.refreshInterval,n.marketId,n.symbol,e]),{positions:r,loading:s,error:a,isConnected:c,refresh:v}}function JN(n){const e=n.useWebSocket!==!1,[r,i]=E.useState([]),[s,o]=E.useState(!0),[a,l]=E.useState(""),[c,u]=E.useState(!1),h=E.useRef(null),d=E.useRef(null),f=E.useRef(0),m=E.useRef(!1),g=E.useRef(null),b=E.useRef(null),y=E.useCallback(k=>{const S=YN(k)?k:VN(k);return Cw(S)},[]),v=E.useCallback(async()=>{if(h.current){l("");try{if(!n.walletAddress){l("Wallet address is required"),i([]);return}const k=await h.current.getBuckets(n.walletAddress),S=Array.isArray(k)?k:[];Array.isArray(k)||console.warn("[useBuckets] getBuckets returned non-array:",k);const _=S.map(y);i(C=>{if(C.length!==_.length)return _;const P=JSON.stringify(C),T=JSON.stringify(_);return P===T?C:_})}catch(k){const S=k instanceof Error?k.message:"Failed to load buckets";l(S),console.error("Failed to fetch buckets:",k)}finally{o(!1)}}},[n.walletAddress,y]),w=E.useCallback(k=>{if(k.buckets&&Array.isArray(k.buckets)){const S=k.buckets.map(y);i(_=>{if(_.length!==S.length)return S;const C=JSON.stringify(_),P=JSON.stringify(S);return C===P?_:S}),o(!1)}},[y]);return E.useEffect(()=>{const k=new cr({baseURL:n.baseURL,sessionToken:n.authToken});h.current=k,v();const S=n.subscriptionClient;if(e){d.current=S;const _=()=>{if(!S.isReadyForSubscriptions()){if(S.isConnected()&&!S.isReadyForSubscriptions()){const D=S.getAuthState();D==="pending"?console.debug("[useBuckets] Waiting for authentication to complete..."):D==="failed"&&(console.error("[useBuckets] Authentication failed - cannot subscribe to buckets"),l("Authentication failed - cannot subscribe to buckets"))}return}const P=String(n.marketId??"0"),T=n.symbol??"USDC/USDC";if(!m.current||g.current!==P||b.current!==T){if(m.current&&d.current)try{d.current.unsubscribeMultiFeedSubChannel("buckets",w)}catch(D){console.warn("[useBuckets] Error unsubscribing from previous buckets subscription:",D)}try{S.subscribeMultiFeedSubChannel("buckets",P,w,{symbol:T}),m.current=!0,g.current=P,b.current=T,o(!1),console.debug("[useBuckets] Subscribed to buckets:",{marketId:P,symbol:T})}catch(D){console.error("[useBuckets] Failed to subscribe to buckets:",D),l(D instanceof Error?D.message:"Failed to subscribe to buckets"),m.current=!1,o(!1)}}};u(S.isConnected()),o(!1),S.isReadyForSubscriptions()&&_();const C=S.onStateChange(P=>{console.debug("[useBuckets] WebSocket state changed to:",P),u(P===kt.Connected),P===kt.Connected?(_(),f.current!==null&&(clearInterval(f.current),f.current=0)):(P===kt.Disconnected||P===kt.Reconnecting)&&n.refreshInterval&&n.refreshInterval>0&&f.current===null&&(f.current=window.setInterval(()=>{v()},n.refreshInterval))});return()=>{if(C&&C(),f.current!==null&&(clearInterval(f.current),f.current=0),d.current&&m.current)try{d.current.unsubscribeMultiFeedSubChannel("buckets",w)}catch(P){console.warn("[useBuckets] Error unsubscribing during cleanup:",P)}m.current=!1,g.current=null,b.current=null}}else return n.refreshInterval&&n.refreshInterval>0&&(f.current=window.setInterval(()=>{v()},n.refreshInterval)),()=>{f.current!==null&&(clearInterval(f.current),f.current=0)}},[n.subscriptionClient,n.baseURL,n.authToken,n.walletAddress,n.refreshInterval,n.marketId,n.symbol,e]),{buckets:r,loading:s,error:a,isConnected:c,refresh:v}}function Pye(n){const e=n.maxDataPoints||100,[r,i]=E.useState([]),[s,o]=E.useState(!0),[a,l]=E.useState(null),[c,u]=E.useState(!1),h=E.useRef(!1),d=E.useRef(null),f=E.useRef(null),m=E.useRef(null),g=E.useCallback(b=>{if(!b){console.warn("[useKline] handleKlineUpdate received null/undefined data");return}try{const y=sa(b.open_time,Date.now()),v=sa(b.close_time,y),w=sa(b.timestamp,y),k={market_id:n.marketId,symbol:b.symbol,interval:b.interval||n.interval,open_time:y,close_time:v,open:Dt(b.open),high:Dt(b.high),low:Dt(b.low),close:Dt(b.close),volume:Dt(b.volume),trade_count:b.trade_count||0,timestamp:w,raw:b};i(S=>{const _=[...S,k];return _.length>e?_.slice(-e):_})}catch(y){console.error("[useKline] Error processing kline update:",y),l(y instanceof Error?y.message:"Failed to process kline data")}},[n.marketId,n.interval,e]);return E.useEffect(()=>{const b=n.subscriptionClient,y=()=>{if(!b.isReadyForSubscriptions()){if(b.isConnected()&&!b.isReadyForSubscriptions()){const k=b.getAuthState();k==="pending"?console.debug("[useKline] Waiting for authentication to complete..."):k==="failed"&&(console.error("[useKline] Authentication failed - cannot subscribe to kline"),l("Authentication failed - cannot subscribe to kline"))}return}if(!h.current||d.current!==n.marketId||f.current!==n.interval||m.current!==(n.symbol||"BTC/USDC")){if(h.current)try{b.unsubscribeMultiFeedSubChannel("kline",g)}catch(k){console.warn("[useKline] Error unsubscribing from previous kline subscription:",k)}try{const k=n.symbol||"BTC/USDC";b.subscribeMultiFeedSubChannel("kline",n.marketId,g,{symbol:k,interval:n.interval}),h.current=!0,d.current=n.marketId,f.current=n.interval,m.current=k,o(!1),console.debug("[useKline] Subscribed to kline:",{marketId:n.marketId,symbol:k,interval:n.interval})}catch(k){console.error("[useKline] Failed to subscribe to kline:",k),l(k instanceof Error?k.message:"Failed to subscribe to kline data"),h.current=!1,o(!1)}}};u(b.isConnected()),o(!1),b.isReadyForSubscriptions()&&y();const v=b.onStateChange(w=>{console.debug("[useKline] WebSocket state changed to:",w),u(w===kt.Connected),w===kt.Connected?y():w===kt.Disconnected||kt.Reconnecting});return()=>{if(v&&v(),b&&h.current)try{b.unsubscribeMultiFeedSubChannel("kline",g)}catch(w){console.warn("[useKline] Error unsubscribing during cleanup:",w)}h.current=!1,d.current=null,f.current=null,m.current=null}},[n.subscriptionClient,n.marketId,n.interval,n.symbol,g]),{klineData:r,loading:s,error:a,isConnected:c}}function Mye(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}const Dye=n=>{switch(n){case"success":return Aye;case"info":return Nye;case"warning":return Rye;case"error":return jye;default:return null}},Oye=Array(12).fill(0),Iye=({visible:n,className:e})=>Ke.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Ke.createElement("div",{className:"sonner-spinner"},Oye.map((r,i)=>Ke.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),Aye=Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ke.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Rye=Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ke.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nye=Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),jye=Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Lye=Ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ke.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ke.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Fye=()=>{const[n,e]=Ke.useState(document.hidden);return Ke.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),n};let LI=1;class $ye{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:i,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:LI++,a=this.toasts.find(c=>c.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...e,id:o,title:i}),{...c,...e,id:o,dismissible:l,title:i}):c):this.addToast({title:i,...s,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=i!==void 0,a;const l=s.then(async u=>{if(a=["resolve",u],Ke.isValidElement(u))o=!1,this.create({id:i,type:"default",message:u});else if(zye(u)&&!u.ok){o=!1;const d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,f=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,g=typeof d=="object"&&!Ke.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...g})}else if(u instanceof Error){o=!1;const d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!Ke.isValidElement(d)?d:{message:d};this.create({id:i,type:"error",description:f,...g})}else if(r.success!==void 0){o=!1;const d=typeof r.success=="function"?await r.success(u):r.success,f=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!Ke.isValidElement(d)?d:{message:d};this.create({id:i,type:"success",description:f,...g})}}).catch(async u=>{if(a=["reject",u],r.error!==void 0){o=!1;const h=typeof r.error=="function"?await r.error(u):r.error,d=typeof r.description=="function"?await r.description(u):r.description,m=typeof h=="object"&&!Ke.isValidElement(h)?h:{message:h};this.create({id:i,type:"error",description:d,...m})}}).finally(()=>{o&&(this.dismiss(i),i=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,h)=>l.then(()=>a[0]==="reject"?h(a[1]):u(a[1])).catch(h));return typeof i!="string"&&typeof i!="number"?{unwrap:c}:Object.assign(i,{unwrap:c})},this.custom=(e,r)=>{const i=(r==null?void 0:r.id)||LI++;return this.create({jsx:e(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ji=new $ye,Bye=(n,e)=>{const r=(e==null?void 0:e.id)||LI++;return ji.addToast({title:n,...e,id:r}),r},zye=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Uye=Bye,Wye=()=>ji.toasts,qye=()=>ji.getActiveToasts(),ht=Object.assign(Uye,{success:ji.success,info:ji.info,warning:ji.warning,error:ji.error,custom:ji.custom,message:ji.message,promise:ji.promise,dismiss:ji.dismiss,loading:ji.loading},{getHistory:Wye,getToasts:qye});Mye("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function fv(n){return n.label!==void 0}const Hye=3,Vye="24px",Yye="16px",RF=4e3,Gye=356,Kye=14,Xye=45,Qye=200;function Bo(...n){return n.filter(Boolean).join(" ")}function Jye(n){const[e,r]=n.split("-"),i=[];return e&&i.push(e),r&&i.push(r),i}const Zye=n=>{var e,r,i,s,o,a,l,c,u;const{invert:h,toast:d,unstyled:f,interacting:m,setHeights:g,visibleToasts:b,heights:y,index:v,toasts:w,expanded:k,removeToast:S,defaultRichColors:_,closeButton:C,style:P,cancelButtonStyle:T,actionButtonStyle:O,className:D="",descriptionClassName:I="",duration:U,position:B,gap:z,expandByDefault:j,classNames:F,icons:N,closeButtonAriaLabel:R="Close toast"}=n,[W,Y]=Ke.useState(null),[K,H]=Ke.useState(null),[Q,G]=Ke.useState(!1),[X,de]=Ke.useState(!1),[ye,se]=Ke.useState(!1),[ie,Pe]=Ke.useState(!1),[ke,q]=Ke.useState(!1),[Ee,Je]=Ke.useState(0),[ct,$e]=Ke.useState(0),ut=Ke.useRef(d.duration||U||RF),qe=Ke.useRef(null),we=Ke.useRef(null),ze=v===0,Me=v+1<=b,Ie=d.type,Ce=d.dismissible!==!1,xe=d.className||"",L=d.descriptionClassName||"",re=Ke.useMemo(()=>y.findIndex(Ve=>Ve.toastId===d.id)||0,[y,d.id]),fe=Ke.useMemo(()=>{var Ve;return(Ve=d.closeButton)!=null?Ve:C},[d.closeButton,C]),le=Ke.useMemo(()=>d.duration||U||RF,[d.duration,U]),ce=Ke.useRef(0),ge=Ke.useRef(0),J=Ke.useRef(0),he=Ke.useRef(null),[pe,_e]=B.split("-"),De=Ke.useMemo(()=>y.reduce((Ve,Ae,Qe)=>Qe>=re?Ve:Ve+Ae.height,0),[y,re]),ae=Fye(),Xe=d.invert||h,Fe=Ie==="loading";ge.current=Ke.useMemo(()=>re*z+De,[re,De]),Ke.useEffect(()=>{ut.current=le},[le]),Ke.useEffect(()=>{G(!0)},[]),Ke.useEffect(()=>{const Ve=we.current;if(Ve){const Ae=Ve.getBoundingClientRect().height;return $e(Ae),g(Qe=>[{toastId:d.id,height:Ae,position:d.position},...Qe]),()=>g(Qe=>Qe.filter(lt=>lt.toastId!==d.id))}},[g,d.id]),Ke.useLayoutEffect(()=>{if(!Q)return;const Ve=we.current,Ae=Ve.style.height;Ve.style.height="auto";const Qe=Ve.getBoundingClientRect().height;Ve.style.height=Ae,$e(Qe),g(lt=>lt.find(rt=>rt.toastId===d.id)?lt.map(rt=>rt.toastId===d.id?{...rt,height:Qe}:rt):[{toastId:d.id,height:Qe,position:d.position},...lt])},[Q,d.title,d.description,g,d.id,d.jsx,d.action,d.cancel]);const te=Ke.useCallback(()=>{de(!0),Je(ge.current),g(Ve=>Ve.filter(Ae=>Ae.toastId!==d.id)),setTimeout(()=>{S(d)},Qye)},[d,S,g,ge]);Ke.useEffect(()=>{if(d.promise&&Ie==="loading"||d.duration===1/0||d.type==="loading")return;let Ve;return k||m||ae?(()=>{if(J.current<ce.current){const lt=new Date().getTime()-ce.current;ut.current=ut.current-lt}J.current=new Date().getTime()})():(()=>{ut.current!==1/0&&(ce.current=new Date().getTime(),Ve=setTimeout(()=>{d.onAutoClose==null||d.onAutoClose.call(d,d),te()},ut.current))})(),()=>clearTimeout(Ve)},[k,m,d,Ie,ae,te]),Ke.useEffect(()=>{d.delete&&(te(),d.onDismiss==null||d.onDismiss.call(d,d))},[te,d.delete]);function ee(){var Ve;if(N!=null&&N.loading){var Ae;return Ke.createElement("div",{className:Bo(F==null?void 0:F.loader,d==null||(Ae=d.classNames)==null?void 0:Ae.loader,"sonner-loader"),"data-visible":Ie==="loading"},N.loading)}return Ke.createElement(Iye,{className:Bo(F==null?void 0:F.loader,d==null||(Ve=d.classNames)==null?void 0:Ve.loader),visible:Ie==="loading"})}const ne=d.icon||(N==null?void 0:N[Ie])||Dye(Ie);var Ze,je;return Ke.createElement("li",{tabIndex:0,ref:we,className:Bo(D,xe,F==null?void 0:F.toast,d==null||(e=d.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Ie],d==null||(r=d.classNames)==null?void 0:r[Ie]),"data-sonner-toast":"","data-rich-colors":(Ze=d.richColors)!=null?Ze:_,"data-styled":!(d.jsx||d.unstyled||f),"data-mounted":Q,"data-promise":!!d.promise,"data-swiped":ke,"data-removed":X,"data-visible":Me,"data-y-position":pe,"data-x-position":_e,"data-index":v,"data-front":ze,"data-swiping":ye,"data-dismissible":Ce,"data-type":Ie,"data-invert":Xe,"data-swipe-out":ie,"data-swipe-direction":K,"data-expanded":!!(k||j&&Q),"data-testid":d.testId,style:{"--index":v,"--toasts-before":v,"--z-index":w.length-v,"--offset":`${X?Ee:ge.current}px`,"--initial-height":j?"auto":`${ct}px`,...P,...d.style},onDragEnd:()=>{se(!1),Y(null),he.current=null},onPointerDown:Ve=>{Ve.button!==2&&(Fe||!Ce||(qe.current=new Date,Je(ge.current),Ve.target.setPointerCapture(Ve.pointerId),Ve.target.tagName!=="BUTTON"&&(se(!0),he.current={x:Ve.clientX,y:Ve.clientY})))},onPointerUp:()=>{var Ve,Ae,Qe;if(ie||!Ce)return;he.current=null;const lt=Number(((Ve=we.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),He=Number(((Ae=we.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),rt=new Date().getTime()-((Qe=qe.current)==null?void 0:Qe.getTime()),Te=W==="x"?lt:He,it=Math.abs(Te)/rt;if(Math.abs(Te)>=Xye||it>.11){Je(ge.current),d.onDismiss==null||d.onDismiss.call(d,d),H(W==="x"?lt>0?"right":"left":He>0?"down":"up"),te(),Pe(!0);return}else{var ve,wt;(ve=we.current)==null||ve.style.setProperty("--swipe-amount-x","0px"),(wt=we.current)==null||wt.style.setProperty("--swipe-amount-y","0px")}q(!1),se(!1),Y(null)},onPointerMove:Ve=>{var Ae,Qe,lt;if(!he.current||!Ce||((Ae=window.getSelection())==null?void 0:Ae.toString().length)>0)return;const rt=Ve.clientY-he.current.y,Te=Ve.clientX-he.current.x;var it;const ve=(it=n.swipeDirections)!=null?it:Jye(B);!W&&(Math.abs(Te)>1||Math.abs(rt)>1)&&Y(Math.abs(Te)>Math.abs(rt)?"x":"y");let wt={x:0,y:0};const ft=_t=>1/(1.5+Math.abs(_t)/20);if(W==="y"){if(ve.includes("top")||ve.includes("bottom"))if(ve.includes("top")&&rt<0||ve.includes("bottom")&&rt>0)wt.y=rt;else{const _t=rt*ft(rt);wt.y=Math.abs(_t)<Math.abs(rt)?_t:rt}}else if(W==="x"&&(ve.includes("left")||ve.includes("right")))if(ve.includes("left")&&Te<0||ve.includes("right")&&Te>0)wt.x=Te;else{const _t=Te*ft(Te);wt.x=Math.abs(_t)<Math.abs(Te)?_t:Te}(Math.abs(wt.x)>0||Math.abs(wt.y)>0)&&q(!0),(Qe=we.current)==null||Qe.style.setProperty("--swipe-amount-x",`${wt.x}px`),(lt=we.current)==null||lt.style.setProperty("--swipe-amount-y",`${wt.y}px`)}},fe&&!d.jsx&&Ie!=="loading"?Ke.createElement("button",{"aria-label":R,"data-disabled":Fe,"data-close-button":!0,onClick:Fe||!Ce?()=>{}:()=>{te(),d.onDismiss==null||d.onDismiss.call(d,d)},className:Bo(F==null?void 0:F.closeButton,d==null||(i=d.classNames)==null?void 0:i.closeButton)},(je=N==null?void 0:N.close)!=null?je:Lye):null,(Ie||d.icon||d.promise)&&d.icon!==null&&((N==null?void 0:N[Ie])!==null||d.icon)?Ke.createElement("div",{"data-icon":"",className:Bo(F==null?void 0:F.icon,d==null||(s=d.classNames)==null?void 0:s.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||ee():null,d.type!=="loading"?ne:null):null,Ke.createElement("div",{"data-content":"",className:Bo(F==null?void 0:F.content,d==null||(o=d.classNames)==null?void 0:o.content)},Ke.createElement("div",{"data-title":"",className:Bo(F==null?void 0:F.title,d==null||(a=d.classNames)==null?void 0:a.title)},d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title),d.description?Ke.createElement("div",{"data-description":"",className:Bo(I,L,F==null?void 0:F.description,d==null||(l=d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),Ke.isValidElement(d.cancel)?d.cancel:d.cancel&&fv(d.cancel)?Ke.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:Ve=>{fv(d.cancel)&&Ce&&(d.cancel.onClick==null||d.cancel.onClick.call(d.cancel,Ve),te())},className:Bo(F==null?void 0:F.cancelButton,d==null||(c=d.classNames)==null?void 0:c.cancelButton)},d.cancel.label):null,Ke.isValidElement(d.action)?d.action:d.action&&fv(d.action)?Ke.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||O,onClick:Ve=>{fv(d.action)&&(d.action.onClick==null||d.action.onClick.call(d.action,Ve),!Ve.defaultPrevented&&te())},className:Bo(F==null?void 0:F.actionButton,d==null||(u=d.classNames)==null?void 0:u.actionButton)},d.action.label):null)};function NF(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function eve(n,e){const r={};return[n,e].forEach((i,s)=>{const o=s===1,a=o?"--mobile-offset":"--offset",l=o?Yye:Vye;function c(u){["top","right","bottom","left"].forEach(h=>{r[`${a}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof i=="number"||typeof i=="string"?c(i):typeof i=="object"?["top","right","bottom","left"].forEach(u=>{i[u]===void 0?r[`${a}-${u}`]=l:r[`${a}-${u}`]=typeof i[u]=="number"?`${i[u]}px`:i[u]}):c(l)}),r}const tve=Ke.forwardRef(function(e,r){const{id:i,invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:h,mobileOffset:d,theme:f="light",richColors:m,duration:g,style:b,visibleToasts:y=Hye,toastOptions:v,dir:w=NF(),gap:k=Kye,icons:S,containerAriaLabel:_="Notifications"}=e,[C,P]=Ke.useState([]),T=Ke.useMemo(()=>i?C.filter(Q=>Q.toasterId===i):C.filter(Q=>!Q.toasterId),[C,i]),O=Ke.useMemo(()=>Array.from(new Set([o].concat(T.filter(Q=>Q.position).map(Q=>Q.position)))),[T,o]),[D,I]=Ke.useState([]),[U,B]=Ke.useState(!1),[z,j]=Ke.useState(!1),[F,N]=Ke.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=Ke.useRef(null),W=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=Ke.useRef(null),K=Ke.useRef(!1),H=Ke.useCallback(Q=>{P(G=>{var X;return(X=G.find(de=>de.id===Q.id))!=null&&X.delete||ji.dismiss(Q.id),G.filter(({id:de})=>de!==Q.id)})},[]);return Ke.useEffect(()=>ji.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{P(G=>G.map(X=>X.id===Q.id?{...X,delete:!0}:X))});return}setTimeout(()=>{$de.flushSync(()=>{P(G=>{const X=G.findIndex(de=>de.id===Q.id);return X!==-1?[...G.slice(0,X),{...G[X],...Q},...G.slice(X+1)]:[Q,...G]})})})}),[C]),Ke.useEffect(()=>{if(f!=="system"){N(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:G})=>{N(G?"dark":"light")})}catch{Q.addListener(({matches:X})=>{try{N(X?"dark":"light")}catch(de){console.error(de)}})}},[f]),Ke.useEffect(()=>{C.length<=1&&B(!1)},[C]),Ke.useEffect(()=>{const Q=G=>{var X;if(a.every(se=>G[se]||G.code===se)){var ye;B(!0),(ye=R.current)==null||ye.focus()}G.code==="Escape"&&(document.activeElement===R.current||(X=R.current)!=null&&X.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[a]),Ke.useEffect(()=>{if(R.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,K.current=!1)}},[R.current]),Ke.createElement("section",{ref:r,"aria-label":`${_} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((Q,G)=>{var X;const[de,ye]=Q.split("-");return T.length?Ke.createElement("ol",{key:Q,dir:w==="auto"?NF():w,tabIndex:-1,ref:R,className:u,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":de,"data-x-position":ye,style:{"--front-toast-height":`${((X=D[0])==null?void 0:X.height)||0}px`,"--width":`${Gye}px`,"--gap":`${k}px`,...b,...eve(h,d)},onBlur:se=>{K.current&&!se.currentTarget.contains(se.relatedTarget)&&(K.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||K.current||(K.current=!0,Y.current=se.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{z||B(!1)},onDragEnd:()=>B(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},T.filter(se=>!se.position&&G===0||se.position===Q).map((se,ie)=>{var Pe,ke;return Ke.createElement(Zye,{key:se.id,icons:S,index:ie,toast:se,defaultRichColors:m,duration:(Pe=v==null?void 0:v.duration)!=null?Pe:g,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:s,visibleToasts:y,closeButton:(ke=v==null?void 0:v.closeButton)!=null?ke:c,interacting:z,position:Q,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:H,toasts:T.filter(q=>q.position==se.position),heights:D.filter(q=>q.position==se.position),setHeights:I,expandByDefault:l,gap:k,expanded:U,swipeDirections:e.swipeDirections})})):null}))}),ku="onboard_mnemonic",Aa="onboard_wallet_address",ao="onboard_chain_type",jm="onboard_auth_token",Lm="onboard_refresh_token",Fm="onboard_expires_at";function nve(n){const e=n.trim();return e.startsWith("0x")||e.startsWith("0X")?"ethereum":e.startsWith("bc1p")||e.startsWith("tb1p")?"bitcoin_taproot":e.startsWith("bc1q")||e.startsWith("tb1q")?"bitcoin_segwit":e.startsWith("1")||e.startsWith("m")||e.startsWith("n")?"bitcoin_legacy":e.startsWith("3")||e.startsWith("2")?"bitcoin_nested_segwit":e.length>=32&&e.length<=44?"solana":null}function Il(n){const[e,r]=E.useState(""),[i,s]=E.useState(""),[o,a]=E.useState("ethereum"),[l,c]=E.useState(!1),[u,h]=E.useState(""),[d,f]=E.useState(void 0),[m,g]=E.useState(void 0),[b,y]=E.useState(!1),[v,w]=E.useState(null);E.useEffect(()=>{const z=localStorage.getItem(ku),j=localStorage.getItem(Aa),F=localStorage.getItem(ao),N=localStorage.getItem(jm),R=localStorage.getItem(Lm),W=localStorage.getItem(Fm);if(r(z||""),s(j||""),F?["ethereum","bitcoin_taproot","bitcoin_segwit","bitcoin_legacy","bitcoin_nested_segwit","solana"].includes(F)?a(F):(a("ethereum"),localStorage.setItem(ao,"ethereum")):a("ethereum"),N&&h(N),R&&f(R),W){const Y=parseInt(W,10);isNaN(Y)||g(Y)}},[]);const k=E.useCallback(async z=>{if(!z||z.trim()==="")return null;c(!0);try{const j=await Tw(z,"ethereum",0,!0);return j.success&&j.address?j.address:(console.error("Failed to generate address:",j.error),null)}catch(j){return console.error("Error generating address:",j),null}finally{c(!1)}},[]),S=E.useCallback(async(z,j=0,F=!0)=>{if(!e||e.trim()==="")return console.warn("Cannot generate address: mnemonic not set"),null;c(!0);try{const N=await Tw(e,z,j,F);return N.success&&N.address?(a(z),localStorage.setItem(ao,z),N.address):(console.error("Failed to generate address:",N.error),null)}catch(N){return console.error("Error generating address for chain:",N),null}finally{c(!1)}},[e]),_=E.useCallback(async z=>{const j=z.trim();if(j===""){r(""),s(""),a("ethereum"),localStorage.removeItem(ku),localStorage.removeItem(Aa),localStorage.removeItem(ao);return}r(j),localStorage.setItem(ku,j);const F=await k(j);F?(s(F),a("ethereum"),localStorage.setItem(Aa,F),localStorage.setItem(ao,"ethereum")):(s(""),a("ethereum"),localStorage.removeItem(Aa),localStorage.setItem(ao,"ethereum"))},[k]),C=E.useCallback(async(z,j,F=0,N=!0)=>{const R=z.trim();if(R===""){r(""),s(""),a("ethereum"),localStorage.removeItem(ku),localStorage.removeItem(Aa),localStorage.removeItem(ao);return}r(R),localStorage.setItem(ku,R);const W=await S(j,F,N);W?(s(W),a(j),localStorage.setItem(Aa,W),localStorage.setItem(ao,j)):(s(""),localStorage.removeItem(Aa))},[S]),P=E.useCallback((z,j,F)=>{const N=z.trim(),R=j.trim().startsWith("0x")||j.trim().startsWith("0X")?j.trim().toLowerCase():j.trim();if(r(N),s(R),localStorage.setItem(ku,N),localStorage.setItem(Aa,R),F)a(F),localStorage.setItem(ao,F);else{const W=nve(R);W&&(a(W),localStorage.setItem(ao,W))}},[]),T=E.useCallback(()=>{r(""),s(""),a("ethereum"),localStorage.removeItem(ku),localStorage.removeItem(Aa),localStorage.removeItem(ao)},[]),O=E.useMemo(()=>{if(e==="")return"";const z=e.trim();if(z==="")return"";try{const j=wp.fromPhrase(z,"","m/44'/60'/0'/0/0");if(i&&j.address.toLowerCase()!==i.toLowerCase())return console.warn("Address mismatch: derived address does not match stored address"),"";const F=BigInt(j.privateKey),N=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(F===0n||F>=N)return console.error("Invalid private key: out of secp256k1 curve order"),"";const W=F.toString(16).toLowerCase().padStart(64,"0");return/^[0-9a-f]{64}$/.test(W)?W:(console.error("Invalid private key format"),"")}catch(j){return console.error("Error computing private key:",j),""}},[e,i]),D=E.useCallback(async(z,j,F,N)=>{y(!0),w(null);try{await _(z);const R=await KN(z,j,F,N);if(R.success&&R.authToken)h(R.authToken),f(R.refreshToken),g(R.expiresAt),localStorage.setItem(jm,R.authToken),R.refreshToken&&localStorage.setItem(Lm,R.refreshToken),R.expiresAt&&localStorage.setItem(Fm,R.expiresAt.toString()),ht.success("Onboarding successful",{description:"Wallet authenticated and auth token generated.",duration:5e3});else{const W=R.error||"Onboarding failed";w(W),h(""),f(void 0),g(void 0),localStorage.removeItem(jm),localStorage.removeItem(Lm),localStorage.removeItem(Fm),ht.error("Onboarding failed",{description:W,duration:6e3})}}catch(R){const W=(R==null?void 0:R.message)||"Unknown error during onboarding";w(W),h(""),f(void 0),g(void 0),localStorage.removeItem(jm),localStorage.removeItem(Lm),localStorage.removeItem(Fm),ht.error("Onboarding error",{description:W,duration:6e3})}finally{y(!1)}},[_]),I=E.useCallback(()=>{w(null)},[]),U=E.useCallback(()=>{h(""),f(void 0),g(void 0),w(null),y(!1),localStorage.removeItem(jm),localStorage.removeItem(Lm),localStorage.removeItem(Fm)},[]),B=E.useCallback(()=>{T(),U()},[T,U]);return{mnemonic:e,walletAddress:i,chainType:o,privateKey:O,authToken:u,refreshToken:d,expiresAt:m,loading:b,error:v,addressLoading:l,onboard:D,setMnemonic:_,setMnemonicWithChain:C,setAccountData:P,generateAddressForChain:S,clearAccountData:T,clearError:I,reset:U,resetAll:B}}function jF(){return typeof window>"u"?!1:!!window.okxwallet}function LF(){var i,s,o,a;if(typeof window>"u")return!1;if((i=window.okxwallet)!=null&&i.ethereum||(s=window.ethereum)!=null&&s.isOKX)return!0;const n=!!((o=window.okxwallet)!=null&&o.solana),e=!!((a=window.okxwallet)!=null&&a.bitcoin);return!!(n&&e&&window.ethereum)}function Kl(){var n;return typeof window>"u"?!1:!!((n=window.okxwallet)!=null&&n.solana)}function Yo(){var n;return typeof window>"u"?!1:!!((n=window.okxwallet)!=null&&n.bitcoin)}function ZN(){var i,s,o,a;if(typeof window>"u")return null;if((i=window.okxwallet)!=null&&i.ethereum)return window.okxwallet.ethereum;if((s=window.ethereum)!=null&&s.isOKX)return window.ethereum;const n=!!((o=window.okxwallet)!=null&&o.solana),e=!!((a=window.okxwallet)!=null&&a.bitcoin);return n&&e&&window.ethereum?window.ethereum:null}function Jo(){var n;return typeof window>"u"?null:(n=window.okxwallet)==null?void 0:n.solana}function jee(){var n;return typeof window>"u"?null:(n=window.okxwallet)==null?void 0:n.bitcoin}async function rve(){const n=ZN();if(!n)throw new Error("OKX Ethereum wallet not found");try{const e=await n.request({method:"eth_requestAccounts"});if(!e||e.length===0)throw new Error("No accounts found in OKX Ethereum wallet");return e[0]}catch(e){throw new Error(`Failed to get OKX Ethereum address: ${e instanceof Error?e.message:"Unknown error"}`)}}async function ive(n,e,r,i){const s=ZN();if(!s)throw new Error("OKX Ethereum wallet not found");try{return{signature:await s.request({method:"eth_signTypedData_v4",params:[i,JSON.stringify({domain:n,types:e,primaryType:"AgentApproval",message:r})]}),address:i}}catch(o){throw o.code===4001?new Error("User rejected the signature request"):new Error(`Failed to sign with OKX Ethereum: ${o.message||"Unknown error"}`)}}async function sve(){const n=Jo();if(!n)throw new Error("OKX Solana wallet not found");try{const e=await n.connect();if(!e||!e.publicKey)throw new Error("Failed to connect to OKX Solana wallet");return e.publicKey.toString()}catch(e){throw new Error(`Failed to get OKX Solana address: ${e instanceof Error?e.message:"Unknown error"}`)}}async function ove(n,e){var i,s;const r=Jo();if(!r)throw new Error("OKX Solana wallet not found");try{r.isConnected||await r.connect();const o=typeof n=="string"?new TextEncoder().encode(n):n,a=await r.signMessage(o,"utf8"),c=(Array.isArray(a.signature)?a.signature:Array.from(a.signature)).map(h=>h.toString(16).padStart(2,"0")).join(""),u=((i=a.publicKey)==null?void 0:i.toString())||e||"";if(!u)throw new Error("Failed to get public key from OKX Solana wallet");return{signature:c,publicKey:u}}catch(o){throw o.code===4001||(s=o.message)!=null&&s.includes("rejected")?new Error("User rejected the signature request"):new Error(`Failed to sign with OKX Solana: ${o.message||"Unknown error"}`)}}async function FF(){const n=jee();if(!n)throw new Error("OKX Bitcoin wallet not found");try{let e;if(typeof n.requestAccounts=="function"){const r=await n.requestAccounts();r&&r.length>0&&(e=r[0])}if(!e&&typeof n.connect=="function"){const r=await n.connect();Array.isArray(r)?r.length>0&&(e=r[0]):r&&typeof r=="object"&&(r.address?e=r.address:Array.isArray(r.accounts)&&r.accounts.length>0&&(e=r.accounts[0]))}if(!e&&typeof n.getAccounts=="function"){const r=await n.getAccounts();r&&r.length>0&&(e=r[0])}if(!e)throw new Error("No accounts found in OKX Bitcoin wallet. Please ensure the wallet is connected and has a Bitcoin account.");return e}catch(e){throw e instanceof Error&&e.message.includes("No accounts found")?e:new Error(`Failed to get OKX Bitcoin address: ${e instanceof Error?e.message:"Unknown error"}`)}}async function ave(n,e){var i;const r=jee();if(!r)throw new Error("OKX Bitcoin wallet not found");try{let s=[];if(typeof r.requestAccounts=="function")s=await r.requestAccounts();else if(typeof r.connect=="function"){const l=await r.connect();Array.isArray(l)?s=l:l&&typeof l=="object"&&(l.address?s=[l.address]:Array.isArray(l.accounts)&&(s=l.accounts))}else typeof r.getAccounts=="function"&&(s=await r.getAccounts());if(!s.includes(e))throw new Error("Address not found in OKX Bitcoin wallet. Please ensure the wallet is connected and the address is available.");const o=await r.signMessage(n,e);let a=o;return o.startsWith("0x")&&(a=o.slice(2)),{signature:a,address:e}}catch(s){throw s.code===4001||(i=s.message)!=null&&i.includes("rejected")?new Error("User rejected the signature request"):new Error(`Failed to sign with OKX Bitcoin: ${s.message||"Unknown error"}`)}}function lve(n){const e=ZN();if(!e)return()=>{};const r=s=>{console.warn("[OKX] Ethereum wallet disconnected:",s),n("ethereum",s.message||"Wallet disconnected")},i=s=>{s.length===0&&(console.warn("[OKX] Ethereum wallet accounts cleared (disconnected)"),n("ethereum","Accounts cleared"))};return e.on&&(e.on("disconnect",r),e.on("accountsChanged",i)),()=>{e.removeListener&&(e.removeListener("disconnect",r),e.removeListener("accountsChanged",i))}}function cve(n){const e=Jo();if(!e)return()=>{};let r=e.isConnected,i=null;const s=()=>{const a=e.isConnected;r&&!a&&(console.warn("[OKX] Solana wallet disconnected (isConnected changed)"),n("solana","Connection lost")),r=a},o=()=>{console.warn("[OKX] Solana wallet disconnected (event)"),n("solana","Disconnected"),r=!1};return e.on&&e.on("disconnect",o),i=setInterval(s,2e3),()=>{i&&(clearInterval(i),i=null),e.removeListener&&e.removeListener("disconnect",o)}}function uve(n){let e=null,r=Yo();return e=setInterval(()=>{const s=Yo();r&&!s&&(console.warn("[OKX] Bitcoin wallet disconnected (provider no longer available)"),n("bitcoin","Provider unavailable")),r=s},2e3),()=>{e&&(clearInterval(e),e=null)}}function dve(n){const e=[];return e.push(lve(n)),e.push(cve(n)),e.push(uve(n)),()=>{e.forEach(r=>r())}}function hve(n={}){const{onDisconnect:e,enableOKX:r=!0,enablePhantom:i=!0,enableOneKey:s=!0,enableEthereum:o=!0}=n,a=E.useRef([]);return E.useEffect(()=>{if(!e)return;const l=[];if(r){const c=(u,h)=>{e({walletName:"OKX",chainType:u,reason:h})};l.push(dve(c))}if(i){const c=(u,h)=>{e({walletName:"Phantom",chainType:"solana",reason:h})};l.push(nye(c))}if(s){const c=(u,h)=>{e({walletName:"OneKey",chainType:"solana",reason:h})};l.push(rye(c))}if(o){const c=(u,h)=>{e({walletName:"Binance",chainType:"solana",reason:h})};l.push(iye(c))}if(o&&typeof window<"u"){const c=window.ethereum;if(c&&c.on){const u=()=>{var f,m,g;return(f=window.okxwallet)!=null&&f.ethereum||c.isOKX?"OKX":(m=window.$onekey)!=null&&m.ethereum||c.isOneKey?"OneKey":(g=window.phantom)!=null&&g.ethereum||c.isPhantom?"Phantom":window.BinanceChain||c.isBinance?"Binance":c.isMetaMask?"MetaMask":"Unknown"},h=f=>{const m=u();console.warn(`[Wallet] ${m} Ethereum wallet disconnected:`,f),e({walletName:m,chainType:"ethereum",reason:f.message||"Wallet disconnected"})},d=f=>{if(f.length===0){const m=u();console.warn(`[Wallet] ${m} Ethereum wallet accounts cleared (disconnected)`),e({walletName:m,chainType:"ethereum",reason:"Accounts cleared"})}};c.on("disconnect",h),c.on("accountsChanged",d),l.push(()=>{c.removeListener&&(c.removeListener("disconnect",h),c.removeListener("accountsChanged",d))})}}return a.current=l,()=>{l.forEach(c=>c()),a.current=[]}},[e,r,i,s,o]),{cleanup:()=>{a.current.forEach(l=>l()),a.current=[]}}}const $F=[{value:"ethereum",label:"Ethereum",description:"Ethereum addresses (0x...)",example:"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"},{value:"bitcoin_taproot",label:"Bitcoin Taproot",description:"Bitcoin Taproot addresses (bc1p...)",example:"bc1p5d7rjq7g6rdk2yhzks9smlaqtedr4dekq08ge8ztwac36sfj9ugtg7eskl"},{value:"bitcoin_segwit",label:"Bitcoin SegWit",description:"Bitcoin SegWit addresses (bc1q...)",example:"bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4"},{value:"bitcoin_legacy",label:"Bitcoin Legacy",description:"Bitcoin Legacy addresses (1...)",example:"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"},{value:"bitcoin_nested_segwit",label:"Bitcoin Nested SegWit",description:"Bitcoin Nested SegWit addresses (3...)",example:"3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy"},{value:"solana",label:"Solana",description:"Solana addresses (Base58)",example:"9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"}];function fve(){const{setAccountData:n}=Il(),{mnemonic:e,setMnemonic:r,addressIndex:i,setAddressIndex:s,chainType:o,setChainType:a,isMainnet:l,setIsMainnet:c,result:u,loading:h,generateAddress:d,isReady:f}=dye();E.useEffect(()=>{u!=null&&u.success&&u.address&&e&&o==="ethereum"&&n(e,u.address)},[u,e,o,n]);const m=$F.find(g=>g.value===o);return p.jsxs("div",{className:"component",children:[p.jsx("h3",{children:"Multichain Address Generator"}),p.jsx("p",{children:"Generate addresses from mnemonic phrases for multiple blockchain networks"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"chainType",children:"Chain Type:"}),p.jsx("select",{id:"chainType",value:o,onChange:g=>a(g.target.value),style:{marginBottom:"0.5rem"},children:$F.map(g=>p.jsxs("option",{value:g.value,children:[g.label," - ",g.description]},g.value))}),m&&p.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem",padding:"0.5rem",background:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"},children:[p.jsx("strong",{children:"Example:"})," ",m.example]})]}),(o.startsWith("bitcoin")||o==="solana")&&p.jsx("div",{className:"form-group",children:p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:l,onChange:g=>c(g.target.checked),style:{marginRight:"0.5rem",cursor:"pointer"}}),l?"Mainnet":"Testnet",p.jsxs("span",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)",marginLeft:"0.5rem"},children:["(",l?"Production network":"Test network",")"]})]})}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),p.jsx("textarea",{id:"mnemonic",value:e,onChange:g=>r(g.target.value),placeholder:"Enter your mnemonic phrase...",rows:3})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),p.jsx("input",{id:"addressIndex",type:"number",value:i,onChange:g=>s(parseInt(g.target.value)||0),min:"0",max:"1000"}),p.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)",marginTop:"0.25rem"},children:"Derivation path index (0 = first address, 1 = second address, etc.)"})]}),p.jsx("button",{className:"button",onClick:d,disabled:h||!f,style:{width:"100%",margin:"0"},children:h?"Generating...":`Generate ${(m==null?void 0:m.label)||"Address"}`}),u&&p.jsx("div",{className:`output ${u.success?"success":"error"}`,children:u.success?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:{marginBottom:"1rem"},children:[p.jsx("strong",{style:{fontSize:"1.1rem",display:"block",marginBottom:"0.5rem"},children:"Generated Address:"}),p.jsx("div",{style:{fontFamily:"Monaco, Menlo, Ubuntu Mono, monospace",fontSize:"0.95rem",wordBreak:"break-all",padding:"0.75rem",background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u.address})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"0.5rem 1rem",fontSize:"0.9rem"},children:[p.jsx("strong",{children:"Chain Type:"}),p.jsx("span",{children:(m==null?void 0:m.label)||u.chainType||"Ethereum"}),p.jsx("strong",{children:"Network:"}),p.jsx("span",{children:u.isMainnet!==void 0?u.isMainnet?"Mainnet":"Testnet":"Mainnet (default)"}),p.jsx("strong",{children:"Index:"}),p.jsx("span",{children:u.index??0}),"mnemonic"in u&&u.mnemonic&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Mnemonic:"}),p.jsx("span",{children:u.mnemonic})]})]}),p.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(0, 0, 0, 0.2)",borderRadius:"4px",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.8)"},children:[p.jsx("strong",{children:"Derivation Path:"})," ",o==="ethereum"&&p.jsxs("code",{children:["m/44'/60'/0'/0/",i]}),o==="bitcoin_taproot"&&p.jsxs("code",{children:["m/86'/0'/0'/0/",i]}),o==="bitcoin_segwit"&&p.jsxs("code",{children:["m/84'/0'/0'/0/",i]}),o==="bitcoin_legacy"&&p.jsxs("code",{children:["m/44'/0'/0'/0/",i]}),o==="bitcoin_nested_segwit"&&p.jsxs("code",{children:["m/49'/0'/0'/0/",i]}),o==="solana"&&p.jsxs("code",{children:["m/44'/501'/0'/",i,"'"]})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("strong",{style:{display:"block",marginBottom:"0.5rem"},children:"Error:"}),p.jsx("div",{style:{color:"rgba(255, 107, 107, 0.9)"},children:u.error})]})}),!f&&p.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",color:"rgba(255, 193, 7, 0.9)",fontSize:"0.9rem"},children:" WASM module is loading. Please wait..."})]})}function pve(){var f,m;const{mnemonic:n,setMnemonic:e,message:r,setMessage:i,useEIP712:s,setUseEIP712:o,addressIndex:a,setAddressIndex:l,result:c,loading:u,signMessage:h,isReady:d}=hye();return p.jsxs("div",{className:"component",children:[p.jsx("h3",{children:"Message Signer"}),p.jsx("p",{children:"Sign messages with your private key"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic Phrase:"}),p.jsx("textarea",{id:"mnemonic",value:n,onChange:g=>e(g.target.value),placeholder:"Enter your mnemonic phrase...",rows:2})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"message",children:"Message to Sign:"}),p.jsx("textarea",{id:"message",value:r,onChange:g=>i(g.target.value),placeholder:"Enter message to sign...",rows:3})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"addressIndex",children:"Address Index:"}),p.jsx("input",{id:"addressIndex",type:"number",value:a,onChange:g=>l(parseInt(g.target.value)||0),min:"0",max:"1000"})]}),p.jsx("div",{className:"form-group",children:p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:s,onChange:g=>o(g.target.checked),style:{marginRight:"0.5rem"}}),"Use EIP-712 Typed Data"]})}),p.jsx("button",{className:"button",onClick:h,disabled:u||!d,children:u?"Signing...":"Sign Message"}),c&&p.jsx("div",{className:`output ${c.success?"success":"error"}`,children:c.success?p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Signature:"}),p.jsx("br",{}),c.signature,p.jsx("br",{}),p.jsx("br",{}),p.jsx("strong",{children:"Details:"}),p.jsx("br",{}),"Message: ",c.message,p.jsx("br",{}),"EIP-712: ",(f=c.options)!=null&&f.useEIP712?"Yes":"No",p.jsx("br",{}),"Address Index: ",((m=c.options)==null?void 0:m.addressIndex)||0]}):p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Error:"}),p.jsx("br",{}),c.error]})})]})}const pv={placeOrder:{label:"Place Order",action:jN,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"side",label:"Side",type:"select",options:["BUY","SELL"],required:!0},{key:"orderType",label:"Order Type",type:"select",options:["LIMIT","MARKET"],required:!0},{key:"price",label:"Price",type:"number",placeholder:"100.5",required:!0,convertToSatoshi:!0},{key:"quantity",label:"Quantity",type:"number",placeholder:"1.0",required:!0,convertToSatoshi:!0}]},cancelOrder:{label:"Cancel Order",action:Sw,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0}]},modifyOrder:{label:"Modify Order",action:LN,fields:[{key:"orderId",label:"Order ID",type:"text",required:!0},{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newPrice",label:"New Price",type:"number",required:!0,convertToSatoshi:!0},{key:"newQuantity",label:"New Quantity",type:"number",required:!0,convertToSatoshi:!0}]},changeLeverage:{label:"Change Leverage",action:bee,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"newLeverage",label:"New Leverage",type:"number",required:!0,convertToSatoshi:!0}]},closePosition:{label:"Close Position",action:kw,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"quantity",label:"Quantity",type:"number",required:!0,convertToSatoshi:!0},{key:"marketPrice",label:"Market Price",type:"number",required:!0,convertToSatoshi:!0}]},swap:{label:"Swap",action:$N,fields:[{key:"fromToken",label:"From Token",type:"text",required:!0},{key:"toToken",label:"To Token",type:"text",required:!0},{key:"amountIn",label:"Amount In",type:"number",required:!0,convertToSatoshi:!0},{key:"minAmountOut",label:"Min Amount Out",type:"number",required:!0,convertToSatoshi:!0}]},changeMarginRatio:{label:"Change Margin Ratio",action:NN,fields:[{key:"marketId",label:"Market ID",type:"text",required:!0},{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"positionId",label:"Position ID",type:"text",required:!1}]},internTransfer:{label:"Internal Transfer",action:FN,fields:[{key:"fromAccount",label:"From Account",type:"text",required:!0},{key:"toAccount",label:"To Account",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0},{key:"tokenAddress",label:"Token Address",type:"text",required:!0}]},bucketTransfer:{label:"Bucket Transfer",action:WN,fields:[{key:"fromBucketId",label:"From Bucket ID",type:"text",required:!0},{key:"toBucketId",label:"To Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},extractToBucket:{label:"Extract to Bucket",action:zN,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},withdrawFromBucket:{label:"Withdraw from Bucket",action:UN,fields:[{key:"bucketId",label:"Bucket ID",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankMint:{label:"Bank Mint",action:BN,fields:[{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]},bankTransfer:{label:"Bank Transfer",action:qN,fields:[{key:"to",label:"To Address",type:"text",required:!0},{key:"assetId",label:"Asset ID",type:"text",required:!0},{key:"amount",label:"Amount",type:"number",required:!0,convertToSatoshi:!0}]}};function mve(){var ie,Pe,ke,q,Ee,Je,ct,$e,ut,qe;const{connect:n,connectors:e,isPending:r}=KJ(),{disconnect:i}=XJ(),{address:s,isConnected:o}=hN(),{signTypedDataAsync:a}=fN(),l=qJ(),[c,u]=E.useState(null),[h,d]=E.useState({}),[f,m]=E.useState("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"),[g,b]=E.useState(""),[y,v]=E.useState(""),[w,k]=E.useState(""),[S,_]=E.useState([]),[C,P]=E.useState(null),[T,O]=E.useState(!1),[D,I]=E.useState(!1),U=typeof window<"u"&&!!((ie=window.ethereum)!=null&&ie.isMetaMask),B=typeof window<"u"&&(!!((Pe=window.phantom)!=null&&Pe.ethereum)||!!((ke=window.ethereum)!=null&&ke.isPhantom)),z=typeof window<"u"&&(!!((q=window.$onekey)!=null&&q.ethereum)||!!((Ee=window.ethereum)!=null&&Ee.isOneKey)),j=e.find(we=>we.id==="injected"),F=typeof window<"u"?(Je=window.phantom)!=null&&Je.ethereum||(ct=window.ethereum)!=null&&ct.isPhantom?"Phantom":($e=window.$onekey)!=null&&$e.ethereum||(ut=window.ethereum)!=null&&ut.isOneKey?"OneKey":(qe=window.ethereum)!=null&&qe.isMetaMask?"MetaMask":null:null,N=g&&s&&g.toLowerCase()===s.toLowerCase(),R=o&&N&&g;E.useEffect(()=>{if(c){const we=pv[c],ze={};we.fields.forEach(Me=>{ze[Me.key]=""}),d(ze),P(null)}},[c]);const W=()=>{const ze=Math.floor(Date.now()/1e3)+3600;k(ze.toString())},Y=()=>{v(Date.now().toString())},K=async()=>{if(!f.trim()){alert("Please enter a mnemonic phrase");return}try{const{mormSigner:we}=await OJ(async()=>{const{mormSigner:Me}=await Promise.resolve().then(()=>cye);return{mormSigner:Me}},void 0);await we.initialize();const ze=await we.generateAddress(f,0);ze.success&&ze.address?b(ze.address):alert(ze.error||"Failed to generate address")}catch(we){alert(we.message||"Failed to generate address")}},H=async()=>{var we,ze,Me;if(!U&&!B&&!z){alert("No supported wallet detected");return}try{const Ie=window.ethereum;let Ce=Ie;if(B&&(Ce=((we=window.phantom)==null?void 0:we.ethereum)||((ze=window.ethereum)!=null&&ze.isPhantom?Ie:null)),z&&(Ce=((Me=window.$onekey)==null?void 0:Me.ethereum)||Ie),!Ce){alert("Wallet provider not found");return}const xe=await Ce.request({method:"eth_requestAccounts"});xe&&xe.length>0&&(_(xe),xe.length===1&&b(xe[0])),j&&(await n({connector:j}),await new Promise(L=>setTimeout(L,300)))}catch(Ie){Ie.code===4001?alert("User rejected the connection request"):(console.error("Error connecting wallet:",Ie),alert(`Failed to connect: ${Ie.message||"Unknown error"}`))}},Q=()=>{if(!c)throw new Error("No operation selected");const we=pv[c],ze={action:we.action};return(c==="cancelOrder"||c==="changeLeverage"||c==="changeMarginRatio"||c==="internTransfer")&&(ze.address=g),we.fields.forEach(Me=>{const Ie=h[Me.key];if(Ie===void 0||Ie===""){if(Me.required)throw new Error(`${Me.label} is required`);return}let Ce=Ie;Me.convertToSatoshi&&Me.type==="number"&&(Ce=un(parseFloat(Ie))),c==="bucketTransfer"&&Me.key==="assetId"||(c==="extractToBucket"||c==="withdrawFromBucket"||c==="bankMint"||c==="bankTransfer")&&Me.key==="assetId"?ze.asset=Ce:c==="closePosition"?Me.key==="quantity"?ze.closeSize=Ce:Me.key==="marketPrice"?ze.marketPrice=Ce:ze[Me.key]=Ce:c==="placeOrder"?Me.key==="side"?ze.side=Ie.toUpperCase():Me.key==="orderType"?ze.orderType=Ie.toUpperCase():ze[Me.key]=Ce:ze[Me.key]=Ce}),ze},G=we=>{const ze={name:"Morpheum",version:"1",chainId:l,verifyingContract:"0x0000000000000000000000000000000000000000"},Me={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Message:[]};Object.keys(we).forEach(Ce=>{Ce==="action"?Me.Message.push({name:"action",type:"string"}):Ce==="owner"?Me.Message.push({name:"owner",type:"address"}):Ce==="nonce"?Me.Message.push({name:"nonce",type:"string"}):Ce==="deadline"?Me.Message.push({name:"deadline",type:"uint256"}):Ce==="address"?Me.Message.push({name:"address",type:"address"}):typeof we[Ce]=="string"&&we[Ce].startsWith("0x")?Me.Message.push({name:Ce,type:"address"}):typeof we[Ce]=="number"||/^\d+$/.test(we[Ce])?Me.Message.push({name:Ce,type:"uint256"}):Me.Message.push({name:Ce,type:"string"})});const Ie={};return Object.keys(we).forEach(Ce=>{Ce==="owner"||Ce==="address"||Ce.startsWith("0x")&&Ce.length===42?Ie[Ce]=we[Ce].toLowerCase():Ie[Ce]=we[Ce]}),{domain:ze,types:Me,primaryType:"Message",message:Ie}},X=async()=>{if(!f.trim())throw new Error("Mnemonic is required for WASM signing");const we=wp.fromPhrase(f.trim(),"","m/44'/60'/0'/0/0");if(we.address.toLowerCase()!==g.toLowerCase())throw new Error(`Address mismatch: derived ${we.address} does not match ${g}`);const ze=BigInt(we.privateKey),Me=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");if(ze===0n||ze>=Me)throw new Error("Invalid private key: must be between 1 and secp256k1 order - 1");const Ce=ze.toString(16).toLowerCase().padStart(64,"0");if(!/^[0-9a-f]{64}$/.test(Ce))throw new Error("Invalid private key format: must be 64 lowercase hex characters (0-9, a-f) without 0x prefix");return Ce},de=async()=>{var we,ze;if(!c){alert("Please select an operation first");return}if(!g){alert("Please set owner address");return}if(!y){alert("Please generate nonce");return}if(!w){alert("Please generate deadline");return}O(!0),P(null);try{const Me=Q();Me.owner=g.toLowerCase(),Me.nonce=y,Me.deadline=w;const Ie=G(Me),Ce=await a({domain:Ie.domain,types:Ie.types,primaryType:Ie.primaryType,message:Ie.message});P({success:!0,signature:Ce,typedData:{payload:Me,typedData:Ie}})}catch(Me){Me.code===4001||(we=Me.message)!=null&&we.includes("User rejected")||(ze=Me.message)!=null&&ze.includes("rejected")?P({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",Me),P({success:!1,error:Me.message||"Unknown error during signing"}))}finally{O(!1)}},ye=async()=>{if(!c){alert("Please select an operation first");return}if(!g){alert("Please set owner address");return}if(!y){alert("Please generate nonce");return}if(!w){alert("Please generate deadline");return}if(!f.trim()){alert("Please enter mnemonic for WASM signing");return}if(!At.isReady())try{if(await At.initialize(),!At.isReady()){alert("WASM module failed to initialize");return}}catch(we){alert(`Failed to initialize WASM: ${we.message||"Unknown error"}`);return}I(!0),P(null);try{const we=Q();we.owner=g.toLowerCase(),we.nonce=y,we.deadline=w;const ze=await X(),Me=Math.floor(Date.now()/1e3),Ie=parseInt(w,10),Ce={txId:"",sigType:"ECDSA_LEGACY",threshold:1,timestamp:Me,payload:we,deadline:Ie},xe=await At.generateSingleSignature(JSON.stringify(Ce),ze,g.toLowerCase());if(!xe.success||!xe.signature)throw new Error(xe.error||"Failed to generate signature");const L=G(we);P({success:!0,signature:xe.signature,typedData:{payload:we,typedData:L,eip712Tx:Ce}})}catch(we){console.error("Error signing with WASM:",we),P({success:!1,error:we.message||"Unknown error during WASM signing"})}finally{I(!1)}},se=c?pv[c]:null;return p.jsxs("div",{className:"component",children:[p.jsx("h3",{children:"Functional Signer"}),p.jsx("p",{children:"Sign EIP-712 messages for Morpheum protocol operations"}),p.jsxs("div",{className:`agent-delegation-step ${c?"connected":""}`,children:[p.jsxs("h4",{children:["Step 1: Select Operation ",c&&""]}),c?p.jsxs("div",{children:[p.jsxs("p",{style:{marginBottom:"1rem"},children:[p.jsx("strong",{children:"Selected:"})," ",se==null?void 0:se.label]}),p.jsx("button",{className:"button secondary",onClick:()=>{u(null),d({}),P(null)},children:"Change Operation"})]}):p.jsx("div",{className:"agent-delegation-wallet-buttons",children:Object.entries(pv).map(([we,ze])=>p.jsx("button",{className:"button",onClick:()=>u(we),children:ze.label},we))})]}),c?p.jsxs("div",{className:`agent-delegation-step ${g&&y&&w?"connected":""}`,children:[p.jsxs("h4",{children:["Step 2: Configure Parameters"," ",g&&y&&w&&""]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"walletConnection",children:"Wallet Connection:"}),R?p.jsxs("div",{className:"agent-delegation-connected-info",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Connected:"})," ",F||"Wallet",g&&p.jsxs("div",{className:"agent-delegation-address",children:["Address: ",g]})]}),p.jsx("button",{className:"button secondary",onClick:()=>{i(),_([]),b("")},children:"Disconnect"})]}):p.jsxs("div",{children:[p.jsx("button",{className:"button",onClick:H,disabled:r||!j,children:r?"Connecting...":"Connect Wallet"}),S.length>0&&!g&&p.jsxs("div",{style:{marginTop:"1rem"},children:[p.jsx("label",{children:"Select Address:"}),S.map(we=>p.jsx("button",{className:"button secondary",onClick:()=>b(we),style:{display:"block",marginTop:"0.5rem",fontFamily:"monospace",fontSize:"0.9rem"},children:we},we))]})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"mnemonic",children:"Mnemonic (for address generation):"}),p.jsx("textarea",{id:"mnemonic",value:f,onChange:we=>m(we.target.value),placeholder:"Enter mnemonic to generate address...",rows:2}),p.jsx("button",{className:"button secondary",onClick:K,style:{marginTop:"0.5rem"},children:"Generate Address from Mnemonic"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[p.jsx("input",{id:"ownerAddress",type:"text",value:g,onChange:we=>b(we.target.value),placeholder:"0x...",style:{flex:1}}),p.jsx("button",{className:"button secondary",onClick:K,disabled:!f.trim(),children:"Generate"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[p.jsx("input",{id:"nonce",type:"text",value:y,onChange:we=>v(we.target.value),placeholder:"Auto-generated timestamp"}),p.jsx("button",{className:"button secondary",onClick:Y,children:"Generate"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"deadline",children:"Deadline (Unix timestamp):"}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[p.jsx("input",{id:"deadline",type:"text",value:w,onChange:we=>k(we.target.value),placeholder:"Auto-generated (1 hour from now)"}),p.jsx("button",{className:"button secondary",onClick:W,children:"Generate"})]})]}),se&&p.jsxs(p.Fragment,{children:[p.jsx("h5",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:"Operation Parameters:"}),se.fields.map(we=>{var ze;return p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:we.key,children:[we.label,we.required&&" *"]}),we.type==="select"?p.jsxs("select",{id:we.key,value:h[we.key]||"",onChange:Me=>d({...h,[we.key]:Me.target.value}),children:[p.jsxs("option",{value:"",children:["Select ",we.label]}),(ze=we.options)==null?void 0:ze.map(Me=>p.jsx("option",{value:Me,children:Me},Me))]}):p.jsx("input",{id:we.key,type:we.type,value:h[we.key]||"",onChange:Me=>d({...h,[we.key]:Me.target.value}),placeholder:we.placeholder}),we.convertToSatoshi&&p.jsx("small",{className:"agent-delegation-small-text",children:"Will be converted to satoshi format"})]},we.key)})]})]}):p.jsxs("div",{className:"agent-delegation-step disabled",children:[p.jsx("h4",{children:"Step 2: Configure Parameters"}),p.jsx("p",{className:"agent-delegation-disabled-text",children:"Please select an operation in Step 1 to continue."})]}),c&&g&&y&&w?p.jsxs("div",{className:"agent-delegation-step",children:[p.jsx("h4",{children:"Step 3: Sign Message"}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[p.jsx("button",{className:"button",onClick:de,disabled:T||D||!g||!y||!w||((se==null?void 0:se.fields.some(we=>we.required&&!h[we.key]))??!1),children:T?"Signing...":"Sign from Wallet"}),p.jsx("button",{className:"button",onClick:ye,disabled:T||D||!g||!y||!w||!f.trim()||((se==null?void 0:se.fields.some(we=>we.required&&!h[we.key]))??!1),children:D?"Signing...":"Sign by WASM"})]})]}):p.jsxs("div",{className:"agent-delegation-step disabled",children:[p.jsx("h4",{children:"Step 3: Sign Message"}),p.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 2 to continue."})]}),C&&p.jsx("div",{className:`output ${C.success?"success":"error"}`,children:C.success?p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Signature:"}),p.jsx("br",{}),C.signature,p.jsx("br",{}),p.jsx("br",{}),C.typedData&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Payload & Typed Data:"}),p.jsx("br",{}),p.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify(C.typedData,null,2)})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Error:"}),p.jsx("br",{}),C.error]})})]})}function gve(){var n,e;return typeof window>"u"?!1:!!((n=window.$onekey)!=null&&n.ethereum||(e=window.ethereum)!=null&&e.isOneKey)}function BF(){var n;return typeof window>"u"?!1:!!((n=window.$onekey)!=null&&n.solana)}function bve(){var n;return typeof window>"u"?!1:!!((n=window.$onekey)!=null&&n.btc||window.$onekey&&window.unisat)}function yve(){var n,e;return typeof window>"u"?null:(n=window.$onekey)!=null&&n.ethereum?window.$onekey.ethereum:(e=window.ethereum)!=null&&e.isOneKey?window.ethereum:null}function Lee(){var n;return typeof window>"u"?null:(n=window.$onekey)!=null&&n.btc?window.$onekey.btc:window.$onekey&&window.unisat?window.unisat:null}async function vve(n,e,r,i){const s=yve();if(!s)throw new Error("OneKey Ethereum wallet not found");try{return{signature:await s.request({method:"eth_signTypedData_v4",params:[i,JSON.stringify({domain:n,types:e,primaryType:"AgentApproval",message:r})]}),address:i}}catch(o){throw o.code===4001?new Error("User rejected the signature request"):new Error(`Failed to sign with OneKey Ethereum: ${o.message||"Unknown error"}`)}}async function xve(){const n=Lee();if(!n)throw new Error("OneKey Bitcoin wallet not found");try{let e;if(typeof n.requestAccounts=="function"){const r=await n.requestAccounts();r&&r.length>0&&(e=r[0])}if(!e&&typeof n.getAccounts=="function"){const r=await n.getAccounts();r&&r.length>0&&(e=r[0])}if(!e)throw new Error("No accounts found in OneKey Bitcoin wallet. Please ensure the wallet is connected and has a Bitcoin account.");return e}catch(e){throw e instanceof Error&&e.message.includes("No accounts found")?e:new Error(`Failed to get OneKey Bitcoin address: ${e instanceof Error?e.message:"Unknown error"}`)}}async function wve(n,e,r="ecdsa"){var s;const i=Lee();if(!i)throw new Error("OneKey Bitcoin wallet not found");try{let o=[];if(typeof i.requestAccounts=="function"?o=await i.requestAccounts():typeof i.getAccounts=="function"&&(o=await i.getAccounts()),!o.includes(e))throw new Error("Address not found in OneKey Bitcoin wallet. Please ensure the wallet is connected and the address is available.");const a=await i.signMessage(n,r);let l=a;return a.startsWith("0x")&&(l=a.slice(2)),{signature:l,address:e}}catch(o){throw o.code===4001||(s=o.message)!=null&&s.includes("rejected")?new Error("User rejected the signature request"):new Error(`Failed to sign with OneKey Bitcoin: ${o.message||"Unknown error"}`)}}function _ve(){var Mt,Wt,Nt,et,Gt,$n,Xt,ts,Br,Cs,io,yr,zr,ns,dh,hh,Lo,fn,ka,jl,Ca,Ll,fh,ph,Bn,Mr,vr,mh,Fl,fu,pu,mu,gu,$l;const n=Il(),{ownerAddress:e,setOwnerAddress:r,agentAddress:i,setAgentAddress:s,agentPrivateKey:o,expiresInDays:a,setExpiresInDays:l,permissions:c,setPermissions:u,agentName:h,setAgentName:d,nonce:f,setNonce:m,result:g,loading:b,generateAgentKeypair:y,clearAgentCredentials:v,isMetaMaskConnected:w,isPhantomConnected:k,isOneKeyConnected:S,isOKXConnected:_,isBinanceConnected:C,isBitgetConnected:P,isReady:T}=Eye(n),{connect:O,connectors:D,isPending:I}=KJ(),{disconnect:U}=XJ(),{address:B,isConnected:z}=hN(),{signTypedDataAsync:j}=fN(),F=qJ(),[N,R]=E.useState([]),[W,Y]=E.useState("ethereum"),[K,H]=E.useState(null),[Q,G]=E.useState(!1),[X,de]=E.useState(!1),ye=()=>{const Se=B||e;if(!Se||!i)throw new Error("Owner and agent addresses are required");const Ge=c.split(",").map(It=>It.trim()).filter(It=>It.length>0),Ue=Math.floor(Date.now()/1e3)+a*24*60*60,Ye={name:"Morpheum",version:"",chainId:F,verifyingContract:"0x0000000000000000000000000000000000000000"},Oe={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],AgentApproval:[{name:"owner",type:"address"},{name:"agent",type:"address"},{name:"agentName",type:"string"},{name:"expiresInDays",type:"uint256"},{name:"permissions",type:"string[]"},{name:"nonce",type:"string"},{name:"deadline",type:"uint256"}]},gt={owner:Se.toLowerCase(),agent:i.toLowerCase(),agentName:h||"",expiresInDays:a,permissions:Ge,nonce:f||Date.now().toString(),deadline:Ue};return{domain:Ye,types:Oe,primaryType:"AgentApproval",message:gt}},se=async()=>{var Ge,Ue,Ye,Oe,gt,It,dt,dn,An,Jt,xr;const Se=B||e;if(!Se||!i){H({success:!1,error:"Owner and agent addresses are required"});return}G(!0),H(null);try{const rs=W==="ethereum"&&S&&qe||W==="solana"&&_e&&we&&((Ge=Ha())==null?void 0:Ge.isConnected)||W==="bitcoin"&&De&&ze,ar=W==="ethereum"&&_&&jF()||W==="solana"&&_e&&Kl()&&((Ue=Jo())==null?void 0:Ue.isConnected)||W==="bitcoin"&&De&&Yo();if(ar&&W==="ethereum"&&LF()){const oe=ye(),tt=await ive(oe.domain,oe.types,oe.message,Se);H({success:!0,signature:tt.signature,typedData:oe})}else if(rs&&W==="ethereum"&&qe){const oe=ye(),tt=await vve(oe.domain,oe.types,oe.message,Se);H({success:!0,signature:tt.signature,typedData:oe})}else if(rs&&W==="solana"&&we){const oe=ye(),tt=Ha();if(!tt)throw new Error("OneKey Solana provider not found");const bt=c.split(",").map(Ur=>Ur.trim()).filter(Ur=>Ur.length>0),Cn=Math.floor(Date.now()/1e3)+a*24*60*60,kr={action:"AgentApproval",owner:oe.message.owner||Se,agent:oe.message.agent||i,expiresInDays:oe.message.expiresInDays||a,permissions:oe.message.permissions||bt,nonce:oe.message.nonce||f||Date.now().toString(),agentName:oe.message.agentName||h||"",deadline:((Ye=oe.message.deadline)==null?void 0:Ye.toString())||Cn.toString()},Ea=await Gbe(tt,kr);H({success:!0,signature:Ea.signature,typedData:oe})}else if(ar&&W==="solana"&&Kl()){const oe=ye(),tt=JSON.stringify(oe.message),bt=await ove(tt);H({success:!0,signature:bt.signature,typedData:oe})}else if(W==="solana"&&_e&&Nk()&&((Oe=Ru())!=null&&Oe.isConnected)){const oe=ye(),tt=Ru();if(!tt)throw new Error("Bitget Solana provider not found");const bt=c.split(",").map(Ur=>Ur.trim()).filter(Ur=>Ur.length>0),Cn=Math.floor(Date.now()/1e3)+a*24*60*60,kr={action:"AgentApproval",owner:oe.message.owner||Se,agent:oe.message.agent||i,expiresInDays:oe.message.expiresInDays||a,permissions:oe.message.permissions||bt,nonce:oe.message.nonce||f||Date.now().toString(),agentName:oe.message.agentName||h||"",deadline:((gt=oe.message.deadline)==null?void 0:gt.toString())||Cn.toString()},Ea=await Qbe(tt,kr);H({success:!0,signature:Ea.signature,typedData:oe})}else if(W==="solana"&&_e&&jk()&&((It=NI())!=null&&It.isConnected)){const oe=ye(),tt=NI();if(!tt)throw new Error("TokenPocket Solana provider not found");const bt=c.split(",").map(Ur=>Ur.trim()).filter(Ur=>Ur.length>0),Cn=Math.floor(Date.now()/1e3)+a*24*60*60,kr={action:"AgentApproval",owner:oe.message.owner||Se,agent:oe.message.agent||i,expiresInDays:oe.message.expiresInDays||a,permissions:oe.message.permissions||bt,nonce:oe.message.nonce||f||Date.now().toString(),agentName:oe.message.agentName||h||"",deadline:((dt=oe.message.deadline)==null?void 0:dt.toString())||Cn.toString()},Ea=await Zbe(tt,kr);H({success:!0,signature:Ea.signature,typedData:oe})}else if(W==="solana"&&_e&&wu()&&((dn=uo())!=null&&dn.isConnected)){const oe=ye(),tt=uo();if(!tt)throw new Error("Binance Solana provider not found");const bt=c.split(",").map(Ur=>Ur.trim()).filter(Ur=>Ur.length>0),Cn=Math.floor(Date.now()/1e3)+a*24*60*60,kr={action:"AgentApproval",owner:oe.message.owner||Se,agent:oe.message.agent||i,expiresInDays:oe.message.expiresInDays||a,permissions:oe.message.permissions||bt,nonce:oe.message.nonce||f||Date.now().toString(),agentName:oe.message.agentName||h||"",deadline:((An=oe.message.deadline)==null?void 0:An.toString())||Cn.toString()},Ea=await tye(tt,kr);H({success:!0,signature:Ea.signature,typedData:oe})}else if(rs&&W==="bitcoin"&&ze){const oe=ye(),tt=JSON.stringify(oe.message);if(!Se)throw new Error("Owner address is required for Bitcoin signing");const bt=await wve(tt,Se,"ecdsa");H({success:!0,signature:bt.signature,typedData:oe})}else if(W==="bitcoin"&&De&&Yo()){const oe=ye(),tt=JSON.stringify(oe.message);if(!Se)throw new Error("Owner address is required for Bitcoin signing");const bt=await ave(tt,Se);H({success:!0,signature:bt.signature,typedData:oe})}else{const oe=ye(),tt=await j({domain:oe.domain,types:oe.types,primaryType:oe.primaryType,message:oe.message});H({success:!0,signature:tt,typedData:oe})}}catch(qt){qt.code===4001||(Jt=qt.message)!=null&&Jt.includes("User rejected")||(xr=qt.message)!=null&&xr.includes("rejected")?H({success:!1,error:"User rejected the signature request"}):(console.error("Error signing:",qt),H({success:!1,error:qt.message||"Unknown error during signing"}))}finally{G(!1)}},ie=Sp(),Pe=ml(),ke=gl(),q=_ye(),Ee=Sye(),Je=Wc(),ct=kye(),$e=typeof window<"u"&&(!!((Mt=window.phantom)!=null&&Mt.ethereum)||!!((Wt=window.ethereum)!=null&&Wt.isPhantom))&&!(window.$onekey||(Nt=window.ethereum)!=null&&Nt.isOneKey),ut=typeof window<"u"&&(!!((et=window.$onekey)!=null&&et.ethereum)||!!((Gt=window.ethereum)!=null&&Gt.isOneKey)||!!window.$onekey),qe=gve(),we=BF(),ze=bve(),Me=typeof window<"u"&&(!!(($n=window.okxwallet)!=null&&$n.ethereum)||!!((Xt=window.ethereum)!=null&&Xt.isOKX)),[Ie,Ce]=E.useState(()=>{var Ge;if(typeof window>"u")return!1;if(((Ge=window.binancew3w)==null?void 0:Ge.isExtension)===!0||window.BinanceChain)return!0;const Se=window.ethereum;if(Se!=null&&Se.isBinance)return!0;if(Se){const Ue=Se.providerName||Se.name;if(typeof Ue=="string"&&Ue.toLowerCase().includes("binance"))return!0}return!!(Se!=null&&Se._postMessageToMp&&typeof Se._postMessageToMp=="function"&&(Se==null?void 0:Se.namespace)==="eip155"||wu())});E.useEffect(()=>{if(Ie)return;let Se=!0;return Lk(3e3,100).then(Ge=>{Se&&Ge&&Ce(!0)}),()=>{Se=!1}},[Ie]);const xe=D.find(Se=>{var Ge;return Se.id==="injected"||Se.type==="injected"||((Ge=Se.name)==null?void 0:Ge.toLowerCase().includes("injected"))});E.useEffect(()=>{var Ge,Ue,Ye,Oe,gt,It,dt,dn,An,Jt,xr,qt,rs,Ht,ar;console.log("[Wallet Debug] Component mounted/updated"),console.log("[Wallet Debug] Window object:",typeof window<"u"?"available":"undefined"),console.log("[Wallet Debug] window.phantom:",window.phantom),console.log("[Wallet Debug] window.ethereum:",window.ethereum),console.log("[Wallet Debug] window.ethereum?.isMetaMask:",(Ge=window.ethereum)==null?void 0:Ge.isMetaMask),console.log("[Wallet Debug] window.ethereum?.isPhantom:",(Ue=window.ethereum)==null?void 0:Ue.isPhantom),console.log("[Wallet Debug] window.ethereum?.isOneKey:",(Ye=window.ethereum)==null?void 0:Ye.isOneKey),console.log("[Wallet Debug] window.ethereum?.isOKX:",(Oe=window.ethereum)==null?void 0:Oe.isOKX),console.log("[Wallet Debug] window.ethereum?.isBinance:",(gt=window.ethereum)==null?void 0:gt.isBinance),console.log("[Wallet Debug] window.binancew3w:",window.binancew3w),console.log("[Wallet Debug] window.binancew3w?.isExtension:",(It=window.binancew3w)==null?void 0:It.isExtension),console.log("[Wallet Debug] window.ethereum?.chainId:",(dt=window.ethereum)==null?void 0:dt.chainId),console.log("[Wallet Debug] window.ethereum?.networkVersion:",(dn=window.ethereum)==null?void 0:dn.networkVersion);const Se=window.ethereum;Se&&(console.log("[Wallet Debug] window.ethereum.providerName:",Se.providerName||Se.name),console.log("[Wallet Debug] window.ethereum keys:",Object.keys(Se).filter(oe=>oe.toLowerCase().includes("binance")||oe.toLowerCase().includes("bnb")||oe==="_postMessageToMp"||oe==="_requestNormalConnect"||oe==="namespace"||oe==="providerName"||oe==="name")),console.log("[Wallet Debug] window.ethereum.namespace:",Se.namespace),console.log("[Wallet Debug] window.ethereum._postMessageToMp:",typeof Se._postMessageToMp)),console.log("[Wallet Debug] window.BinanceChain:",window.BinanceChain),console.log("[Wallet Debug] window.BinanceChain?.solana:",(An=window.BinanceChain)==null?void 0:An.solana),console.log("[Wallet Debug] window.solana:",window.solana),console.log("[Wallet Debug] window.solana?.isBinance:",(Jt=window.solana)==null?void 0:Jt.isBinance),console.log("[Wallet Debug] window.solana?.name:",(xr=window.solana)==null?void 0:xr.name),console.log("[Wallet Debug] window.binancew3w?.solana:",(qt=window.binancew3w)==null?void 0:qt.solana),console.log("[Wallet Debug] window.ethereum?.solana:",(rs=window.ethereum)==null?void 0:rs.solana),console.log("[Wallet Debug] isBinanceSolanaAvailable():",wu()),console.log("[Wallet Debug] window.$onekey:",window.$onekey),console.log("[Wallet Debug] window.okxwallet:",window.okxwallet),console.log("[Wallet Debug] window.okxwallet?.ethereum:",(Ht=window.okxwallet)==null?void 0:Ht.ethereum),console.log("[Wallet Debug] window.okxwallet?.bitcoin:",(ar=window.okxwallet)==null?void 0:ar.bitcoin),console.log("[Wallet Debug] window.unisat:",window.unisat),console.log("[Wallet Debug] window.BitcoinProvider:",window.BitcoinProvider),console.log("[Wallet Debug] window.XverseProvider:",window.XverseProvider),console.log("[Wallet Debug] isPhantomAvailable:",$e),console.log("[Wallet Debug] isOneKeyAvailable:",ut),console.log("[Wallet Debug] isOKXEthereumAvailable:",Me),console.log("[Wallet Debug] isBinanceAvailable:",Ie),console.log("[Wallet Debug] isBitcoinWalletAvailable():",Ga()),console.log("[Wallet Debug] isOKXWalletInstalled():",kh()),console.log("[Wallet Debug] All connectors:",D),console.log("[Wallet Debug] Injected connector:",xe),console.log("[Wallet Debug] Injected connector ID:",xe==null?void 0:xe.id),console.log("[Wallet Debug] Injected connector name:",xe==null?void 0:xe.name),console.log("[Wallet Debug] isConnecting:",I)},[D,xe,$e,ut,Me,Ie,I]);const L=e&&B&&e.toLowerCase()===B.toLowerCase();let re=null;if(typeof window<"u")if((ts=window.$onekey)!=null&&ts.ethereum||(Br=window.ethereum)!=null&&Br.isOneKey||window.$onekey)re="OneKey";else if((Cs=window.phantom)!=null&&Cs.ethereum||(io=window.ethereum)!=null&&io.isPhantom)re="Phantom";else{const Se=!!((yr=window.okxwallet)!=null&&yr.solana),Ge=!!((zr=window.okxwallet)!=null&&zr.bitcoin);Se&&Ge&&window.ethereum||(ns=window.okxwallet)!=null&&ns.ethereum||(dh=window.ethereum)!=null&&dh.isOKX||window.okxwallet?re="OKX":ml()?re="Bitget":gl()?re="TokenPocket":Wc()?re="Coinbase Wallet":window.BinanceChain||(hh=window.ethereum)!=null&&hh.isBinance?re="Binance":Sp()&&(re="MetaMask")}const fe=w||z&&L&&re==="MetaMask"||e&&re==="MetaMask"&&ie,le=k||z&&L&&re==="Phantom"||e&&re==="Phantom"&&$e,ce=S||z&&L&&re==="OneKey"||e&&re==="OneKey"&&ut,ge=_||z&&L&&re==="OKX"||e&&re==="OKX"&&Me,J=C||z&&L&&re==="Binance"||e&&re==="Binance"&&Ie,he=P||z&&L&&re==="Bitget"||e&&re==="Bitget"&&Pe,pe=fe||le||ce||ge||J||he,_e=(()=>{var It,dt,dn,An;if(W!=="solana")return!1;const Se=Ha();if(Se&&Se.isConnected&&Se.publicKey){const Jt=Se.publicKey.toString();if(e===Jt)return!0}const Ge=Jo();if(Ge&&Ge.isConnected&&Ge.publicKey){const Jt=(It=Ge.publicKey)==null?void 0:It.toString();if(Jt&&e===Jt)return!0}const Ue=uo();if(Ue&&Ue.isConnected&&Ue.publicKey){const Jt=(dt=Ue.publicKey)==null?void 0:dt.toString();if(Jt&&e===Jt)return!0}const Ye=Ru();if(Ye&&Ye.isConnected&&Ye.publicKey){const Jt=(dn=Ye.publicKey)==null?void 0:dn.toString();if(Jt&&e===Jt)return!0}const Oe=jI();if(Oe&&Oe.isConnected&&Oe.publicKey){const Jt=(An=Oe.publicKey)==null?void 0:An.toString();if(Jt&&e===Jt)return!0}const gt=ol();if(gt&&gt.isConnected&&gt.publicKey){const Jt=gt.publicKey.toString();if(e===Jt)return!0}if(e&&N.length>0){const Jt=!e.startsWith("0x")&&e.length>=32&&e.length<=44,xr=N.some(qt=>qt===e);if(Jt&&xr)return!0}return!1})(),De=W!=="bitcoin"||!e||!/^(bc1|[13]|[mn2])[a-zA-HJ-NP-Z0-9]{25,62}$/.test(e)?!1:hc()!==null&&Ga(),ae=(()=>{if(W!=="ethereum")return!1;if(z&&B)return!0;if(e&&N.length>0){const Se=e.startsWith("0x")||e.startsWith("0X"),Ge=N.some(Ue=>Ue.toLowerCase()===e.toLowerCase());return Se&&Ge}return!1})(),Xe=ae||_e||De,Fe=(()=>{var Se,Ge,Ue,Ye;if(_e){const Oe=Ha();if(Oe&&Oe.isConnected&&e&&((Se=Oe.publicKey)==null?void 0:Se.toString())===e)return"OneKey (Solana)";console.log("OKX Solana is checking");const gt=Jo();if(gt&&gt.isConnected&&e&&((Ge=gt.publicKey)==null?void 0:Ge.toString())===e)return"OKX (Solana)";console.log("Binance Solana is checking");const It=uo();if(It&&It.isConnected&&e&&((Ue=It.publicKey)==null?void 0:Ue.toString())===e)return"Binance (Solana)";console.log("Coinbase Wallet Solana is checking");const dt=jI();return dt&&dt.isConnected&&e&&((Ye=dt.publicKey)==null?void 0:Ye.toString())===e?"Coinbase Wallet (Solana)":"Phantom (Solana)"}if(De){const Oe=hc();return Oe?`${Oe.name} (Bitcoin)`:"Bitcoin Wallet"}if(ae){if(ce||re==="OneKey"&&ut)return"OneKey";if(ge)return"OKX (Ethereum)";if(he)return"Bitget";if(J)return"Binance";if(fe)return"MetaMask";if(le)return"Phantom (Ethereum)"}return null})(),te=N.length>0||Xe,ee=B||(ae&&e?e:null),ne=Xe&&(ee||(_e||De)&&e)&&i;E.useEffect(()=>{if(i&&o)try{if(sessionStorage.getItem("agent_delegation_address")===i){de(!0);const Ge=setTimeout(()=>de(!1),5e3);return()=>clearTimeout(Ge)}}catch(Se){console.warn("Failed to check sessionStorage:",Se)}},[i,o]);const Ze=E.useRef(void 0);E.useEffect(()=>{if(W==="ethereum")if(z&&B){if(Ze.current!==B){const Se=(e==null?void 0:e.toLowerCase())||"",Ge=B.toLowerCase();Se!==Ge&&(console.log("[Connection Sync] Updating ownerAddress to match wagmiAddress:",B),r(B)),Ze.current=B}}else z&&!B&&e&&N.length>0?N.find(Ge=>Ge.toLowerCase()===e.toLowerCase())&&console.log("[Connection Sync] Wagmi connected but no address yet, keeping ownerAddress:",e):z||(Ze.current=void 0)},[z,B,r,W]);const je=E.useRef(z);E.useEffect(()=>{const Se=je.current;W==="ethereum"&&Se&&!z&&N.length>0&&N.some(Ye=>Ye.startsWith("0x")||Ye.startsWith("0X"))&&(R([]),e&&(e.startsWith("0x")||e.startsWith("0X"))&&r("")),je.current=z},[z,W]),hve({onDisconnect:Se=>{if(console.warn(`[Wallet Disconnect] ${Se.walletName} ${Se.chainType} wallet disconnected:`,Se.reason),Se.chainType==="ethereum"&&W==="ethereum"||Se.chainType==="solana"&&W==="solana"||Se.chainType==="bitcoin"&&W==="bitcoin"){R([]),r("");const Ue=Se.walletName==="OKX"?"OKX Wallet":Se.walletName==="Phantom"?"Phantom Wallet":Se.walletName==="OneKey"?"OneKey Wallet":Se.walletName==="Binance"?"Binance Wallet":Se.walletName==="MetaMask"?"MetaMask":"Wallet",Ye=Se.reason?`

Reason: ${Se.reason}`:"";alert(`${Ue} has disconnected from the ${Se.chainType} network.${Ye}

Please reconnect your wallet to continue.`)}},enableOKX:!0,enablePhantom:!0,enableOneKey:!0,enableEthereum:!0});const Ve=E.useRef({wagmiIsConnected:!1,wagmiAddress:void 0,ownerAddress:"",connectionChainType:"",availableAddressesLength:0});E.useEffect(()=>{const Se=Ve.current;(Se.wagmiIsConnected!==z||Se.wagmiAddress!==B||Se.ownerAddress!==e||Se.connectionChainType!==W||Se.availableAddressesLength!==N.length)&&(console.log("[Connection Debug] wagmiIsConnected:",z),console.log("[Connection Debug] wagmiAddress:",B),console.log("[Connection Debug] ownerAddress:",e),console.log("[Connection Debug] connectionChainType:",W),console.log("[Connection Debug] availableAddresses:",N),console.log("[Connection Debug] isPhantomConnected (hook):",k),console.log("[Connection Debug] isMetaMaskConnected (hook):",w),console.log("[Connection Debug] isOneKeyConnected (hook):",S),console.log("[Connection Debug] isOKXConnected (hook):",_),console.log("[Connection Debug] isBinanceConnected (hook):",C),console.log("[Connection Debug] isBitgetConnected (hook):",P),console.log("[Connection Debug] detectedWallet:",re),console.log("[Connection Debug] hasMatchingAddress:",L),console.log("[Connection Debug] isPhantomConnectedEnhanced:",le),console.log("[Connection Debug] isWalletConnected:",pe),console.log("[Connection Debug] isSolanaConnected:",_e),console.log("[Connection Debug] isBitcoinConnected:",De),console.log("[Connection Debug] isEthereumConnected:",ae),console.log("[Connection Debug] hasWalletExtensionConnection:",Xe),console.log("[Connection Debug] hasWalletConnection:",te),Ve.current={wagmiIsConnected:z,wagmiAddress:B,ownerAddress:e||"",connectionChainType:W,availableAddressesLength:N.length})},[z,B,e,W,N.length,k,w,S,_,C,P]);const Ae=async()=>{if(!ie){alert("MetaMask wallet is not installed. Please install MetaMask wallet extension.");return}try{const Se=window.ethereum;if(Se){const Ge=await Se.request({method:"eth_requestAccounts"});if(Ge&&Ge.length>0){const Ue=Ge.filter(Ye=>Ye&&typeof Ye=="string"&&Ye.trim().length>0);Ue.length>0&&(R(Ue),Ue.length===1&&r(Ue[0]))}}xe?(await O({connector:xe}),await new Promise(Ge=>setTimeout(Ge,300))):alert("MetaMask connector not found. Please ensure MetaMask wallet is installed.")}catch(Se){Se.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to MetaMask:",Se),alert(`Failed to connect to MetaMask: ${Se.message||"Unknown error"}`))}},Qe=async()=>{var Se,Ge,Ue,Ye,Oe,gt,It,dt,dn,An,Jt,xr,qt,rs;if(console.log("[Phantom Debug] Starting connection process..."),console.log("[Phantom Debug] Connection chain type:",W),console.log("[Phantom Debug] isPhantomAvailable:",$e),console.log("[Phantom Debug] window.phantom:",window.phantom),console.log("[Phantom Debug] window.ethereum:",window.ethereum),console.log("[Phantom Debug] window.ethereum?.isPhantom:",(Se=window.ethereum)==null?void 0:Se.isPhantom),W==="solana"){try{if(!wf()){alert("Phantom Solana wallet is not available. Please ensure Phantom wallet is installed and unlocked.");return}console.log("[Phantom Debug] Connecting to Solana...");const Ht=await XN();if(console.log("[Phantom Debug] Solana address received:",Ht),Ht&&typeof Ht=="string"){R([Ht]),r(Ht),console.log("[Phantom Debug] Solana connection successful"),console.log("[Phantom Debug] Solana address set:",Ht),console.log("[Phantom Debug] availableAddresses set:",[Ht]);const ar=ol();console.log("[Phantom Debug] Solana provider state:",{exists:!!ar,isConnected:ar==null?void 0:ar.isConnected,publicKey:(Ge=ar==null?void 0:ar.publicKey)==null?void 0:Ge.toString()})}}catch(Ht){console.error("[Phantom Debug] Solana connection error:",Ht),Ht.code===4001||(Ue=Ht.message)!=null&&Ue.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to Phantom Solana: ${Ht.message||"Unknown error"}`)}return}if(!$e){console.error("[Phantom Debug] Phantom wallet not available"),alert("Phantom wallet is not installed. Please install Phantom wallet extension.");return}try{let Ht=(Ye=window.phantom)==null?void 0:Ye.ethereum;console.log("[Phantom Debug] phantomProvider (window.phantom.ethereum):",Ht);const ar=!!((Oe=window.phantom)!=null&&Oe.solana)||!!window.solana,oe=!!((gt=window.phantom)!=null&&gt.ethereum)||!!((It=window.ethereum)!=null&&It.isPhantom);if(window.phantom&&!Ht&&!((dt=window.ethereum)!=null&&dt.isPhantom)&&(console.warn("[Phantom Debug] Phantom detected but Ethereum provider not available"),console.warn("[Phantom Debug] Phantom might be in Solana mode"),ar&&!oe)){alert(`Phantom wallet is currently in Solana mode. Please switch to Ethereum mode in your Phantom wallet extension to connect.

To switch:
1. Open your Phantom wallet extension
2. Click on the network selector (top of the wallet)
3. Switch from Solana to Ethereum
4. Then try connecting again.`);return}if(!Ht&&window.phantom){const bt=window.phantom;typeof bt.request=="function"&&(Ht=bt,console.log("[Phantom Debug] Using window.phantom as provider"))}if(!Ht&&((dn=window.ethereum)!=null&&dn.isPhantom)&&(Ht=window.ethereum,console.log("[Phantom Debug] Using window.ethereum as provider (isPhantom=true)")),!Ht){console.error("[Phantom Debug] No valid Phantom provider found"),console.error("[Phantom Debug] Available providers:",{hasWindowPhantom:!!window.phantom,hasPhantomEthereum:!!((An=window.phantom)!=null&&An.ethereum),hasPhantomSolana:ar,phantomHasRequest:typeof((Jt=window.phantom)==null?void 0:Jt.request)=="function",hasWindowEthereum:!!window.ethereum,ethereumIsPhantom:(xr=window.ethereum)==null?void 0:xr.isPhantom,ethereumIsMetaMask:(qt=window.ethereum)==null?void 0:qt.isMetaMask}),window.phantom&&ar?alert(`Phantom wallet is in Solana mode. Please switch to Ethereum mode:

1. Open your Phantom wallet extension
2. Switch from Solana to Ethereum network
3. Then try connecting again.`):alert("Phantom wallet Ethereum provider not found. Please ensure Phantom wallet is installed and switched to Ethereum mode.");return}console.log("[Phantom Debug] Using provider, requesting accounts...");let tt;try{tt=await Ht.request({method:"eth_requestAccounts"})}catch(bt){console.error("[Phantom Debug] Error requesting Ethereum accounts:",bt);const Cn=((rs=bt==null?void 0:bt.message)==null?void 0:rs.toLowerCase())||"",kr=bt==null?void 0:bt.code;if(kr===4001||Cn.includes("user rejected")||Cn.includes("rejected")){alert("User rejected the connection request.");return}if(Cn.includes("solana")||Cn.includes("ethereum")||!Ht||kr===-32602||kr===-32603){alert(`Unable to connect to Phantom Ethereum. Please ensure:

1. Phantom wallet is open and unlocked
2. Phantom is switched to Ethereum mode (not Solana)
3. You have an Ethereum account in Phantom

To switch to Ethereum mode:
- Open Phantom extension
- Click the network selector at the top
- Select Ethereum network`);return}throw bt}if(console.log("[Phantom Debug] Accounts received:",tt),tt&&tt.length>0&&(R(tt),console.log("[Phantom Debug] Available addresses:",tt),tt.length===1&&(console.log("[Phantom Debug] Auto-selecting single address:",tt[0]),r(tt[0]))),console.log("[Phantom Debug] Waiting 200ms before wagmi connection..."),await new Promise(bt=>setTimeout(bt,200)),console.log("[Phantom Debug] injectedConnector:",xe),console.log("[Phantom Debug] All connectors:",D),console.log("[Phantom Debug] Current wagmi state - isConnected:",z,"address:",B),console.log("[Phantom Debug] Current ownerAddress:",e),xe){console.log("[Phantom Debug] Connecting via wagmi injected connector...");try{const bt=await O({connector:xe});console.log("[Phantom Debug] Wagmi connect() result:",bt),console.log("[Phantom Debug] Wagmi connect() called"),console.log("[Phantom Debug] Waiting for wagmi state update..."),await new Promise(Cn=>setTimeout(Cn,500)),await new Promise(Cn=>setTimeout(Cn,300)),console.log("[Phantom Debug] After wait - wagmi state - isConnected:",z,"address:",B),console.log("[Phantom Debug] After wait - ownerAddress:",e),!B&&e?(console.log("[Phantom Debug] Wagmi not updated yet, but ownerAddress is set from Phantom"),console.log("[Phantom Debug] The sync effect will update when wagmi is ready")):B&&(console.log("[Phantom Debug] Wagmi address updated successfully:",B),(e==null?void 0:e.toLowerCase())!==B.toLowerCase()&&(console.log("[Phantom Debug] Syncing ownerAddress to match wagmiAddress"),r(B)))}catch(bt){console.error("[Phantom Debug] Error connecting via wagmi:",bt),console.warn("[Phantom Debug] Continuing with Phantom address despite wagmi error"),console.warn("[Phantom Debug] ownerAddress from Phantom:",e)}}else console.error("[Phantom Debug] Injected connector not found"),console.warn("[Phantom Debug] No wagmi connector, but we have Phantom address:",e)}catch(Ht){console.error("[Phantom Debug] Error caught:",Ht),console.error("[Phantom Debug] Error code:",Ht.code),console.error("[Phantom Debug] Error message:",Ht.message),console.error("[Phantom Debug] Error stack:",Ht.stack),Ht.code===4001?(console.log("[Phantom Debug] User rejected the connection"),alert("User rejected the connection request.")):(console.error("[Phantom Debug] Unknown error during connection"),alert(`Failed to connect to Phantom Ethereum: ${Ht.message||"Unknown error"}

Please ensure Phantom wallet is unlocked and switched to Ethereum mode.`))}},lt=async()=>{var Ue,Ye;const Se=kh(),Ge=Ga();if(!Ge&&!Se){alert(`No Bitcoin wallet detected. Please install OneKey, OKX, Bitget, Unisat, or Xverse wallet extension.

If you have OKX or Bitget installed, ensure it's switched to Bitcoin network in the extension.`);return}if(Se&&!Ge){alert(`OKX wallet detected, but Bitcoin provider is not available.

Please ensure:
1. OKX wallet extension is unlocked
2. OKX wallet is switched to Bitcoin network (not Ethereum)
3. You have a Bitcoin account in OKX

After switching to Bitcoin network in OKX, refresh this page and try again.`);return}try{console.log("[Bitcoin Debug] Starting Bitcoin connection...");let Oe;Se&&Yo()?(console.log("[Bitcoin Debug] Using OKX SDK for Bitcoin connection"),Oe=await FF()):Oe=await Iee(),console.log("[Bitcoin Debug] Bitcoin address received:",Oe),Oe&&typeof Oe=="string"&&(R([Oe]),r(Oe),console.log("[Bitcoin Debug] Bitcoin connection successful"))}catch(Oe){if(console.error("[Bitcoin Debug] Bitcoin connection error:",Oe),Oe.code===4001||(Ue=Oe.message)!=null&&Ue.includes("rejected")||(Ye=Oe.message)!=null&&Ye.includes("User rejected"))alert("User rejected the Bitcoin wallet connection request.");else{const gt=hc(),It=(gt==null?void 0:gt.name)||"Bitcoin wallet",dt=Oe.message||"Unknown error";Se&&dt.includes("not found")||dt.includes("No Bitcoin wallet")?alert(`Failed to connect to ${It}: ${dt}

If using OKX wallet:
1. Ensure OKX extension is unlocked
2. Switch OKX to Bitcoin network in the extension
3. Make sure you have a Bitcoin account
4. Refresh this page and try again`):alert(`Failed to connect to ${It}: ${dt}

Please ensure your Bitcoin wallet is unlocked and try again.`)}}},He=async()=>{var Se,Ge,Ue;if(W==="solana"){try{if(!we){alert("OneKey Solana wallet is not available. Please ensure OneKey wallet is installed and unlocked.");return}console.log("[OneKey Debug] Connecting to Solana...");const Ye=await Ybe();console.log("[OneKey Debug] Solana address received:",Ye),Ye&&typeof Ye=="string"&&(R([Ye]),r(Ye),console.log("[OneKey Debug] Solana connection successful"))}catch(Ye){console.error("[OneKey Debug] Solana connection error:",Ye),Ye.code===4001||(Se=Ye.message)!=null&&Se.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to OneKey Solana: ${Ye.message||"Unknown error"}`)}return}if(W==="bitcoin"){try{if(!ze){alert("OneKey Bitcoin wallet is not available. Please ensure OneKey wallet is installed and switched to Bitcoin network.");return}console.log("[OneKey Debug] Connecting to Bitcoin...");const Ye=await xve();console.log("[OneKey Debug] Bitcoin address received:",Ye),Ye&&typeof Ye=="string"&&(R([Ye]),r(Ye),console.log("[OneKey Debug] Bitcoin connection successful"))}catch(Ye){if(console.error("[OneKey Debug] Bitcoin connection error:",Ye),Ye.code===4001||(Ge=Ye.message)!=null&&Ge.includes("rejected"))alert("User rejected the Bitcoin connection request.");else{const Oe=Ye.message||"Unknown error";alert(`Failed to connect to OneKey Bitcoin: ${Oe}

Please ensure your OneKey wallet is unlocked and switched to Bitcoin network.`)}}return}if(!ut){alert("OneKey wallet is not installed. Please install OneKey wallet extension.");return}try{const Ye=((Ue=window.$onekey)==null?void 0:Ue.ethereum)||window.ethereum;if(!Ye){alert("OneKey wallet provider not found. Please ensure OneKey wallet is installed and enabled.");return}const Oe=await Ye.request({method:"eth_requestAccounts"});if(Oe&&Oe.length>0){const gt=Oe.filter(It=>It&&typeof It=="string");gt.length>0&&(R(gt),gt.length===1&&r(gt[0]))}xe?(await O({connector:xe}),await new Promise(gt=>setTimeout(gt,300))):alert("OneKey connector not found. Please ensure OneKey wallet is installed.")}catch(Ye){Ye.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to OneKey:",Ye),alert(`Failed to connect to OneKey: ${Ye.message||"Unknown error"}`))}},rt=async()=>{var Se;if(W==="solana"){try{if(!wu()){alert("Binance Solana wallet is not available. Please ensure Binance wallet is installed and unlocked.");return}console.log("[Binance Debug] Connecting to Solana...");const Ge=await Kbe();console.log("[Binance Debug] Solana address received:",Ge),Ge&&typeof Ge=="string"&&(R([Ge]),r(Ge),console.log("[Binance Debug] Solana connection successful"))}catch(Ge){console.error("[Binance Debug] Solana connection error:",Ge),Ge.code===4001||(Se=Ge.message)!=null&&Se.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to Binance Solana: ${Ge.message||"Unknown error"}`)}return}if(!Ie)if(console.log("[Binance Debug] Not immediately available, checking with polling..."),await Lk(3e3,100))Ce(!0),console.log("[Binance Debug] Binance wallet detected via polling!");else{alert("Binance wallet is not installed. Please install Binance wallet extension.");return}try{let Ge=OF();if(console.log("[Binance Debug] Initial provider check:",Ge?"Found":"Not found"),console.log("[Binance Debug] window.binancew3w:",window.binancew3w),console.log("[Binance Debug] window.BinanceChain:",window.BinanceChain),Ge||(console.log("[Binance Debug] Provider not immediately available, waiting..."),await Lk(3e3,100)&&(Ge=OF(),Ce(!0),console.log("[Binance Debug] Provider found after polling:",Ge?"Yes":"No"))),!Ge){alert("Binance wallet provider not found. Please ensure Binance wallet is installed and enabled.");return}const Ue=await Ge.request({method:"eth_requestAccounts"});if(Ue&&Ue.length>0){const Ye=Ue.filter(Oe=>Oe&&typeof Oe=="string"&&Oe.trim().length>0);Ye.length>0&&(R(Ye),Ye.length===1&&r(Ye[0]))}xe?(await O({connector:xe}),await new Promise(Ye=>setTimeout(Ye,300))):alert("Binance connector not found. Please ensure Binance wallet is installed.")}catch(Ge){Ge.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to Binance:",Ge),alert(`Failed to connect to Binance: ${Ge.message||"Unknown error"}`))}},Te=async()=>{var Se,Ge,Ue,Ye;if(W==="solana"){try{if(!Nk()){alert("Bitget Solana wallet is not available. Please ensure Bitget wallet is installed and unlocked.");return}console.log("[Bitget Debug] Connecting to Solana...");const Oe=await Xbe();console.log("[Bitget Debug] Solana address received:",Oe),Oe&&typeof Oe=="string"&&(R([Oe]),r(Oe),console.log("[Bitget Debug] Solana connection successful"))}catch(Oe){console.error("[Bitget Debug] Solana connection error:",Oe),Oe.code===4001||(Se=Oe.message)!=null&&Se.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to Bitget Solana: ${Oe.message||"Unknown error"}`)}return}if(W==="bitcoin"){try{const Oe=window.bitkeep,gt=!!(Oe!=null&&Oe.isBitKeep||(Ge=Oe==null?void 0:Oe.ethereum)!=null&&Ge.isBitEthereum),It=(Oe==null?void 0:Oe.unisat)||gt&&!window.$onekey&&window.unisat;if(!It){alert(`Bitget Bitcoin wallet is not available. Please ensure:
1. Bitget wallet extension is unlocked
2. Bitget wallet is switched to Bitcoin network
3. You have a Bitcoin account in Bitget

After switching to Bitcoin network in Bitget, refresh this page and try again.`);return}console.log("[Bitget Debug] Connecting to Bitcoin...");const dt=await It.requestAccounts();if(dt&&dt.length>0){const dn=dt[0];R(dt),r(dn),console.log("[Bitget Debug] Bitcoin connection successful:",dn)}else throw new Error("No accounts returned from Bitget Bitcoin wallet")}catch(Oe){console.error("[Bitget Debug] Bitcoin connection error:",Oe),Oe.code===4001||(Ue=Oe.message)!=null&&Ue.includes("rejected")||(Ye=Oe.message)!=null&&Ye.includes("User rejected")?alert("User rejected the Bitcoin connection request."):alert(`Failed to connect to Bitget Bitcoin: ${Oe.message||"Unknown error"}

Please ensure:
1. Bitget wallet extension is unlocked
2. Bitget wallet is switched to Bitcoin network (not Ethereum)
3. You have a Bitcoin account in Bitget

After switching to Bitcoin network in Bitget, refresh this page and try again.`)}return}if(!Pe)if(console.log("[Bitget Debug] Not immediately available, checking with polling..."),await EF(3e3,100))console.log("[Bitget Debug] Bitget wallet detected via polling!");else{alert("Bitget wallet is not installed. Please install Bitget wallet extension.");return}try{let Oe=CF();if(console.log("[Bitget Debug] Initial provider check:",Oe?"Found":"Not found"),console.log("[Bitget Debug] window.bitkeep:",window.bitkeep),Oe||(console.log("[Bitget Debug] Provider not immediately available, waiting..."),await EF(3e3,100)&&(Oe=CF(),console.log("[Bitget Debug] Provider found after polling:",Oe?"Yes":"No"))),!Oe){alert("Bitget wallet provider not found. Please ensure Bitget wallet is installed and enabled.");return}const gt=await Oe.request({method:"eth_requestAccounts"});if(gt&&gt.length>0){const It=gt.filter(dt=>dt&&typeof dt=="string"&&dt.trim().length>0);It.length>0&&(R(It),It.length===1&&r(It[0]))}xe?(await O({connector:xe}),await new Promise(It=>setTimeout(It,300))):alert("Bitget connector not found. Please ensure Bitget wallet is installed.")}catch(Oe){Oe.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to Bitget:",Oe),alert(`Failed to connect to Bitget: ${Oe.message||"Unknown error"}`))}},it=async()=>{var Se,Ge;if(W==="solana"){try{if(!jk()){alert("TokenPocket Solana wallet is not available. Please ensure TokenPocket wallet is installed and unlocked.");return}console.log("[TokenPocket Debug] Connecting to Solana...");const Ue=await Jbe();console.log("[TokenPocket Debug] Solana address received:",Ue),Ue&&typeof Ue=="string"&&(R([Ue]),r(Ue),console.log("[TokenPocket Debug] Solana connection successful"))}catch(Ue){console.error("[TokenPocket Debug] Solana connection error:",Ue),Ue.code===4001||(Se=Ue.message)!=null&&Se.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to TokenPocket Solana: ${Ue.message||"Unknown error"}`)}return}if(!ke)if(console.log("[TokenPocket Debug] Not immediately available, checking with polling..."),await PF(3e3,100))console.log("[TokenPocket Debug] TokenPocket wallet detected via polling!");else{alert("TokenPocket wallet is not installed. Please install TokenPocket wallet extension.");return}try{let Ue=TF();if(console.log("[TokenPocket Debug] Initial provider check:",Ue?"Found":"Not found"),console.log("[TokenPocket Debug] window.ethereum.isTokenPocket:",(Ge=window.ethereum)==null?void 0:Ge.isTokenPocket),Ue||(console.log("[TokenPocket Debug] Provider not immediately available, waiting..."),await PF(3e3,100)&&(Ue=TF(),console.log("[TokenPocket Debug] Provider found after polling:",Ue?"Yes":"No"))),!Ue){alert("TokenPocket wallet provider not found. Please ensure TokenPocket wallet is installed and enabled.");return}const Ye=await Ue.request({method:"eth_requestAccounts"});if(Ye&&Ye.length>0){const Oe=Ye.filter(gt=>gt&&typeof gt=="string"&&gt.trim().length>0);Oe.length>0&&(R(Oe),Oe.length===1&&r(Oe[0]))}xe?(await O({connector:xe}),await new Promise(Oe=>setTimeout(Oe,300))):alert("TokenPocket connector not found. Please ensure TokenPocket wallet is installed.")}catch(Ue){Ue.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to TokenPocket:",Ue),alert(`Failed to connect to TokenPocket: ${Ue.message||"Unknown error"}`))}},ve=async()=>{var Se,Ge;if(W==="solana"){try{if(!_F()){alert("Coinbase Wallet Solana wallet is not available. Please ensure Coinbase Wallet is installed and unlocked.");return}console.log("[Coinbase Wallet Debug] Connecting to Solana...");const Ue=await eye();console.log("[Coinbase Wallet Debug] Solana address received:",Ue),Ue&&typeof Ue=="string"&&(R([Ue]),r(Ue),console.log("[Coinbase Wallet Debug] Solana connection successful"))}catch(Ue){console.error("[Coinbase Wallet Debug] Solana connection error:",Ue),Ue.code===4001||(Se=Ue.message)!=null&&Se.includes("rejected")?alert("User rejected the Solana connection request."):alert(`Failed to connect to Coinbase Wallet Solana: ${Ue.message||"Unknown error"}`)}return}if(!Je)if(console.log("[Coinbase Wallet Debug] Not immediately available, checking with polling..."),await DF(3e3,100))console.log("[Coinbase Wallet Debug] Coinbase Wallet detected via polling!");else{alert("Coinbase Wallet is not installed. Please install Coinbase Wallet extension from the official Chrome Web Store (extension ID: hnfanknocfeofbddgcijnmhnfnkdnaad).");return}try{let Ue=MF();if(console.log("[Coinbase Wallet Debug] Initial provider check:",Ue?"Found":"Not found"),console.log("[Coinbase Wallet Debug] window.ethereum.isCoinbaseWallet:",(Ge=window.ethereum)==null?void 0:Ge.isCoinbaseWallet),Ue||(console.log("[Coinbase Wallet Debug] Provider not immediately available, waiting..."),await DF(3e3,100)&&(Ue=MF(),console.log("[Coinbase Wallet Debug] Provider found after polling:",Ue?"Yes":"No"))),!Ue){alert("Coinbase Wallet provider not found. Please ensure Coinbase Wallet is installed and enabled. Verify you're using the official extension from the Chrome Web Store.");return}const Ye=await Ue.request({method:"eth_requestAccounts"});if(Ye&&Ye.length>0){const gt=Ye.filter(It=>It&&typeof It=="string"&&It.trim().length>0);gt.length>0&&(R(gt),gt.length===1&&r(gt[0]))}const Oe=D.find(gt=>{var It;return gt.id==="injected"||((It=gt.name)==null?void 0:It.toLowerCase().includes("coinbase"))});Oe?(await O({connector:Oe}),await new Promise(gt=>setTimeout(gt,300))):console.warn("Coinbase Wallet connector not found. Please ensure Coinbase Wallet is installed.")}catch(Ue){Ue.code===4001?alert("User rejected the connection request."):(console.error("Error connecting to Coinbase Wallet:",Ue),alert(`Failed to connect to Coinbase Wallet: ${Ue.message||"Unknown error"}`))}},wt=async()=>{var Se,Ge,Ue,Ye;if(!jF()){alert("OKX wallet is not installed. Please install OKX wallet extension.");return}try{let Oe,gt=[];if(W==="ethereum"){const dt=Kl(),dn=Yo(),An=dt&&dn,Jt=LF();if(!Jt)if(An&&window.ethereum)console.log("[OKX Debug] Multi-chain OKX detected, using window.ethereum as OKX provider");else{alert(`OKX Ethereum provider is not available. Please ensure:
1. OKX wallet extension is installed and unlocked
2. OKX wallet is switched to Ethereum network
3. You have an Ethereum account in OKX

If OKX is detected for Solana/Bitcoin but Ethereum provider is missing, please switch OKX wallet to Ethereum network in the extension.`);return}console.log("[OKX Debug] Connecting to OKX Ethereum using OKX SDK..."),console.log("[OKX Debug] Multi-chain detection:",{hasOKXSolana:dt,hasOKXBitcoin:dn,hasOKXMultiChain:An}),console.log("[OKX Debug] Ethereum provider check:",{hasOKXEthereum:Jt,hasOkxwalletEthereum:!!((Se=window.okxwallet)!=null&&Se.ethereum),hasEthereumIsOKX:!!((Ge=window.ethereum)!=null&&Ge.isOKX),hasWindowEthereum:!!window.ethereum});try{Oe=await rve(),gt=[Oe]}catch(xr){if(An&&window.ethereum){console.log("[OKX Debug] OKX SDK method failed, trying window.ethereum directly...");const qt=await window.ethereum.request({method:"eth_requestAccounts"});if(qt&&qt.length>0)Oe=qt[0],gt=[qt];else throw new Error("No accounts returned from OKX Ethereum wallet")}else throw xr}xe&&(await O({connector:xe}),await new Promise(xr=>setTimeout(xr,300)))}else if(W==="solana"){if(!Kl()){alert("OKX Solana provider is not available. Please ensure OKX wallet is installed and switched to Solana network.");return}console.log("[OKX Debug] Connecting to OKX Solana using OKX SDK..."),Oe=await sve(),gt=[Oe]}else if(W==="bitcoin"){if(!Yo()){alert(`OKX Bitcoin provider is not available. Please ensure:
1. OKX wallet extension is unlocked
2. OKX wallet is switched to Bitcoin network (not Ethereum)
3. You have a Bitcoin account in OKX

After switching to Bitcoin network in OKX, refresh this page and try again.`);return}console.log("[OKX Debug] Connecting to OKX Bitcoin using OKX SDK..."),Oe=await FF(),gt=[Oe]}else{alert(`Unsupported chain type: ${W}`);return}const It=gt.filter(dt=>!!(dt&&typeof dt=="string"&&dt.trim().length>0));if(It.length>0)R(It),Oe&&typeof Oe=="string"&&r(Oe),console.log(`[OKX Debug] Successfully connected to OKX ${W}:`,Oe);else throw new Error("No addresses returned from OKX wallet")}catch(Oe){if(Oe.code===4001||(Ue=Oe.message)!=null&&Ue.includes("rejected")||(Ye=Oe.message)!=null&&Ye.includes("User rejected"))alert("User rejected the OKX connection request.");else{console.error(`[OKX Debug] Error connecting to OKX ${W}:`,Oe);const gt=Oe.message||"Unknown error";alert(`Failed to connect to OKX ${W}: ${gt}

Please ensure:
1. OKX wallet extension is installed and unlocked
2. OKX wallet is switched to ${W} network
3. You have a ${W} account in OKX
4. Try refreshing the page and connecting again`)}}},ft=()=>{const Se=ut||Me||Ie||ie||$e||typeof window<"u"&&window.ethereum,Ge=wf()||BF()||Kl()||wu(),Ue=Ga()||kh()||ze;return Se||Ge||Ue},_t=()=>{var Se,Ge,Ue;if(W==="ethereum"){if(ut)return{wallet:"OneKey",handler:He};const Ye=Kl(),Oe=Yo();if(Ye&&Oe||Me)return{wallet:"OKX",handler:wt};if(Pe)return{wallet:"Bitget",handler:Te};if(q)return{wallet:"TokenPocket",handler:it};if(Je)return{wallet:"Coinbase Wallet",handler:ve};if(Ie)return{wallet:"Binance",handler:rt};if(ie)return{wallet:"MetaMask",handler:Ae};if($e)return{wallet:"Phantom",handler:Qe}}else if(W==="solana"){if($e)return{wallet:"Phantom",handler:Qe};if(we)return{wallet:"OneKey",handler:He};if(Kl())return{wallet:"OKX",handler:wt};if(Nk())return{wallet:"Bitget",handler:Te};if(Ee||jk())return{wallet:"TokenPocket",handler:it};const Ye=_F();if(console.log("[Coinbase Wallet Debug] Solana detection in getBestWallet:",{isCoinbaseWalletSolanaDetected:ct,isCoinbaseWalletSolanaAvailable:Ye,windowCoinbaseSolana:!!window.coinbaseSolana,coinbaseSolanaObject:window.coinbaseSolana?{hasConnect:typeof window.coinbaseSolana.connect=="function",hasDisconnect:typeof window.coinbaseSolana.disconnect=="function",hasSignMessage:typeof window.coinbaseSolana.signMessage=="function",hasSignTransaction:typeof window.coinbaseSolana.signTransaction=="function",_storage:window.coinbaseSolana._storage,_storageScope:(Se=window.coinbaseSolana._storage)==null?void 0:Se.scope}:null}),Ye)return console.log("[Coinbase Wallet Debug] Coinbase Wallet Solana detected - returning handler"),{wallet:"Coinbase Wallet",handler:ve};if(console.log("[Coinbase Wallet Debug] Coinbase Wallet Solana NOT detected"),wu())return{wallet:"Binance",handler:rt}}else if(W==="bitcoin"){if(ze)return{wallet:"OneKey",handler:He};if(Yo())return{wallet:"OKX",handler:wt};const Ye=window.bitkeep;if(!!(Ye!=null&&Ye.isBitKeep||(Ge=Ye==null?void 0:Ye.ethereum)!=null&&Ge.isBitEthereum)&&(!!(Ye!=null&&Ye.unisat)||!window.$onekey&&!!window.unisat))return{wallet:"Bitget",handler:Te};if(Ga())return{wallet:((Ue=hc())==null?void 0:Ue.name)||"Bitcoin Wallet",handler:lt}}return null},Rt=async()=>{const Se=_t();if(!Se){W==="ethereum"?alert("No Ethereum wallet detected. Please install MetaMask, Phantom, OneKey, OKX, Bitget, or Binance wallet."):W==="solana"?alert("No Solana wallet detected. Please install Phantom, OneKey, OKX, Bitget, or Binance wallet extension for Solana support."):W==="bitcoin"&&(kh()?alert("OKX wallet detected, but Bitcoin provider is not available. Please switch OKX wallet to Bitcoin network in the extension, then refresh this page."):alert("No Bitcoin wallet detected. Please install OneKey, OKX, Bitget, Unisat, or Xverse wallet extension."));return}await Se.handler()};return p.jsxs("div",{className:"component",children:[p.jsx("h3",{children:"Agent Delegation"}),p.jsx("p",{children:"Approve an agent private key to act on behalf of the owner wallet"}),p.jsxs("div",{className:`agent-delegation-step ${te?"connected":""}`,children:[p.jsxs("h4",{children:["Step 1: Connect Wallet ",Xe&&(ee||(_e||De)&&e)&&""]}),te?N.length>0&&!Xe?p.jsxs("div",{children:[p.jsxs("p",{style:{marginBottom:"1rem"},children:[p.jsx("strong",{children:"Connected:"})," ",Fe||"Wallet"]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"addressSelect",children:"Select an address to use:"}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:N.filter(Se=>Se&&typeof Se=="string").map(Se=>p.jsx("button",{className:`button ${(e==null?void 0:e.toLowerCase())===(Se==null?void 0:Se.toLowerCase())?"":"secondary"}`,onClick:()=>r(Se),style:{textAlign:"left",justifyContent:"flex-start",fontFamily:"monospace",fontSize:"0.9rem"},children:Se},Se))})]}),p.jsx("button",{className:"button secondary",onClick:async()=>{if(W==="solana"){const Se=Ha();if(Se&&Se.isConnected)try{await Se.disconnect()}catch(Oe){console.error("Error disconnecting OneKey Solana:",Oe)}const Ge=ol();if(Ge&&Ge.isConnected)try{await Ge.disconnect()}catch(Oe){console.error("Error disconnecting Phantom Solana:",Oe)}const Ue=Jo();if(Ue&&Ue.isConnected)try{await Ue.disconnect()}catch(Oe){console.error("Error disconnecting OKX Solana:",Oe)}const Ye=uo();if(Ye&&Ye.isConnected)try{await Ye.disconnect()}catch(Oe){console.error("Error disconnecting Binance Solana:",Oe)}}else W==="ethereum"&&U();R([]),r("")},style:{marginTop:"1rem"},children:"Disconnect"})]}):p.jsxs("div",{className:"agent-delegation-connected-info",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Connected:"})," ",Fe||(De?((Lo=hc())==null?void 0:Lo.name)||"Bitcoin Wallet":null),_e&&p.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"(Solana)"}),De&&p.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.9rem",opacity:.8},children:"(Bitcoin)"}),(ee||(_e||De)&&e)&&p.jsxs("div",{className:"agent-delegation-address",children:["Address: ",ee||e]})]}),p.jsx("button",{className:"button secondary",onClick:async()=>{if(W==="solana"||_e){const Se=ol();if(Se&&Se.isConnected)try{await Se.disconnect()}catch(Ye){console.error("Error disconnecting Phantom Solana:",Ye)}const Ge=Jo();if(Ge&&Ge.isConnected)try{await Ge.disconnect()}catch(Ye){console.error("Error disconnecting OKX Solana:",Ye)}const Ue=uo();if(Ue&&Ue.isConnected)try{await Ue.disconnect()}catch(Ye){console.error("Error disconnecting Binance Solana:",Ye)}}else W==="bitcoin"||De?console.log("[Bitcoin Debug] Disconnecting Bitcoin wallet"):U();R([]),r("")},children:"Disconnect"})]}):p.jsx("div",{children:ft()?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[p.jsx("label",{htmlFor:"connectionChainType",style:{marginBottom:"0.5rem",display:"block"},children:p.jsx("strong",{children:"Select Chain Type:"})}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[p.jsx("button",{className:`button ${W==="ethereum"?"":"secondary"}`,onClick:()=>Y("ethereum"),style:{flex:1,minWidth:"100px"},children:"Ethereum"}),(wf()||we||Kl()||wu())&&p.jsx("button",{className:`button ${W==="solana"?"":"secondary"}`,onClick:()=>Y("solana"),style:{flex:1,minWidth:"100px"},children:"Solana"}),(Ga()||kh())&&p.jsx("button",{className:`button ${W==="bitcoin"?"":"secondary"}`,onClick:()=>Y("bitcoin"),style:{flex:1,minWidth:"100px"},children:"Bitcoin"})]}),p.jsx("small",{className:"agent-delegation-small-text",style:{display:"block",marginTop:"0.5rem"},children:W==="ethereum"?"Connect to Ethereum network (MetaMask, Phantom Ethereum, OneKey, OKX, Binance)":W==="solana"?"Connect to Solana network (Phantom Solana, OneKey Solana, OKX Solana, Binance Solana)":"Connect to Bitcoin network (OneKey, Unisat, Xverse, OKX). If using OKX, ensure it's switched to Bitcoin network."})]}),p.jsx("div",{className:"agent-delegation-wallet-buttons",children:(()=>{var Ge;const Se=_t();return Se?p.jsx("button",{className:"button",onClick:Rt,disabled:I||W==="ethereum"&&!xe,children:I?"Connecting...":`Connect ${Se.wallet}${W!=="ethereum"?` (${W.charAt(0).toUpperCase()+W.slice(1)})`:""}`}):W==="ethereum"?p.jsx("p",{className:"agent-delegation-error-message",children:"No Ethereum wallet detected. Please install MetaMask, Phantom, OneKey, OKX, or Binance wallet."}):W==="solana"?p.jsx("p",{className:"agent-delegation-error-message",children:"No Solana wallet detected. Please install Phantom, OneKey, OKX, Bitget, or Binance wallet extension for Solana support."}):W==="bitcoin"?p.jsx("p",{className:"agent-delegation-error-message",children:kh()||(Ge=window.bitkeep)!=null&&Ge.isBitKeep?"Wallet detected, but Bitcoin provider is not available. Please switch your wallet to Bitcoin network in the extension, then refresh this page.":"No Bitcoin wallet detected. Please install OneKey, OKX, Bitget, Unisat, or Xverse wallet extension."}):null})()})]}):p.jsxs("div",{className:"agent-delegation-wallet-buttons",children:[p.jsx("p",{className:"agent-delegation-error-message",style:{marginBottom:"1rem"},children:p.jsx("strong",{children:"No wallet detected"})}),p.jsx("p",{className:"agent-delegation-error-message",children:"Please install a compatible wallet extension to continue:"}),p.jsxs("ul",{style:{textAlign:"left",marginTop:"0.5rem",marginBottom:"1rem"},children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Ethereum:"})," MetaMask, Phantom, OneKey, OKX, Bitget, or Binance wallet"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Solana:"})," Phantom, OneKey, OKX, Bitget, or Binance wallet"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Bitcoin:"})," OneKey, OKX, Bitget, Unisat, or Xverse wallet"]})]}),p.jsx("p",{className:"agent-delegation-small-text",style:{marginTop:"0.5rem"},children:"After installing a wallet, refresh this page to connect."})]})})]}),Xe&&(ee||(_e||De)&&e)?p.jsxs("div",{className:`agent-delegation-step ${ne?"connected":""}`,children:[p.jsxs("h4",{children:["Step 2: Configure Agent Delegation ",ne&&""]}),X&&p.jsx("div",{style:{padding:"0.75rem",marginBottom:"1rem",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",color:"rgba(76, 175, 80, 0.9)",fontSize:"0.9rem"},children:" Agent credentials restored from previous session"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"ownerAddress",children:"Owner Address:"}),p.jsx("input",{id:"ownerAddress",type:"text",value:ee||e,readOnly:!0,style:{fontFamily:"monospace",fontSize:"0.9rem",backgroundColor:"rgba(255, 255, 255, 0.05)",cursor:"not-allowed"}}),p.jsxs("small",{className:"agent-delegation-small-text",children:["This address is from your connected ",Fe||"wallet"," extension",_e?" (Solana)":De?" (Bitcoin)":ee?" (Ethereum)":"","."]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"agentAddress",children:"Agent Address:"}),p.jsxs("div",{className:"agent-delegation-input-group",children:[p.jsx("input",{id:"agentAddress",type:"text",value:i,onChange:Se=>s(Se.target.value),placeholder:"0x...",className:"agent-delegation-input-flex"}),p.jsx("button",{className:"button secondary agent-delegation-button-compact",onClick:y,disabled:b||!T,children:"Generate Keypair"})]})]}),o&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"agentPrivateKey",children:"Agent Private Key (save securely):"}),p.jsx("input",{id:"agentPrivateKey",type:"text",value:o,readOnly:!0,className:"agent-delegation-private-key"}),p.jsxs("div",{style:{marginTop:"0.5rem"},children:[p.jsx("button",{className:"button secondary",onClick:()=>{v(),de(!1)},style:{fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"Clear Agent Credentials"}),p.jsx("small",{className:"agent-delegation-small-text",style:{display:"block",marginTop:"0.5rem"},children:"Credentials are stored in browser session storage and will be cleared when browser closes."})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"agentName",children:"Agent Name (optional):"}),p.jsx("input",{id:"agentName",type:"text",value:h,onChange:Se=>d(Se.target.value),placeholder:"enter you agent name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"expiresInDays",children:"Expires In Days:"}),p.jsx("input",{id:"expiresInDays",type:"number",value:a,onChange:Se=>l(parseInt(Se.target.value)||180),min:"1",max:"365"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"permissions",children:"Permissions (comma-separated):"}),p.jsx("input",{id:"permissions",type:"text",value:c,onChange:Se=>u(Se.target.value),placeholder:"clob::submit_order,clob::cancel_order"}),p.jsx("small",{className:"agent-delegation-small-text",children:"Example: clob::submit_order, clob::cancel_order, clob::modify_order"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"nonce",children:"Nonce:"}),p.jsx("input",{id:"nonce",type:"text",value:f,onChange:Se=>m(Se.target.value),placeholder:Date.now().toString()})]})]}):p.jsxs("div",{className:"agent-delegation-step disabled",children:[p.jsx("h4",{children:"Step 2: Configure Agent Delegation"}),p.jsx("p",{className:"agent-delegation-disabled-text",children:te&&!Xe?"Please select an address in Step 1 to continue.":"Please connect a wallet extension in Step 1 to continue."})]}),ne?p.jsxs("div",{className:"agent-delegation-step",children:[p.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),p.jsxs("div",{className:"agent-delegation-button-group",children:[w&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!B||!i,children:Q?"Signing with MetaMask...":"Sign Agent Approval (MetaMask)"}),(k||W==="solana"&&_e&&!((fn=Ha())!=null&&fn.isConnected)&&!((ka=Jo())!=null&&ka.isConnected)&&!((jl=Ru())!=null&&jl.isConnected)&&!((Ca=uo())!=null&&Ca.isConnected))&&p.jsx("button",{className:"button",onClick:se,disabled:Q||W==="ethereum"&&!B||!i||!e,children:Q?"Signing with Phantom...":W==="solana"?"Sign Agent Approval (Phantom Solana)":"Sign Agent Approval (Phantom)"}),(S||W==="solana"&&_e&&((Ll=Ha())==null?void 0:Ll.isConnected)||W==="bitcoin"&&De&&ze)&&p.jsx("button",{className:"button",onClick:se,disabled:Q||W==="ethereum"&&!B||!i||!e,children:Q?"Signing with OneKey...":W==="solana"?"Sign Agent Approval (OneKey Solana)":W==="bitcoin"?"Sign Agent Approval (OneKey Bitcoin)":"Sign Agent Approval (OneKey)"}),W==="solana"&&_e&&((fh=Ru())==null?void 0:fh.isConnected)&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!i||!e,children:Q?"Signing with Bitget...":"Sign Agent Approval (Bitget Solana)"}),W==="solana"&&_e&&((ph=uo())==null?void 0:ph.isConnected)&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!i||!e,children:Q?"Signing with Binance...":"Sign Agent Approval (Binance Solana)"}),(_||W==="solana"&&_e&&((Bn=Jo())==null?void 0:Bn.isConnected)&&!((Mr=Ru())!=null&&Mr.isConnected)&&!((vr=uo())!=null&&vr.isConnected)||W==="bitcoin"&&De&&Yo())&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!B&&W==="ethereum"||!i||!e,children:Q?"Signing with OKX...":`Sign Agent Approval (OKX${W==="ethereum"?"":` ${W}`})`}),C&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!B||!i,children:Q?"Signing with Binance...":"Sign Agent Approval (Binance)"}),P&&p.jsx("button",{className:"button",onClick:se,disabled:Q||!B||!i,children:Q?"Signing with Bitget...":"Sign Agent Approval (Bitget)"})]})]}):p.jsxs("div",{className:"agent-delegation-step disabled",children:[p.jsx("h4",{children:"Step 3: Prepare and Sign Agent Approval"}),p.jsx("p",{className:"agent-delegation-disabled-text",children:"Please complete Step 1 (connect wallet) and Step 2 (configure addresses) to continue."})]}),(g||K)&&p.jsx("div",{className:`output ${(mh=g||K)!=null&&mh.success?"success":"error"}`,children:(Fl=g||K)!=null&&Fl.success?p.jsxs(p.Fragment,{children:[((fu=g||K)==null?void 0:fu.signature)&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Agent Approval Signature:"}),p.jsx("br",{}),(pu=g||K)==null?void 0:pu.signature,p.jsx("br",{}),p.jsx("br",{})]}),((mu=g||K)==null?void 0:mu.typedData)&&p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"EIP-712 Typed Data:"}),p.jsx("br",{}),p.jsx("pre",{className:"agent-delegation-pre",children:JSON.stringify((gu=g||K)==null?void 0:gu.typedData,null,2)}),p.jsx("br",{}),p.jsx("strong",{children:"Usage:"}),p.jsx("br",{}),"Signature received from wallet. The typed data structure is shown above."]})]}):p.jsxs(p.Fragment,{children:[p.jsx("strong",{children:"Error:"}),p.jsx("br",{}),($l=g||K)==null?void 0:$l.error]})})]})}function Sve({status:n}){const e=()=>n.loading?"loading":n.loaded?"success":n.error?"error":"loading",r=()=>n.loading?"Loading WASM...":n.loaded?"WASM Ready":n.error?"WASM Error":"Unknown";return p.jsxs("div",{className:"App-section",children:[p.jsx("h3",{children:"WASM Status"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[p.jsx("span",{className:`status ${e()}`,children:r()}),n.loading&&p.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Initializing WebAssembly module..."}),n.loaded&&p.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"morm_signer.wasm loaded successfully"}),n.error&&p.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:n.error})]})]})}function Qd(n,e=2,r=2,i="0.00"){return n==null||isNaN(n)?i:n.toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:r})}function Pw(n){return n==null||isNaN(n)?"--":Qd(n,2,2,"--")}function _f(n){return n==null||isNaN(n)?"--":Qd(n,2,8,"--")}function Mw(n){return n==null||isNaN(n)?"0.000":Qd(n,3,3,"0.000")}function kve(n){return n==null||isNaN(n)?"0":Qd(n,3,8,"0")}function Cve(n){return n==null||isNaN(n)?"0.00":Qd(n,2,2,"0.00")}function Eve(n){return n==null||isNaN(n)?"0.00":Qd(n,2,2,"0.00")}function Hn(n){return n==null||isNaN(n)?"0.00":Qd(n,2,2,"0.00")}function G0(n){return n==null||isNaN(n)?"0%":`${(n*100).toFixed(2)}%`}function Tve(n){if(n==null)return"0";if(typeof n=="string"){const e=n.trim();if(e===""||isNaN(Number(e)))return"0";const r=e.includes(".")?Math.floor(Number(e)).toString():e;try{return Ct(r).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}if(typeof n=="number"){if(isNaN(n)||!isFinite(n))return"0";const e=Math.floor(n).toString();try{return Ct(e).toFixed(8).replace(/\.?0+$/,"")}catch{return"0"}}return"0"}function Nu(n){if(n==null||typeof n=="string"&&(n.trim()===""||isNaN(Number(n))))return"--";try{const r=Tve(n).split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),r.join(".")}catch{return"--"}}function Fee(n,e="--"){if(n==null)return e;try{return(typeof n=="string"||typeof n=="number"?Ct(typeof n=="string"?n:String(n)):0).toFixed(2).replace(/\.?0+$/,"")}catch{return e}}function zk(n,e="0%"){if(n==null)return e;if(typeof n=="string"){const r=n.trim();if(r===""||isNaN(Number(r)))return e;const i=r.includes(".")?Math.floor(Number(r)).toString():r;try{const s=Ct(i);return G0(s)}catch{return e}}if(typeof n=="number"){if(isNaN(n)||!isFinite(n))return e;const r=Math.floor(n).toString();try{const i=Ct(r);return G0(i)}catch{return e}}return e}function zF(n){return isNaN(n)?"0":n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toFixed(2)}function Pve(n,e=6,r=4,i="--"){return!n||typeof n!="string"?i:n.length<=e+r?n:`${n.slice(0,e)}...${n.slice(-r)}`}const Jd="https://router.morpheum.io",su="wss://router.morpheum.io/websocket",c_="ios-device-1234567890",Mve=({isRunning:n,onClick:e})=>p.jsx("button",{onClick:e,disabled:n,style:{color:"#fff",backgroundColor:n?"#ccc":"#007bff",cursor:n?"not-allowed":"pointer"},children:n?"Running Tests...":"Run All Tests"}),Dve=({mnemonic:n,baseURL:e,onboardLoading:r,isRunning:i,onOnboard:s})=>{const o=r||i||!n||n.trim()==="";return p.jsx("button",{onClick:()=>{n&&n.trim()!==""&&s(n,e)},disabled:o,style:{color:o?"#ccc":"#fff",backgroundColor:o?"#ccc":"#28a745",cursor:o?"not-allowed":"pointer"},children:r?"Running Authentication Flow...":"Authentication Flow"})},Ove=({isRunning:n,onClick:e})=>p.jsx("button",{onClick:e,disabled:n,style:{color:n?"#ccc":"#fff",backgroundColor:n?"#ccc":"#dc3545",cursor:n?"not-allowed":"pointer"},children:"Clear Results"}),Ive=({isRunning:n,isLoading:e,onClick:r})=>{const i=e||n;return p.jsx("button",{onClick:r,disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#17a2b8",cursor:i?"not-allowed":"pointer"},children:e?"Running Utility Tests...":"Utility Test"})},Ave=({isRunning:n,isLoading:e,onClick:r})=>{const i=e||n;return p.jsx("button",{onClick:r,disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#6f42c1",cursor:i?"not-allowed":"pointer"},children:e?"Running Info Client Tests...":"Info Client Test"})},Rve=({isRunning:n,isLoading:e,onClick:r})=>{const i=e||n;return p.jsx("button",{onClick:r,disabled:i,style:{color:i?"#ccc":"#fff",backgroundColor:i?"#ccc":"#fd7e14",cursor:i?"not-allowed":"pointer"},children:e?"Running Wallet Specific Tests...":"Wallet Specific Test"})},Nve=({mnemonic:n,isRunning:e,isLoading:r,onClick:i})=>{const s=n&&n.trim()!=="",o=r||e||!s;return p.jsx("button",{onClick:()=>{s&&i()},disabled:o,style:{color:o?"#ccc":"#fff",backgroundColor:o?"#ccc":"#e83e8c",cursor:o?"not-allowed":"pointer"},title:s?"":"Mnemonic is required for Exchange Client tests",children:r?"Running Exchange Client Tests...":"Exchange Client Test"})},jve=({onClick:n})=>p.jsx("button",{onClick:n,className:"sdk-test-button-dismiss",children:"Dismiss"}),Lve=({result:n})=>p.jsxs("div",{className:`sdk-test-result-item ${n.success?"success":"error"}`,children:[p.jsxs("div",{className:"sdk-test-result-content",children:[p.jsxs("div",{className:"sdk-test-result-message",children:[n.success?"":""," ",n.message]}),n.error&&p.jsxs("div",{className:"sdk-test-result-error",children:["Error: ",n.error]}),n.data&&p.jsxs("details",{className:"sdk-test-result-data",children:[p.jsx("summary",{children:"View Data"}),p.jsx("pre",{children:JSON.stringify(n.data,null,2)})]})]}),p.jsx("div",{className:"sdk-test-result-timestamp",children:new Date(n.timestamp).toLocaleTimeString()})]}),Fve=({sectionName:n,isExpanded:e,onToggle:r})=>p.jsxs("h2",{className:"sdk-test-section-header",onClick:r,children:[p.jsx("span",{children:n}),p.jsx("span",{className:"sdk-test-section-chevron",children:e?"":""})]});function $ve(){var Me,Ie,Ce,xe;const[n,e]=E.useState(Jd),[r,i]=E.useState(""),[s,o]=E.useState(""),[a,l]=E.useState(""),[c,u]=E.useState(c_),[h,d]=E.useState({}),[f,m]=E.useState(!1),[g,b]=E.useState(!1),[y,v]=E.useState(!1),[w,k]=E.useState(!1),[S,_]=E.useState(!1),[C,P]=E.useState(!1),[T,O]=E.useState(new Set),D=E.useRef(null),I=E.useRef(null),U=E.useRef(n),B=E.useRef([]),z=E.useRef(""),{markets:j,fetchMarkets:F}=ya({baseURL:n,sessionToken:s,autoFetchMarkets:!1}),{mnemonic:N,walletAddress:R,authToken:W,error:Y,clearError:K,setMnemonic:H}=Il();E.useEffect(()=>{N||H(s_)},[N,H]);const Q=E.useRef(N||"");E.useEffect(()=>{Q.current=N||""},[N]);const G=E.useMemo(()=>new _p({url:su,authToken:s||a||void 0,walletAddress:R||void 0,deviceID:c||void 0}),[s,a,R,c]),{buckets:X,loading:de,error:ye,refresh:se}=JN({subscriptionClient:G,baseURL:n,authToken:s||a,walletAddress:R,refreshInterval:0,useWebSocket:!1,marketId:"0"});E.useEffect(()=>{W&&(l(W),localStorage.setItem("authToken",W))},[W]),E.useEffect(()=>{a&&a.trim()!==""&&localStorage.setItem("authToken",a)},[a]);const ie=E.useRef(f);E.useEffect(()=>{ie.current===!0&&f===!1&&setTimeout(()=>{const L=Object.values(h).flatMap(ce=>ce.results),re=L.filter(ce=>ce.success).length,fe=L.length,le=fe-re;fe>0&&(le===0?ht.success("All tests passed",{description:`${fe} test(s) completed successfully.`,duration:5e3}):ht.warning("Tests completed with failures",{description:`${re}/${fe} tests passed. ${le} test(s) failed.`,duration:6e3}))},100),ie.current=f},[f,h]),E.useEffect(()=>{const L=localStorage.getItem("authToken");L&&!a&&l(L)},[]);const Pe=j.length>0?(((Me=j.find(L=>L.active))==null?void 0:Me.market_id)??j[0].market_id)||(((Ce=(Ie=j.find(L=>L.active))==null?void 0:Ie.id)==null?void 0:Ce.toString())??((xe=j[0].id)==null?void 0:xe.toString())??""):null,ke=Pe??r;E.useEffect(()=>{Pe&&r!==Pe&&i(Pe)},[Pe]),E.useEffect(()=>{U.current=n},[n]);const q=(L,re)=>{d(fe=>{const le=fe[L]||{name:L,results:[]};return{...fe,[L]:{...le,results:[...le.results,re]}}})},Ee=()=>{d({}),O(new Set)},Je=L=>{O(re=>{const fe=new Set(re);return fe.has(L)?fe.delete(L):fe.add(L),fe})};E.useEffect(()=>{const L=Object.keys(h).filter(re=>h[re].results.length>0);L.length>0&&O(re=>{const fe=new Set(re);return L.forEach(le=>fe.add(le)),fe})},[h]);const ct=()=>{const L="Utilities";q(L,{success:!0,message:"Testing utility functions...",timestamp:Date.now()});try{const re=un(1);q(L,{success:re==="100000000",message:`toSatoshi(1.0) = ${re}`,data:{expected:"100000000",got:re},timestamp:Date.now()});const fe=un("1.5");q(L,{success:fe==="150000000",message:`toSatoshi("1.5") = ${fe}`,data:{expected:"150000000",got:fe},timestamp:Date.now()});const le=Ct("100000000");q(L,{success:le===1,message:`fromSatoshi("100000000") = ${le}`,data:{expected:1,got:le},timestamp:Date.now()});const ce="64999999999986700000000",ge=Ct(ce),J=649999999999867,he=ge===J;q(L,{success:he,message:`fromSatoshi("${ce}") = ${ge}`,data:{expected:J,got:ge,difference:Math.abs(ge-J),isPrecise:he},timestamp:Date.now()});const pe="64999999999986700000000",_e=Dt(pe),De=649999999999867,ae=_e===De;q(L,{success:ae,message:`toNumberFromSatoshi("${pe}") = ${_e}`,data:{expected:De,got:_e,difference:Math.abs(_e-De),isPrecise:ae},timestamp:Date.now()});const Xe=pN(1);q(L,{success:Xe===1e8,message:`toSatoshiUint64(1.0) = ${Xe}`,data:{expected:1e8,got:Xe},timestamp:Date.now()});const Fe=mI("100000000"),te=mI("abc");q(L,{success:Fe&&!te,message:`isValidSatoshi tests: "100000000"=${Fe}, "abc"=${te}`,data:{valid1:Fe,valid2:te},timestamp:Date.now()});const ee=[1,1.5,2],ne=QJ(ee),Ze=JJ(ne);q(L,{success:Ze.length===3,message:`Batch conversion: ${ee.length} items`,data:{input:ee,satoshi:ne,decimal:Ze},timestamp:Date.now()}),q(L,{success:Bc===1e8,message:`SATOSHI_SCALE = ${Bc}`,data:{expected:1e8,got:Bc},timestamp:Date.now()});const je="64999999999986700000000",Ve=gI(je);q(L,{success:Ve.startsWith("0x"),message:`int64ToHex("${je}") = ${Ve}`,data:{input:je,output:Ve,isValidHex:Ve.startsWith("0x")},timestamp:Date.now()});const Ae="64999999999986700000000",Qe=Nu(Ae);q(L,{success:Qe!=="--"&&Qe.length>0,message:`formatPriceFromSatoshi("${Ae}") = ${Qe}`,data:{input:Ae,output:Qe,isValid:Qe!=="--"&&Qe.length>0},timestamp:Date.now()});const lt="86755123000",He=Fee(lt);q(L,{success:He!=="--"&&He.length>0,message:`formatLeverage("${lt}") = ${He}`,data:{input:lt,output:He,isValid:He!=="--"&&He.length>0},timestamp:Date.now()});const rt=649999999999867,Te={minimumFractionDigits:za,maximumFractionDigits:Pee},it=rt.toLocaleString("en-US",Te);q(L,{success:it.length>0&&it.includes("649"),message:`number_x.toLocaleString("en-US", currencyFormatOptions) = ${it}`,data:{input:rt,output:it,currencyFormatOptions:Te,isValid:it.length>0},timestamp:Date.now()})}catch(re){q(L,{success:!1,message:"Utility test error",error:re.message,timestamp:Date.now()})}},$e=async(L="Authentication")=>{if(!R||R.trim()===""){q(L,{success:!1,message:"Authentication skipped: Wallet address required",timestamp:Date.now()});return}if(!At.isReady()){q(L,{success:!1,message:"Authentication failed: mormSigner not loaded. Please initialize mormSigner first for address generation.",timestamp:Date.now()});return}try{q(L,{success:!0,message:"Starting authentication (onboarding) with ethers.js EIP-712 signing...",timestamp:Date.now()});const{onboardAndGetAuthToken:re}=await OJ(async()=>{const{onboardAndGetAuthToken:le}=await Promise.resolve().then(()=>Vbe);return{onboardAndGetAuthToken:le}},void 0);if(q(L,{success:!0,message:"Calling onboardAndGetAuthToken (handles nonce, EIP-712 signing with ethers.js, and API request)...",timestamp:Date.now()}),!N)throw new Error("Mnemonic is required for authentication");const fe=await re(N,U.current);if(!fe.success||!fe.authToken)throw new Error(fe.error||"Onboarding failed");l(fe.authToken),localStorage.setItem("authToken",fe.authToken),q(L,{success:!0,message:"AUTHENTICATION SUCCESSFUL!",data:{walletAddress:R,authToken:fe.authToken.substring(0,32)+"...",refreshToken:fe.refreshToken,expiresAt:fe.expiresAt},timestamp:Date.now()})}catch(re){const fe=re.message||String(re);q(L,{success:!1,message:`Authentication failed: ${fe}`,error:fe,timestamp:Date.now()})}},ut=async()=>{var ce;const L="Wallet Specific";I.current=new cr({baseURL:U.current}),s&&I.current&&I.current.setSessionToken(s),q(L,{success:!0,message:"Waiting for wallet address to be available...",timestamp:Date.now()});const re=5e3,fe=200;let le=0;for(;!R||R.trim()==="";){if(le>=re){q(L,{success:!1,message:"Timeout: Wallet address not available after 5 seconds",error:"Wallet address is required for wallet-specific tests. Please ensure mnemonic is provided.",timestamp:Date.now()});return}await new Promise(ge=>setTimeout(ge,fe)),le+=fe}if(!R||R.trim()===""){q(L,{success:!1,message:"Wallet address is required for wallet-specific tests",error:"Wallet address not available",timestamp:Date.now()});return}q(L,{success:!0,message:`Wallet address available: ${R.substring(0,10)}...`,timestamp:Date.now()});try{q(L,{success:!0,message:`Testing getBalance() for asset "MORM" at address ${R.substring(0,10)}...`,timestamp:Date.now()});try{const J=await I.current.getBalance(R,"MORM"),he=(J==null?void 0:J.balance)||"N/A",pe=typeof he=="string"?he:JSON.stringify(he);q(L,{success:!!J,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: MORM | Balance: ${pe} (raw satoshi format)`,data:{balance:J,asset:"MORM",walletAddress:R.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(J){q(L,{success:!1,message:'getBalance() failed for asset "MORM" (may require authentication)',error:J.message,data:{asset:"MORM",walletAddress:R.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}q(L,{success:!0,message:`Testing getBalance() for asset "USDC" at address ${R.substring(0,10)}...`,timestamp:Date.now()});try{const J=await I.current.getBalance(R,"USDC"),he=(J==null?void 0:J.balance)||"N/A",pe=typeof he=="string"?he:JSON.stringify(he);q(L,{success:!!J,message:`getBalance() - GET /bank/v1/balance/{address} | Asset: USDC | Balance: ${pe} (raw satoshi format)`,data:{balance:J,asset:"USDC",walletAddress:R.substring(0,10)+"...",note:"Balance is returned in satoshi format (raw integer string). Use getBalanceDecimal() for decimal format."},timestamp:Date.now()})}catch(J){q(L,{success:!1,message:'getBalance() failed for asset "USDC" (may require authentication)',error:J.message,data:{asset:"USDC",walletAddress:R.substring(0,10)+"...",endpoint:"GET /bank/v1/balance/{address}"},timestamp:Date.now()})}try{const J=await I.current.getBalanceDecimal(R,"USDC");q(L,{success:!!J,message:"getBalanceDecimal() - GET /bank/v1/balance/{address}",data:J,timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getBalanceDecimal() failed",error:J.message,timestamp:Date.now()})}try{const J=await I.current.getBalances(R);q(L,{success:!!J,message:"getBalances() - GET /bank/v1/balances/{address}",data:J,timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getBalances() failed (may require authentication)",error:J.message,timestamp:Date.now()})}try{const J=await I.current.getPositions(R);q(L,{success:Array.isArray(J),message:`getPositions() - GET /bucket/v1/address/{address}/positions returned ${Array.isArray(J)?J.length:0} positions`,data:J,timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getPositions() failed",error:J.message,timestamp:Date.now()})}let ge=[];try{const J=await I.current.getOrders(R);ge=(J==null?void 0:J.orders)||[];const he=J&&(Array.isArray(ge)||J.total_count!==void 0);q(L,{success:he,message:`getOrders() - GET /clob/v1/address/orders?address={address} returned ${Array.isArray(ge)?ge.length:0} orders (total_count: ${(J==null?void 0:J.total_count)??"N/A"})`,data:{orders:Array.isArray(ge)?ge.slice(0,3):ge,total_count:J==null?void 0:J.total_count,timestamp:J==null?void 0:J.timestamp},timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getOrders() failed",error:J.message,timestamp:Date.now()})}if(Array.isArray(ge)&&ge.length>0){const J=ge[0],he=(J==null?void 0:J.orderId)||(J==null?void 0:J.order_id)||(J==null?void 0:J.id);if(he){q(L,{success:!0,message:`Testing getOrder() for order ID: ${he.substring(0,16)}... (from getOrders result)`,timestamp:Date.now()});try{const pe=await I.current.getOrder(he);q(L,{success:!!pe,message:`getOrder() - GET /clob/v1/order/{orderID} | Order ID: ${he.substring(0,16)}...`,data:{order:pe,orderId:he,source:"First order from getOrders() result"},timestamp:Date.now()})}catch(pe){q(L,{success:!1,message:`getOrder() failed for order ID: ${he.substring(0,16)}...`,error:pe.message,data:{orderId:he,endpoint:"GET /clob/v1/order/{orderID}"},timestamp:Date.now()})}}else q(L,{success:!1,message:"getOrder() test skipped: No valid order ID found in getOrders() result",error:"Order ID not found in order object",data:{order:J,availableFields:Object.keys(J||{})},timestamp:Date.now()})}else q(L,{success:!0,message:"getOrder() test skipped: No orders available from getOrders() (need at least 1 order)",data:{ordersCount:ge.length,note:"getOrder() test requires at least one order from getOrders()"},timestamp:Date.now()});try{const J=await I.current.getOrderHistory(R),he=Array.isArray(J)?J:(J==null?void 0:J.orders)||[],pe=J&&(Array.isArray(he)||J.orders!==void 0);q(L,{success:pe,message:`getOrderHistory() - GET /clob/v1/address/orders/history?address={address} returned ${Array.isArray(he)?he.length:0} orders`,data:Array.isArray(he)?he.slice(0,3):J,timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getOrderHistory() failed",error:J.message,timestamp:Date.now()})}try{const J=await I.current.getTradeHistory(R),he=Array.isArray(J)?J:[],pe=Array.isArray(he);q(L,{success:pe,message:`getTradeHistory() - GET /clob/v1/address/trades?address={address} returned ${he.length} trades`,data:he.slice(0,3),timestamp:Date.now()})}catch(J){q(L,{success:!1,message:"getTradeHistory() failed",error:J.message,timestamp:Date.now()})}try{const J=await I.current.getBuckets(R);if(q(L,{success:Array.isArray(J)||J!==void 0,message:`getBuckets() - GET /bucket/v1/address/{address}/buckets returned ${Array.isArray(J)?J.length:"data"}`,data:Array.isArray(J)?J.slice(0,3):J,timestamp:Date.now()}),Array.isArray(J)&&J.length>0){const pe=J[0].bucket_id;if(pe)try{const _e=await I.current.getBucket(pe);q(L,{success:!!_e,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} (${pe.substring(0,16)}...)`,data:_e,timestamp:Date.now()})}catch(_e){q(L,{success:!1,message:`getBucket(${pe.substring(0,16)}...) failed`,error:_e.message,timestamp:Date.now()})}}}catch(J){q(L,{success:!1,message:"getBuckets() failed",error:J.message,timestamp:Date.now()})}q(L,{success:!0,message:"Testing useBuckets hook...",timestamp:Date.now()});try{if(await se(),q(L,{success:!ye&&!de,message:`useBuckets hook: ${X.length} buckets loaded`,data:{buckets:X.slice(0,3),loading:de,error:ye,totalBuckets:X.length},timestamp:Date.now()}),X.length>0){const he=(ce=X[0].bucketId)==null?void 0:ce.toString();if(he)try{const pe=await I.current.getBucket(he);q(L,{success:!!pe,message:`getBucket() - GET /bucket/v1/bucket/{bucket_id} via hook bucket ID (${he.substring(0,16)}...)`,data:pe,timestamp:Date.now()})}catch(pe){q(L,{success:!1,message:"getBucket() via hook bucket ID failed",error:pe.message,timestamp:Date.now()})}}}catch(J){q(L,{success:!1,message:"useBuckets hook test failed",error:J.message,timestamp:Date.now()})}}catch(ge){q(L,{success:!1,message:"Wallet Specific test error",error:ge.message,timestamp:Date.now()})}},qe=async()=>{var re,fe,le,ce,ge;const L="InfoClient";I.current=new cr({baseURL:U.current}),s&&I.current&&I.current.setSessionToken(s);try{q(L,{success:!0,message:"Testing getMarkets()...",timestamp:Date.now()});const J=await F();B.current=Array.isArray(J)?J:[];const he=Array.isArray(J)?J.length:0,pe=he>0?J.find(ae=>ae.active||ae.status==="active")??J[0]:null,_e=(pe==null?void 0:pe.market_id)??((re=pe==null?void 0:pe.id)==null?void 0:re.toString())??null;if(q(L,{success:Array.isArray(J)&&he>0,message:`getMarkets() - GET /market/v1/all returned ${he} markets${_e?` | Using market ID: ${_e} (${(pe==null?void 0:pe.moniker)||(pe==null?void 0:pe.symbol)||"auto-selected"})`:""}`,data:{count:he,defaultMarketId:_e,defaultMarket:pe?{id:pe.id,market_id:pe.market_id,moniker:pe.moniker,symbol:pe.symbol,active:pe.active,status:pe.status}:null,markets:J.slice(0,5)},timestamp:Date.now()}),_e){i(_e),z.current=_e;const ae=(pe==null?void 0:pe.moniker)||(pe==null?void 0:pe.symbol)||(pe!=null&&pe.baseAsset&&(pe!=null&&pe.quoteAsset)?`${pe.baseAsset}-${pe.quoteAsset}`:"Unknown");q(L,{success:!0,message:`Markets loaded: ${he} | Auto-selected: ${ae} (ID: ${_e.substring(0,10)}...)`,data:{selectedMarketId:_e,count:he,market:pe},timestamp:Date.now()}),q(L,{success:!0,message:"Waiting 1.5s for market selection to take effect...",timestamp:Date.now()}),await new Promise(Xe=>setTimeout(Xe,1500)),q(L,{success:!0,message:`Market ID ready: ${_e}`,data:{marketId:_e},timestamp:Date.now()}),q(L,{success:!0,message:`Proceeding with market: ${ae}`,timestamp:Date.now()})}const De=_e||ke||r;if(De){q(L,{success:!0,message:`Testing getOrderbook(${De}, true)...`,timestamp:Date.now()});try{const ae=await I.current.getOrderbook(De,!0);q(L,{success:!!ae&&(!!ae.bids||!!ae.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} with decimal conversion",data:{bids:(fe=ae==null?void 0:ae.bids)==null?void 0:fe.slice(0,3),asks:(le=ae==null?void 0:ae.asks)==null?void 0:le.slice(0,3)},timestamp:Date.now()});const Xe=await I.current.getOrderbook(De,!1);q(L,{success:!!Xe&&(!!Xe.bids||!!Xe.asks),message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} raw satoshi format",data:{bids:(ce=Xe==null?void 0:Xe.bids)==null?void 0:ce.slice(0,2),asks:(ge=Xe==null?void 0:Xe.asks)==null?void 0:ge.slice(0,2)},timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getOrderbook() - GET /clob/v1/orderbook/{marketId} failed",error:ae.message,timestamp:Date.now()})}q(L,{success:!0,message:`Testing getTicker(${De})...`,timestamp:Date.now()});try{const ae=await I.current.getTicker(De);q(L,{success:!!ae,message:"getTicker() - GET /market/v1/market/{marketId}/stats",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getTicker() - GET /market/v1/market/{marketId}/stats failed",error:ae.message,timestamp:Date.now()})}q(L,{success:!0,message:`Testing getRecentTrades(${De}, 10)...`,timestamp:Date.now()});try{const ae=await I.current.getRecentTrades(De,10);q(L,{success:Array.isArray(ae),message:`getRecentTrades() - GET /clob/v1/trades?market_id={marketId} returned ${Array.isArray(ae)?ae.length:0} trades`,data:ae==null?void 0:ae.slice(0,3),timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getRecentTrades() - GET /clob/v1/trades?market_id={marketId} failed",error:ae.message,timestamp:Date.now()})}}else q(L,{success:!1,message:"Skipping market-specific tests: No market ID available",error:"Please ensure markets are loaded and a market is selected",timestamp:Date.now()});q(L,{success:!0,message:"Testing router/v1 endpoints...",timestamp:Date.now()});try{const ae=await I.current.getSupportedActions();q(L,{success:Array.isArray(ae==null?void 0:ae.actions)||(ae==null?void 0:ae.actions)!==void 0,message:"getSupportedActions() - GET /router/v1/tx/supported-actions",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getSupportedActions() - GET /router/v1/tx/supported-actions failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.validateAction("clob::submit_order");q(L,{success:(ae==null?void 0:ae.valid)!==void 0||ae!==void 0,message:'validateAction() - GET /router/v1/tx/validate-action ("clob::submit_order")',data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"validateAction() - GET /router/v1/tx/validate-action failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.getHealthSummary();q(L,{success:!!ae,message:"getHealthSummary() - GET /router/v1/health/summary",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getHealthSummary() - GET /router/v1/health/summary failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.getHealthDaemons();q(L,{success:!!ae,message:"getHealthDaemons() - GET /router/v1/health/daemons",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getHealthDaemons() - GET /router/v1/health/daemons failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.getServerTime();q(L,{success:!!ae&&(ae.serverTime!==void 0||ae!==void 0),message:"getServerTime() - GET /router/v1/time",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getServerTime() - GET /router/v1/time failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.getMetricsTPS();q(L,{success:!!ae,message:"getMetricsTPS() - GET /router/v1/metrics/tps",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getMetricsTPS() - GET /router/v1/metrics/tps failed",error:ae.message,timestamp:Date.now()})}try{const ae=await I.current.getMetricsLatency();q(L,{success:!!ae,message:"getMetricsLatency() - GET /router/v1/metrics/latency",data:ae,timestamp:Date.now()})}catch(ae){q(L,{success:!1,message:"getMetricsLatency() - GET /router/v1/metrics/latency failed",error:ae.message,timestamp:Date.now()})}}catch(J){q(L,{success:!1,message:"InfoClient test error",error:J.message,timestamp:Date.now()})}},we=async()=>{var ce,ge,J;const L="ExchangeClient";if(!N){q(L,{success:!1,message:"Mnemonic required for ExchangeClient tests",error:"No mnemonic provided",timestamp:Date.now()});return}let re=r||ke||z.current||"";if(!re||re.trim()===""){if(B.current&&B.current.length>0){const he=B.current.find(pe=>pe.active||pe.status==="active")??B.current[0];he&&(re=he.market_id??((ce=he.id)==null?void 0:ce.toString())??"",z.current=re,q(L,{success:!0,message:`Market ID not in state, using from fetched markets ref: ${re.substring(0,16)}...`,data:{source:"fetchedMarketsRef",marketId:re,market:{moniker:he.moniker,symbol:he.symbol,active:he.active}},timestamp:Date.now()}))}else if(j&&j.length>0){const he=j.find(pe=>pe.active||pe.status==="active")??j[0];he&&(re=he.market_id??((ge=he.id)==null?void 0:ge.toString())??"",q(L,{success:!0,message:`Market ID not in state, using from markets state: ${re.substring(0,16)}...`,data:{source:"markets state",marketId:re,market:{moniker:he.moniker,symbol:he.symbol,active:he.active}},timestamp:Date.now()}))}}if(!re||re.trim()===""){q(L,{success:!1,message:"Market ID required from page or loaded markets",error:`Please enter or select a market ID in the configuration section, or ensure markets are loaded first. Debug: marketId="${r||"(empty)"}", effectiveMarketId="${ke||"(empty)"}", fetchedMarketIdRef="${z.current||"(empty)"}", fetchedMarketsRef.length=${B.current.length}, markets.length=${j.length}`,data:{marketId:r||"(empty)",effectiveMarketId:ke||"(empty)",defaultMarketId:Pe||"(empty)",fetchedMarketIdRef:z.current||"(empty)",fetchedMarketsRefCount:B.current.length,marketsCount:j.length,marketsAvailable:j.length>0||B.current.length>0},timestamp:Date.now()});return}const fe=R||"";if(!fe||fe.trim()===""){q(L,{success:!1,message:"Wallet address required from page",error:"Wallet address should be generated from mnemonic or entered manually. Please ensure mnemonic is valid.",timestamp:Date.now()});return}const le=r?"page state (marketId)":ke?"page state (effectiveMarketId)":"loaded markets array";q(L,{success:!0,message:`Using market ID from ${le}: ${re.substring(0,16)}...`,data:{marketId:re,source:le},timestamp:Date.now()}),q(L,{success:!0,message:`Using wallet address from page: ${fe.substring(0,10)}...`,data:{walletAddress:fe},timestamp:Date.now()}),(s||a)&&q(L,{success:!0,message:`Using signing tokens: ${s?"Session Token":""} ${a?"Auth Token":""}`,data:{hasSessionToken:!!s,hasAuthToken:!!a},timestamp:Date.now()}),D.current=new iu({baseURL:U.current,mnemonic:Q.current});try{q(L,{success:!0,message:"Initializing ExchangeClient...",timestamp:Date.now()}),await D.current.initialize();const he=D.current.getWalletAddress();if(he.toLowerCase()!==fe.toLowerCase()){q(L,{success:!1,message:"Wallet address mismatch",error:`ExchangeClient wallet (${he}) does not match page wallet (${fe})`,timestamp:Date.now()});return}q(L,{success:!0,message:`ExchangeClient initialized successfully (Wallet: ${he.substring(0,10)}...)`,data:{walletAddress:he,marketId:re,verified:!0},timestamp:Date.now()});const pe=re;q(L,{success:!0,message:`Using market ID as string: ${pe}`,data:{marketId:pe},timestamp:Date.now()});let _e=null;q(L,{success:!0,message:"Testing placeOrder with validation for btc-usdc-perp market...",timestamp:Date.now()});let De=[];try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const Fe=await I.current.getBuckets(he);De=Array.isArray(Fe)?Fe:[],q(L,{success:!0,message:`Fetched ${De.length} bucket(s) for order test`,timestamp:Date.now()})}catch(Fe){q(L,{success:!1,message:"Failed to fetch buckets for order test",error:Fe.message,timestamp:Date.now()})}let ae=null;try{const te=(B.current.length>0?B.current:j).find(ee=>{const ne=(ee.moniker||"").toLowerCase(),Ze=(ee.symbol||"").toLowerCase();return ne.includes("btc-usdc-perp")||ne.includes("btcusdcperp")||Ze.includes("btc-usdc-perp")||Ze.includes("btcusdcperp")||ee.baseAsset&&ee.quoteAsset&&ee.baseAsset.toLowerCase()==="btc"&&ee.quoteAsset.toLowerCase()==="usdc"});te?(ae=te.market_id||((J=te.id)==null?void 0:J.toString())||null,q(L,{success:!!ae,message:`Found btc-usdc-perp market: ${ae==null?void 0:ae.substring(0,16)}...`,data:{marketId:ae,moniker:te.moniker,symbol:te.symbol},timestamp:Date.now()})):q(L,{success:!1,message:"btc-usdc-perp market not found in available markets",error:"Please ensure btc-usdc-perp market is available",timestamp:Date.now()})}catch(Fe){q(L,{success:!1,message:"Failed to find btc-usdc-perp market",error:Fe.message,timestamp:Date.now()})}if(ae)try{let Fe=null;if(De.length>0){const te=De[0];Fe=te.bucket_id||te.id||te.bucketId||null}if(!Fe)q(L,{success:!1,message:"Default bucket not available for balance validation",error:"No buckets found",timestamp:Date.now()});else{q(L,{success:!0,message:"Step 1: Loading default bucket balance and checking available margin...",timestamp:Date.now()});const te=1.01,ee=100,ne=10500,Ze=un(ee.toString()),je=te*ne/ee;let Ve=0,Ae=0,Qe=0,lt=0;try{if(!I.current)throw new Error("InfoClient not initialized");const et=await I.current.getBucket(Fe);Qe=Ct(et.available_margin||"0"),Ae=Ct(et.deposited_margin||"0"),lt=Ct(et.total_equity||"0"),Ve=Qe,q(L,{success:!0,message:"Step 1: Default bucket balance loaded",data:{availableMargin:Qe.toFixed(2),depositedMargin:Ae.toFixed(2),totalEquity:lt.toFixed(2),requiredMargin:je.toFixed(2),raw:et},timestamp:Date.now()}),q(L,{success:!0,message:`Step 1: Validating sufficient available margin (required: ${je.toFixed(2)} USDC, available: ${Qe.toFixed(2)} USDC)...`,timestamp:Date.now()});const Gt=Qe>=je;if(q(L,{success:Gt,message:`Step 1: Margin validation ${Gt?"PASSED":"FAILED"}`,data:{availableMargin:Qe.toFixed(2),requiredMargin:je.toFixed(2),marginDifference:(Qe-je).toFixed(2),hasSufficientMargin:Gt,orderQuantity:`${te.toFixed(2)} BTC`,orderPrice:`${ne.toFixed(2)} USDC/BTC`,orderLeverage:ee.toFixed(2),calculation:`(${te.toFixed(2)} BTC * ${ne.toFixed(2)} USDC/BTC) / ${ee.toFixed(2)} = ${je.toFixed(2)} USDC`},timestamp:Date.now()}),!Gt)throw q(L,{success:!1,message:`Step 1: Insufficient available margin. Required: ${je.toFixed(2)} USDC, Available: ${Qe.toFixed(2)} USDC`,error:`Available margin (${Qe.toFixed(2)} USDC) is less than required margin (${je.toFixed(2)} USDC)`,data:{availableMargin:Qe.toFixed(2),requiredMargin:je.toFixed(2),shortfall:(je-Qe).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${Qe.toFixed(2)} USDC available, ${je.toFixed(2)} USDC required`);q(L,{success:!0,message:"Step 1: Sufficient margin available. Proceeding to place order...",data:{availableMargin:Qe.toFixed(2),requiredMargin:je.toFixed(2),marginRemaining:(Qe-je).toFixed(2)},timestamp:Date.now()})}catch(et){throw q(L,{success:!1,message:"Step 1: Failed to load or validate bucket balance",error:et.message,timestamp:Date.now()}),et}q(L,{success:!0,message:`Step 2: Preparing to place order - Quantity: ${te.toFixed(2)} BTC, Leverage: ${ee}x, Price: ${ne.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),q(L,{success:!0,message:"Step 2.1: Re-checking default bucket available margin before placing order...",timestamp:Date.now()});let He=0;try{if(!I.current)throw new Error("InfoClient not initialized");const et=await I.current.getBucket(Fe);He=Ct(et.available_margin||"0"),q(L,{success:!0,message:`Step 2.1: Current available margin: ${He.toFixed(2)} USDC`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:je.toFixed(2),previousAvailableMargin:Qe.toFixed(2),raw:et},timestamp:Date.now()});const Gt=He>=je;if(q(L,{success:Gt,message:`Step 2.1: Margin check ${Gt?"PASSED":"FAILED"}`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:je.toFixed(2),marginDifference:(He-je).toFixed(2),stillHasSufficientMargin:Gt},timestamp:Date.now()}),!Gt)throw q(L,{success:!1,message:`Step 2.1: Insufficient available margin. Required: ${je.toFixed(2)} USDC, Available: ${He.toFixed(2)} USDC`,error:`Available margin (${He.toFixed(2)} USDC) is less than required margin (${je.toFixed(2)} USDC)`,data:{currentAvailableMargin:He.toFixed(2),requiredMargin:je.toFixed(2),shortfall:(je-He).toFixed(2)},timestamp:Date.now()}),new Error(`Insufficient available margin: ${He.toFixed(2)} USDC available, ${je.toFixed(2)} USDC required`);q(L,{success:!0,message:"Step 2.1: Sufficient margin confirmed. Proceeding with order placement...",data:{currentAvailableMargin:He.toFixed(2),requiredMargin:je.toFixed(2),marginRemaining:(He-je).toFixed(2)},timestamp:Date.now()})}catch(et){throw q(L,{success:!1,message:"Step 2.1: Failed to validate available margin before order placement",error:et.message,timestamp:Date.now()}),et}if(q(L,{success:!0,message:`Step 2.2: Placing order - Quantity: ${te.toFixed(2)} BTC, Leverage: ${ee}x, Price: ${ne.toFixed(2)} USDC/BTC...`,timestamp:Date.now()}),!X||X.length===0)throw new Error("No buckets available. Please create a bucket first.");const Te=X[0].bucketId;if(!Te)throw new Error("Bucket ID not found in bucket data");let it=null,ve=null;const wt={marketId:ae,bucketId:Te,side:"buy",orderType:"LIMIT",price:ne,quantity:te,timeInForce:"GTC",leverage:Ze},ft={maxRetries:10,baseDelay:500,maxDelay:2e3,jitter:!0,multiplier:1.5};let _t=0;try{it=await o_(ft,async()=>{if(_t++,_t>1&&q(L,{success:!0,message:`Step 2.2: Retrying order placement (attempt ${_t}/${ft.maxRetries+1})...`,data:{attemptCount:_t},timestamp:Date.now()}),!D.current)throw new Error("ExchangeClient not initialized");const et=await D.current.placeOrder(wt),Gt=(et==null?void 0:et.order_id)||null;if(!et||!Gt)throw new Error("Order placed but order_id not found in response");return et},async et=>{if(gN(et)){q(L,{success:!1,message:`Step 2.2: Nonce error detected (attempt ${_t}/${ft.maxRetries+1}): ${(et==null?void 0:et.message)||String(et)}`,data:{error:(et==null?void 0:et.message)||String(et),errorType:"nonce error",attemptCount:_t,willRetry:_t<=ft.maxRetries},timestamp:Date.now()});try{if(!D.current)throw new Error("ExchangeClient not initialized");await D.current.refreshNonceFromServer(),q(L,{success:!0,message:"Step 2.2: Refreshed nonce from server, will retry...",timestamp:Date.now()})}catch($n){q(L,{success:!1,message:"Step 2.2: Failed to refresh nonce from server",error:($n==null?void 0:$n.message)||String($n),timestamp:Date.now()})}return!0}return q(L,{success:!1,message:"Step 2.2: Failed to place order (non-retryable error)",error:(et==null?void 0:et.message)||String(et),data:{error:(et==null?void 0:et.message)||String(et),isNonceError:!1},timestamp:Date.now()}),!1}),ve=(it==null?void 0:it.order_id)||null,q(L,{success:!!it&&!!ve,message:`Step 2.2: Order placed successfully${_t>1?` (after ${_t-1} retry${_t>2?"ies":""})`:""}. Order ID: ${ve==null?void 0:ve.substring(0,16)}...`,data:{orderResult:it,orderId:ve,requestBody:wt,attemptCount:_t},timestamp:Date.now()})}catch(et){throw q(L,{success:!1,message:`Step 2.2: Failed to place order after ${_t} attempt${_t>1?"s":""}`,error:(et==null?void 0:et.message)||String(et),data:{error:(et==null?void 0:et.message)||String(et),attemptCount:_t,maxRetriesReached:_t>ft.maxRetries},timestamp:Date.now()}),et}if(!it||!ve)throw new Error(`Failed to place order after ${_t} attempts`);if(await new Promise(et=>setTimeout(et,1500)),ve){q(L,{success:!0,message:"Step 3: Validating pending order details...",timestamp:Date.now()});try{if(!I.current)throw new Error("InfoClient not initialized");const et=await I.current.getOrder(ve);if(et){const Gt=Ct(et.price||"0"),$n=Ct(et.quantity||"0"),Xt=Ct(et.leverage||"0"),ts=et.side||"",Br=et.market_id||"",Cs=Math.abs(Gt-ne)<.01,io=Math.abs($n-te)<.01,yr=Math.abs(Xt-ee)<.01,zr=Br===ae,ns=ts.toUpperCase().includes("BUY");q(L,{success:Cs&&io&&yr&&zr&&ns,message:`Step 3: Order validation ${Cs&&io&&yr&&zr&&ns?"PASSED":"FAILED"}`,data:{orderId:ve,expectedPrice:ne.toFixed(2),actualPrice:Gt.toFixed(2),priceValid:Cs,expectedQuantity:`${te.toFixed(2)} BTC`,actualQuantity:`${$n.toFixed(2)} BTC`,quantityValid:io,expectedLeverage:ee.toFixed(2),actualLeverage:Xt.toFixed(2),leverageValid:yr,expectedMarketId:ae,actualMarketId:Br,marketIdValid:zr,expectedSide:"buy",actualSide:ts,sideValid:ns,orderStatus:et.status,rawOrder:et},timestamp:Date.now()}),Cs||q(L,{success:!1,message:`Order price mismatch: Expected ${ne.toFixed(2)}, got ${Gt.toFixed(2)}`,timestamp:Date.now()}),io||q(L,{success:!1,message:`Order quantity mismatch: Expected ${te.toFixed(2)} BTC, got ${$n.toFixed(2)} BTC`,timestamp:Date.now()}),yr||q(L,{success:!1,message:`Order leverage mismatch: Expected ${ee.toFixed(2)}, got ${Xt.toFixed(2)}`,timestamp:Date.now()}),zr||q(L,{success:!1,message:`Order market ID mismatch: Expected ${ae}, got ${Br}`,timestamp:Date.now()}),ns||q(L,{success:!1,message:`Order side mismatch: Expected buy, got ${ts}`,timestamp:Date.now()})}else q(L,{success:!1,message:"Step 3: Failed to retrieve pending order",error:"Order not found",timestamp:Date.now()})}catch(et){q(L,{success:!1,message:"Step 3: Failed to validate pending order",error:et.message,timestamp:Date.now()})}}q(L,{success:!0,message:"Step 4: Loading default bucket USDC balance after placing order...",timestamp:Date.now()});let Rt=0;try{if(!I.current)throw new Error("InfoClient not initialized");const et=await I.current.getBucket(Fe);Rt=Ct(et.available_margin||"0"),q(L,{success:!0,message:`Step 4: Default bucket USDC balance after: ${Rt.toFixed(2)} USDC`,data:{balance:Rt,raw:et},timestamp:Date.now()})}catch(et){throw q(L,{success:!1,message:"Step 4: Failed to load bucket balance after order",error:et.message,timestamp:Date.now()}),et}q(L,{success:!0,message:"Step 5: Validating bucket balance change...",timestamp:Date.now()});const Mt=He-Rt,Wt=je,Nt=Math.abs(Mt-Wt)<.01;q(L,{success:Nt,message:`Step 5: Bucket balance validation ${Nt?"PASSED":"FAILED"}`,data:{availableMarginBeforeOrder:He.toFixed(2),availableMarginAfterOrder:Rt.toFixed(2),marginReserved:Mt.toFixed(2),expectedMarginReserved:Wt.toFixed(2),marginReservedValid:Nt,orderQuantity:`${te.toFixed(2)} BTC`,orderPrice:`${ne.toFixed(2)} USDC/BTC`,orderLeverage:ee.toFixed(2),calculation:`(${te.toFixed(2)} BTC * ${ne.toFixed(2)} USDC/BTC) / ${ee.toFixed(2)} = ${Wt.toFixed(2)} USDC`,note:"Using available margin from Step 2.1 as baseline (most recent before order placement)"},timestamp:Date.now()}),Nt||q(L,{success:!1,message:`Bucket balance change mismatch: Expected margin reserved ${Wt.toFixed(2)} USDC, actual change ${Mt.toFixed(2)} USDC`,error:`Expected available margin to decrease by ${Wt.toFixed(2)} USDC, but decreased by ${Mt.toFixed(2)} USDC`,timestamp:Date.now()}),q(L,{success:Nt,message:`Place order validation test ${Nt?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{orderId:ve,marketId:ae,orderQuantity:`${te.toFixed(2)} BTC`,orderLeverage:`${ee}x`,orderPrice:`${ne.toFixed(2)} USDC`,availableMarginBeforeOrder:`${He.toFixed(2)} USDC`,availableMarginAfterOrder:`${Rt.toFixed(2)} USDC`,marginReserved:`${Mt.toFixed(2)} USDC`,expectedMarginReserved:`${Wt.toFixed(2)} USDC`,validationPassed:Nt},timestamp:Date.now()})}}catch(Fe){q(L,{success:!1,message:"Place order validation test failed",error:Fe.message,timestamp:Date.now()})}if(re){if(!X||X.length===0){q(L,{success:!1,message:"placeOrder() - No buckets available. Please create a bucket first.",error:"Bucket ID is required for order placement",timestamp:Date.now()});return}const te=X[0].bucketId;if(!te){q(L,{success:!1,message:"placeOrder() - Bucket ID not found in bucket data",error:"Bucket ID is required for order placement",timestamp:Date.now()});return}const ee=1,ne=un(ee.toString()),Ze={marketId:pe,bucketId:te,side:"buy",orderType:"LIMIT",price:40010.8778,quantity:.01,timeInForce:"GTC",leverage:ne};q(L,{success:!0,message:`Testing placeOrder() (submit order) for market ${re}...`,data:{requestBody:Ze,endpoint:"POST /clob/v1/order",note:"Price and quantity are decimal numbers, converted to satoshi strings in buildOrderPayload(). Leverage is already in satoshi format.",leverage:{decimal:ee,satoshi:ne}},timestamp:Date.now()});try{const je=await D.current.placeOrder(Ze);je?(_e=je.order_id||null,_e?q(L,{success:!0,message:`placeOrder() - POST /clob/v1/order executed successfully. Order ID: ${_e.substring(0,16)}...`,data:{orderResult:je,orderId:_e,requestBody:Ze,endpoint:"POST /clob/v1/order"},timestamp:Date.now()}):q(L,{success:!0,message:"placeOrder() - POST /clob/v1/order executed successfully (orderId not found in response)",data:{orderResult:je,requestBody:Ze,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})):q(L,{success:!1,message:"placeOrder() - POST /clob/v1/order returned empty response",data:{requestBody:Ze,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}catch(je){q(L,{success:!1,message:"placeOrder() - POST /clob/v1/order failed",error:je.message,data:{requestBody:Ze,endpoint:"POST /clob/v1/order"},timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping placeOrder() test: No market ID available",timestamp:Date.now()});if(re&&_e){q(L,{success:!0,message:`Testing cancelOrder() for order ${_e.substring(0,16)}...`,timestamp:Date.now()});try{const Fe=await D.current.cancelOrder({orderId:_e,marketId:pe});q(L,{success:!!Fe,message:"cancelOrder() - POST /router/v1/tx executed successfully",data:Fe,timestamp:Date.now()})}catch(Fe){q(L,{success:!1,message:"cancelOrder() - POST /router/v1/tx failed",error:Fe.message,timestamp:Date.now()})}}else re?_e||q(L,{success:!0,message:"Skipping cancelOrder() test: No order ID available (placeOrder may have failed or orderId not in response)",timestamp:Date.now()}):q(L,{success:!0,message:"Skipping cancelOrder() test: No market ID available",timestamp:Date.now()});if(re){q(L,{success:!0,message:`Testing closePosition() for market ${re}...`,timestamp:Date.now()});try{let Fe=!1,te=0,ee;try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const ne=await I.current.getPositions(he),Ze=Array.isArray(ne)?ne.find(je=>(je.market_id||je.marketId)===re):null;if(Ze)if(Fe=!0,ee=Ze.position_id||Ze.positionId,Ze.mark_price)te=Ct(Ze.mark_price||"0");else{const je=await I.current.getTicker(re);je&&je.last_price&&(te=Ct(typeof je.last_price=="string"?je.last_price:String(je.last_price)))}}catch(ne){q(L,{success:!0,message:`Position check failed (will attempt close anyway): ${ne.message}`,timestamp:Date.now()})}if(!Fe)q(L,{success:!0,message:"No open position found for this market. Skipping closePosition() test.",data:{marketId:re,note:"closePosition() requires an open position to test"},timestamp:Date.now()});else if(!ee)q(L,{success:!1,message:"closePosition() - positionId is required but not found in position data",timestamp:Date.now()});else{const ne=await D.current.closePosition({positionId:ee,marketId:pe,marketPrice:te>0?te:void 0,quantity:void 0});q(L,{success:!!ne,message:"closePosition() - POST /bucket/v1/position/close executed successfully",data:{closeResult:ne,note:"quantity=undefined means close full position (closeSize=0 in request)"},timestamp:Date.now()})}}catch(Fe){q(L,{success:!1,message:"closePosition() - POST /bucket/v1/position/close failed (may not have open position)",error:Fe.message,timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping closePosition() test: No market ID available",timestamp:Date.now()});q(L,{success:!0,message:"Fetching buckets for bucket operation tests...",timestamp:Date.now()});let Xe=[];try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const Fe=await I.current.getBuckets(he);Xe=Array.isArray(Fe)?Fe:[],q(L,{success:!0,message:`Found ${Xe.length} bucket(s) for testing`,data:{bucketCount:Xe.length,buckets:Xe.slice(0,3).map(te=>({bucketId:te.bucket_id||te.id||te.bucketId,availableMargin:te.available_margin||te.availableMargin}))},timestamp:Date.now()})}catch(Fe){q(L,{success:!1,message:"Failed to fetch buckets for testing",error:Fe.message,timestamp:Date.now()})}if(Xe.length>0){const Fe=Xe[0],te=Fe.bucket_id||Fe.id||Fe.bucketId;if(te){q(L,{success:!0,message:"Testing extractToBucket() (1 USD = 100000000 satoshi)...",timestamp:Date.now()});try{const ee=await D.current.extractToBucket({bucketId:te,assetId:"USDC",amount:1});q(L,{success:!!ee,message:"extractToBucket() - POST /bank/v1/extract-to-bucket executed successfully",data:ee,timestamp:Date.now()})}catch(ee){q(L,{success:!1,message:"extractToBucket() - POST /bank/v1/extract-to-bucket failed",error:ee.message,timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping extractToBucket() test: No valid bucket ID found",timestamp:Date.now()})}else q(L,{success:!0,message:"Skipping extractToBucket() test: No buckets available",timestamp:Date.now()});if(Xe.length>0){const Fe=Xe[0],te=Fe.bucket_id||Fe.id||Fe.bucketId;if(te){q(L,{success:!0,message:"Testing bucket to spot wallet transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{q(L,{success:!0,message:"Step 1: Loading bucket USDC balance before transfer...",timestamp:Date.now()});let ee=0;try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const ve=await I.current.getBucket(te);ee=Ct(ve.available_margin||"0"),q(L,{success:!0,message:`Step 1: Bucket USDC balance before: ${ee.toFixed(2)} USDC`,data:{balance:ee,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 1: Failed to load bucket balance",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 2: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let ne=0;try{const ve=await I.current.getBalanceDecimal(he,"USDC");ne=Ct(ve.available_balance||"0"),q(L,{success:!0,message:`Step 2: Spot wallet USDC balance before: ${ne.toFixed(2)} USDC`,data:{balance:ne,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 2: Failed to load spot wallet balance",error:ve.message,timestamp:Date.now()}),ve}const Ze=10,je=un(Ze.toString());q(L,{success:!0,message:`Step 3: Transferring ${Ze.toFixed(2)} USDC (${je} satoshi) from bucket to spot wallet...`,timestamp:Date.now()});try{const ve=await D.current.withdrawFromBucket({bucketId:te,assetId:"USDC",amount:Ze});q(L,{success:!!ve,message:"Step 3: Transfer executed successfully",data:ve,timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 3: Transfer failed",error:ve.message,timestamp:Date.now()}),ve}await new Promise(ve=>setTimeout(ve,1e3)),q(L,{success:!0,message:"Step 4: Loading bucket USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const ve=await I.current.getBucket(te);Ve=Ct(ve.available_margin||"0"),q(L,{success:!0,message:`Step 4: Bucket USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 4: Failed to load bucket balance after transfer",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 5: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Ae=0;try{const ve=await I.current.getBalanceDecimal(he,"USDC");Ae=Ct(ve.available_balance||"0"),q(L,{success:!0,message:`Step 5: Spot wallet USDC balance after: ${Ae.toFixed(2)} USDC`,data:{balance:Ae,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 5: Failed to load spot wallet balance after transfer",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Qe=ee-Ve,lt=Ae-ne,He=Ze,rt=Ze,Te=Math.abs(Qe-He)<.01,it=Math.abs(lt-rt)<.01;q(L,{success:Te&&it,message:`Step 6: Validation ${Te&&it?"PASSED":"FAILED"}`,data:{bucketBalanceBefore:ee.toFixed(2),bucketBalanceAfter:Ve.toFixed(2),bucketBalanceDecrease:Qe.toFixed(2),expectedBucketDecrease:He.toFixed(2),bucketDecreaseValid:Te,walletBalanceBefore:ne.toFixed(2),walletBalanceAfter:Ae.toFixed(2),walletBalanceIncrease:lt.toFixed(2),expectedWalletIncrease:rt.toFixed(2),walletIncreaseValid:it,transferAmount:Ze.toFixed(2)},timestamp:Date.now()}),Te||q(L,{success:!1,message:`Validation failed: Bucket balance decrease (${Qe.toFixed(2)}) does not match expected (${He.toFixed(2)})`,error:`Expected bucket to decrease by ${He.toFixed(2)} USDC, but decreased by ${Qe.toFixed(2)} USDC`,timestamp:Date.now()}),it||q(L,{success:!1,message:`Validation failed: Wallet balance increase (${lt.toFixed(2)}) does not match expected (${rt.toFixed(2)})`,error:`Expected wallet to increase by ${rt.toFixed(2)} USDC, but increased by ${lt.toFixed(2)} USDC`,timestamp:Date.now()}),q(L,{success:Te&&it,message:`Bucket to spot wallet transfer test ${Te&&it?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ze.toFixed(2)} USDC`,bucketBalanceBefore:`${ee.toFixed(2)} USDC`,bucketBalanceAfter:`${Ve.toFixed(2)} USDC`,bucketBalanceChange:`${Qe.toFixed(2)} USDC`,walletBalanceBefore:`${ne.toFixed(2)} USDC`,walletBalanceAfter:`${Ae.toFixed(2)} USDC`,walletBalanceChange:`${lt.toFixed(2)} USDC`,validationPassed:Te&&it},timestamp:Date.now()})}catch(ee){q(L,{success:!1,message:"Bucket to spot wallet transfer test failed",error:ee.message,timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping bucket to spot wallet transfer test: No valid bucket ID found",timestamp:Date.now()})}else q(L,{success:!0,message:"Skipping bucket to spot wallet transfer test: No buckets available",timestamp:Date.now()});if(Xe.length>=2){const Fe=Xe[0],te=Xe[1],ee=Fe.bucket_id||Fe.id||Fe.bucketId,ne=te.bucket_id||te.id||te.bucketId;if(ee&&ne){q(L,{success:!0,message:"Testing bucket to bucket transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{q(L,{success:!0,message:"Step 1: Loading source bucket USDC balance before transfer...",timestamp:Date.now()});let Ze=0;try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const ft=await I.current.getBucket(ee);Ze=Ct(ft.available_margin||"0"),q(L,{success:!0,message:`Step 1: Source bucket USDC balance before: ${Ze.toFixed(2)} USDC`,data:{balance:Ze,raw:ft},timestamp:Date.now()})}catch(ft){throw q(L,{success:!1,message:"Step 1: Failed to load source bucket balance",error:ft.message,timestamp:Date.now()}),ft}q(L,{success:!0,message:"Step 2: Loading target bucket USDC balance before transfer...",timestamp:Date.now()});let je=0;try{const ft=await I.current.getBucket(ne);je=Ct(ft.available_margin||"0"),q(L,{success:!0,message:`Step 2: Target bucket USDC balance before: ${je.toFixed(2)} USDC`,data:{balance:je,raw:ft},timestamp:Date.now()})}catch(ft){throw q(L,{success:!1,message:"Step 2: Failed to load target bucket balance",error:ft.message,timestamp:Date.now()}),ft}const Ve=10,Ae=un(Ve.toString());q(L,{success:!0,message:`Step 3: Transferring ${Ve.toFixed(2)} USDC (${Ae} satoshi) from source bucket to target bucket...`,timestamp:Date.now()});try{const ft=await D.current.bucketTransfer({fromBucketId:ee,toBucketId:ne,assetId:"USDC",amount:Ve});q(L,{success:!!ft,message:"Step 3: Transfer executed successfully",data:ft,timestamp:Date.now()})}catch(ft){throw q(L,{success:!1,message:"Step 3: Transfer failed",error:ft.message,timestamp:Date.now()}),ft}await new Promise(ft=>setTimeout(ft,1e3)),q(L,{success:!0,message:"Step 4: Loading source bucket USDC balance after transfer...",timestamp:Date.now()});let Qe=0;try{const ft=await I.current.getBucket(ee);Qe=Ct(ft.available_margin||"0"),q(L,{success:!0,message:`Step 4: Source bucket USDC balance after: ${Qe.toFixed(2)} USDC`,data:{balance:Qe,raw:ft},timestamp:Date.now()})}catch(ft){throw q(L,{success:!1,message:"Step 4: Failed to load source bucket balance after transfer",error:ft.message,timestamp:Date.now()}),ft}q(L,{success:!0,message:"Step 5: Loading target bucket USDC balance after transfer...",timestamp:Date.now()});let lt=0;try{const ft=await I.current.getBucket(ne);lt=Ct(ft.available_margin||"0"),q(L,{success:!0,message:`Step 5: Target bucket USDC balance after: ${lt.toFixed(2)} USDC`,data:{balance:lt,raw:ft},timestamp:Date.now()})}catch(ft){throw q(L,{success:!1,message:"Step 5: Failed to load target bucket balance after transfer",error:ft.message,timestamp:Date.now()}),ft}q(L,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const He=Ze-Qe,rt=lt-je,Te=Ve,it=Ve,ve=Math.abs(He-Te)<.01,wt=Math.abs(rt-it)<.01;q(L,{success:ve&&wt,message:`Step 6: Validation ${ve&&wt?"PASSED":"FAILED"}`,data:{sourceBucketBalanceBefore:Ze.toFixed(2),sourceBucketBalanceAfter:Qe.toFixed(2),sourceBucketBalanceDecrease:He.toFixed(2),expectedSourceDecrease:Te.toFixed(2),sourceDecreaseValid:ve,targetBucketBalanceBefore:je.toFixed(2),targetBucketBalanceAfter:lt.toFixed(2),targetBucketBalanceIncrease:rt.toFixed(2),expectedTargetIncrease:it.toFixed(2),targetIncreaseValid:wt,transferAmount:Ve.toFixed(2)},timestamp:Date.now()}),ve||q(L,{success:!1,message:`Validation failed: Source bucket balance decrease (${He.toFixed(2)}) does not match expected (${Te.toFixed(2)})`,error:`Expected source bucket to decrease by ${Te.toFixed(2)} USDC, but decreased by ${He.toFixed(2)} USDC`,timestamp:Date.now()}),wt||q(L,{success:!1,message:`Validation failed: Target bucket balance increase (${rt.toFixed(2)}) does not match expected (${it.toFixed(2)})`,error:`Expected target bucket to increase by ${it.toFixed(2)} USDC, but increased by ${rt.toFixed(2)} USDC`,timestamp:Date.now()}),q(L,{success:ve&&wt,message:`Bucket to bucket transfer test ${ve&&wt?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ve.toFixed(2)} USDC`,sourceBucketBalanceBefore:`${Ze.toFixed(2)} USDC`,sourceBucketBalanceAfter:`${Qe.toFixed(2)} USDC`,sourceBucketBalanceChange:`${He.toFixed(2)} USDC`,targetBucketBalanceBefore:`${je.toFixed(2)} USDC`,targetBucketBalanceAfter:`${lt.toFixed(2)} USDC`,targetBucketBalanceChange:`${rt.toFixed(2)} USDC`,validationPassed:ve&&wt},timestamp:Date.now()})}catch(Ze){q(L,{success:!1,message:"Bucket to bucket transfer test failed",error:Ze.message,timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping bucket to bucket transfer test: Invalid bucket IDs",timestamp:Date.now()})}else q(L,{success:!0,message:"Skipping bucket to bucket transfer test: Need at least 2 buckets (found "+Xe.length+")",timestamp:Date.now()});if(Xe.length>0){const Fe=Xe[0],te=Fe.bucket_id||Fe.id||Fe.bucketId;if(te){q(L,{success:!0,message:"Testing spot wallet to bucket default transfer (10.00 USDC) with validation...",timestamp:Date.now()});try{q(L,{success:!0,message:"Step 1: Loading spot wallet USDC balance before transfer...",timestamp:Date.now()});let ee=0;try{if(I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s),!I.current)throw new Error("Failed to initialize InfoClient");const ve=await I.current.getBalanceDecimal(he,"USDC");ee=Ct(ve.available_balance||"0"),q(L,{success:!0,message:`Step 1: Spot wallet USDC balance before: ${ee.toFixed(2)} USDC`,data:{balance:ee,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 1: Failed to load spot wallet balance",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 2: Loading default bucket USDC balance before transfer...",timestamp:Date.now()});let ne=0;try{I.current||(I.current=new cr({baseURL:U.current})),s&&I.current&&I.current.setSessionToken(s);const ve=await I.current.getBucket(te);ne=Ct(ve.available_margin||"0"),q(L,{success:!0,message:`Step 2: Default bucket USDC balance before: ${ne.toFixed(2)} USDC`,data:{balance:ne,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 2: Failed to load bucket balance",error:ve.message,timestamp:Date.now()}),ve}const Ze=10,je=un(Ze.toString());q(L,{success:!0,message:`Step 3: Transferring ${Ze.toFixed(2)} USDC (${je} satoshi) from spot wallet to default bucket...`,timestamp:Date.now()});try{const ve=await D.current.extractToBucket({bucketId:te,assetId:"USDC",amount:Ze});q(L,{success:!!ve,message:"Step 3: Transfer executed successfully",data:ve,timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 3: Transfer failed",error:ve.message,timestamp:Date.now()}),ve}await new Promise(ve=>setTimeout(ve,1e3)),q(L,{success:!0,message:"Step 4: Loading spot wallet USDC balance after transfer...",timestamp:Date.now()});let Ve=0;try{const ve=await I.current.getBalanceDecimal(he,"USDC");Ve=Ct(ve.available_balance||"0"),q(L,{success:!0,message:`Step 4: Spot wallet USDC balance after: ${Ve.toFixed(2)} USDC`,data:{balance:Ve,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 4: Failed to load spot wallet balance after transfer",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 5: Loading default bucket USDC balance after transfer...",timestamp:Date.now()});let Ae=0;try{const ve=await I.current.getBucket(te);Ae=Ct(ve.available_margin||"0"),q(L,{success:!0,message:`Step 5: Default bucket USDC balance after: ${Ae.toFixed(2)} USDC`,data:{balance:Ae,raw:ve},timestamp:Date.now()})}catch(ve){throw q(L,{success:!1,message:"Step 5: Failed to load bucket balance after transfer",error:ve.message,timestamp:Date.now()}),ve}q(L,{success:!0,message:"Step 6: Validating transfer amounts...",timestamp:Date.now()});const Qe=ee-Ve,lt=Ae-ne,He=Ze,rt=Ze,Te=Math.abs(Qe-He)<.01,it=Math.abs(lt-rt)<.01;q(L,{success:Te&&it,message:`Step 6: Validation ${Te&&it?"PASSED":"FAILED"}`,data:{walletBalanceBefore:ee.toFixed(2),walletBalanceAfter:Ve.toFixed(2),walletBalanceDecrease:Qe.toFixed(2),expectedWalletDecrease:He.toFixed(2),walletDecreaseValid:Te,bucketBalanceBefore:ne.toFixed(2),bucketBalanceAfter:Ae.toFixed(2),bucketBalanceIncrease:lt.toFixed(2),expectedBucketIncrease:rt.toFixed(2),bucketIncreaseValid:it,transferAmount:Ze.toFixed(2)},timestamp:Date.now()}),Te||q(L,{success:!1,message:`Validation failed: Wallet balance decrease (${Qe.toFixed(2)}) does not match expected (${He.toFixed(2)})`,error:`Expected wallet to decrease by ${He.toFixed(2)} USDC, but decreased by ${Qe.toFixed(2)} USDC`,timestamp:Date.now()}),it||q(L,{success:!1,message:`Validation failed: Bucket balance increase (${lt.toFixed(2)}) does not match expected (${rt.toFixed(2)})`,error:`Expected bucket to increase by ${rt.toFixed(2)} USDC, but increased by ${lt.toFixed(2)} USDC`,timestamp:Date.now()}),q(L,{success:Te&&it,message:`Spot wallet to bucket transfer test ${Te&&it?"COMPLETED SUCCESSFULLY":"COMPLETED WITH VALIDATION ERRORS"}`,data:{transferAmount:`${Ze.toFixed(2)} USDC`,walletBalanceBefore:`${ee.toFixed(2)} USDC`,walletBalanceAfter:`${Ve.toFixed(2)} USDC`,walletBalanceChange:`${Qe.toFixed(2)} USDC`,bucketBalanceBefore:`${ne.toFixed(2)} USDC`,bucketBalanceAfter:`${Ae.toFixed(2)} USDC`,bucketBalanceChange:`${lt.toFixed(2)} USDC`,validationPassed:Te&&it},timestamp:Date.now()})}catch(ee){q(L,{success:!1,message:"Spot wallet to bucket transfer test failed",error:ee.message,timestamp:Date.now()})}}else q(L,{success:!0,message:"Skipping spot wallet to bucket transfer test: No valid default bucket ID found",timestamp:Date.now()})}else q(L,{success:!0,message:"Skipping spot wallet to bucket transfer test: No buckets available",timestamp:Date.now()});q(L,{success:!0,message:"Testing createBucket() (create new margin bucket)...",timestamp:Date.now()});try{q(L,{success:!0,message:"Step 1: Getting current bucket count before creation...",timestamp:Date.now()});let Fe=[],te=0;try{if(!I.current)throw new Error("InfoClient not initialized");Fe=await I.current.getBuckets(he),te=Array.isArray(Fe)?Fe.length:0,q(L,{success:!0,message:`Step 1: Current bucket count: ${te}`,data:{bucketCount:te,buckets:Array.isArray(Fe)?Fe.slice(0,3).map(je=>({bucketId:je.bucket_id||je.id||je.bucketId,marginType:je.margin_type||je.marginType,collateralAsset:je.collateral_asset||je.collateralAsset})):[]},timestamp:Date.now()})}catch(je){throw q(L,{success:!1,message:"Step 1: Failed to get current buckets",error:je.message,timestamp:Date.now()}),je}q(L,{success:!0,message:"Step 2: Creating cross margin USDC bucket...",timestamp:Date.now()});let ee=null,ne=null;try{if(ee=await D.current.createBucket({bucketType:"USDC",marginType:"cross"}),!ee||!ee.success)throw new Error((ee==null?void 0:ee.message)||"Failed to create bucket");ne=ee.bucket_id||null,q(L,{success:!!ee&&!!ne,message:`Step 2: Cross margin USDC bucket created successfully. Bucket ID: ${ne==null?void 0:ne.substring(0,16)}...`,data:{createResult:ee,bucketId:ne,bucketType:"USDC",marginType:"cross"},timestamp:Date.now()})}catch(je){q(L,{success:!1,message:"Step 2: Failed to create cross margin USDC bucket",error:je.message,timestamp:Date.now()})}if(ne&&await new Promise(je=>setTimeout(je,2e3)),ne){q(L,{success:!0,message:"Step 3: Validating bucket was created...",timestamp:Date.now()});try{if(!I.current)throw new Error("InfoClient not initialized");const je=await I.current.getBuckets(he),Ve=Array.isArray(je)?je.length:0,Ae=Array.isArray(je)?je.find(He=>(He.bucket_id||He.id||He.bucketId)===ne):null,Qe=!!Ae,lt=Ve>te;q(L,{success:Qe&&lt,message:`Step 3: Bucket validation ${Qe&&lt?"PASSED":"FAILED"}`,data:{bucketCountBefore:te,bucketCountAfter:Ve,bucketCountIncreased:lt,createdBucketId:ne,bucketFound:Qe,createdBucket:Ae?{bucketId:Ae.bucket_id,marginType:Ae.margin_type,collateralAsset:Ae.collateral_asset}:null},timestamp:Date.now()}),Qe||q(L,{success:!1,message:`Validation failed: Created bucket (${ne==null?void 0:ne.substring(0,16)}...) not found in bucket list`,error:"Bucket was created but not found in subsequent query",timestamp:Date.now()}),lt||q(L,{success:!1,message:`Validation failed: Bucket count did not increase (before: ${te}, after: ${Ve})`,error:"Bucket count should increase after creation",timestamp:Date.now()})}catch(je){q(L,{success:!1,message:"Step 3: Failed to validate bucket creation",error:je.message,timestamp:Date.now()})}}q(L,{success:!0,message:"Step 4: Testing isolated margin USDC bucket creation...",timestamp:Date.now()});let Ze=null;try{const je=await D.current.createBucket({bucketType:"USDC",marginType:"isolated"});if(!je||!je.success)throw new Error((je==null?void 0:je.message)||"Failed to create isolated bucket");Ze=je.bucket_id||null,q(L,{success:!!je&&!!Ze,message:`Step 4: Isolated margin USDC bucket created successfully. Bucket ID: ${Ze==null?void 0:Ze.substring(0,16)}...`,data:{createResult:je,bucketId:Ze,bucketType:"USDC",marginType:"isolated"},timestamp:Date.now()})}catch(je){q(L,{success:!1,message:"Step 4: Failed to create isolated margin USDC bucket",error:je.message,timestamp:Date.now()})}q(L,{success:!0,message:`Create bucket test ${ne&&Ze?"COMPLETED SUCCESSFULLY":"COMPLETED WITH SOME FAILURES"}`,data:{crossMarginBucketId:ne,isolatedMarginBucketId:Ze,bucketCountBefore:te,testsPerformed:["createBucket (cross margin USDC)","createBucket (isolated margin USDC)"]},timestamp:Date.now()})}catch(Fe){q(L,{success:!1,message:"Create bucket test failed",error:Fe.message,timestamp:Date.now()})}q(L,{success:!0,message:"ExchangeClient tests completed",data:{walletAddress:he,marketId:pe,sessionToken:s?"present":"not set",authToken:a?"present":"not set",methodsTested:["placeOrder","cancelOrder","closePosition","extractToBucket","withdrawFromBucket","bucketTransfer","createBucket"]},timestamp:Date.now()})}catch(he){q(L,{success:!1,message:"ExchangeClient test error",error:he.message,timestamp:Date.now()})}},ze=async()=>{if(!f){m(!0),Ee(),ht.info("Running tests",{description:"Starting comprehensive SDK test suite..."});try{ct(),await qe(),await $e("Authentication"),await ut(),N&&await we()}catch(L){q("General",{success:!1,message:"Test suite error",error:L.message,timestamp:Date.now()}),ht.error("Test suite error",{description:L.message||"An unexpected error occurred during testing.",duration:6e3})}finally{m(!1)}}};return p.jsxs("div",{className:"App-content-row",children:[p.jsx("h1",{children:"SDK QA"}),p.jsx("p",{children:"Comprehensive test suite for all SDK APIs"}),p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{children:"Configuration"}),p.jsxs("div",{className:"sdk-test-config-grid",children:[p.jsx("div",{children:p.jsxs("label",{children:["HTTP Base URL:",p.jsx("input",{type:"text",value:n,onChange:L=>e(L.target.value),className:"sdk-test-config-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Market:",p.jsx("select",{value:r||"",onChange:L=>{const re=L.target.value;re&&i(re)},className:"sdk-test-config-select",children:j.length===0?p.jsx("option",{value:"",children:"Loading markets..."}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),j.map(L=>{var ce;const re=L.market_id??((ce=L.id)==null?void 0:ce.toString())??"",fe=L.moniker?L.moniker:L.symbol?L.symbol:L.baseAsset&&L.quoteAsset?`${L.baseAsset}-${L.quoteAsset}`:`Market ID: ${re}`,le=L.active?" [ACTIVE]":"";return p.jsxs("option",{value:re,children:[fe," - ID: ",re,le]},re)})]})}),j.length>0&&p.jsx("small",{className:`sdk-test-config-hint ${r===Pe?"info":"warning"}`,children:r===Pe?` Auto-selected default market (ID: ${Pe==null?void 0:Pe.substring(0,16)}...)`:` Manual selection (ID: ${r==null?void 0:r.substring(0,16)}...)`})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Mnemonic (for ExchangeClient):",p.jsx("input",{type:"text",value:N||"",onChange:L=>H(L.target.value),placeholder:"Optional",className:"sdk-test-config-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Session Token (for authenticated InfoClient):",p.jsx("input",{type:"text",value:s,onChange:L=>o(L.target.value),disabled:!!(s&&s.trim()!==""),placeholder:"Optional",className:"sdk-test-config-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Auth Token:",p.jsx("input",{type:"text",value:a,onChange:L=>l(L.target.value),disabled:!!(W&&W.trim()!==""),placeholder:W?"Auto-filled from onboarding":'Optional - Use "Onboard" button to generate',className:"sdk-test-config-input"}),W&&p.jsx("small",{className:"sdk-test-config-hint success",children:" Auto-filled from onboarding"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Wallet Address:",p.jsx("input",{type:"text",value:R||"",disabled:!!(N&&N.trim()!==""),onChange:()=>{},placeholder:"automatic (from mnemonic)",className:"sdk-test-config-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Device ID:",p.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),className:"sdk-test-config-input"})]})}),p.jsxs("div",{className:"control-box",children:[p.jsx(Mve,{isRunning:f,onClick:ze}),p.jsx(Dve,{mnemonic:N||"",baseURL:n,onboardLoading:g,isRunning:f,onOnboard:async(L,re)=>{if(L&&L.trim()!==""){b(!0);try{await $e("Authentication")}catch(fe){console.error("Authentication test error:",fe)}finally{b(!1)}}else ht.warning("Mnemonic required",{description:"Please enter a mnemonic first to run authentication flow."})}}),p.jsx(Ive,{isRunning:f,isLoading:y,onClick:()=>{v(!0);try{ct()}catch(L){console.error("Utility test error:",L)}finally{setTimeout(()=>{v(!1)},100)}}}),p.jsx(Ave,{isRunning:f,isLoading:w,onClick:async()=>{k(!0);try{await qe()}catch(L){console.error("Info Client test error:",L)}finally{k(!1)}}}),p.jsx(Rve,{isRunning:f,isLoading:S,onClick:async()=>{_(!0);try{await ut()}catch(L){console.error("Wallet Specific test error:",L)}finally{_(!1)}}}),p.jsx(Nve,{mnemonic:N||"",isRunning:f,isLoading:C,onClick:async()=>{if(N&&N.trim()!==""){P(!0);try{await we()}catch(L){console.error("Exchange Client test error:",L)}finally{P(!1)}}else ht.warning("Mnemonic required",{description:"Please enter a mnemonic first to run Exchange Client tests."})}}),p.jsx(Ove,{isRunning:f,onClick:Ee})]})]}),W&&p.jsxs("span",{className:"sdk-test-status success",children:[" Auth Token: ",W.substring(0,20),"..."]}),Y&&p.jsxs("span",{className:"sdk-test-status error",children:[" Onboard Error: ",Y,p.jsx(jve,{onClick:K})]})]}),p.jsx("div",{className:"sdk-test-results",children:Object.entries(h).map(([L,re])=>{const fe=T.has(L);return p.jsxs("div",{className:"sdk-test-section",children:[p.jsx(Fve,{sectionName:L,isExpanded:fe,onToggle:()=>Je(L)}),fe&&p.jsx("div",{className:"sdk-test-section-content",children:re.results.map((le,ce)=>p.jsx(Lve,{result:le},ce))})]},L)})}),Object.keys(h).length===0&&!f&&p.jsx("div",{className:"sdk-test-empty-state",children:'Click "Run All Tests" to start testing the SDK APIs'})]})}const Bve=({isConnected:n,isConnecting:e,onConnect:r,onDisconnect:i})=>p.jsxs("div",{className:"config-actions",children:[p.jsx("button",{className:"nav-button",onClick:r,disabled:n||e,style:{backgroundColor:n?"#ccc":e?"#ffc107":"#28a745",color:"white",cursor:n||e?"not-allowed":"pointer"},children:e?" Connecting...":n?" Connected":"Connect"}),e&&p.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Connection in progress... Check messages below for details"}),p.jsx("button",{className:"nav-button",onClick:i,disabled:!n,style:{backgroundColor:n?"#dc3545":"#ccc",cursor:n?"pointer":"not-allowed"},children:"Disconnect"})]}),zve=({onClick:n})=>p.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),ri=({channel:n,isSubscribed:e,isConnected:r,disabled:i=!1,subscribeLabel:s,unsubscribeLabel:o,onSubscribe:a,onUnsubscribe:l,variant:c="public"})=>{const u=!r||i,h=e?"#dc3545":c==="private"?"#28a745":"#007bff";return p.jsx("button",{onClick:e?l:a,disabled:u,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:h,color:"white",border:"none",borderRadius:"4px",cursor:u?"not-allowed":"pointer"},children:e?o:s})},Uve=({steps:n})=>n.length===0?null:p.jsxs("div",{className:"connection-steps-container",children:[p.jsx("h2",{children:"Connection Steps"}),p.jsx("div",{className:"connection-steps-list",children:n.map((e,r)=>p.jsxs("div",{className:`connection-step-item ${e.status==="error"?"error":e.status==="success"?"success":e.status==="in-progress"?"in-progress":"pending"}`,children:[p.jsx("span",{className:"connection-step-icon",children:e.status==="error"?"":e.status==="success"?"":e.status==="in-progress"?"":""}),p.jsxs("div",{className:"connection-step-content",children:[p.jsxs("div",{className:"connection-step-title",children:["Step ",e.step,": ",e.message]}),e.details&&p.jsx("div",{className:"connection-step-details",children:JSON.stringify(e.details,null,2)}),p.jsx("div",{className:"connection-step-timestamp",children:new Date(e.timestamp).toLocaleTimeString()})]})]},r))})]}),Wve=({wsURL:n,onWsURLChange:e,marketId:r,onMarketIdChange:i,markets:s,symbol:o,onSymbolChange:a,klineInterval:l,onKlineIntervalChange:c,twapWindowSize:u,onTwapWindowSizeChange:h,authToken:d,onAuthTokenChange:f,walletAddress:m,deviceID:g,onDeviceIDChange:b,isConnected:y,isConnecting:v,onConnect:w,onDisconnect:k})=>p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{children:"Configuration"}),p.jsxs("div",{className:"config-grid",children:[p.jsx("div",{children:p.jsxs("label",{children:["WebSocket URL:",p.jsx("input",{type:"text",value:n,onChange:S=>e(S.target.value),className:"config-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Market:",p.jsx("select",{value:r||"",onChange:S=>i(S.target.value),className:"config-select",children:s.length===0?p.jsx("option",{value:"",children:"Loading markets..."}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),s.map(S=>{var T;const _=S.market_id??((T=S.market_id)==null?void 0:T.toString())??"",C=S.moniker?S.moniker:S.symbol?S.symbol:S.baseAsset&&S.quoteAsset?`${S.baseAsset}-${S.quoteAsset}`:`Market ID: ${_}`,P=S.active?" [ACTIVE]":"";return p.jsxs("option",{value:_,children:[C," - ID: ",_,P]},_)})]})})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Symbol (for funding_rate, deviation, index_price, mark_price, price_feed, twap):",p.jsx("input",{type:"text",value:o,onChange:S=>a(S.target.value),placeholder:"e.g., BTC/USDT or BTC/USDC",className:"config-input"}),o&&!o.includes("/")&&p.jsx("small",{className:"config-error",children:' Symbol must be in format "BASE/QUOTE" (e.g., "BTC/USDC")'})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Kline Interval:",p.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"config-select",children:[p.jsx("option",{value:"1m",children:"1 minute"}),p.jsx("option",{value:"5m",children:"5 minutes"}),p.jsx("option",{value:"15m",children:"15 minutes"}),p.jsx("option",{value:"1h",children:"1 hour"}),p.jsx("option",{value:"4h",children:"4 hours"}),p.jsx("option",{value:"1d",children:"1 day"})]})]})}),p.jsx("div",{children:p.jsxs("label",{children:["TWAP Window Size (seconds):",p.jsx("input",{type:"number",value:u,onChange:S=>h(S.target.value),placeholder:"e.g., 300 for 5 minutes",min:"1",className:"config-input"}),u&&(isNaN(Number(u))||Number(u)<=0)&&p.jsx("small",{className:"config-error",children:" Window size must be a positive number"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Auth Token (for private channels):",p.jsx("input",{type:"text",value:d,onChange:S=>f(S.target.value),placeholder:"Required for user_updates (auto-filled from SDK Test Page)",className:"config-input"}),d&&p.jsx("small",{className:"config-hint",children:" Auto-filled from SDK Test Page"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Wallet Address:",p.jsx("input",{type:"text",value:m||"",disabled:!0,placeholder:"Auto-filled from useOnboard hook",className:`config-input-disabled ${m?"has-value":""}`}),m&&p.jsx("small",{className:"config-hint",children:" Auto-filled from useOnboard hook"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Device ID:",p.jsx("input",{type:"text",value:g,onChange:S=>b(S.target.value),className:"config-input"})]})})]}),p.jsx(Bve,{isConnected:y,isConnecting:v,onConnect:w,onDisconnect:k})]}),qve=({data:n})=>p.jsxs("div",{className:"funding-rate-details",children:[p.jsx("strong",{className:"funding-rate-title",children:"Funding Rate Details:"}),p.jsxs("div",{className:"funding-rate-grid",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Symbol:"})," ",n.symbol??"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Funding Rate:"})," ",n.funding_rate?parseFloat(String(n.funding_rate)).toFixed(6):"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Mark Price:"})," ",n.mark_price??"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Index Price:"})," ",n.index_price??"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Premium Rate:"})," ",n.premium_rate??"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"EMA Funding Rate:"})," ",n.ema_funding_rate??"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Next Funding Time:"})," ",n.next_funding_time_unix?new Date(n.next_funding_time_unix*1e3).toLocaleString():"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Funding Interval:"})," ",n.funding_interval_seconds?`${n.funding_interval_seconds}s`:"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Valid:"})," ",n.is_valid!==void 0?n.is_valid?"Yes":"No":"N/A"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Stale:"})," ",p.jsx("span",{className:`funding-rate-stale ${n.is_stale?"":"valid"}`,children:n.is_stale!==void 0?n.is_stale?"Yes":"No":"N/A"})]}),n.option_type&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Option Type:"})," ",n.option_type]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Strike Price:"})," ",n.strike_price??"N/A"]})]})]})]}),Hve=({positions:n})=>!n||n.length===0?null:p.jsxs("div",{className:"positions-container",children:[p.jsxs("strong",{className:"positions-title",children:["Positions (",n.length,"):"]}),p.jsx("div",{className:"positions-grid",children:n.map((e,r)=>{const i=e.size||0,s=i>=0?"LONG":"SHORT";return p.jsxs("div",{className:"position-card",children:[p.jsx("div",{className:"position-symbol",children:e.symbol||`Market ${e.marketId||e.market_id||"N/A"}`}),p.jsxs("div",{className:"position-details",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Side:"})," ",p.jsx("span",{className:s==="LONG"?"position-side-long":"position-side-short",children:s})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Size:"})," ",Math.abs(i).toFixed(8)]}),e.entryPrice!==void 0||e.entry_price!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Entry Price:"})," ",(e.entryPrice||e.entry_price||0).toFixed(8)]}):null,e.markPrice!==void 0||e.mark_price!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Mark Price:"})," ",(e.markPrice||e.mark_price||0).toFixed(8)]}):null,e.liquidationPrice!==void 0||e.liquidation_price!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Liquidation Price:"})," ",(e.liquidationPrice||e.liquidation_price||0).toFixed(8)]}):null,e.unrealizedPnL!==void 0||e.unrealized_pnl!==void 0||e.pnl!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Unrealized PnL:"})," ",p.jsx("span",{className:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0)>=0?"position-pnl-positive":"position-pnl-negative",children:(e.unrealizedPnL||e.unrealized_pnl||e.pnl||0).toFixed(8)})]}):null,e.leverage!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Leverage:"})," ",e.leverage,"x"]}):null,e.margin!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Margin:"})," ",e.margin.toFixed(8)]}):null,e.marginMode!==void 0||e.margin_mode!==void 0?p.jsxs("div",{children:[p.jsx("strong",{children:"Margin Mode:"})," ",e.marginMode||e.margin_mode||"N/A"]}):null]})]},r)})})]}),Vve=({message:n})=>{const{channel:e,data:r,type:i,step:s,timestamp:o}=n,a=e==="funding_rate"&&typeof r=="object"&&r!==null,l=e==="user_updates"&&typeof r=="object"&&r!==null&&Array.isArray(r.positions)&&r.positions.length>0,c=a||l;return p.jsx("div",{className:`message-item ${i}`,children:p.jsx("div",{className:"message-header",children:p.jsxs("div",{className:"message-content",children:[p.jsxs("div",{className:"message-title",children:[p.jsxs("span",{children:["[",e,"]"]}),s&&p.jsxs("span",{className:"message-step",children:["(",s,")"]}),p.jsx("span",{children:new Date(o).toLocaleTimeString()})]}),a&&p.jsx(qve,{data:r}),l&&p.jsx(Hve,{positions:r.positions}),!c&&p.jsxs("div",{className:"message-body",children:[typeof r=="string"?r:JSON.stringify(r).substring(0,20),"..."]}),typeof r!="string"&&p.jsxs("details",{children:[p.jsx("summary",{className:"raw-data-summary",children:"View Raw Data"}),p.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(r,null,2)})]})]})})})},Yve=({messages:n,isPrivate:e=!1,emptyMessage:r})=>{const i=e?"No messages yet. Connect with auth token and subscribe to user updates.":"No messages yet. Connect and subscribe to channels to see updates.";return p.jsx("div",{className:`messages-container ${e?"private":"public"}`,children:n.length===0?p.jsx("div",{className:`messages-empty ${e?"private":""}`,children:r||i}):n.map(s=>p.jsx(Vve,{message:s},s.id))})},UF=({title:n,isPrivate:e=!1,messages:r,onClearMessages:i,children:s,emptyMessage:o})=>p.jsxs("div",{className:"channel-section",children:[p.jsxs("div",{className:"channel-header",children:[p.jsx("h2",{className:"channel-title",children:n}),p.jsx(zve,{onClick:i})]}),p.jsxs("div",{className:"channel-content",children:[p.jsx("div",{className:"channel-buttons-container",children:s}),p.jsx(Yve,{messages:r,isPrivate:e,emptyMessage:o}),e&&p.jsxs("div",{className:"private-note",children:[p.jsx("strong",{children:"Note:"})," Private channels require authentication. Enter your auth token in the configuration above."]})]})]});function Gve(){var De,ae,Xe,Fe;const[n,e]=E.useState(su),[r,i]=E.useState(()=>localStorage.getItem("authToken")||""),[s,o]=E.useState(c_),[a,l]=E.useState(""),[c,u]=E.useState("BTC/USDC"),[h,d]=E.useState("1m"),[f,m]=E.useState("300"),[g,b]=E.useState(!1),[y,v]=E.useState([]),[w,k]=E.useState([]),[S,_]=E.useState(new Set),[C,P]=E.useState([]),[T,O]=E.useState(!1),D=E.useRef(null),I=E.useRef(0),U=Jd,{walletAddress:B,authToken:z}=Il(),{markets:j}=ya({baseURL:U,sessionToken:"",autoFetchMarkets:!0}),F=j.length>0?(((De=j.find(te=>te.active))==null?void 0:De.market_id)??j[0].market_id)||(((Xe=(ae=j.find(te=>te.active))==null?void 0:ae.id)==null?void 0:Xe.toString())??((Fe=j[0].id)==null?void 0:Fe.toString())??""):null;E.useEffect(()=>{F&&!a&&l(F)},[F]),E.useEffect(()=>{z&&i(z)},[z]),E.useEffect(()=>{const te=ne=>{ne.key==="authToken"&&ne.newValue&&i(ne.newValue)};window.addEventListener("storage",te);const ee=setInterval(()=>{const ne=localStorage.getItem("authToken");ne&&ne!==r&&i(ne)},1e3);return()=>{window.removeEventListener("storage",te),clearInterval(ee)}},[r]),E.useEffect(()=>{r&&r.trim()!==""&&localStorage.setItem("authToken",r)},[r]);const N=(te,ee,ne,Ze,je)=>{const Ve={id:I.current++,timestamp:Date.now(),channel:te,data:ee,type:ne,step:je};Ze?k(Ae=>[...Ae.slice(-99),Ve]):v(Ae=>[...Ae.slice(-99),Ve])},R=(te,ee,ne,Ze)=>{P(je=>[...je,{step:te,status:ee,message:ne,timestamp:Date.now(),details:Ze}])},W=()=>{P([])},Y=async()=>{var je;if((je=D.current)!=null&&je.isConnected()){N("connection","Already connected","info",!1);return}if(O(!0),W(),R("1","in-progress","Validating configuration..."),N("connection","Starting connection process...","debug",!1,"Step 1: Validation"),!n||!n.trim()){R("1","error","WebSocket URL is required"),N("connection","Error: WebSocket URL is required","error",!1,"Step 1: Validation"),O(!1);return}try{const Ve=new URL(n);if(Ve.protocol!=="ws:"&&Ve.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol");R("1","success",`URL format valid: ${n}`),N("connection",`URL validated: ${n}`,"debug",!1,"Step 1: Validation")}catch(Ve){R("1","error",`Invalid URL format: ${Ve.message}`),N("connection",`Error: Invalid URL format - ${Ve.message}`,"error",!1,"Step 1: Validation"),O(!1);return}R("2","in-progress","Building connection URL with parameters...");const te=[];r&&te.push(`token=${encodeURIComponent(r)}`),B&&te.push(`wallet=${encodeURIComponent(B)}`),s&&te.push(`device_id=${encodeURIComponent(s)}`);const ee=n.includes("?")?"&":"?",ne=te.length>0?`${n}${ee}${te.join("&")}`:n;if(R("2","success",`Connection URL: ${ne}`),N("connection",`Connection URL: ${ne}`,"debug",!1,"Step 2: URL Construction"),te.length>0?N("connection",`Query parameters: ${te.join(", ")}`,"debug",!1,"Step 2: URL Construction"):N("connection","No query parameters (authToken, walletAddress, deviceID)","warning",!1,"Step 2: URL Construction"),R("3","in-progress","Cleaning up existing connection..."),D.current)try{D.current.disconnect(),R("3","success","Previous connection cleaned up"),N("connection","Previous connection cleaned up","debug",!1,"Step 3: Cleanup")}catch{R("3","success","No previous connection to clean up"),N("connection","No previous connection found","debug",!1,"Step 3: Cleanup")}else R("3","success","No previous connection to clean up");R("4","in-progress","Creating SubscriptionClient instance...");try{D.current=new _p({url:n,authToken:r||void 0,walletAddress:B||void 0,deviceID:s||void 0}),R("4","success","SubscriptionClient created"),N("connection","SubscriptionClient instance created","debug",!1,"Step 4: Client Creation"),N("connection",`Config: ${JSON.stringify({url:n,hasToken:!!r,hasWallet:!!B,deviceID:s},null,2)}`,"debug",!1,"Step 4: Client Creation")}catch(Ve){R("4","error",`Failed to create client: ${Ve.message}`),N("connection",`Error creating client: ${Ve.message}`,"error",!1,"Step 4: Client Creation"),O(!1);return}R("5","in-progress","Initiating WebSocket connection..."),N("connection","Initiating WebSocket handshake...","debug",!1,"Step 5: Connection"),N("connection","Browser will attempt to upgrade HTTP connection to WebSocket","debug",!1,"Step 5: Connection");const Ze=Date.now();try{await D.current.connect();const Ve=Date.now()-Ze,Ae=D.current.isConnected(),Qe=D.current.getState();N("connection",`Connection attempt completed in ${Ve}ms`,"debug",!1,"Step 5: Connection"),N("connection",`Connection state: ${Qe}`,"debug",!1,"Step 5: Connection"),b(Ae),Ae?(R("5","success",`WebSocket connected successfully (${Ve}ms)`),N("connection"," WebSocket connected successfully!","success",!1,"Step 5: Connection"),N("connection",`Connection established in ${Ve}ms`,"success",!1,"Step 5: Connection")):(R("5","error","Connection completed but state is not connected"),N("connection"," Connection attempt completed but state is not connected","error",!1,"Step 5: Connection"),N("connection",`Current state: ${Qe}`,"error",!1,"Step 5: Connection"))}catch(Ve){const Ae=Date.now()-Ze,Qe=Ve.message||String(Ve);let lt="",He=null,rt=null;const Te=Qe.match(/code\s+(\d+)/i);Te&&(He=parseInt(Te[1],10));const it=Qe.match(/\b(40[0-9]|50[0-9])\b/);if(it&&(rt=parseInt(it[1],10)),He!==null)switch(He){case 1006:lt=`WebSocket Close Code 1006 (Abnormal Closure)
The connection was closed abnormally. Possible causes:
- Server is not running or unreachable
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection
- DNS resolution failure
- SSL/TLS handshake failure (for wss://)`;break;case 1002:lt=`WebSocket Close Code 1002 (Protocol Error)
The server encountered a protocol error. Possible causes:
- Server does not support WebSocket protocol
- Protocol version mismatch
- Invalid WebSocket handshake`;break;case 1003:lt=`WebSocket Close Code 1003 (Unsupported Data Type)
The server received data in an unsupported format.`;break;case 1008:lt=`WebSocket Close Code 1008 (Policy Violation)
Connection closed due to policy violation. Possible causes:
- Authentication failed (missing or invalid token)
- Authorization failed (insufficient permissions)
- Rate limiting or quota exceeded
- Server policy restrictions`;break;case 1011:lt=`WebSocket Close Code 1011 (Server Error)
Server encountered an internal error. Check server logs for details.`;break;case 1e3:lt=`WebSocket Close Code 1000 (Normal Closure)
Connection closed normally but before opening. This may indicate:
- Server rejected the connection immediately
- Connection timeout`;break;case 1001:lt=`WebSocket Close Code 1001 (Going Away)
Server is going away or restarting.`;break;case 1007:lt=`WebSocket Close Code 1007 (Invalid Data)
Server received invalid data format.`;break;case 1009:lt=`WebSocket Close Code 1009 (Message Too Big)
Message size exceeds server limits.`;break;case 1010:lt=`WebSocket Close Code 1010 (Extension Error)
Server could not negotiate required extensions.`;break;case 1012:lt=`WebSocket Close Code 1012 (Service Restart)
Service is restarting.`;break;case 1013:lt=`WebSocket Close Code 1013 (Try Again Later)
Service temporarily unavailable, try again later.`;break;case 1014:lt=`WebSocket Close Code 1014 (Bad Gateway)
Server acting as gateway received invalid response.`;break;case 1015:lt=`WebSocket Close Code 1015 (TLS Handshake)
TLS handshake failure (for secure WebSocket connections).`;break;default:lt=`WebSocket Close Code ${He}
Connection closed with this close code. Check WebSocket specification for details.`}else if(rt!==null)switch(rt){case 401:lt=`HTTP 401 (Unauthorized)
Authentication failed. Possible causes:
- Missing or invalid JWT token
- Token expired
- Server requires authentication but no token provided
- Token signature verification failed
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`;break;case 403:lt=`HTTP 403 (Forbidden)
Access denied. Possible causes:
- Insufficient permissions
- Account restrictions
- IP address blocked`;break;case 404:lt=`HTTP 404 (Not Found)
WebSocket endpoint not found. Check the WebSocket URL.`;break;case 500:case 502:case 503:case 504:lt=`HTTP ${rt} (Server Error)
Server error occurred. Check server logs for details.`;break;default:lt=`HTTP ${rt}
Connection failed with this HTTP status code.`}else Qe.includes("abnormal closure")||Qe.toLowerCase().includes("abnormal")?lt=`Abnormal Connection Closure
The server closed the connection abnormally. Possible causes:
- Server is not running
- Wrong URL or port
- Network connectivity issues
- Firewall blocking the connection`:Qe.includes("protocol error")||Qe.toLowerCase().includes("protocol")?lt=`WebSocket Protocol Error
The server may not support WebSocket connections or there's a protocol mismatch.`:Qe.includes("policy violation")||Qe.toLowerCase().includes("policy")?lt=`Policy Violation
Connection closed due to policy violation. Check authentication requirements.`:Qe.includes("server error")||Qe.toLowerCase().includes("server error")?lt=`Server Error
Server returned an error. Check server logs for details.`:Qe.includes("Unauthorized")||Qe.includes("unauthorized")||Qe.includes("401")?lt=`Authentication Failed
Possible causes:
- Missing or invalid JWT token (if server requires authentication)
- Token expired
- Server is in production mode requiring JWT authentication
Note: If server uses JWT auth, you must provide a valid token in the authToken field.`:Qe.includes("timeout")||Qe.toLowerCase().includes("timeout")?lt=`Connection Timeout
The connection attempt timed out. Possible causes:
- Server is not responding
- Network latency is too high
- Firewall blocking the connection`:(Qe.includes("network")||Qe.toLowerCase().includes("network"))&&(lt=`Network Error
Network-related issue detected. Check:
- Internet connection
- Firewall settings
- Proxy configuration`);let ve=`Connection failed: ${Qe}`;if(He!==null&&(ve+=` (Close Code: ${He})`),rt!==null&&(ve+=` (HTTP Status: ${rt})`),R("5","error",ve),N("connection",` Connection error: ${Qe}`,"error",!1,"Step 5: Connection"),He!==null||rt!==null){const wt={};He!==null&&(wt.closeCode=He),rt!==null&&(wt.httpStatusCode=rt),N("connection",`Extracted error info: ${JSON.stringify(wt,null,2)}`,"debug",!1,"Step 5: Connection")}lt&&N("connection",`Error details:
${lt}`,"error",!1,"Step 5: Connection"),N("connection",`Connection failed after ${Ae}ms`,"error",!1,"Step 5: Connection"),N("connection",`Full error: ${JSON.stringify(Ve,Object.getOwnPropertyNames(Ve),2)}`,"error",!1,"Step 5: Connection"),b(!1)}finally{O(!1)}},K=()=>{if(D.current)try{D.current.disconnect(),b(!1),_(new Set),N("connection","WebSocket disconnected","info",!1)}catch(te){N("connection",`Disconnect error: ${te.message}`,"error",!1)}},H=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("orderbook","Not connected. Please connect first.","error",!1);return}if(!a){N("orderbook","Please select a market first","error",!1);return}const te=ne=>{N("orderbook",ne,"success",!1)};try{D.current.subscribeOrderbook(a,te,!0),_(ne=>new Set([...ne,"orderbook"])),N("orderbook",`Subscribed to orderbook for market ${a}`,"success",!1)}catch(ne){N("orderbook",`Subscription error: ${ne.message}`,"error",!1)}},Q=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeOrderbook(a),_(ee=>{const ne=new Set(ee);return ne.delete("orderbook"),ne}),N("orderbook","Unsubscribed from orderbook","info",!1)}catch(ee){N("orderbook",`Unsubscribe error: ${ee.message}`,"error",!1)}},G=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("trades","Not connected. Please connect first.","error",!1);return}if(!a){N("trades","Please select a market first","error",!1);return}const te=ne=>{N("trades",ne,"success",!1)};try{D.current.subscribeTrades(a,te),_(ne=>new Set([...ne,"trades"])),N("trades",`Subscribed to trades for market ${a}`,"success",!1)}catch(ne){N("trades",`Subscription error: ${ne.message}`,"error",!1)}},X=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeTrades(a),_(ee=>{const ne=new Set(ee);return ne.delete("trades"),ne}),N("trades","Unsubscribed from trades","info",!1)}catch(ee){N("trades",`Unsubscribe error: ${ee.message}`,"error",!1)}},de=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("ticker","Not connected. Please connect first.","error",!1);return}if(!a){N("ticker","Please select a market first","error",!1);return}const te=ne=>{N("ticker",ne,"success",!1)};try{D.current.subscribeTicker(a,te),_(ne=>new Set([...ne,"ticker"])),N("ticker",`Subscribed to ticker for market ${a}`,"success",!1)}catch(ne){N("ticker",`Subscription error: ${ne.message}`,"error",!1)}},ye=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeTicker(a),_(ee=>{const ne=new Set(ee);return ne.delete("ticker"),ne}),N("ticker","Unsubscribed from ticker","info",!1)}catch(ee){N("ticker",`Unsubscribe error: ${ee.message}`,"error",!1)}},se=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("last_price","Not connected. Please connect first.","error",!1);return}if(!a){N("last_price","Please select a market first","error",!1);return}const te=ne=>{N("last_price",ne,"success",!1)};try{D.current.subscribeLastPrice(a,te,!0),_(ne=>new Set([...ne,"last_price"])),N("last_price",`Subscribed to last price for market ${a}`,"success",!1)}catch(ne){N("last_price",`Subscription error: ${ne.message}`,"error",!1)}},ie=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeLastPrice(a),_(ee=>{const ne=new Set(ee);return ne.delete("last_price"),ne}),N("last_price","Unsubscribed from last price","info",!1)}catch(ee){N("last_price",`Unsubscribe error: ${ee.message}`,"error",!1)}},Pe=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("user_updates","Not connected. Please connect first.","error",!0);return}if(!B){N("user_updates","Wallet address required for position updates (positions channel)","error",!0);return}const te=ne=>{N("user_updates",ne,"success",!0)};try{D.current.subscribeUserUpdates(te),_(ne=>new Set([...ne,"user_updates"])),N("user_updates","Subscribed to user updates (positions, orders, etc.)","success",!0)}catch(ne){N("user_updates",`Subscription error: ${ne.message}`,"error",!0)}},ke=()=>{var te;if((te=D.current)!=null&&te.isConnected())try{D.current.unsubscribeUserUpdates(),_(ee=>{const ne=new Set(ee);return ne.delete("user_updates"),ne}),N("user_updates","Unsubscribed from user updates","info",!0)}catch(ee){N("user_updates",`Unsubscribe error: ${ee.message}`,"error",!0)}},q=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("funding_rate","Not connected. Please connect first.","error",!1);return}if(!a){N("funding_rate","Please select a market first","error",!1);return}const te=ne=>{N("funding_rate",ne,"success",!1)};try{D.current.subscribeFundingRate(a,te),_(ne=>new Set([...ne,"funding_rate"])),N("funding_rate",`Subscribed to funding rate for market ${a}`,"success",!1)}catch(ne){N("funding_rate",`Subscription error: ${ne.message}`,"error",!1)}},Ee=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeFundingRate(a),_(ee=>{const ne=new Set(ee);return ne.delete("funding_rate"),ne}),N("funding_rate","Unsubscribed from funding rate","info",!1)}catch(ee){N("funding_rate",`Unsubscribe error: ${ee.message}`,"error",!1)}},Je=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("buckets","Not connected. Please connect first.","error",!0);return}if(!B){N("buckets","Wallet address required for buckets subscription","error",!0);return}const te=ne=>{N("buckets",ne,"success",!0)};try{D.current.subscribeBuckets(te),_(ne=>new Set([...ne,"buckets"])),N("buckets","Subscribed to buckets","success",!0)}catch(ne){N("buckets",`Subscription error: ${ne.message}`,"error",!0)}},ct=()=>{var te;if((te=D.current)!=null&&te.isConnected())try{D.current.unsubscribeBuckets(),_(ee=>{const ne=new Set(ee);return ne.delete("buckets"),ne}),N("buckets","Unsubscribed from buckets","info",!0)}catch(ee){N("buckets",`Unsubscribe error: ${ee.message}`,"error",!0)}},$e=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("deviation","Not connected. Please connect first.","error",!1);return}if(!a){N("deviation","Please select a market first","error",!1);return}const te=ne=>{N("deviation",ne,"success",!1)};try{D.current.subscribeDeviation(a,te),_(ne=>new Set([...ne,"deviation"])),N("deviation",`Subscribed to deviation for market ${a}`,"success",!1)}catch(ne){N("deviation",`Subscription error: ${ne.message}`,"error",!1)}},ut=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeDeviation(a),_(ee=>{const ne=new Set(ee);return ne.delete("deviation"),ne}),N("deviation","Unsubscribed from deviation","info",!1)}catch(ee){N("deviation",`Unsubscribe error: ${ee.message}`,"error",!1)}},qe=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("index_price","Not connected. Please connect first.","error",!1);return}if(!a){N("index_price","Please select a market first","error",!1);return}const te=ne=>{N("index_price",ne,"success",!1)};try{D.current.subscribeIndexPrice(a,te),_(ne=>new Set([...ne,"index_price"])),N("index_price",`Subscribed to index price for market ${a}`,"success",!1)}catch(ne){N("index_price",`Subscription error: ${ne.message}`,"error",!1)}},we=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeIndexPrice(a),_(ee=>{const ne=new Set(ee);return ne.delete("index_price"),ne}),N("index_price","Unsubscribed from index price","info",!1)}catch(ee){N("index_price",`Unsubscribe error: ${ee.message}`,"error",!1)}},ze=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("kline","Not connected. Please connect first.","error",!1);return}if(!a){N("kline","Please select a market first","error",!1);return}if(!h){N("kline","Please select an interval first","error",!1);return}const te=ne=>{N("kline",ne,"success",!1)};try{D.current.subscribeKline(a,h,te),_(ne=>new Set([...ne,"kline"])),N("kline",`Subscribed to kline for market ${a} with interval ${h}`,"success",!1)}catch(ne){N("kline",`Subscription error: ${ne.message}`,"error",!1)}},Me=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&!(!a||!h))try{D.current.unsubscribeKline(a,h),_(ee=>{const ne=new Set(ee);return ne.delete("kline"),ne}),N("kline","Unsubscribed from kline","info",!1)}catch(ee){N("kline",`Unsubscribe error: ${ee.message}`,"error",!1)}},Ie=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("mark_price","Not connected. Please connect first.","error",!1);return}if(!a){N("mark_price","Please select a market first","error",!1);return}const te=ne=>{N("mark_price",ne,"success",!1)};try{D.current.subscribeMarkPrice(a,te),_(ne=>new Set([...ne,"mark_price"])),N("mark_price",`Subscribed to mark price for market ${a}`,"success",!1)}catch(ne){N("mark_price",`Subscription error: ${ne.message}`,"error",!1)}},Ce=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribeMarkPrice(a),_(ee=>{const ne=new Set(ee);return ne.delete("mark_price"),ne}),N("mark_price","Unsubscribed from mark price","info",!1)}catch(ee){N("mark_price",`Unsubscribe error: ${ee.message}`,"error",!1)}},xe=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("price_feed","Not connected. Please connect first.","error",!1);return}if(!a){N("price_feed","Please select a market first","error",!1);return}const te=ne=>{N("price_feed",ne,"success",!1)};try{D.current.subscribePriceFeed(a,te),_(ne=>new Set([...ne,"price_feed"])),N("price_feed",`Subscribed to price feed for market ${a}`,"success",!1)}catch(ne){N("price_feed",`Subscription error: ${ne.message}`,"error",!1)}},L=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&a)try{D.current.unsubscribePriceFeed(a),_(ee=>{const ne=new Set(ee);return ne.delete("price_feed"),ne}),N("price_feed","Unsubscribed from price feed","info",!1)}catch(ee){N("price_feed",`Unsubscribe error: ${ee.message}`,"error",!1)}},re=()=>{var ee;if(!((ee=D.current)!=null&&ee.isConnected())){N("twap","Not connected. Please connect first.","error",!1);return}if(!a){N("twap","Please select a market first","error",!1);return}if(!f||isNaN(Number(f))||Number(f)<=0){N("twap","Please enter a valid window size (positive number in seconds)","error",!1);return}const te=ne=>{N("twap",ne,"success",!1)};try{D.current.subscribeTWAP(a,Number(f),te),_(ne=>new Set([...ne,"twap"])),N("twap",`Subscribed to TWAP for market ${a} with window size ${f}s`,"success",!1)}catch(ne){N("twap",`Subscription error: ${ne.message}`,"error",!1)}},fe=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&!(!a||!f))try{D.current.unsubscribeTWAP(a,Number(f)),_(ee=>{const ne=new Set(ee);return ne.delete("twap"),ne}),N("twap","Unsubscribed from TWAP","info",!1)}catch(ee){N("twap",`Unsubscribe error: ${ee.message}`,"error",!1)}},le=()=>{if(!D.current){N("multi_feed","SubscriptionClient not initialized. Please connect first.","error",!1);return}if(!D.current.isConnected()){N("multi_feed","Not connected. Please connect first.","error",!1);return}if(!a){N("multi_feed","Please select a market first","error",!1);return}if(!c){N("multi_feed","Please enter a symbol first","error",!1);return}if(typeof D.current.subscribeMultiFeed!="function"){N("multi_feed","subscribeMultiFeed method not available. Please check SDK version.","error",!1),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(D.current)));return}const te=ee=>{const ne=ee.sub_channel||"unknown";vee(ee)?console.debug("Orderbook update:",ee.data.bids.length,"bids"):xee(ee)?console.debug("Trade:",ee.data.trade_id,ee.data.price):wee(ee)?console.debug("Position update:",ee.data.symbol,ee.data.size):_ee(ee)?console.debug("Order update:",ee.data.order_id,ee.data.status):See(ee)?console.debug("Buckets update:",ee.data.total_buckets):kee(ee)&&console.debug("Balances update:",ee.data.count,"assets"),N(`multi_feed:${ne}`,ee,"success",ne==="balances"||ne==="buckets"||ne==="orders"||ne==="positions")};try{D.current.subscribeMultiFeed(a,te,{symbol:c,interval:h||"1m"}),_(ee=>new Set([...ee,"multi_feed"])),N("multi_feed",`Subscribed to multi-feed for market ${a}, symbol ${c}`,"success",!1)}catch(ee){N("multi_feed",`Subscription error: ${ee.message}`,"error",!1)}},ce=()=>{var te;if((te=D.current)!=null&&te.isConnected()&&!(!a||!c))try{D.current.unsubscribeMultiFeed(a,c),_(ee=>{const ne=new Set(ee);return ne.delete("multi_feed"),ne}),N("multi_feed","Unsubscribed from multi-feed","info",!1)}catch(ee){N("multi_feed",`Unsubscribe error: ${ee.message}`,"error",!1)}},ge=()=>{if(!D.current){N("balances","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!D.current.isConnected()){N("balances","Not connected. Please connect first.","error",!0);return}if(!B){N("balances","Wallet address required for balances subscription","error",!0);return}if(typeof D.current.subscribeBalances!="function"){N("balances","subscribeBalances method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(D.current)));return}const te=ee=>{N("balances",ee,"success",!0)};try{D.current.subscribeBalances(te),_(ee=>new Set([...ee,"balances"])),N("balances","Subscribed to balances","success",!0)}catch(ee){N("balances",`Subscription error: ${ee.message}`,"error",!0)}},J=()=>{if(D.current&&D.current.isConnected()){if(typeof D.current.unsubscribeBalances!="function"){N("balances","unsubscribeBalances method not available. Please check SDK version.","error",!0);return}try{D.current.unsubscribeBalances(),_(te=>{const ee=new Set(te);return ee.delete("balances"),ee}),N("balances","Unsubscribed from balances","info",!0)}catch(te){N("balances",`Unsubscribe error: ${te.message}`,"error",!0)}}},he=()=>{if(!D.current){N("orders","SubscriptionClient not initialized. Please connect first.","error",!0);return}if(!D.current.isConnected()){N("orders","Not connected. Please connect first.","error",!0);return}if(!B){N("orders","Wallet address required for orders subscription","error",!0);return}if(typeof D.current.subscribeOrders!="function"){N("orders","subscribeOrders method not available. Please check SDK version.","error",!0),console.error("SubscriptionClient methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(D.current)));return}const te=ee=>{N("orders",ee,"success",!0)};try{D.current.subscribeOrders(te),_(ee=>new Set([...ee,"orders"])),N("orders","Subscribed to orders","success",!0)}catch(ee){N("orders",`Subscription error: ${ee.message}`,"error",!0)}},pe=()=>{if(D.current&&D.current.isConnected()){if(typeof D.current.unsubscribeOrders!="function"){N("orders","unsubscribeOrders method not available. Please check SDK version.","error",!0);return}try{D.current.unsubscribeOrders(),_(te=>{const ee=new Set(te);return ee.delete("orders"),ee}),N("orders","Unsubscribed from orders","info",!0)}catch(te){N("orders",`Unsubscribe error: ${te.message}`,"error",!0)}}},_e=te=>{te?k([]):v([])};return E.useEffect(()=>()=>{if(D.current)try{D.current.disconnect()}catch{}},[]),p.jsxs("div",{className:"ws-test-page",children:[p.jsx("h1",{children:"WebSocket QA"}),p.jsx("p",{children:"Test WebSocket subscriptions for public and private channels"}),p.jsx(Uve,{steps:C}),p.jsx(Wve,{wsURL:n,onWsURLChange:e,marketId:a,onMarketIdChange:l,markets:j,symbol:c,onSymbolChange:u,klineInterval:h,onKlineIntervalChange:d,twapWindowSize:f,onTwapWindowSizeChange:m,authToken:r,onAuthTokenChange:i,walletAddress:B,deviceID:s,onDeviceIDChange:o,isConnected:g,isConnecting:T,onConnect:Y,onDisconnect:K}),p.jsxs("div",{className:"ws-test-page-layout",children:[p.jsxs(UF,{title:"WebSocket Public",isPrivate:!1,messages:y,onClearMessages:()=>_e(!1),children:[p.jsxs("div",{className:"channel-buttons-row",children:[p.jsx(ri,{channel:"orderbook",isSubscribed:S.has("orderbook"),isConnected:g,subscribeLabel:"Subscribe Orderbook",unsubscribeLabel:"Unsubscribe Orderbook",onSubscribe:H,onUnsubscribe:Q}),p.jsx(ri,{channel:"trades",isSubscribed:S.has("trades"),isConnected:g,subscribeLabel:"Subscribe Trades",unsubscribeLabel:"Unsubscribe Trades",onSubscribe:G,onUnsubscribe:X}),p.jsx(ri,{channel:"ticker",isSubscribed:S.has("ticker"),isConnected:g,subscribeLabel:"Subscribe Ticker",unsubscribeLabel:"Unsubscribe Ticker",onSubscribe:de,onUnsubscribe:ye}),p.jsx(ri,{channel:"last_price",isSubscribed:S.has("last_price"),isConnected:g,subscribeLabel:"Subscribe Last Price",unsubscribeLabel:"Unsubscribe Last Price",onSubscribe:se,onUnsubscribe:ie}),p.jsx(ri,{channel:"funding_rate",isSubscribed:S.has("funding_rate"),isConnected:g,subscribeLabel:"Subscribe Funding Rate",unsubscribeLabel:"Unsubscribe Funding Rate",onSubscribe:q,onUnsubscribe:Ee}),p.jsx(ri,{channel:"deviation",isSubscribed:S.has("deviation"),isConnected:g,subscribeLabel:"Subscribe Deviation",unsubscribeLabel:"Unsubscribe Deviation",onSubscribe:$e,onUnsubscribe:ut}),p.jsx(ri,{channel:"index_price",isSubscribed:S.has("index_price"),isConnected:g,subscribeLabel:"Subscribe Index Price",unsubscribeLabel:"Unsubscribe Index Price",onSubscribe:qe,onUnsubscribe:we}),p.jsx(ri,{channel:"kline",isSubscribed:S.has("kline"),isConnected:g,subscribeLabel:"Subscribe Kline",unsubscribeLabel:"Unsubscribe Kline",onSubscribe:ze,onUnsubscribe:Me})]}),p.jsxs("div",{className:"channel-buttons-row",children:[p.jsx(ri,{channel:"mark_price",isSubscribed:S.has("mark_price"),isConnected:g,subscribeLabel:"Subscribe Mark Price",unsubscribeLabel:"Unsubscribe Mark Price",onSubscribe:Ie,onUnsubscribe:Ce}),p.jsx(ri,{channel:"price_feed",isSubscribed:S.has("price_feed"),isConnected:g,subscribeLabel:"Subscribe Price Feed",unsubscribeLabel:"Unsubscribe Price Feed",onSubscribe:xe,onUnsubscribe:L}),p.jsx(ri,{channel:"twap",isSubscribed:S.has("twap"),isConnected:g,subscribeLabel:"Subscribe TWAP",unsubscribeLabel:"Unsubscribe TWAP",onSubscribe:re,onUnsubscribe:fe}),p.jsx(ri,{channel:"multi_feed",isSubscribed:S.has("multi_feed"),isConnected:g,subscribeLabel:"Subscribe Multi-Feed",unsubscribeLabel:"Unsubscribe Multi-Feed",onSubscribe:le,onUnsubscribe:ce})]}),p.jsx("small",{className:"private-note-text-block",style:{marginTop:"10px"},children:"Multi-Feed: Unified channel streaming all sub-channels (orderbook, trades, positions, balances, orders, buckets, etc.) Requires market ID and symbol. Authenticated sub-channels (balances, orders, positions, buckets) require wallet address."})]}),p.jsxs(UF,{title:"WebSocket Private",isPrivate:!0,messages:w,onClearMessages:()=>_e(!0),children:[p.jsx(ri,{channel:"user_updates",isSubscribed:S.has("user_updates"),isConnected:g,disabled:!B,subscribeLabel:"Subscribe User Updates",unsubscribeLabel:"Unsubscribe User Updates",onSubscribe:Pe,onUnsubscribe:ke,variant:"private"}),p.jsx("small",{className:"private-note-text",children:"Position updates (positions channel): Requires wallet address. Returns user positions."}),p.jsx(ri,{channel:"buckets",isSubscribed:S.has("buckets"),isConnected:g,disabled:!B,subscribeLabel:"Subscribe Buckets",unsubscribeLabel:"Unsubscribe Buckets",onSubscribe:Je,onUnsubscribe:ct,variant:"private"}),p.jsx("small",{className:"private-note-text-block",children:"Buckets: User's margin buckets (requires wallet address)"}),p.jsx(ri,{channel:"balances",isSubscribed:S.has("balances"),isConnected:g,disabled:!B,subscribeLabel:"Subscribe Balances",unsubscribeLabel:"Unsubscribe Balances",onSubscribe:ge,onUnsubscribe:J,variant:"private"}),p.jsx("small",{className:"private-note-text-block",children:"Balances: User's spot balances (USDC, MORM, BTC, etc.) - requires wallet address"}),p.jsx(ri,{channel:"orders",isSubscribed:S.has("orders"),isConnected:g,disabled:!B,subscribeLabel:"Subscribe Orders",unsubscribeLabel:"Unsubscribe Orders",onSubscribe:he,onUnsubscribe:pe,variant:"private"}),p.jsx("small",{className:"private-note-text-block",children:"Orders: User's open orders - requires wallet address"})]})]})]})}const Kve=({...n})=>p.jsx(tve,{...n,className:"toaster",expand:!0,richColors:!1,closeButton:!1,toastOptions:{duration:4e3,classNames:{toast:"toast",title:"toast-title",description:"toast-description",actionButton:"toast-action-button",cancelButton:"toast-cancel-button",closeButton:"toast-close-button"}}}),Xve=async n=>{try{return await navigator.clipboard.writeText(n),!0}catch{try{const r=document.createElement("textarea");return r.value=n,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}},Kr=n=>({label:"Copy",onClick:async()=>{await Xve(n)?ht.success("Error message copied to clipboard"):ht.error("Failed to copy error message")}});function $ee(n){const e=n.useWebSocket!==!1,[r,i]=E.useState([]),[s,o]=E.useState(!0),[a,l]=E.useState(""),[c,u]=E.useState(0),[h,d]=E.useState(!1),f=E.useRef(null),m=E.useRef(null),g=E.useRef(0),b=E.useRef(!0),y=E.useRef(!1),v=E.useRef(n);v.current=n;const w=E.useCallback(C=>{const P=YN(C)?C:VN(C);return Cw(P)},[]),k=E.useCallback(async()=>{if(!f.current)return;const C=v.current;if(!C.walletAddress||C.walletAddress.trim()===""){u(0);return}try{const P=await f.current.getBalance(C.walletAddress,"USDC"),T=Dt(P.available_balance);u(T)}catch(P){console.warn("Failed to fetch spot wallet balance (USDC):",P),u(0)}},[]),S=E.useCallback(async()=>{if(!f.current)return;const C=v.current;if(!C.walletAddress||C.walletAddress.trim()===""){l("Wallet address is required"),i([]),o(!1),b.current=!1;return}l(""),b.current&&o(!0);try{console.log("[useBucketCollections] [fetchCollections] Starting fetch...",{walletAddress:C.walletAddress,useWebSocket:e,isSubscribed:y.current}),k(),console.log("[useBucketCollections] [fetchCollections] Calling getBuckets API...");const P=await f.current.getBuckets(C.walletAddress);console.log("[useBucketCollections] [fetchCollections] Raw API response:",{response:P,responseType:typeof P,isArray:Array.isArray(P),responseLength:Array.isArray(P)?P.length:"N/A"});const T=Array.isArray(P)?P:[];console.log("[useBucketCollections] [fetchCollections] Buckets data after normalization:",{bucketsData:T,bucketsDataLength:T.length,bucketsDataTypes:T.map((D,I)=>({index:I,type:typeof D,hasBucketId:!!(D!=null&&D.bucket_id),bucketId:D==null?void 0:D.bucket_id}))}),console.log(`[useBucketCollections] [fetchCollections] About to transform ${T.length} buckets:`,T);const O=T.map(Cw);i(O),(!e||!y.current)&&(b.current=!1,o(!1))}catch(P){const T=P instanceof Error?P.message:"Failed to load bucket collections";l(T),console.error("[useBucketCollections] [fetchCollections] Failed to fetch bucket collections:",{error:P,errorMessage:T,walletAddress:C.walletAddress,stack:P instanceof Error?P.stack:void 0}),(!e||!y.current)&&(b.current=!1,o(!1))}},[k,e]),_=E.useCallback(C=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] WebSocket data received:",{data:C,hasBuckets:!!C.buckets,bucketsIsArray:Array.isArray(C.buckets),bucketsLength:Array.isArray(C.buckets)?C.buckets.length:0}),C.buckets&&Array.isArray(C.buckets)){console.log("[useBucketCollections] [handleBucketsUpdate] Transforming WebSocket buckets:",C.buckets);const P=C.buckets.map(w);console.log("[useBucketCollections] [handleBucketsUpdate] Transformed collections:",P);const T=P.filter(O=>O.bucketId&&O.bucketId.trim()!==""&&O.status!=="dormant");if(T.length!==P.length){const O=P.length-T.length,D=P.filter(U=>!U.bucketId||U.bucketId.trim()===""),I=P.filter(U=>U.bucketId&&U.bucketId.trim()!==""&&U.status==="dormant");console.warn(`[useBucketCollections] [handleBucketsUpdate] WebSocket: Filtered out ${O} collections (${D.length} with empty bucketId, ${I.length} with status "dormant")`,{filteredByBucketId:D,filteredByStatus:I})}console.log("[useBucketCollections] [handleBucketsUpdate] Setting collections from WebSocket:",{validCollectionsCount:T.length,validCollections:T}),i(O=>{if(console.log("[useBucketCollections] [handleBucketsUpdate] Previous collections:",{prevCount:O.length,prev:O}),O.length!==T.length)return T;const D=JSON.stringify(O),I=JSON.stringify(T);return D===I?O:T}),b.current&&(b.current=!1,o(!1))}},[w]);return E.useEffect(()=>{if(!n.walletAddress||n.walletAddress.trim()===""){if(o(!1),l("Wallet address is required"),i([]),m.current&&y.current){try{m.current.unsubscribeMultiFeedSubChannel("buckets",_)}catch(T){console.warn("[useBucketCollections] Error unsubscribing during cleanup:",T)}y.current=!1}g.current!==null&&(clearInterval(g.current),g.current=0);return}const C=new cr({baseURL:n.baseURL,sessionToken:n.authToken});f.current=C,b.current=!0,y.current=!1,console.log("[useBucketCollections] [useEffect] Initializing, calling fetchCollections..."),S();const P=n.subscriptionClient;if(e){m.current=P;const T=()=>{if(!P.isReadyForSubscriptions()){if(P.isConnected()&&!P.isReadyForSubscriptions()){const B=P.getAuthState();B==="pending"?console.debug("[useBucketCollections] Waiting for authentication to complete..."):B==="failed"&&(console.error("[useBucketCollections] Authentication failed - cannot subscribe to buckets"),l("Authentication failed. Please re-authenticate."))}return}const D=String(n.marketId??"0"),I=n.symbol??"USDC/USDC";if(!y.current){if(y.current&&m.current)try{m.current.unsubscribeMultiFeedSubChannel("buckets",_)}catch(B){console.warn("[useBucketCollections] Error unsubscribing from previous buckets subscription:",B)}try{P.subscribeMultiFeedSubChannel("buckets",D,_,{symbol:I}),y.current=!0,o(!1),console.debug("[useBucketCollections] Subscribed to buckets:",{marketId:D,symbol:I})}catch(B){console.error("[useBucketCollections] Failed to subscribe to buckets:",B),l(B instanceof Error?B.message:"Failed to subscribe to buckets"),y.current=!1,o(!1)}}};d(P.isConnected()),o(!1),P.isReadyForSubscriptions()&&T();const O=P.onStateChange(D=>{console.debug("[useBucketCollections] WebSocket state changed to:",D),d(D===kt.Connected),D===kt.Connected?(T(),g.current!==null&&(clearInterval(g.current),g.current=0)):D===kt.Disconnected&&n.refreshInterval&&n.refreshInterval>0&&g.current===null&&(g.current=window.setInterval(()=>{S()},n.refreshInterval))});return()=>{if(O&&O(),m.current&&y.current)try{m.current.unsubscribeMultiFeedSubChannel("buckets",_)}catch(D){console.warn("[useBucketCollections] Error unsubscribing during cleanup:",D)}g.current!==null&&(clearInterval(g.current),g.current=0),y.current=!1}}else return n.refreshInterval&&n.refreshInterval>0&&(g.current=window.setInterval(()=>{S()},n.refreshInterval)),()=>{g.current!==null&&(clearInterval(g.current),g.current=0)}},[n.subscriptionClient,n.baseURL,n.authToken,n.walletAddress,n.refreshInterval,n.marketId,n.symbol,e,_]),E.useEffect(()=>{console.log("[useBucketCollections] [useEffect] Hook state changed, returning:",{collectionsCount:r.length,collections:r,loading:s,error:a,spotWalletBalance:c})},[r,s,a,c]),{collections:r,loading:s,error:a,refreshBucketBalance:S,refreshSpotWalletBalance:k,spotWalletBalance:c,isConnected:h}}function Qve(n,e,r){return e!==n?p.jsx("span",{style:{fontSize:"0.7rem",opacity:.5,marginLeft:"0.25rem"},children:""}):p.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"0.25rem"},children:r==="asc"?"":""})}function Zp({message:n="Loading..."}){return p.jsx("div",{className:"message loading",children:n})}function em({error:n}){return p.jsxs("div",{className:"message error",children:["Error: ",n]})}function bl({message:n}){return p.jsx("div",{className:"message empty",children:n})}function Bee({message:n}){return p.jsx("div",{className:"message warning",children:n})}function e3({isConnected:n,connectedText:e=" LIVE",disconnectedText:r=" OFFLINE"}){return p.jsx("div",{className:"status-indicator",children:p.jsx("span",{className:`status-dot ${n?"connected":"disconnected"}`,children:n?e:r})})}function tm({title:n,children:e}){return p.jsxs("div",{className:"layout-header",children:[p.jsx("div",{className:"layout-header-title",children:n}),e&&p.jsx("div",{className:"layout-header-actions",children:e})]})}function Ar({field:n,currentSortField:e,sortDirection:r,onSort:i,children:s,center:o=!1}){return p.jsxs("div",{className:`table-header-cell ${o?"left":"right"}`,onClick:()=>i(n),children:[s,Qve(n,e,r)]})}function FI({children:n,center:e=!1}){return p.jsx("div",{className:`table-header-cell ${e?"left":"right"}`,children:n})}function Jve({onClick:n,disabled:e}){return console.log("[CancelButton] Rendering",{disabled:e,hasOnClick:!!n}),p.jsx("button",{onClick:r=>{console.log("[CancelButton] Button clicked",{disabled:e,event:r}),!e&&n?n(r):console.warn("[CancelButton] Click ignored - button is disabled",{disabled:e})},onMouseDown:r=>{console.log("[CancelButton] Mouse down",{disabled:e,event:r})},className:"btn btn-danger",disabled:e,style:{pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"},children:"Cancel"})}function Zve({onClick:n}){return p.jsx("button",{onClick:n,className:"btn btn-success",children:"Close"})}function exe({onConfirm:n,label:e="Slide to confirm",confirmThreshold:r=90,disabled:i=!1,icon:s}){const[o,a]=E.useState(0),[l,c]=E.useState(!1),u=E.useRef(null),h=E.useRef(null),d=m=>{i||(m.preventDefault(),c(!0))};E.useEffect(()=>{if(!l)return;const m=b=>{if(!u.current||i)return;const y=u.current.getBoundingClientRect(),v=b.clientX-y.left,w=y.width,k=Math.max(0,Math.min(100,v/w*100));a(k)},g=()=>{i||(o>=r?(n(),setTimeout(()=>{a(0)},200)):a(0),c(!1))};return document.addEventListener("mousemove",m),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)}},[l,o,r,n,i]);const f=o>=r;return p.jsxs("div",{ref:u,className:`slider-confirm-bar ${i?"disabled":""} ${l?"dragging":""}`,children:[p.jsx("div",{className:`slider-confirm-bar-progress ${f?"confirmed":"default"} ${l?"no-transition":""}`,style:{width:`${o}%`}}),p.jsx("div",{className:"slider-confirm-bar-label",children:f?"Release to confirm":e}),p.jsx("div",{ref:h,onMouseDown:d,className:`slider-confirm-bar-thumb ${i?"disabled":""} ${l?"dragging":""} ${f?"confirmed":""}`,style:{left:`${o}%`},children:s?p.jsx("span",{className:`slider-confirm-bar-thumb-icon ${f?"confirmed":""}`,children:s}):p.jsx("span",{className:`slider-confirm-bar-thumb-arrow ${f?"confirmed":""}`,children:""})})]})}function zee({isOpen:n,value:e,min:r,max:i,onConfirm:s,onCancel:o}){const[a,l]=E.useState("");if(E.useEffect(()=>{n&&l(e.toString())},[n,e]),!n)return null;const c=y=>{const v=a==="0"?y:a+y;parseFloat(v)<=i&&l(v)},u=()=>{a.includes(".")||l(a+".")},h=()=>{a.length>1?l(a.slice(0,-1)):l("0")},d=()=>{l("0")},f=()=>{const y=parseFloat(a)||0,v=Math.max(r,Math.min(i,y));s(v)},m=parseFloat(a)||0,g=m>=r&&m<=i,b=p.jsx("div",{className:"modal-overlay",onClick:o,style:{zIndex:1e4},children:p.jsxs("div",{className:"modal-content number-pad-content",onClick:y=>y.stopPropagation(),children:[p.jsx("div",{className:"modal-header",children:p.jsx("h3",{children:"Enter Amount"})}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"number-pad-display",children:[p.jsx("div",{className:"number-pad-display-value",children:Hn(m)}),p.jsxs("div",{className:"number-pad-display-range",children:["Min: ",Hn(r)," | Max: ",Hn(i)]}),!g&&m>0&&p.jsxs("div",{className:"number-pad-display-error",children:["Value must be between ",Hn(r)," and"," ",Hn(i)]})]}),p.jsxs("div",{className:"number-pad-grid",children:[p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"1"),children:"1"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"2"),children:"2"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"3"),children:"3"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"4"),children:"4"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"5"),children:"5"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"6"),children:"6"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"7"),children:"7"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"8"),children:"8"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"9"),children:"9"}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:u,children:"."}),p.jsx("button",{type:"button",className:"number-pad-button",onClick:c.bind(null,"0"),children:"0"}),p.jsx("button",{type:"button",className:"number-pad-button number-pad-button-action",onClick:h,children:""})]}),p.jsxs("div",{className:"number-pad-actions",children:[p.jsx("button",{type:"button",className:"number-pad-action-button",onClick:d,children:"Clear"}),p.jsx("button",{type:"button",className:"number-pad-action-button number-pad-action-button-max",onClick:()=>{l(i.toString())},children:"Max"})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Cancel"}),p.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!g,children:"Confirm"})]})]})});return typeof document<"u"?ba.createPortal(b,document.body):null}function txe({isOpen:n,currentLeverage:e,tempLeverage:r,maxRatio:i,onLeverageChange:s,onConfirm:o,onCancel:a}){if(!n)return null;const l=p.jsx("div",{className:"modal-overlay",onClick:a,children:p.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[p.jsx("div",{className:"modal-header",children:p.jsx("h3",{children:"Select Leverage"})}),p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"leverage-max-ratio",children:[p.jsx("div",{className:"leverage-max-ratio-label",children:"Maximum Ratio"}),p.jsxs("div",{className:"leverage-max-ratio-value",children:[i,"x"]})]}),p.jsxs("div",{className:"leverage-slider-container",children:[p.jsx("input",{type:"range",min:Mk,max:nF,value:r,onChange:c=>s(parseInt(c.target.value)),className:"filled-slider",style:{"--slider-progress":`${(r-Mk)/(nF-Mk)*100}%`}}),p.jsxs("div",{className:"leverage-slider-labels",children:[p.jsx("span",{children:"1x"}),p.jsxs("span",{className:"leverage-current-value",children:[r,"x"]}),p.jsx("span",{children:"100x"})]})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"}),p.jsx("button",{onClick:o,className:"btn btn-primary",children:"Confirm"})]})]})});return typeof document<"u"?ba.createPortal(l,document.body):null}function nxe({isOpen:n,fromValue:e,toValue:r,options:i,bucketsData:s,transferAmount:o,createBucketAmount:a,createBucketType:l,createMarginType:c,transferMarginType:u,onFromChange:h,onToChange:d,onTransferAmountChange:f,onCreateBucketAmountChange:m,onCreateBucketTypeChange:g,onCreateMarginTypeChange:b,onTransferMarginTypeChange:y,onConfirm:v,onCancel:w,spotWalletBalance:k=0,activeTab:S,onActiveTabChange:_,isTransferring:C=!1,onOpen:P,collections:T}){const[O,D]=E.useState("transfer"),I=S??O,U=_??D,B=E.useRef(!1),[z,j]=E.useState(!1),[F,N]=E.useState("transfer"),[R,W]=E.useState(!1);E.useEffect(()=>{n&&!B.current&&P&&P(),B.current=n,n||W(!1)},[n,P,I]);const Y=E.useMemo(()=>e==="spot-wallet"?null:s.find(ie=>ie.bucketId===e),[s,e]);E.useMemo(()=>{var Pe;if(e==="spot-wallet"||!T)return null;const ie=T.find(ke=>ke.bucketId===e);return((Pe=ie==null?void 0:ie.marginType)==null?void 0:Pe.toLowerCase())||null},[T,e]);const K=E.useMemo(()=>e==="spot-wallet"?k:(Y==null?void 0:Y.totalEquity)||0,[e,k,Y]),H=10,Q=Math.max(H,K);if(Ke.useEffect(()=>{if(e&&Q>0){const ie=I==="transfer"?o:a;ie>Q?I==="transfer"?f(Q):m(Q):ie<H&&Q>=H&&(I==="transfer"?f(H):m(H))}},[e,Q,I,o,a,f,m]),!n)return null;const G=e&&r&&o>=H&&o<=Q,X=e&&a>=H&&a<=Q&&l&&c,de=p.jsx("div",{className:"modal-overlay",onClick:w,children:p.jsxs("div",{className:"modal-content transfer-modal-content",onClick:ie=>ie.stopPropagation(),children:[p.jsx("div",{className:"modal-header",children:p.jsx("h3",{children:"Transfer Funds"})}),p.jsxs("div",{className:"transfer-modal-tabs",children:[p.jsx("button",{className:`transfer-tab ${I==="transfer"?"active":""}`,onClick:()=>U("transfer"),type:"button",disabled:C,children:"Transfer"}),p.jsx("button",{className:`transfer-tab ${I==="create"?"active":""}`,onClick:()=>U("create"),type:"button",disabled:C,children:"Create Bucket"})]}),p.jsx("div",{className:"modal-body",children:I==="transfer"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"transfer-field-group",children:[p.jsx("label",{className:"transfer-field-label",children:"From"}),p.jsxs("select",{value:e,onChange:ie=>h(ie.target.value),className:"transfer-select",children:[p.jsx("option",{value:"",children:"Select source bucket"}),i.map(ie=>p.jsx("option",{value:ie.value,children:ie.label},ie.value))]})]}),e&&p.jsxs("div",{className:"transfer-field-group",children:[p.jsx("label",{className:"transfer-field-label",children:"To"}),p.jsxs("select",{value:r,onChange:ie=>d(ie.target.value),className:"transfer-select",disabled:!e,children:[p.jsx("option",{value:"",children:"Select destination bucket"}),i.filter(ie=>ie.value!==e).map(ie=>p.jsx("option",{value:ie.value,children:ie.label},ie.value))]})]}),e&&Q>=H?p.jsxs("div",{className:"transfer-field-group",children:[p.jsxs("div",{className:"transfer-amount-header",children:[p.jsx("label",{className:"transfer-field-label",children:"Amount"}),p.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Hn(K)]})]}),p.jsx("div",{className:"transfer-amount-display",onClick:()=>{N("transfer"),j(!0)},style:{cursor:"pointer"},children:p.jsx("span",{className:"transfer-amount-value",children:Hn(o)})}),p.jsxs("div",{className:"transfer-amount-container",children:[p.jsx("input",{type:"range",min:H,max:Q,step:.01,value:o,onChange:ie=>f(parseFloat(ie.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(o-H)/(Q-H)*100}%`}}),p.jsxs("div",{className:"transfer-amount-labels",children:[p.jsx("span",{children:Hn(H)}),p.jsx("span",{children:Hn(Q)})]})]})]}):e?p.jsx("div",{className:"transfer-field-group",children:p.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",Hn(H)]})}):null]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"transfer-field-group",children:[p.jsx("label",{className:"transfer-field-label",children:"From"}),p.jsxs("select",{value:e,onChange:ie=>h(ie.target.value),className:"transfer-select",children:[p.jsx("option",{value:"",children:"Select source bucket"}),i.map(ie=>p.jsx("option",{value:ie.value,children:ie.label},ie.value))]})]}),p.jsxs("div",{className:"transfer-field-group",children:[p.jsx("label",{className:"transfer-field-label",children:"Bucket Type"}),p.jsxs("select",{value:l,onChange:ie=>g(ie.target.value),className:"transfer-select",children:[p.jsx("option",{value:"",children:"Select bucket type"}),p.jsx("option",{value:"USDC",children:"USDC"}),p.jsx("option",{value:"USDT",children:"USDT"})]})]}),p.jsxs("div",{className:"transfer-field-group",children:[p.jsx("label",{className:"transfer-field-label",children:"Margin Type"}),p.jsxs("select",{value:c,onChange:ie=>b(ie.target.value),className:"transfer-select",children:[p.jsx("option",{value:"",children:"Select margin type"}),p.jsx("option",{value:"cross",children:"Cross Margin"}),p.jsx("option",{value:"isolated",children:"Isolated Margin"})]})]}),e&&Q>=H?p.jsxs("div",{className:"transfer-field-group",children:[p.jsxs("div",{className:"transfer-amount-header",children:[p.jsx("label",{className:"transfer-field-label",children:"Amount"}),p.jsxs("div",{className:"transfer-available-balance",children:["Available: ",Hn(K)]})]}),p.jsx("div",{className:"transfer-amount-display",onClick:()=>{N("create"),j(!0)},style:{cursor:"pointer"},children:p.jsx("span",{className:"transfer-amount-value",children:Hn(a)})}),p.jsxs("div",{className:"transfer-amount-container",children:[p.jsx("input",{type:"range",min:H,max:Q,step:.01,value:a,onChange:ie=>m(parseFloat(ie.target.value)),className:"transfer-amount-slider",style:{"--slider-progress":`${(a-H)/(Q-H)*100}%`}}),p.jsxs("div",{className:"transfer-amount-labels",children:[p.jsx("span",{children:Hn(H)}),p.jsx("span",{children:Hn(Q)})]})]})]}):e?p.jsx("div",{className:"transfer-field-group",children:p.jsxs("div",{className:"transfer-insufficient-funds",children:["Insufficient funds. Minimum required:"," ",Hn(H)]})}):null]})}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{onClick:w,className:"btn btn-secondary",disabled:C,children:"Cancel"}),p.jsxs("div",{style:{flex:1,position:"relative",minHeight:"48px"},children:[p.jsx("div",{className:"slider-confirm-container",style:{position:"absolute",top:0,left:0,right:0,opacity:R?0:1,visibility:R?"hidden":"visible",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:R?"none":"auto"},children:p.jsx(exe,{onConfirm:()=>{W(!0)},label:"Slide to confirm",disabled:C||(I==="transfer"?!G:!X),icon:p.jsx("img",{src:"/bconfirm.svg"})})}),p.jsx("button",{onClick:()=>{v(I==="transfer"?{type:"transfer",from:e,to:r,amount:o}:{type:"create",from:e,bucketType:l,marginType:c,amount:a})},className:"btn btn-primary",disabled:C||(I==="transfer"?!G:!X),style:{position:"absolute",top:0,right:0,opacity:R?1:0,visibility:R?"visible":"hidden",transition:"opacity 0.3s ease, visibility 0.3s ease",pointerEvents:R?"auto":"none",width:"100%",height:"100%",color:"black"},children:C?"Processing...":"Confirm"})]})]})]})}),ye=F==="transfer"?o:a,se=ie=>{F==="transfer"?f(ie):m(ie),j(!1)};return p.jsxs(p.Fragment,{children:[typeof document<"u"?ba.createPortal(de,document.body):null,p.jsx(zee,{isOpen:z,value:ye,min:H,max:Q,onConfirm:se,onCancel:()=>j(!1)})]})}function rxe({baseURL:n=Jp,subscriptionClient:e,authToken:r,walletAddress:i,mnemonic:s,height:o=nbe,refreshInterval:a=HN,onBucketSelect:l}){const{collections:c,loading:u,error:h,spotWalletBalance:d,isConnected:f,refreshBucketBalance:m}=$ee({subscriptionClient:e,baseURL:n,authToken:r,walletAddress:i,refreshInterval:a}),[g,b]=E.useState(null),[y,v]=E.useState("desc"),[w,k]=E.useState(""),[S,_]=E.useState(!1),[C,P]=E.useState(""),[T,O]=E.useState(""),[D,I]=E.useState(10),[U,B]=E.useState(10),[z,j]=E.useState(""),[F,N]=E.useState("cross"),[R,W]=E.useState("cross"),[Y,K]=E.useState("transfer"),[H,Q]=E.useState(!1),[G,X]=E.useState("non-zero"),de=E.useRef(null),ye=E.useRef(0),se=E.useMemo(()=>{let qe=c.filter(we=>we&&we.bucketId&&typeof we.bucketId=="string"&&we.bucketId.trim()!=="");return G==="non-zero"?qe=qe.filter(we=>(we.totalEquity||0)>0):G==="dormant"?qe=qe.filter(we=>{var ze;return((ze=we.status)==null?void 0:ze.toLowerCase())==="dormant"}):G==="active"&&(qe=qe.filter(we=>{var ze;return((ze=we.status)==null?void 0:ze.toLowerCase())==="active"})),g?[...qe].sort((we,ze)=>{let Me=0,Ie=0;switch(g){case"marginType":Me=sf(we),Ie=sf(ze);break;case"usedMargin":Me=we.usedMargin||0,Ie=ze.usedMargin||0;break;case"totalEquity":Me=we.totalEquity||0,Ie=ze.totalEquity||0;break;case"riskRatio":Me=Sx(we),Ie=Sx(ze);break;case"bucketId":Me=we.bucketId||"",Ie=ze.bucketId||"";break}if(typeof Me=="string"&&typeof Ie=="string")return y==="asc"?Me.localeCompare(Ie):Ie.localeCompare(Me);const Ce=Number(Me),xe=Number(Ie);return y==="asc"?Ce-xe:xe-Ce}):qe},[c,g,y,G]),ie=(qe,we)=>{const ze=qe.toLowerCase(),Me=we.toUpperCase();return se.find(Ie=>{var ce,ge;const Ce=(ce=sf(Ie))==null?void 0:ce.toLowerCase(),xe=(ge=Ie.collateralAsset)==null?void 0:ge.toUpperCase(),L=Ie.status.toLowerCase()==="dormant",re=(Ie.totalEquity||0)<=0;return(L||re)&&Ce===ze&&(Me?xe===Me:!0)})||null},Pe=qe=>{g===qe?v(y==="asc"?"desc":"asc"):(b(qe),v("desc"))},ke=(qe,we)=>{l&&l(qe,we),k(qe)},q=()=>{_(!0),P(""),O(""),I(10),B(10),j(""),N("cross"),W("cross"),K("transfer")},Ee=()=>{_(!1),P(""),O(""),I(10),B(10),j(""),N("cross"),W("cross"),K("transfer")},Je=()=>{X(qe=>{switch(qe){case"non-zero":return"active";case"active":return"dormant";case"dormant":return"all";case"all":return"non-zero";default:return"non-zero"}})};E.useEffect(()=>{if(!s||!n){de.current=null;return}const qe=new iu({baseURL:n,mnemonic:s});qe.initialize().then(()=>{de.current=qe}).catch(we=>{const ze=we instanceof Error?we.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",we),ht.error("Exchange client initialization failed",{description:ze,action:Kr(ze)}),de.current=null})},[s,n]);const ct=async qe=>{if(!s){const Me="Mnemonic is required to perform transfers. Please provide a mnemonic to enable transfer functionality.";ht.error("Mnemonic required",{description:Me,action:Kr(Me)});return}const we=de.current;if(!we){const Me="Exchange client is still initializing. Please wait a moment and try again.";ht.error("Exchange client not ready",{description:Me,action:Kr(Me)});return}Q(!0);const ze=ht.loading("Processing transfer...",{description:"Please wait while the transfer is being processed"});ye.current=typeof ze=="number"?ze:0;try{const Me="USDC";let Ie,Ce="";if(qe.type==="transfer"){const{from:xe,to:L,amount:re}=qe;if(xe==="spot-wallet"&&L==="spot-wallet")throw new Error("Cannot transfer from spot wallet to spot wallet");if(xe==="spot-wallet"){if(!L||L==="spot-wallet")throw new Error("Please select a destination bucket");if(Ie=await we.extractToBucket({bucketId:L,assetId:Me,amount:re}),!Ie.success){const le=Ie.error_message||"Failed to transfer to bucket";ye.current!==0&&(ht.dismiss(ye.current),ye.current=0),ht.error("Transfer failed",{description:le,action:Kr(le)});return}const fe=Ie.txhash||"";Ce=`Successfully transferred ${Hn(re)} from Spot Wallet to ${L}${fe?`
TxHash: ${fe}`:""}`}else if(L==="spot-wallet"){Ie=await we.withdrawFromBucket({bucketId:xe,assetId:Me,amount:re});const fe=Ie.txhash||"";Ce=`Successfully transferred ${Hn(re)} from ${xe} to Spot Wallet${fe?`
TxHash: ${fe}`:""}`}else{if(!L)throw new Error("Please select a destination bucket");Ie=await we.bucketTransfer({fromBucketId:xe,toBucketId:L,assetId:Me,amount:re});const fe=Ie.txhash||"";Ce=`Successfully transferred ${Hn(re)} from ${xe} to ${L}${fe?`
TxHash: ${fe}`:""}`}}else{const{from:xe,bucketType:L,marginType:re,amount:fe}=qe,le=ie(re,L);let ce;if(le)ce=le.bucketId,console.log(`[BucketCollection] Using existing ${re} ${L} bucket: ${ce}`),Ce=`Using existing ${re} margin bucket (${L}): ${ce}`;else{const ge=await we.createBucket({bucketType:L,marginType:re});if(!ge.success)throw new Error(ge.message||"Failed to create bucket");ce=ge.bucket_id,console.log(`[BucketCollection] Created new ${re} ${L} bucket: ${ce}`),Ce=`Successfully created ${re} margin bucket (${L})`}if(fe>0&&xe==="spot-wallet"){const ge=await we.extractToBucket({bucketId:ce,assetId:L,amount:fe});if(!ge.success)throw new Error(`${le?"Bucket found":"Bucket created"} but failed to transfer funds: ${ge.error_message||"Unknown error"}`);const J=ge.txhash||"";Ce=`${le?"Using existing":"Successfully created"} ${re} margin bucket (${L}) and transferred ${Hn(fe)}${J?`
TxHash: ${J}`:""}`}else if(fe>0&&xe!=="spot-wallet"){const ge=await we.bucketTransfer({fromBucketId:xe,toBucketId:ce,assetId:L,amount:fe});if(!ge.success)throw new Error(`${le?"Bucket found":"Bucket created"} but failed to transfer funds: ${ge.message||"Unknown error"}`);const J=ge.txhash||"";Ce=`${le?"Using existing":"Successfully created"} ${re} margin bucket (${L}) and transferred ${Hn(fe)}${J?`
TxHash: ${J}`:""}`}}console.log("Transfer successful:",Ie),ye.current!==0&&(ht.dismiss(ye.current),ye.current=0),ht.success("Transfer completed",{description:Ce}),_(!1),P(""),O(""),I(10),B(10),j(""),N("cross"),W("cross"),await new Promise(xe=>setTimeout(xe,1e3)),m()}catch(Me){ye.current!==0&&(ht.dismiss(ye.current),ye.current=0);const Ie=Me instanceof Error?Me.message:"Transfer failed";ht.error("Transfer failed",{description:Ie,action:Kr(Ie)}),console.error("Transfer error:",Me)}finally{Q(!1)}},$e=E.useMemo(()=>{const qe=se.map(we=>({value:we.bucketId,label:`${we.bucketId} (${Hn(we.totalEquity)})`}));return[{value:"spot-wallet",label:`Spot Wallet (${Hn(d)})`},...qe]},[se,d]),ut=E.useMemo(()=>se.map(qe=>({bucketId:qe.bucketId,totalEquity:qe.totalEquity})),[se]);return!i||i.trim()===""?p.jsx(Bee,{message:"Wallet address required to view bucket collections"}):u&&!S&&c.length===0?p.jsx(Zp,{message:"Loading bucket collections..."}):h?p.jsx(em,{error:h}):p.jsxs("div",{className:"layout-container",style:{height:o},children:[p.jsxs(tm,{title:"BUCKET COLLECTIONS",children:[p.jsx("div",{onClick:Je,className:"btn-tab",title:G==="non-zero"?"Click to show active buckets":G==="active"?"Click to show dormant buckets":G==="dormant"?"Click to show all buckets":"Click to show non-zero balance buckets",children:p.jsx("span",{children:G==="all"?"All":G==="non-zero"?"Non-Zero":G==="dormant"?"Dormant":"Active"})}),p.jsxs("div",{onClick:q,className:"btn-tab",children:[p.jsx("img",{src:"/transfer-repu.svg"}),p.jsx("span",{children:"Transfer"})]}),!f&&p.jsxs("div",{onClick:async()=>{m&&await m()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh bucket collections",children:[p.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),p.jsx("span",{children:"Refresh"})]})]}),p.jsxs("div",{className:"table-container shrinkable",children:[p.jsxs("div",{className:"table-header",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[p.jsx(Ar,{field:"bucketId",currentSortField:g,sortDirection:y,onSort:Pe,left:!0,children:"Bucket ID"}),p.jsx(Ar,{field:"marginType",currentSortField:g,sortDirection:y,onSort:Pe,children:"Margin Type"}),p.jsx(Ar,{field:"usedMargin",currentSortField:g,sortDirection:y,onSort:Pe,children:"Used Margin"}),p.jsx(Ar,{field:"totalEquity",currentSortField:g,sortDirection:y,onSort:Pe,children:"Total Equity"}),p.jsx(Ar,{field:"riskRatio",currentSortField:g,sortDirection:y,onSort:Pe,left:!1,children:"Risk Ratio"})]}),se.length===0?p.jsx(bl,{message:c.length===0?"No bucket collections found. Make sure your wallet address is correct and has buckets.":`Filtered out all ${c.length} collections (invalid data structure)`}):se.map((qe,we)=>{const ze=Sx(qe),Me=sf(qe);return p.jsxs("div",{onClick:()=>ke(qe.bucketId,qe.availableMargin),className:`table-row clickable ${we%2===0?"even":""} ${w===qe.bucketId?"selected":""}`,style:{gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr"},children:[p.jsx("div",{className:"table-cell primary",children:qe.bucketId||"---"}),p.jsx("div",{className:"table-cell",children:Me.toUpperCase()}),p.jsx("div",{className:"table-cell right monospace",children:Hn(qe.usedMargin||0)}),p.jsx("div",{className:"table-cell right monospace",children:Hn(qe.totalEquity||0)}),p.jsx("div",{className:"table-cell right monospace",style:{color:ze>.5?"#ff6b6b":"#51cf66",fontWeight:500},children:G0(ze)})]},`collection-${qe.bucketId}-${we}`)})]}),p.jsx(nxe,{isOpen:S,fromValue:C,toValue:T,options:$e,bucketsData:ut,transferAmount:D,createBucketAmount:U,createBucketType:z,createMarginType:F,transferMarginType:R,onFromChange:P,onToChange:O,onTransferAmountChange:I,onCreateBucketAmountChange:B,onCreateBucketTypeChange:j,onCreateMarginTypeChange:N,onTransferMarginTypeChange:W,onConfirm:ct,onCancel:Ee,spotWalletBalance:d,activeTab:Y,onActiveTabChange:K,isTransferring:H,onOpen:m,collections:se.map(qe=>({bucketId:qe.bucketId,marginType:qe.marginType}))})]})}const ixe=Ke.memo(rxe);function sxe({title:n="Dummy Component",message:e="This is a dummy component",height:r}){const[i,s]=E.useState(0);return p.jsxs("div",{className:"layout-container",style:{height:r},children:[p.jsx("div",{className:"layout-header",children:p.jsx("div",{className:"layout-header-title",children:n})}),p.jsxs("div",{style:{padding:"1rem",flex:1},children:[p.jsx("p",{className:"color-text-secondary",children:e}),p.jsxs("div",{style:{marginTop:"1rem"},children:[p.jsxs("p",{className:"color-text-primary",children:["Count: ",i]}),p.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[p.jsx("button",{className:"btn btn-success",onClick:()=>s(i+1),children:"Increment"}),p.jsx("button",{className:"btn btn-danger",onClick:()=>s(0),children:"Reset"})]})]})]})]})}const oxe=Ke.memo(sxe);function Uk(n){return n.orderId}function t3(n){const e=n.useWebSocket!==!1,[r,i]=E.useState([]),[s,o]=E.useState(!0),[a,l]=E.useState(null),[c,u]=E.useState(!1),h=E.useRef(null),d=E.useRef(null),f=E.useRef(!1),m=E.useRef(!1),g=E.useRef(n.walletAddress),b=E.useRef(n);b.current=n;const y=E.useCallback(async()=>{if(!h.current)return;const w=b.current;if(!w.walletAddress||w.walletAddress.trim()===""){l(null),i([]),o(!1);return}l(null);try{const S=(await o_(GN.http,()=>h.current.getOrders(w.walletAddress))).orders||[];if(S.length>0){const _=S.map(RI);i(C=>{if(C.length!==_.length)return _;const P=JSON.stringify(C),T=JSON.stringify(_);return P===T?C:_})}else i(_=>_.length===0?_:[])}catch(k){const S=k instanceof Error?k.message:"Failed to load orders";l(S),console.error("Failed to fetch orders after retries:",k)}finally{o(!1)}},[]),v=E.useCallback(w=>{let k=[];if("orders"in w&&Array.isArray(w.orders))k=w.orders;else if("order_id"in w)k=[w];else{console.warn("Received invalid order data, skipping:",w);return}i(S=>{const _=new Map;S.forEach(O=>{const D=Uk(O);D&&_.set(D,O)});for(const O of k){if(!O||typeof O!="object"||!("order_id"in O)||typeof O.order_id!="string"||O.order_id.length===0){console.warn("Received invalid order data, skipping:",O);continue}const D=RI(O),I=Uk(D);if(!I){console.warn("Received order without ID, skipping:",D);continue}const U=D.status.toUpperCase();U==="FILLED"||U==="CANCELLED"||U==="REJECTED"||U==="EXPIRED"||U==="CLOSED"||U==="DONE"?_.delete(I):_.set(I,D)}const C=Array.from(_.values()).filter(O=>Uk(O)!==void 0);if(S.length!==C.length)return C;const P=JSON.stringify(S),T=JSON.stringify(C);return P===T?S:C})},[]);return E.useEffect(()=>{if(n.walletAddress!==g.current&&(m.current=!1,g.current=n.walletAddress),!n.walletAddress||n.walletAddress.trim()===""){o(!1),l(null),i([]),d.current&&(d.current.disconnect(),d.current=null),m.current=!1;return}const w=new cr({baseURL:n.baseURL,sessionToken:n.authToken});h.current=w,m.current||y().finally(()=>{m.current=!0});const k=n.subscriptionClient;if(e){d.current=k;const S=()=>{if(!k.isReadyForSubscriptions()){if(k.isConnected()&&!k.isReadyForSubscriptions()){const O=k.getAuthState();O==="pending"?console.debug("[usePendingOrders] Waiting for authentication to complete..."):O==="failed"&&(console.error("[usePendingOrders] Authentication failed - cannot subscribe to orders"),l("Authentication failed - cannot subscribe to orders"))}return}const C=n.marketId??"0",P="USDC/USDC";if(!f.current||n.marketId!==void 0&&n.marketId!==C){if(f.current&&d.current)try{d.current.unsubscribeMultiFeedSubChannel("orders",v)}catch(O){console.warn("[usePendingOrders] Error unsubscribing from previous orders subscription:",O)}try{k.subscribeMultiFeedSubChannel("orders",C,v,{symbol:P}),f.current=!0,o(!1),console.debug("[usePendingOrders] Subscribed to orders:",{marketId:C,symbol:P})}catch(O){console.error("[usePendingOrders] Failed to subscribe to orders:",O),l(O instanceof Error?O.message:"Failed to subscribe to orders"),f.current=!1,o(!1)}}};u(k.isConnected()),o(!1),k.isReadyForSubscriptions()&&S();const _=k.onStateChange(C=>{console.debug("[usePendingOrders] WebSocket state changed to:",C),u(C===kt.Connected),C===kt.Connected?S():C===kt.Disconnected||kt.Reconnecting});return()=>{if(_&&_(),d.current&&f.current)try{d.current.unsubscribeMultiFeedSubChannel("orders",v)}catch(C){console.warn("[usePendingOrders] Error unsubscribing during cleanup:",C)}f.current=!1}}else return()=>{}},[n.subscriptionClient,n.baseURL,n.authToken,n.walletAddress,n.marketId,e]),{orders:r,loading:s,error:a,isConnected:c,refresh:y}}function axe({baseURL:n=Jp,subscriptionClient:e,authToken:r,walletAddress:i,mnemonic:s,height:o=ibe,refreshInterval:a=HN}){const{orders:l,loading:c,error:u,isConnected:h,refresh:d}=t3({subscriptionClient:e,baseURL:n,authToken:r,walletAddress:i,refreshInterval:a}),f=E.useRef(null),m=E.useRef(0),[g,b]=E.useState(null),{getSymbolByMarketId:y}=ya({baseURL:n,sessionToken:r,autoFetchMarkets:!1}),[v,w]=E.useState(Gl),[k,S]=E.useState(null),[_,C]=E.useState(xf),P=E.useMemo(()=>l.filter(j=>{const F=j.status.toUpperCase(),N=F.startsWith("ORDER_STATUS_")?F:`ORDER_STATUS_${F}`;return v===Gl?vF.some(R=>F===R.toUpperCase()||N===R.toUpperCase()):!vF.some(R=>F===R.toUpperCase()||N===R.toUpperCase())}),[l,v]),T=E.useMemo(()=>k?[...P].sort((j,F)=>{let N=0,R=0;switch(k){case hF:N=y(j.marketId)||`m-${j.marketId}`,R=y(F.marketId)||`m-${F.marketId}`;break;case fF:N=j.side,R=F.side;break;case pF:N=j.quantity,R=F.quantity;break;case mF:N=j.price,R=F.price;break;case gF:N=j.filledQuantity||0,R=F.filledQuantity||0;break;case bF:N=j.status,R=F.status;break}if(typeof N=="string"&&typeof R=="string")return _===Tc?N.localeCompare(R):R.localeCompare(N);const W=Number(N),Y=Number(R);return isNaN(W)||isNaN(Y)?0:_===Tc?W-Y:Y-W}):P,[P,k,_]),O=j=>{k===j?C(_===Tc?xf:Tc):(S(j),C(xf))},D=j=>j.side,I=j=>{const F=(j||"").toUpperCase(),N={PENDING:{short:"P",full:"Pending",color:xF},OPEN:{short:"O",full:"Open",color:Cbe},FILLED:{short:"F",full:"Filled",color:Ebe},CANCELLED:{short:"C",full:"Canceled",color:Tbe},PARTIAL:{short:"PF",full:"Partially Filled",color:xF}};return N[F]?N[F]:{short:"?",full:j||Bbe,color:Pbe}},U=j=>j===Y0||j==="BUY"?Mbe:Dbe,B=j=>!j||typeof j!="string"?$be:j.replace("ORDER_TYPE_",""),z=async j=>{var W;const F=j.orderId,N=j.marketId;if(!F){const Y="Cannot cancel order without a valid order ID.";ht.error("Order ID is missing",{description:Y,action:Kr(Y)});return}if(!N){const Y="Cannot cancel order without a valid market ID.";ht.error("Market ID is missing",{description:Y,action:Kr(Y)});return}if(!s){const Y=`Please provide the 'mnemonic' prop to the PendingOrders component. Order ID: ${F}`;ht.error("Mnemonic required",{description:Y,duration:5e3,action:Kr(Y)});return}if(typeof s!="string"||s.trim()===""){const Y=`The mnemonic prop is empty or invalid. Please provide a valid mnemonic. Order ID: ${F}`;ht.error("Invalid mnemonic",{description:Y,duration:5e3,action:Kr(Y)});return}if(g){ht.info("Cancellation in progress",{description:"Please wait for the current cancellation to complete."});return}b(F);const R=ht.loading("Canceling order...",{description:`Canceling order ${F}`});m.current=typeof R=="number"?R:0;try{f.current||(f.current=new iu({baseURL:n,mnemonic:s.trim()}),await f.current.initialize());const Y=await f.current.cancelOrder({orderId:F,marketId:N}),K=Y.success===!0||Y.result.success===!0||Y&&!Y.error&&!Y.message;m.current!==0&&(ht.dismiss(m.current),m.current=0);const H=Y.txhash;if(K)ht.success("Order canceled successfully",{description:`Order ${F} has been canceled. TX: ${H}`}),d&&await d();else{const Q=(Y==null?void 0:Y.error)||(Y==null?void 0:Y.message)||((W=Y==null?void 0:Y.response)==null?void 0:W.error)||"Failed to cancel order";throw new Error(Q)}}catch(Y){m.current!==0&&(ht.dismiss(m.current),m.current=0);const H=`${Y instanceof Error?Y.message:"Unknown error occurred"}. Order ID: ${F}`;ht.error("Failed to cancel order",{description:H,duration:6e3,action:Kr(H)})}finally{b(null)}};return!i||i.trim()===""?p.jsx(Bee,{message:jbe}):c?p.jsx(Zp,{message:Obe}):u?p.jsx(em,{error:u}):p.jsxs("div",{className:"layout-container",style:{height:o},children:[p.jsxs(tm,{title:v===Gl?Rbe:Nbe,children:[p.jsxs("div",{className:"btn-tab",children:[p.jsx("span",{style:{fontSize:"0.7rem"},children:""}),p.jsx("span",{children:"Current Symbol"})]}),p.jsxs("div",{onClick:()=>w(v===Gl?yF:Gl),className:`btn-tab ${v===yF?"active":""}`,children:[p.jsx("img",{src:"/transfer-net.svg"}),p.jsx("span",{children:v===Gl?Fbe:Lbe})]}),!h&&p.jsxs("div",{onClick:async()=>{d&&await d()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh orders",children:[p.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),p.jsx("span",{children:"Refresh"})]})]}),p.jsxs("div",{className:"table-container shrinkable",children:[p.jsxs("div",{className:"table-header",style:{gridTemplateColumns:wF},children:[p.jsx(Ar,{field:hF,currentSortField:k,sortDirection:_,onSort:O,children:"Symbol"}),p.jsx(Ar,{field:fF,currentSortField:k,sortDirection:_,onSort:O,children:"Side"}),p.jsx(FI,{center:!0,children:"Type"}),p.jsx(Ar,{field:pF,currentSortField:k,sortDirection:_,onSort:O,children:"Quantity"}),p.jsx(Ar,{field:mF,currentSortField:k,sortDirection:_,onSort:O,children:"Price"}),p.jsx(Ar,{field:gF,currentSortField:k,sortDirection:_,onSort:O,children:"Filled"}),p.jsx(Ar,{field:bF,currentSortField:k,sortDirection:_,onSort:O,children:"Status"}),p.jsx(FI,{center:!0,children:"Actions"})]}),T.length===0?p.jsx(bl,{message:v===Gl?Ibe:Abe}):T.map((j,F)=>{const N=D(j),R=U(N),{short:W,full:Y,color:K}=I(j.status),H=y(j.marketId)||`m-${j.marketId}`;return p.jsxs("div",{className:`table-row ${F%2===0?"even":""}`,style:{gridTemplateColumns:wF},children:[p.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:p.jsx("span",{children:H})}),p.jsx("div",{className:"table-cell center",style:{color:R,fontWeight:500},children:N}),p.jsx("div",{className:"table-cell center",children:B(j.type)}),p.jsx("div",{className:"table-cell right monospace",children:j.quantity}),p.jsx("div",{className:"table-cell right monospace",children:j.price}),p.jsxs("div",{className:"table-cell right monospace",children:[j.filledQuantity," / ",j.quantity]}),p.jsx("div",{className:"table-cell center",style:{color:K,fontWeight:600,cursor:"help",fontSize:"0.9rem"},title:Y,children:W}),p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem"},children:v===Gl?p.jsxs(p.Fragment,{children:[(!s||s.trim()==="")&&p.jsx("span",{style:{fontSize:"0.7rem",color:"#ffc107",cursor:"help"},title:"Mnemonic required to cancel orders",children:""}),p.jsx(Jve,{onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),!s||s.trim()===""||g===j.orderId||!!g||z(j)},disabled:!s||s.trim()===""||g===j.orderId||!!g})]}):p.jsx("span",{className:"color-text-dim",children:""})})]},`order-${j.orderId}`)})]})]})}const lxe=Ke.memo(axe);function cxe({baseURL:n=Jp,subscriptionClient:e,authToken:r,walletAddress:i,mnemonic:s,height:o=rbe,refreshInterval:a=HN,selectedBucketId:l=null}){const{positions:c,loading:u,error:h,isConnected:d,refresh:f}=Nee({subscriptionClient:e,baseURL:n,authToken:r,walletAddress:i,refreshInterval:a}),m=E.useRef(null);E.useEffect(()=>{if(!s||!n){m.current=null;return}const T=new iu({baseURL:n,mnemonic:s});T.initialize().then(()=>{m.current=T}).catch(O=>{const D=O instanceof Error?O.message:"Failed to initialize exchange client";console.error("Failed to initialize ExchangeClient:",O),ht.error("Exchange client initialization failed",{description:D,action:Kr(D)}),m.current=null})},[s,n]);const[g,b]=E.useState(Ak),[y,v]=E.useState(null),[w,k]=E.useState(xf),S=E.useMemo(()=>{let T=[...c];return g===dv&&l&&(T=T.filter(O=>{const D=O.bucketId.toString(),I=l.toString();return D===I})),y?T.sort((O,D)=>{let I=0,U=0;switch(y){case iF:I=O.symbol||"",U=D.symbol||"";break;case sF:try{I=O.leverage??0,U=D.leverage??0}catch{I=0,U=0}break;case oF:I=O.size||0,U=D.size||0;break;case aF:I=O.liquidationPrice||0,U=D.liquidationPrice||0;break;case lF:I=O.unrealizedPnL||0,U=D.unrealizedPnL||0;break;case cF:I=O.entryPrice||0,U=D.entryPrice||0;break;case uF:I=O.margin||0,U=D.margin||0;break}if(typeof I=="string"&&typeof U=="string")return w===Tc?I.localeCompare(U):U.localeCompare(I);const B=Number(I),z=Number(U);return w===Tc?B-z:z-B}):T},[c,y,w,l,g]),_=T=>{y===T?k(w===Tc?xf:Tc):(v(T),k(xf))},C=E.useRef(0),P=async T=>{if(!s){const D="Please provide the 'mnemonic' prop to enable position closing.";ht.error("Mnemonic required",{description:D,action:Kr(D)});return}if(!m.current){const D="Please wait for the exchange client to initialize.";ht.error("Exchange client not ready",{description:D,action:Kr(D)});return}const O=ht.loading("Closing position...",{description:`Closing ${T.side} position for ${T.symbol} (Size: ${Mw(T.size)})`});C.current=typeof O=="number"?O:0;try{const D=await m.current.closePosition({positionId:T.positionId,marketId:T.marketId,marketPrice:T.markPrice,quantity:T.size});C.current!==0&&(ht.dismiss(C.current),C.current=0),ht.success("Position closed successfully",{description:`${T.side} position for ${T.symbol} has been closed. tx: ${D.txhash}`,duration:5e3}),f&&await f()}catch(D){C.current!==0&&(ht.dismiss(C.current),C.current=0);const I=D instanceof Error?D.message:"Unknown error occurred";ht.error("Failed to close position",{description:I,duration:6e3,action:Kr(I)}),console.error("Failed to close position:",D)}};return u?p.jsx(Zp,{message:gbe}):h?p.jsx(em,{error:h}):p.jsxs("div",{className:"layout-container",style:{height:o},children:[p.jsxs(tm,{title:`${ybe} ${g===dv&&l?`(Bucket ${l})`:""}`,children:[p.jsx("div",{onClick:()=>{b(Ak),v(null)},className:`btn-tab ${g===Ak?"active":""}`,children:vbe}),p.jsxs("div",{onClick:()=>{b(dv),v(null)},className:`btn-tab ${g===dv?"active":""}`,children:[p.jsx("img",{src:"/bucket-g.svg"}),p.jsx("span",{children:xbe})]}),!d&&p.jsxs("div",{onClick:async()=>{f&&await f()},className:"btn-tab",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},title:"WebSocket disconnected - Click to refresh positions",children:[p.jsx("img",{src:"/caution-icy.svg",alt:"Warning",style:{width:"1rem",height:"1rem"}}),p.jsx("span",{children:"Refresh"})]})]}),p.jsxs("div",{className:"table-container",children:[p.jsxs("div",{className:"table-header",style:{gridTemplateColumns:dF},children:[p.jsx(Ar,{field:iF,currentSortField:y,sortDirection:w,onSort:_,left:!0,children:"Symbol"}),p.jsx(Ar,{field:sF,currentSortField:y,sortDirection:w,onSort:_,children:"Leverage"}),p.jsx(Ar,{field:oF,currentSortField:y,sortDirection:w,onSort:_,children:"Size"}),p.jsx(Ar,{field:aF,currentSortField:y,sortDirection:w,onSort:_,children:"Liq. Price"}),p.jsx(Ar,{field:lF,currentSortField:y,sortDirection:w,onSort:_,children:"P/L"}),p.jsx(Ar,{field:cF,currentSortField:y,sortDirection:w,onSort:_,children:"Entry Price"}),p.jsx(Ar,{field:uF,currentSortField:y,sortDirection:w,onSort:_,children:"Margin"}),p.jsx(FI,{center:!0,children:"Actions"})]}),S.length===0?p.jsx(bl,{message:bbe}):S.map((T,O)=>{const D=T.side===Y0,I=(T.unrealizedPnL||0)>=0?pbe:mbe,U=Fee(T.leverage,Rk);return p.jsxs("div",{className:`table-row ${O%2===0?"even":""}`,style:{gridTemplateColumns:dF},children:[p.jsx("div",{className:"table-cell primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:p.jsx("span",{children:T.symbol})}),p.jsx("div",{className:"color-buy",style:{fontWeight:500},children:` ${D?Y0:OI}  ${U===Rk?Rk:U}x @ ${T.marginMode||V0}`}),p.jsx("div",{className:"color-buy right monospace",children:Mw(T.size)}),p.jsx("div",{className:"table-cell right monospace",children:Pw(T.liquidationPrice)}),p.jsx("div",{className:"table-cell right monospace",style:{color:I,fontWeight:500},children:Eve(T.unrealizedPnL)}),p.jsx("div",{className:"table-cell right monospace",children:Pw(T.entryPrice)}),p.jsx("div",{className:"table-cell right monospace",children:Cve(T.margin)}),p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:p.jsx(Zve,{onClick:()=>P(T)})})]},`position-${T.marketId}-${O}`)})]})]})}const uxe=Ke.memo(cxe),Uee=E.createContext(null),n3=({children:n,defaultWsURL:e=su,defaultAuthToken:r,defaultWalletAddress:i,defaultDeviceID:s})=>{const[o,a]=E.useState(!1),[l,c]=E.useState(!1),[u,h]=E.useState(kt.Disconnected),[d,f]=E.useState(null),[m,g]=E.useState(e),[b,y]=E.useState(r),[v,w]=E.useState(i),[k,S]=E.useState(s),_=E.useRef(new _p({url:e,authToken:r,walletAddress:i,deviceID:s})),C=E.useRef(e),P=E.useRef(null),T=E.useRef(new Map),O=E.useRef(new Map);E.useEffect(()=>{if(C.current!==m){P.current&&(P.current(),P.current=null),_.current.disconnect(),T.current.clear();const Q=new _p({url:m,authToken:b,walletAddress:v,deviceID:k});_.current=Q,C.current=m}if(o){if(!P.current){const Q=_.current.onStateChange(G=>{h(G),c(G===kt.Connected),G===kt.Connected&&f(null)});P.current=Q}_.current.isConnected()||_.current.connect().then(()=>{console.debug("[SubscriptionContext] Connected to WebSocket"),f(null)}).catch(Q=>{const G=Q instanceof Error?Q:new Error(String(Q));console.error("[SubscriptionContext] Failed to connect:",G),f(G)})}else P.current&&(P.current(),P.current=null),_.current.isConnected()&&_.current.disconnect(),T.current.clear(),O.current.clear(),h(kt.Disconnected),c(!1),f(null);return()=>{P.current&&(P.current(),P.current=null),_.current.isConnected()&&_.current.disconnect()}},[o,m,b,v,k]),E.useEffect(()=>{_.current&&o&&b&&v&&k&&_.current.setAuthToken(b,v,k)},[o,b,v,k]);const D=E.useCallback((K,H,Q,G)=>{if(!_.current){console.warn("[SubscriptionContext] Cannot subscribe: client not initialized");return}if(!K||typeof K!="string"){console.warn("[SubscriptionContext] Invalid marketId:",K);return}if(H!=null&&H!==""&&(typeof H!="string"||!H.includes("/"))){console.warn("[SubscriptionContext] Invalid symbol (must be empty string or in format BASE/QUOTE):",H);return}const X=de=>{try{de&&de.sub_channel&&T.current.set(de.sub_channel,de),Q(de)}catch(ye){console.error("[SubscriptionContext] Error in multi-feed callback:",ye)}};try{const de={};H&&H!==""&&(de.symbol=H),G&&(de.interval=G),_.current.subscribeMultiFeed(K,X,Object.keys(de).length>0?de:void 0)}catch(de){const ye=de instanceof Error?de:new Error(String(de));console.error("[SubscriptionContext] Subscription error:",ye),f(ye)}},[]),I=E.useCallback((K,H,Q,G,X)=>{if(!_.current){console.warn("[SubscriptionContext] Cannot subscribe: client not initialized");return}if(!K||typeof K!="string"){console.warn("[SubscriptionContext] Invalid marketId:",K);return}if(H!=null&&H!==""&&(typeof H!="string"||!H.includes("/"))){console.warn("[SubscriptionContext] Invalid symbol (must be empty string or in format BASE/QUOTE):",H);return}if(!Q||typeof Q!="string"){console.warn("[SubscriptionContext] Invalid subChannel:",Q);return}const de=ye=>{try{Q==="orderbook"&&console.log("[SubscriptionContext] Orderbook data received",{marketId:K,hasPayload:!!ye,payloadType:typeof ye,hasPayloadData:!!(ye!=null&&ye.data)});const se=(ye==null?void 0:ye.data)??ye;if(Q==="orderbook"&&console.log("[SubscriptionContext] Orderbook data extracted",{marketId:K,hasData:!!se,dataType:typeof se,isObject:typeof se=="object",hasMarketId:!!(se!=null&&se.market_id),hasSequenceId:(se==null?void 0:se.sequence_id)!==void 0,hasBids:!!(se!=null&&se.bids),hasAsks:!!(se!=null&&se.asks),bidsCount:Array.isArray(se==null?void 0:se.bids)?se.bids.length:0,asksCount:Array.isArray(se==null?void 0:se.asks)?se.asks.length:0}),se&&typeof se=="object"){const ie={sub_channel:Q,data:se,type:"data",channel:"multi_feed",market_id:K};T.current.set(Q,ie)}Q==="orderbook"&&console.log("[SubscriptionContext] Calling orderbook callback with data",{marketId:K,hasData:!!se}),G(se),Q==="orderbook"&&console.log("[SubscriptionContext] Orderbook callback completed",{marketId:K})}catch(se){console.error(`[SubscriptionContext] Error in sub-channel callback for ${Q}:`,se)}};O.current.set(G,de);try{const ye={};H&&H!==""&&(ye.symbol=H),X&&(ye.interval=X),_.current.subscribeMultiFeedSubChannel(Q,K,de,Object.keys(ye).length>0?ye:void 0);const se=T.current.get(Q);se&&se.data&&setTimeout(()=>{try{G(se.data)}catch(ie){console.error(`[SubscriptionContext] Error sending retained data for ${Q}:`,ie)}},0)}catch(ye){const se=ye instanceof Error?ye:new Error(String(ye));console.error("[SubscriptionContext] Subscription error:",se),f(se)}},[]),U=E.useCallback((K,H,Q)=>{if(_.current)try{_.current.unsubscribeMultiFeed(K,H,Q)}catch(G){const X=G instanceof Error?G:new Error(String(G));console.error("[SubscriptionContext] Unsubscribe error:",X),f(X)}},[]),B=E.useCallback((K,H)=>{if(_.current)try{if(H){const Q=O.current.get(H);if(!Q){console.warn(`[SubscriptionContext] Cannot unsubscribe: callback not found in wrapped callbacks for sub-channel ${K}. Ensure you're using the same callback reference that was used for subscription.`);return}_.current.unsubscribeMultiFeedSubChannel(K,Q),O.current.delete(H)}else _.current.unsubscribeMultiFeedSubChannel(K)}catch(Q){const G=Q instanceof Error?Q:new Error(String(Q));console.error("[SubscriptionContext] Unsubscribe error:",G),f(G)}},[]),z=E.useCallback(()=>{a(K=>!K)},[]),j=E.useCallback(K=>{a(K)},[]),F=E.useCallback(K=>T.current.get(K)||null,[]),N=E.useCallback(()=>new Map(T.current),[]),R=E.useCallback(K=>{K?T.current.delete(K):T.current.clear()},[]),W=E.useCallback(()=>{f(null)},[]),Y=E.useMemo(()=>({client:_.current,isEnabled:o,isConnected:l,connectionState:u,error:d,toggleEnabled:z,setEnabled:j,clearError:W,getRetainedData:F,getAllRetainedData:N,clearRetainedData:R,wsURL:m,setWsURL:g,authToken:b,setAuthToken:y,walletAddress:v,setWalletAddress:w,deviceID:k,setDeviceID:S,subscribeMultiFeedWithRetention:D,subscribeSubChannelWithRetention:I,unsubscribeMultiFeed:U,unsubscribeSubChannel:B}),[o,l,u,d,z,j,W,F,N,R,m,b,v,k,D,I,U,B]);return p.jsx(Uee.Provider,{value:Y,children:n})},Qc=()=>{const n=E.useContext(Uee);if(!n)throw new Error("useSubscription must be used within SubscriptionProvider");return n};function dxe({baseURL:n=Jp,selectedMarketId:e,height:r,onMarketSelect:i,favorites:s=[],onFavoriteToggle:o}){const{markets:a,tickers:l,selectedMarketId:c,setSelectedMarketId:u,getSymbolByMarketId:h}=ya({baseURL:n,autoFetchMarkets:!0}),{subscribeSubChannelWithRetention:d,unsubscribeSubChannel:f,isConnected:m,getRetainedData:g,client:b}=Qc(),[y,v]=E.useState(new Set(s)),[w,k]=E.useState("1H"),[S,_]=E.useState(null),C=E.useRef(null),P=E.useRef(null),T=e||c||null,{latestFundingRate:O}=Ree({subscriptionClient:b,baseURL:n,marketId:T||"",historyDepth:1}),D=E.useMemo(()=>{if(!(O!=null&&O.funding_rate))return null;try{return Dt(O.funding_rate)}catch(G){return console.error("[TickerBar] Error converting funding rate:",G),null}},[O]),I=E.useMemo(()=>{if(!(O!=null&&O.mark_price))return null;try{return Dt(O.mark_price)}catch(G){return console.error("[TickerBar] Error converting mark_price:",G),null}},[O]),U=E.useMemo(()=>S!==null?S:I,[S,I]),B=E.useMemo(()=>{const G=new Set(y);return s.forEach(X=>G.add(X)),G},[s,y]),z=E.useMemo(()=>a.map(G=>{var ke,q;const X=((ke=G.market_id)==null?void 0:ke.toString())||((q=G.id)==null?void 0:q.toString())||"",de=l.get(X),ye=G.moniker||G.symbol||(G.baseAsset&&G.quoteAsset?`${G.baseAsset}/${G.quoteAsset}`:"Unknown"),se=!G.active||!(de!=null&&de.lastPrice)||typeof de.lastPrice=="string"&&de.lastPrice==="0";let ie=null;de!=null&&de.lastPrice&&(typeof de.lastPrice=="string"?ie=parseFloat(de.lastPrice):ie=de.lastPrice);let Pe=null;return de!=null&&de.priceChangePercent24h&&(typeof de.priceChangePercent24h=="string"?Pe=parseFloat(de.priceChangePercent24h):Pe=de.priceChangePercent24h),{marketId:X,symbol:ye,price:ie,priceChangePercent:Pe,isClosed:se,isFavorite:B.has(X)}}).filter(G=>G.marketId),[a,l,B]),j=E.useMemo(()=>T?a.find(G=>{var X,de;return((X=G.market_id)==null?void 0:X.toString())===T||((de=G.id)==null?void 0:de.toString())===T}):null,[a,T]),F=E.useMemo(()=>T?l.get(T):null,[l,T]),N=E.useMemo(()=>j?j.moniker||j.symbol||(j.baseAsset&&j.quoteAsset?`${j.baseAsset}/${j.quoteAsset}`:"Unknown"):"Select Market",[j]),R=E.useMemo(()=>{if(!j)return"";const G=j.baseAsset||"",X=j.quoteAsset||"";return G&&X?`${G} to ${X}`:j.moniker||j.symbol||""},[j]),W=E.useMemo(()=>F!=null&&F.lastPrice?typeof F.lastPrice=="string"?parseFloat(F.lastPrice):F.lastPrice:null,[F]),Y=E.useMemo(()=>F!=null&&F.priceChangePercent24h?typeof F.priceChangePercent24h=="string"?parseFloat(F.priceChangePercent24h):F.priceChangePercent24h:null,[F]);E.useEffect(()=>{var ye;if(!T||!m){_(null);return}const G=h(T);if(!G){_(null);return}const X=g("price_feed");if(X&&Cee(X)&&((ye=X.data)!=null&&ye.price))try{const se=Dt(X.data.price);_(se)}catch(se){console.error("[TickerBar] Error processing retained price_feed:",se)}const de=se=>{try{if(se&&typeof se=="object"&&se.price){const ie=Dt(se.price);_(ie)}}catch(ie){console.error("[TickerBar] Error processing price_feed update:",ie)}};P.current=de;try{d(T,G,"price_feed",de)}catch(se){console.error("[TickerBar] Failed to subscribe to price_feed:",se)}return()=>{if(P.current){try{f("price_feed",P.current)}catch(se){console.error("[TickerBar] Failed to unsubscribe from price_feed:",se)}P.current=null}}},[T,m,h,d,f,g]);const K=G=>{i?i(G):u(G)},H=(G,X)=>{X.stopPropagation();const de=new Set(B);de.has(G)?de.delete(G):de.add(G),v(de),o&&o(G)},Q=G=>{var ye;const X=((ye=G.split("/")[0])==null?void 0:ye.toUpperCase())||"";return{BTC:"",ETH:"",EUR:"",USD:"$",USDC:"$",USDT:"$"}[X]||X.charAt(0)||"?"};return p.jsxs("div",{className:"ticker-bar-container",style:r?{height:r}:void 0,children:[p.jsx("div",{className:"ticker-bar-top",ref:C,children:p.jsx("div",{className:"ticker-bar-scroll",children:z.map((G,X)=>p.jsxs(Ke.Fragment,{children:[p.jsxs("div",{className:`ticker-item ${G.marketId===T?"active":""}`,onClick:()=>K(G.marketId),children:[p.jsx("span",{className:"ticker-favorite-star",onClick:de=>H(G.marketId,de),style:{cursor:"pointer",opacity:G.isFavorite?1:.3},children:""}),p.jsx("span",{className:"ticker-asset-icon",children:Q(G.symbol)}),p.jsx("span",{className:"ticker-symbol",children:G.symbol}),p.jsx("span",{className:"ticker-value",children:G.isClosed?p.jsx("span",{className:"ticker-closed",children:"CLOSED"}):G.price!==null?_f(G.price):"--"})]}),X<z.length-1&&p.jsx("div",{className:"ticker-separator"})]},G.marketId))})}),p.jsxs("div",{className:"ticker-bar-bottom",children:[p.jsxs("div",{className:"ticker-detail-left",children:[p.jsx("div",{className:"ticker-detail-icon-large",children:j?Q(N):"?"}),p.jsxs("div",{className:"ticker-detail-symbol-group",children:[p.jsx("div",{className:"ticker-detail-symbol-row",children:p.jsx("span",{className:"ticker-detail-symbol",children:N})}),p.jsx("div",{className:"ticker-detail-description",children:R})]}),p.jsxs("div",{className:"ticker-detail-price-group",children:[p.jsx("div",{className:"ticker-detail-price",children:W!==null?_f(W):"--"}),Y!==null&&p.jsxs("div",{className:`ticker-detail-change ${Y>=0?"positive":"negative"}`,children:[Y>=0?"+":"",G0(Y/100)]})]})]}),p.jsxs("div",{className:"ticker-detail-metrics",children:[p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Oracle Price",children:"Oracle Price"}),p.jsx("span",{className:"ticker-metric-value",children:U!==null?_f(U):"--"})]}),p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Long)",children:"Open Interest (L)"}),p.jsx("span",{className:"ticker-metric-value",children:F!=null&&F.volume?(()=>{const G=typeof F.volume=="string"?parseFloat(F.volume):F.volume;return`${zF(G)} / 20.0M USDC`})():"--"})]}),p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Open Interest (Short)",children:"Open Interest (S)"}),p.jsx("span",{className:"ticker-metric-value",children:F!=null&&F.volume?(()=>{const G=typeof F.volume=="string"?parseFloat(F.volume):F.volume;return`${zF(G)} / 20.0M USDC`})():"--"})]}),p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Skew",children:"Skew"}),p.jsx("span",{className:"ticker-metric-value",children:"50%/50%"})]}),p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Funding Rate",children:"Funding Rate"}),p.jsx("span",{className:`ticker-metric-value ${D!==null&&D<0?"negative":D!==null&&D>0?"positive":""}`,children:D!==null?G0(D):"--"})]})]}),p.jsxs("div",{className:"ticker-detail-right",children:[p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Holding (Long)",children:"Holding (L)"}),p.jsx("span",{className:"ticker-metric-value positive",children:"0.0012%"})]}),p.jsxs("div",{className:"ticker-metric",children:[p.jsx("label",{className:"ticker-metric-label",title:"Holding (Short)",children:"Holding (S)"}),p.jsx("span",{className:"ticker-metric-value negative",children:"0.0021%"})]})]}),p.jsx("div",{className:"ticker-timeframe-selector",children:p.jsxs("select",{className:"ticker-timeframe-select",value:w,onChange:G=>k(G.target.value),children:[p.jsx("option",{value:"1H",children:"1H"}),p.jsx("option",{value:"4H",children:"4H"}),p.jsx("option",{value:"1D",children:"1D"}),p.jsx("option",{value:"1W",children:"1W"}),p.jsx("option",{value:"1M",children:"1M"})]})})]})]})}const hxe=Ke.memo(dxe),fxe=E.forwardRef(function({baseURL:e=Jp,mnemonic:r=s_,marketId:i,marketSymbol:s,selectedBucketBalance:o,selectedBucketId:a,onLeverageClick:l,onNumberCalculatorClick:c,authToken:u,walletAddress:h},d){const{client:f}=Qc(),{selectedMarketId:m,selectedMarketSymbol:g}=ya({baseURL:e,autoFetchMarkets:!0}),b=i||m||"",y=s||g||"",{lastPrice:v}=l_({subscriptionClient:f,baseURL:e,marketId:b}),w=(v==null?void 0:v.price)||0,k=E.useRef(0),S=E.useRef(0),_=E.useRef(!1),{collections:C,spotWalletBalance:P}=$ee({subscriptionClient:f,baseURL:e,walletAddress:h||"",authToken:u||"",useWebSocket:!!h&&!!u}),T=E.useMemo(()=>!a||!C.length?null:C.find(He=>He.bucketId===a)||null,[C,a]),{orderType:O,setOrderType:D,fundPercent:I,sizeInput:U,price:B,leverage:z,marginMode:j,availableBalance:F,currentPrice:N,isReady:R,loading:W,result:Y,setFundPercent:K,setSizeInput:H,setPrice:Q,setMarginMode:G,setLeverage:X,placeBuyOrder:de,placeSellOrder:ye,changeLeverage:se,calculateValue:ie,calculateMargin:Pe,calculateSizeUSD:ke,getOrderPrice:q,getAvailableTradeAmount:Ee}=Aee({baseURL:e,mnemonic:r,marketId:b,marketSymbol:y,selectedBucketBalance:o,selectedBucketId:a||void 0,tradePrice:w}),Je=E.useMemo(()=>q(),[q,O,B,N]),ct=E.useMemo(()=>Ee(),[Ee,F,z]),$e=E.useMemo(()=>ie(),[ie,U,I,F,Je,z]),ut=E.useMemo(()=>Pe(),[Pe,z,$e]),qe=E.useMemo(()=>Ct(String($e)),[$e]),we=E.useMemo(()=>Ct(String(ut)),[ut]),ze=E.useMemo(()=>({minimumFractionDigits:za,maximumFractionDigits:Pee}),[]),Me=E.useMemo(()=>N.toFixed(za),[N]),Ie=E.useMemo(()=>{const He=C.reduce((rt,Te)=>rt+Te.totalEquity,0);return P+He},[C,P]),Ce=E.useMemo(()=>Ie.toLocaleString("en-US",ze),[Ie,ze]),xe=E.useMemo(()=>P.toLocaleString("en-US",ze),[P,ze]),L=E.useMemo(()=>T?T.totalEquity.toLocaleString("en-US",ze):"--",[T,ze]),re=E.useMemo(()=>T?T.totalEquity.toLocaleString("en-US",ze):"--",[T,ze]),fe=E.useMemo(()=>T?T.unrealizedPnL.toLocaleString("en-US",ze):"--",[T,ze]),le=E.useMemo(()=>T?(T.marginRatio*100).toFixed(za)+"%":"--",[T]),ce=E.useMemo(()=>T?T.usedMargin.toLocaleString("en-US",ze):"--",[T,ze]),ge=E.useMemo(()=>T?`${T.leverage.toFixed(za)}x`:"--",[T]),J=E.useMemo(()=>Pve(a||null),[a]);E.useEffect(()=>{if(T){const He=sf(T);(He===V0||He===hbe)&&G(He)}},[T,G]);const he=E.useCallback(()=>{D(DI)},[D]),pe=E.useCallback(()=>{D(Ik)},[D]),_e=E.useCallback(()=>{K(Math.min(Dk,I+Ok))},[I,K]),De=E.useCallback(()=>{K(Math.max(uv,I-Ok))},[I,K]),ae=E.useCallback(He=>{const rt=parseInt(He.target.value);K(rt)},[K]),Xe=E.useCallback(He=>{Q(parseFloat(He.target.value))},[Q]),[Fe,te]=E.useState(!1),[ee,ne]=E.useState(""),Ze=E.useCallback(He=>{const rt=He.target.value;ne(rt);const Te=parseFloat(rt),it=isNaN(Te)?0:Math.round(Te*1e6)/1e6;H(it)},[H]),je=E.useCallback(()=>{te(!0),ne(Upe(U))},[U]),Ve=E.useCallback(()=>{te(!1);const He=parseFloat(ee);H(He),ne("")},[ee,H]),Ae=E.useCallback(()=>{const He=ht.loading("Submit transaction...",{description:"Placing buy order"});k.current=typeof He=="number"?He:0,de()},[de]),Qe=E.useCallback(()=>{const He=ht.loading("Submit transaction...",{description:"Placing sell order"});k.current=typeof He=="number"?He:0,ye()},[ye]),lt=E.useCallback(async(He,rt)=>{_.current=!0;const Te=ht.loading("Changing leverage...",{description:`Updating leverage to ${He}x`});S.current=typeof Te=="number"?Te:0;try{const it=(rt==null?void 0:rt.leverageType)||(j===V0?"cross":"isolated"),ve=(rt==null?void 0:rt.bucketId)||a||"";await se(He,{...rt,bucketId:ve,leverageType:it})}catch(it){_.current=!1,S.current!==0&&(ht.dismiss(S.current),S.current=0);const ve=it instanceof Error?it.message:"Unknown error";ht.error("Leverage Change Failed",{description:ve,action:Kr(ve)})}},[se,j,a]);return E.useImperativeHandle(d,()=>({leverage:z,setLeverage:X,calculateMaxRatio:He=>{const Te=ke();return F>0&&Te>0?(Te/F).toFixed(za):He.toFixed(za)},changeLeverage:lt,setPrice:He=>{const rt=typeof He=="number"?He:parseFloat(He);isNaN(rt)||Q(rt)},setSizeInput:He=>{H(He)},getSizeInput:()=>U,getAvailableTradeAmount:()=>ct}),[z,X,ke,q,F,lt,Q,H,U,ct]),E.useEffect(()=>{if(Y)if(_.current)if(_.current=!1,S.current!==0&&(ht.dismiss(S.current),S.current=0),Y.success){const He=Y.orderId?`Transaction: ${Y.orderId}`:Y.message||"Leverage changed successfully";ht.success("Leverage Changed Successfully",{description:He})}else Y.error&&ht.error("Leverage Change Failed",{description:Y.error,action:Kr(Y.error||"")});else if(k.current!==0&&(ht.dismiss(k.current),k.current=0),Y.success){const He=Y.orderId?`Order ID: ${Y.orderId}`:Y.message||"Order placed successfully";ht.success("Order Placed Successfully",{description:He})}else Y.error&&ht.error("Order Failed",{description:Y.error,action:Kr(Y.error||"")})},[Y]),p.jsxs("div",{className:"component",children:[p.jsx("h2",{children:y}),p.jsxs("div",{className:"trade-op-config",children:[p.jsxs("div",{className:"trade-op-badge",children:[p.jsx("span",{className:"trade-op-badge-label",children:j}),p.jsx("span",{className:"trade-op-info-icon",children:"i"})]}),p.jsxs("div",{className:"trade-op-badge",onClick:l,style:{cursor:"pointer"},children:[p.jsxs("span",{className:"trade-op-badge-label",children:[z,"x"]}),p.jsx("span",{className:"trade-op-info-icon",children:"i"})]})]}),p.jsxs("div",{className:"trade-op-order-type-selector",children:[p.jsx("button",{onClick:he,className:`btn-toggle ${O===DI?"active":""}`,children:"MARKET"}),p.jsx("button",{onClick:pe,className:`btn-toggle ${O===Ik?"active":""}`,children:"LIMIT"})]}),O===Ik&&p.jsx("div",{className:"trade-op-form-group",children:p.jsxs("div",{className:"trade-op-form-row",children:[p.jsx("label",{htmlFor:"price",className:"trade-op-label",children:"Price:"}),p.jsx("input",{id:"price",type:"number",value:B,onChange:Xe,placeholder:Me,step:lbe,min:rF})]})}),p.jsxs("div",{className:"trade-op-form-group",children:[p.jsxs("div",{className:"trade-op-form-row",style:{marginBottom:"0.5rem"},children:[p.jsx("label",{htmlFor:"size",className:"trade-op-label",children:"Size:"}),p.jsx("span",{className:"trade-op-icon",onClick:c,children:p.jsx("img",{src:"cal.svg"})}),p.jsxs("div",{className:"trade-op-size-controls",children:[p.jsx("input",{id:"size",type:"number",step:"0.000001",value:Fe?ee:U,onChange:Ze,onFocus:je,onBlur:Ve,placeholder:"0",min:rF,max:ct,className:"trade-op-input"}),p.jsxs("div",{className:"trade-op-size-buttons",children:[p.jsx("button",{onClick:_e,className:"btn-small",children:""}),p.jsx("button",{onClick:De,className:"btn-small",children:""})]})]})]}),p.jsx("input",{type:"range",min:uv,max:Dk,value:I,onChange:ae,step:Ok,style:{width:"100%","--slider-progress":`${(I-uv)/(Dk-uv)*100}%`},className:"filled-slider"}),p.jsxs("div",{className:"trade-op-slider-labels",children:[p.jsx("span",{children:"0"}),p.jsx("span",{children:"20"}),p.jsx("span",{children:"40"}),p.jsx("span",{children:"60"}),p.jsx("span",{children:"80"}),p.jsx("span",{children:"100"})]})]}),p.jsxs("div",{className:"trade-op-action-panel",children:[p.jsxs("div",{children:[p.jsx("div",{className:"trade-op-panel-title buy",children:"LONG"}),p.jsxs("div",{className:"trade-op-panel-size",children:[U.toFixed(3),"/100.000"]}),p.jsx("button",{onClick:Ae,disabled:W||!R||$e<=0,className:"btn-buy",children:W?"PLACING...":"BUY LONG"}),p.jsxs("div",{className:"trade-op-panel-details",children:[p.jsxs("div",{children:["Value ",qe.toFixed(2)]}),p.jsxs("div",{children:["Margin ",we.toFixed(2)]})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"trade-op-panel-title sell",children:"SHORT"}),p.jsxs("div",{className:"trade-op-panel-size",children:[U.toFixed(3),"/100.000"]}),p.jsx("button",{onClick:Qe,disabled:W||!R||$e<=0,className:"btn-sell",children:W?"PLACING...":"SELL SHORT"}),p.jsxs("div",{className:"trade-op-panel-details",children:[p.jsxs("div",{children:["Value ",qe.toFixed(za)]}),p.jsxs("div",{children:["Margin ",we.toFixed(za)]})]})]})]}),p.jsxs("div",{className:"trade-op-info-panel",children:[p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Account Equity:"}),p.jsxs("span",{className:"trade-op-info-value",children:[Ce," USDC"]})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Spot:"}),p.jsxs("span",{className:"trade-op-info-value",children:[xe," USDC"]})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsxs("span",{className:"trade-op-info-label",children:[a||"Bucket",":"]}),p.jsxs("span",{className:"trade-op-info-value",children:[L," USDC"]})]}),p.jsx("div",{className:"trade-op-info-row",children:p.jsxs("span",{className:"trade-op-info-label",children:["Bucket Overview: ",J]})}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Balance:"}),p.jsxs("span",{className:"trade-op-info-value",children:[re," USDC"]})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Unrealized PNL:"}),p.jsxs("span",{className:"trade-op-info-value",children:[fe," USDC"]})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Cross Margin Ratio:"}),p.jsx("span",{className:"trade-op-info-value",children:le})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Maintenance Margin:"}),p.jsxs("span",{className:"trade-op-info-value",children:[ce," USDC"]})]}),p.jsxs("div",{className:"trade-op-info-row",children:[p.jsx("span",{className:"trade-op-info-label",children:"Cross Account Leverage:"}),p.jsx("span",{className:"trade-op-info-value",children:ge})]})]})]})});function pxe({baseURL:n=Jp,subscriptionClient:e,marketId:r=sbe,limit:i=obe}){const{lastPrice:s,displayPrice:o,recentTrades:a,loading:l,error:c,isConnected:u,priceChange:h}=l_({subscriptionClient:e,baseURL:n,marketId:r,limit:i}),d=E.useRef(null),f=E.useRef(""),m=E.useRef(null),g=E.useCallback(()=>{const T=d.current;if(!T)return;const O=T.parentElement;if(!O)return;const D=T.textContent||"";if(!D)return;const I=window.getComputedStyle(O),U=parseFloat(I.paddingLeft)+parseFloat(I.paddingRight),B=O.clientWidth-U;let z=12,j=48,F=z;const N=document.createElement("div");for(N.style.position="absolute",N.style.visibility="hidden",N.style.whiteSpace="nowrap",N.style.fontFamily=window.getComputedStyle(T).fontFamily,N.style.fontWeight=window.getComputedStyle(T).fontWeight,document.body.appendChild(N);z<=j;){const W=Math.floor((z+j)/2);N.style.fontSize=`${W}px`,N.textContent=D,N.offsetWidth<=B?(F=W,z=W+1):j=W-1}document.body.removeChild(N);const R=parseFloat(window.getComputedStyle(T).fontSize);Math.abs(R-F)>.5&&(T.style.fontSize=`${F}px`)},[]);E.useEffect(()=>{if(o==null)return;const T=_f(o);if(T===f.current)return;f.current=T,m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{g()},150);let O;const D=()=>{clearTimeout(O),O=window.setTimeout(()=>{m.current!==null&&clearTimeout(m.current),m.current=window.setTimeout(()=>{g()},150)},100)};return window.addEventListener("resize",D),()=>{m.current!==null&&clearTimeout(m.current),clearTimeout(O),window.removeEventListener("resize",D)}},[o,g]);const b=E.useCallback(T=>{if(!T||isNaN(T)||T<=0)return"Invalid";let O=T;O<9466848e5&&(O=O*1e3);const D=new Date(O);return isNaN(D.getTime())?"Invalid":D.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},[]),y=E.useCallback(T=>T?"#51cf66":"#ff6b6b",[]),v=E.useCallback(T=>T?"BUY":"SELL",[]),w=E.useCallback(T=>T?"":"",[]);if(l)return p.jsx(Zp,{message:"Loading trade price..."});if(c)return p.jsx(em,{error:c});if(o==null)return p.jsx(bl,{message:"No trade data available"});const k=s&&s.is_buyer_maker!==void 0,S=k?y(s.is_buyer_maker):"#888",_=k?v(s.is_buyer_maker):"N/A",C=k?w(s.is_buyer_maker):"",P=h==="up"?"flash-price-up":h==="down"?"flash-price-down":"";return p.jsxs("div",{className:"layout-container trade-price-container",children:[p.jsx(tm,{title:p.jsx(e3,{isConnected:u}),children:p.jsx("div",{children:"Last Trade Price"})}),p.jsxs("div",{className:`trade-price-main ${P}`,children:[p.jsx("div",{ref:d,className:"trade-price-value",style:{color:S},children:_f(o)}),p.jsxs("div",{className:"trade-price-side",style:{color:S},children:[p.jsx("span",{children:C}),p.jsx("span",{children:_})]})]}),p.jsx("div",{className:"trade-price-trades-table",children:l?p.jsx("div",{className:"message",children:"Loading trades..."}):a.length===0?p.jsx("div",{className:"message",children:"No trades available"}):p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Time"}),p.jsx("th",{className:"right",children:"Size"}),p.jsx("th",{className:"right",children:"Price"})]})}),p.jsx("tbody",{children:a.map(T=>{const O=T.is_buyer_maker?"#51cf66":"#ff6b6b";return p.jsxs("tr",{children:[p.jsx("td",{children:b(T.time)}),p.jsx("td",{className:"right",children:kve(T.size)}),p.jsx("td",{className:"right price",style:{color:O},children:_f(T.price)})]},`${T.time}-${T.price}-${T.size}`)})})]})})]})}const mxe=Ke.memo(pxe),Wee=({level:n,index:e,isLast:r,depthPercent:i,formatPrice:s,formatSize:o,onPriceClick:a})=>{const l=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-ask":"",c=()=>{a&&a(n.price)};return p.jsxs("div",{className:`orderbook-level ask ${l}`,style:{borderBottom:r?"none":void 0},children:[p.jsx("div",{className:"orderbook-depth-bar ask",style:{width:`${i}%`}}),p.jsx("div",{className:"orderbook-level-content ask",onClick:c,style:{cursor:a?"pointer":"default"},title:a?"Click to set price":void 0,children:s(n.price)}),p.jsx("div",{className:"orderbook-level-content right",children:o(n.size)}),p.jsx("div",{className:"orderbook-depth-indicator",children:p.jsx("div",{className:"orderbook-depth-line ask"})})]})},qee=({level:n,index:e,isLast:r,depthPercent:i,formatPrice:s,formatSize:o,onPriceClick:a})=>{const l=n.flash==="up"?"flash-up":n.flash==="down"?"flash-down-bid":"",c=()=>{a&&a(n.price)};return p.jsxs("div",{className:`orderbook-level bid ${l}`,style:{borderBottom:r?"none":void 0},children:[p.jsx("div",{className:"orderbook-depth-bar bid",style:{width:`${i}%`}}),p.jsx("div",{className:"orderbook-level-content bid",onClick:c,style:{cursor:a?"pointer":"default"},title:a?"Click to set price":void 0,children:s(n.price)}),p.jsx("div",{className:"orderbook-level-content right",children:o(n.size)}),p.jsx("div",{className:"orderbook-depth-indicator",children:p.jsx("div",{className:"orderbook-depth-line bid"})})]})};function gxe({baseURL:n,subscriptionClient:e,marketId:r,maxDepth:i=Tee,height:s=Eee,onPriceClick:o}){var O,D;const{asks:a,bids:l,spread:c,midPrice:u,loading:h,error:d,isConnected:f,wsError:m}=QN({baseURL:n,subscriptionClient:e,marketId:r,maxDepth:i}),g=E.useRef(null),b=E.useRef(null),y=E.useRef(null),v=E.useRef(0),w=E.useRef(0);E.useEffect(()=>{const I=a.length!==v.current,U=l.length!==w.current;if(!(!I&&!U))return v.current=a.length,w.current=l.length,y.current!==null&&cancelAnimationFrame(y.current),y.current=requestAnimationFrame(()=>{if(g.current&&I){const B=g.current;B.scrollTop=B.scrollHeight}if(b.current&&U){const B=b.current;B.scrollTop=0}y.current=null}),()=>{y.current!==null&&(cancelAnimationFrame(y.current),y.current=null)}},[a.length,l.length]);const k=a.length>0?((O=a[a.length-1])==null?void 0:O.cumulative)??0:0,S=l.length>0?((D=l[l.length-1])==null?void 0:D.cumulative)??0:0,_=E.useMemo(()=>Math.max(k,S),[k,S]),C=Pw,P=Mw,T=E.useCallback(I=>_===0?0:I/_*100,[_]);return h?p.jsx(Zp,{message:"Loading orderbook..."}):d?p.jsx(em,{error:d}):p.jsxs("div",{className:"layout-container",style:{height:s},children:[m&&(a.length>0||l.length>0)&&p.jsxs("div",{className:"orderbook-ws-warning",children:[p.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),p.jsx("span",{className:"orderbook-ws-warning-text",children:m})]}),p.jsx(tm,{title:p.jsx(e3,{isConnected:f}),children:p.jsxs("div",{children:["Depth: ",i]})}),u&&p.jsxs("div",{className:"orderbook-mid-price",children:[p.jsx("div",{className:"orderbook-mid-price-value",children:C(u)}),c!==void 0&&p.jsxs("div",{className:"orderbook-mid-price-spread",children:["Spread: ",C(c)]})]}),p.jsxs("div",{className:"orderbook-content",children:[p.jsxs("div",{className:"orderbook-section",ref:g,children:[a.map((I,U)=>{const B=T(I.cumulative);return p.jsx(Wee,{level:I,index:U,isLast:U===a.length-1,depthPercent:B,formatPrice:C,formatSize:P,onPriceClick:o},`ask-${I.price}-${U}`)}),a.length===0&&p.jsx(bl,{message:"No ask orders"})]}),p.jsxs("div",{className:"orderbook-section bids",ref:b,children:[l.map((I,U)=>{const B=T(I.cumulative);return p.jsx(qee,{level:I,index:U,isLast:U===l.length-1,depthPercent:B,formatPrice:C,formatSize:P,onPriceClick:o},`bid-${I.price}-${U}`)}),l.length===0&&p.jsx(bl,{message:"No bid orders"})]})]}),p.jsx(Hee,{totalBids:S,totalAsks:k})]})}const Hee=Ke.memo(({totalBids:n,totalAsks:e})=>{const r=n+e,i=r>0?`${(n/r*100).toFixed(0)}%`:"0%",s=r>0?`${(e/r*100).toFixed(0)}%`:"0%";return p.jsxs("div",{className:"orderbook-footer",children:[p.jsxs("div",{className:"orderbook-footer-legend",children:[p.jsx("div",{className:"orderbook-footer-bar bid"}),p.jsx("span",{className:"color-text-muted",children:i})]}),p.jsxs("div",{className:"orderbook-footer-legend",children:[p.jsx("div",{className:"orderbook-footer-bar ask"}),p.jsx("span",{className:"color-text-muted",children:s})]})]})});Hee.displayName="FooterSummary";Ke.memo(gxe);function bxe(n,e,r,i){const s=a=>{const l=1-a;return 3*l*l*a*n+3*l*a*a*r+a*a*a},o=a=>{const l=1-a;return 3*l*l*a*e+3*l*a*a*i+a*a*a};return a=>{if(a<=0)return 0;if(a>=1)return 1;let l=0,c=1,u=.5;for(let h=0;h<12;h++){const d=s(u);if(Math.abs(d-a)<1e-4)break;d<a?l=u:c=u,u=(l+c)/2}return o(u)}}function yxe({baseURL:n,subscriptionClient:e,marketId:r,maxDepth:i=Tee,height:s=Eee,onPriceClick:o}){var W,Y;const{asks:a,bids:l,spread:c,loading:u,error:h,isConnected:d,wsError:f}=QN({baseURL:n,subscriptionClient:e,marketId:r,maxDepth:i}),m=E.useRef(null),g=E.useRef(null),b=E.useRef(null),y=E.useRef(null),v=E.useRef(!1),w=E.useRef(null),k=E.useRef(null),S=E.useRef(!1),_=E.useRef(0),C=a.length>0?((W=a[a.length-1])==null?void 0:W.cumulative)??0:0,P=l.length>0?((Y=l[l.length-1])==null?void 0:Y.cumulative)??0:0,T=E.useMemo(()=>Math.max(C,P),[C,P]),O=Pw,D=Mw,I=E.useCallback(K=>T===0?0:K/T*100,[T]),U=E.useCallback((K,H,Q)=>{if(v.current)return;v.current=!0;const G=Q,X=H-G,de=300,ye=performance.now(),se=ye+de,ie=bxe(.57,.4,.55,1.17),Pe=ke=>{if(ke>=se){K.scrollTop=Math.max(0,H),v.current=!1,_.current=performance.now(),y.current&&(cancelAnimationFrame(y.current),y.current=null);return}const q=ke-ye,Ee=Math.min(q/de,1),Je=ie(Ee),ct=G+X*Je;K.scrollTop=Math.max(0,ct),y.current=requestAnimationFrame(Pe)};y.current=requestAnimationFrame(Pe)},[]),B=E.useCallback((K=0)=>{if(v.current||performance.now()-_.current<500||!m.current||!g.current)return;const G=m.current,de=g.current.clientHeight;if(de===0)return;const ye=de/2,se=20.83333;if(a.length*se<=ye||c<=0||a.length===0||l.length===0)return;if(!b.current){if(K<3){k.current&&clearTimeout(k.current);const qe=50*(K+1);k.current=window.setTimeout(()=>{k.current=null,B(K+1)},qe)}return}const Pe=b.current,ke=Pe.offsetTop,q=Pe.offsetHeight;if(q===0){if(K<3){k.current&&clearTimeout(k.current);const qe=50*(K+1);k.current=window.setTimeout(()=>{k.current=null,B(K+1)},qe)}return}const Ee=ke+q/2,Je=de/2,ct=Ee-Je-se,$e=G.scrollTop;Math.abs(ct-$e)>1&&U(G,Math.max(0,ct),$e)},[a.length,c,U]);E.useEffect(()=>{const K=()=>{S.current&&(S.current=!1,B())};return window.addEventListener("mouseup",K),()=>{window.removeEventListener("mouseup",K)}},[B]),E.useEffect(()=>{if(!m.current||!g.current)return;const K=requestAnimationFrame(()=>{requestAnimationFrame(()=>{B()})});return()=>{cancelAnimationFrame(K),y.current&&(cancelAnimationFrame(y.current),y.current=null),w.current&&(clearTimeout(w.current),w.current=null),k.current&&(clearTimeout(k.current),k.current=null),v.current=!1}},[a.length,l.length,c,T,B]);const z=E.useCallback(()=>{v.current&&y.current&&(cancelAnimationFrame(y.current),y.current=null,v.current=!1),w.current&&(clearTimeout(w.current),w.current=null)},[]),j=E.useCallback(K=>{const H=K.currentTarget,Q=H.offsetWidth-H.clientWidth;if(Q>0){const G=H.getBoundingClientRect();K.clientX-G.left>H.clientWidth-Q-5&&(S.current=!0,z())}},[z]),F=E.useCallback(()=>{S.current&&z()},[z]),N=E.useCallback(()=>{S.current&&(S.current=!1,B())},[B]),R=E.useCallback(()=>{z(),w.current&&clearTimeout(w.current),S.current||(w.current=window.setTimeout(()=>{w.current=null,B()},150))},[B,z]);return u?p.jsx(Zp,{message:"Loading orderbook..."}):h?p.jsx(em,{error:h}):p.jsxs("div",{className:"layout-container",style:{height:s},children:[f&&(a.length>0||l.length>0)&&p.jsxs("div",{className:"orderbook-ws-warning",children:[p.jsx("img",{src:"/caution-icon.svg",alt:"Caution",className:"orderbook-ws-warning-icon"}),p.jsx("span",{className:"orderbook-ws-warning-text",children:f})]}),p.jsx(tm,{title:p.jsx(e3,{isConnected:d}),children:p.jsxs("div",{children:["Depth: ",i]})}),p.jsx("div",{className:"orderbook-content",ref:g,children:p.jsxs("div",{className:"orderbook-section",ref:m,onScroll:R,onMouseDown:j,onMouseMove:F,onMouseUp:N,onMouseLeave:N,children:[a.map((K,H)=>{const Q=I(K.cumulative);return p.jsx(Wee,{level:K,index:H,isLast:H===a.length-1&&l.length===0,depthPercent:Q,formatPrice:O,formatSize:D,onPriceClick:o},`ask-${K.price}-${H}`)}),c>0&&a.length>0&&l.length>0&&p.jsxs("div",{className:"orderbook-mid-price-spread",ref:b,children:["Spread: ",O(c)]}),l.map((K,H)=>{const Q=I(K.cumulative);return p.jsx(qee,{level:K,index:H,isLast:H===l.length-1,depthPercent:Q,formatPrice:O,formatSize:D,onPriceClick:o},`bid-${K.price}-${H}`)}),a.length===0&&l.length===0&&p.jsx(bl,{message:"No orders"}),a.length===0&&l.length>0&&p.jsx(bl,{message:"No ask orders"}),l.length===0&&a.length>0&&p.jsx(bl,{message:"No bid orders"})]})}),p.jsx(Vee,{totalBids:P,totalAsks:C})]})}const Vee=Ke.memo(({totalBids:n,totalAsks:e})=>{const r=n+e,i=r>0?`${(n/r*100).toFixed(0)}%`:"0%",s=r>0?`${(e/r*100).toFixed(0)}%`:"0%";return p.jsxs("div",{className:"orderbook-footer",children:[p.jsxs("div",{className:"orderbook-footer-legend",children:[p.jsx("div",{className:"orderbook-footer-bar bid"}),p.jsx("span",{className:"color-text-muted",children:i})]}),p.jsxs("div",{className:"orderbook-footer-legend",children:[p.jsx("div",{className:"orderbook-footer-bar ask"}),p.jsx("span",{className:"color-text-muted",children:s})]})]})});Vee.displayName="FooterSummary";const vxe=Ke.memo(yxe);function r3({top:n,left:e,width:r,height:i}){const s=`translate(${e}px,${n}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function Yee({top:n,left:e,width:r,height:i}){return{top:`${n}px`,left:`${e}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function WF(n){return n*100+"%"}function xxe(n,e,r,i){return n+r>i?e:r}function Gee(n,e,r){return n<0?e:r}function wxe(n){return Math.max(0,n)}function Dw(n){return Math.max(0,n)}var i3=(n,e,r)=>{const{left:i,height:s,width:o}=e,a=n.top-(s-n.height);return{left:i,width:o,height:Gee(a,n.height,s),top:Dw(a)}},s3=(n,e,r)=>{const{top:i,left:s,height:o,width:a}=e;return{top:i,height:o,width:xxe(n.left,n.width,a,r),left:wxe(s)}},o3=(n,e,r)=>{const{top:i,height:s,width:o}=e,a=n.left+n.width-o;return a<0?{height:s,width:n.left+n.width,top:Dw(i),left:0}:{height:s,width:o,top:Dw(i),left:a}},a3=(n,e,r)=>{const{top:i,left:s,height:o,width:a}=e;return{width:a,left:s,height:Gee(i,n.height,o),top:Dw(i)}},_xe=(n,e,r)=>i3(n,s3(n,e,r)),Sxe=(n,e,r)=>i3(n,o3(n,e)),kxe=(n,e,r)=>a3(n,s3(n,e,r)),Cxe=(n,e,r)=>a3(n,o3(n,e)),Exe={n:i3,ne:_xe,e:s3,se:kxe,s:a3,sw:Cxe,w:o3,nw:Sxe};function Txe(n,e,r,i){const s=Exe[n];return s?s(e,{...e,...r},i):r}var Kee={type:"transform",scale:1,calcStyle(n){return r3(n)},calcDragPosition(n,e,r,i){return{left:n-r,top:e-i}}},Pxe={type:"absolute",scale:1,calcStyle(n){return Yee(n)},calcDragPosition(n,e,r,i){return{left:n-r,top:e-i}}};function Mxe(n){return{type:"transform",scale:n,calcStyle(e){return r3(e)},calcDragPosition(e,r,i,s){return{left:(e-i)/n,top:(r-s)/n}}}}var Dxe=Kee,Oxe={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},Ixe={enabled:!0,bounded:!1,threshold:3},Axe={enabled:!0,handles:["se"]},Rxe={enabled:!1,defaultItem:{w:1,h:1}};function u_(n,e){return!(n.i===e.i||n.x+n.w<=e.x||n.x>=e.x+e.w||n.y+n.h<=e.y||n.y>=e.y+e.h)}function So(n,e){for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0&&u_(i,e))return i}}function Xee(n,e){return n.filter(r=>u_(r,e))}function Qee(n,e){return e==="horizontal"?Zee(n):e==="vertical"?Jee(n):[...n]}function Jee(n){return[...n].sort((e,r)=>e.y!==r.y?e.y-r.y:e.x-r.x)}function Zee(n){return[...n].sort((e,r)=>e.x!==r.x?e.x-r.x:e.y-r.y)}function nm(n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0){const s=i.y+i.h;s>e&&(e=s)}}return e}function ju(n,e){for(let r=0;r<n.length;r++){const i=n[r];if(i!==void 0&&i.i===e)return i}}function l3(n){return n.filter(e=>e.static===!0)}function Jc(n){return{i:n.i,x:n.x,y:n.y,w:n.w,h:n.h,minW:n.minW,maxW:n.maxW,minH:n.minH,maxH:n.maxH,moved:!!n.moved,static:!!n.static,isDraggable:n.isDraggable,isResizable:n.isResizable,resizeHandles:n.resizeHandles,isBounded:n.isBounded}}function Do(n){const e=new Array(n.length);for(let r=0;r<n.length;r++){const i=n[r];i!==void 0&&(e[r]=Jc(i))}return e}function Nxe(n,e){const r=new Array(n.length);for(let i=0;i<n.length;i++){const s=n[i];s!==void 0&&(e.i===s.i?r[i]=e:r[i]=s)}return r}function jxe(n,e,r){let i=ju(n,e);return i?(i=r(Jc(i)),[Nxe(n,i),i]):[[...n],null]}function c3(n,e){const r=l3(n);for(let i=0;i<n.length;i++){const s=n[i];if(s!==void 0)if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)r.push(s);else for(;So(r,s);)s.y++}return n}function Xu(n,e,r,i,s,o,a,l,c){if(e.static&&e.isDraggable!==!0)return[...n];if(e.y===i&&e.x===r)return[...n];const u=e.x,h=e.y;typeof r=="number"&&(e.x=r),typeof i=="number"&&(e.y=i),e.moved=!0;let d=Qee(n,a);(a==="vertical"&&typeof i=="number"?h>=i:a==="horizontal"&&typeof r=="number"?u>=r:!1)&&(d=d.reverse());const m=Xee(d,e),g=m.length>0;if(g&&c)return Do(n);if(g&&o)return e.x=u,e.y=h,e.moved=!1,n;let b=[...n];for(let y=0;y<m.length;y++){const v=m[y];v!==void 0&&(v.moved||(v.static?b=qF(b,v,e,s,a):b=qF(b,e,v,s,a)))}return b}function qF(n,e,r,i,s,o){const a=s==="horizontal",l=s==="vertical",c=e.static;if(i){i=!1;const d={x:a?Math.max(e.x-r.w,0):r.x,y:l?Math.max(e.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},f=So(n,d),m=f!==void 0&&f.y+f.h>e.y,g=f!==void 0&&e.x+e.w>f.x;if(!f)return Xu(n,r,a?d.x:void 0,l?d.y:void 0,i,c,s);if(m&&l)return Xu(n,r,void 0,r.y+1,i,c,s);if(m&&s===null)return e.y=r.y,r.y=r.y+r.h,[...n];if(g&&a)return Xu(n,e,r.x,void 0,i,c,s)}const u=a?r.x+1:void 0,h=l?r.y+1:void 0;return u===void 0&&h===void 0?[...n]:Xu(n,r,u,h,i,c,s)}function Lxe(n){return n.filter(e=>e.static)}var Fxe={x:"w",y:"h"};function $I(n,e,r,i){const s=Fxe[i];e[i]+=1;const o=n.findIndex(a=>a.i===e.i);for(let a=o+1;a<n.length;a++){const l=n[a];if(l!==void 0&&!l.static){if(l.y>e.y+e.h)break;u_(e,l)&&$I(n,l,r+e[s],i)}}e[i]=r}function $xe(n,e,r,i,s,o,a){const l=r==="vertical",c=r==="horizontal";if(l)for(typeof a=="number"?e.y=Math.min(a,e.y):e.y=Math.min(nm(n),e.y);e.y>0&&!So(n,e);)e.y--;else if(c)for(;e.x>0&&!So(n,e);)e.x--;let u;for(;(u=So(n,e))!==void 0&&!(r===null&&o);)if(c?$I(s,e,u.x+u.w,"x"):$I(s,e,u.y+u.h,"y"),c&&e.x+e.w>i)for(e.x=i-e.w,e.y++;e.x>0&&!So(n,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function rl(n,e,r,i){const s=Lxe(n);let o=nm(s);const a=Qee(n,e),l=new Array(n.length);for(let c=0;c<a.length;c++){const u=a[c];if(u===void 0)continue;let h=Jc(u);h.static||(h=$xe(s,h,e,r,a,i,o),o=Math.max(o,h.y+h.h),s.push(h));const d=n.indexOf(u);l[d]=h,h.moved=!1}return l}function u3(n,e,r,i){const s=i==="x"?"w":"h";e[i]+=1;const o=n.findIndex(a=>a.i===e.i);for(let a=o+1;a<n.length;a++){const l=n[a];if(l!==void 0&&!l.static){if(l.y>e.y+e.h)break;u_(e,l)&&u3(n,l,r+e[s],i)}}e[i]=r}function Bxe(n,e,r,i){for(e.y=Math.min(i,e.y);e.y>0&&!So(n,e);)e.y--;let s;for(;(s=So(n,e))!==void 0;)u3(r,e,s.y+s.h,"y");return e.y=Math.max(e.y,0),e}function zxe(n,e,r,i){for(;e.x>0&&!So(n,e);)e.x--;let s;for(;(s=So(n,e))!==void 0;)if(u3(i,e,s.x+s.w,"x"),e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!So(n,e);)e.x--;return e.x=Math.max(e.x,0),e}var ete={type:"vertical",allowOverlap:!1,compact(n,e){const r=l3(n);let i=nm(r);const s=Jee(n),o=new Array(n.length);for(let a=0;a<s.length;a++){const l=s[a];if(l===void 0)continue;let c=Jc(l);c.static||(c=Bxe(r,c,s,i),i=Math.max(i,c.y+c.h),r.push(c));const u=n.indexOf(l);o[u]=c,c.moved=!1}return o},onMove(n,e,r,i,s){const o=Do(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},tte={type:"horizontal",allowOverlap:!1,compact(n,e){const r=l3(n),i=Zee(n),s=new Array(n.length);for(let o=0;o<i.length;o++){const a=i[o];if(a===void 0)continue;let l=Jc(a);l.static||(l=zxe(r,l,e,i),r.push(l));const c=n.indexOf(a);s[c]=l,l.moved=!1}return s},onMove(n,e,r,i,s){const o=Do(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},HF={type:null,allowOverlap:!1,compact(n,e){return Do(n)},onMove(n,e,r,i,s){const o=Do(n),a=o.find(l=>l.i===e.i);return a&&(a.x=r,a.y=i,a.moved=!0),o}},Uxe={...ete,allowOverlap:!0,compact(n,e){return Do(n)}},Wxe={...tte,allowOverlap:!0,compact(n,e){return Do(n)}};function d3(n,e=!1,r=!1){let i;return e?n==="vertical"?i=Uxe:n==="horizontal"?i=Wxe:i=HF:n==="vertical"?i=ete:n==="horizontal"?i=tte:i=HF,r?{...i,preventCollision:r}:i}function nte(n){return Object.keys(n).sort((r,i)=>n[r]-n[i])}function VF(n,e){const r=nte(n);let i=r[0];if(i===void 0)throw new Error("No breakpoints defined");for(let s=1;s<r.length;s++){const o=r[s];if(o===void 0)continue;const a=n[o];e>a&&(i=o)}return i}function YF(n,e){const r=e[n];if(r===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(n)} is missing!`);return r}function Wk(n,e,r,i,s,o){const a=n[r];if(a)return Do(a);let l=n[i];const c=nte(e),u=c.slice(c.indexOf(r));for(let d=0;d<u.length;d++){const f=u[d];if(f===void 0)continue;const m=n[f];if(m){l=m;break}}const h=Do(l||[]);return rl(c3(h,{cols:s}),o,s)}function mv(n,e){if(Array.isArray(n))return n;const r=n,i=r[e];if(i!==void 0)return i;const s=Object.keys(r);for(const o of s){const a=r[o];if(a!==void 0)return a}return[10,10]}function d_(n){const{margin:e,containerPadding:r,containerWidth:i,cols:s}=n;return(i-e[0]*(s-1)-r[0]*2)/s}function Ow(n,e,r){return Number.isFinite(n)?Math.round(e*n+Math.max(0,n-1)*r):n}function Cu(n,e,r,i,s,o,a){const{margin:l,containerPadding:c,rowHeight:u}=n,h=d_(n);let d,f,m,g;return a?(d=Math.round(a.width),f=Math.round(a.height)):(d=Ow(i,h,l[0]),f=Ow(s,u,l[1])),o?(m=Math.round(o.top),g=Math.round(o.left)):a?(m=Math.round(a.top),g=Math.round(a.left)):(m=Math.round((u+l[1])*r+c[1]),g=Math.round((h+l[0])*e+c[0])),{top:m,left:g,width:d,height:f}}function Cx(n,e,r,i,s){const{margin:o,containerPadding:a,cols:l,rowHeight:c,maxRows:u}=n,h=d_(n);let d=Math.round((r-a[0])/(h+o[0])),f=Math.round((e-a[1])/(c+o[1]));return d=oa(d,0,l-i),f=oa(f,0,u-s),{x:d,y:f}}function qxe(n,e,r,i,s,o){const{margin:a,maxRows:l,cols:c,rowHeight:u}=n,h=d_(n),d=Math.round((e+a[0])/(h+a[0])),f=Math.round((r+a[1])/(u+a[1]));let m=oa(d,0,c-i),g=oa(f,0,l-s);return(o==="sw"||o==="w"||o==="nw")&&(m=oa(d,0,c)),(o==="nw"||o==="n"||o==="ne")&&(g=oa(f,0,l)),{w:m,h:g}}function oa(n,e,r){return Math.max(Math.min(n,r),e)}var h_={exports:{}},rte={},ite={exports:{}},Hxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vxe=Hxe,Yxe=Vxe;function ste(){}function ote(){}ote.resetWarningCache=ste;var Gxe=function(){function n(i,s,o,a,l,c){if(c!==Yxe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ote,resetWarningCache:ste};return r.PropTypes=r,r};ite.exports=Gxe();var Lb=ite.exports;const be=C1(Lb);var BI={exports:{}};function ate(n){var e,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(r=ate(n[e]))&&(i&&(i+=" "),i+=r)}else for(r in n)n[r]&&(i&&(i+=" "),i+=r);return i}function GF(){for(var n,e,r=0,i="",s=arguments.length;r<s;r++)(n=arguments[r])&&(e=ate(n))&&(i&&(i+=" "),i+=e);return i}BI.exports=GF,BI.exports.clsx=GF;var Kxe=BI.exports,ir={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.dontSetMe=ewe;va.findInArray=Xxe;va.int=Zxe;va.isFunction=Qxe;va.isNum=Jxe;function Xxe(n,e){for(let r=0,i=n.length;r<i;r++)if(e.apply(e,[n[r],r,n]))return n[r]}function Qxe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function Jxe(n){return typeof n=="number"&&!isNaN(n)}function Zxe(n){return parseInt(n,10)}function ewe(n,e,r){if(n[e])return new Error(`Invalid prop ${e} passed to ${r} - do not set this, set it on the child.`)}var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.browserPrefixToKey=cte;Zd.browserPrefixToStyle=twe;Zd.default=void 0;Zd.getPrefix=lte;const qk=["Moz","Webkit","O","ms"];function lte(){var r,i;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(i=(r=window.document)==null?void 0:r.documentElement)==null?void 0:i.style;if(!e||n in e)return"";for(let s=0;s<qk.length;s++)if(cte(n,qk[s])in e)return qk[s];return""}function cte(n,e){return e?`${e}${nwe(n)}`:n}function twe(n,e){return e?`-${e.toLowerCase()}-${n}`:n}function nwe(n){let e="",r=!0;for(let i=0;i<n.length;i++)r?(e+=n[i].toUpperCase(),r=!1):n[i]==="-"?r=!0:e+=n[i];return e}Zd.default=lte();Object.defineProperty(ir,"__esModule",{value:!0});ir.addClassName=hte;ir.addEvent=iwe;ir.addUserSelectStyles=mwe;ir.createCSSTransform=dwe;ir.createSVGTransform=hwe;ir.getTouch=fwe;ir.getTouchIdentifier=pwe;ir.getTranslation=h3;ir.innerHeight=lwe;ir.innerWidth=cwe;ir.matchesSelector=dte;ir.matchesSelectorAndParentsTo=rwe;ir.offsetXYFromParent=uwe;ir.outerHeight=owe;ir.outerWidth=awe;ir.removeClassName=fte;ir.removeEvent=swe;ir.scheduleRemoveUserSelectStyles=gwe;var gs=va,KF=ute(Zd);function ute(n,e){if(typeof WeakMap=="function")var r=new WeakMap,i=new WeakMap;return(ute=function(s,o){if(!o&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=o?i:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(n,e)}let gv="";function dte(n,e){return gv||(gv=(0,gs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,gs.isFunction)(n[r])})),(0,gs.isFunction)(n[gv])?n[gv](e):!1}function rwe(n,e,r){let i=n;do{if(dte(i,e))return!0;if(i===r)return!1;i=i.parentNode}while(i);return!1}function iwe(n,e,r,i){if(!n)return;const s={capture:!0,...i};n.addEventListener?n.addEventListener(e,r,s):n.attachEvent?n.attachEvent("on"+e,r):n["on"+e]=r}function swe(n,e,r,i){if(!n)return;const s={capture:!0,...i};n.removeEventListener?n.removeEventListener(e,r,s):n.detachEvent?n.detachEvent("on"+e,r):n["on"+e]=null}function owe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,gs.int)(r.borderTopWidth),e+=(0,gs.int)(r.borderBottomWidth),e}function awe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,gs.int)(r.borderLeftWidth),e+=(0,gs.int)(r.borderRightWidth),e}function lwe(n){let e=n.clientHeight;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,gs.int)(r.paddingTop),e-=(0,gs.int)(r.paddingBottom),e}function cwe(n){let e=n.clientWidth;const r=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,gs.int)(r.paddingLeft),e-=(0,gs.int)(r.paddingRight),e}function uwe(n,e,r){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(n.clientX+e.scrollLeft-s.left)/r,a=(n.clientY+e.scrollTop-s.top)/r;return{x:o,y:a}}function dwe(n,e){const r=h3(n,e,"px");return{[(0,KF.browserPrefixToKey)("transform",KF.default)]:r}}function hwe(n,e){return h3(n,e,"")}function h3(n,e,r){let{x:i,y:s}=n,o=`translate(${i}${r},${s}${r})`;if(e){const a=`${typeof e.x=="string"?e.x:e.x+r}`,l=`${typeof e.y=="string"?e.y:e.y+r}`;o=`translate(${a}, ${l})`+o}return o}function fwe(n,e){return n.targetTouches&&(0,gs.findInArray)(n.targetTouches,r=>e===r.identifier)||n.changedTouches&&(0,gs.findInArray)(n.changedTouches,r=>e===r.identifier)}function pwe(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function mwe(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&hte(n.body,"react-draggable-transparent-selection")}function gwe(n){window.requestAnimationFrame?window.requestAnimationFrame(()=>{XF(n)}):XF(n)}function XF(n){if(n)try{if(n.body&&fte(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function hte(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(n.className+=` ${e}`)}function fte(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.canDragX=vwe;xa.canDragY=xwe;xa.createCoreData=_we;xa.createDraggableData=Swe;xa.getBoundPosition=bwe;xa.getControlPosition=wwe;xa.snapToGrid=ywe;var is=va,of=ir;function bwe(n,e,r){if(!n.props.bounds)return[e,r];let{bounds:i}=n.props;i=typeof i=="string"?i:kwe(i);const s=f3(n);if(typeof i=="string"){const{ownerDocument:o}=s,a=o.defaultView;let l;if(i==="parent"?l=s.parentNode:l=s.getRootNode().querySelector(i),!(l instanceof a.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const c=l,u=a.getComputedStyle(s),h=a.getComputedStyle(c);i={left:-s.offsetLeft+(0,is.int)(h.paddingLeft)+(0,is.int)(u.marginLeft),top:-s.offsetTop+(0,is.int)(h.paddingTop)+(0,is.int)(u.marginTop),right:(0,of.innerWidth)(c)-(0,of.outerWidth)(s)-s.offsetLeft+(0,is.int)(h.paddingRight)-(0,is.int)(u.marginRight),bottom:(0,of.innerHeight)(c)-(0,of.outerHeight)(s)-s.offsetTop+(0,is.int)(h.paddingBottom)-(0,is.int)(u.marginBottom)}}return(0,is.isNum)(i.right)&&(e=Math.min(e,i.right)),(0,is.isNum)(i.bottom)&&(r=Math.min(r,i.bottom)),(0,is.isNum)(i.left)&&(e=Math.max(e,i.left)),(0,is.isNum)(i.top)&&(r=Math.max(r,i.top)),[e,r]}function ywe(n,e,r){const i=Math.round(e/n[0])*n[0],s=Math.round(r/n[1])*n[1];return[i,s]}function vwe(n){return n.props.axis==="both"||n.props.axis==="x"}function xwe(n){return n.props.axis==="both"||n.props.axis==="y"}function wwe(n,e,r){const i=typeof e=="number"?(0,of.getTouch)(n,e):null;if(typeof e=="number"&&!i)return null;const s=f3(r),o=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,of.offsetXYFromParent)(i||n,o,r.props.scale)}function _we(n,e,r){const i=!(0,is.isNum)(n.lastX),s=f3(n);return i?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:r,x:e,y:r}:{node:s,deltaX:e-n.lastX,deltaY:r-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:r}}function Swe(n,e){const r=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/r,y:n.state.y+e.deltaY/r,deltaX:e.deltaX/r,deltaY:e.deltaY/r,lastX:n.state.x,lastY:n.state.y}}function kwe(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function f3(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var f_={},p_={};Object.defineProperty(p_,"__esModule",{value:!0});p_.default=Cwe;function Cwe(){}Object.defineProperty(f_,"__esModule",{value:!0});f_.default=void 0;var Hk=pte(E),mi=p3(Lb),Ewe=p3(ba),ii=ir,Xl=xa,Vk=va,$m=p3(p_);function p3(n){return n&&n.__esModule?n:{default:n}}function pte(n,e){if(typeof WeakMap=="function")var r=new WeakMap,i=new WeakMap;return(pte=function(s,o){if(!o&&s&&s.__esModule)return s;var a,l,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(a=o?i:r){if(a.has(s))return a.get(s);a.set(s,c)}for(const u in s)u!=="default"&&{}.hasOwnProperty.call(s,u)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,u))&&(l.get||l.set)?a(c,u,l):c[u]=s[u]);return c})(n,e)}function gi(n,e,r){return(e=Twe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Twe(n){var e=Pwe(n,"string");return typeof e=="symbol"?e:e+""}function Pwe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const lo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ql=lo.mouse,m_=class extends Hk.Component{constructor(){super(...arguments),gi(this,"dragging",!1),gi(this,"lastX",NaN),gi(this,"lastY",NaN),gi(this,"touchIdentifier",null),gi(this,"mounted",!1),gi(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=r;if(this.props.disabled||!(e.target instanceof i.defaultView.Node)||this.props.handle&&!(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.handle,r)||this.props.cancel&&(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.cancel,r))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ii.getTouchIdentifier)(e);this.touchIdentifier=s;const o=(0,Xl.getControlPosition)(e,s,this);if(o==null)return;const{x:a,y:l}=o,c=(0,Xl.createCoreData)(this,a,l);(0,$m.default)("DraggableCore: handleDragStart: %j",c),(0,$m.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ii.addUserSelectStyles)(i),this.dragging=!0,this.lastX=a,this.lastY=l,(0,ii.addEvent)(i,Ql.move,this.handleDrag),(0,ii.addEvent)(i,Ql.stop,this.handleDragStop))}),gi(this,"handleDrag",e=>{const r=(0,Xl.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:s}=r;if(Array.isArray(this.props.grid)){let l=i-this.lastX,c=s-this.lastY;if([l,c]=(0,Xl.snapToGrid)(this.props.grid,l,c),!l&&!c)return;i=this.lastX+l,s=this.lastY+c}const o=(0,Xl.createCoreData)(this,i,s);if((0,$m.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=i,this.lastY=s}),gi(this,"handleDragStop",e=>{if(!this.dragging)return;const r=(0,Xl.getControlPosition)(e,this.touchIdentifier,this);if(r==null)return;let{x:i,y:s}=r;if(Array.isArray(this.props.grid)){let c=i-this.lastX||0,u=s-this.lastY||0;[c,u]=(0,Xl.snapToGrid)(this.props.grid,c,u),i=this.lastX+c,s=this.lastY+u}const o=(0,Xl.createCoreData)(this,i,s);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,$m.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,$m.default)("DraggableCore: Removing handlers"),(0,ii.removeEvent)(l.ownerDocument,Ql.move,this.handleDrag),(0,ii.removeEvent)(l.ownerDocument,Ql.stop,this.handleDragStop))}),gi(this,"onMouseDown",e=>(Ql=lo.mouse,this.handleDragStart(e))),gi(this,"onMouseUp",e=>(Ql=lo.mouse,this.handleDragStop(e))),gi(this,"onTouchStart",e=>(Ql=lo.touch,this.handleDragStart(e))),gi(this,"onTouchEnd",e=>(Ql=lo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ii.addEvent)(e,lo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:r}=e;(0,ii.removeEvent)(r,lo.mouse.move,this.handleDrag),(0,ii.removeEvent)(r,lo.touch.move,this.handleDrag),(0,ii.removeEvent)(r,lo.mouse.stop,this.handleDragStop),(0,ii.removeEvent)(r,lo.touch.stop,this.handleDragStop),(0,ii.removeEvent)(e,lo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(r)}}findDOMNode(){var e,r,i;return(e=this.props)!=null&&e.nodeRef?(i=(r=this.props)==null?void 0:r.nodeRef)==null?void 0:i.current:Ewe.default.findDOMNode(this)}render(){return Hk.cloneElement(Hk.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};f_.default=m_;gi(m_,"displayName","DraggableCore");gi(m_,"propTypes",{allowAnyClick:mi.default.bool,allowMobileScroll:mi.default.bool,children:mi.default.node.isRequired,disabled:mi.default.bool,enableUserSelectHack:mi.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mi.default.arrayOf(mi.default.number),handle:mi.default.string,cancel:mi.default.string,nodeRef:mi.default.object,onStart:mi.default.func,onDrag:mi.default.func,onStop:mi.default.func,onMouseDown:mi.default.func,scale:mi.default.number,className:Vk.dontSetMe,style:Vk.dontSetMe,transform:Vk.dontSetMe});gi(m_,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),n.default=void 0;var e=d(E),r=h(Lb),i=h(ba),s=Kxe,o=ir,a=xa,l=va,c=h(f_),u=h(p_);function h(v){return v&&v.__esModule?v:{default:v}}function d(v,w){if(typeof WeakMap=="function")var k=new WeakMap,S=new WeakMap;return(d=function(_,C){if(!C&&_&&_.__esModule)return _;var P,T,O={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return O;if(P=C?S:k){if(P.has(_))return P.get(_);P.set(_,O)}for(const D in _)D!=="default"&&{}.hasOwnProperty.call(_,D)&&((T=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,D))&&(T.get||T.set)?P(O,D,T):O[D]=_[D]);return O})(v,w)}function f(){return f=Object.assign?Object.assign.bind():function(v){for(var w=1;w<arguments.length;w++){var k=arguments[w];for(var S in k)({}).hasOwnProperty.call(k,S)&&(v[S]=k[S])}return v},f.apply(null,arguments)}function m(v,w,k){return(w=g(w))in v?Object.defineProperty(v,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):v[w]=k,v}function g(v){var w=b(v,"string");return typeof w=="symbol"?w:w+""}function b(v,w){if(typeof v!="object"||!v)return v;var k=v[Symbol.toPrimitive];if(k!==void 0){var S=k.call(v,w);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(v)}class y extends e.Component{static getDerivedStateFromProps(w,k){let{position:S}=w,{prevPropsPosition:_}=k;return S&&(!_||S.x!==_.x||S.y!==_.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:_}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(w){super(w),m(this,"onDragStart",(k,S)=>{if((0,u.default)("Draggable: onDragStart: %j",S),this.props.onStart(k,(0,a.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(k,S)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",S);const _=(0,a.createDraggableData)(this,S),C={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:O}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[D,I]=(0,a.getBoundPosition)(this,C.x,C.y);C.x=D,C.y=I,C.slackX=this.state.slackX+(T-C.x),C.slackY=this.state.slackY+(O-C.y),_.x=C.x,_.y=C.y,_.deltaX=C.x-this.state.x,_.deltaY=C.y-this.state.y}if(this.props.onDrag(k,_)===!1)return!1;this.setState(C)}),m(this,"onDragStop",(k,S)=>{if(!this.state.dragging||this.props.onStop(k,(0,a.createDraggableData)(this,S))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",S);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:O}=this.props.position;C.x=T,C.y=O}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,k;return((k=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:k.current)??i.default.findDOMNode(this)}render(){const{axis:w,bounds:k,children:S,defaultPosition:_,defaultClassName:C,defaultClassNameDragging:P,defaultClassNameDragged:T,position:O,positionOffset:D,scale:I,...U}=this.props;let B={},z=null;const F=!!!O||this.state.dragging,N=O||_,R={x:(0,a.canDragX)(this)&&F?this.state.x:N.x,y:(0,a.canDragY)(this)&&F?this.state.y:N.y};this.state.isElementSVG?z=(0,o.createSVGTransform)(R,D):B=(0,o.createCSSTransform)(R,D);const W=(0,s.clsx)(S.props.className||"",C,{[P]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,f({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:W,style:{...S.props.style,...B},transform:z}))}}n.default=y,m(y,"displayName","Draggable"),m(y,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),m(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(rte);const{default:mte,DraggableCore:Mwe}=rte;h_.exports=mte;h_.exports.default=mte;var Dwe=h_.exports.DraggableCore=Mwe,Owe=h_.exports,m3={exports:{}},Fb={},g3={};g3.__esModule=!0;g3.cloneElement=Lwe;var Iwe=Awe(E);function Awe(n){return n&&n.__esModule?n:{default:n}}function QF(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function JF(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(r),!0).forEach(function(i){Rwe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Rwe(n,e,r){return e=Nwe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Nwe(n){var e=jwe(n,"string");return typeof e=="symbol"?e:String(e)}function jwe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lwe(n,e){return e.style&&n.props.style&&(e.style=JF(JF({},n.props.style),e.style)),e.className&&n.props.className&&(e.className=n.props.className+" "+e.className),Iwe.default.cloneElement(n,e)}var $b={};$b.__esModule=!0;$b.resizableProps=void 0;var Bt=Fwe(Lb);function Fwe(n){return n&&n.__esModule?n:{default:n}}var $we={axis:Bt.default.oneOf(["both","x","y","none"]),className:Bt.default.string,children:Bt.default.element.isRequired,draggableOpts:Bt.default.shape({allowAnyClick:Bt.default.bool,cancel:Bt.default.string,children:Bt.default.node,disabled:Bt.default.bool,enableUserSelectHack:Bt.default.bool,offsetParent:Bt.default.node,grid:Bt.default.arrayOf(Bt.default.number),handle:Bt.default.string,nodeRef:Bt.default.object,onStart:Bt.default.func,onDrag:Bt.default.func,onStop:Bt.default.func,onMouseDown:Bt.default.func,scale:Bt.default.number}),height:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=r[0];if(s.axis==="both"||s.axis==="y"){var o;return(o=Bt.default.number).isRequired.apply(o,r)}return Bt.default.number.apply(Bt.default,r)},handle:Bt.default.oneOfType([Bt.default.node,Bt.default.func]),handleSize:Bt.default.arrayOf(Bt.default.number),lockAspectRatio:Bt.default.bool,maxConstraints:Bt.default.arrayOf(Bt.default.number),minConstraints:Bt.default.arrayOf(Bt.default.number),onResizeStop:Bt.default.func,onResizeStart:Bt.default.func,onResize:Bt.default.func,resizeHandles:Bt.default.arrayOf(Bt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Bt.default.number,width:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=r[0];if(s.axis==="both"||s.axis==="x"){var o;return(o=Bt.default.number).isRequired.apply(o,r)}return Bt.default.number.apply(Bt.default,r)}};$b.resizableProps=$we;Fb.__esModule=!0;Fb.default=void 0;var Bm=qwe(E),Bwe=Owe,zwe=g3,Uwe=$b,Wwe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function gte(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(gte=function(s){return s?r:e})(n)}function qwe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=gte(e);if(r&&r.has(n))return r.get(n);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=s?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=n[o]}return i.default=n,r&&r.set(n,i),i}function zI(){return zI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},zI.apply(this,arguments)}function Hwe(n,e){if(n==null)return{};var r={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=n[s]);return r}function ZF(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function Yk(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(r),!0).forEach(function(i){Vwe(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Vwe(n,e,r){return e=Ywe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ywe(n){var e=Gwe(n,"string");return typeof e=="symbol"?e:String(e)}function Gwe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kwe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,UI(n,e)}function UI(n,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},UI(n,e)}var b3=function(n){Kwe(e,n);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,i.handleRefs={},i.lastHandleRect=null,i.slack=null,i}var r=e.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(s,o){var a=this.props,l=a.minConstraints,c=a.maxConstraints,u=a.lockAspectRatio;if(!l&&!c&&!u)return[s,o];if(u){var h=this.props.width/this.props.height,d=s-this.props.width,f=o-this.props.height;Math.abs(d)>Math.abs(f*h)?o=s/h:s=o*h}var m=s,g=o,b=this.slack||[0,0],y=b[0],v=b[1];return s+=y,o+=v,l&&(s=Math.max(l[0],s),o=Math.max(l[1],o)),c&&(s=Math.min(c[0],s),o=Math.min(c[1],o)),this.slack=[y+(m-s),v+(g-o)],[s,o]},r.resizeHandler=function(s,o){var a=this;return function(l,c){var u=c.node,h=c.deltaX,d=c.deltaY;s==="onResizeStart"&&a.resetData();var f=(a.props.axis==="both"||a.props.axis==="x")&&o!=="n"&&o!=="s",m=(a.props.axis==="both"||a.props.axis==="y")&&o!=="e"&&o!=="w";if(!(!f&&!m)){var g=o[0],b=o[o.length-1],y=u.getBoundingClientRect();if(a.lastHandleRect!=null){if(b==="w"){var v=y.left-a.lastHandleRect.left;h+=v}if(g==="n"){var w=y.top-a.lastHandleRect.top;d+=w}}a.lastHandleRect=y,b==="w"&&(h=-h),g==="n"&&(d=-d);var k=a.props.width+(f?h/a.props.transformScale:0),S=a.props.height+(m?d/a.props.transformScale:0),_=a.runConstraints(k,S);k=_[0],S=_[1];var C=k!==a.props.width||S!==a.props.height,P=typeof a.props[s]=="function"?a.props[s]:null,T=s==="onResize"&&!C;P&&!T&&(l.persist==null||l.persist(),P(l,{node:u,size:{width:k,height:S},handle:o})),s==="onResizeStop"&&a.resetData()}}},r.renderResizeHandle=function(s,o){var a=this.props.handle;if(!a)return Bm.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+s,ref:o});if(typeof a=="function")return a(s,o);var l=typeof a.type=="string",c=Yk({ref:o},l?{}:{handleAxis:s});return Bm.cloneElement(a,c)},r.render=function(){var s=this,o=this.props,a=o.children,l=o.className,c=o.draggableOpts;o.width,o.height,o.handle,o.handleSize,o.lockAspectRatio,o.axis,o.minConstraints,o.maxConstraints,o.onResize,o.onResizeStop,o.onResizeStart;var u=o.resizeHandles;o.transformScale;var h=Hwe(o,Wwe);return(0,zwe.cloneElement)(a,Yk(Yk({},h),{},{className:(l?l+" ":"")+"react-resizable",children:[].concat(a.props.children,u.map(function(d){var f,m=(f=s.handleRefs[d])!=null?f:s.handleRefs[d]=Bm.createRef();return Bm.createElement(Bwe.DraggableCore,zI({},c,{nodeRef:m,key:"resizableHandle-"+d,onStop:s.resizeHandler("onResizeStop",d),onStart:s.resizeHandler("onResizeStart",d),onDrag:s.resizeHandler("onResize",d)}),s.renderResizeHandle(d,m))}))}))},e}(Bm.Component);Fb.default=b3;b3.propTypes=Uwe.resizableProps;b3.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var g_={};g_.__esModule=!0;g_.default=void 0;var Gk=e1e(E),Xwe=bte(Lb),Qwe=bte(Fb),Jwe=$b,Zwe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function bte(n){return n&&n.__esModule?n:{default:n}}function yte(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(yte=function(s){return s?r:e})(n)}function e1e(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var r=yte(e);if(r&&r.has(n))return r.get(n);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var a=s?Object.getOwnPropertyDescriptor(n,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=n[o]}return i.default=n,r&&r.set(n,i),i}function WI(){return WI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},WI.apply(this,arguments)}function e8(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function Iw(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(r),!0).forEach(function(i){t1e(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function t1e(n,e,r){return e=n1e(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function n1e(n){var e=r1e(n,"string");return typeof e=="symbol"?e:String(e)}function r1e(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function i1e(n,e){if(n==null)return{};var r={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=n[s]);return r}function s1e(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,qI(n,e)}function qI(n,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},qI(n,e)}var vte=function(n){s1e(e,n);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,i.state={width:i.props.width,height:i.props.height,propsWidth:i.props.width,propsHeight:i.props.height},i.onResize=function(l,c){var u=c.size;i.props.onResize?(l.persist==null||l.persist(),i.setState(u,function(){return i.props.onResize&&i.props.onResize(l,c)})):i.setState(u)},i}e.getDerivedStateFromProps=function(s,o){return o.propsWidth!==s.width||o.propsHeight!==s.height?{width:s.width,height:s.height,propsWidth:s.width,propsHeight:s.height}:null};var r=e.prototype;return r.render=function(){var s=this.props,o=s.handle,a=s.handleSize;s.onResize;var l=s.onResizeStart,c=s.onResizeStop,u=s.draggableOpts,h=s.minConstraints,d=s.maxConstraints,f=s.lockAspectRatio,m=s.axis;s.width,s.height;var g=s.resizeHandles,b=s.style,y=s.transformScale,v=i1e(s,Zwe);return Gk.createElement(Qwe.default,{axis:m,draggableOpts:u,handle:o,handleSize:a,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:h,onResizeStart:l,onResize:this.onResize,onResizeStop:c,resizeHandles:g,transformScale:y,width:this.state.width},Gk.createElement("div",WI({},v,{style:Iw(Iw({},b),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(Gk.Component);g_.default=vte;vte.propTypes=Iw(Iw({},Jwe.resizableProps),{},{children:Xwe.default.element});m3.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};var o1e=m3.exports.Resizable=Fb.default;m3.exports.ResizableBox=g_.default;function xte(n){var e,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(r=xte(n[e]))&&(i&&(i+=" "),i+=r)}else for(r in n)n[r]&&(i&&(i+=" "),i+=r);return i}function y3(){for(var n,e,r=0,i="",s=arguments.length;r<s;r++)(n=arguments[r])&&(e=xte(n))&&(i&&(i+=" "),i+=e);return i}function wte(n){return function(r,i,s,o,a,l,c){return n(r,i,c)}}function b_(n){return function(r,i,s,o){if(!r||!i||typeof r!="object"||typeof i!="object")return n(r,i,s,o);var a=o.get(r),l=o.get(i);if(a&&l)return a===i&&l===r;o.set(r,i),o.set(i,r);var c=n(r,i,s,o);return o.delete(r),o.delete(i),c}}function _te(n,e){var r={};for(var i in n)r[i]=n[i];for(var i in e)r[i]=e[i];return r}function t8(n){return n.constructor===Object||n.constructor==null}function n8(n){return typeof n.then=="function"}function y_(n,e){return n===e||n!==n&&e!==e}var a1e="[object Arguments]",l1e="[object Boolean]",c1e="[object Date]",u1e="[object RegExp]",d1e="[object Map]",h1e="[object Number]",f1e="[object Object]",p1e="[object Set]",m1e="[object String]",r8=Object.prototype.toString;function v_(n){var e=n.areArraysEqual,r=n.areDatesEqual,i=n.areMapsEqual,s=n.areObjectsEqual,o=n.areRegExpsEqual,a=n.areSetsEqual,l=n.createIsNestedEqual,c=l(u);function u(h,d,f){if(h===d)return!0;if(!h||!d||typeof h!="object"||typeof d!="object")return h!==h&&d!==d;if(t8(h)&&t8(d))return s(h,d,c,f);var m=Array.isArray(h),g=Array.isArray(d);if(m||g)return m===g&&e(h,d,c,f);var b=r8.call(h);return b!==r8.call(d)?!1:b===c1e?r(h,d,c,f):b===u1e?o(h,d,c,f):b===d1e?i(h,d,c,f):b===p1e?a(h,d,c,f):b===f1e||b===a1e?n8(h)||n8(d)?!1:s(h,d,c,f):b===l1e||b===h1e||b===m1e?y_(h.valueOf(),d.valueOf()):!1}return u}function Ste(n,e,r,i){var s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!r(n[s],e[s],s,s,n,e,i))return!1;return!0}var g1e=b_(Ste);function kte(n,e){return y_(n.valueOf(),e.valueOf())}function Cte(n,e,r,i){var s=n.size===e.size;if(!s)return!1;if(!n.size)return!0;var o={},a=0;return n.forEach(function(l,c){if(s){var u=!1,h=0;e.forEach(function(d,f){!u&&!o[h]&&(u=r(c,f,a,h,n,e,i)&&r(l,d,c,f,n,e,i))&&(o[h]=!0),h++}),a++,s=u}}),s}var b1e=b_(Cte),y1e="_owner",v1e=Object.prototype.hasOwnProperty;function Ete(n,e,r,i){var s=Object.keys(n),o=s.length;if(Object.keys(e).length!==o)return!1;for(var a;o-- >0;){if(a=s[o],a===y1e){var l=!!n.$$typeof,c=!!e.$$typeof;if((l||c)&&l!==c)return!1}if(!v1e.call(e,a)||!r(n[a],e[a],a,a,n,e,i))return!1}return!0}var x1e=b_(Ete);function Tte(n,e){return n.source===e.source&&n.flags===e.flags}function Pte(n,e,r,i){var s=n.size===e.size;if(!s)return!1;if(!n.size)return!0;var o={};return n.forEach(function(a,l){if(s){var c=!1,u=0;e.forEach(function(h,d){!c&&!o[u]&&(c=r(a,h,l,d,n,e,i))&&(o[u]=!0),u++}),s=c}}),s}var w1e=b_(Pte),Mte=Object.freeze({areArraysEqual:Ste,areDatesEqual:kte,areMapsEqual:Cte,areObjectsEqual:Ete,areRegExpsEqual:Tte,areSetsEqual:Pte,createIsNestedEqual:wte}),Dte=Object.freeze({areArraysEqual:g1e,areDatesEqual:kte,areMapsEqual:b1e,areObjectsEqual:x1e,areRegExpsEqual:Tte,areSetsEqual:w1e,createIsNestedEqual:wte}),_1e=v_(Mte);function fc(n,e){return _1e(n,e,void 0)}v_(_te(Mte,{createIsNestedEqual:function(){return y_}}));v_(Dte);v_(_te(Dte,{createIsNestedEqual:function(){return y_}}));function i8(n){const{children:e,cols:r,containerWidth:i,margin:s,containerPadding:o,rowHeight:a,maxRows:l,isDraggable:c,isResizable:u,isBounded:h,static:d,useCSSTransforms:f=!0,usePercentages:m=!1,transformScale:g=1,droppingPosition:b,className:y="",style:v,handle:w="",cancel:k="",x:S,y:_,w:C,h:P,minW:T=1,maxW:O=1/0,minH:D=1,maxH:I=1/0,i:U,resizeHandles:B,resizeHandle:z,onDragStart:j,onDrag:F,onDragStop:N,onResizeStart:R,onResize:W,onResizeStop:Y}=n,[K,H]=E.useState(!1),[Q,G]=E.useState(!1),X=E.useRef(null),de=E.useRef({left:0,top:0}),ye=E.useRef({top:0,left:0,width:0,height:0}),se=E.useRef(void 0),ie=E.useMemo(()=>({cols:r,containerPadding:o,containerWidth:i,margin:s,maxRows:l,rowHeight:a}),[r,o,i,s,l,a]),Pe=E.useCallback(ge=>{if(f)return r3(ge);const J=Yee(ge);return m?{...J,left:WF(ge.left/i),width:WF(ge.width/i)}:J},[f,m,i]),ke=E.useCallback((ge,{node:J})=>{if(!j)return;const{offsetParent:he}=J;if(!he)return;const pe=he.getBoundingClientRect(),_e=J.getBoundingClientRect(),De=_e.left/g,ae=pe.left/g,Xe=_e.top/g,Fe=pe.top/g,te={left:De-ae+he.scrollLeft,top:Xe-Fe+he.scrollTop};de.current=te,H(!0);const{x:ee,y:ne}=Cx(ie,te.top,te.left,C,P);j(U,ee,ne,{e:ge,node:J,newPosition:te})},[j,g,ie,C,P,U]),q=E.useCallback((ge,{node:J,deltaX:he,deltaY:pe})=>{if(!F||!K)return;let _e=de.current.top+pe,De=de.current.left+he;if(h){const{offsetParent:te}=J;if(te){const ee=te.clientHeight-Ow(P,a,s[1]);_e=oa(_e,0,ee);const ne=d_(ie),Ze=i-Ow(C,ne,s[0]);De=oa(De,0,Ze)}}const ae={top:_e,left:De};de.current=ae;const{x:Xe,y:Fe}=Cx(ie,_e,De,C,P);F(U,Xe,Fe,{e:ge,node:J,newPosition:ae})},[F,K,h,P,a,s,ie,i,C,U]),Ee=E.useCallback((ge,{node:J})=>{if(!N||!K)return;const{left:he,top:pe}=de.current,_e={top:pe,left:he};H(!1),de.current={left:0,top:0};const{x:De,y:ae}=Cx(ie,pe,he,C,P);N(U,De,ae,{e:ge,node:J,newPosition:_e})},[N,K,ie,C,P,U]),Je=E.useCallback((ge,{node:J,size:he,handle:pe},_e,De)=>{const ae=De==="onResizeStart"?R:De==="onResize"?W:Y;if(!ae)return;let Xe;J?Xe=Txe(pe,_e,he,i):Xe={...he,top:_e.top,left:_e.left},ye.current=Xe;let{w:Fe,h:te}=qxe(ie,Xe.width,Xe.height,S,_,pe);Fe=oa(Fe,Math.max(T,1),O),te=oa(te,D,I),ae(U,Fe,te,{e:ge.nativeEvent,node:J,size:Xe,handle:pe})},[R,W,Y,i,ie,S,_,T,O,D,I,U]),ct=E.useCallback((ge,J)=>{G(!0);const he=Cu(ie,S,_,C,P),pe={...J,handle:J.handle};Je(ge,pe,he,"onResizeStart")},[Je,ie,S,_,C,P]),$e=E.useCallback((ge,J)=>{const he=Cu(ie,S,_,C,P),pe={...J,handle:J.handle};Je(ge,pe,he,"onResize")},[Je,ie,S,_,C,P]),ut=E.useCallback((ge,J)=>{G(!1),ye.current={top:0,left:0,width:0,height:0};const he=Cu(ie,S,_,C,P),pe={...J,handle:J.handle};Je(ge,pe,he,"onResizeStop")},[Je,ie,S,_,C,P]);E.useEffect(()=>{if(!b)return;const ge=X.current;if(!ge)return;const J=se.current||{left:0,top:0},he=K&&(b.left!==J.left||b.top!==J.top);if(K){if(he){const pe=b.left-de.current.left,_e=b.top-de.current.top,De={node:ge,deltaX:pe,deltaY:_e,lastX:de.current.left,lastY:de.current.top,x:b.left,y:b.top};q(b.e,De)}}else{const pe={node:ge,deltaX:b.left,deltaY:b.top,lastX:0,lastY:0,x:b.left,y:b.top};ke(b.e,pe)}se.current=b},[b,K,ke,q]);const qe=Cu(ie,S,_,C,P,K?de.current:null,Q?ye.current:null),we=Ke.Children.only(e),ze=Cu(ie,0,0,r,0).width,Me=Cu(ie,0,0,T,D),Ie=Cu(ie,0,0,O,I),Ce=[Me.width,Me.height],xe=[Math.min(Ie.width,ze),Math.min(Ie.height,1/0)],L=we.props,re=L.className,fe=L.style;let le=Ke.cloneElement(we,{ref:X,className:y3("react-grid-item",re,y,{static:d,resizing:Q,"react-draggable":c,"react-draggable-dragging":K,dropping:!!b,cssTransforms:f}),style:{...v,...fe,...Pe(qe)}});const ce=z;return le=p.jsx(o1e,{draggableOpts:{disabled:!u},className:u?void 0:"react-resizable-hide",width:qe.width,height:qe.height,minConstraints:Ce,maxConstraints:xe,onResizeStart:ct,onResize:$e,onResizeStop:ut,transformScale:g,resizeHandles:B,handle:ce,children:le}),le=p.jsx(Dwe,{disabled:!c,onStart:ke,onDrag:q,onStop:Ee,handle:w,cancel:".react-resizable-handle"+(k?","+k:""),scale:g,nodeRef:X,children:le}),le}var Ra=()=>{},s8="react-grid-layout",Ote=!1;try{Ote=/firefox/i.test(navigator.userAgent)}catch{}function S1e(n,e){const r=Ke.Children.toArray(n),i=Ke.Children.toArray(e);if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++){const o=r[s],a=i[s];if((o==null?void 0:o.key)!==(a==null?void 0:a.key))return!1}return!0}function o8(n,e,r,i,s){const o=[],a=new Set;Ke.Children.forEach(e,c=>{if(!Ke.isValidElement(c)||c.key===null)return;const u=String(c.key);a.add(u);const h=n.find(d=>d.i===u);if(h)o.push(Jc(h));else{const f=c.props["data-grid"];f?o.push({i:u,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):o.push({i:u,x:0,y:nm(o),w:1,h:1})}});const l=c3(o,{cols:r});return rl(l,i,r,s)}function k1e(n){const{children:e,width:r,gridConfig:i,dragConfig:s,resizeConfig:o,dropConfig:a,positionStrategy:l=Dxe,compactor:c,layout:u=[],droppingItem:h,autoSize:d=!0,className:f="",style:m={},innerRef:g,onLayoutChange:b=Ra,onDragStart:y=Ra,onDrag:v=Ra,onDragStop:w=Ra,onResizeStart:k=Ra,onResize:S=Ra,onResizeStop:_=Ra,onDrop:C=Ra,onDropDragOver:P=Ra}=n,T=E.useMemo(()=>({...Oxe,...i}),[i]),O=E.useMemo(()=>({...Ixe,...s}),[s]),D=E.useMemo(()=>({...Axe,...o}),[o]),I=E.useMemo(()=>({...Rxe,...a}),[a]),{cols:U,rowHeight:B,maxRows:z,margin:j,containerPadding:F}=T,{enabled:N,bounded:R,handle:W,cancel:Y}=O,{enabled:K,handles:H,handleComponent:Q}=D,{enabled:G,defaultItem:X}=I,de=c??d3("vertical"),ye=de.type,se=de.allowOverlap,ie=de.preventCollision??!1,Pe=E.useMemo(()=>h??{i:"__dropping-elem__",...X},[h,X]),ke=l.type==="transform",q=l.scale,Ee=F??j,[Je,ct]=E.useState(!1),[$e,ut]=E.useState(()=>o8(u,e,U,ye,se)),[qe,we]=E.useState(null),[ze,Me]=E.useState(!1),[Ie,Ce]=E.useState(null),[xe,L]=E.useState(),re=E.useRef(null),fe=E.useRef(null),le=E.useRef(null),ce=E.useRef(0),ge=E.useRef($e),J=E.useRef(u),he=E.useRef(e),pe=E.useRef(ye);E.useEffect(()=>{ct(!0),fc($e,u)||b($e)},[]),E.useEffect(()=>{if(qe)return;const Te=!fc(u,J.current),it=!S1e(e,he.current),ve=ye!==pe.current;if(Te||it||ve){const ft=o8(Te?u:$e,e,U,ye,se);ut(ft)}J.current=u,he.current=e,pe.current=ye},[u,e,U,ye,se,qe,$e]),E.useEffect(()=>{!qe&&!fc($e,ge.current)&&(ge.current=$e,b($e))},[$e,qe,b]);const _e=E.useMemo(()=>{if(!d)return;const Te=nm($e),it=Ee[1];return Te*B+(Te-1)*j[1]+it*2+"px"},[d,$e,B,j,Ee]),De=E.useCallback((Te,it,ve,wt)=>{const ft=ju($e,Te);if(!ft)return;const _t={w:ft.w,h:ft.h,x:ft.x,y:ft.y,i:Te};re.current=Jc(ft),le.current=$e,we(_t),y($e,ft,ft,null,wt.e,wt.node)},[$e,y]),ae=E.useCallback((Te,it,ve,wt)=>{const ft=re.current,_t=ju($e,Te);if(!_t)return;const Rt={w:_t.w,h:_t.h,x:_t.x,y:_t.y,i:Te},Mt=Xu($e,_t,it,ve,!0,ie,ye,U,se);v(Mt,ft,_t,Rt,wt.e,wt.node),ut(se?Mt:rl(Mt,ye,U)),we(Rt)},[$e,ie,ye,U,se,v]),Xe=E.useCallback((Te,it,ve,wt)=>{if(!qe)return;const ft=re.current,_t=ju($e,Te);if(!_t)return;const Rt=Xu($e,_t,it,ve,!0,ie,ye,U,se),Mt=se?Rt:rl(Rt,ye,U);w(Mt,ft,_t,null,wt.e,wt.node);const Wt=le.current;re.current=null,le.current=null,we(null),ut(Mt),Wt&&!fc(Wt,Mt)&&b(Mt)},[qe,$e,ie,ye,U,se,w,b]),Fe=E.useCallback((Te,it,ve,wt)=>{const ft=ju($e,Te);ft&&(fe.current=Jc(ft),le.current=$e,Me(!0),k($e,ft,ft,null,wt.e,wt.node))},[$e,k]),te=E.useCallback((Te,it,ve,wt)=>{const ft=fe.current,{handle:_t}=wt;let Rt=!1,Mt,Wt;const[Nt,et]=jxe($e,Te,Xt=>(Mt=Xt.x,Wt=Xt.y,["sw","w","nw","n","ne"].includes(_t)&&(["sw","nw","w"].includes(_t)&&(Mt=Xt.x+(Xt.w-it),it=Xt.x!==Mt&&Mt<0?Xt.w:it,Mt=Mt<0?0:Mt),["ne","n","nw"].includes(_t)&&(Wt=Xt.y+(Xt.h-ve),ve=Xt.y!==Wt&&Wt<0?Xt.h:ve,Wt=Wt<0?0:Wt),Rt=!0),ie&&!se&&Xee($e,{...Xt,w:it,h:ve,x:Mt??Xt.x,y:Wt??Xt.y}).filter(Br=>Br.i!==Xt.i).length>0&&(Wt=Xt.y,ve=Xt.h,Mt=Xt.x,it=Xt.w,Rt=!1),Xt.w=it,Xt.h=ve,Xt));if(!et)return;let Gt=Nt;Rt&&Mt!==void 0&&Wt!==void 0&&(Gt=Xu(Nt,et,Mt,Wt,!0,ie,ye,U,se));const $n={w:et.w,h:et.h,x:et.x,y:et.y,i:Te,static:!0};S(Gt,ft,et,$n,wt.e,wt.node),ut(se?Gt:rl(Gt,ye,U)),we($n)},[$e,ie,se,ye,U,S]),ee=E.useCallback((Te,it,ve,wt)=>{const ft=fe.current,_t=ju($e,Te),Rt=se?$e:rl($e,ye,U);_(Rt,ft,_t??null,null,wt.e,wt.node);const Mt=le.current;fe.current=null,le.current=null,we(null),Me(!1),ut(Rt),Mt&&!fc(Mt,Rt)&&b(Rt)},[$e,se,ye,U,_,b]),ne=E.useCallback(()=>{const Te=rl($e.filter(it=>it.i!==Pe.i),ye,U,se);ut(Te),Ce(null),we(null),L(void 0)},[$e,Pe.i,ye,U,se]),Ze=E.useCallback(Te=>{var Mt;if(Te.preventDefault(),Te.stopPropagation(),Ote&&!((Mt=Te.nativeEvent.target)!=null&&Mt.classList.contains(s8)))return!1;const it=P(Te);if(it===!1)return Ie&&ne(),!1;const ve={...Pe,...it},wt=Te.currentTarget.getBoundingClientRect(),ft=Te.clientX-wt.left,_t=Te.clientY-wt.top,Rt={left:ft/q,top:_t/q,e:Te.nativeEvent};if(Ie)xe&&(xe.left!==ft||xe.top!==_t)&&L(Rt);else{const Nt=Cx({cols:U,margin:j,maxRows:z,rowHeight:B,containerWidth:r,containerPadding:Ee},_t,ft,ve.w,ve.h);Ce(p.jsx("div",{},ve.i)),L(Rt),ut([...$e,{...ve,x:Nt.x,y:Nt.y,static:!1,isDraggable:!0}])}},[Ie,xe,Pe,P,ne,q,U,j,z,B,r,Ee,$e]),je=E.useCallback(Te=>{Te.preventDefault(),Te.stopPropagation(),ce.current--,ce.current===0&&ne()},[ne]),Ve=E.useCallback(Te=>{Te.preventDefault(),Te.stopPropagation(),ce.current++},[]),Ae=E.useCallback(Te=>{Te.preventDefault(),Te.stopPropagation();const it=$e.find(ve=>ve.i===Pe.i);ce.current=0,ne(),C($e,it,Te.nativeEvent)},[$e,Pe.i,ne,C]),Qe=E.useCallback((Te,it)=>{if(!Te||!Te.key)return null;const ve=ju($e,String(Te.key));if(!ve)return null;const wt=typeof ve.isDraggable=="boolean"?ve.isDraggable:!ve.static&&N,ft=typeof ve.isResizable=="boolean"?ve.isResizable:!ve.static&&K,_t=ve.resizeHandles||[...H],Rt=wt&&R&&ve.isBounded!==!1,Mt=Q;return p.jsx(i8,{containerWidth:r,cols:U,margin:j,containerPadding:Ee,maxRows:z,rowHeight:B,cancel:Y,handle:W,onDragStart:De,onDrag:ae,onDragStop:Xe,onResizeStart:Fe,onResize:te,onResizeStop:ee,isDraggable:wt,isResizable:ft,isBounded:Rt,useCSSTransforms:ke&&Je,usePercentages:!Je,transformScale:q,w:ve.w,h:ve.h,x:ve.x,y:ve.y,i:ve.i,minH:ve.minH,minW:ve.minW,maxH:ve.maxH,maxW:ve.maxW,static:ve.static,droppingPosition:it?xe:void 0,resizeHandles:_t,resizeHandle:Mt,children:Te},ve.i)},[$e,r,U,j,Ee,z,B,Y,W,De,ae,Xe,Fe,te,ee,N,K,R,ke,Je,q,xe,H,Q]),lt=()=>qe?p.jsx(i8,{w:qe.w,h:qe.h,x:qe.x,y:qe.y,i:qe.i,className:`react-grid-placeholder ${ze?"placeholder-resizing":""}`,containerWidth:r,cols:U,margin:j,containerPadding:Ee,maxRows:z,rowHeight:B,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:ke,transformScale:q,children:p.jsx("div",{})}):null,He=y3(s8,f),rt={height:_e,...m};return p.jsxs("div",{ref:g,className:He,style:rt,onDrop:G?Ae:void 0,onDragLeave:G?je:void 0,onDragEnter:G?Ve:void 0,onDragOver:G?Ze:void 0,children:[Ke.Children.map(e,Te=>Ke.isValidElement(Te)?Qe(Te):null),G&&Ie&&Qe(Ie,!0),lt()]})}var C1e={lg:1200,md:996,sm:768,xs:480,xxs:0},E1e={lg:12,md:10,sm:6,xs:4,xxs:2},Kk=()=>{};function T1e(n,e,r,i,s){const o=[];Ke.Children.forEach(e,l=>{if(!Ke.isValidElement(l)||l.key===null)return;const c=String(l.key),u=n.find(h=>h.i===c);if(u)o.push({...u,i:c});else{const d=l.props["data-grid"];d?o.push({i:c,x:d.x??0,y:d.y??0,w:d.w??1,h:d.h??1,minW:d.minW,maxW:d.maxW,minH:d.minH,maxH:d.maxH,static:d.static,isDraggable:d.isDraggable,isResizable:d.isResizable,resizeHandles:d.resizeHandles,isBounded:d.isBounded}):o.push({i:c,x:0,y:nm(o),w:1,h:1})}});const a=c3(o,{cols:r});return rl(a,i,r,s)}function P1e(n){const{children:e,width:r,breakpoint:i,breakpoints:s=C1e,cols:o=E1e,layouts:a={},rowHeight:l=150,maxRows:c=1/0,margin:u=[10,10],containerPadding:h=null,compactor:d,onBreakpointChange:f=Kk,onLayoutChange:m=Kk,onWidthChange:g=Kk,...b}=n,y=d??d3("vertical"),v=y.type,w=y.allowOverlap,k=E.useMemo(()=>i??VF(s,r),[]),S=E.useMemo(()=>YF(k,o),[k,o]),_=E.useMemo(()=>Wk(a,s,k,k,S,v),[]),[C,P]=E.useState(k),[T,O]=E.useState(S),[D,I]=E.useState(_),[U,B]=E.useState(a),z=E.useRef(r),j=E.useRef(i),F=E.useRef(s),N=E.useRef(o),R=E.useRef(a),W=E.useRef(v);E.useEffect(()=>{if(!fc(a,R.current)){const G=Wk(a,s,C,C,T,v);I(G),B(a),R.current=a}},[a,s,C,T,v]),E.useEffect(()=>{if(v!==W.current){const G=rl(Do(D),v,T,w),X={...U,[C]:G};I(G),B(X),m(G,X),W.current=v}},[v,D,T,w,U,C,m]),E.useEffect(()=>{const G=r!==z.current,X=i!==j.current,de=!fc(s,F.current),ye=!fc(o,N.current);if(G||X||de||ye){const se=i??VF(s,r),ie=YF(se,o),Pe=C;if(Pe!==se||de||ye){const Ee={...U};Ee[Pe]||(Ee[Pe]=Do(D));let Je=Wk(Ee,s,se,Pe,ie,v);Je=T1e(Je,e,ie,v,w),Ee[se]=Je,P(se),O(ie),I(Je),B(Ee),f(se,ie),m(Je,Ee)}const ke=mv(u,se),q=h?mv(h,se):null;g(r,ke,ie,q),z.current=r,j.current=i,F.current=s,N.current=o}},[r,i,s,o,C,T,D,U,e,v,w,u,h,f,m,g]);const Y=E.useCallback(G=>{const X={...U,[C]:G};I(G),B(X),m(G,X)},[U,C,m]),K=E.useMemo(()=>mv(u,C),[u,C]),H=E.useMemo(()=>h===null?null:mv(h,C),[h,C]),Q=E.useMemo(()=>({cols:T,rowHeight:l,maxRows:c,margin:K,containerPadding:H}),[T,l,c,K,H]);return p.jsx(k1e,{...b,width:r,gridConfig:Q,compactor:y,onLayoutChange:Y,layout:D,children:e})}function Ite(n){const{children:e,width:r,breakpoint:i,breakpoints:s,cols:o,layouts:a,onBreakpointChange:l,onLayoutChange:c,onWidthChange:u,rowHeight:h,maxRows:d,margin:f,containerPadding:m,droppingItem:g,compactType:b,preventCollision:y=!1,allowOverlap:v=!1,verticalCompact:w,isDraggable:k=!0,isBounded:S=!1,draggableHandle:_,draggableCancel:C,isResizable:P=!0,resizeHandles:T=["se"],resizeHandle:O,isDroppable:D=!1,useCSSTransforms:I=!0,transformScale:U=1,autoSize:B,className:z,style:j,innerRef:F,onDragStart:N,onDrag:R,onDragStop:W,onResizeStart:Y,onResize:K,onResizeStop:H,onDrop:Q,onDropDragOver:G}=n;let X=b===void 0?"vertical":b;w===!1&&(X=null);const de={enabled:k,bounded:S,handle:_,cancel:C},ye={enabled:P,handles:T,handleComponent:O},se={enabled:D};let ie;I?U!==1?ie=Mxe(U):ie=Kee:ie=Pxe;const Pe=d3(X,v,y);return p.jsx(P1e,{width:r,breakpoint:i,breakpoints:s,cols:o,layouts:a,rowHeight:h,maxRows:d,margin:f,containerPadding:m,compactor:Pe,dragConfig:de,resizeConfig:ye,dropConfig:se,positionStrategy:ie,droppingItem:g,autoSize:B,className:z,style:j,innerRef:F,onBreakpointChange:l,onLayoutChange:c,onWidthChange:u,onDragStart:N,onDrag:R,onDragStop:W,onResizeStart:Y,onResize:K,onResizeStop:H,onDrop:Q,onDropDragOver:G,children:e})}Ite.displayName="ResponsiveReactGridLayout";var M1e=Ite,D1e="react-grid-layout";function O1e(n){function e(r){const{measureBeforeMount:i=!1,className:s,style:o,...a}=r,[l,c]=E.useState(1280),[u,h]=E.useState(!1),d=E.useRef(null),f=E.useRef(null);return E.useEffect(()=>{h(!0),f.current=new ResizeObserver(g=>{if(d.current instanceof HTMLElement&&g[0]){const y=g[0].contentRect.width;c(y)}});const m=d.current;return m instanceof HTMLElement&&f.current.observe(m),()=>{var g;m instanceof HTMLElement&&f.current&&f.current.unobserve(m),(g=f.current)==null||g.disconnect()}},[]),i&&!u?p.jsx("div",{className:y3(s,D1e),style:o,ref:d}):p.jsx(n,{innerRef:d,className:s,style:o,...a,width:l})}return e.displayName=`WidthProvider(${n.displayName||n.name||"Component"})`,e}const Ug=[[0,4,8,16],[8,4,2,16],[0,40,3,27],[0,20,3,20],[3,20,7,13],[3,33,7,8],[3,41,7,6],[3,47,2,16],[0,0,10,4]],I1e=[[0,4,8,16],[8,4,2,16],[9,20,3,27],[0,20,3,20],[3,20,6,13],[0,40,9,7],[3,33,6,7],[10,4,2,16],[0,0,12,4]],A1e=[[0,4,8,16],[8,4,2,16],[0,20,3,27],[10,4,2,20],[3,20,7,13],[3,33,9,7],[3,40,9,12],[0,47,3,19],[0,0,12,4]],R1e=[[0,48,8,16],[5,4,2,20],[3,4,2,20],[7,4,3,20],[0,24,10,12],[0,64,10,8],[0,36,10,12],[0,4,3,20],[0,0,10,4]],N1e=[[0,64,8,16],[5,4,2,20],[0,24,2,20],[7,4,3,20],[2,24,8,20],[0,80,10,8],[0,4,5,20],[0,44,3,20],[0,0,10,4]],a8=0,j1e=8;function L1e(n){return n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():""}function F1e(n,e){return Math.floor(Math.random()*(e-n+1))+n}function $1e(n){const e=Math.ceil(Math.random()*4)+1;return{x:F1e(0,5)*2%12,y:Math.floor(n/6)*e,w:2,h:e,i:n.toString(),static:Math.random()<.05}}function B1e(n,e){const[r,i,s,o]=e;return{x:r,y:i,w:s,h:o,i:n.toString(),static:!0}}function Wg(n,e){const r=n.length,i=[];for(let s=0;s<r;s++)s<n.length?i.push(B1e(s,n[s])):i.push($1e(s));return i}function z1e(n,e){const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r){const o=n[s],a=e[s];if(!o||!a){if(o!==a)return!1;continue}if(o.length!==a.length)return!1;for(let l=0;l<o.length;l++){const c=o[l],u=a[l];if(c.x!==u.x||c.y!==u.y||c.w!==u.w||c.h!==u.h)return!1}}return!0}function Xk(n,e){const r={};for(const i in n){const s=n[i];s&&(r[i]=s.map(o=>({...o,static:e})))}return r}const U1e=O1e(M1e),k1=class k1 extends Ke.Component{constructor(r){super(r);Be(this,"isUpdatingLayout",!1);Be(this,"domCache",null);Be(this,"lastLayoutKey","");Be(this,"handleResponsiveLayoutChange",(r,i)=>{const s=Array.isArray(r)?r:[r],o=i;this.onLayoutChange(s,o)});Be(this,"generateNewLayout",()=>{const r=Wg(Ug),i=this.props.allStatic??this.state.allStatic,s=r.map(o=>({...o,static:i}));this.domCache=null,this.lastLayoutKey="",this.setState({layouts:{lg:s}})});this.state={currentBreakpoint:"lg",compactType:r.compactType??"vertical",mounted:!1,layouts:{lg:r.initialLayout||Wg(Ug)},allStatic:r.allStatic??!0},this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onCompactTypeChange=this.onCompactTypeChange.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.onNewLayout=this.onNewLayout.bind(this),this.onToggleStatic=this.onToggleStatic.bind(this)}componentDidMount(){this.setState({mounted:!0},()=>{this.props.onMount&&this.props.onMount()})}generateDOM(){const r=this.state.layouts.lg||[],{slotContent:i=[]}=this.props,s=this.props.allStatic??this.state.allStatic,o=`${r.length}-${s}-${i.length}`;if(this.domCache&&this.lastLayoutKey===o)return this.domCache;const a=[];for(let l=0;l<r.length;l++){const c=r[l],u=l>=a8&&l<=j1e,h=l-a8,d=u&&i[h]?i[h]:null,f=c.static??s;a.push(p.jsx("div",{className:f?"static":"",children:d?p.jsx("div",{className:"external-slot-content",children:d}):f?p.jsxs("span",{className:"text",title:"This item is static and cannot be removed or resized.",children:["Static - ",l]}):p.jsx("span",{className:"text",children:l})},c.i||l.toString()))}return this.domCache=a,this.lastLayoutKey=o,a}onBreakpointChange(r){this.setState({currentBreakpoint:r})}onCompactTypeChange(){if(this.props.onCompactTypeChange)this.props.onCompactTypeChange();else{const{compactType:r}=this.state,i=r==="horizontal"?"vertical":r==="vertical"?null:"horizontal";this.setState({compactType:i})}}onLayoutChange(r,i){if(this.isUpdatingLayout){this.props.onLayoutChange(r,i);return}const s=this.props.allStatic??this.state.allStatic;if(s){this.props.onLayoutChange(r,i);return}const o=Xk(i,s);!z1e(this.state.layouts,o)&&(this.domCache=null,this.lastLayoutKey="",this.isUpdatingLayout=!0,this.setState({layouts:o},()=>{this.isUpdatingLayout=!1})),this.props.onLayoutChange(r,o)}onNewLayout(){this.props.onNewLayout?this.props.onNewLayout():this.generateNewLayout()}onToggleStatic(){if(this.props.onToggleStatic)this.props.onToggleStatic();else{const r=!this.state.allStatic,i=Xk(this.state.layouts,r);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:r,layouts:i})}}componentDidUpdate(r){if(r.compactType!==this.props.compactType&&this.props.compactType!==void 0&&this.setState({compactType:this.props.compactType}),r.allStatic!==this.props.allStatic&&this.props.allStatic!==void 0){const i=Xk(this.state.layouts,this.props.allStatic);this.domCache=null,this.lastLayoutKey="",this.setState({allStatic:this.props.allStatic,layouts:i})}r.slotContent!==this.props.slotContent&&(this.domCache=null,this.lastLayoutKey="")}render(){const{cols:r}=this.props,i=r||k1.defaultProps.cols||{},s=this.props.compactType??this.state.compactType;return p.jsxs("div",{children:[p.jsxs("div",{children:["Current Breakpoint: ",this.state.currentBreakpoint," (",i[this.state.currentBreakpoint]," columns)"]}),p.jsxs("div",{children:["Compaction type: ",L1e(s)||"No Compaction"]}),p.jsx(U1e,{...this.props,layouts:this.state.layouts,onBreakpointChange:this.onBreakpointChange,onLayoutChange:this.handleResponsiveLayoutChange,measureBeforeMount:!1,useCSSTransforms:this.state.mounted,compactType:s,preventCollision:!s,children:this.generateDOM()})]})}};Be(k1,"defaultProps",{className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},initialLayout:Wg(Ug)});let HI=k1;function Tn(n){var e=n.width,r=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(r<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:r}}function gd(n,e){return n.width===e.width&&n.height===e.height}var W1e=function(){function n(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var r=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){r._observers=r._observers.filter(function(s){return s!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function q1e(n){return new W1e(n)}var H1e=function(){function n(e,r,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Tn({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=r??function(o){return o},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,r;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(r=this._devicePixelRatioObservable)===null||r===void 0||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return Tn({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Tn(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var r=this.bitmapSize;gd(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},n.prototype._emitBitmapSizeChanged=function(e,r){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,r)})},n.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,i=Tn(this._transformBitmapSize(e,this._canvasElementClientSize)),s=gd(this.bitmapSize,i)?null:i;r===null&&s===null||r!==null&&s!==null&&gd(r,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(r,s))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,r)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Y1e().then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var r=l8(this._canvasElement);if(r===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=q1e(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,r;if(this._canvasElement!==null){var i=l8(this._canvasElement);if(i!==null){var s=(r=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&r!==void 0?r:i.devicePixelRatio,o=this._canvasElement.getClientRects(),a=o[0]!==void 0?G1e(o[0],s):Tn({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(a)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var i=r.find(function(a){return a.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],o=Tn({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(o)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function V1e(n,e){return new H1e(n,e.transform,e.options)}function l8(n){return n.ownerDocument.defaultView}function Y1e(){return new Promise(function(n){var e=new ResizeObserver(function(r){n(r.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function G1e(n,e){return Tn({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var K1e=function(){function n(e,r,i){if(r.width===0||r.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function Id(n,e){var r=n.canvasElementClientSize;if(r.width===0||r.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var s=n.canvasElement.getContext("2d",e);return s===null?null:new K1e(s,r,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Ate={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var c8,u8;function kp(n,e){const r={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(r)}function Rte(n,e,r,i){n.beginPath();const s=n.lineWidth%2?.5:0;n.moveTo(r,e+s),n.lineTo(i,e+s),n.stroke()}function Vr(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function Yi(n){if(n===void 0)throw new Error("Value is undefined");return n}function at(n){if(n===null)throw new Error("Value is null");return n}function Pc(n){return at(Yi(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(c8||(c8={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(u8||(u8={}));let gr=class{constructor(){this.t=[]}i(e,r,i){const s={h:e,l:r,o:i===!0};this.t.push(s)}_(e){const r=this.t.findIndex(i=>e===i.h);r>-1&&this.t.splice(r,1)}u(e){this.t=this.t.filter(r=>r.l!==e)}p(e,r,i){const s=[...this.t];this.t=this.t.filter(o=>!o.o),s.forEach(o=>o.h(e,r,i))}v(){return this.t.length>0}m(){this.t=[]}};function bs(n,...e){for(const r of e)for(const i in r)r[i]!==void 0&&Object.prototype.hasOwnProperty.call(r,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof r[i]!="object"||n[i]===void 0||Array.isArray(r[i])?n[i]=r[i]:bs(n[i],r[i]));return n}function Cp(n){return typeof n=="number"&&isFinite(n)}function K0(n){return typeof n=="number"&&n%1==0}function Bb(n){return typeof n=="string"}function bv(n){return typeof n=="boolean"}function al(n){const e=n;if(!e||typeof e!="object")return e;let r,i,s;for(i in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],r[i]=s&&typeof s=="object"?al(s):s);return r}function X1e(n){return n!==null}function Q1e(n){return n===null?void 0:n}const Nte="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Aw(n,e,r){return e===void 0&&(e=Nte),`${r=r!==void 0?`${r} `:""}${n}px ${e}`}let J1e=class{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,r=this.F(),i=this.W();return e.P===r&&e.T===i||(e.P=r,e.T=i,e.k=Aw(r,i),e.A=2.5/12*r,e.V=e.A,e.B=r/12*e.C,e.I=r/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}};function Qk(n){return n<0?0:n>255?255:Math.round(n)||0}function d8(n){return .199*n[0]+.687*n[1]+.114*n[2]}let Z1e=class{constructor(e,r){this.q=new Map,this.Y=e,r&&(this.q=r)}j(e,r){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${r*s})`}X(e){const r=this.K(e);return{Z:`rgb(${r[0]}, ${r[1]}, ${r[2]})`,G:d8(r)>160?"black":"white"}}J(e){return d8(this.K(e))}tt(e,r,i){const[s,o,a,l]=this.K(e),[c,u,h,d]=this.K(r),f=[Qk(s+i*(c-s)),Qk(o+i*(u-o)),Qk(a+i*(h-a)),(m=l+i*(d-l),m<=0||m>1?Math.min(Math.max(m,0),1):Math.round(1e4*m)/1e4)];var m;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const r=this.q.get(e);if(r)return r;const i=function(a){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=a;const c=window.getComputedStyle(l).color;return document.body.removeChild(l),c}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.Y.length)for(const a of this.Y){const l=a(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const o=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,o),o}},e_e=class{constructor(){this.it=[]}st(e){this.it=e}nt(e,r,i){this.it.forEach(s=>{s.nt(e,r,i)})}};class zb{nt(e,r,i){e.useBitmapCoordinateSpace(s=>this.et(s,r,i))}}let t_e=class extends zb{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,o=this.rt,a=Math.max(1,Math.floor(r))%2/2,l=c=>{e.beginPath();for(let u=s.to-1;u>=s.from;--u){const h=o.ot[u],d=Math.round(h._t*r)+a,f=h.ut*i,m=c*i+a;e.moveTo(d,f),e.arc(d,f,m,0,2*Math.PI)}e.fill()};o.ct>0&&(e.fillStyle=o.dt,l(o.ft+o.ct)),e.fillStyle=o.vt,l(o.ft)}};function n_e(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const r_e={from:0,to:1};let i_e=class{constructor(e,r,i){this.Mt=new e_e,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=r,this.Pt=i,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(n_e),this.bt=this.St.map(r=>{const i=new t_e;return i.ht(r),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),r=this.Pt.Bt(),i=this.Ct.It(),s=this.O.Et();this.kt(),r.forEach((o,a)=>{const l=this.St[a],c=o.At(i),u=o.zt();!e&&c!==null&&o.Vt()&&u!==null?(l.vt=c.Lt,l.ft=c.ft,l.ct=c.Ot,l.ot[0].gt=c.gt,l.ot[0].ut=o.Ft().Nt(c.gt,u.Wt),l.dt=c.Ht??this.O.Ut(l.ot[0].ut/o.Ft().$t()),l.ot[0].wt=i,l.ot[0]._t=s.qt(i),l.lt=r_e):l.lt=null})}},s_e=class extends zb{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const o=this.Yt.jt.Vt,a=this.Yt.Kt.Vt;if(!o&&!a)return;const l=Math.round(this.Yt._t*i),c=Math.round(this.Yt.ut*s);e.lineCap="butt",o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,kp(e,this.Yt.jt.Xt),function(u,h,d,f){u.beginPath();const m=u.lineWidth%2?.5:0;u.moveTo(h+m,d),u.lineTo(h+m,f),u.stroke()}(e,l,0,r.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*s),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,kp(e,this.Yt.Kt.Xt),Rte(e,c,0,r.width))}},o_e=class{constructor(e,r){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new s_e(this.Zt),this.Jt=e,this.Pt=r}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),r=this.Pt.Qt().N().crosshair,i=this.Zt;if(r.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=e&&this.Jt.ti(this.Pt),i.jt.Vt=e&&this.Jt.ii(),i.Kt.ct=r.horzLine.width,i.Kt.Xt=r.horzLine.style,i.Kt.R=r.horzLine.color,i.jt.ct=r.vertLine.width,i.jt.Xt=r.vertLine.style,i.jt.R=r.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function x_(n,e,r,i,s,o){n.save(),n.globalCompositeOperation="copy",n.fillStyle=o,n.fillRect(e,r,i,s),n.restore()}function h8(n,e,r,i,s,o){n.beginPath(),n.roundRect?n.roundRect(e,r,i,s,o):(n.lineTo(e+i-o[1],r),o[1]!==0&&n.arcTo(e+i,r,e+i,r+o[1],o[1]),n.lineTo(e+i,r+s-o[2]),o[2]!==0&&n.arcTo(e+i,r+s,e+i-o[2],r+s,o[2]),n.lineTo(e+o[3],r+s),o[3]!==0&&n.arcTo(e,r+s,e,r+s-o[3],o[3]),n.lineTo(e,r+o[0]),o[0]!==0&&n.arcTo(e,r,e+o[0],r,o[0]))}function f8(n,e,r,i,s,o,a=0,l=[0,0,0,0],c=""){if(n.save(),!a||!c||c===o)return h8(n,e,r,i,s,l),n.fillStyle=o,n.fill(),void n.restore();const u=a/2;var h;h8(n,e+u,r+u,i-a,s-a,(h=-u,l.map(d=>d===0?d:d+h))),o!=="transparent"&&(n.fillStyle=o,n.fill()),c!=="transparent"&&(n.lineWidth=a,n.strokeStyle=c,n.closePath(),n.stroke()),n.restore()}function jte(n,e,r,i,s,o,a){n.save(),n.globalCompositeOperation="copy";const l=n.createLinearGradient(0,0,0,s);l.addColorStop(0,o),l.addColorStop(1,a),n.fillStyle=l,n.fillRect(e,r,i,s),n.restore()}class p8{constructor(e,r){this.ht(e,r)}ht(e,r){this.Yt=e,this.ei=r}$t(e,r){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,r,i,s){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const o=this.Yt.R,a=this.ei.Z,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=r.k;const h=this.hi(c,r,i,s),d=h.ai;return h.li?f8(u,d.oi,d._i,d.ui,d.ci,a,d.di,[d.ft,0,0,d.ft],a):f8(u,d.fi,d._i,d.ui,d.ci,a,d.di,[0,d.ft,d.ft,0],a),this.Yt.pi&&(u.fillStyle=o,u.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(u.fillStyle=r.D,u.fillRect(h.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=l.xi;c.font=r.k,c.textAlign=l.li?"right":"left",c.textBaseline="middle",c.fillStyle=o,c.fillText(this.Yt.ri,u.Ci,(u._i+u.Si)/2+u.Pi)})}hi(e,r,i,s){const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.Yt.pi||!this.Yt.yi?r.C:0,d=this.Yt.ki?r.S:0,f=r.A+this.ei.Ti,m=r.V+this.ei.Ri,g=r.B,b=r.I,y=this.Yt.ri,v=r.P,w=i.Di(o,y),k=Math.ceil(i.Vi(o,y)),S=v+f+m,_=r.S+g+b+k+h,C=Math.max(1,Math.floor(u));let P=Math.round(S*u);P%2!=C%2&&(P+=1);const T=d>0?Math.max(1,Math.floor(d*c)):0,O=Math.round(_*c),D=Math.round(h*c),I=this.ei.Bi??this.ei.Ii,U=Math.round(I*u)-Math.floor(.5*u),B=Math.floor(U+C/2-P/2),z=B+P,j=s==="right",F=j?l.width-d:d,N=j?a.width-T:T;let R,W,Y;return j?(R=N-O,W=N-D,Y=F-h-g-d):(R=N+O,W=N+D,Y=F+h+g),{li:j,ai:{_i:B,mi:U,Si:z,ui:O,ci:P,ft:2*c,di:T,oi:R,fi:N,wi:W,gi:C,bi:a.width},xi:{_i:B/u,Si:z/u,Ci:Y,Pi:w}}}}class w_{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||p8)(this.Ai,this.Ei),this.Oi=new(e||p8)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,r=!1){return Math.max(this.Li.$t(e,r),this.Oi.$t(e,r))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class a_e extends w_{constructor(e,r,i){super(),this.Jt=e,this.Yi=r,this.ji=i}qi(e,r,i){if(e.Vt=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const o=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||o===null)return;const a=this.Yi.Xi().X(s.labelBackgroundColor);i.Z=a.Z,e.R=a.G;const l=2/12*this.Yi.P();i.Ti=l,i.Ri=l;const c=this.ji(this.Yi);i.Ii=c.Ii,e.ri=this.Yi.Zi(c.gt,o),e.Vt=!0}}const l_e=/[1-9]/g;let Lte=class{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,r){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:f})=>(f.font=r.k,Math.round(r.Gi.Vi(f,at(this.Yt).ri,l_e))));if(i<=0)return;const s=r.Ji,o=i+2*s,a=o/2,l=this.Yt.Qi;let c=this.Yt.Ii,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+o>l&&(c-=Math.abs(l-(u+o)),u=Math.floor(c-a)+.5);const h=u+o,d=Math.ceil(0+r.S+r.C+r.A+r.P+r.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:g})=>{const b=at(this.Yt);f.fillStyle=b.Z;const y=Math.round(u*m),v=Math.round(0*g),w=Math.round(h*m),k=Math.round(d*g),S=Math.round(2*m);if(f.beginPath(),f.moveTo(y,v),f.lineTo(y,k-S),f.arcTo(y,k,y+S,k,S),f.lineTo(w-S,k),f.arcTo(w,k,w,k-S,S),f.lineTo(w,v),f.fill(),b.pi){const _=Math.round(b.Ii*m),C=v,P=Math.round((C+r.C)*g);f.fillStyle=b.R;const T=Math.max(1,Math.floor(m)),O=Math.floor(.5*m);f.fillRect(_-O,C,T,P-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const m=at(this.Yt),g=0+r.S+r.C+r.A+r.P/2;f.font=r.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.R;const b=r.Gi.Di(f,"Apr0");f.translate(u+s,g+b),f.fillText(m.ri,0,0)})}};class c_e{constructor(e,r,i){this.xt=!0,this.Gt=new Lte,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=r,this.ji=i}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const r=this.Ct.N().vertLine;if(!r.labelVisible)return;const i=this.ts.Et();if(i.Ki())return;e.Qi=i.Qi();const s=this.ji();if(s===null)return;e.Ii=s.Ii;const o=i.ss(this.Ct.It());e.ri=i.ns(at(o)),e.Vt=!0;const a=this.ts.Xi().X(r.labelBackgroundColor);e.Z=a.Z,e.R=a.G,e.pi=i.N().ticksVisible}}let Fte=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}};var m8;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(m8||(m8={}));class u_e extends Fte{constructor(e,r){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=r,this.ys=((s,o)=>a=>{const l=o(),c=s();if(a===at(this.Pt).ks())return{gt:c,Ii:l};{const u=at(a.zt());return{gt:a.Ts(l,u),Ii:l}}})(()=>this.ds,()=>this.Ss);const i=((s,o)=>()=>{const a=this.ts.Et().Rs(s()),l=o();return a&&Number.isFinite(l)?{wt:a,Ii:l}:null})(()=>this.fs,()=>this.si());this.Ds=new c_e(this,e,i)}N(){return this.Ps}Vs(e,r){this.xs=e,this.Cs=r}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,r,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,r,i)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let r=this.gs.get(e);r||(r=new o_e(this,e),this.gs.set(e,r));let i=this.Ms.get(e);return i||(i=new i_e(this.ts,this,e),this.Ms.set(e,i)),[r,i]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,r){this.ps&&this.Pt===e||this.vs.clear();const i=[];return this.Pt===e&&i.push(this.Hs(this.vs,r,this.ys)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var r,i;(r=this.gs.get(e))==null||r.yt(),(i=this.Ms.get(e))==null||i.yt()}),this.vs.forEach(e=>e.yt()),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,r,i){this.Ys(e,r,i)&&this.Ns()}Ys(e,r,i){const s=this.bs,o=this.Ss,a=this.ds,l=this.fs,c=this.Pt,u=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=i;const h=u!==null?u.zt():null;return u!==null&&h!==null?(this.ds=r,this.Ss=u.Nt(r,h)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||o!==this.Ss||l!==this.fs||a!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(i=>i.Xs().Ks()).filter(X1e),r=e.length===0?null:Math.max(...e);this.fs=r!==null?r:NaN}Hs(e,r,i){let s=e.get(r);return s===void 0&&(s=new a_e(this,r,i),e.set(r,s)),s}}function __(n){return n==="left"||n==="right"}let Ri=class VI{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,r){const i=function(s,o){return s===void 0?o:{tn:Math.max(s.tn,o.tn),sn:s.sn||o.sn}}(this.Zs.get(e),r);this.Zs.set(e,i)}nn(){return this.Js}en(e){const r=this.Zs.get(e);return r===void 0?{tn:this.Js}:{tn:Math.max(this.Js,r.tn),sn:r.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const r of e.Gs)this.mn(r);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((r,i)=>{this.Qs(i,r)})}static wn(){return new VI(2)}static gn(){return new VI(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(r=>r.an===5);e!==-1&&this.Gs.splice(e,1)}};class $te{formatTickmarks(e){return e.map(r=>this.format(r))}}const g8=".";function ll(n,e){if(!Cp(n))return"n/a";if(!K0(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}let S_=class extends $te{constructor(e,r){if(super(),r||(r=1),Cp(e)&&K0(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=r,this.bn()}format(e){const r=e<0?"":"";return e=Math.abs(e),r+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const r=this.Yi/this.Mn;let i=Math.floor(e),s="";const o=this.xn!==void 0?this.xn:NaN;if(r>1){let a=+(Math.round(e*r)-i*r).toFixed(this.xn);a>=r&&(a-=r,i+=1),s=g8+ll(+a.toFixed(this.xn)*this.Mn,o)}else i=Math.round(i*r)/r,o>0&&(s=g8+ll(0,o));return i.toFixed(0)+s}};class Bte extends S_{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class d_e extends $te{constructor(e){super(),this.Cn=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.Pn(e):e<999995?r+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.Pn(e/1e9)+"B")}Pn(e){let r;const i=Math.pow(10,this.Cn);return r=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),r.replace(/(\.[1-9]*)0+$/,(s,o)=>o)}}const h_e=/[2-9]/g;class Rw{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,r,i){return this.In(e,r,i).width}Di(e,r,i){const s=this.In(e,r,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}In(e,r,i){const s=i||h_e,o=String(r).replace(s,"0");if(this.Dn.has(o))return Yi(this.Dn.get(o)).En;if(this.yn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const a=e.measureText(o);return e.restore(),a.width===0&&r.length||(this.Dn.set(o,{En:a,An:this.kn}),this.Rn[this.kn]=o,this.yn++,this.kn++),a}}class f_e{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,r,i){this.zn=e,this.M=r,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class zte{constructor(e,r,i){this.Fn=e,this.On=new Rw(50),this.Wn=r,this.O=i,this.F=-1,this.Gt=new f_e(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const r=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(r===null)return null;const i=e.qn(r);if(i==="overlay")return null;const s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),s,i),this.Gt}}let p_e=class extends zb{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,r){var a;if(!((a=this.Yt)!=null&&a.Vt))return null;const{ut:i,ct:s,Kn:o}=this.Yt;return r>=i-s-7&&r<=i+s+7?{Xn:this.Yt,Kn:o}:null}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.Vt===!1)return;const o=Math.round(this.Yt.ut*s);o<0||o>r.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),kp(e,this.Yt.Xt),Rte(e,o,0,r.width))}};class v3{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new p_e,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class m_e extends v3{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),r=e.ie().ie;if(r!==2&&r!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const s=this.Jn.zt();s!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(s.Wt,s.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class g_e extends zb{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:i}){const s=this.Yt;if(s===null)return;const o=Math.max(1,Math.floor(r)),a=o%2/2,l=Math.round(s.ne.x*r)+a,c=s.ne.y*i;e.fillStyle=s.ee,e.beginPath();const u=Math.max(2,1.5*s.re)*r;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.he,e.beginPath(),e.arc(l,c,s.ft*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=o,e.strokeStyle=s.ae,e.beginPath(),e.arc(l,c,s.ft*r+o/2,0,2*Math.PI,!1),e.stroke()}}const b_e=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class y_e{constructor(e){this.Gt=new g_e,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),r=this.we-e;if(r>0)return void(r<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),r=e.Pe(),i=this.ge.zt();if(r===null||i===null)return;const s=this.ge.ye(!0);if(s.ke||!r.Te(s.Re))return;const o={x:e.qt(s.Re),y:this.ge.Ft().Nt(s.gt,i.Wt)},a=s.R,l=this.ge.N().lineWidth,c=this.De(this.Ve(),a);this.Gt.ht({ee:a,re:l,he:c.he,ae:c.ae,ft:c.ft,ne:o})}Ce(){const e=this.Gt.se();if(e!==null){const r=this.De(this.Ve(),e.ee);e.he=r.he,e.ae=r.ae,e.ft=r.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,r,i,s){const o=i+(s-i)*r;return this.ge.Qt().Xi().j(e,o)}De(e,r){const i=e%2600/2600;let s;for(const u of b_e)if(i>=u.le&&i<=u.oe){s=u;break}Vr(s!==void 0,"Last price animation internal logic error");const o=(i-s.le)/(s.oe-s.le);return{he:this.Be(r,o,s.ce,s.de),ae:this.Be(r,o,s.fe,s.pe),ft:(a=o,l=s._e,c=s.ue,l+(c-l)*a)};var a,l,c}}class v_e extends v3{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const r=this.Jn.N();if(!r.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ye(r.priceLineSource===0);i.ke||(e.Vt=!0,e.ut=i.Ii,e.R=this.Jn.Ie(i.R),e.ct=r.priceLineWidth,e.Xt=r.priceLineStyle)}}let x_e=class extends w_{constructor(e){super(),this.Jt=e}qi(e,r,i){e.Vt=!1,r.Vt=!1;const s=this.Jt;if(!s.Vt())return;const o=s.N(),a=o.lastValueVisible,l=s.Ee()!=="",c=o.seriesLastValueMode===0,u=s.ye(!1);if(u.ke)return;a&&(e.ri=this.Ae(u,a,c),e.Vt=e.ri.length!==0),(l||c)&&(r.ri=this.ze(u,a,l,c),r.Vt=r.ri.length>0);const h=s.Ie(u.R),d=this.Jt.Qt().Xi().X(h);i.Z=d.Z,i.Ii=u.Ii,r.Ht=s.Qt().Ut(u.Ii/s.Ft().$t()),e.Ht=h,e.R=d.G,r.R=d.G}ze(e,r,i,s){let o="";const a=this.Jt.Ee();return i&&a.length!==0&&(o+=`${a} `),r&&s&&(o+=this.Jt.Ft().Le()?e.Oe:e.Ne),o.trim()}Ae(e,r,i){return r?i?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}};function b8(n,e,r,i){const s=Number.isFinite(e),o=Number.isFinite(r);return s&&o?n(e,r):s||o?s?e:r:i}class Ei{constructor(e,r){this.Fe=e,this.We=r}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Ei(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Ei(b8(Math.min,this.$e(),e.$e(),-1/0),b8(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Cp(e)||this.We-this.Fe===0)return;const r=.5*(this.We+this.Fe);let i=this.We-r,s=this.Fe-r;i*=e,s*=e,this.We=r+i,this.Fe=r+s}Ke(e){Cp(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Ei(e.minValue,e.maxValue)}}class Nw{constructor(e,r){this.Ge=e,this.Je=r||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Nw(Ei.Ze(e.priceRange),e.margins)}}class w_e extends v3{constructor(e,r){super(e),this.ir=r}te(){const e=this.Zn;e.Vt=!1;const r=this.ir.N();if(!this.Jn.Vt()||!r.lineVisible)return;const i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=r.color,e.ct=r.lineWidth,e.Xt=r.lineStyle,e.Kn=this.ir.N().id)}}class __e extends w_{constructor(e,r){super(),this.ge=e,this.ir=r}qi(e,r,i){e.Vt=!1,r.Vt=!1;const s=this.ir.N(),o=s.axisLabelVisible,a=s.title!=="",l=this.ge;if(!o||!l.Vt())return;const c=this.ir.sr();if(c===null)return;a&&(r.ri=s.title,r.Vt=!0),r.Ht=l.Qt().Ut(c/l.Ft().$t()),e.ri=this.nr(s.price),e.Vt=!0;const u=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);i.Z=u.Z;const h=s.axisLabelTextColor||u.G;e.R=h,r.R=h,i.Ii=c}nr(e){const r=this.ge.zt();return r===null?"":this.ge.Ft().Zi(e,r.Wt)}}class S_e{constructor(e,r){this.ge=e,this.Ps=r,this.er=new w_e(e,this),this.Fn=new __e(e,this),this.rr=new zte(this.Fn,e,e.Qt())}hr(e){bs(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,r=e.Ft();if(e.Qt().Et().Ki()||r.Ki())return null;const i=e.zt();return i===null?null:r.Nt(this.Ps.price,i.Wt)}}class k_e extends Fte{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const C_e={Bar:(n,e,r,i)=>{const s=e.upColor,o=e.downColor,a=at(n(r,i)),l=Pc(a.Wt[0])<=Pc(a.Wt[3]);return{cr:a.R??(l?s:o)}},Candlestick:(n,e,r,i)=>{const s=e.upColor,o=e.downColor,a=e.borderUpColor,l=e.borderDownColor,c=e.wickUpColor,u=e.wickDownColor,h=at(n(r,i)),d=Pc(h.Wt[0])<=Pc(h.Wt[3]);return{cr:h.R??(d?s:o),dr:h.Ht??(d?a:l),pr:h.vr??(d?c:u)}},Custom:(n,e,r,i)=>({cr:at(n(r,i)).R??e.color}),Area:(n,e,r,i)=>{const s=at(n(r,i));return{cr:s.vt??e.lineColor,vt:s.vt??e.lineColor,mr:s.mr??e.topColor,wr:s.wr??e.bottomColor}},Baseline:(n,e,r,i)=>{const s=at(n(r,i));return{cr:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:s.gr??e.topLineColor,Mr:s.Mr??e.bottomLineColor,br:s.br??e.topFillColor1,Sr:s.Sr??e.topFillColor2,Cr:s.Cr??e.bottomFillColor1,Pr:s.Pr??e.bottomFillColor2}},Line:(n,e,r,i)=>{const s=at(n(r,i));return{cr:s.R??e.color,vt:s.R??e.color}},Histogram:(n,e,r,i)=>({cr:at(n(r,i)).R??e.color})};class E_e{constructor(e){this.yr=(r,i)=>i!==void 0?i.Wt:this.ge.Xs().kr(r),this.ge=e,this.Tr=C_e[e.Rr()]}Dr(e,r){return this.Tr(this.yr,this.ge.N(),e,r)}}function Ute(n,e,r,i,s=0,o=e.length){let a=o-s;for(;0<a;){const l=a>>1,c=s+l;i(e[c],r)===n?(s=c+1,a-=l+1):a=l}return s}const Ep=Ute.bind(null,!0),Wte=Ute.bind(null,!1);var y8;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(y8||(y8={}));const Jl=30;class T_e{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,r=0){const i=this.Nr(e,r);return i===null?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(e,r,i){if(this.Ki())return null;let s=null;for(const o of i)s=yv(s,this.$r(e,r,o));return s}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map(r=>r.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,r){const i=this.Yr(e);if(i===null&&r!==0)switch(r){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let r=this.Xr(e);return r>0&&(r-=1),r!==this.Vr.length&&this.Or(r)<e?r:null}Kr(e){const r=this.Zr(e);return r!==this.Vr.length&&e<this.Or(r)?r:null}Yr(e){const r=this.Xr(e);return r===this.Vr.length||e<this.Vr[r].Re?null:r}Xr(e){return Ep(this.Vr,e,(r,i)=>r.Re<i)}Zr(e){return Wte(this.Vr,e,(r,i)=>r.Re>i)}Gr(e,r,i){let s=null;for(let o=e;o<r;o++){const a=this.Vr[o].Wt[i];Number.isNaN(a)||(s===null?s={Jr:a,Qr:a}:(a<s.Jr&&(s.Jr=a),a>s.Qr&&(s.Qr=a)))}return s}$r(e,r,i){if(this.Ki())return null;let s=null;const o=at(this.Lr()),a=at(this.Ks()),l=Math.max(e,o),c=Math.min(r,a),u=Math.ceil(l/Jl)*Jl,h=Math.max(u,Math.floor(c/Jl)*Jl);{const f=this.Xr(l),m=this.Zr(Math.min(c,u,r));s=yv(s,this.Gr(f,m,i))}let d=this.Br.get(i);d===void 0&&(d=new Map,this.Br.set(i,d));for(let f=Math.max(u+1,l);f<h;f+=Jl){const m=Math.floor(f/Jl);let g=d.get(m);if(g===void 0){const b=this.Xr(m*Jl),y=this.Zr((m+1)*Jl-1);g=this.Gr(b,y,i),d.set(m,g)}s=yv(s,g)}{const f=this.Xr(h),m=this.Zr(c);s=yv(s,this.Gr(f,m,i))}return s}}function yv(n,e){return n===null?e:e===null?n:{Jr:Math.min(n.Jr,e.Jr),Qr:Math.max(n.Qr,e.Qr)}}const jw={setLineStyle:kp};class P_e{constructor(e){this.th=e}nt(e,r,i){this.th.draw(e,jw)}ih(e,r,i){var s,o;(o=(s=this.th).drawBackground)==null||o.call(s,e,jw)}}class M_e{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const r=new P_e(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}class qte{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,r;(r=(e=this.ah).updateAllViews)==null||r.call(e)}Fs(){var i,s,o;const e=((s=(i=this.ah).paneViews)==null?void 0:s.call(i))??[];if(((o=this.hh)==null?void 0:o.nh)===e)return this.hh.eh;const r=e.map(a=>new M_e(a));return this.hh={nh:e,eh:r},r}jn(e,r){var i,s;return((s=(i=this.ah).hitTest)==null?void 0:s.call(i,e,r))??null}}let D_e=class extends qte{us(){return[]}};class O_e{constructor(e){this.th=e}nt(e,r,i){this.th.draw(e,jw)}ih(e,r,i){var s,o;(o=(s=this.th).drawBackground)==null||o.call(s,e,jw)}}class v8{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const r=new O_e(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}function Hte(n){var e,r,i;return{ri:n.text(),Ii:n.coordinate(),Bi:(e=n.fixedCoordinate)==null?void 0:e.call(n),R:n.textColor(),Z:n.backColor(),Vt:((r=n.visible)==null?void 0:r.call(n))??!0,pi:((i=n.tickVisible)==null?void 0:i.call(n))??!0}}class I_e{constructor(e,r){this.Gt=new Lte,this._h=e,this.uh=r}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...Hte(this._h)}),this.Gt}}class A_e extends w_{constructor(e,r){super(),this._h=e,this.Yi=r}qi(e,r,i){const s=Hte(this._h);i.Z=s.Z,e.R=s.R;const o=2/12*this.Yi.P();i.Ti=o,i.Ri=o,i.Ii=s.Ii,i.Bi=s.Bi,e.ri=s.ri,e.Vt=s.Vt,e.pi=s.pi}}class R_e extends qte{constructor(e,r){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=r}cs(){var s,o,a;const e=((o=(s=this.ah).timeAxisViews)==null?void 0:o.call(s))??[];if(((a=this.dh)==null?void 0:a.nh)===e)return this.dh.eh;const r=this.ge.Qt().Et(),i=e.map(l=>new I_e(l,r));return this.dh={nh:e,eh:i},i}Ws(){var s,o,a;const e=((o=(s=this.ah).priceAxisViews)==null?void 0:o.call(s))??[];if(((a=this.fh)==null?void 0:a.nh)===e)return this.fh.eh;const r=this.ge.Ft(),i=e.map(l=>new A_e(l,r));return this.fh={nh:e,eh:i},i}wh(){var i,s,o;const e=((s=(i=this.ah).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((o=this.ph)==null?void 0:o.nh)===e)return this.ph.eh;const r=e.map(a=>new v8(a));return this.ph={nh:e,eh:r},r}gh(){var i,s,o;const e=((s=(i=this.ah).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((o=this.mh)==null?void 0:o.nh)===e)return this.mh.eh;const r=e.map(a=>new v8(a));return this.mh={nh:e,eh:r},r}Mh(e,r){var i,s;return((s=(i=this.ah).autoscaleInfo)==null?void 0:s.call(i,e,r))??null}}function Jk(n,e,r,i){n.forEach(s=>{e(s).forEach(o=>{o.rh()===r&&i.push(o)})})}function Zk(n){return n.Fs()}function N_e(n){return n.wh()}function j_e(n){return n.gh()}const L_e=["Area","Line","Baseline"];class k_ extends k_e{constructor(e,r,i,s,o){super(e),this.Yt=new T_e,this.er=new v_e(this),this.bh=[],this.Sh=new m_e(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=i,this.kh=r;const a=new x_e(this);this.vs=[a],this.rr=new zte(a,this,e),L_e.includes(this.kh)&&(this.xh=new y_e(this)),this.Th(),this.sh=s(this,this.Qt(),o)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const r={ke:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return r;const s=this.Qt().Et().Pe(),o=this.zt();if(s===null||o===null)return r;let a,l;if(e){const d=this.Yt.Ar();if(d===null)return r;a=d,l=d.Re}else{const d=this.Yt.Fr(s.bi(),-1);if(d===null||(a=this.Yt.kr(d.Re),a===null))return r;l=d.Re}const c=a.Wt[3],u=this.Rh().Dr(l,{Wt:a}),h=i.Nt(c,o.Wt);return{ke:!1,gt:c,ri:i.Zi(c,o.Wt),Oe:i.Dh(c),Ne:i.Vh(c,o.Wt),R:u.cr,Ii:h,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new E_e(this)),this.Ch}N(){return this.Ps}hr(e){const r=e.priceScaleId;r!==void 0&&r!==this.Ps.priceScaleId&&this.Qt().Bh(this,r),bs(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,r){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(r&&r.zh?this.xh.be():e.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const r=new S_e(this,e);return this.bh.push(r),this.Qt().Eh(this),r}Nh(e){const r=this.bh.indexOf(e);r!==-1&&this.bh.splice(r,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const r=e.Uh();return this.Yt.Fr(r,1)}Xs(){return this.Yt}$h(e){const r=this.Yt.kr(e);return r===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3]}:r.Wt[3]}Xh(e){const r=[];Jk(this.yh,Zk,"top",r);const i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),r.unshift(i)),r}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const r=this.bh.map(i=>i.lr());return e.push(...r),Jk(this.yh,Zk,"normal",e),e}Jh(){return this.Qh(Zk,"bottom")}ta(e){return this.Qh(N_e,e)}ia(e){return this.Qh(j_e,e)}sa(e,r){return this.yh.map(i=>i.jn(e,r)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,r){if(r!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const s of this.bh)i.push(s.ur());return this.yh.forEach(s=>{i.push(...s.Ws())}),i}cs(){const e=[];return this.yh.forEach(r=>{e.push(...r.cs())}),e}Mh(e,r){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.na(e,r);return s===null?null:s.Xe()});return Nw.Ze(i)}return this.na(e,r)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const r of this.vs)r.yt();for(const r of this.bh)r.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach(r=>r.Ns())}Ft(){return at(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const r=this.Yt.kr(e);return r===null?null:{gt:r.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new R_e(e,this))}ua(e){this.yh=this.yh.filter(r=>r.oh()!==e)}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!__(this.Ft().ma())}na(e,r){if(!K0(e)||!K0(r)||this.Yt.Ki())return null;const i=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],s=this.Yt.Ur(e,r,i);let o=s!==null?new Ei(s.Jr,s.Qr):null,a=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,c=new Ei(l,l);o=o!==null?o.vn(c):c}return this.yh.forEach(l=>{const c=l.Mh(e,r);if(c!=null&&c.priceRange){const u=new Ei(c.priceRange.minValue,c.priceRange.maxValue);o=o!==null?o.vn(u):u}c!=null&&c.margins&&(a=c.margins)}),new Nw(o,a)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const r=this.Ps.crosshairMarkerBackgroundColor;if(r.length!==0)return r}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(r=>r.map(e))};break}case"volume":this.ra=new d_e(this.Ps.priceFormat.precision);break;case"percent":this.ra=new Bte(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new S_(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,r){const i=[];return Jk(this.yh,e,r,i),i}}const F_e=[3],$_e=[0,1,2,3];class B_e{constructor(e){this.Ps=e}ga(e,r,i){let s=e;if(this.Ps.mode===0)return s;const o=i.ks(),a=o.zt();if(a===null)return s;const l=o.Nt(e,a),c=i.Ma().filter(h=>h instanceof k_).reduce((h,d)=>{if(i.Un(d)||!d.Vt())return h;const f=d.Ft(),m=d.Xs();if(f.Ki()||!m.Te(r))return h;const g=m.kr(r);if(g===null)return h;const b=Pc(d.zt()),y=this.Ps.mode===3?$_e:F_e;return h.concat(y.map(v=>f.Nt(g.Wt[v],b.Wt)))},[]);if(c.length===0)return s;c.sort((h,d)=>Math.abs(h-l)-Math.abs(d-l));const u=c[0];return s=o.Ts(u,a),s}}function qg(n,e,r){return Math.min(Math.max(n,e),r)}function vv(n,e,r){return e-n<=r}class z_e extends zb{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const o=Math.max(1,Math.floor(i));e.lineWidth=o,function(a,l){a.save(),a.lineWidth%2&&a.translate(.5,.5),l(),a.restore()}(e,()=>{const a=at(this.Yt);if(a.ba){e.strokeStyle=a.Sa,kp(e,a.xa),e.beginPath();for(const l of a.Ca){const c=Math.round(l.Pa*i);e.moveTo(c,-o),e.lineTo(c,r.height+o)}e.stroke()}if(a.ya){e.strokeStyle=a.ka,kp(e,a.Ta),e.beginPath();for(const l of a.Ra){const c=Math.round(l.Pa*s);e.moveTo(-o,c),e.lineTo(r.width+o,c)}e.stroke()}})}}class U_e{constructor(e){this.Gt=new z_e,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,r={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map(i=>({Pa:i.coord}))};this.Gt.ht(r),this.xt=!1}return this.Gt}}class W_e{constructor(e){this.sh=new U_e(e)}lr(){return this.sh}}const eC={Va:4,Ba:1e-4};function af(n,e){const r=100*(n-e)/e;return e<0?-r:r}function q_e(n,e){const r=af(n.$e(),e),i=af(n.qe(),e);return new Ei(r,i)}function Hg(n,e){const r=100*(n-e)/e+100;return e<0?-r:r}function H_e(n,e){const r=Hg(n.$e(),e),i=Hg(n.qe(),e);return new Ei(r,i)}function Lw(n,e){const r=Math.abs(n);if(r<1e-15)return 0;const i=Math.log10(r+e.Ba)+e.Va;return n<0?-i:i}function Vg(n,e){const r=Math.abs(n);if(r<1e-15)return 0;const i=Math.pow(10,r-e.Va)-e.Ba;return n<0?-i:i}function zm(n,e){if(n===null)return null;const r=Lw(n.$e(),e),i=Lw(n.qe(),e);return new Ei(r,i)}function lf(n,e){if(n===null)return null;const r=Vg(n.$e(),e),i=Vg(n.qe(),e);return new Ei(r,i)}function tC(n){if(n===null)return eC;const e=Math.abs(n.qe()-n.$e());if(e>=1||e<1e-15)return eC;const r=Math.ceil(Math.abs(Math.log10(e))),i=eC.Va+r;return{Va:i,Ba:1/Math.pow(10,i)}}class nC{constructor(e,r){if(this.Ia=e,this.Ea=r,function(i){if(i<0)return!1;if(i>1e18)return!0;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let i=this.Ia;i!==1;){if(i%2==0)this.Aa.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),i/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,r,i){const s=this.Ia===0?0:1/this.Ia;let o=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),a=0,l=this.Ea[0];for(;;){const d=vv(o,s,1e-14)&&o>s+1e-14,f=vv(o,i*l,1e-14),m=vv(o,1,1e-14);if(!(d&&f&&m))break;o/=l,l=this.Ea[++a%this.Ea.length]}if(o<=s+1e-14&&(o=s),o=Math.max(1,o),this.Aa.length>0&&(c=o,u=1,h=1e-14,Math.abs(c-u)<h))for(a=0,l=this.Aa[0];vv(o,i*l,1e-14)&&o>s+1e-14;)o/=l,l=this.Aa[++a%this.Aa.length];var c,u,h;return o}}let x8=class{constructor(e,r,i,s){this.La=[],this.Yi=e,this.Ia=r,this.Oa=i,this.Na=s}za(e,r){if(e<r)throw new Error("high < low");const i=this.Yi.$t(),s=(e-r)*this.Fa()/i,o=new nC(this.Ia,[2,2.5,2]),a=new nC(this.Ia,[2,2,2.5]),l=new nC(this.Ia,[2.5,2,2]),c=[];return c.push(o.za(e,r,s),a.za(e,r,s),l.za(e,r,s)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}Wa(){const e=this.Yi,r=e.zt();if(r===null)return void(this.La=[]);const i=e.$t(),s=this.Oa(i-1,r),o=this.Oa(0,r),a=this.Yi.N().entireTextOnly?this.Ha()/2:0,l=a,c=i-1-a,u=Math.max(s,o),h=Math.min(s,o);if(u===h)return void(this.La=[]);const d=this.za(u,h);if(this.Ua(r,d,u,h,l,c),e.$a()&&this.qa(d,h,u)){const g=this.Yi.Ya();this.ja(r,d,l,c,g,2*g)}const f=this.La.map(g=>g.Ka),m=this.Yi.Xa(f);for(let g=0;g<this.La.length;g++)this.La[g].Za=m[g]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,r,i,s,o,a){const l=this.La,c=this.Yi;let u=i%r;u+=u<0?r:0;const h=i>=s?1:-1;let d=null,f=0;for(let m=i-u;m>s;m-=r){const g=this.Na(m,e,!0);d!==null&&Math.abs(g-d)<this.Fa()||g<o||g>a||(f<l.length?(l[f].Pa=g,l[f].Za=c.Ga(m),l[f].Ka=m):l.push({Pa:g,Za:c.Ga(m),Ka:m}),f++,d=g,c.Ja()&&(r=this.za(m*h,s)))}l.length=f}ja(e,r,i,s,o,a){const l=this.La,c=this.Qa(e,i,o,a),u=this.Qa(e,s,-a,-o),h=this.Na(0,e,!0)-this.Na(r,e,!0);l.length>0&&l[0].Pa-c.Pa<h/2&&l.shift(),l.length>0&&u.Pa-l[l.length-1].Pa<h/2&&l.pop(),l.unshift(c),l.push(u)}Qa(e,r,i,s){const o=(i+s)/2,a=this.Oa(r+i,e),l=this.Oa(r+s,e),c=Math.min(a,l),u=Math.max(a,l),h=Math.max(.1,this.za(u,c)),d=this.Oa(r+o,e),f=d-d%h,m=this.Na(f,e,!0);return{Za:this.Yi.Ga(f),Pa:m,Ka:f}}qa(e,r,i){let s=Pc(this.Yi.Qe());return this.Yi.Ja()&&(s=lf(s,this.Yi.tl())),s.$e()-r<e&&i-s.qe()<e}};function Vte(n){return n.slice().sort((e,r)=>at(e.hs())-at(r.hs()))}var w8;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(w8||(w8={}));const _8=new Bte,S8=new S_(100,1);class V_e{constructor(e,r,i,s,o){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new gr,this.ul=new gr,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=S8,this.wl=tC(null),this.gl=e,this.Ps=r,this.Ml=i,this.bl=s,this.Sl=o,this.xl=new x8(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(bs(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const r=Yi(e.scaleMargins.top),i=Yi(e.scaleMargins.bottom);if(r<0||r>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(r+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${r+i}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const r=this.ie();let i=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),r.ie===1&&e.ie!==r.ie&&(function(o,a){if(o===null)return!1;const l=Vg(o.$e(),a),c=Vg(o.qe(),a);return isFinite(l)&&isFinite(c)}(this.Ge,this.wl)?(i=lf(this.Ge,this.wl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==r.ie&&(i=zm(this.Ge,this.wl),i!==null&&this.Bl(i));const s=r.ie!==this.Ps.mode;s&&(r.ie===2||this.Le())&&this.wa(),s&&(r.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&r.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(r,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,r){const i=this.Ge;(r||i===null&&e!==null||i!==null&&!i.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,r){return this.Le()?e=af(e,r):this.Dl()&&(e=Hg(e,r)),this.Pl(e,r)}Ul(e,r,i){this.Nl();const s=this.Ol(),o=at(this.Qe()),a=o.$e(),l=o.qe(),c=this.zl()-1,u=this.Vl(),h=c/(l-a),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,m=this.$l();for(let g=d;g<f;g++){const b=e[g],y=b.gt;if(isNaN(y))continue;let v=y;m!==null&&(v=m(b.gt,r));const w=s+h*(v-a),k=u?w:this.il-1-w;b.ut=k}}ql(e,r,i){this.Nl();const s=this.Ol(),o=at(this.Qe()),a=o.$e(),l=o.qe(),c=this.zl()-1,u=this.Vl(),h=c/(l-a),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,m=this.$l();for(let g=d;g<f;g++){const b=e[g];let y=b.qh,v=b.Yh,w=b.jh,k=b.Kh;m!==null&&(y=m(b.qh,r),v=m(b.Yh,r),w=m(b.jh,r),k=m(b.Kh,r));let S=s+h*(y-a),_=u?S:this.il-1-S;b.Yl=_,S=s+h*(v-a),_=u?S:this.il-1-S,b.jl=_,S=s+h*(w-a),_=u?S:this.il-1-S,b.Kl=_,S=s+h*(k-a),_=u?S:this.il-1-S,b.Xl=_}}Ts(e,r){const i=this.Cl(e,r);return this.Zl(i,r)}Zl(e,r){let i=e;return this.Le()?i=function(s,o){return o<0&&(s=-s),s/100*o+o}(i,r):this.Dl()&&(i=function(s,o){return s-=100,o<0&&(s=-s),s/100*o+o}(i,r)),i}Ma(){return this.cl}Dt(){return this.fl||(this.fl=Vte(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const r=this.cl.indexOf(e);if(r===-1)throw new Error("source is not attached to scale");this.cl.splice(r,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const r of this.cl){const i=r.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const r=this.xl.Da();return this.pl={Da:r,io:e},this._l.p(),r}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=at(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let r=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const i=at(this.nl).Ue();r=Math.max(r,.1),i.je(r),this.Bl(i)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=at(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const r=at(this.Qe()).Ye()/(this.zl()-1);let i=e-this.ml;this.Vl()&&(i*=-1);const s=i*r,o=at(this.nl).Ue();o.Ke(s),this.Bl(o,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,r){switch(this.Ps.mode){case 2:return this.oo(af(e,r));case 3:return this.ea().format(Hg(e,r));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,at(this.dl).ea())}Vh(e,r){return e=af(e,r),this.oo(e,_8)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach(e=>e.Ns())}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const i of this.cl)i.hs()<e&&(e=i.hs(),this.dl=i);let r=100;this.dl!==null&&(r=Math.round(this.dl.nh())),this.ra=S8,this.Le()?(this.ra=_8,r=100):this.Dl()?(this.ra=new S_(100,1),r=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new x8(this,r,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,r){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?Lw(e,this.wl):e;const i=at(this.Qe()),s=this.Ol()+(this.zl()-1)*(e-i.$e())/i.Ye();return this.Hl(s)}Cl(e,r){if(this.Nl(),this.Ki())return 0;const i=this.Hl(e),s=at(this.Qe()),o=s.$e()+s.Ye()*((i-this.Ol())/(this.zl()-1));return this.Ja()?Vg(o,this.wl):o}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let r=null;const i=this.co();let s=0,o=0;for(const c of i){if(!c.Vt())continue;const u=c.zt();if(u===null)continue;const h=c.Mh(e.Uh(),e.bi());let d=h&&h.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=zm(d,this.wl);break;case 2:d=q_e(d,u.Wt);break;case 3:d=H_e(d,u.Wt)}if(r=r===null?d:r.vn(at(d)),h!==null){const f=h.tr();f!==null&&(s=Math.max(s,f.above),o=Math.max(o,f.below))}}}if(this.$a()&&(s=Math.max(s,this.Ya()),o=Math.max(o,this.Ya())),s===this.ll&&o===this.ol||(this.ll=s,this.ol=o,this.pl=null,this.kl()),r!==null){if(r.$e()===r.qe()){const c=5*this.fo();this.Ja()&&(r=lf(r,this.wl)),r=new Ei(r.$e()-c,r.qe()+c),this.Ja()&&(r=zm(r,this.wl))}if(this.Ja()){const c=lf(r,this.wl),u=tC(c);if(a=u,l=this.wl,a.Va!==l.Va||a.Ba!==l.Ba){const h=this.nl!==null?lf(this.nl,this.wl):null;this.wl=u,r=zm(c,u),h!==null&&(this.nl=zm(h,u))}}this.Bl(r)}else this.Ge===null&&(this.Bl(new Ei(-.5,.5)),this.wl=tC(null));var a,l}$l(){return this.Le()?af:this.Dl()?Hg:this.Ja()?e=>Lw(e,this.wl):null}vo(e,r,i){return r===void 0?(i===void 0&&(i=this.ea()),i.format(e)):r(e)}mo(e,r,i){return r===void 0?(i===void 0&&(i=this.ea()),i.formatTickmarks(e)):r(e)}nr(e,r){return this.vo(e,this.bl.priceFormatter,r)}uo(e,r){const i=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),r)}oo(e,r){return this.vo(e,this.bl.percentageFormatter,r)}_o(e,r){const i=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),r)}}function k8(n){return n instanceof k_}class C8{constructor(e,r){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new gr,this.yh=[],this.uh=e,this.ts=r,this.Co=new W_e(this);const i=r.N();this.Po=this.yo("left",i.leftPriceScale),this.ko=this.yo("right",i.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(i)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const r=Array.from(this.wo.values());for(const i of r){const s=at(i[0].Ft());s.hr(e.overlayPriceScales),e.localization&&s.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?Yi(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach(e=>{e.m&&e.m()}),this.yh=this.yh.filter(e=>{const r=e.oh();return r.detached&&r.detached(),!1}),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach(r=>{if(this.Un(r)){const i=r.Ft();i!==null&&i.Al(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(k8)}Ma(){return this.cl}Un(e){const r=e.Ft();return r===null||this.Po!==r&&this.ko!==r}Gl(e,r,i){this.No(e,r,i?e.hs():this.cl.length)}Ql(e,r){const i=this.cl.indexOf(e);Vr(i!==-1,"removeDataSource: invalid data source"),this.cl.splice(i,1),r||this.cl.forEach((a,l)=>a.ls(l));const s=at(e.Ft()).ma();if(this.wo.has(s)){const a=Yi(this.wo.get(s)),l=a.indexOf(e);l!==-1&&(a.splice(l,1),a.length===0&&this.wo.delete(s))}const o=e.Ft();o&&o.Ma().indexOf(e)>=0&&(o.Ql(e),this.Fo(o)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,r){e.no(r)}$o(e,r){e.eo(r),this.Ao()}qo(e){e.ro()}Yo(e,r){e.ho(r)}jo(e,r){e.ao(r),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach(e=>{e.Ns()})}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const r=this.uh.Pe();e.yl({sn:!0}),r!==null&&e.do(r),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=Vte(this.cl)),this.fl}Qo(e,r){r=qg(r,0,this.cl.length-1);const i=this.cl.indexOf(e);Vr(i!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(i,1),this.cl.splice(r,0,e),this.cl.forEach((s,o)=>s.ls(o)),this.fl=null;for(const s of[this.Po,this.ko])s.Jl(),s.wa();this.ts.ar()}Bt(){return this.Dt().filter(k8)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new D_e(e))}ua(e){this.yh=this.yh.filter(r=>r.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,r){return this.yh.map(i=>i.jn(e,r)).filter(i=>i!==null)}Xo(e){const r=e.co();if(r&&r.length>0&&!this.uh.Ki()){const i=this.uh.Pe();i!==null&&e.do(i)}e.Ns()}No(e,r,i){let s=this.Do(r);if(s===null&&(s=this.yo(r,this.ts.N().overlayPriceScales)),this.cl.splice(i,0,e),!__(r)){const o=this.wo.get(r)||[];o.push(e),this.wo.set(r,o)}e.ls(i),s.Gl(e),e._s(s),this.Fo(s),this.fl=null}To(e,r,i){r.ie!==i.ie&&this.Xo(e)}yo(e,r){const i={visible:!0,autoScale:!0,...al(r)},s=new V_e(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return s.Al(this.$t()),s}}function xv(n){return{n_:n.n_,e_:{Kn:n.r_.externalId},h_:n.r_.cursorStyle}}function Y_e(n,e,r,i){for(const s of n){const o=s.Tt(i);if(o!==null&&o.jn){const a=o.jn(e,r);if(a!==null)return{a_:s,e_:a}}}return null}function G_e(n){return n.Fs!==void 0}function Yte(n,e,r){const i=[n,...n.Dt()],s=function(o,a,l){var f;let c,u;for(const m of o){const g=((f=m.sa)==null?void 0:f.call(m,a,l))??[];for(const b of g)h=b.zOrder,d=c==null?void 0:c.zOrder,(!d||h==="top"&&d!=="top"||h==="normal"&&d==="bottom")&&(c=b,u=m)}var h,d;return c&&u?{r_:c,n_:u}:null}(i,e,r);if((s==null?void 0:s.r_.zOrder)==="top")return xv(s);for(const o of i){if(s&&s.n_===o&&s.r_.zOrder!=="bottom"&&!s.r_.isBackground)return xv(s);if(G_e(o)){const a=Y_e(o.Fs(n),e,r,n);if(a!==null)return{n_:o,a_:a.a_,e_:a.e_}}if(s&&s.n_===o&&s.r_.zOrder!=="bottom"&&s.r_.isBackground)return xv(s)}return s!=null&&s.r_?xv(s):null}class K_e{constructor(e,r,i=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=r,this.Vn=i}__(e){const r=e.time,i=this.o_.cacheKey(r),s=this.Dn.get(i);if(s!==void 0)return s.u_;if(this.yn===this.Vn){const a=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Yi(a)),this.Tn++,this.yn--}const o=this.l_(e);return this.Dn.set(i,{u_:o,An:this.kn}),this.Rn.set(this.kn,i),this.yn++,this.kn++,o}}class Yg{constructor(e,r){Vr(e<=r,"right should be >= left"),this.c_=e,this.d_=r}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function E8(n,e){return n===null||e===null?n===e:n.He(e)}class X_e{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,r){this.g_(r),this.Dn=null;for(let i=r;i<e.length;++i){const s=e[i];let o=this.p_.get(s.timeWeight);o===void 0&&(o=[],this.p_.set(s.timeWeight,o)),o.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}M_(e,r,i,s,o){const a=Math.ceil(r/e);return this.Dn!==null&&this.Dn.b_===a&&o===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:o,x_:i,Da:this.C_(a,i,s),b_:a}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const r=[];this.p_.forEach((i,s)=>{e<=i[0].index?r.push(s):i.splice(Ep(i,e,o=>o.index<e),1/0)});for(const i of r)this.p_.delete(i)}C_(e,r,i){let s=[];const o=a=>!r||i.has(a.index);for(const a of Array.from(this.p_.keys()).sort((l,c)=>c-l)){if(!this.p_.get(a))continue;const l=s;s=[];const c=l.length;let u=0;const h=Yi(this.p_.get(a)),d=h.length;let f=1/0,m=-1/0;for(let g=0;g<d;g++){const b=h[g],y=b.index;for(;u<c;){const v=l[u],w=v.index;if(!(w<y&&o(v))){f=w;break}u++,s.push(v),m=w,f=1/0}if(f-y>=e&&y-m>=e&&o(b))s.push(b),m=y;else if(this.v_)return l}for(;u<c;u++)o(l[u])&&s.push(l[u])}return s}}class Sf{constructor(e){this.P_=e}y_(){return this.P_===null?null:new Yg(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new Sf(null)}}function Q_e(n,e){return n.weight>e.weight?n:e}class J_e{constructor(e,r,i,s){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new X_e,this.B_=new Map,this.I_=Sf.T_(),this.E_=!0,this.A_=new gr,this.z_=new gr,this.L_=new gr,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=r,this.bl=i,this.U_=r.rightOffset,this.q_=r.barSpacing,this.ts=e,this.Y_(r),this.o_=s,this.j_(),this.V_.m_(r.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){bs(this.bl,e),this.Z_(),this.j_()}hr(e,r){bs(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var r;return((r=this.D_[e])==null?void 0:r.time)??null}ss(e){return this.D_[e]??null}Q_(e,r){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return r?this.D_.length-1:null;const i=Ep(this.D_,this.o_.key(e),(s,o)=>this.o_.key(s.time)<o);return this.o_.key(e)<this.o_.key(this.D_[i].time)?r?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const r={from:e.Uh(),to:e.bi()};return this.eu(r)}eu(e){const r=Math.round(e.from),i=Math.round(e.to),s=at(this.ru()),o=at(this.hu());return{from:at(this.ss(Math.max(s,r))),to:at(this.ss(Math.min(o,i)))}}au(e){return{from:at(this.Q_(e.from,!0)),to:at(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const r=this.su(),i=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.q_*e/i;this.q_=s}if(this.Ps.fixLeftEdge&&r!==null&&r.Uh()<=0){const s=i-e;this.U_-=Math.round(s/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!K0(e))return 0;const r=this._u()+this.U_-e;return this.Mo-(r+.5)*this.q_-1}uu(e,r){const i=this._u(),s=r===void 0?0:r.from,o=r===void 0?e.length:r.to;for(let a=s;a<o;a++){const l=e[a].wt,c=i+this.U_-l,u=this.Mo-(c+.5)*this.q_-1;e[a]._t=u}}cu(e,r){const i=Math.ceil(this.du(e));return r&&this.Ps.ignoreWhitespaceIndices&&!this.fu(i)?this.pu(i):i}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const r=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&r!==0){const i=this.U_*r/this.q_;this.U_=i}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,r=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(r/e),s=at(this.Pe()),o=Math.max(s.Uh(),s.Uh()-i),a=Math.max(s.bi(),s.bi()-i),l=this.V_.M_(e,r,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.ru()+i,u=this.hu()-i,h=this.Mu(),d=this.Ps.fixLeftEdge||h,f=this.Ps.fixRightEdge||h;let m=0;for(const g of l){if(!(o<=g.index&&g.index<=a))continue;let b;m<this.H_.length?(b=this.H_[m],b.coord=this.qt(g.index),b.label=this.bu(g),b.weight=g.weight):(b={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.bu(g),weight:g.weight},this.H_.push(b)),this.q_>r/2&&!h?b.needAlignCoordinate=!1:b.needAlignCoordinate=d&&g.index<=c||f&&g.index>=u,m++}return this.H_.length=m,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,r){const i=this.du(e),s=this.mu(),o=s+r*(s/10);this.dn(o),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(i-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const r=qg(this.Mo-e,0,this.Mo),i=qg(this.Mo-at(this.vl),0,this.Mo);r!==0&&i!==0&&this.dn(this.O_.mu*r/i)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const r=(this.ml-e)/this.mu();this.U_=at(this.O_).gu+r,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,r=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_,s=performance.now();this.ts._n({Ru:o=>(o-s)/r>=1,Du:o=>{const a=(o-s)/r;return a>=1?e:i+(e-i)*a}})}yt(e,r){this.E_=!0,this.D_=e,this.V_.w_(e,r),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,r){const i=e.f_(),s=r&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-s)/i),this.U_=e.bi()-this._u(),r&&(this.U_=s?s/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),r=this.hu();e!==null&&r!==null&&this.Eu(new Yg(e,r),!0)}zu(e){const r=new Yg(e.from,e.to);this.Eu(r)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const r of e)for(const i of r.va())this.F_.set(i,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,r=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const r=this.Lu(e),i=this._u()+this.U_-r;return Math.round(1e6*i)/1e6}wu(e){const r=this.q_;this.q_=e,this.lu(),r!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(Sf.T_());const e=this._u(),r=this.Mo/this.q_,i=this.U_+e,s=new Yg(i-r+1,i);this.Nu(new Sf(s))}lu(){const e=qg(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const r=this.Uu();this.U_>r&&(this.U_=r,this.E_=!0)}Hu(){const e=this.ru(),r=this.R_;return e===null||r===null?null:e-r-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let r=this.B_.get(e.weight);return r===void 0&&(r=new K_e(i=>this.$u(i),this.o_),this.B_.set(e.weight,r)),r.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const r=this.I_;this.I_=e,E8(r.y_(),this.I_.y_())||this.A_.p(),E8(r.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const r=this.Pe();if(r===null)return;const i=r.Uh()-e;if(i<0){const s=this.U_-i-1;this.fn(s)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const r=function*(s){const o=Math.round(s),a=o<s;let l=1;for(;;)a?(yield o+l,yield o-l):(yield o-l,yield o+l),l++}(e),i=this.hu();for(;i;){const s=r.next().value;if(this.F_.get(s))return s;if(s<0||s>i)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const r=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(r)}}}var T8,P8,M8,D8,O8;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(T8||(T8={}));class Z_e{constructor(e,r,i){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new gr,this.Xu=new gr,this.Zu=null,this.Gu=e,this.Ps=r,this.o_=i,this.Sl=new Z1e(this.Ps.layout.colorParsers),this.Ju=new J1e(this),this.uh=new J_e(this,r.timeScale,this.Ps.localization,i),this.Ct=new u_e(this,r.crosshair),this.Qu=new B_e(r.crosshair),r.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(Ri.gn())}ar(){this.rc(Ri.wn())}Zh(){this.rc(new Ri(1))}Eh(e){const r=this.hc(e);this.rc(r)}ac(){return this.ju}lc(e){var i,s,o,a;if(((i=this.ju)==null?void 0:i.n_)===(e==null?void 0:e.n_)&&((o=(s=this.ju)==null?void 0:s.e_)==null?void 0:o.Kn)===((a=e==null?void 0:e.e_)==null?void 0:a.Kn))return;const r=this.ju;this.ju=e,r!==null&&this.Eh(r.n_),e!==null&&e.n_!==(r==null?void 0:r.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){bs(this.Ps,e),this.qu.forEach(r=>r.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,r,i=0){const s=this.qu[i];if(s===void 0)return;if(e==="left")return bs(this.Ps,{leftPriceScale:r}),s.Ro({leftPriceScale:r}),this.Ku.p(),void this.Ih();if(e==="right")return bs(this.Ps,{rightPriceScale:r}),s.Ro({rightPriceScale:r}),this.Ku.p(),void this.Ih();const o=this._c(e,i);o!==null&&(o.Ft.hr(r),this.Ku.p())}_c(e,r){const i=this.qu[r];if(i===void 0)return null;const s=i.Do(e);return s!==null?{Us:i,Ft:s}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,r){e.Al(r),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach(r=>r.Eo(e)),this.vu()}fc(e){this.qu.length!==1&&(Vr(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,r){if(this.qu.length<2)return;Vr(e>=0&&e<this.qu.length,"Invalid pane index");const i=this.qu[e],s=this.qu.reduce((d,f)=>d+f.Bo(),0),o=this.qu.reduce((d,f)=>d+f.$t(),0),a=o-30*(this.qu.length-1);r=Math.min(a,Math.max(30,r));const l=s/o,c=i.$t();i.Io(r*l);let u=r-c,h=this.qu.length-1;for(const d of this.qu)if(d!==i){const f=Math.min(a,Math.max(30,d.$t()-u/h));u-=d.$t()-f,h-=1;const m=f*l;d.Io(m)}this.Ih()}mc(e,r){Vr(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index");const i=this.qu[e],s=this.qu[r];this.qu[e]=s,this.qu[r]=i,this.Ih()}wc(e,r){if(Vr(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index"),e===r)return;const[i]=this.qu.splice(e,1);this.qu.splice(r,0,i),this.Ih()}Uo(e,r,i){e.Uo(r,i)}$o(e,r,i){e.$o(r,i),this.Ah(),this.rc(this.gc(e,2))}qo(e,r){e.qo(r),this.rc(this.gc(e,2))}Yo(e,r,i){r.Tl()||e.Yo(r,i)}jo(e,r,i){r.Tl()||(e.jo(r,i),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,r){r.Tl()||(e.Ko(r),this.rc(this.gc(e,2)))}Zo(e,r){e.Zo(r),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,r){const i=this.Et();if(i.Ki()||r===0)return;const s=i.Qi();e=Math.max(1,Math.min(e,s)),i.Cu(e,r),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,r,i,s,o){this.Ct.Vs(e,r);let a=NaN,l=this.uh.cu(e,!0);const c=this.uh.Pe();c!==null&&(l=Math.min(Math.max(c.Uh(),l),c.bi()));const u=s.ks(),h=u.zt();if(h!==null&&(a=u.Ts(r,h)),a=this.Qu.ga(a,l,s),this.Ct.As(l,a,s),this.Zh(),!o){const d=Yte(s,e,r);this.lc(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:r},i)}}Rc(e,r,i){const s=i.ks(),o=s.zt(),a=s.Nt(e,at(o)),l=this.uh.Q_(r,!0),c=this.uh.qt(at(l));this.Tc(c,a,null,i,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const r=this.Ct.Is(),i=this.Ct.Es();this.Tc(r,i,null,e)}this.Ct.Ns()}Vc(e,r,i){const s=this.uh.Rs(0);r!==void 0&&i!==void 0&&this.uh.yt(r,i);const o=this.uh.Rs(0),a=this.uh._u(),l=this.uh.Pe();if(l!==null&&s!==null&&o!==null){const c=l.Te(a),u=this.o_.key(s)>this.o_.key(o),h=e!==null&&e>a&&!u,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!f){const m=e-a;this.uh.fn(this.uh.gu()-m)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(i){return i instanceof C8}(e))return e;const r=this.qu.find(i=>i.Dt().includes(e));return r===void 0?null:r}vu(){this.qu.forEach(e=>e.Jo()),this.Ah()}m(){this.qu.forEach(e=>e.m()),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,r){const i=this.tc(r);this.Ec(e,i),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const r=this.Hn(e),i=this.Yu.indexOf(e);Vr(i!==-1,"Series not found");const s=at(r);this.Yu.splice(i,1),s.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(s)}Bh(e,r){const i=at(this.Hn(e));i.Ql(e,!0),i.Gl(e,r,!0)}Au(){const e=Ri.wn();e.rn(),this.rc(e)}Lc(e){const r=Ri.wn();r.ln(e),this.rc(r)}cn(){const e=Ri.wn();e.cn(),this.rc(e)}dn(e){const r=Ri.wn();r.dn(e),this.rc(r)}fn(e){const r=Ri.wn();r.fn(e),this.rc(r)}_n(e){const r=Ri.wn();r._n(e),this.rc(r)}hn(){const e=Ri.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,r){if(Vr(r>=0,"Index should be greater or equal to 0"),r===this.Fc(e))return;const i=at(this.Hn(e));i.Ql(e);const s=this.tc(r);this.Ec(e,s),i.Ma().length===0&&this.zc(i),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const r=this.ec,i=this.sc;if(r===i)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==i||this.Zu.wr!==r)this.Zu={mr:i,wr:r,Hc:new Map};else{const o=this.Zu.Hc.get(e);if(o!==void 0)return o}const s=this.Sl.tt(i,r,e/100);return this.Zu.Hc.set(e,s),s}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const r=new C8(this.uh,this);this.qu.push(r);const i=e??this.qu.length-1,s=Ri.gn();return s.Qs(i,{tn:0,sn:!0}),this.rc(s),r}tc(e){return Vr(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex(r=>r.Oo().includes(e))}gc(e,r){const i=new Ri(r);if(e!==null){const s=this.qu.indexOf(e);i.Qs(s,{tn:r})}return i}hc(e,r){return r===void 0&&(r=2),this.gc(this.Hn(e),r)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach(r=>r.i_().lr().yt())}Ec(e,r){const i=e.N().priceScaleId,s=i!==void 0?i:this.Oc();r.Gl(e,s),__(s)||e.hr(e.N())}nc(e){const r=this.Ps.layout;return r.background.type==="gradient"?e===0?r.background.topColor:r.background.bottomColor:r.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function Gte(n){if(n>=1)return 0;let e=0;for(;e<8;e++){const r=Math.round(n);if(Math.abs(r-n)<1e-8)return e;n*=10}return e}function YI(n){return!Cp(n)&&!Bb(n)}function Kte(n){return Cp(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(P8||(P8={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(M8||(M8={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(D8||(D8={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(O8||(O8={}));const I8=n=>n.getUTCFullYear();function eSe(n,e,r){return e.replace(/yyyy/g,(i=>ll(I8(i),4))(n)).replace(/yy/g,(i=>ll(I8(i)%100,2))(n)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(n,r)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(n,r)).replace(/MM/g,(i=>ll((s=>s.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>ll((s=>s.getUTCDate())(i),2))(n))}class Xte{constructor(e="yyyy-MM-dd",r="default"){this.Yc=e,this.jc=r}__(e){return eSe(e,this.Yc,this.jc)}}class tSe{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",ll(e.getUTCHours(),2)).replace("%m",ll(e.getUTCMinutes(),2)).replace("%s",ll(e.getUTCSeconds(),2))}}const nSe={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class rSe{constructor(e={}){const r={...nSe,...e};this.Qc=new Xte(r.Xc,r.Jc),this.td=new tSe(r.Zc),this.sd=r.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function wv(n){return 60*n*60*1e3}function rC(n){return 60*n*1e3}const _v=[{nd:(A8=1,1e3*A8),ed:10},{nd:rC(1),ed:20},{nd:rC(5),ed:21},{nd:rC(30),ed:22},{nd:wv(1),ed:30},{nd:wv(3),ed:31},{nd:wv(6),ed:32},{nd:wv(12),ed:33}];var A8;function R8(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let r=_v.length-1;r>=0;--r)if(Math.floor(e.getTime()/_v[r].nd)!==Math.floor(n.getTime()/_v[r].nd))return _v[r].ed;return 0}function iC(n){let e=n;if(Bb(n)&&(e=x3(n)),!YI(e))throw new Error("time must be of type BusinessDay");const r=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(r.getTime()/1e3),hd:e}}function N8(n){if(!Kte(n))throw new Error("time must be of type isUTCTimestamp");return{rd:n}}function x3(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function j8(n){Bb(n.time)&&(n.time=x3(n.time))}let L8=class{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(r){r.forEach(j8)}(e):j8(e)}createConverterToInternalObj(e){return at(function(r){return r.length===0?null:YI(r[0].time)||Bb(r[0].time)?iC:N8}(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const r=e;return r.hd===void 0?new Date(1e3*r.rd).getTime():new Date(Date.UTC(r.hd.year,r.hd.month-1,r.hd.day)).getTime()}convertHorzItemToInternal(e){return Kte(r=e)?N8(r):YI(r)?iC(r):iC(x3(r));var r}updateFormatter(e){if(!this.Ps)return;const r=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new rSe({Xc:r,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new Xte(r,e.locale)}formatHorzItem(e){const r=e;return this.ad.__(new Date(1e3*r.rd))}formatTickmark(e,r){const i=function(o,a,l){switch(o){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const o=s.tickMarkFormatter(e.originalTime,i,r.locale);if(o!==null)return o}return function(o,a,l){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=o.hd===void 0?new Date(1e3*o.rd):new Date(Date.UTC(o.hd.year,o.hd.month-1,o.hd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,i,r.locale)}maxTickMarkWeight(e){let r=e.reduce(Q_e,e[0]).weight;return r>30&&r<50&&(r=30),r}fillWeightsForPoints(e,r){(function(i,s=0){if(i.length===0)return;let o=s===0?null:i[s-1].time.rd,a=o!==null?new Date(1e3*o):null,l=0;for(let c=s;c<i.length;++c){const u=i[c],h=new Date(1e3*u.time.rd);a!==null&&(u.timeWeight=R8(h,a)),l+=u.time.rd-(o||u.time.rd),o=u.time.rd,a=h}if(s===0&&i.length>1){const c=Math.ceil(l/(i.length-1)),u=new Date(1e3*(i[0].time.rd-c));i[0].timeWeight=R8(new Date(1e3*i[0].time.rd),u)}})(e,r)}static ld(e){return bs({localization:{dateFormat:"dd MMM 'yy"}},e??{})}};const Tp=typeof window<"u";function F8(){return!!Tp&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function sC(){return!!Tp&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function GI(n){return n+n%2}function iSe(n){Tp&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class C_{constructor(e,r,i){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!sC(),this.Ld=s=>{this.Od(s)},this.Nd=s=>{if(this.Fd(s)){const o=this.Wd(s);if(++this.dd,this.fd&&this.dd>1){const{Hd:a}=this.Ud(zo(s),this.pd);a<30&&!this.Sd&&this.$d(o,this.Yd.qd),this.jd()}}else{const o=this.Wd(s);if(++this.od,this._d&&this.od>1){const{Hd:a}=this.Ud(zo(s),this.ud);a<5&&!this.bd&&this.Kd(o,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=r,this.Ps=i,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const r=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",r)},this.Gd.addEventListener("mousemove",r),this.Fd(e))return;const i=this.Wd(e);this.Kd(i,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const r=this.Wd(e);this.Kd(r,this.Yd.nf),this.zd=!0}ef(e){const r=oC(e.changedTouches,at(this.Ad));if(r===null||(this.Ed=Sv(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const i=this.Ud(zo(r),at(this.gd)),{rf:s,hf:o,Hd:a}=i;if(this.Md||!(a<5)){if(!this.Md){const l=.5*s,c=o>=l&&!this.Ps.af(),u=l>o&&!this.Ps.lf();c||u||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const l=this.Wd(e,r);this.$d(l,this.Yd._f),Dh(e)}}}uf(e){if(e.button!==0)return;const r=this.Ud(zo(e),at(this.wd)),{Hd:i}=r;if(i>=5&&(this.bd=!0,this.Zd()),this.bd){const s=this.Wd(e);this.Kd(s,this.Yd.cf)}}Ud(e,r){const i=Math.abs(r._t-e._t),s=Math.abs(r.ut-e.ut);return{rf:i,hf:s,Hd:i+s}}df(e){let r=oC(e.changedTouches,at(this.Ad));if(r===null&&e.touches.length===0&&(r=e.changedTouches[0]),r===null)return;this.Ad=null,this.Ed=Sv(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const i=this.Wd(e,r);if(this.$d(i,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:s}=this.Ud(zo(r),this.pd);s<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}else this.Sd||(this.$d(i,this.Yd.pf),this.Yd.pf&&Dh(e));this.dd===0&&Dh(e),e.touches.length===0&&this.md&&(this.md=!1,Dh(e))}Od(e){if(e.button!==0)return;const r=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),F8()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(r,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:i}=this.Ud(zo(e),this.ud);i<5&&!this.bd&&this.Kd(r,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(r,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const r=e.changedTouches[0];this.Ad=r.identifier,this.Ed=Sv(e);const i=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=zo(r),this.Td&&(this.Td(),this.Td=null);{const o=this.ef.bind(this),a=this.df.bind(this);this.Td=()=>{i.removeEventListener("touchmove",o),i.removeEventListener("touchend",a)},i.addEventListener("touchmove",o,{passive:!1}),i.addEventListener("touchend",a,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const s=this.Wd(e,r);this.$d(s,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=zo(r))}bf(e){if(e.button!==0)return;const r=this.Gd.ownerDocument.documentElement;F8()&&r.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=zo(e),this.kd&&(this.kd(),this.kd=null);{const s=this.uf.bind(this),o=this.Od.bind(this);this.kd=()=>{r.removeEventListener("mousemove",s),r.removeEventListener("mouseup",o)},r.addEventListener("mousemove",s),r.addEventListener("mouseup",o)}if(this.Id=!0,this.Fd(e))return;const i=this.Wd(e);this.Kd(i,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=zo(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,r=i=>{this.Yd.xf&&(i.composed&&this.Gd.contains(i.composedPath()[0])||i.target&&this.Gd.contains(i.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",r)},this.xd=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}sC()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),iSe(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",()=>{},{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",e=>this.Rf(e.touches),{passive:!0}),this.Gd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const r=$8(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,r),Dh(e)}},{passive:!1}),this.Gd.addEventListener("touchend",e=>{this.Rf(e.touches)}))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const r=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,ut:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Dd=$8(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const r=this.Wd(e);this.Kd(r,this.Yd.Bf),this.zd=!sC()}gf(e){const r=oC(e.touches,at(this.Ad));if(r===null)return;const i=this.Wd(e,r);this.$d(i,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Sv(e)<this.Ed+500}$d(e,r){r&&r.call(this.Yd,e)}Kd(e,r){r&&r.call(this.Yd,e)}Wd(e,r){const i=r||e,s=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:i.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Dh(e)}}}}function $8(n,e){const r=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(r*r+i*i)}function Dh(n){n.cancelable&&n.preventDefault()}function zo(n){return{_t:n.pageX,ut:n.pageY}}function Sv(n){return n.timeStamp||performance.now()}function oC(n,e){for(let r=0;r<n.length;++r)if(n[r].identifier===e)return n[r];return null}class sSe{constructor(e,r,i){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[r],this.qf=e.$f()[i],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return Tn({width:this.Uf.Gf().width,height:1})}Jf(){return Tn({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,r,i){const s=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(r,i,s.width,s.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),r=e.style;r.position="fixed",r.display="none",r.zIndex="49",r.top="0",r.left="0",r.width="100%",r.height="100%",r.cursor="row-resize",this.jf.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.jf.appendChild(i);const o={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new C_(i,o,{af:()=>!1,lf:()=>!0}),this.Of={ip:i,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const r=this.Uf.ap().Bo()+this.qf.ap().Bo(),i=r/(this.Uf.Gf().height+this.qf.Gf().height),s=30*i;r<=2*s||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:r-s,up:r,cp:i,dp:s},this.Of.tp.style.display="block")}rp(e){const r=this.Wf;if(r===null)return;const i=(e.pageY-r.lp)*r.cp,s=qg(r.op+i,r.dp,r._p);this.Uf.ap().Io(s),this.qf.ap().Io(r.up-s),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function aC(n,e){return n.fp-e.fp}function lC(n,e,r){const i=(n.fp-e.fp)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),r)}class oSe{constructor(e,r,i,s){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=r,this.Cp=i,this.Mn=s}Pp(e,r){if(this.pp!==null){if(this.pp.wt===r)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:r,fp:e}}le(e,r){if(this.pp===null||this.vp===null||r-this.pp.wt>50)return;let i=0;const s=lC(this.pp,this.vp,this.xp),o=aC(this.pp,this.vp),a=[s],l=[o];if(i+=o,this.mp!==null){const u=lC(this.vp,this.mp,this.xp);if(Math.sign(u)===Math.sign(s)){const h=aC(this.vp,this.mp);if(a.push(u),l.push(h),i+=h,this.wp!==null){const d=lC(this.mp,this.wp,this.xp);if(Math.sign(d)===Math.sign(s)){const f=aC(this.mp,this.wp);a.push(d),l.push(f),i+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=l[u]/i*a[u];Math.abs(c)<this.Sp||(this.gp={fp:e,wt:r},this.bp=c,this.Mp=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.Cp))}Du(e){const r=at(this.gp),i=e-r.wt;return r.fp+this.bp*(Math.pow(this.Cp,i)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const r=e-at(this.gp).wt;return Math.min(r,this.Mp)}}class aSe{constructor(e,r){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=r,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function Ad(n,e){const r=at(n.ownerDocument).createElement("canvas");n.appendChild(r);const i=V1e(r,{options:{allowResizeObserver:!0},transform:(s,o)=>({width:Math.max(s.width,o.width),height:Math.max(s.height,o.height)})});return i.resizeCanvasElement(e),i}function Rd(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))==null||e.clearRect(0,0,1,1)}function KI(n,e,r,i){n.ih&&n.ih(e,r,i)}function Ex(n,e,r,i){n.nt(e,r,i)}function XI(n,e,r,i){const s=n(r,i);for(const o of s){const a=o.Tt(i);a!==null&&e(a)}}function cC(n,e){return r=>{var i,s;return function(o){return o.Ft!==void 0}(r)?(((i=r.Ft())==null?void 0:i.ma())??"")!==e?[]:((s=r.ta)==null?void 0:s.call(r,n))??[]:[]}}function B8(n,e,r,i){if(!n.length)return;let s=0;const o=n[0].$t(i,!0);let a=e===1?r/2-(n[0].Fi()-o/2):n[0].Fi()-o/2-r/2;a=Math.max(0,a);for(let l=1;l<n.length;l++){const c=n[l],u=n[l-1],h=u.$t(i,!1),d=c.Fi(),f=u.Fi();if(e===1?d>f-h:d<f+h){const m=f-h*e;c.Wi(m);const g=m-e*h/2;if((e===1?g<0:g>r)&&a>0){const b=e===1?-1-g:g-r,y=Math.min(b,a);for(let v=s;v<n.length;v++)n[v].Wi(n[v].Fi()+e*y);a-=y}}else s=l,a=e===1?f-h-d:d-(f+h)}}class z8{constructor(e,r,i,s){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new Rw(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=r,this.Ml=r.layout,this.Ju=i,this.jp=s==="left",this.Kp=cC("normal",s),this.Xp=cC("top",s),this.Zp=cC("bottom",s),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=Ad(this.jf,Tn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jp=Ad(this.jf,Tn({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const a=this.Jp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const l={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new C_(this.Jp.canvasElement,l,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Rd(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Rd(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const r=this.sv(),i=at(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));i.save();const s=this.Yi.Da();i.font=this.ev(),s.length>0&&(e=Math.max(this.Fp.Vi(i,s[0].Za),this.Fp.Vi(i,s[s.length-1].Za)));const o=this.rv();for(let u=o.length;u--;){const h=this.Fp.Vi(i,o[u].ri());h>e&&(e=h)}const a=this.Yi.zt();if(a!==null&&this.Op!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Yi.Ts(1,a),h=this.Yi.Ts(this.Op.height-2,a);e=Math.max(e,this.Fp.Vi(i,this.Yi.Zi(Math.floor(Math.min(u,h))+.11111111111111,a)),this.Fp.Vi(i,this.Yi.Zi(Math.ceil(Math.max(u,h))-.11111111111111,a)))}var l;i.restore();const c=e||34;return GI(Math.ceil(r.S+r.C+r.B+r.I+5+c))}hv(e){this.Op!==null&&gd(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return at(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,at(this.Ft()))}lv(e){if(this.Op===null)return;const r={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const s=Id(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o),this.uv(o)}),this.Pt.cv(s,this.Zp),this.dv(s),this.Pt.cv(s,this.Kp),this.fv(s))}this.Jp.applySuggestedBitmapSize();const i=Id(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.pv(i),this.Pt.cv(i,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e.drawImage(a,r,i)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!0,r.Uo(i,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap(),s=this.Yi;r.$o(i,s,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),r=this.Pt.ap(),i=this.Yi;this.Np&&(this.Np=!1,e.qo(r,i))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),i=this.Pt.ap();this.Np=!1,r.qo(i,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],r=this.Yi===null?void 0:this.Yi;return(i=>{for(let s=0;s<i.length;++s){const o=i[s].Ws(this.Pt.ap(),r);for(let a=0;a<o.length;a++)e.push(o[a])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:r}){const{width:i,height:s}=r,o=this.Pt.ap().Qt(),a=o.$(),l=o.Wc();a===l?x_(e,0,0,i,s,a):jte(e,0,0,i,s,a,l)}uv({context:e,bitmapSize:r,horizontalPixelRatio:i}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const s=Math.max(1,Math.floor(this.sv().S*i));let o;o=this.jp?r.width-s:0,e.fillRect(o,0,s,r.height)}dv(e){if(this.Op===null||this.Yi===null)return;const r=this.Yi.Da(),i=this.Yi.N(),s=this.sv(),o=this.jp?this.Op.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.fillStyle=i.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(s.C*l);a.beginPath();for(const f of r)a.rect(Math.floor(o*l),Math.round(f.Pa*c)-h,d,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{a.font=this.ev(),a.fillStyle=i.textColor??this.Ml.textColor,a.textAlign=this.jp?"right":"left",a.textBaseline="middle";const l=this.jp?Math.round(o-s.B):Math.round(o+s.C+s.B),c=r.map(u=>this.Fp.Di(a,u.Za));for(let u=r.length;u--;){const h=r[u];a.fillText(h.Za,l,h.Pa+c[u])}})}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const r=[],i=this.Yi.Dt().slice(),s=this.Pt.ap(),o=this.sv();this.Yi===s.$n()&&this.Pt.ap().Dt().forEach(c=>{s.Un(c)&&i.push(c)});const a=this.Yi.Ma()[0],l=this.Yi;i.forEach(c=>{const u=c.Ws(s,l);u.forEach(h=>{h.Wi(null),h.Hi()&&r.push(h)}),a===c&&u.length>0&&(e=u[0].Ii())}),r.forEach(c=>c.Wi(c.Ii())),this.Yi.N().alignLabels&&this.mv(r,o,e)}mv(e,r,i){if(this.Op===null)return;const s=e.filter(a=>a.Ii()<=i),o=e.filter(a=>a.Ii()>i);s.sort((a,l)=>l.Ii()-a.Ii()),s.length&&o.length&&o.push(s[0]),o.sort((a,l)=>a.Ii()-l.Ii());for(const a of e){const l=Math.floor(a.$t(r)/2),c=a.Ii();c>-l&&c<l&&a.Wi(l),c>this.Op.height-l&&c<this.Op.height+l&&a.Wi(this.Op.height-l)}B8(s,1,this.Op.height,r),B8(o,-1,this.Op.height,r)}fv(e){if(this.Op===null)return;const r=this.rv(),i=this.sv(),s=this.jp?"right":"left";r.forEach(o=>{o.Ui()&&o.Tt(at(this.Yi)).nt(e,i,this.Fp,s)})}pv(e){if(this.Op===null||this.Yi===null)return;const r=this.Pt.qp().Qt(),i=[],s=this.Pt.ap(),o=r.uc().Ws(s,this.Yi);o.length&&i.push(o);const a=this.sv(),l=this.jp?"right":"left";i.forEach(c=>{c.forEach(u=>{u.Tt(at(this.Yi)).nt(e,a,this.Fp,l)})})}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return Aw(this.Ml.fontSize,this.Ml.fontFamily)}}function lSe(n,e){var r;return((r=n.Jh)==null?void 0:r.call(n,e))??[]}function U8(n,e){var r;return((r=n.Fs)==null?void 0:r.call(n,e))??[]}function W8(n,e){var r;return((r=n.us)==null?void 0:r.call(n,e))??[]}function cSe(n,e){var r;return((r=n.Xh)==null?void 0:r.call(n,e))??[]}class w3{constructor(e,r){this.Op=Tn({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new gr,this.Cv=new gr,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=r,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(i),this.Gp=Ad(i,Tn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=Ad(i,Tn({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new C_(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Rd(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Rd(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return at(this.Vv)}Lv(e){var r;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(w3.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new aSe(this.Iv,this.Vp),this.Mv.yt()):((r=this.Mv)==null||r.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(at(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(at(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const r=e.localX,i=e.localY;this.Wv(r,i,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const r=e.localX,i=e.localY;this.Wv(r,i,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const r={x:e.localX,y:e.localY};this.jv(r,r,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,r){if(!this.Vp.N().handleScale.pinch)return;const i=5*(r-this.Pv);this.Pv=r,this.ts().bc(e._t,i)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const r=this.ts().uc();this.kv!==null&&r.Vt()&&(this.Rv={x:r.si(),y:r.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const r=e.localX,i=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const s=at(this.Rv),o=s.x+(r-this.kv.x),a=s.y+(i-this.kv.y);this.Wv(o,a,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,r){const i=this.Vv;return i===null?null:Yte(i,e,r)}Jv(e,r){at(r==="left"?this.wv:this.gv).hv(Tn({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){gd(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=at(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const r of e.Ma())if(e.Un(r)){const i=r.Ft();i!==null&&e.Fo(i),r.Ns()}for(const r of e.s_())r.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e!==null&&e.drawImage(a,r,i)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const r={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const s=Id(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o)}),this.Vv&&(this.tm(s,lSe),this.im(s),this.tm(s,U8),this.tm(s,W8)))}this.Jp.applySuggestedBitmapSize();const i=Id(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.sm(i),this.tm(i,cSe),this.tm(i,W8))}nm(){return this.wv}rm(){return this.gv}cv(e,r){this.tm(e,r)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,r){const i=r.localX,s=r.localY;e.v()&&e.p(this.ts().Et().cu(i),{x:i,y:s},r)}_v({context:e,bitmapSize:r}){const{width:i,height:s}=r,o=this.ts(),a=o.$(),l=o.Wc();a===l?x_(e,0,0,i,s,l):jte(e,0,0,i,s,a,l)}im(e){const r=at(this.Vv),i=r.i_().lr().Tt(r);i!==null&&i.nt(e,!1)}sm(e){this.hm(e,U8,Ex,this.ts().uc())}tm(e,r){const i=at(this.Vv),s=i.Dt(),o=i.s_();for(const a of o)this.hm(e,r,KI,a);for(const a of s)this.hm(e,r,KI,a);for(const a of o)this.hm(e,r,Ex,a);for(const a of s)this.hm(e,r,Ex,a)}hm(e,r,i,s){const o=at(this.Vv),a=o.Qt().ac(),l=a!==null&&a.n_===s,c=a!==null&&l&&a.e_!==void 0?a.e_.Xn:void 0;XI(r,u=>i(u,e,l,c),s,o)}Ov(){if(this.Vv===null)return;const e=this.Vp,r=this.Vv.Wo().N().visible,i=this.Vv.Ho().N().visible;r||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),i||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const s=e.Qt().Bc();r&&this.wv===null&&(this.wv=new z8(this,e.N(),s,"left"),this.Ev.appendChild(this.wv.Zf())),i&&this.gv===null&&(this.gv=new z8(this,e.N(),s,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,r,i){this.ts().Tc(this.lm(e),this.om(r),i,at(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,r,i){this.kv=e,this.Tv=!1,this.Wv(r.x,r.y,i);const s=this.ts().uc();this.Rv={x:s.si(),y:s.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const r=this.ts(),i=this.ap();if(r.Ko(i,i.ks()),this.bv=null,this.Sv=!1,r.Pc(),this.Dv!==null){const s=performance.now(),o=r.Et();this.Dv.le(o.gu(),s),this.Dv.Ru(s)||r._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)at(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const r=this.ts(),i=r.Et();if(i.Ki())return;const s=this.Vp.N(),o=s.handleScroll,a=s.kineticScroll;if((!o.pressedMouseMove||e.Ef)&&(!o.horzTouchDrag&&!o.vertTouchDrag||!e.Ef))return;const l=this.Vv.ks(),c=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:c,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&a.touch||!e.Ef&&a.mouse){const u=i.mu();this.Dv=new oSe(.2/u,7/u,.997,15/u),this.Dv.Pp(i.gu(),this.bv.rd)}else this.Dv=null;l.Ki()||r.Yo(this.Vv,l,e.localY),r.xc(e.localX),this.Sv=!0}this.Sv&&(l.Ki()||r.jo(this.Vv,l,e.localY),r.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(i.gu(),c))}}class q8{constructor(e,r,i,s,o){this.xt=!0,this.Op=Tn({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=i.Bc,this.Ps=r,this.dm=s,this.fm=o,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=Ad(this.jf,Tn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Rd(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){gd(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const r=Id(this.Gp,{colorSpace:this.Ps.layout.colorSpace});r!==null&&r.useBitmapCoordinateSpace(i=>{this._v(i),this.uv(i)})}Jf(){return this.Gp.bitmapSize}Qf(e,r,i){const s=this.Jf();s.width>0&&s.height>0&&e.drawImage(this.Gp.canvasElement,r,i)}uv({context:e,bitmapSize:r,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const o=Math.floor(this.Ju.N().S*i),a=Math.floor(this.Ju.N().S*s),l=this.jp?r.width-o:0;e.fillRect(l,0,o,a)}_v({context:e,bitmapSize:r}){x_(e,0,0,r.width,r.height,this.fm())}}function _3(n){return e=>{var r;return((r=e.ia)==null?void 0:r.call(e,n))??[]}}const uSe=_3("normal"),dSe=_3("top"),hSe=_3("bottom");class fSe{constructor(e,r){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=Tn({width:0,height:0}),this.gm=new gr,this.Fp=new Rw(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=r,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=Ad(this.Sm,Tn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=Ad(this.Sm,Tn({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const s=this.Jp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new C_(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),Rd(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),Rd(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,r,i){gd(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(Tn({width:r,height:e.height})),this.vm!==null&&this.vm.hv(Tn({width:i,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,r,i,s){const o=this.Jf();if(o.width>0&&o.height>0&&(e.drawImage(this.Gp.canvasElement,r,i),s)){const a=this.Jp.canvasElement;e.drawImage(a,r,i)}}lv(e){if(e===0)return;const r={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const s=Id(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(o=>{this._v(o),this.uv(o),this.Vm(s,hSe)}),this.dv(s),this.Vm(s,uSe)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const i=Id(this.Jp,r);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)}),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],i),this.Vm(i,dSe))}Vm(e,r){const i=this.Vp.Qt().js();for(const s of i)XI(r,o=>KI(o,e,!1,void 0),s,void 0);for(const s of i)XI(r,o=>Ex(o,e,!1,void 0),s,void 0)}_v({context:e,bitmapSize:r}){x_(e,0,0,r.width,r.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:r,verticalPixelRatio:i}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const s=Math.max(1,Math.floor(this.Rm().S*i));e.fillRect(0,0,r.width,s)}}dv(e){const r=this.Vp.Qt().Et(),i=r.Da();if(!i||i.length===0)return;const s=this.o_.maxTickMarkWeight(i),o=this.Rm(),a=r.N();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);l.beginPath();const f=Math.round(o.C*u);for(let m=i.length;m--;){const g=Math.round(i[m].coord*c);l.rect(g-d,0,h,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=o.S+o.C+o.A+o.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.ev();for(const u of i)if(u.weight<s){const h=u.needAlignCoordinate?this.Em(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}this.Vp.N().timeScale.allowBoldLabels&&(l.font=this.Am());for(const u of i)if(u.weight>=s){const h=u.needAlignCoordinate?this.Em(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}})}Em(e,r,i){const s=this.Fp.Vi(e,i),o=s/2,a=Math.floor(r-o)+.5;return a<0?r+=Math.abs(0-a):a+s>this.Op.width&&(r-=Math.abs(this.Op.width-(a+s))),r}Bm(e,r){const i=this.Rm();for(const s of e)for(const o of s.cs())o.Tt().nt(r,i)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return Aw(this.F(),this.Ps.fontFamily)}Am(){return Aw(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Rw,Dm:0});const e=this.M,r=this.ev();if(e.k!==r){const i=this.F();e.P=i,e.k=r,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.Dm=4*i/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),r=e.N();r.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),r.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const i={Bc:this.Vp.Qt().Bc()},s=()=>r.leftPriceScale.borderVisible&&e.Et().N().borderVisible,o=()=>e.Wc();r.leftPriceScale.visible&&this.pm===null&&(this.pm=new q8("left",r,i,s,o),this.Mm.appendChild(this.pm.Zf())),r.rightPriceScale.visible&&this.vm===null&&(this.vm=new q8("right",r,i,s,o),this.bm.appendChild(this.vm.Zf()))}}var GK;const pSe=!!Tp&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Tp&&((GK=navigator==null?void 0:navigator.userAgentData)!=null&&GK.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class mSe{constructor(e,r,i){var s;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new gr,this.Cv=new gr,this.Xu=new gr,this.Um=null,this.$m=null,this.Dp=e,this.Ps=r,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),uC(this.Ps)&&this.Km(!0),this.ts=new Z_e(this.Gu.bind(this),this.Ps,i),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new fSe(this,this.o_),this.qm.appendChild(this.Zm.Zf());const o=r.autoSize&&this.Gm();let a=this.Ps.width,l=this.Ps.height;if(o||a===0||l===0){const c=e.getBoundingClientRect();a=a||c.width,l=l||c.height}this.Jm(a,l),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],at(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,r,i=!1){if(this.il===r&&this.Mo===e)return;const s=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return Tn({width:c-c%2,height:u-u%2})}(Tn({width:e,height:r}));this.il=s.height,this.Mo=s.width;const o=this.il+"px",a=this.Mo+"px";at(this.kp).style.height=o,at(this.kp).style.width=a,this.qm.style.height=o,this.qm.style.width=a,i?this.ew(Ri.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=Ri.gn());for(let r=0;r<this.zm.length;r++)this.zm[r].lv(e.en(r).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var s;const r=uC(this.Ps);this.ts.hr(e);const i=uC(this.Ps);i!==r&&this.Km(i),(s=e.layout)!=null&&s.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const r=this.lw(null),i=document.createElement("canvas");i.width=r.width,i.height=r.height;const s=at(i.getContext("2d"));return this.lw(s,e),i}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:at(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return Yi(this.zm[e]).Gf()}rw(){this.Lm.forEach(e=>{e.yt()})}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,r){let i=0,s=0;const o=this.zm[0],a=(c,u)=>{let h=0;for(let d=0;d<this.zm.length;d++){const f=this.zm[d],m=at(c==="left"?f.nm():f.rm()),g=m.Jf();if(e!==null&&m.Qf(e,u,h,r),h+=g.height,d<this.zm.length-1){const b=this.Lm[d],y=b.Jf();e!==null&&b.Qf(e,u,h),h+=y.height}}};this._w()&&(a("left",0),i+=at(o.nm()).Jf().width);for(let c=0;c<this.zm.length;c++){const u=this.zm[c],h=u.Jf();if(e!==null&&u.Qf(e,i,s,r),s+=h.height,c<this.zm.length-1){const d=this.Lm[c],f=d.Jf();e!==null&&d.Qf(e,i,s),s+=f.height}}i+=o.Jf().width,this.uw()&&(a("right",i),i+=at(o.rm()).Jf().width);const l=(c,u,h)=>{at(c==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(at(e),u,h)};if(this.Ps.timeScale.visible){const c=this.Zm.Jf();if(e!==null){let u=0;this._w()&&(l("left",u,s),u=at(o.nm()).Jf().width),this.Zm.Qf(e,u,s,r),u+=c.width,this.uw()&&l("right",u,s)}s+=c.height}return Tn({width:i,height:s})}mw(){let e=0,r=0,i=0;for(const y of this.zm)this._w()&&(r=Math.max(r,at(y.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(i=Math.max(i,at(y.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=y.Bo();r=GI(r),i=GI(i);const s=this.Mo,o=this.il,a=Math.max(s-r-i,0),l=1*this.Lm.length,c=this.Ps.timeScale.visible;let u=c?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var h;u=(h=u)+h%2;const d=l+u,f=o<d?0:o-d,m=f/e;let g=0;const b=window.devicePixelRatio||1;for(let y=0;y<this.zm.length;++y){const v=this.zm[y];v.Lv(this.ts.$s()[y]);let w=0,k=0;k=y===this.zm.length-1?Math.ceil((f-g)*b)/b:Math.round(v.Bo()*m*b)/b,w=Math.max(k,2),g+=w,v.hv(Tn({width:a,height:w})),this._w()&&v.Jv(r,"left"),this.uw()&&v.Jv(i,"right"),v.ap()&&this.ts.dc(v.ap(),w)}this.Zm.km(Tn({width:c?a:0,height:u}),c?r:0,c?i:0),this.ts.Eo(a),this.Nm!==r&&(this.Nm=r),this.Fm!==i&&(this.Fm=i)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return pSe?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const r=this.ww(e),i=r*e.deltaX/100,s=-r*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const o=Math.sign(s)*Math.min(1,Math.abs(s)),a=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(a,o)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*i)}ew(e,r){var s;const i=e.nn();i===3&&this.gw(),i!==3&&i!==2||(this.Mw(e),this.bw(e,r),this.Zm.yt(),this.zm.forEach(o=>{o.Nv()}),((s=this.Wm)==null?void 0:s.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,r),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,r){for(const i of e.pn())this.mn(i,r)}Mw(e){const r=this.ts.$s();for(let i=0;i<r.length;i++)e.en(i).sn&&r[i].Go()}mn(e,r){const i=this.ts.Et();switch(e.an){case 0:i.Au();break;case 1:i.zu(e.Wt);break;case 2:i.dn(e.Wt);break;case 3:i.fn(e.Wt);break;case 4:i.Su();break;case 5:e.Wt.Ru(r)||i.fn(e.Wt.Du(r))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame(r=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const i=this.Wm;this.Wm=null,this.ew(i,r);for(const s of i.pn())if(s.an===5&&!s.Wt.Ru(r)){this.Qt()._n(s.Wt);break}}}))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),r=e.length,i=this.zm.length;for(let s=r;s<i;s++){const o=Yi(this.zm.pop());this.qm.removeChild(o.Zf()),o.Xv().u(this),o.Zv().u(this),o.m();const a=this.Lm.pop();a!==void 0&&this.sw(a)}for(let s=i;s<r;s++){const o=new w3(this,e[s]);if(o.Xv().i(this.Sw.bind(this,o),this),o.Zv().i(this.xw.bind(this,o),this),this.zm.push(o),s>0){const a=new sSe(this,s-1,s);this.Lm.push(a),this.qm.insertBefore(a.Zf(),this.Zm.Zf())}this.qm.insertBefore(o.Zf(),this.Zm.Zf())}for(let s=0;s<r;s++){const o=e[s],a=this.zm[s];a.ap()!==o?a.Lv(o):a.zv()}this.tw(),this.mw()}Cw(e,r,i,s){var d;const o=new Map;e!==null&&this.ts.js().forEach(f=>{const m=f.Xs().Fr(e);m!==null&&o.set(f,m)});let a;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(a=f)}const l=this.Qt().ac(),c=l!==null&&l.n_ instanceof k_?l.n_:void 0,u=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,h=this.Pw(s);return{yw:a,Re:e??void 0,kw:r??void 0,Tw:h!==-1?h:void 0,Rw:c,Dw:o,Vw:u,Bw:i??void 0}}Pw(e){let r=-1;if(e)r=this.zm.indexOf(e);else{const i=this.Qt().uc().Us();i!==null&&(r=this.Qt().$s().indexOf(i))}return r}Sw(e,r,i,s){this.xv.p(()=>this.Cw(r,i,s,e))}xw(e,r,i,s){this.Cv.p(()=>this.Cw(r,i,s,e))}Xm(e,r,i){var s;this.dw(((s=this.Qt().ac())==null?void 0:s.h_)??null),this.Xu.p(()=>this.Cw(e,r,i))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver(e=>{const r=e[e.length-1];r&&this.Jm(r.contentRect.width,r.contentRect.height)}),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function uC(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function gSe(n){return n.open===void 0&&n.value===void 0}function bSe(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function H8(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.color!==void 0&&(o.R=r.color),o}function ySe(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.lineColor!==void 0&&(o.vt=r.lineColor),r.topColor!==void 0&&(o.mr=r.topColor),r.bottomColor!==void 0&&(o.wr=r.bottomColor),o}function vSe(n,e,r,i){const s=r.value,o={Re:e,wt:n,Wt:[s,s,s,s],yw:i};return r.topLineColor!==void 0&&(o.gr=r.topLineColor),r.bottomLineColor!==void 0&&(o.Mr=r.bottomLineColor),r.topFillColor1!==void 0&&(o.br=r.topFillColor1),r.topFillColor2!==void 0&&(o.Sr=r.topFillColor2),r.bottomFillColor1!==void 0&&(o.Cr=r.bottomFillColor1),r.bottomFillColor2!==void 0&&(o.Pr=r.bottomFillColor2),o}function xSe(n,e,r,i){const s={Re:e,wt:n,Wt:[r.open,r.high,r.low,r.close],yw:i};return r.color!==void 0&&(s.R=r.color),s}function wSe(n,e,r,i){const s={Re:e,wt:n,Wt:[r.open,r.high,r.low,r.close],yw:i};return r.color!==void 0&&(s.R=r.color),r.borderColor!==void 0&&(s.Ht=r.borderColor),r.wickColor!==void 0&&(s.vr=r.wickColor),s}function _Se(n,e,r,i,s){const o=Yi(s)(r),a=Math.max(...o),l=Math.min(...o),c=o[o.length-1],u=[c,a,l,c],{time:h,color:d,...f}=r;return{Re:e,wt:n,Wt:u,yw:i,se:f,R:d}}function Um(n){return n.Wt!==void 0}function V8(n,e){return e.customValues!==void 0&&(n.Iw=e.customValues),n}function Eu(n){return(e,r,i,s,o,a)=>function(l,c){return c?c(l):gSe(l)}(i,a)?V8({wt:e,Re:r,yw:s},i):V8(n(e,r,i,s,o),i)}function Y8(n){return{Candlestick:Eu(wSe),Bar:Eu(xSe),Area:Eu(ySe),Baseline:Eu(vSe),Histogram:Eu(H8),Line:Eu(H8),Custom:Eu(_Se)}[n]}function G8(n){return{Re:0,Ew:new Map,Hh:n}}function K8(n,e){if(n!==void 0&&n.length!==0)return{Aw:e.key(n[0].wt),zw:e.key(n[n.length-1].wt)}}function X8(n){let e;return n.forEach(r=>{e===void 0&&(e=r.yw)}),Yi(e)}class SSe{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,r){let i=this.Lw.size!==0,s=!1;const o=this.Ow.get(e);if(o!==void 0)if(this.Ow.size===1)i=!1,s=!0,this.Lw.clear();else for(const c of this.Fw)c.pointData.Ew.delete(e)&&(s=!0);let a=[];if(r.length!==0){const c=r.map(m=>m.time),u=this.o_.createConverterToInternalObj(r),h=Y8(e.Rr()),d=e.ca(),f=e.fa();a=r.map((m,g)=>{const b=u(m.time),y=this.o_.key(b);let v=this.Lw.get(y);v===void 0&&(v=G8(b),this.Lw.set(y,v),s=!0);const w=h(b,v.Re,m,c[g],d,f);return v.Ew.set(e,w),w})}i&&this.Hw(),this.Uw(e,a);let l=-1;if(s){const c=[];this.Lw.forEach(u=>{c.push({timeWeight:0,time:u.Hh,pointData:u,originalTime:X8(u.Ew)})}),c.sort((u,h)=>this.o_.key(u.time)-this.o_.key(h.time)),l=this.$w(c)}return this.qw(e,l,function(c,u,h){const d=K8(c,h),f=K8(u,h);if(d!==void 0&&f!==void 0)return{Yw:!1,zh:d.zw>=f.zw&&d.Aw>=f.Aw}}(this.Ow.get(e),o,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,r,i){const s=r;(function(y){y.yw===void 0&&(y.yw=y.time)})(s),this.o_.preprocessData(r);const o=this.o_.createConverterToInternalObj([r])(r.time),a=this.Nw.get(e);if(!i&&a!==void 0&&this.o_.key(o)<this.o_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${o}`);let l=this.Lw.get(this.o_.key(o));if(i&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=l===void 0;l===void 0&&(l=G8(o),this.Lw.set(this.o_.key(o),l));const u=Y8(e.Rr()),h=e.ca(),d=e.fa(),f=u(o,l.Re,r,s.yw,h,d);l.Ew.set(e,f),i?this.Kw(e,f,l.Re):this.Xw(e,f);const m={zh:Um(f),Yw:i};if(!c)return this.qw(e,-1,m);const g={timeWeight:0,time:l.Hh,pointData:l,originalTime:X8(l.Ew)},b=Ep(this.Fw,this.o_.key(g.time),(y,v)=>this.o_.key(y.time)<v);this.Fw.splice(b,0,g);for(let y=b;y<this.Fw.length;++y)kv(this.Fw[y].pointData,y);return this.o_.fillWeightsForPoints(this.Fw,b),this.qw(e,b,m)}Zw(e,r){const i=this.Ow.get(e);if(i===void 0||r<=0)return[[],this.Gw()];r=Math.min(r,i.length);const s=i.splice(-r).reverse();i.length===0?this.Nw.delete(e):this.Nw.set(e,i[i.length-1].wt);for(const o of s){const a=this.Lw.get(this.o_.key(o.wt));if(a&&(a.Ew.delete(e),a.Ew.size===0)){this.Lw.delete(this.o_.key(a.Hh)),this.Fw.splice(a.Re,1);for(let l=a.Re;l<this.Fw.length;++l)kv(this.Fw[l].pointData,l)}}return[s,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,r){let i=this.Ow.get(e);i===void 0&&(i=[],this.Ow.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.o_.key(r.wt)>this.o_.key(s.wt)?Um(r)&&i.push(r):Um(r)?i[i.length-1]=r:i.splice(-1,1),this.Nw.set(e,r.wt)}Kw(e,r,i){const s=this.Ow.get(e);if(s===void 0)return;const o=Ep(s,i,(a,l)=>a.Re<l);Um(r)?s[o]=r:s.splice(o,1)}Uw(e,r){r.length!==0?(this.Ow.set(e,r.filter(Um)),this.Nw.set(e,r[r.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let r=-1;for(let i=0;i<this.Fw.length&&i<e.length;++i){const s=this.Fw[i],o=e[i];if(this.o_.key(s.time)!==this.o_.key(o.time)){r=i;break}o.timeWeight=s.timeWeight,kv(o.pointData,i)}if(r===-1&&this.Fw.length!==e.length&&(r=Math.min(this.Fw.length,e.length)),r===-1)return-1;for(let i=r;i<e.length;++i)kv(e[i].pointData,i);return this.o_.fillWeightsForPoints(e,r),this.Fw=e,r}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach(r=>{r.length!==0&&(e=Math.max(e,r[r.length-1].Re))}),e}qw(e,r,i){const s=this.Gw();if(r!==-1)this.Ow.forEach((o,a)=>{s.Oo.set(a,{se:o,Qw:a===e?i:void 0})}),this.Ow.has(e)||s.Oo.set(e,{se:[],Qw:i}),s.Et.tg=this.Fw,s.Et.ig=r;else{const o=this.Ow.get(e);s.Oo.set(e,{se:o||[],Qw:i})}return s}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function kv(n,e){n.Re=e,n.Ew.forEach(r=>{r.Re=e})}function kSe(n,e){return n.wt<e}function CSe(n,e){return e<n.wt}function ESe(n,e,r){const i=e.Uh(),s=e.bi(),o=Ep(n,i,kSe),a=Wte(n,s,CSe);if(!r)return{from:o,to:a};let l=o,c=a;return o>0&&o<n.length&&n[o].wt>=i&&(l=o-1),a>0&&a<n.length&&n[a-1].wt<=s&&(c=a+1),{from:l,to:c}}class TSe{constructor(e,r,i){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=r,this.ag=i}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),r=this.Qn.Et();if(this.ug(),r.Ki()||e.Ki())return;const i=r.Pe();if(i===null||this.Jn.Xs().zr()===0)return;const s=this.Jn.zt();s!==null&&(this.hg=ESe(this.rg,i,this.ag),this.fg(e,r,s.Wt),this.pg())}}class PSe{constructor(e,r){this.vg=e,this.Yi=r}nt(e,r,i){this.vg.draw(e,this.Yi,r,i)}}class MSe extends TSe{constructor(e,r,i){super(e,r,!1),this.sh=i,this.og=new PSe(this.sh.renderer(),s=>{const o=e.zt();return o===null?null:e.Ft().Nt(s,o.Wt)})}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map(r=>({wt:r.Re,_t:NaN,...e.Dr(r.Re),mg:r.se}))}fg(e,r){r.uu(this.rg,Q1e(this.hg))}pg(){this.sh.update({bars:this.rg.map(DSe),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function DSe(n){return{x:n._t,time:n.wt,originalData:n.mg,barColor:n.cr}}const OSe={color:"#2196f3"},ISe=(n,e,r)=>{const i=Pc(r);return new MSe(n,e,i)};function S3(n){const e={value:n.Wt[3],time:n.yw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function Q8(n){const e=S3(n);return n.R!==void 0&&(e.color=n.R),e}function ASe(n){const e=S3(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.mr!==void 0&&(e.topColor=n.mr),n.wr!==void 0&&(e.bottomColor=n.wr),e}function RSe(n){const e=S3(n);return n.gr!==void 0&&(e.topLineColor=n.gr),n.Mr!==void 0&&(e.bottomLineColor=n.Mr),n.br!==void 0&&(e.topFillColor1=n.br),n.Sr!==void 0&&(e.topFillColor2=n.Sr),n.Cr!==void 0&&(e.bottomFillColor1=n.Cr),n.Pr!==void 0&&(e.bottomFillColor2=n.Pr),e}function Qte(n){const e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.yw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function NSe(n){const e=Qte(n);return n.R!==void 0&&(e.color=n.R),e}function jSe(n){const e=Qte(n),{R:r,Ht:i,vr:s}=n;return r!==void 0&&(e.color=r),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function Tx(n){return{Area:ASe,Line:Q8,Baseline:RSe,Histogram:Q8,Bar:NSe,Candlestick:jSe,Custom:LSe}[n]}function LSe(n){const e=n.yw;return{...n.se,time:e}}const FSe={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},$Se={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},BSe={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Nte,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},dC={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},zSe={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function J8(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:BSe,crosshair:FSe,grid:$Se,overlayPriceScales:{...dC},leftPriceScale:{...dC,visible:!1},rightPriceScale:{...dC,visible:!0},timeScale:zSe,localization:{locale:Tp?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Jte{constructor(e,r,i){this.Hf=e,this.wg=r,this.gg=i??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return __(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new Ei(e.from,e.to))}getVisibleRange(){let e,r,i=this.Yi().Qe();if(i===null)return null;if(this.Yi().Ja()){const s=this.Yi().fo(),o=Gte(s);i=lf(i,this.Yi().tl()),e=Number((Math.round(i.$e()/s)*s).toFixed(o)),r=Number((Math.round(i.qe()/s)*s).toFixed(o))}else e=i.$e(),r=i.qe();return{from:e,to:r}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return at(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class USe{constructor(e,r,i,s){this.Hf=e,this.Pt=i,this.Mg=r,this.bg=s}getHeight(){return this.Pt.$t()}setHeight(e){const r=this.Hf.Qt(),i=r.Uc(this.Pt);r.vc(i,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const r=this.paneIndex();r!==e&&(Vr(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(r,e))}getSeries(){return this.Pt.Oo().map(e=>this.Mg(e))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Jte(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,r={},i=0){return this.bg.addCustomSeries(e,r,i)}addSeries(e,r={}){return this.bg.addSeries(e,r,this.paneIndex())}}const WSe={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Z8{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class qSe{constructor(e,r,i,s,o,a){this.xg=new gr,this.Jn=e,this.Cg=r,this.Pg=i,this.o_=o,this.bg=s,this.yg=a}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Nt(e,r.Wt)}coordinateToPrice(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Ts(e,r.Wt)}barsInLogicalRange(e){if(e===null)return null;const r=new Sf(new Yg(e.from,e.to)).y_(),i=this.Jn.Xs();if(i.Ki())return null;const s=i.Fr(r.Uh(),1),o=i.Fr(r.bi(),-1),a=at(i.Lr()),l=at(i.Ks());if(s!==null&&o!==null&&s.Re>o.Re)return{barsBefore:e.from-a,barsAfter:l-e.to};const c={barsBefore:s===null||s.Re===a?e.from-a:s.Re-a,barsAfter:o===null||o.Re===l?l-e.to:l-o.Re};return s!==null&&o!==null&&(c.from=s.yw,c.to=o.yw),c}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,r=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,r),this.Tg("update")}pop(e=1){const r=this.Cg.Dg(this.Jn,e);r.length!==0&&this.Tg("update");const i=Tx(this.seriesType());return r.map(s=>i(s))}dataByIndex(e,r){const i=this.Jn.Xs().Fr(e,r);return i===null?null:Tx(this.seriesType())(i)}data(){const e=Tx(this.seriesType());return this.Jn.Xs().Hr().map(r=>e(r))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return al(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const r=bs(al(WSe),e),i=this.Jn.Oh(r);return new Z8(i)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map(e=>new Z8(e))}seriesType(){return this.Jn.Rr()}lastValueData(e){const r=this.Jn.ye(e);return r.ke?{noData:!0}:{noData:!1,price:r.gt,color:r.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,r=at(this.Jn.Qt().Hn(e));return this.yg(r)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const r=this.Jn.Qt().Hn(this.Jn);r!==null&&r.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class HSe{constructor(e,r,i){this.Vg=new gr,this.z_=new gr,this.gm=new gr,this.ts=e,this.uh=e.Et(),this.Zm=r,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=i}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,r){r?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const r={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},i=this.uh.au(r);this.ts.Lc(i)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Vr(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const r=this.ts.Et();return r.Ki()?null:r.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,r){const i=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(i,r)}timeToCoordinate(e){const r=this.timeToIndex(e,!1);return r===null?null:this.uh.qt(r)}coordinateToTime(e){const r=this.ts.Et(),i=r.cu(e),s=r.ss(i);return s===null?null:s.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...al(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function e6(n){return function(e){if(bv(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;bv(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),bv(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const r=e.handleScroll;bv(r)&&(e.handleScroll={horzTouchDrag:r,vertTouchDrag:r,mouseWheel:r,pressedMouseMove:r})}(n),n}class VSe{constructor(e,r,i){this.Ag=new Map,this.zg=new Map,this.Lg=new gr,this.Og=new gr,this.Ng=new gr,this.qu=new WeakMap,this.Fg=new SSe(r);const s=i===void 0?al(J8()):bs(al(J8()),e6(i));this.Wg=r,this.Hf=new mSe(e,s,r),this.Hf.Xv().i(a=>{this.Lg.v()&&this.Lg.p(this.Hg(a()))},this),this.Hf.Zv().i(a=>{this.Og.v()&&this.Og.p(this.Hg(a()))},this),this.Hf.cc().i(a=>{this.Ng.v()&&this.Ng.p(this.Hg(a()))},this);const o=this.Hf.Qt();this.Ug=new HSe(o,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,r,i){this.autoSizeActive()||this.Hf.Jm(e,r,i)}addCustomSeries(e,r={},i=0){const s=(o=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...OSe,...o.defaultOptions()},$g:ISe,qg:o}))(Pc(e));return this.Yg(s,r,i)}addSeries(e,r={},i=0){return this.Yg(e,r,i)}removeSeries(e){const r=Yi(this.Ag.get(e)),i=this.Fg.Ac(r);this.Hf.Qt().Ac(r),this.jg(i),this.Ag.delete(e),this.zg.delete(r)}kg(e,r){this.jg(this.Fg.Ww(e,r))}Rg(e,r,i){this.jg(this.Fg.jw(e,r,i))}Dg(e,r){const[i,s]=this.Fg.Zw(e,r);return i.length!==0&&this.jg(s),i}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,r=0){return new Jte(this.Hf,e,r)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(e6(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,r=!1){let i,s;try{r||(i=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),s=this.Hf.aw(e)}finally{r||i===void 0||this.Hf.Qt().hr({crosshair:{mode:i}})}return s}addPane(e=!1){const r=this.Hf.Qt().$c();return r.zo(e),this.Kg(r)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,r){this.Hf.Qt().mc(e,r)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map(e=>this.Kg(e))}paneSize(e=0){const r=this.Hf.pw(e);return{height:r.height,width:r.width}}setCrosshairPosition(e,r,i){const s=this.Ag.get(i);if(s===void 0)return;const o=this.Hf.Qt().Hn(s);o!==null&&this.Hf.Qt().Rc(e,r,o)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,r={},i=0){Vr(e.$g!==void 0),function(c){if(c===void 0||c.type==="custom")return;const u=c;u.minMove!==void 0&&u.precision===void 0&&(u.precision=Gte(u.minMove))}(r.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(r);const s=bs(al(Ate),al(e.defaultOptions),r),o=e.$g,a=new k_(this.Hf.Qt(),e.type,s,o,e.qg);this.Hf.Qt().Ic(a,i);const l=new qSe(a,this,this,this,this.Wg,c=>this.Kg(c));return this.Ag.set(l,a),this.zg.set(a,l),l}jg(e){const r=this.Hf.Qt();r.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach((i,s)=>s.ht(i.se,i.Qw)),r.Et().K_(),r.vu()}Xg(e){return Yi(this.zg.get(e))}Hg(e){const r=new Map;e.Dw.forEach((s,o)=>{const a=o.Rr(),l=Tx(a)(s);if(a!=="Custom")Vr(bSe(l));else{const c=o.fa();Vr(!c||c(l)===!1)}r.set(this.Xg(o),l)});const i=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:i,hoveredObjectId:e.Vw,seriesData:r,sourceEvent:e.Bw}}Kg(e){let r=this.qu.get(e);return r||(r=new USe(this.Hf,i=>this.Xg(i),e,this),this.qu.set(e,r)),r}}function YSe(n){if(Bb(n)){const e=document.getElementById(n);return Vr(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function GSe(n,e,r){const i=YSe(n),s=new VSe(i,e,r);return e.setOptions(s.options()),s}function KSe(n,e){return GSe(n,new L8,L8.ld(e))}({...Ate});const XSe=E.forwardRef(({initialData:n=[],symbol:e="BTC/USDC",height:r=500,showVolume:i=!0},s)=>{const o=E.useRef(null),a=E.useRef(null),l=E.useRef(null),c=E.useRef(null),[u,h]=E.useState(null),d=b=>{if(b==null)return console.warn("[KlineChart] Invalid price: undefined or null"),0;if(typeof b=="number")return isNaN(b)||!isFinite(b)||b<0?(console.warn("[KlineChart] Invalid price number:",b),0):b;if(typeof b=="string"){if(b.trim()==="")return console.warn("[KlineChart] Invalid price: empty string"),0;try{const y=Ct(b);return isNaN(y)||!isFinite(y)||y<0?(console.warn("[KlineChart] Invalid price after conversion:",b,"->",y),0):y}catch(y){return console.error("[KlineChart] Error parsing price:",b,y),0}}return console.warn("[KlineChart] Invalid price type:",typeof b,b),0},f=b=>{if(b.open===void 0||b.open===null||b.high===void 0||b.high===null||b.low===void 0||b.low===null||b.close===void 0||b.close===null)return console.warn("[KlineChart] Missing required OHLC fields:",b),null;const y=Math.floor((b.open_time||b.close_time||Date.now())/1e3),v=d(b.open),w=d(b.high),k=d(b.low),S=d(b.close);if(v<=0||w<=0||k<=0||S<=0)return console.warn("[KlineChart] Invalid kline data - non-positive prices detected:",{original:b,parsed:{open:v,high:w,low:k,close:S}}),null;const _=Math.max(v,w,k,S),C=Math.min(v,w,k,S);return(w!==_||k!==C)&&console.warn("[KlineChart] Kline data corrected - high/low were not extremes:",{original:{high:w,low:k},corrected:{high:_,low:C}}),{time:y,open:v,high:_,low:C,close:S}},m=b=>{if(!b.volume)return null;const y=Math.floor((b.open_time||b.close_time||Date.now())/1e3);let v;if(typeof b.volume=="number"){if(isNaN(b.volume)||!isFinite(b.volume)||b.volume<0)return console.warn("[KlineChart] Invalid volume number:",b.volume),null;v=b.volume}else if(typeof b.volume=="string"&&b.volume.trim()!=="")try{if(v=Ct(b.volume),isNaN(v)||!isFinite(v)||v<0)return console.warn("[KlineChart] Invalid volume after conversion:",b.volume,"->",v),null}catch(_){return console.error("[KlineChart] Error converting volume from satoshi:",b.volume,_),null}else return console.warn("[KlineChart] Invalid volume type:",typeof b.volume,b.volume),null;const w=d(b.close),k=d(b.open);if(w<=0||k<=0)return console.warn("[KlineChart] Invalid prices for volume color calculation:",{open:k,close:w}),null;const S=w>=k;return{time:y,value:v,color:S?"#26a69a80":"#ef535080"}},g=b=>{if(!l.current){console.warn("[KlineChart] updateChart called before chart is initialized");return}if(!b||typeof b!="object"){console.warn("[KlineChart] Invalid kline update data:",b);return}try{const y=f(b);if(!y){console.warn("[KlineChart] Failed to convert kline to bar, skipping update");return}const v=i?m(b):null;l.current.update(y),h(y.close),i&&c.current&&v&&c.current.update(v)}catch(y){console.error("[KlineChart] Error updating chart:",y)}};return E.useImperativeHandle(s,()=>({updateChart:g})),E.useEffect(()=>{if(!o.current)return;if(a.current){try{a.current.remove()}catch(k){console.warn("[KlineChart] Error removing existing chart:",k)}a.current=null,l.current=null,c.current=null}let b=null,y=null,v=null;const w=()=>{if(!o.current)return;const k=o.current,S=k.clientWidth||k.offsetWidth,_=r||500;if(!S||S<100){console.warn("[KlineChart] Container not ready, waiting for layout...",{clientWidth:k.clientWidth,offsetWidth:k.offsetWidth}),y=requestAnimationFrame(w);return}if(_<=0){console.warn("[KlineChart] Invalid height:",_);return}let C,P=null;try{b=KSe(k,{width:S,height:_,layout:{background:{color:"#1e1e1e"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#2a2e39"},horzLines:{color:"#2a2e39"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2e39"},timeScale:{borderColor:"#2a2e39",timeVisible:!0,secondsVisible:!1}}),typeof b.addCandlestickSeries=="function"?C=b.addCandlestickSeries({upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}):C=b.addSeries("Candlestick",{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}),i&&(typeof b.addHistogramSeries=="function"?P=b.addHistogramSeries({color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""}):P=b.addSeries("Histogram",{color:"#26a69a80",priceFormat:{type:"volume"},priceScaleId:""}))}catch(T){console.error("[KlineChart] Error creating chart or series:",T);return}if(n.length>0&&C)try{C.setData(n),h(n[n.length-1].close)}catch(T){console.error("[KlineChart] Error setting initial data:",T)}a.current=b,l.current=C,c.current=P,v=()=>{if(o.current&&a.current){const T=o.current.clientWidth||o.current.offsetWidth;T>0&&a.current.applyOptions({width:T})}},window.addEventListener("resize",v)};return w(),()=>{if(y!==null&&cancelAnimationFrame(y),v&&window.removeEventListener("resize",v),b)try{b.remove()}catch(k){console.error("[KlineChart] Error removing chart:",k)}a.current=null,l.current=null,c.current=null}},[r,i]),E.useEffect(()=>{if(l.current&&n.length>0)try{l.current.setData(n),h(n[n.length-1].close)}catch(b){console.error("[KlineChart] Error setting initial data:",b)}},[n]),p.jsxs("div",{style:{position:"relative",width:"100%"},children:[p.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:p.jsxs("span",{children:[e," Live Kline Chart",u!==null&&` - Current: $${u.toFixed(2)}`]})}),p.jsx("div",{ref:o,style:{position:"relative",width:"100%"}})]})});XSe.displayName="KlineChart";function Zte(){const n=document.getElementById("tradingview-widget-script");n&&n.parentNode&&n.parentNode.removeChild(n)}function QSe(){return new Promise((n,e)=>{if(typeof window.TradingView<"u"){n();return}Zte();const r=document.createElement("script");r.id="tradingview-widget-script",r.src=dbe,r.async=!0,r.onload=()=>{typeof window.TradingView<"u"?n():e(new Error("TradingView script loaded but TradingView object not found"))},r.onerror=()=>{e(new Error("Failed to load TradingView script"))},document.head.appendChild(r)})}function JSe(n){if(typeof window.TradingView>"u")throw new Error("TradingView is not loaded. Call loadTradingViewScript() first.");const e={autosize:n.autosize!==!1,symbol:n.symbol,interval:n.interval,timezone:n.timezone||"Etc/UTC",theme:"dark",style:"1",locale:n.locale||"en",toolbar_bg:"#1a1a1a",enable_publishing:n.enablePublishing||!1,hide_top_toolbar:n.hideTopToolbar||!1,hide_legend:n.hideLegend||!1,save_image:!1,container_id:n.containerId,hide_volume:n.hideVolume||!1,studies:n.studies||["RSI@tv-basicstudies","MASimple@tv-basicstudies"]};return new window.TradingView.widget(e)}function ZSe(){return`tradingview-widget-container-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function eke({symbol:n=cbe,interval:e=ube,isCollapsed:r=!1,className:i=""}){const s=E.useRef(null),o=E.useRef(null),a=E.useRef(ZSe());return E.useEffect(()=>{if(r||!s.current)return;s.current&&(s.current.id=a.current);let l=!0;return QSe().then(()=>{if(!l||!s.current)return;const c={symbol:n,interval:e,containerId:a.current};o.current=JSe(c)}).catch(c=>{console.error("Failed to load TradingView widget:",c)}),()=>{l=!1,o.current&&(o.current=null)}},[n,e,r]),E.useEffect(()=>()=>{Zte()},[]),r?p.jsx("div",{className:`tradingview-widget-container ${i}`}):p.jsx("div",{className:`tradingview-widget-wrapper ${i}`,children:p.jsx("div",{ref:s,id:a.current,className:"tradingview-widget-container"})})}function tke({data:n,columns:e,maxItems:r,onItemClick:i,onItemDoubleClick:s,selectedIndex:o,onSelectionChange:a,emptyMessage:l="No items",className:c="",rowHeight:u=20,showHeader:h=!0,resizableColumns:d=!1}){const[f,m]=E.useState(null),[g,b]=E.useState(new Map),[y,v]=E.useState(null),[w,k]=E.useState("asc"),S=E.useRef(null),_=E.useRef(0),C=E.useRef(0),P=E.useMemo(()=>r&&r>0?n.slice(0,r):n,[n,r]),T=E.useMemo(()=>e.map(j=>{const F=g.get(j.key);return F?`${F}px`:j.width?typeof j.width=="number"?`${j.width}px`:j.width:"1fr"}).join(" "),[e,g]),O=E.useMemo(()=>{if(!y)return P;const j=e.find(F=>F.key===y);return!j||!j.sortable?P:[...P].sort((F,N)=>{const R=F[y],W=N[y];if(R===W)return 0;const Y=R<W?-1:R>W?1:0;return w==="asc"?Y:-Y})},[P,y,w,e]),D=j=>{j.sortable&&(y===j.key?k(w==="asc"?"desc":"asc"):(v(j.key),k("asc")))},I=(j,F,N)=>{j.preventDefault(),j.stopPropagation(),m(F),_.current=j.clientX,C.current=N};E.useEffect(()=>{if(!f)return;const j=N=>{const R=N.clientX-_.current,W=Math.max(50,C.current+R),Y=e.find(K=>K.key===f);Y&&(Y.maxWidth&&(W=Math.min(W,Y.maxWidth)),Y.minWidth&&(W=Math.max(W,Y.minWidth))),b(K=>{const H=new Map(K);return H.set(f,W),H})},F=()=>{m(null)};return document.addEventListener("mousemove",j),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",F)}},[f,e]);const U=j=>{const F=g.get(j.key);return F||(typeof j.width=="number"?j.width:150)},B=(j,F)=>{a==null||a(F),i==null||i(j,F)},z=(j,F)=>{s==null||s(j,F)};return p.jsxs("div",{className:`list-view-mac ${c}`,children:[h&&p.jsx("div",{ref:S,className:"list-view-mac-header",style:{gridTemplateColumns:T},children:e.map((j,F)=>{const N=y===j.key,R=U(j);return p.jsxs("div",{className:`list-view-mac-header-cell ${j.sortable?"sortable":""} ${j.align||"left"}`,style:{width:d?`${R}px`:void 0},onClick:()=>D(j),children:[p.jsx("span",{className:"list-view-mac-header-label",children:j.label}),N&&p.jsx("span",{className:"list-view-mac-sort-indicator",children:w==="asc"?"":""}),d&&F<e.length-1&&p.jsx("div",{className:"list-view-mac-resize-handle",onMouseDown:W=>I(W,j.key,R)})]},j.key)})}),p.jsx("div",{className:"list-view-mac-body",children:O.length===0?p.jsx("div",{className:"list-view-mac-empty",children:l}):O.map((j,F)=>{const N=o===F;return p.jsx("div",{className:`list-view-mac-row ${N?"selected":""}`,style:{gridTemplateColumns:T,height:`${u}px`},onClick:()=>B(j,F),onDoubleClick:()=>z(j,F),children:e.map(R=>{const W=U(R);return p.jsx("div",{className:`list-view-mac-cell ${R.align||"left"}`,style:{width:d?`${W}px`:void 0},children:R.render?R.render(j,F):String(j[R.key]??"")},R.key)})},F)})}),r&&n.length>r&&p.jsxs("div",{className:"list-view-mac-footer",children:["Showing ",r," of ",n.length," items"]})]})}function nke(n){var De;const[e,r]=E.useState("vertical"),[i,s]=E.useState(!0),[o,a]=E.useState(!1),[l,c]=E.useState("--"),[u,h]=E.useState(void 0),[d,f]=E.useState(!1),[m,g]=E.useState(10),[b,y]=E.useState(!1),[v,w]=E.useState(0),[k,S]=E.useState(0),[_,C]=E.useState("default"),P=E.useRef(null),T=E.useRef(null),O=E.useRef(!1),[D,I]=E.useState(!1),U=E.useRef(!1),B=E.useRef(Jd),z=E.useRef(su),j=E.useRef([]),F=B.current,N=z.current,R=E.useMemo(()=>Wg(_==="default"?Ug:_==="widthfit"?I1e:_==="rightTrade"?A1e:_==="testTrade"?R1e:N1e),[_]),[W,Y]=E.useState(()=>Wg(Ug));E.useEffect(()=>{Y(R),j.current=R,I(!1),U.current=!1},[R]);const[K,H]=E.useState(()=>localStorage.getItem("authToken")||""),{markets:Q,selectedMarketId:G,selectedMarketSymbol:X,setSelectedMarketId:de,loadingMarkets:ye,getError:se}=ya({baseURL:F,sessionToken:K,autoFetchMarkets:!0}),{client:ie,toggleEnabled:Pe}=Qc(),{mnemonic:ke,walletAddress:q,authToken:Ee,setMnemonic:Je}=Il();E.useEffect(()=>{ke||Je(s_)},[ke,Je]),E.useEffect(()=>{j.current=W},[W]),E.useEffect(()=>{Ee&&(H(Ee),localStorage.setItem("authToken",Ee))},[Ee]);const{setAuthToken:ct,setWalletAddress:$e}=Qc();E.useEffect(()=>{ct(K||void 0)},[K,ct]),E.useEffect(()=>{$e(q||void 0)},[q,$e]);const ut=E.useRef(!1);E.useEffect(()=>{K&&K.trim()!==""&&!ut.current&&localStorage.getItem("authToken")!==K&&localStorage.setItem("authToken",K),ut.current=!1},[K]),E.useEffect(()=>{const ae=Fe=>{Fe.key==="authToken"&&Fe.newValue&&(ut.current=!0,H(Fe.newValue))};window.addEventListener("storage",ae);const Xe=setInterval(()=>{const Fe=localStorage.getItem("authToken");H(te=>Fe&&Fe!==te?(ut.current=!0,Fe):te)},5e3);return()=>{window.removeEventListener("storage",ae),clearInterval(Xe)}},[]);const qe=E.useCallback(()=>{I(!0)},[]);E.useEffect(()=>{D&&!ye&&Q.length>0&&G&&!U.current&&(U.current=!0,setTimeout(()=>{Pe()},100))},[D,ye,Q.length,G,Pe]);const we=E.useMemo(()=>{var ae,Xe,Fe,te;return Q.length>0?((ae=Q.find(ee=>ee.active))==null?void 0:ae.market_id)??Q[0].market_id??((Fe=(Xe=Q.find(ee=>ee.active))==null?void 0:Xe.id)==null?void 0:Fe.toString())??((te=Q[0].id)==null?void 0:te.toString())??null:null},[Q]),ze=E.useCallback((ae,Xe)=>{if(i)return;const Fe=j.current,te=ae;if(Fe.length!==te.length){O.current=!0,j.current=te,Y(te);return}let ee=!1;for(let ne=0;ne<Fe.length;ne++){const Ze=Fe[ne],je=te[ne];if(Ze.x!==je.x||Ze.y!==je.y||Ze.w!==je.w||Ze.h!==je.h||Ze.i!==je.i){ee=!0;break}}ee&&(O.current=!0,j.current=te,Y(te))},[i]),Me=E.useCallback(()=>{r(ae=>ae==="horizontal"?"vertical":ae==="vertical"?null:"horizontal")},[]),Ie=E.useCallback(()=>{a(ae=>!ae)},[]);E.useEffect(()=>(o?document.body.classList.add("full-width-screen"):document.body.classList.remove("full-width-screen"),()=>{document.body.classList.remove("full-width-screen")}),[o]);const Ce=E.useCallback(()=>{s(ae=>!ae),i&&(O.current=!1)},[i]),xe=E.useCallback(()=>{P.current&&(O.current=!1,P.current.generateNewLayout())},[]),L=E.useCallback(async()=>{try{const Xe=`[
${W.slice().sort((Fe,te)=>{const ee=Fe,ne=te,Ze=parseInt(ee.i,10),je=parseInt(ne.i,10);return Ze-je}).map(Fe=>{const te=Fe;return`  [${te.x}, ${te.y}, ${te.w}, ${te.h}]`}).join(`,
`)},
]`;await navigator.clipboard.writeText(Xe),alert("Layout matrix copied to clipboard!")}catch(ae){console.error("Failed to copy layout matrix:",ae),alert("Failed to copy layout matrix to clipboard")}},[W]),re=E.useMemo(()=>W.map(function(ae){const Xe=ae;return p.jsxs("div",{className:"layoutItem",children:[p.jsx("b",{children:Xe.i}),": [",Xe.x,", ",Xe.y,", ",Xe.w,", ",Xe.h,"]"]},Xe.i)}),[W]),fe=G||"",le=30,ce=10,ge=12,J=E.useMemo(()=>{if(W.length===0)return{};const ae={};for(let Xe=0;Xe<=6;Xe++){const Fe=W.find(te=>te.i===Xe.toString());if(Fe){const te=Fe,ee=te.h*le+(te.h-1)*ce,ne=te.w/ge*100;ae[Xe]={width:`${ne}%`,height:`${ee}px`}}}return ae},[W]),he=E.useCallback(ae=>{T.current&&T.current.setPrice(ae)},[]),pe=E.useMemo(()=>{var ae,Xe,Fe,te,ee,ne;return[p.jsx(eke,{symbol:"BINANCE:BTCUSDT",interval:"5",isCollapsed:!1},"tv"),p.jsx(vxe,{baseURL:F,subscriptionClient:ie,marketId:fe,maxDepth:20,height:(ae=J[1])==null?void 0:ae.height,onPriceClick:he},`clobx-${fe}`),p.jsx(mxe,{baseURL:F,subscriptionClient:ie,marketId:fe},`price-${fe}`),p.jsx(fxe,{ref:T,baseURL:F,mnemonic:ke,marketId:fe,selectedBucketBalance:u,selectedBucketId:l,authToken:K,walletAddress:q,onLeverageClick:()=>{T.current&&g(T.current.leverage),f(!0)},onNumberCalculatorClick:()=>{if(T.current){const Ze=T.current.getSizeInput(),je=T.current.getAvailableTradeAmount();w(Ze),S(je),y(!0)}}},`trade-${fe}`),p.jsx(lxe,{baseURL:F,subscriptionClient:ie,authToken:K,walletAddress:q,mnemonic:ke,height:(Xe=J[4])==null?void 0:Xe.height,refreshInterval:5e3},`order-${fe}`),p.jsx(uxe,{baseURL:F,subscriptionClient:ie,authToken:K,walletAddress:q,mnemonic:ke,height:(Fe=J[5])==null?void 0:Fe.height,refreshInterval:5e3,selectedBucketId:l},`pos-${fe}`),p.jsx(ixe,{baseURL:F,subscriptionClient:ie,mnemonic:ke,authToken:K,walletAddress:q,height:(te=J[6])==null?void 0:te.height,refreshInterval:5e3,onBucketSelect:(Ze,je)=>{c(Ze),h(je)}},`bucket-${fe}`),p.jsx(oxe,{title:"Dummy Component",message:"This is a dummy component",height:(ee=J[7])==null?void 0:ee.height},`clobclassic-${fe}`),p.jsx(hxe,{baseURL:F,selectedMarketId:fe,height:(ne=J[8])==null?void 0:ne.height},`ticker-${fe}`)]},[F,N,K,q,fe,X,J,l,u,he]);if(ye)return p.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:p.jsx("div",{children:"Loading markets..."})});const _e=se("markets");return _e?p.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b"},children:p.jsxs("div",{children:["Error loading markets: ",_e]})}):Q.length===0||!G?p.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:p.jsx("div",{children:"No markets available."})}):p.jsxs("div",{className:"App-content-row",children:[p.jsxs("div",{className:"App-section",children:[p.jsx("h3",{style:{marginTop:"0",marginBottom:"0.75rem"},children:"Configuration"}),p.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[p.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Market:"}),p.jsx("select",{value:G||"",onChange:ae=>{const Xe=ae.target.value;Xe&&de(Xe)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:Q.length===0?p.jsx("option",{value:"",children:"Loading markets..."}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),Q.map(ae=>{var ee;const Xe=ae.market_id??((ee=ae.id)==null?void 0:ee.toString())??"",Fe=ae.moniker?ae.moniker:ae.symbol?ae.symbol:ae.baseAsset&&ae.quoteAsset?`${ae.baseAsset}-${ae.quoteAsset}`:`Market ID: ${Xe}`,te=ae.active?" [ACTIVE]":"";return p.jsxs("option",{value:Xe,children:[Fe," - ID: ",Xe,te]},Xe)})]})}),Q.length>0&&p.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:G===we?"#51cf66":"#ff9f43"},children:G===we?` Auto-selected default market (ID: ${we==null?void 0:we.substring(0,16)}...)`:` Manual selection (ID: ${G==null?void 0:G.substring(0,16)}...)`})]}),p.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Mnemonic (for wallet address):"}),p.jsx("input",{type:"text",value:ke||"",onChange:ae=>Je(ae.target.value),placeholder:"Enter mnemonic to generate wallet address",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:"white",color:"#333"}})]}),p.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Wallet Address:"}),p.jsx("input",{type:"text",value:q||"",disabled:!!(ke&&ke.trim()!==""),placeholder:"automatic (from mnemonic via useOnboard)",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",border:"1px solid #ccc",backgroundColor:q?"#e7f3ff":"#f5f5f5",color:"#333"}}),q&&p.jsx("small",{style:{display:"block",marginTop:"0.25rem",color:"#28a745"},children:" Auto-generated from mnemonic via useOnboard hook"})]}),p.jsxs("div",{style:{flex:"1",minWidth:"300px"},children:[p.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontWeight:"500"},children:"Layout Type:"}),p.jsxs("select",{value:_,onChange:ae=>{const Xe=ae.target.value;C(Xe)},style:{width:"100%",padding:"0.5rem",fontSize:"1rem",borderRadius:"4px",border:"1px solid #ccc",backgroundColor:"white",color:"#333"},children:[p.jsx("option",{value:"default",children:"Default Predefined Layouts"}),p.jsx("option",{value:"widthfit",children:"Width Fit"}),p.jsx("option",{value:"rightTrade",children:"Right Trade"}),p.jsx("option",{value:"testTrade",children:"Test Trade"}),p.jsx("option",{value:"triPanel",children:"Tri Panel"})]})]})]}),p.jsx("h3",{children:"Layout Controls"}),p.jsx("button",{onClick:xe,style:{marginRight:"0.5rem"},children:"Generate New Layout"}),p.jsx("button",{onClick:Ce,style:{marginRight:"0.5rem"},children:i?"Enable Dragging":"Disable Dragging"}),p.jsx("button",{onClick:Me,style:{marginRight:"0.5rem"},children:"Change Compaction Type"}),p.jsx("button",{onClick:Ie,children:"Full Width Screen"}),p.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9em",color:"#fff"},children:["Compaction type:"," ",e?e.charAt(0).toUpperCase()+e.slice(1):"No Compaction"]})]}),p.jsx(HI,{ref:P,onLayoutChange:ze,slotContent:pe,compactType:e,allStatic:i,onCompactTypeChange:Me,onToggleStatic:Ce,onNewLayout:xe,initialLayout:R,onMount:qe},_),p.jsxs("div",{className:"overview-layout layoutJSON",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[p.jsxs("span",{children:["Displayed as ",p.jsx("code",{children:"[x, y, w, h]"}),":"]}),p.jsx("button",{onClick:L,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"4px",border:"1px solid #313131",backgroundColor:"#ccc",color:"black",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ae=>{ae.currentTarget.style.color="white",ae.currentTarget.style.backgroundColor="#0056b3"},onMouseOut:ae=>{ae.currentTarget.style.color="black",ae.currentTarget.style.backgroundColor="#ccc"},children:"Copy"})]}),p.jsx("div",{className:"columns",children:re})]}),p.jsx(txe,{isOpen:d,currentLeverage:((De=T.current)==null?void 0:De.leverage)||10,tempLeverage:m,maxRatio:T.current?T.current.calculateMaxRatio(m):m.toFixed(2),onLeverageChange:g,onConfirm:async()=>{if(!l||l==="--"||l.trim()===""){ht.error("Bucket Required",{description:"Please select a bucket before changing leverage."});return}if(T.current){f(!1);try{await T.current.changeLeverage(m,{bucketId:l})}catch{T.current&&g(T.current.leverage)}}else f(!1)},onCancel:()=>{T.current&&g(T.current.leverage),f(!1)}}),p.jsx(zee,{isOpen:b,value:v,min:0,max:k,onConfirm:ae=>{T.current&&T.current.setSizeInput(ae),y(!1)},onCancel:()=>{y(!1)}})]})}function rke(){return p.jsx(n3,{defaultWsURL:su,children:p.jsx(nke,{})})}function ike({isConnected:n,label:e,className:r=""}){return p.jsx("span",{className:`hooks-test-status-badge ${n?"hooks-test-status-badge-connected":"hooks-test-status-badge-disconnected"} ${r}`,children:e||(n?"WS Connected":"WS Disconnected")})}function ske({isEnabled:n,isConnected:e,connectionState:r,retainedDataCount:i,onToggle:s}){return p.jsxs("div",{className:"App-section hooks-test-websocket-section",children:[p.jsxs("div",{className:"hooks-test-websocket-controls",children:[p.jsxs("button",{onClick:s,className:`hooks-test-websocket-button ${n?"hooks-test-websocket-button-enabled":"hooks-test-websocket-button-disabled"}`,children:[n?"Disable":"Enable"," Connect WebSocket"]}),p.jsxs("span",{className:`hooks-test-connection-status ${n?"hooks-test-connection-status-enabled":"hooks-test-connection-status-disabled"} ${e?"hooks-test-connection-status-connected":"hooks-test-connection-status-disconnected"}`,children:[e?" Connected":" Disconnected"," (",r,")"]})]}),n&&p.jsxs("div",{className:"hooks-test-websocket-info",children:["WebSocket is enabled. Hooks will receive real-time updates via multi-feed channel.",i>0&&p.jsxs("span",{className:"hooks-test-retained-data-info",children:["Retained data: ",i," sub-channels"]})]})]})}function qo({title:n,isConnected:e,statusBadges:r=[],actions:i=[],className:s=""}){return p.jsxs("div",{className:`hooks-test-section-header-flex ${s}`,children:[p.jsx("h2",{className:"hooks-test-section-header-title",children:n}),p.jsxs("div",{className:"hooks-test-status-group",children:[e!==void 0&&p.jsx(ike,{isConnected:e}),r.map((o,a)=>p.jsx("span",{children:o},a)),i.map((o,a)=>p.jsx("span",{children:o},a))]})]})}function oke({item:n,displayFields:e,originalIndex:r,rowWidth:i,color:s,onItemClick:o}){return p.jsxs("div",{className:"data-flow-row",onClick:()=>{o&&o(n)},style:{width:`${i}px`,background:s},children:[p.jsx("div",{className:"data-flow-row-header",children:n.timestamp?new Date(n.timestamp).toLocaleTimeString():`#${r+1}`}),p.jsx("div",{className:"data-flow-row-fields",children:e.map((a,l)=>p.jsxs("div",{className:"data-flow-field",children:[p.jsxs("span",{className:"data-flow-field-label",children:[a.label,":"]}),p.jsx("span",{className:"data-flow-field-value",children:a.value})]},l))}),p.jsx("div",{className:"data-flow-row-footer",children:"Click to view RAW data"})]})}function Oh({data:n,maxVisible:e=10,maxDataPoints:r=100,height:i=400,width:s=1080,rowWidth:o=280,onItemClick:a,getValue:l,color:c="#2196F3"}){const u=E.useRef(null),h=E.useRef(null),d=E.useRef(0),[f,m]=E.useState(!1),[g,b]=E.useState(0),y=20,v=800,w=E.useMemo(()=>!n||n.length===0?[]:n.length<=r?n:n.slice(-r),[n,r]),k=S=>{const _=[];if(S.timestamp!==void 0&&_.push({label:"Time",value:new Date(S.timestamp).toLocaleTimeString()}),S.market_id!==void 0&&_.push({label:"Market",value:String(S.market_id)}),S.symbol!==void 0&&_.push({label:"Symbol",value:String(S.symbol)}),S.open!==void 0){const C=Number(S.open);_.push({label:"Open",value:isNaN(C)?String(S.open):C.toFixed(4)})}if(S.close!==void 0){const C=Number(S.close);_.push({label:"Close",value:isNaN(C)?String(S.close):C.toFixed(4)})}if(S.high!==void 0){const C=Number(S.high);_.push({label:"High",value:isNaN(C)?String(S.high):C.toFixed(4)})}if(S.low!==void 0){const C=Number(S.low);_.push({label:"Low",value:isNaN(C)?String(S.low):C.toFixed(4)})}if(S.volume!==void 0){const C=Number(S.volume);_.push({label:"Volume",value:isNaN(C)?String(S.volume):C.toFixed(2)})}if(S.price!==void 0){const C=Number(S.price);_.push({label:"Price",value:isNaN(C)?String(S.price):C.toFixed(4)})}if(S.mark_price!==void 0){const C=Number(S.mark_price);_.push({label:"Mark Price",value:isNaN(C)?String(S.mark_price):C.toFixed(4)})}if(S.last_price!==void 0){const C=Number(S.last_price);_.push({label:"Last Price",value:isNaN(C)?String(S.last_price):C.toFixed(4)})}if(S.size!==void 0){const C=Number(S.size);_.push({label:"Size",value:isNaN(C)?String(S.size):C.toFixed(4)})}if(S.entryPrice!==void 0){const C=Number(S.entryPrice);_.push({label:"Entry",value:isNaN(C)?String(S.entryPrice):C.toFixed(4)})}if(S.unrealizedPnL!==void 0){const C=Number(S.unrealizedPnL);_.push({label:"PnL",value:isNaN(C)?String(S.unrealizedPnL):C.toFixed(4)})}if(S.orderId!==void 0&&_.push({label:"Order ID",value:String(S.orderId)}),S.status!==void 0&&_.push({label:"Status",value:String(S.status)}),S.bucketId!==void 0&&_.push({label:"Bucket ID",value:String(S.bucketId)}),S.maxLeverage!==void 0&&_.push({label:"Max Lev",value:String(S.maxLeverage)}),S.value!==void 0&&_.length===0){const C=Number(S.value);_.push({label:"Value",value:isNaN(C)?String(S.value):C.toFixed(4)})}return _.length===0&&_.push({label:"Data",value:"Click to view"}),_.slice(0,6)};return E.useEffect(()=>{if(!h.current||!u.current)return;const S=w.length;if(S===0){b(0),d.current=0;return}const P=u.current.offsetWidth-20*2,T=S*o+(S-1)*y;if(T>P){const D=T-P;b(-D)}else b(0);const O=w.length>d.current;d.current=w.length,O&&h.current&&requestAnimationFrame(()=>{h.current&&h.current.offsetWidth})},[w.length,o,y,s]),E.useEffect(()=>{h.current&&(h.current.style.transition=f?"none":`transform ${v}ms ease-out`,h.current.style.transform=`translateX(${g}px)`)},[g,f,v]),p.jsxs("div",{ref:u,className:"data-flow-container",style:{width:`${s}px`,height:`${i}px`},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[p.jsx("div",{ref:h,className:"data-flow-rows-wrapper",style:{gap:`${y}px`},children:w.map((S,_)=>{const C=k(S),P=_;return p.jsx(oke,{item:S,displayFields:C,originalIndex:P,rowWidth:o,color:c,onItemClick:a},`${P}-${S.timestamp||Date.now()}-${S.id||JSON.stringify(S)}`)})}),f&&p.jsx("div",{className:"data-flow-paused-indicator",children:"Paused"})]})}function ake({data:n,isOpen:e,onClose:r,title:i="Data Details"}){return E.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),E.useEffect(()=>{const s=o=>{o.key==="Escape"&&e&&r()};return e&&window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[e,r]),e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"data-modal-overlay",onClick:r}),p.jsxs("div",{className:"data-modal",onClick:s=>s.stopPropagation(),children:[p.jsx("h3",{className:"data-modal-title",children:i}),p.jsx("pre",{className:"data-modal-content",children:JSON.stringify(n,null,2)}),p.jsx("button",{className:"data-modal-close-button",onClick:r,children:"Close"})]})]}):null}function Px(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function lke(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function ene(n){let e,r,i;n.length!==2?(e=Px,r=(l,c)=>Px(n(l),c),i=(l,c)=>n(l)-c):(e=n===Px||n===lke?n:cke,r=n,i=n);function s(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<0?u=d+1:h=d}while(u<h)}return u}function o(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<=0?u=d+1:h=d}while(u<h)}return u}function a(l,c,u=0,h=l.length){const d=s(l,c,u,h-1);return d>u&&i(l[d-1],c)>-i(l[d],c)?d-1:d}return{left:s,center:a,right:o}}function cke(){return 0}function uke(n){return n===null?NaN:+n}const dke=ene(Px),hke=dke.right;ene(uke).center;class t6 extends Map{constructor(e,r=mke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(n6(this,e))}has(e){return super.has(n6(this,e))}set(e,r){return super.set(fke(this,e),r)}delete(e){return super.delete(pke(this,e))}}function n6({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function fke({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function pke({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function mke(n){return n!==null&&typeof n=="object"?n.valueOf():n}const gke=Math.sqrt(50),bke=Math.sqrt(10),yke=Math.sqrt(2);function Fw(n,e,r){const i=(e-n)/Math.max(0,r),s=Math.floor(Math.log10(i)),o=i/Math.pow(10,s),a=o>=gke?10:o>=bke?5:o>=yke?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/a,l=Math.round(n*u),c=Math.round(e*u),l/u<n&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*a,l=Math.round(n/u),c=Math.round(e/u),l*u<n&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Fw(n,e,r*2):[l,c,u]}function vke(n,e,r){if(e=+e,n=+n,r=+r,!(r>0))return[];if(n===e)return[n];const i=e<n,[s,o,a]=i?Fw(e,n,r):Fw(n,e,r);if(!(o>=s))return[];const l=o-s+1,c=new Array(l);if(i)if(a<0)for(let u=0;u<l;++u)c[u]=(o-u)/-a;else for(let u=0;u<l;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(s+u)/-a;else for(let u=0;u<l;++u)c[u]=(s+u)*a;return c}function QI(n,e,r){return e=+e,n=+n,r=+r,Fw(n,e,r)[2]}function xke(n,e,r){e=+e,n=+n,r=+r;const i=e<n,s=i?QI(e,n,r):QI(n,e,r);return(i?-1:1)*(s<0?1/-s:s)}function r6(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function i6(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function wke(n,e,r){n=+n,e=+e,r=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+r;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/r))|0,o=new Array(s);++i<s;)o[i]=n+i*r;return o}function _ke(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}function Ske(n){return n}var hC=1,fC=2,JI=3,bg=4,s6=1e-6;function kke(n){return"translate("+n+",0)"}function Cke(n){return"translate(0,"+n+")"}function Eke(n){return e=>+n(e)}function Tke(n,e){return e=Math.max(0,n.bandwidth()-e*2)/2,n.round()&&(e=Math.round(e)),r=>+n(r)+e}function Pke(){return!this.__axis}function tne(n,e){var r=[],i=null,s=null,o=6,a=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=n===hC||n===bg?-1:1,h=n===bg||n===fC?"x":"y",d=n===hC||n===JI?kke:Cke;function f(m){var g=i??(e.ticks?e.ticks.apply(e,r):e.domain()),b=s??(e.tickFormat?e.tickFormat.apply(e,r):Ske),y=Math.max(o,0)+l,v=e.range(),w=+v[0]+c,k=+v[v.length-1]+c,S=(e.bandwidth?Tke:Eke)(e.copy(),c),_=m.selection?m.selection():m,C=_.selectAll(".domain").data([null]),P=_.selectAll(".tick").data(g,e).order(),T=P.exit(),O=P.enter().append("g").attr("class","tick"),D=P.select("line"),I=P.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(O),D=D.merge(O.append("line").attr("stroke","currentColor").attr(h+"2",u*o)),I=I.merge(O.append("text").attr("fill","currentColor").attr(h,u*y).attr("dy",n===hC?"0em":n===JI?"0.71em":"0.32em")),m!==_&&(C=C.transition(m),P=P.transition(m),D=D.transition(m),I=I.transition(m),T=T.transition(m).attr("opacity",s6).attr("transform",function(U){return isFinite(U=S(U))?d(U+c):this.getAttribute("transform")}),O.attr("opacity",s6).attr("transform",function(U){var B=this.parentNode.__axis;return d((B&&isFinite(B=B(U))?B:S(U))+c)})),T.remove(),C.attr("d",n===bg||n===fC?a?"M"+u*a+","+w+"H"+c+"V"+k+"H"+u*a:"M"+c+","+w+"V"+k:a?"M"+w+","+u*a+"V"+c+"H"+k+"V"+u*a:"M"+w+","+c+"H"+k),P.attr("opacity",1).attr("transform",function(U){return d(S(U)+c)}),D.attr(h+"2",u*o),I.attr(h,u*y).text(b),_.filter(Pke).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===fC?"start":n===bg?"end":"middle"),_.each(function(){this.__axis=S})}return f.scale=function(m){return arguments.length?(e=m,f):e},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(m){return arguments.length?(r=m==null?[]:Array.from(m),f):r.slice()},f.tickValues=function(m){return arguments.length?(i=m==null?null:Array.from(m),f):i&&i.slice()},f.tickFormat=function(m){return arguments.length?(s=m,f):s},f.tickSize=function(m){return arguments.length?(o=a=+m,f):o},f.tickSizeInner=function(m){return arguments.length?(o=+m,f):o},f.tickSizeOuter=function(m){return arguments.length?(a=+m,f):a},f.tickPadding=function(m){return arguments.length?(l=+m,f):l},f.offset=function(m){return arguments.length?(c=+m,f):c},f}function o6(n){return tne(JI,n)}function Mke(n){return tne(bg,n)}var Dke={value:()=>{}};function Ub(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Mx(r)}function Mx(n){this._=n}function Oke(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Mx.prototype=Ub.prototype={constructor:Mx,on:function(n,e){var r=this._,i=Oke(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=Ike(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=a6(r[s],n.name,e);else if(e==null)for(s in r)r[s]=a6(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Mx(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function Ike(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function a6(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=Dke,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}var ZI="http://www.w3.org/1999/xhtml";const l6={svg:"http://www.w3.org/2000/svg",xhtml:ZI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function E_(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),l6.hasOwnProperty(e)?{space:l6[e],local:n}:n}function Ake(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===ZI&&e.documentElement.namespaceURI===ZI?e.createElement(n):e.createElementNS(r,n)}}function Rke(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function nne(n){var e=E_(n);return(e.local?Rke:Ake)(e)}function Nke(){}function k3(n){return n==null?Nke:function(){return this.querySelector(n)}}function jke(n){typeof n!="function"&&(n=k3(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),c,u,h=0;h<a;++h)(c=o[h])&&(u=n.call(c,c.__data__,h,o))&&("__data__"in c&&(u.__data__=c.__data__),l[h]=u);return new Ti(i,this._parents)}function rne(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Lke(){return[]}function ine(n){return n==null?Lke:function(){return this.querySelectorAll(n)}}function Fke(n){return function(){return rne(n.apply(this,arguments))}}function $ke(n){typeof n=="function"?n=Fke(n):n=ine(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),s.push(c));return new Ti(i,s)}function sne(n){return function(){return this.matches(n)}}function one(n){return function(e){return e.matches(n)}}var Bke=Array.prototype.find;function zke(n){return function(){return Bke.call(this.children,n)}}function Uke(){return this.firstElementChild}function Wke(n){return this.select(n==null?Uke:zke(typeof n=="function"?n:one(n)))}var qke=Array.prototype.filter;function Hke(){return Array.from(this.children)}function Vke(n){return function(){return qke.call(this.children,n)}}function Yke(n){return this.selectAll(n==null?Hke:Vke(typeof n=="function"?n:one(n)))}function Gke(n){typeof n!="function"&&(n=sne(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],c,u=0;u<a;++u)(c=o[u])&&n.call(c,c.__data__,u,o)&&l.push(c);return new Ti(i,this._parents)}function ane(n){return new Array(n.length)}function Kke(){return new Ti(this._enter||this._groups.map(ane),this._parents)}function $w(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}$w.prototype={constructor:$w,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Xke(n){return function(){return n}}function Qke(n,e,r,i,s,o){for(var a=0,l,c=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new $w(n,o[a]);for(;a<c;++a)(l=e[a])&&(s[a]=l)}function Jke(n,e,r,i,s,o,a){var l,c,u=new Map,h=e.length,d=o.length,f=new Array(h),m;for(l=0;l<h;++l)(c=e[l])&&(f[l]=m=a.call(c,c.__data__,l,e)+"",u.has(m)?s[l]=c:u.set(m,c));for(l=0;l<d;++l)m=a.call(n,o[l],l,o)+"",(c=u.get(m))?(i[l]=c,c.__data__=o[l],u.delete(m)):r[l]=new $w(n,o[l]);for(l=0;l<h;++l)(c=e[l])&&u.get(f[l])===c&&(s[l]=c)}function Zke(n){return n.__data__}function eCe(n,e){if(!arguments.length)return Array.from(this,Zke);var r=e?Jke:Qke,i=this._parents,s=this._groups;typeof n!="function"&&(n=Xke(n));for(var o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var h=i[u],d=s[u],f=d.length,m=tCe(n.call(h,h&&h.__data__,u,i)),g=m.length,b=l[u]=new Array(g),y=a[u]=new Array(g),v=c[u]=new Array(f);r(h,d,b,y,v,m,e);for(var w=0,k=0,S,_;w<g;++w)if(S=b[w]){for(w>=k&&(k=w+1);!(_=y[k])&&++k<g;);S._next=_||null}}return a=new Ti(a,i),a._enter=l,a._exit=c,a}function tCe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function nCe(){return new Ti(this._exit||this._groups.map(ane),this._parents)}function rCe(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function iCe(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),c=0;c<a;++c)for(var u=r[c],h=i[c],d=u.length,f=l[c]=new Array(d),m,g=0;g<d;++g)(m=u[g]||h[g])&&(f[g]=m);for(;c<s;++c)l[c]=r[c];return new Ti(l,this._parents)}function sCe(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function oCe(n){n||(n=aCe);function e(d,f){return d&&f?n(d.__data__,f.__data__):!d-!f}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h=0;h<l;++h)(u=a[h])&&(c[h]=u);c.sort(e)}return new Ti(s,this._parents).order()}function aCe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function lCe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function cCe(){return Array.from(this)}function uCe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function dCe(){let n=0;for(const e of this)++n;return n}function hCe(){return!this.node()}function fCe(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function pCe(n){return function(){this.removeAttribute(n)}}function mCe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function gCe(n,e){return function(){this.setAttribute(n,e)}}function bCe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function yCe(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function vCe(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function xCe(n,e){var r=E_(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?mCe:pCe:typeof e=="function"?r.local?vCe:yCe:r.local?bCe:gCe)(r,e))}function lne(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function wCe(n){return function(){this.style.removeProperty(n)}}function _Ce(n,e,r){return function(){this.style.setProperty(n,e,r)}}function SCe(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function kCe(n,e,r){return arguments.length>1?this.each((e==null?wCe:typeof e=="function"?SCe:_Ce)(n,e,r??"")):Pp(this.node(),n)}function Pp(n,e){return n.style.getPropertyValue(e)||lne(n).getComputedStyle(n,null).getPropertyValue(e)}function CCe(n){return function(){delete this[n]}}function ECe(n,e){return function(){this[n]=e}}function TCe(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function PCe(n,e){return arguments.length>1?this.each((e==null?CCe:typeof e=="function"?TCe:ECe)(n,e)):this.node()[n]}function cne(n){return n.trim().split(/^|\s+/)}function C3(n){return n.classList||new une(n)}function une(n){this._node=n,this._names=cne(n.getAttribute("class")||"")}une.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function dne(n,e){for(var r=C3(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function hne(n,e){for(var r=C3(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function MCe(n){return function(){dne(this,n)}}function DCe(n){return function(){hne(this,n)}}function OCe(n,e){return function(){(e.apply(this,arguments)?dne:hne)(this,n)}}function ICe(n,e){var r=cne(n+"");if(arguments.length<2){for(var i=C3(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?OCe:e?MCe:DCe)(r,e))}function ACe(){this.textContent=""}function RCe(n){return function(){this.textContent=n}}function NCe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function jCe(n){return arguments.length?this.each(n==null?ACe:(typeof n=="function"?NCe:RCe)(n)):this.node().textContent}function LCe(){this.innerHTML=""}function FCe(n){return function(){this.innerHTML=n}}function $Ce(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function BCe(n){return arguments.length?this.each(n==null?LCe:(typeof n=="function"?$Ce:FCe)(n)):this.node().innerHTML}function zCe(){this.nextSibling&&this.parentNode.appendChild(this)}function UCe(){return this.each(zCe)}function WCe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qCe(){return this.each(WCe)}function HCe(n){var e=typeof n=="function"?n:nne(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function VCe(){return null}function YCe(n,e){var r=typeof n=="function"?n:nne(n),i=e==null?VCe:typeof e=="function"?e:k3(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function GCe(){var n=this.parentNode;n&&n.removeChild(this)}function KCe(){return this.each(GCe)}function XCe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function QCe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function JCe(n){return this.select(n?QCe:XCe)}function ZCe(n){return arguments.length?this.property("__data__",n):this.node().__data__}function e2e(n){return function(e){n.call(this,e,this.__data__)}}function t2e(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function n2e(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function r2e(n,e,r){return function(){var i=this.__on,s,o=e2e(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function i2e(n,e,r){var i=t2e(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,h;c<u;++c)for(s=0,h=l[c];s<o;++s)if((a=i[s]).type===h.type&&a.name===h.name)return h.value}return}for(l=e?r2e:n2e,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function fne(n,e,r){var i=lne(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function s2e(n,e){return function(){return fne(this,n,e)}}function o2e(n,e){return function(){return fne(this,n,e.apply(this,arguments))}}function a2e(n,e){return this.each((typeof e=="function"?o2e:s2e)(n,e))}function*l2e(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var E3=[null];function Ti(n,e){this._groups=n,this._parents=e}function Wb(){return new Ti([[document.documentElement]],E3)}function c2e(){return this}Ti.prototype=Wb.prototype={constructor:Ti,select:jke,selectAll:$ke,selectChild:Wke,selectChildren:Yke,filter:Gke,data:eCe,enter:Kke,exit:nCe,join:rCe,merge:iCe,selection:c2e,order:sCe,sort:oCe,call:lCe,nodes:cCe,node:uCe,size:dCe,empty:hCe,each:fCe,attr:xCe,style:kCe,property:PCe,classed:ICe,text:jCe,html:BCe,raise:UCe,lower:qCe,append:HCe,insert:YCe,remove:KCe,clone:JCe,datum:ZCe,on:i2e,dispatch:a2e,[Symbol.iterator]:l2e};function li(n){return typeof n=="string"?new Ti([[document.querySelector(n)]],[document.documentElement]):new Ti([[n]],E3)}function u2e(n){let e;for(;e=n.sourceEvent;)n=e;return n}function vo(n,e){if(n=u2e(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}function d2e(n){return typeof n=="string"?new Ti([document.querySelectorAll(n)],[document.documentElement]):new Ti([rne(n)],E3)}const h2e={passive:!1},X0={capture:!0,passive:!1};function pC(n){n.stopImmediatePropagation()}function kf(n){n.preventDefault(),n.stopImmediatePropagation()}function pne(n){var e=n.document.documentElement,r=li(n).on("dragstart.drag",kf,X0);"onselectstart"in e?r.on("selectstart.drag",kf,X0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function mne(n,e){var r=n.document.documentElement,i=li(n).on("dragstart.drag",null);e&&(i.on("click.drag",kf,X0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Cv=n=>()=>n;function eA(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}eA.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function f2e(n){return!n.ctrlKey&&!n.button}function p2e(){return this.parentNode}function m2e(n,e){return e??{x:n.x,y:n.y}}function g2e(){return navigator.maxTouchPoints||"ontouchstart"in this}function b2e(){var n=f2e,e=p2e,r=m2e,i=g2e,s={},o=Ub("start","drag","end"),a=0,l,c,u,h,d=0;function f(S){S.on("mousedown.drag",m).filter(i).on("touchstart.drag",y).on("touchmove.drag",v,h2e).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(S,_){if(!(h||!n.call(this,S,_))){var C=k(this,e.call(this,S,_),S,_,"mouse");C&&(li(S.view).on("mousemove.drag",g,X0).on("mouseup.drag",b,X0),pne(S.view),pC(S),u=!1,l=S.clientX,c=S.clientY,C("start",S))}}function g(S){if(kf(S),!u){var _=S.clientX-l,C=S.clientY-c;u=_*_+C*C>d}s.mouse("drag",S)}function b(S){li(S.view).on("mousemove.drag mouseup.drag",null),mne(S.view,u),kf(S),s.mouse("end",S)}function y(S,_){if(n.call(this,S,_)){var C=S.changedTouches,P=e.call(this,S,_),T=C.length,O,D;for(O=0;O<T;++O)(D=k(this,P,S,_,C[O].identifier,C[O]))&&(pC(S),D("start",S,C[O]))}}function v(S){var _=S.changedTouches,C=_.length,P,T;for(P=0;P<C;++P)(T=s[_[P].identifier])&&(kf(S),T("drag",S,_[P]))}function w(S){var _=S.changedTouches,C=_.length,P,T;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),P=0;P<C;++P)(T=s[_[P].identifier])&&(pC(S),T("end",S,_[P]))}function k(S,_,C,P,T,O){var D=o.copy(),I=vo(O||C,_),U,B,z;if((z=r.call(S,new eA("beforestart",{sourceEvent:C,target:f,identifier:T,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:D}),P))!=null)return U=z.x-I[0]||0,B=z.y-I[1]||0,function j(F,N,R){var W=I,Y;switch(F){case"start":s[T]=j,Y=a++;break;case"end":delete s[T],--a;case"drag":I=vo(R||N,_),Y=a;break}D.call(F,S,new eA(F,{sourceEvent:N,subject:z,target:f,identifier:T,active:Y,x:I[0]+U,y:I[1]+B,dx:I[0]-W[0],dy:I[1]-W[1],dispatch:D}),P)}}return f.filter=function(S){return arguments.length?(n=typeof S=="function"?S:Cv(!!S),f):n},f.container=function(S){return arguments.length?(e=typeof S=="function"?S:Cv(S),f):e},f.subject=function(S){return arguments.length?(r=typeof S=="function"?S:Cv(S),f):r},f.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Cv(!!S),f):i},f.on=function(){var S=o.on.apply(o,arguments);return S===o?f:S},f.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,f):Math.sqrt(d)},f}function T3(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function gne(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function qb(){}var Q0=.7,Bw=1/Q0,Cf="\\s*([+-]?\\d+)\\s*",J0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y2e=/^#([0-9a-f]{3,8})$/,v2e=new RegExp(`^rgb\\(${Cf},${Cf},${Cf}\\)$`),x2e=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),w2e=new RegExp(`^rgba\\(${Cf},${Cf},${Cf},${J0}\\)$`),_2e=new RegExp(`^rgba\\(${fa},${fa},${fa},${J0}\\)$`),S2e=new RegExp(`^hsl\\(${J0},${fa},${fa}\\)$`),k2e=new RegExp(`^hsla\\(${J0},${fa},${fa},${J0}\\)$`),c6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T3(qb,Nd,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:u6,formatHex:u6,formatHex8:C2e,formatHsl:E2e,formatRgb:d6,toString:d6});function u6(){return this.rgb().formatHex()}function C2e(){return this.rgb().formatHex8()}function E2e(){return bne(this).formatHsl()}function d6(){return this.rgb().formatRgb()}function Nd(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=y2e.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?h6(e):r===3?new Ui(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Ev(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Ev(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v2e.exec(n))?new Ui(e[1],e[2],e[3],1):(e=x2e.exec(n))?new Ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=w2e.exec(n))?Ev(e[1],e[2],e[3],e[4]):(e=_2e.exec(n))?Ev(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=S2e.exec(n))?m6(e[1],e[2]/100,e[3]/100,1):(e=k2e.exec(n))?m6(e[1],e[2]/100,e[3]/100,e[4]):c6.hasOwnProperty(n)?h6(c6[n]):n==="transparent"?new Ui(NaN,NaN,NaN,0):null}function h6(n){return new Ui(n>>16&255,n>>8&255,n&255,1)}function Ev(n,e,r,i){return i<=0&&(n=e=r=NaN),new Ui(n,e,r,i)}function T2e(n){return n instanceof qb||(n=Nd(n)),n?(n=n.rgb(),new Ui(n.r,n.g,n.b,n.opacity)):new Ui}function tA(n,e,r,i){return arguments.length===1?T2e(n):new Ui(n,e,r,i??1)}function Ui(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}T3(Ui,tA,gne(qb,{brighter(n){return n=n==null?Bw:Math.pow(Bw,n),new Ui(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Q0:Math.pow(Q0,n),new Ui(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ui(bd(this.r),bd(this.g),bd(this.b),zw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f6,formatHex:f6,formatHex8:P2e,formatRgb:p6,toString:p6}));function f6(){return`#${Qu(this.r)}${Qu(this.g)}${Qu(this.b)}`}function P2e(){return`#${Qu(this.r)}${Qu(this.g)}${Qu(this.b)}${Qu((isNaN(this.opacity)?1:this.opacity)*255)}`}function p6(){const n=zw(this.opacity);return`${n===1?"rgb(":"rgba("}${bd(this.r)}, ${bd(this.g)}, ${bd(this.b)}${n===1?")":`, ${n})`}`}function zw(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function bd(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Qu(n){return n=bd(n),(n<16?"0":"")+n.toString(16)}function m6(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new _o(n,e,r,i)}function bne(n){if(n instanceof _o)return new _o(n.h,n.s,n.l,n.opacity);if(n instanceof qb||(n=Nd(n)),!n)return new _o;if(n instanceof _o)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,c=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?o+s:2-o-s,a*=60):l=c>0&&c<1?0:a,new _o(a,l,c,n.opacity)}function M2e(n,e,r,i){return arguments.length===1?bne(n):new _o(n,e,r,i??1)}function _o(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}T3(_o,M2e,gne(qb,{brighter(n){return n=n==null?Bw:Math.pow(Bw,n),new _o(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Q0:Math.pow(Q0,n),new _o(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new Ui(mC(n>=240?n-240:n+120,s,i),mC(n,s,i),mC(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new _o(g6(this.h),Tv(this.s),Tv(this.l),zw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=zw(this.opacity);return`${n===1?"hsl(":"hsla("}${g6(this.h)}, ${Tv(this.s)*100}%, ${Tv(this.l)*100}%${n===1?")":`, ${n})`}`}}));function g6(n){return n=(n||0)%360,n<0?n+360:n}function Tv(n){return Math.max(0,Math.min(1,n||0))}function mC(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const P3=n=>()=>n;function D2e(n,e){return function(r){return n+r*e}}function O2e(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function I2e(n){return(n=+n)==1?yne:function(e,r){return r-e?O2e(e,r,n):P3(isNaN(e)?r:e)}}function yne(n,e){var r=e-n;return r?D2e(n,r):P3(isNaN(n)?e:n)}const Uw=function n(e){var r=I2e(e);function i(s,o){var a=r((s=tA(s)).r,(o=tA(o)).r),l=r(s.g,o.g),c=r(s.b,o.b),u=yne(s.opacity,o.opacity);return function(h){return s.r=a(h),s.g=l(h),s.b=c(h),s.opacity=u(h),s+""}}return i.gamma=n,i}(1);function A2e(n,e){e||(e=[]);var r=n?Math.min(e.length,n.length):0,i=e.slice(),s;return function(o){for(s=0;s<r;++s)i[s]=n[s]*(1-o)+e[s]*o;return i}}function R2e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function N2e(n,e){var r=e?e.length:0,i=n?Math.min(r,n.length):0,s=new Array(i),o=new Array(r),a;for(a=0;a<i;++a)s[a]=M3(n[a],e[a]);for(;a<r;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=s[a](l);return o}}function j2e(n,e){var r=new Date;return n=+n,e=+e,function(i){return r.setTime(n*(1-i)+e*i),r}}function wo(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}function L2e(n,e){var r={},i={},s;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in n?r[s]=M3(n[s],e[s]):i[s]=e[s];return function(o){for(s in r)i[s]=r[s](o);return i}}var nA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gC=new RegExp(nA.source,"g");function F2e(n){return function(){return n}}function $2e(n){return function(e){return n(e)+""}}function vne(n,e){var r=nA.lastIndex=gC.lastIndex=0,i,s,o,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=nA.exec(n))&&(s=gC.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:wo(i,s)})),r=gC.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?c[0]?$2e(c[0].x):F2e(e):(e=c.length,function(u){for(var h=0,d;h<e;++h)l[(d=c[h]).i]=d.x(u);return l.join("")})}function M3(n,e){var r=typeof e,i;return e==null||r==="boolean"?P3(e):(r==="number"?wo:r==="string"?(i=Nd(e))?(e=i,Uw):vne:e instanceof Nd?Uw:e instanceof Date?j2e:R2e(e)?A2e:Array.isArray(e)?N2e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?L2e:wo)(n,e)}function B2e(n,e){return n=+n,e=+e,function(r){return Math.round(n*(1-r)+e*r)}}var b6=180/Math.PI,rA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xne(n,e,r,i,s,o){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*b6,skewX:Math.atan(c)*b6,scaleX:a,scaleY:l}}var Pv;function z2e(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?rA:xne(e.a,e.b,e.c,e.d,e.e,e.f)}function U2e(n){return n==null||(Pv||(Pv=document.createElementNS("http://www.w3.org/2000/svg","g")),Pv.setAttribute("transform",n),!(n=Pv.transform.baseVal.consolidate()))?rA:(n=n.matrix,xne(n.a,n.b,n.c,n.d,n.e,n.f))}function wne(n,e,r,i){function s(u){return u.length?u.pop()+" ":""}function o(u,h,d,f,m,g){if(u!==d||h!==f){var b=m.push("translate(",null,e,null,r);g.push({i:b-4,x:wo(u,d)},{i:b-2,x:wo(h,f)})}else(d||f)&&m.push("translate("+d+e+f+r)}function a(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(s(d)+"rotate(",null,i)-2,x:wo(u,h)})):h&&d.push(s(d)+"rotate("+h+i)}function l(u,h,d,f){u!==h?f.push({i:d.push(s(d)+"skewX(",null,i)-2,x:wo(u,h)}):h&&d.push(s(d)+"skewX("+h+i)}function c(u,h,d,f,m,g){if(u!==d||h!==f){var b=m.push(s(m)+"scale(",null,",",null,")");g.push({i:b-4,x:wo(u,d)},{i:b-2,x:wo(h,f)})}else(d!==1||f!==1)&&m.push(s(m)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=n(u),h=n(h),o(u.translateX,u.translateY,h.translateX,h.translateY,d,f),a(u.rotate,h.rotate,d,f),l(u.skewX,h.skewX,d,f),c(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(m){for(var g=-1,b=f.length,y;++g<b;)d[(y=f[g]).i]=y.x(m);return d.join("")}}}var W2e=wne(z2e,"px, ","px)","deg)"),q2e=wne(U2e,", ",")",")"),H2e=1e-12;function y6(n){return((n=Math.exp(n))+1/n)/2}function V2e(n){return((n=Math.exp(n))-1/n)/2}function Y2e(n){return((n=Math.exp(2*n))-1)/(n+1)}const G2e=function n(e,r,i){function s(o,a){var l=o[0],c=o[1],u=o[2],h=a[0],d=a[1],f=a[2],m=h-l,g=d-c,b=m*m+g*g,y,v;if(b<H2e)v=Math.log(f/u)/e,y=function(P){return[l+P*m,c+P*g,u*Math.exp(e*P*v)]};else{var w=Math.sqrt(b),k=(f*f-u*u+i*b)/(2*u*r*w),S=(f*f-u*u-i*b)/(2*f*r*w),_=Math.log(Math.sqrt(k*k+1)-k),C=Math.log(Math.sqrt(S*S+1)-S);v=(C-_)/e,y=function(P){var T=P*v,O=y6(_),D=u/(r*w)*(O*Y2e(e*T+_)-V2e(_));return[l+D*m,c+D*g,u*O/y6(e*T+_)]}}return y.duration=v*1e3*e/Math.SQRT2,y}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,c=l*l;return n(a,l,c)},s}(Math.SQRT2,2,4);var Mp=0,yg=0,Wm=0,_ne=1e3,Ww,vg,qw=0,jd=0,T_=0,Z0=typeof performance=="object"&&performance.now?performance:Date,Sne=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function D3(){return jd||(Sne(K2e),jd=Z0.now()+T_)}function K2e(){jd=0}function Hw(){this._call=this._time=this._next=null}Hw.prototype=O3.prototype={constructor:Hw,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?D3():+r)+(e==null?0:+e),!this._next&&vg!==this&&(vg?vg._next=this:Ww=this,vg=this),this._call=n,this._time=r,iA()},stop:function(){this._call&&(this._call=null,this._time=1/0,iA())}};function O3(n,e,r){var i=new Hw;return i.restart(n,e,r),i}function X2e(){D3(),++Mp;for(var n=Ww,e;n;)(e=jd-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Mp}function v6(){jd=(qw=Z0.now())+T_,Mp=yg=0;try{X2e()}finally{Mp=0,J2e(),jd=0}}function Q2e(){var n=Z0.now(),e=n-qw;e>_ne&&(T_-=e,qw=n)}function J2e(){for(var n,e=Ww,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Ww=r);vg=n,iA(i)}function iA(n){if(!Mp){yg&&(yg=clearTimeout(yg));var e=n-jd;e>24?(n<1/0&&(yg=setTimeout(v6,n-Z0.now()-T_)),Wm&&(Wm=clearInterval(Wm))):(Wm||(qw=Z0.now(),Wm=setInterval(Q2e,_ne)),Mp=1,Sne(v6))}}function x6(n,e,r){var i=new Hw;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var Z2e=Ub("start","end","cancel","interrupt"),eEe=[],kne=0,w6=1,sA=2,Dx=3,_6=4,oA=5,Ox=6;function P_(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;tEe(n,r,{name:e,index:i,group:s,on:Z2e,tween:eEe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:kne})}function I3(n,e){var r=Io(n,e);if(r.state>kne)throw new Error("too late; already scheduled");return r}function wa(n,e){var r=Io(n,e);if(r.state>Dx)throw new Error("too late; already running");return r}function Io(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function tEe(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=O3(o,0,r.time);function o(u){r.state=w6,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var h,d,f,m;if(r.state!==w6)return c();for(h in i)if(m=i[h],m.name===r.name){if(m.state===Dx)return x6(a);m.state===_6?(m.state=Ox,m.timer.stop(),m.on.call("interrupt",n,n.__data__,m.index,m.group),delete i[h]):+h<e&&(m.state=Ox,m.timer.stop(),m.on.call("cancel",n,n.__data__,m.index,m.group),delete i[h])}if(x6(function(){r.state===Dx&&(r.state=_6,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=sA,r.on.call("start",n,n.__data__,r.index,r.group),r.state===sA){for(r.state=Dx,s=new Array(f=r.tween.length),h=0,d=-1;h<f;++h)(m=r.tween[h].value.call(n,n.__data__,r.index,r.group))&&(s[++d]=m);s.length=d+1}}function l(u){for(var h=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=oA,1),d=-1,f=s.length;++d<f;)s[d].call(n,h);r.state===oA&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=Ox,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function Ix(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>sA&&i.state<oA,i.state=Ox,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function nEe(n){return this.each(function(){Ix(this,n)})}function rEe(n,e){var r,i;return function(){var s=wa(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function iEe(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=wa(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},c=0,u=s.length;c<u;++c)if(s[c].name===e){s[c]=l;break}c===u&&s.push(l)}o.tween=s}}function sEe(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Io(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?rEe:iEe)(r,n,e))}function A3(n,e,r){var i=n._id;return n.each(function(){var s=wa(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Io(s,i).value[e]}}function Cne(n,e){var r;return(typeof e=="number"?wo:e instanceof Nd?Uw:(r=Nd(e))?(e=r,Uw):vne)(n,e)}function oEe(n){return function(){this.removeAttribute(n)}}function aEe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function lEe(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function cEe(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function uEe(n,e,r){var i,s,o;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l)))}}function dEe(n,e,r){var i,s,o;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l)))}}function hEe(n,e){var r=E_(n),i=r==="transform"?q2e:Cne;return this.attrTween(n,typeof e=="function"?(r.local?dEe:uEe)(r,i,A3(this,"attr."+n,e)):e==null?(r.local?aEe:oEe)(r):(r.local?cEe:lEe)(r,i,e))}function fEe(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function pEe(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function mEe(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&pEe(n,o)),r}return s._value=e,s}function gEe(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&fEe(n,o)),r}return s._value=e,s}function bEe(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=E_(n);return this.tween(r,(i.local?mEe:gEe)(i,e))}function yEe(n,e){return function(){I3(this,n).delay=+e.apply(this,arguments)}}function vEe(n,e){return e=+e,function(){I3(this,n).delay=e}}function xEe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?yEe:vEe)(e,n)):Io(this.node(),e).delay}function wEe(n,e){return function(){wa(this,n).duration=+e.apply(this,arguments)}}function _Ee(n,e){return e=+e,function(){wa(this,n).duration=e}}function SEe(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?wEe:_Ee)(e,n)):Io(this.node(),e).duration}function kEe(n,e){if(typeof e!="function")throw new Error;return function(){wa(this,n).ease=e}}function CEe(n){var e=this._id;return arguments.length?this.each(kEe(e,n)):Io(this.node(),e).ease}function EEe(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;wa(this,n).ease=r}}function TEe(n){if(typeof n!="function")throw new Error;return this.each(EEe(this._id,n))}function PEe(n){typeof n!="function"&&(n=sne(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],c,u=0;u<a;++u)(c=o[u])&&n.call(c,c.__data__,u,o)&&l.push(c);return new Tl(i,this._parents,this._name,this._id)}function MEe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var c=e[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,m=0;m<h;++m)(f=c[m]||u[m])&&(d[m]=f);for(;l<i;++l)a[l]=e[l];return new Tl(a,this._parents,this._name,this._id)}function DEe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function OEe(n,e,r){var i,s,o=DEe(e)?I3:wa;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function IEe(n,e){var r=this._id;return arguments.length<2?Io(this.node(),r).on.on(n):this.each(OEe(r,n,e))}function AEe(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function REe(){return this.on("end.remove",AEe(this._id))}function NEe(n){var e=this._name,r=this._id;typeof n!="function"&&(n=k3(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],c=l.length,u=o[a]=new Array(c),h,d,f=0;f<c;++f)(h=l[f])&&(d=n.call(h,h.__data__,f,l))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,P_(u[f],e,r,f,u,Io(h,r)));return new Tl(o,this._parents,e,r)}function jEe(n){var e=this._name,r=this._id;typeof n!="function"&&(n=ine(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var c=i[l],u=c.length,h,d=0;d<u;++d)if(h=c[d]){for(var f=n.call(h,h.__data__,d,c),m,g=Io(h,r),b=0,y=f.length;b<y;++b)(m=f[b])&&P_(m,e,r,b,f,g);o.push(f),a.push(h)}return new Tl(o,a,e,r)}var LEe=Wb.prototype.constructor;function FEe(){return new LEe(this._groups,this._parents)}function $Ee(n,e){var r,i,s;return function(){var o=Pp(this,n),a=(this.style.removeProperty(n),Pp(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function Ene(n){return function(){this.style.removeProperty(n)}}function BEe(n,e,r){var i,s=r+"",o;return function(){var a=Pp(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function zEe(n,e,r){var i,s,o;return function(){var a=Pp(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),Pp(this,n))),a===c?null:a===i&&c===s?o:(s=c,o=e(i=a,l))}}function UEe(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var c=wa(this,n),u=c.on,h=c.value[o]==null?l||(l=Ene(e)):void 0;(u!==r||s!==h)&&(i=(r=u).copy()).on(a,s=h),c.on=i}}function WEe(n,e,r){var i=(n+="")=="transform"?W2e:Cne;return e==null?this.styleTween(n,$Ee(n,i)).on("end.style."+n,Ene(n)):typeof e=="function"?this.styleTween(n,zEe(n,i,A3(this,"style."+n,e))).each(UEe(this._id,n)):this.styleTween(n,BEe(n,i,e),r).on("end.style."+n,null)}function qEe(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function HEe(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&qEe(n,a,r)),i}return o._value=e,o}function VEe(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,HEe(n,e,r??""))}function YEe(n){return function(){this.textContent=n}}function GEe(n){return function(){var e=n(this);this.textContent=e??""}}function KEe(n){return this.tween("text",typeof n=="function"?GEe(A3(this,"text",n)):YEe(n==null?"":n+""))}function XEe(n){return function(e){this.textContent=n.call(this,e)}}function QEe(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&XEe(s)),e}return i._value=n,i}function JEe(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,QEe(n))}function ZEe(){for(var n=this._name,e=this._id,r=Tne(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var h=Io(c,e);P_(c,n,r,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Tl(i,this._parents,n,r)}function eTe(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},c={value:function(){--s===0&&o()}};r.each(function(){var u=wa(this,i),h=u.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),s===0&&o()})}var tTe=0;function Tl(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function Tne(){return++tTe}var Na=Wb.prototype;Tl.prototype={constructor:Tl,select:NEe,selectAll:jEe,selectChild:Na.selectChild,selectChildren:Na.selectChildren,filter:PEe,merge:MEe,selection:FEe,transition:ZEe,call:Na.call,nodes:Na.nodes,node:Na.node,size:Na.size,empty:Na.empty,each:Na.each,on:IEe,attr:hEe,attrTween:bEe,style:WEe,styleTween:VEe,text:KEe,textTween:JEe,remove:REe,tween:sEe,delay:xEe,duration:SEe,ease:CEe,easeVarying:TEe,end:eTe,[Symbol.iterator]:Na[Symbol.iterator]};function nTe(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var rTe={time:null,delay:0,duration:250,ease:nTe};function iTe(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function sTe(n){var e,r;n instanceof Tl?(e=n._id,n=n._name):(e=Tne(),(r=rTe).time=D3(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,c,u=0;u<l;++u)(c=a[u])&&P_(c,n,e,u,a,r||iTe(c,e));return new Tl(i,this._parents,n,e)}Wb.prototype.interrupt=nEe;Wb.prototype.transition=sTe;function oTe(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Pne(this.cover(e,r),e,r,n)}function Pne(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,h=n._y1,d,f,m,g,b,y,v,w;if(!o)return n._root=a,n;for(;o.length;)if((b=e>=(d=(l+u)/2))?l=d:u=d,(y=r>=(f=(c+h)/2))?c=f:h=f,s=o,!(o=o[v=y<<1|b]))return s[v]=a,n;if(m=+n._x.call(null,o.data),g=+n._y.call(null,o.data),e===m&&r===g)return a.next=o,s?s[v]=a:n._root=a,n;do s=s?s[v]=new Array(4):n._root=new Array(4),(b=e>=(d=(l+u)/2))?l=d:u=d,(y=r>=(f=(c+h)/2))?c=f:h=f;while((v=y<<1|b)===(w=(g>=f)<<1|m>=d));return s[w]=o,s[v]=a,n}function aTe(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),c=1/0,u=1/0,h=-1/0,d=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<c&&(c=s),s>h&&(h=s),o<u&&(u=o),o>d&&(d=o));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),r=0;r<i;++r)Pne(this,a[r],l[r],n[r]);return this}function lTe(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,c,u;r>n||n>=s||i>e||e>=o;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function cTe(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function uTe(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xi(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function dTe(n,e,r){var i,s=this._x0,o=this._y0,a,l,c,u,h=this._x1,d=this._y1,f=[],m=this._root,g,b;for(m&&f.push(new xi(m,s,o,h,d)),r==null?r=1/0:(s=n-r,o=e-r,h=n+r,d=e+r,r*=r);g=f.pop();)if(!(!(m=g.node)||(a=g.x0)>h||(l=g.y0)>d||(c=g.x1)<s||(u=g.y1)<o))if(m.length){var y=(a+c)/2,v=(l+u)/2;f.push(new xi(m[3],y,v,c,u),new xi(m[2],a,v,y,u),new xi(m[1],y,l,c,v),new xi(m[0],a,l,y,v)),(b=(e>=v)<<1|n>=y)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-b],f[f.length-1-b]=g)}else{var w=n-+this._x.call(null,m.data),k=e-+this._y.call(null,m.data),S=w*w+k*k;if(S<r){var _=Math.sqrt(r=S);s=n-_,o=e-_,h=n+_,d=e+_,i=m.data}}return i}function hTe(n){if(isNaN(h=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,c=this._x1,u=this._y1,h,d,f,m,g,b,y,v;if(!r)return this;if(r.length)for(;;){if((g=h>=(f=(a+c)/2))?a=f:c=f,(b=d>=(m=(l+u)/2))?l=m:u=m,e=r,!(r=r[y=b<<1|g]))return this;if(!r.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(i=e,v=y)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[y]=o:delete e[y],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[v]=r:this._root=r),this):(this._root=o,this)}function fTe(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function pTe(){return this._root}function mTe(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function gTe(n){var e=[],r,i=this._root,s,o,a,l,c;for(i&&e.push(new xi(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(o+l)/2,h=(a+c)/2;(s=i[3])&&e.push(new xi(s,u,h,l,c)),(s=i[2])&&e.push(new xi(s,o,h,u,c)),(s=i[1])&&e.push(new xi(s,u,a,l,h)),(s=i[0])&&e.push(new xi(s,o,a,u,h))}return this}function bTe(n){var e=[],r=[],i;for(this._root&&e.push(new xi(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,c=i.x1,u=i.y1,h=(a+c)/2,d=(l+u)/2;(o=s[0])&&e.push(new xi(o,a,l,h,d)),(o=s[1])&&e.push(new xi(o,h,l,c,d)),(o=s[2])&&e.push(new xi(o,a,d,h,u)),(o=s[3])&&e.push(new xi(o,h,d,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function yTe(n){return n[0]}function vTe(n){return arguments.length?(this._x=n,this):this._x}function xTe(n){return n[1]}function wTe(n){return arguments.length?(this._y=n,this):this._y}function Mne(n,e,r){var i=new R3(e??yTe,r??xTe,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function R3(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function S6(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Oi=Mne.prototype=R3.prototype;Oi.copy=function(){var n=new R3(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=S6(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=S6(i));return n};Oi.add=oTe;Oi.addAll=aTe;Oi.cover=lTe;Oi.data=cTe;Oi.extent=uTe;Oi.find=dTe;Oi.remove=hTe;Oi.removeAll=fTe;Oi.root=pTe;Oi.size=mTe;Oi.visit=gTe;Oi.visitAfter=bTe;Oi.x=vTe;Oi.y=wTe;function _Te(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Vw(n,e){if((r=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var r,i=n.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+n.slice(r+1)]}function Dp(n){return n=Vw(Math.abs(n)),n?n[1]:NaN}function STe(n,e){return function(r,i){for(var s=r.length,o=[],a=0,l=n[0],c=0;s>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),o.push(r.substring(s-=l,s+l)),!((c+=l+1)>i));)l=n[a=(a+1)%n.length];return o.reverse().join(e)}}function kTe(n){return function(e){return e.replace(/[0-9]/g,function(r){return n[+r]})}}var CTe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yw(n){if(!(e=CTe.exec(n)))throw new Error("invalid format: "+n);var e;return new N3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yw.prototype=N3.prototype;function N3(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}N3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ETe(n){e:for(var e=n.length,r=1,i=-1,s;r<e;++r)switch(n[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;default:if(!+n[r])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(s+1):n}var Dne;function TTe(n,e){var r=Vw(n,e);if(!r)return n+"";var i=r[0],s=r[1],o=s-(Dne=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Vw(n,Math.max(0,e+o-1))[0]}function k6(n,e){var r=Vw(n,e);if(!r)return n+"";var i=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const C6={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:_Te,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>k6(n*100,e),r:k6,s:TTe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function E6(n){return n}var T6=Array.prototype.map,P6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function PTe(n){var e=n.grouping===void 0||n.thousands===void 0?E6:STe(T6.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",s=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?E6:kTe(T6.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(d){d=Yw(d);var f=d.fill,m=d.align,g=d.sign,b=d.symbol,y=d.zero,v=d.width,w=d.comma,k=d.precision,S=d.trim,_=d.type;_==="n"?(w=!0,_="g"):C6[_]||(k===void 0&&(k=12),S=!0,_="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var C=b==="$"?r:b==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",P=b==="$"?i:/[%p]/.test(_)?a:"",T=C6[_],O=/[defgprs%]/.test(_);k=k===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(I){var U=C,B=P,z,j,F;if(_==="c")B=T(I)+B,I="";else{I=+I;var N=I<0||1/I<0;if(I=isNaN(I)?c:T(Math.abs(I),k),S&&(I=ETe(I)),N&&+I==0&&g!=="+"&&(N=!1),U=(N?g==="("?g:l:g==="-"||g==="("?"":g)+U,B=(_==="s"?P6[8+Dne/3]:"")+B+(N&&g==="("?")":""),O){for(z=-1,j=I.length;++z<j;)if(F=I.charCodeAt(z),48>F||F>57){B=(F===46?s+I.slice(z+1):I.slice(z))+B,I=I.slice(0,z);break}}}w&&!y&&(I=e(I,1/0));var R=U.length+I.length+B.length,W=R<v?new Array(v-R+1).join(f):"";switch(w&&y&&(I=e(W+I,W.length?v-B.length:1/0),W=""),m){case"<":I=U+I+B+W;break;case"=":I=U+W+I+B;break;case"^":I=W.slice(0,R=W.length>>1)+U+I+B+W.slice(R);break;default:I=W+U+I+B;break}return o(I)}return D.toString=function(){return d+""},D}function h(d,f){var m=u((d=Yw(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Dp(f)/3)))*3,b=Math.pow(10,-g),y=P6[8+g/3];return function(v){return m(b*v)+y}}return{format:u,formatPrefix:h}}var Mv,One,Ine;MTe({thousands:",",grouping:[3],currency:["$",""]});function MTe(n){return Mv=PTe(n),One=Mv.format,Ine=Mv.formatPrefix,Mv}function DTe(n){return Math.max(0,-Dp(Math.abs(n)))}function OTe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dp(e)/3)))*3-Dp(Math.abs(n)))}function ITe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Dp(e)-Dp(n))+1}function j3(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const M6=Symbol("implicit");function L3(){var n=new t6,e=[],r=[],i=M6;function s(o){let a=n.get(o);if(a===void 0){if(i!==M6)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new t6;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return L3(e,r).unknown(i)},j3.apply(s,arguments),s}function Ane(){var n=L3().unknown(void 0),e=n.domain,r=n.range,i=0,s=1,o,a,l=!1,c=0,u=0,h=.5;delete n.unknown;function d(){var f=e().length,m=s<i,g=m?s:i,b=m?i:s;o=(b-g)/Math.max(1,f-c+u*2),l&&(o=Math.floor(o)),g+=(b-g-o*(f-c))*h,a=o*(1-c),l&&(g=Math.round(g),a=Math.round(a));var y=wke(f).map(function(v){return g+o*v});return r(m?y.reverse():y)}return n.domain=function(f){return arguments.length?(e(f),d()):e()},n.range=function(f){return arguments.length?([i,s]=f,i=+i,s=+s,d()):[i,s]},n.rangeRound=function(f){return[i,s]=f,i=+i,s=+s,l=!0,d()},n.bandwidth=function(){return a},n.step=function(){return o},n.round=function(f){return arguments.length?(l=!!f,d()):l},n.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),d()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},n.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},n.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},n.copy=function(){return Ane(e(),[i,s]).round(l).paddingInner(c).paddingOuter(u).align(h)},j3.apply(d(),arguments)}function ATe(n){return function(){return n}}function RTe(n){return+n}var D6=[0,1];function cf(n){return n}function aA(n,e){return(e-=n=+n)?function(r){return(r-n)/e}:ATe(isNaN(e)?NaN:.5)}function NTe(n,e){var r;return n>e&&(r=n,n=e,e=r),function(i){return Math.max(n,Math.min(e,i))}}function jTe(n,e,r){var i=n[0],s=n[1],o=e[0],a=e[1];return s<i?(i=aA(s,i),o=r(a,o)):(i=aA(i,s),o=r(o,a)),function(l){return o(i(l))}}function LTe(n,e,r){var i=Math.min(n.length,e.length)-1,s=new Array(i),o=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=aA(n[a],n[a+1]),o[a]=r(e[a],e[a+1]);return function(l){var c=hke(n,l,1,i)-1;return o[c](s[c](l))}}function FTe(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function $Te(){var n=D6,e=D6,r=M3,i,s,o,a=cf,l,c,u;function h(){var f=Math.min(n.length,e.length);return a!==cf&&(a=NTe(n[0],n[f-1])),l=f>2?LTe:jTe,c=u=null,d}function d(f){return f==null||isNaN(f=+f)?o:(c||(c=l(n.map(i),e,r)))(i(a(f)))}return d.invert=function(f){return a(s((u||(u=l(e,n.map(i),wo)))(f)))},d.domain=function(f){return arguments.length?(n=Array.from(f,RTe),h()):n.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),r=B2e,h()},d.clamp=function(f){return arguments.length?(a=f?!0:cf,h()):a!==cf},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,m){return i=f,s=m,h()}}function BTe(){return $Te()(cf,cf)}function zTe(n,e,r,i){var s=xke(n,e,r),o;switch(i=Yw(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(o=OTe(s,a))&&(i.precision=o),Ine(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=ITe(s,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=DTe(s))&&(i.precision=o-(i.type==="%")*2);break}}return One(i)}function UTe(n){var e=n.domain;return n.ticks=function(r){var i=e();return vke(i[0],i[i.length-1],r??10)},n.tickFormat=function(r,i){var s=e();return zTe(s[0],s[s.length-1],r??10,i)},n.nice=function(r){r==null&&(r=10);var i=e(),s=0,o=i.length-1,a=i[s],l=i[o],c,u,h=10;for(l<a&&(u=a,a=l,l=u,u=s,s=o,o=u);h-- >0;){if(u=QI(a,l,r),u===c)return i[s]=a,i[o]=l,e(i);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return n},n}function Rne(){var n=BTe();return n.copy=function(){return FTe(n,Rne())},j3.apply(n,arguments),UTe(n)}function WTe(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const qTe=WTe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Dv=n=>()=>n;function HTe(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function cl(n,e,r){this.k=n,this.x=e,this.y=r}cl.prototype={constructor:cl,scale:function(n){return n===1?this:new cl(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new cl(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var F3=new cl(1,0,0);Go.prototype=cl.prototype;function Go(n){for(;!n.__zoom;)if(!(n=n.parentNode))return F3;return n.__zoom}function bC(n){n.stopImmediatePropagation()}function qm(n){n.preventDefault(),n.stopImmediatePropagation()}function VTe(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function YTe(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function O6(){return this.__zoom||F3}function GTe(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function KTe(){return navigator.maxTouchPoints||"ontouchstart"in this}function XTe(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function QTe(){var n=VTe,e=YTe,r=XTe,i=GTe,s=KTe,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=G2e,u=Ub("start","zoom","end"),h,d,f,m=500,g=150,b=0,y=10;function v(z){z.property("__zoom",O6).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",D).filter(s).on("touchstart.zoom",I).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(z,j,F,N){var R=z.selection?z.selection():z;R.property("__zoom",O6),z!==R?_(z,j,F,N):R.interrupt().each(function(){C(this,arguments).event(N).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},v.scaleBy=function(z,j,F,N){v.scaleTo(z,function(){var R=this.__zoom.k,W=typeof j=="function"?j.apply(this,arguments):j;return R*W},F,N)},v.scaleTo=function(z,j,F,N){v.transform(z,function(){var R=e.apply(this,arguments),W=this.__zoom,Y=F==null?S(R):typeof F=="function"?F.apply(this,arguments):F,K=W.invert(Y),H=typeof j=="function"?j.apply(this,arguments):j;return r(k(w(W,H),Y,K),R,a)},F,N)},v.translateBy=function(z,j,F,N){v.transform(z,function(){return r(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),a)},null,N)},v.translateTo=function(z,j,F,N,R){v.transform(z,function(){var W=e.apply(this,arguments),Y=this.__zoom,K=N==null?S(W):typeof N=="function"?N.apply(this,arguments):N;return r(F3.translate(K[0],K[1]).scale(Y.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof F=="function"?-F.apply(this,arguments):-F),W,a)},N,R)};function w(z,j){return j=Math.max(o[0],Math.min(o[1],j)),j===z.k?z:new cl(j,z.x,z.y)}function k(z,j,F){var N=j[0]-F[0]*z.k,R=j[1]-F[1]*z.k;return N===z.x&&R===z.y?z:new cl(z.k,N,R)}function S(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function _(z,j,F,N){z.on("start.zoom",function(){C(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(N).end()}).tween("zoom",function(){var R=this,W=arguments,Y=C(R,W).event(N),K=e.apply(R,W),H=F==null?S(K):typeof F=="function"?F.apply(R,W):F,Q=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),G=R.__zoom,X=typeof j=="function"?j.apply(R,W):j,de=c(G.invert(H).concat(Q/G.k),X.invert(H).concat(Q/X.k));return function(ye){if(ye===1)ye=X;else{var se=de(ye),ie=Q/se[2];ye=new cl(ie,H[0]-se[0]*ie,H[1]-se[1]*ie)}Y.zoom(null,ye)}})}function C(z,j,F){return!F&&z.__zooming||new P(z,j)}function P(z,j){this.that=z,this.args=j,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,j),this.taps=0}P.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,j){return this.mouse&&z!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var j=li(this.that).datum();u.call(z,this.that,new HTe(z,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),j)}};function T(z,...j){if(!n.apply(this,arguments))return;var F=C(this,j).event(z),N=this.__zoom,R=Math.max(o[0],Math.min(o[1],N.k*Math.pow(2,i.apply(this,arguments)))),W=vo(z);if(F.wheel)(F.mouse[0][0]!==W[0]||F.mouse[0][1]!==W[1])&&(F.mouse[1]=N.invert(F.mouse[0]=W)),clearTimeout(F.wheel);else{if(N.k===R)return;F.mouse=[W,N.invert(W)],Ix(this),F.start()}qm(z),F.wheel=setTimeout(Y,g),F.zoom("mouse",r(k(w(N,R),F.mouse[0],F.mouse[1]),F.extent,a));function Y(){F.wheel=null,F.end()}}function O(z,...j){if(f||!n.apply(this,arguments))return;var F=z.currentTarget,N=C(this,j,!0).event(z),R=li(z.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",Q,!0),W=vo(z,F),Y=z.clientX,K=z.clientY;pne(z.view),bC(z),N.mouse=[W,this.__zoom.invert(W)],Ix(this),N.start();function H(G){if(qm(G),!N.moved){var X=G.clientX-Y,de=G.clientY-K;N.moved=X*X+de*de>b}N.event(G).zoom("mouse",r(k(N.that.__zoom,N.mouse[0]=vo(G,F),N.mouse[1]),N.extent,a))}function Q(G){R.on("mousemove.zoom mouseup.zoom",null),mne(G.view,N.moved),qm(G),N.event(G).end()}}function D(z,...j){if(n.apply(this,arguments)){var F=this.__zoom,N=vo(z.changedTouches?z.changedTouches[0]:z,this),R=F.invert(N),W=F.k*(z.shiftKey?.5:2),Y=r(k(w(F,W),N,R),e.apply(this,j),a);qm(z),l>0?li(this).transition().duration(l).call(_,Y,N,z):li(this).call(v.transform,Y,N,z)}}function I(z,...j){if(n.apply(this,arguments)){var F=z.touches,N=F.length,R=C(this,j,z.changedTouches.length===N).event(z),W,Y,K,H;for(bC(z),Y=0;Y<N;++Y)K=F[Y],H=vo(K,this),H=[H,this.__zoom.invert(H),K.identifier],R.touch0?!R.touch1&&R.touch0[2]!==H[2]&&(R.touch1=H,R.taps=0):(R.touch0=H,W=!0,R.taps=1+!!h);h&&(h=clearTimeout(h)),W&&(R.taps<2&&(d=H[0],h=setTimeout(function(){h=null},m)),Ix(this),R.start())}}function U(z,...j){if(this.__zooming){var F=C(this,j).event(z),N=z.changedTouches,R=N.length,W,Y,K,H;for(qm(z),W=0;W<R;++W)Y=N[W],K=vo(Y,this),F.touch0&&F.touch0[2]===Y.identifier?F.touch0[0]=K:F.touch1&&F.touch1[2]===Y.identifier&&(F.touch1[0]=K);if(Y=F.that.__zoom,F.touch1){var Q=F.touch0[0],G=F.touch0[1],X=F.touch1[0],de=F.touch1[1],ye=(ye=X[0]-Q[0])*ye+(ye=X[1]-Q[1])*ye,se=(se=de[0]-G[0])*se+(se=de[1]-G[1])*se;Y=w(Y,Math.sqrt(ye/se)),K=[(Q[0]+X[0])/2,(Q[1]+X[1])/2],H=[(G[0]+de[0])/2,(G[1]+de[1])/2]}else if(F.touch0)K=F.touch0[0],H=F.touch0[1];else return;F.zoom("touch",r(k(Y,K,H),F.extent,a))}}function B(z,...j){if(this.__zooming){var F=C(this,j).event(z),N=z.changedTouches,R=N.length,W,Y;for(bC(z),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),W=0;W<R;++W)Y=N[W],F.touch0&&F.touch0[2]===Y.identifier?delete F.touch0:F.touch1&&F.touch1[2]===Y.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(Y=vo(Y,this),Math.hypot(d[0]-Y[0],d[1]-Y[1])<y)){var K=li(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return v.wheelDelta=function(z){return arguments.length?(i=typeof z=="function"?z:Dv(+z),v):i},v.filter=function(z){return arguments.length?(n=typeof z=="function"?z:Dv(!!z),v):n},v.touchable=function(z){return arguments.length?(s=typeof z=="function"?z:Dv(!!z),v):s},v.extent=function(z){return arguments.length?(e=typeof z=="function"?z:Dv([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),v):e},v.scaleExtent=function(z){return arguments.length?(o[0]=+z[0],o[1]=+z[1],v):[o[0],o[1]]},v.translateExtent=function(z){return arguments.length?(a[0][0]=+z[0][0],a[1][0]=+z[1][0],a[0][1]=+z[0][1],a[1][1]=+z[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(z){return arguments.length?(r=z,v):r},v.duration=function(z){return arguments.length?(l=+z,v):l},v.interpolate=function(z){return arguments.length?(c=z,v):c},v.on=function(){var z=u.on.apply(u,arguments);return z===u?v:z},v.clickDistance=function(z){return arguments.length?(b=(z=+z)*z,v):Math.sqrt(b)},v.tapDistance=function(z){return arguments.length?(y=+z,v):y},v}function Ih({data:n,height:e=150,width:r=900,maxBars:i=60,getTimestamp:s=o=>o.timestamp||Date.now()}){const o=E.useRef(null),a=E.useRef(null),[l,c]=E.useState([]),u=E.useCallback(h=>s(h),[s]);return E.useEffect(()=>{if(n.length===0){c([]);return}const h=Date.now(),d=new Map;n.forEach(m=>{const g=u(m);if(!g||isNaN(g)||!isFinite(g))return;const b=Math.floor((h-g)/1e3);if(b>=0&&b<i){const y=d.get(b)||0;d.set(b,y+1)}});const f=[];for(let m=i-1;m>=0;m--)f.push({time:m,count:d.get(m)||0});c(f)},[n,i,u]),E.useEffect(()=>{if(!o.current||l.length===0)return;const h=li(o.current);h.selectAll("*").remove();const d={top:20,right:20,bottom:40,left:50},f=r-d.left-d.right,m=e-d.top-d.bottom,g=h.append("g").attr("transform",`translate(${d.left}, ${d.top})`),b=Ane().domain(l.map((w,k)=>k.toString())).range([0,f]).padding(.1),v=Rne().domain([0,5]).range([m,0]).nice();return g.append("g").attr("transform",`translate(0, ${m})`).call(o6(b).tickValues(b.domain().filter((w,k)=>k%Math.ceil(i/10)===0)).tickFormat(w=>{var C;const k=parseInt(w||"0"),S=((C=l[k])==null?void 0:C.time)||0;return S===0?"now":S<60?`-${S}s`:`-${Math.floor(S/60)}m`})).selectAll("text").attr("class","data-rate-axis-text"),g.append("g").call(Mke(v).ticks(5)).selectAll("text").attr("class","data-rate-axis-text"),g.append("text").attr("class","data-rate-y-axis-label").attr("transform","rotate(-90)").attr("y",-35).attr("x",-m/2).attr("text-anchor","middle").text("Data Points/sec"),g.selectAll("rect").data(l).enter().append("rect").attr("x",(w,k)=>b(k.toString())||0).attr("y",w=>v(w.count)).attr("width",b.bandwidth()).attr("height",w=>m-v(w.count)).attr("fill",w=>w.count>=3.5?"#4CAF50":w.count>=2?"#FF9800":w.count>0?"#F44336":"#E0E0E0").attr("rx",2).style("opacity",.8).on("mouseover",function(w,k){var O;li(this).style("opacity",1),a.current&&a.current.remove();const _=li("body").append("div").attr("class","data-rate-tooltip").style("opacity",0),C=(O=o.current)==null?void 0:O.getBoundingClientRect(),[P,T]=vo(w,o.current);C?(_.style("left",`${C.left+P+10}px`).style("top",`${C.top+T-10}px`).text(`${k.count} data points ${k.time===0?"now":`${k.time}s ago`}`).transition().duration(200).style("opacity",1),a.current=_):_.remove()}).on("mouseout",function(){li(this).style("opacity",.8),a.current&&(a.current.transition().duration(200).style("opacity",0).remove(),a.current=null)}),g.append("g").attr("class","grid").attr("transform",`translate(0, ${m})`).call(o6(b).tickSize(-m).tickValues(b.domain().filter((w,k)=>k%Math.ceil(i/10)===0)).tickFormat(()=>"")).selectAll("line").attr("class","data-rate-grid-line"),()=>{a.current&&(a.current.remove(),a.current=null),d2e(".data-rate-tooltip").remove()}},[l,r,e,i]),p.jsxs("div",{className:"data-rate-histogram-container",children:[p.jsx("h4",{className:"data-rate-histogram-title",children:"Data Rate (points/second)"}),p.jsx("svg",{ref:o,className:"data-rate-histogram-svg",width:r,height:e})]})}const JTe=n=>{switch(n){case"orderbook":return"hooks-test-subchannel-orderbook";case"trades":return"hooks-test-subchannel-trades";case"positions":return"hooks-test-subchannel-positions";case"orders":return"hooks-test-subchannel-orders";case"buckets":return"hooks-test-subchannel-buckets";case"balances":return"hooks-test-subchannel-balances";default:return"hooks-test-subchannel-default"}};function I6({messages:n,maxDisplay:e,onMessageClick:r}){return n.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No multi-feed messages received yet"}):p.jsx("div",{className:"hooks-test-multifeed-messages-container",children:p.jsx("div",{className:"hooks-test-multifeed-messages-list",children:n.map((i,s)=>p.jsxs("div",{className:`hooks-test-multifeed-message-item ${s%2===0?"hooks-test-multifeed-message-item-even":"hooks-test-multifeed-message-item-odd"}`,onClick:()=>r(i,`Multi-Feed: ${i.sub_channel}`),children:[p.jsxs("div",{className:"hooks-test-multifeed-message-header",children:[p.jsx("span",{className:`hooks-test-multifeed-message-subchannel ${JTe(i.sub_channel)}`,children:i.sub_channel}),i.sequence_id&&p.jsxs("span",{className:"hooks-test-multifeed-message-sequence",children:["Seq: ",i.sequence_id]})]}),p.jsxs("div",{className:"hooks-test-multifeed-message-info",children:["Market: ",i.market_id||"N/A",i.first_sequence_id&&` | First SQ-ID: ${i.first_sequence_id}`,i.last_sequence_id&&` | Last SQ-ID: ${i.last_sequence_id}`,i.checksum&&` | Checksum: ${i.checksum.substring(0,8)}...`]}),p.jsxs("div",{className:"hooks-test-multifeed-message-preview",children:[JSON.stringify(i.data).substring(0,100),"..."]})]},s))})})}function ZTe({buckets:n,orderPlacementMnemonic:e,setOrderPlacementMnemonic:r,orderPlacementBucketId:i,setOrderPlacementBucketId:s,orderPlacementSide:o,setOrderPlacementSide:a,orderPlacementOrderType:l,setOrderPlacementOrderType:c,orderPlacementPrice:u,setOrderPlacementPrice:h,orderPlacementQuantity:d,setOrderPlacementQuantity:f,orderPlacementLeverage:m,setOrderPlacementLeverage:g,isReady:b,loading:y,result:v,handlePlaceOrder:w,handleRandomize:k}){return p.jsxs("div",{style:{marginTop:"20px"},children:[p.jsxs("div",{className:"hooks-test-form-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Mnemonic:",p.jsx("input",{type:"text",className:"hooks-test-input",value:e,onChange:S=>r(S.target.value),placeholder:"Enter mnemonic"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Bucket ID:",p.jsxs("select",{className:"hooks-test-select",value:i,onChange:S=>s(S.target.value),children:[p.jsx("option",{value:"",children:"Select a bucket..."}),n.map(S=>p.jsxs("option",{value:S.bucketId,children:[S.bucketId," (",S.collateralAsset,")"]},S.bucketId))]})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Side:",p.jsxs("select",{className:"hooks-test-select",value:o,onChange:S=>a(S.target.value),children:[p.jsx("option",{value:"buy",children:"Buy"}),p.jsx("option",{value:"sell",children:"Sell"})]})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Order Type:",p.jsxs("select",{className:"hooks-test-select",value:l,onChange:S=>c(S.target.value),children:[p.jsx("option",{value:"market",children:"Market"}),p.jsx("option",{value:"limit",children:"Limit"})]})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Price:",p.jsx("input",{type:"number",className:"hooks-test-input",value:u||"",onChange:S=>h(parseFloat(S.target.value)||0),placeholder:"Enter price",step:"0.01",disabled:l==="market"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Quantity:",p.jsx("input",{type:"number",className:"hooks-test-input",value:d||"",onChange:S=>f(parseFloat(S.target.value)||0),placeholder:"Enter quantity",step:"0.001"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Leverage:",p.jsx("input",{type:"number",className:"hooks-test-input",value:m||"",onChange:S=>g(parseFloat(S.target.value)||1),placeholder:"Enter leverage",min:"1",step:"0.1"})]})})]}),p.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"10px"},children:[p.jsx("button",{className:"hooks-test-button",onClick:w,disabled:!b||y||!i||d<=0,style:{flex:1,padding:"20px",fontSize:"18px",fontWeight:"bold"},children:y?"Placing Order...":o==="buy"?"Place Buy Order":"Place Sell Order"}),p.jsx("button",{className:"hooks-test-button",onClick:k,disabled:n.length===0,style:{padding:"20px",fontSize:"18px",fontWeight:"bold",minWidth:"120px"},children:"Random"})]}),v&&p.jsx("div",{className:"hooks-test-error-box",style:{marginTop:"15px",backgroundColor:v.success?"#d4edda":"#f8d7da",color:v.success?"#155724":"#721c24"},children:v.success?p.jsxs("div",{children:[p.jsx("strong",{children:"Success!"}),v.message&&p.jsx("div",{children:v.message}),v.orderId&&p.jsxs("div",{children:["Order ID: ",v.orderId]})]}):p.jsxs("div",{children:[p.jsx("strong",{children:"Error:"})," ",v.error]})})]})}function ePe({buckets:n,selectedMarketId:e}){const{client:r}=Qc(),{walletAddress:i,authToken:s}=Il(),{orders:o,loading:a,error:l,refresh:c}=t3({subscriptionClient:r,baseURL:Jd,authToken:s,walletAddress:i,useWebSocket:!0,refreshInterval:0,marketId:e?String(e):void 0});E.useEffect(()=>{c()},[c,e]);const u=E.useMemo(()=>o.filter(d=>{const f=d.status.toUpperCase();return f==="OPEN"||f==="PENDING"||f==="PARTIAL"}),[o]),h=E.useMemo(()=>[{key:"orderId",label:"Order ID",width:200,render:d=>p.jsx("span",{style:{fontFamily:"monospace",fontSize:"12px"},children:d.orderId})},{key:"side",label:"Side",width:80,align:"center",render:d=>p.jsx("span",{style:{color:d.side==="BUY"||d.side==="LONG"?"#4CAF50":"#F44336",fontWeight:"bold"},children:d.side})},{key:"price",label:"Entry Price",width:120,align:"right",render:d=>p.jsx("span",{children:d.price.toFixed(2)})},{key:"filledQuantity",label:"Filled Size",width:120,align:"right",render:d=>p.jsx("span",{children:d.filledQuantity.toFixed(4)})}],[]);return p.jsxs("div",{style:{marginTop:"20px"},children:[p.jsx("div",{style:{marginTop:"20px"},children:a?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):l?p.jsxs("div",{className:"hooks-test-loading-state",style:{color:"#F44336"},children:["Error: ",l]}):u.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No open orders found"}):p.jsx(tke,{data:u,columns:h,maxItems:10,emptyMessage:"No open orders",rowHeight:24,showHeader:!0})}),p.jsx("div",{style:{marginTop:"20px"},children:p.jsx("button",{className:"hooks-test-button",disabled:!e||n.length===0||u.length===0,style:{width:"100%",padding:"20px",fontSize:"18px",fontWeight:"bold"},children:"Cancel Open Orders"})})]})}function tPe({buckets:n,selectedMarketId:e}){return p.jsxs("div",{style:{marginTop:"20px"},children:[p.jsxs("div",{className:"hooks-test-form-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID:",p.jsx("input",{type:"text",className:"hooks-test-input",value:e?String(e):"",readOnly:!0,placeholder:"Select market from dropdown above"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Bucket ID:",p.jsxs("select",{className:"hooks-test-select",defaultValue:"",children:[p.jsx("option",{value:"",children:"Select a bucket..."}),n.map(r=>p.jsxs("option",{value:r.bucketId,children:[r.bucketId," (",r.collateralAsset,")"]},r.bucketId))]})]})})]}),p.jsx("div",{style:{marginTop:"20px"},children:p.jsx("button",{className:"hooks-test-button",disabled:!e||n.length===0,style:{width:"100%",padding:"20px",fontSize:"18px",fontWeight:"bold"},children:"Close Position"})}),p.jsx("div",{className:"hooks-test-loading-state",style:{marginTop:"20px",textAlign:"left"},children:"Position Close functionality coming soon..."})]})}function nPe({isReady:n,loading:e,result:r,selectedMarketId:i,buckets:s,markPrice:o,lastPrice:a,orderPlacementMnemonic:l,setOrderPlacementMnemonic:c,orderPlacementBucketId:u,setOrderPlacementBucketId:h,orderPlacementSide:d,setOrderPlacementSide:f,orderPlacementOrderType:m,setOrderPlacementOrderType:g,orderPlacementPrice:b,setOrderPlacementPrice:y,orderPlacementQuantity:v,setOrderPlacementQuantity:w,orderPlacementLeverage:k,setOrderPlacementLeverage:S,handlePlaceOrder:_,handleRandomize:C,getOrderPrice:P,calculateSize:T}){const[O,D]=E.useState("order-placement"),I=i?String(i):"0",U=E.useMemo(()=>{P();const B=T(),z=un(k.toString());return{marketId:I,bucketId:u||"(required)",side:d,orderType:m,price:b,quantity:B>0?B:v||0,leverage:z}},[I,u,d,m,b,v,k,P,T]);return p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Order Operations",statusBadges:[p.jsx("span",{className:`hooks-test-status-badge ${n?"hooks-test-status-badge-success":"hooks-test-status-badge-warning"}`,children:n?"Ready":"Initializing..."},"ready-status")]}),p.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"start"},children:[p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{className:"hooks-test-multifeed-tabs",children:[p.jsx("button",{className:`hooks-test-multifeed-tab ${O==="order-placement"?"active":""}`,onClick:()=>D("order-placement"),children:"Order Placement"}),p.jsx("button",{className:`hooks-test-multifeed-tab ${O==="cancel-opens"?"active":""}`,onClick:()=>D("cancel-opens"),children:"Cancel Opens"}),p.jsx("button",{className:`hooks-test-multifeed-tab ${O==="position-close"?"active":""}`,onClick:()=>D("position-close"),children:"Position Close"})]}),O==="order-placement"&&p.jsx(ZTe,{buckets:s,orderPlacementMnemonic:l,setOrderPlacementMnemonic:c,orderPlacementBucketId:u,setOrderPlacementBucketId:h,orderPlacementSide:d,setOrderPlacementSide:f,orderPlacementOrderType:m,setOrderPlacementOrderType:g,orderPlacementPrice:b,setOrderPlacementPrice:y,orderPlacementQuantity:v,setOrderPlacementQuantity:w,orderPlacementLeverage:k,setOrderPlacementLeverage:S,isReady:n,loading:e,result:r,handlePlaceOrder:_,handleRandomize:C}),O==="cancel-opens"&&p.jsx(ePe,{buckets:s,selectedMarketId:i}),O==="position-close"&&p.jsx(tPe,{buckets:s,selectedMarketId:i})]}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h3",{className:"hooks-test-section-header",style:{marginTop:0},children:"Config JSON"}),p.jsx("div",{className:"hooks-test-result-data",children:p.jsx("pre",{className:"data-modal-content",children:JSON.stringify(U,null,2)})})]})]})]})}const A6=5e3,R6=20,rPe="1m",iPe=["orderbook","trades","positions","orders","buckets","balances"];function sPe(){const[n,e]=E.useState(Jd),[r,i]=E.useState(su),[s,o]=E.useState(c_),[a,l]=E.useState(100),[c,u]=E.useState(10),{walletAddress:h,authToken:d,error:f}=Il(),{markets:m,selectedMarketId:g,setSelectedMarketId:b,fetchMarkets:y,loadingMarkets:v,getMarket:w}=ya({baseURL:n,sessionToken:d,autoFetchMarkets:!0}),[k,S]=E.useState("0"),[_,C]=E.useState("1m"),[P,T]=E.useState("0"),[O,D]=E.useState("BTC/USDC"),[I,U]=E.useState("0"),[B,z]=E.useState("0"),[j,F]=E.useState(s_),[N,R]=E.useState(""),[W,Y]=E.useState("buy"),[K,H]=E.useState("market"),[Q,G]=E.useState(0),[X,de]=E.useState(0),[ye,se]=E.useState(1);E.useEffect(()=>{if(g){const oe=String(g);S(oe),T(oe),U(oe),z(oe),Xe([]),te([]),je(new Map);const bt=w(g||"");bt&&D(bt.symbol||`${bt.baseAsset}/${bt.quoteAsset}`)}},[g,w]);const[ie,Pe]=E.useState(null),[ke,q]=E.useState("Data Details"),[Ee,Je]=E.useState(!1),{client:ct,isEnabled:$e,isConnected:ut,connectionState:qe,toggleEnabled:we,getRetainedData:ze,getAllRetainedData:Me,wsURL:Ie,setWsURL:Ce,authToken:xe,setAuthToken:L,walletAddress:re,setWalletAddress:fe,deviceID:le,setDeviceID:ce,subscribeMultiFeedWithRetention:ge,unsubscribeMultiFeed:J}=Qc(),{klineData:he,loading:pe,error:_e,isConnected:De}=Pye({subscriptionClient:ct,marketId:k,interval:_,maxDataPoints:a});E.useEffect(()=>{const oe=[];r!==Ie&&oe.push(()=>Ce(r)),d!==xe&&oe.push(()=>L(d)),h!==re&&oe.push(()=>fe(h)),s!==le&&oe.push(()=>ce(s)),oe.forEach(tt=>tt())},[r,Ie,Ce,d,xe,L,h,re,fe,s,le,ce]);const[ae,Xe]=E.useState([]),[Fe,te]=E.useState([]),[ee,ne]=E.useState(!1),[Ze,je]=E.useState(new Map),[Ve,Ae]=E.useState("recent"),[Qe,lt]=E.useState(null),[He,rt]=E.useState(!0),[Te,it]=E.useState(null),{markPrice:ve,error:wt}=l_({subscriptionClient:ct,baseURL:n,marketId:P,disablePolling:!0}),ft=ee,[_t,Rt]=E.useState([]),[Mt,Wt]=E.useState([]);E.useEffect(()=>{Qe&&Rt(oe=>{const tt=[...oe,{...Qe,value:Qe.price,timestamp:Qe.timestamp,arrivalTime:Date.now()}];return tt.length>a?tt.slice(-a):tt})},[Qe,a]),E.useEffect(()=>{ve&&Wt(oe=>{const tt=[...oe,{...ve,value:ve.mark_price,timestamp:ve.timestamp,arrivalTime:Date.now()}];return tt.length>a?tt.slice(-a):tt})},[ve,a]);const{buckets:Nt,loading:et,error:Gt,refresh:$n}=JN({subscriptionClient:ct,baseURL:n,authToken:d,walletAddress:h,refreshInterval:0,useWebSocket:!0,marketId:"0"}),{positions:Xt,loading:ts,error:Br,isConnected:Cs,refresh:io}=Nee({subscriptionClient:ct,baseURL:n,authToken:d,walletAddress:h,useWebSocket:!0,refreshInterval:0}),{orders:yr,loading:zr,error:ns,isConnected:dh,refresh:hh}=t3({subscriptionClient:ct,baseURL:n,authToken:d,walletAddress:h,deviceID:s,useWebSocket:!0,refreshInterval:0}),{asks:Lo,bids:fn,spread:ka,midPrice:jl,loading:Ca,error:Ll,isConnected:fh,refresh:ph}=QN({subscriptionClient:ct,baseURL:n,marketId:I,disablePolling:!0}),{latestFundingRate:Bn,latestDeviation:Mr,latestTWAP:vr,loading:mh,error:Fl,isConnected:fu}=Ree({subscriptionClient:ct,baseURL:n,marketId:B}),{setOrderType:pu,setSizeInput:mu,setPrice:gu,setLeverage:$l,isReady:Se,loading:Ge,result:Ue,placeBuyOrder:Ye,placeSellOrder:Oe,getOrderPrice:gt,calculateSize:It}=Aee({baseURL:n,mnemonic:j,marketId:g?String(g):"0",selectedBucketId:N,tradePrice:(ve==null?void 0:ve.mark_price)||(Qe==null?void 0:Qe.price)||void 0}),dt=E.useMemo(()=>{var tt,bt;return Bn||Mr||vr?{marketId:B,fundingRate:Bn?{latest:Bn,fundingRate:zk((typeof Bn.funding_rate=="string",Bn.funding_rate)),markPrice:Nu((typeof Bn.mark_price=="string",Bn.mark_price)),indexPrice:Nu((typeof Bn.index_price=="string",Bn.index_price)),premiumRate:zk((typeof Bn.premium_rate=="string",Bn.premium_rate)),symbol:Bn.symbol||"N/A",formattedTimestamp:Bn.timestamp?new Date(sa(Bn.timestamp)).toLocaleString():null}:null,deviation:Mr?{latest:Mr,deviationBps:Mr.deviation_bps,deviationPercent:zk(Mr.deviation_percent),lastPrice:Nu(Mr.last_price),markPrice:Nu(Mr.mark_price),indexPrice:Nu(Mr.index_price),direction:Mr.direction||"N/A",symbol:Mr.symbol||"N/A",formattedTimestamp:Mr.timestamp?new Date(sa(Mr.timestamp)).toLocaleString():null}:null,twap:vr?{latest:vr,twapValue:Nu((typeof vr.twap_value=="string",vr.twap_value)),windowSize:((tt=vr.window_size)==null?void 0:tt.toString())||"N/A",sampleCount:((bt=vr.sample_count)==null?void 0:bt.toString())||"N/A",calculationMethod:vr.calculation_method||"N/A",startTime:vr.start_time?new Date(vr.start_time*1e3).toLocaleString():"N/A",endTime:vr.end_time?new Date(vr.end_time*1e3).toLocaleString():"N/A",symbol:vr.symbol||"N/A"}:null}:null},[B,Bn,Mr,vr]),dn=E.useMemo(()=>g?String(g):I,[g,I]),An=E.useMemo(()=>O||"BTC/USDC",[O]),Jt=E.useCallback(oe=>{if(iPe.includes(oe.sub_channel)?te(tt=>[...tt,oe].slice(-100)):Xe(tt=>[...tt,oe].slice(-20)),je(tt=>{const bt=new Map(tt),Cn=bt.get(oe.sub_channel)||0;return bt.set(oe.sub_channel,Cn+1),bt}),MI(oe))try{const tt=oe.data,bt={market_id:tt.market_id,price:Dt(tt.price),quantity:Dt(tt.quantity),timestamp:sa(tt.timestamp),is_buyer_maker:tt.is_buyer_maker,trade_id:tt.trade_id};lt(bt),rt(!1),it(null)}catch(tt){console.error("[HooksTestPage] Error processing last_price from multi-feed:",tt),it(tt instanceof Error?tt.message:"Failed to process last_price")}},[]);E.useEffect(()=>{ne(ut&&$e)},[ut,$e]);const xr=E.useMemo(()=>_||rPe,[_]);E.useEffect(()=>{if(!dn||!An||!ct||!$e){$e||(Xe([]),te([]),je(new Map));return}if(!ut){console.debug("[HooksTestPage] Client not connected yet, waiting...");return}const oe=ze("last_price");if(oe&&MI(oe))try{const bt={market_id:oe.data.market_id,price:Dt(oe.data.price),quantity:Dt(oe.data.quantity),timestamp:sa(oe.data.timestamp),is_buyer_maker:oe.data.is_buyer_maker,trade_id:oe.data.trade_id};lt(bt),rt(!1),it(null)}catch(bt){console.error("[HooksTestPage] Error processing retained last_price:",bt),it(bt instanceof Error?bt.message:"Failed to process retained last_price")}console.debug("[HooksTestPage] Subscribing to multi-feed with:",{marketId:dn,symbol:An,interval:xr});let tt=!1;try{if(ge(dn,An,Jt,xr),ct){const bt=setTimeout(()=>{tt||(console.warn("[HooksTestPage] Multi-feed subscription acknowledgment timeout"),it("Multi-feed subscription acknowledgment timeout"),rt(!1))},A6);ct.waitForSubscription("multi_feed",A6).then(()=>{tt=!0,clearTimeout(bt),console.debug("[HooksTestPage] Multi-feed subscription acknowledged by server"),rt(!1),it(null)}).catch(Cn=>{tt=!0,clearTimeout(bt),console.warn("[HooksTestPage] Multi-feed subscription acknowledgment error:",Cn),it("Multi-feed subscription acknowledgment failed"),rt(!1)})}}catch(bt){console.error("[HooksTestPage] Failed to subscribe to multi-feed:",bt),it(bt instanceof Error?bt.message:"Failed to subscribe"),rt(!1)}return()=>{if(ct&&dn&&An)try{J(dn,An,Jt)}catch(bt){console.error("[HooksTestPage] Error unsubscribing from multi-feed:",bt)}}},[dn,An,ct,$e,ut,xr,Jt,ge,J,ze]);const qt=(oe,tt)=>{const bt=oe.raw||oe.message||oe.data||oe;Pe(bt),q(tt),Je(!0)},rs=E.useCallback(()=>{Je(!1)},[]);E.useEffect(()=>{pu(K)},[K,pu]),E.useEffect(()=>{mu(X)},[X,mu]),E.useEffect(()=>{gu(Q)},[Q,gu]),E.useEffect(()=>{$l(ye)},[ye,$l]);const Ht=E.useCallback(async()=>{W==="buy"?await Ye():await Oe()},[W,Ye,Oe]),ar=E.useCallback(()=>{if(Nt.length>0){const kr=Nt[Math.floor(Math.random()*Nt.length)];R(kr.bucketId)}const oe=Math.random()<.5?"buy":"sell";Y(oe);const tt=Math.random()<.5?"market":"limit";if(H(tt),tt==="market")G(0);else{const kr=Math.floor(Math.random()*80001)+1e4;G(kr)}const bt=Math.random()*(1.5-.01)+.01;de(parseFloat(bt.toFixed(3)));const Cn=Math.floor(Math.random()*10)+1;se(Cn)},[Nt]);return p.jsxs("div",{className:"App-content-row",children:[p.jsx("h1",{children:"Hooks Test QA"}),p.jsx("p",{children:"realtime monitor of data flow and block"}),p.jsx(ske,{isEnabled:$e,isConnected:ut,connectionState:qe,retainedDataCount:Me().size,onToggle:we}),p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{className:"hooks-test-section-header",children:"Shared Configuration"}),p.jsxs("div",{className:"hooks-test-config-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["API Base URL:",p.jsx("input",{type:"text",className:"hooks-test-input",value:n,onChange:oe=>e(oe.target.value)})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["WebSocket URL:",p.jsx("input",{type:"text",className:"hooks-test-input",value:r,onChange:oe=>i(oe.target.value)})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Wallet Address (from useOnboard):",p.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:h||"",readOnly:!0,placeholder:"Set via useOnboard hook"}),f&&p.jsx("div",{className:"hooks-test-error-message",children:f})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Auth Token (from useOnboard):",p.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:d||"",readOnly:!0,placeholder:"Set via useOnboard hook"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market Selection:",p.jsxs("select",{className:"hooks-test-select",value:g||"",onChange:oe=>{const tt=oe.target.value;tt&&b(tt)},children:[p.jsx("option",{value:"",children:"Select a market..."}),m.map(oe=>p.jsxs("option",{value:String(oe.market_id),children:[oe.symbol||`${oe.baseAsset}/${oe.quoteAsset}`," ","(ID: ",oe.market_id,")"]},oe.market_id))]}),v&&p.jsx("div",{className:"hooks-test-info-message",children:"Loading markets..."}),!v&&m.length===0&&p.jsx("button",{className:"hooks-test-button hooks-test-button-with-margin",onClick:()=>y(),children:"Fetch Markets"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Device ID:",p.jsx("input",{type:"text",className:"hooks-test-input",value:s,onChange:oe=>o(oe.target.value)})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Max Data Points (Memory):",p.jsx("input",{type:"number",className:"hooks-test-input",value:a,onChange:oe=>l(Math.max(10,parseInt(oe.target.value)||100)),min:"10"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Max Visible Rectangles:",p.jsx("input",{type:"number",className:"hooks-test-input",value:c,onChange:oe=>u(Math.max(1,parseInt(oe.target.value)||10)),min:"1"})]})})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Kline Hook",isConnected:De,statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[he.length," data points"]},"data-points")]}),p.jsxs("div",{className:"hooks-test-form-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",p.jsx("input",{type:"text",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`,value:k,onChange:oe=>S(oe.target.value),placeholder:"Select market from dropdown above"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Interval:",p.jsxs("select",{className:"hooks-test-select",value:_,onChange:oe=>C(oe.target.value),children:[p.jsx("option",{value:"1m",children:"1m"}),p.jsx("option",{value:"5m",children:"5m"}),p.jsx("option",{value:"15m",children:"15m"}),p.jsx("option",{value:"1h",children:"1h"}),p.jsx("option",{value:"4h",children:"4h"}),p.jsx("option",{value:"1d",children:"1d"})]})]})})]}),_e&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",_e]}),pe&&he.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading kline data..."}):he.length===0?p.jsx("div",{className:"hooks-test-empty-state",children:"No kline data available"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:he,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.close||oe.high||100,onItemClick:oe=>qt(oe,"Kline Data")}),p.jsx(Ih,{data:he,getTimestamp:oe=>{let tt=oe.timestamp||oe.open_time||Date.now();return tt<9466848e5&&(tt=tt*1e3),tt}})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Mark Price Hook",isConnected:ft}),p.jsxs("div",{className:"hooks-test-form-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",p.jsx("input",{type:"text",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`,value:P,onChange:oe=>T(oe.target.value),placeholder:"Select market from dropdown above"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Mark price subscription uses marketId (not symbol). Can be manually overridden if needed."})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Symbol (for display only, auto-updated from selected market):",p.jsx("input",{type:"text",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`,value:O,onChange:oe=>D(oe.target.value),placeholder:"BTC/USDC"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Symbol is only used for display in mark price data, not for subscription."})]})})]}),wt&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",wt]}),Mt.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No mark price data available"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:Mt,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.value||oe.mark_price||100,onItemClick:oe=>qt(oe,"Mark Price Data")}),p.jsx(Ih,{data:Mt,getTimestamp:oe=>oe.arrivalTime||oe.timestamp||Date.now()})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Last Price Hook",isConnected:ft}),p.jsx("div",{className:"hooks-test-form-grid",children:p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",p.jsx("input",{type:"text",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`,value:P,onChange:oe=>T(oe.target.value),placeholder:"Select market from dropdown above"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),Te&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Te]}),He&&_t.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading last price data..."}):_t.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No last price data available"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:_t,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.value||oe.price||100,onItemClick:oe=>qt(oe,"Last Price Data")}),p.jsx(Ih,{data:_t,getTimestamp:oe=>oe.arrivalTime||oe.timestamp||Date.now()})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Bucket Hook (Addressed)",statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Nt.length," buckets"]},"buckets-count")],actions:[p.jsx("button",{className:"hooks-test-button",onClick:()=>$n(),disabled:et,children:et?"Loading...":"Refresh"},"refresh")]}),Gt&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Gt]}),et&&Nt.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading buckets..."}):Nt.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No buckets found"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:Nt,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.totalMargin||oe.unrealizedPnL||100,onItemClick:oe=>qt(oe,"Bucket Data")}),p.jsx(Ih,{data:Nt,getTimestamp:oe=>oe.createdAt?new Date(oe.createdAt).getTime():Date.now()})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Position Hook (Addressed)",isConnected:Cs,statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[Xt.length," positions"]},"positions-count")],actions:[p.jsx("button",{className:"hooks-test-button",onClick:()=>io(),disabled:ts,children:ts?"Loading...":"Refresh"},"refresh")]}),Br&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Br]}),ts&&Xt.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading positions..."}):Xt.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No positions found"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:Xt,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.size||oe.margin||100,onItemClick:oe=>qt(oe,"Position Data")}),p.jsx(Ih,{data:Xt,getTimestamp:oe=>Date.now()})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Order Hook (Addressed)",isConnected:dh,statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[yr.length," orders"]},"orders-count")],actions:[p.jsx("button",{className:"hooks-test-button",onClick:()=>hh(),disabled:zr,children:zr?"Loading...":"Refresh"},"refresh")]}),ns&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",ns]}),zr&&yr.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading orders..."}):yr.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"No orders found"}):p.jsxs(p.Fragment,{children:[p.jsx(Oh,{data:yr,maxVisible:c,maxDataPoints:a,getValue:oe=>oe.quantity||oe.price||100,onItemClick:oe=>qt(oe,"Order Data")}),p.jsx(Ih,{data:yr,getTimestamp:oe=>oe.createdAt?typeof oe.createdAt=="number"?oe.createdAt:new Date(oe.createdAt).getTime():oe.updatedAt?typeof oe.updatedAt=="number"?oe.updatedAt:new Date(oe.updatedAt).getTime():Date.now()})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Orderbook Hook",isConnected:fh,statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[fn.length+Lo.length," levels"]},"levels-count")],actions:[p.jsx("button",{className:"hooks-test-button",onClick:()=>ph(),disabled:Ca,children:Ca?"Loading...":"Refresh"},"refresh")]}),p.jsx("div",{className:"hooks-test-form-grid",children:p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",p.jsx("input",{type:"text",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`,value:I,onChange:oe=>U(oe.target.value),placeholder:"Select market from dropdown above"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Can be manually overridden if needed"})]})})}),Ll&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Ll]}),Ca&&fn.length===0&&Lo.length===0?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading orderbook..."}):fn.length===0&&Lo.length===0?p.jsx("div",{className:"hooks-test-empty-state",children:"No orderbook data available"}):p.jsxs("div",{className:"hooks-test-orderbook-container",children:[p.jsxs("div",{className:"hooks-test-orderbook-grid",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"hooks-test-orderbook-section-title hooks-test-orderbook-section-title-bids",children:["Bids (",fn.length,")"]}),p.jsx("div",{className:"hooks-test-orderbook-levels-container",children:fn.slice(0,R6).map((oe,tt)=>p.jsxs("div",{className:`hooks-test-orderbook-level-row ${tt%2===0?"hooks-test-orderbook-level-row-even":"hooks-test-orderbook-level-row-odd"}`,onClick:()=>qt({raw:oe},"Orderbook Bid Level"),children:[p.jsx("span",{children:oe.price.toFixed(8)}),p.jsx("span",{children:oe.size.toFixed(8)}),p.jsx("span",{children:oe.cumulative.toFixed(8)})]},tt))})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"hooks-test-orderbook-section-title hooks-test-orderbook-section-title-asks",children:["Asks (",Lo.length,")"]}),p.jsx("div",{className:"hooks-test-orderbook-levels-container",children:Lo.slice(0,R6).map((oe,tt)=>p.jsxs("div",{className:`hooks-test-orderbook-level-row ${tt%2===0?"hooks-test-orderbook-level-row-even":"hooks-test-orderbook-level-row-odd"}`,onClick:()=>qt({raw:oe},"Orderbook Ask Level"),children:[p.jsx("span",{children:oe.price.toFixed(8)}),p.jsx("span",{children:oe.size.toFixed(8)}),p.jsx("span",{children:oe.cumulative.toFixed(8)})]},tt))})]})]}),ka!==void 0&&p.jsxs("div",{className:"hooks-test-orderbook-spread-info",children:[p.jsx("strong",{children:"Spread:"})," ",ka.toFixed(8)," |"," ",p.jsx("strong",{children:"Mid Price:"})," ",(jl==null?void 0:jl.toFixed(8))||"N/A"]})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Rates Hook (Funding Rate, Deviation, TWAP)",isConnected:fu,statusBadges:[],actions:[]}),p.jsx("div",{className:"hooks-test-form-grid",children:p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (controlled by Market Selection above):",p.jsx("input",{type:"text",value:B,onChange:oe=>{const tt=oe.target.value.trim();z(tt||"0")},placeholder:"0",className:`hooks-test-input ${g?"hooks-test-input-controlled":"hooks-test-input-uncontrolled"}`}),p.jsx("div",{className:"hooks-test-helper-text",children:"Subscribe to a single market. Can be manually overridden if needed."})]})})}),Fl&&p.jsxs("div",{className:"hooks-test-error-box",children:["Error: ",Fl]}),mh&&!dt?p.jsx("div",{className:"hooks-test-loading-state",children:"Loading rates..."}):dt?p.jsxs("div",{className:"hooks-test-funding-rate-list",children:[dt.fundingRate&&p.jsx("div",{className:"hooks-test-funding-rate-card",onClick:()=>qt({data:dt.fundingRate.latest},`Funding Rate - Market ${dt.marketId}`),role:"button",tabIndex:0,onKeyDown:oe=>{(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),qt({data:dt.fundingRate.latest},`Funding Rate - Market ${dt.marketId}`))},"aria-label":`View funding rate details for market ${dt.marketId}`,children:p.jsxs("div",{className:"hooks-test-funding-rate-grid",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Market ID:"})," ",dt.marketId]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Type:"})," Funding Rate"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Symbol:"})," ",dt.fundingRate.symbol]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Funding Rate:"})," ",dt.fundingRate.fundingRate]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Mark Price:"})," ",dt.fundingRate.markPrice]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Index Price:"})," ",dt.fundingRate.indexPrice]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Premium Rate:"})," ",dt.fundingRate.premiumRate]}),dt.fundingRate.formattedTimestamp&&p.jsxs("div",{children:[p.jsx("strong",{children:"Timestamp:"})," ",dt.fundingRate.formattedTimestamp]})]})}),dt.deviation&&p.jsx("div",{className:"hooks-test-funding-rate-card",onClick:()=>qt({data:dt.deviation.latest},`Deviation - Market ${dt.marketId}`),role:"button",tabIndex:0,onKeyDown:oe=>{(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),qt({data:dt.deviation.latest},`Deviation - Market ${dt.marketId}`))},"aria-label":`View deviation details for market ${dt.marketId}`,children:p.jsxs("div",{className:"hooks-test-funding-rate-grid",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Market ID:"})," ",dt.marketId]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Type:"})," Deviation"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Symbol:"})," ",dt.deviation.symbol]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Deviation (BPS):"})," ",dt.deviation.deviationBps]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Deviation (%):"})," ",dt.deviation.deviationPercent]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Last Price:"})," ",dt.deviation.lastPrice]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Mark Price:"})," ",dt.deviation.markPrice]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Index Price:"})," ",dt.deviation.indexPrice]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Direction:"})," ",dt.deviation.direction]}),dt.deviation.formattedTimestamp&&p.jsxs("div",{children:[p.jsx("strong",{children:"Timestamp:"})," ",dt.deviation.formattedTimestamp]})]})}),dt.twap&&p.jsx("div",{className:"hooks-test-funding-rate-card",onClick:()=>qt({data:dt.twap.latest},`TWAP - Market ${dt.marketId}`),role:"button",tabIndex:0,onKeyDown:oe=>{(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),qt({data:dt.twap.latest},`TWAP - Market ${dt.marketId}`))},"aria-label":`View TWAP details for market ${dt.marketId}`,children:p.jsxs("div",{className:"hooks-test-funding-rate-grid",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Market ID:"})," ",dt.marketId]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Type:"})," TWAP"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Symbol:"})," ",dt.twap.symbol]}),p.jsxs("div",{children:[p.jsx("strong",{children:"TWAP Value:"})," ",dt.twap.twapValue]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Window Size:"})," ",dt.twap.windowSize]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Sample Count:"})," ",dt.twap.sampleCount]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Calculation Method:"})," ",dt.twap.calculationMethod]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Start Time:"})," ",dt.twap.startTime]}),p.jsxs("div",{children:[p.jsx("strong",{children:"End Time:"})," ",dt.twap.endTime]})]})})]}):p.jsx("div",{className:"hooks-test-empty-state",children:"No rates data available"})]}),p.jsx(nPe,{isReady:Se,loading:Ge,result:Ue,selectedMarketId:g,buckets:Nt,markPrice:ve,lastPrice:Qe,orderPlacementMnemonic:j,setOrderPlacementMnemonic:F,orderPlacementBucketId:N,setOrderPlacementBucketId:R,orderPlacementSide:W,setOrderPlacementSide:Y,orderPlacementOrderType:K,setOrderPlacementOrderType:H,orderPlacementPrice:Q,setOrderPlacementPrice:G,orderPlacementQuantity:X,setOrderPlacementQuantity:de,orderPlacementLeverage:ye,setOrderPlacementLeverage:se,handlePlaceOrder:Ht,handleRandomize:ar,getOrderPrice:gt,calculateSize:It}),p.jsxs("div",{className:"App-section",children:[p.jsx(qo,{title:"Multi-Feed Channel",isConnected:ee,statusBadges:[p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info",children:[ae.length+Fe.length," messages"]},"messages-count")],actions:[p.jsx("button",{className:"hooks-test-button",onClick:()=>{Xe([]),te([]),je(new Map)},children:"Clear"},"clear")]}),p.jsxs("div",{className:"hooks-test-form-grid",children:[p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Market ID (from Market Selection):",p.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:dn,readOnly:!0,placeholder:"Select market from dropdown above"})]})}),p.jsx("div",{children:p.jsxs("label",{className:"hooks-test-label",children:["Symbol:",p.jsx("input",{type:"text",className:"hooks-test-input-readonly",value:An,readOnly:!0,placeholder:"BTC/USDC"}),p.jsx("div",{className:"hooks-test-helper-text",children:"Symbol is controlled by Trade Price Symbol above"})]})})]}),Ze.size>0&&p.jsx("div",{className:"hooks-test-multifeed-stats-container",children:p.jsx("div",{className:"hooks-test-multifeed-badges-container",children:Array.from(Ze.entries()).map(([oe,tt])=>p.jsxs("span",{className:"hooks-test-status-badge hooks-test-status-badge-info hooks-test-multifeed-badge-clickable",onClick:()=>{const Cn=[...ae,...Fe].filter(kr=>kr.sub_channel===oe).reverse();Cn.length>0&&qt({raw:Cn},`Multi-Feed: ${oe}`)},children:[oe,": ",tt]},oe))})}),p.jsxs("div",{className:"hooks-test-multifeed-tabs",children:[p.jsx("button",{className:`hooks-test-multifeed-tab ${Ve==="recent"?"active":""}`,onClick:()=>Ae("recent"),children:"Recent Messages (Last 20)"}),p.jsx("button",{className:`hooks-test-multifeed-tab ${Ve==="colored"?"active":""}`,onClick:()=>Ae("colored"),children:"Colored Messages (Last 100)"})]}),Ve==="recent"?p.jsx(I6,{messages:[...ae].reverse(),maxDisplay:20,onMessageClick:qt}):p.jsx(I6,{messages:[...Fe].reverse(),maxDisplay:100,onMessageClick:qt})]}),p.jsx(ake,{data:ie,isOpen:Ee,onClose:rs,title:ke})]})}function oPe(){return p.jsx(n3,{children:p.jsx(sPe,{})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Hb(n){return n+.5|0}const Mc=(n,e,r)=>Math.max(Math.min(n,r),e);function xg(n){return Mc(Hb(n*2.55),0,255)}function qc(n){return Mc(Hb(n*255),0,255)}function Ka(n){return Mc(Hb(n/2.55)/100,0,1)}function N6(n){return Mc(Hb(n*100),0,100)}const Ms={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},lA=[..."0123456789ABCDEF"],aPe=n=>lA[n&15],lPe=n=>lA[(n&240)>>4]+lA[n&15],Ov=n=>(n&240)>>4===(n&15),cPe=n=>Ov(n.r)&&Ov(n.g)&&Ov(n.b)&&Ov(n.a);function uPe(n){var e=n.length,r;return n[0]==="#"&&(e===4||e===5?r={r:255&Ms[n[1]]*17,g:255&Ms[n[2]]*17,b:255&Ms[n[3]]*17,a:e===5?Ms[n[4]]*17:255}:(e===7||e===9)&&(r={r:Ms[n[1]]<<4|Ms[n[2]],g:Ms[n[3]]<<4|Ms[n[4]],b:Ms[n[5]]<<4|Ms[n[6]],a:e===9?Ms[n[7]]<<4|Ms[n[8]]:255})),r}const dPe=(n,e)=>n<255?e(n):"";function hPe(n){var e=cPe(n)?aPe:lPe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+dPe(n.a,e):void 0}const fPe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nne(n,e,r){const i=e*Math.min(r,1-r),s=(o,a=(o+n/30)%12)=>r-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function pPe(n,e,r){const i=(s,o=(s+n/60)%6)=>r-r*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function mPe(n,e,r){const i=Nne(n,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)i[s]*=1-e-r,i[s]+=e;return i}function gPe(n,e,r,i,s){return n===s?(e-r)/i+(e<r?6:0):e===s?(r-n)/i+2:(n-e)/i+4}function $3(n){const r=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(r,i,s),a=Math.min(r,i,s),l=(o+a)/2;let c,u,h;return o!==a&&(h=o-a,u=l>.5?h/(2-o-a):h/(o+a),c=gPe(r,i,s,h,o),c=c*60+.5),[c|0,u||0,l]}function B3(n,e,r,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,r,i)).map(qc)}function z3(n,e,r){return B3(Nne,n,e,r)}function bPe(n,e,r){return B3(mPe,n,e,r)}function yPe(n,e,r){return B3(pPe,n,e,r)}function jne(n){return(n%360+360)%360}function vPe(n){const e=fPe.exec(n);let r=255,i;if(!e)return;e[5]!==i&&(r=e[6]?xg(+e[5]):qc(+e[5]));const s=jne(+e[2]),o=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?i=bPe(s,o,a):e[1]==="hsv"?i=yPe(s,o,a):i=z3(s,o,a),{r:i[0],g:i[1],b:i[2],a:r}}function xPe(n,e){var r=$3(n);r[0]=jne(r[0]+e),r=z3(r),n.r=r[0],n.g=r[1],n.b=r[2]}function wPe(n){if(!n)return;const e=$3(n),r=e[0],i=N6(e[1]),s=N6(e[2]);return n.a<255?`hsla(${r}, ${i}%, ${s}%, ${Ka(n.a)})`:`hsl(${r}, ${i}%, ${s}%)`}const j6={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},L6={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _Pe(){const n={},e=Object.keys(L6),r=Object.keys(j6);let i,s,o,a,l;for(i=0;i<e.length;i++){for(a=l=e[i],s=0;s<r.length;s++)o=r[s],l=l.replace(o,j6[o]);o=parseInt(L6[a],16),n[l]=[o>>16&255,o>>8&255,o&255]}return n}let Iv;function SPe(n){Iv||(Iv=_Pe(),Iv.transparent=[0,0,0,0]);const e=Iv[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const kPe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function CPe(n){const e=kPe.exec(n);let r=255,i,s,o;if(e){if(e[7]!==i){const a=+e[7];r=e[8]?xg(a):Mc(a*255,0,255)}return i=+e[1],s=+e[3],o=+e[5],i=255&(e[2]?xg(i):Mc(i,0,255)),s=255&(e[4]?xg(s):Mc(s,0,255)),o=255&(e[6]?xg(o):Mc(o,0,255)),{r:i,g:s,b:o,a:r}}}function EPe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ka(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const yC=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ah=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function TPe(n,e,r){const i=Ah(Ka(n.r)),s=Ah(Ka(n.g)),o=Ah(Ka(n.b));return{r:qc(yC(i+r*(Ah(Ka(e.r))-i))),g:qc(yC(s+r*(Ah(Ka(e.g))-s))),b:qc(yC(o+r*(Ah(Ka(e.b))-o))),a:n.a+r*(e.a-n.a)}}function Av(n,e,r){if(n){let i=$3(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*r,e===0?360:1)),i=z3(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Lne(n,e){return n&&Object.assign(e||{},n)}function F6(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=qc(n[3]))):(e=Lne(n,{r:0,g:0,b:0,a:1}),e.a=qc(e.a)),e}function PPe(n){return n.charAt(0)==="r"?CPe(n):vPe(n)}class eb{constructor(e){if(e instanceof eb)return e;const r=typeof e;let i;r==="object"?i=F6(e):r==="string"&&(i=uPe(e)||SPe(e)||PPe(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Lne(this._rgb);return e&&(e.a=Ka(e.a)),e}set rgb(e){this._rgb=F6(e)}rgbString(){return this._valid?EPe(this._rgb):void 0}hexString(){return this._valid?hPe(this._rgb):void 0}hslString(){return this._valid?wPe(this._rgb):void 0}mix(e,r){if(e){const i=this.rgb,s=e.rgb;let o;const a=r===o?.5:r,l=2*a-1,c=i.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;o=1-u,i.r=255&u*i.r+o*s.r+.5,i.g=255&u*i.g+o*s.g+.5,i.b=255&u*i.b+o*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(e,r){return e&&(this._rgb=TPe(this._rgb,e._rgb,r)),this}clone(){return new eb(this.rgb)}alpha(e){return this._rgb.a=qc(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Hb(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Av(this._rgb,2,e),this}darken(e){return Av(this._rgb,2,-e),this}saturate(e){return Av(this._rgb,1,e),this}desaturate(e){return Av(this._rgb,1,-e),this}rotate(e){return xPe(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ja(){}const MPe=(()=>{let n=0;return()=>n++})();function On(n){return n==null}function Gn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Yt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Uo(n,e){return Gi(n)?n:e}function Ut(n,e){return typeof n>"u"?e:n}const DPe=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,Fne=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function xn(n,e,r){if(n&&typeof n.call=="function")return n.apply(r,e)}function gn(n,e,r,i){let s,o,a;if(Gn(n))for(o=n.length,s=0;s<o;s++)e.call(r,n[s],s);else if(Yt(n))for(a=Object.keys(n),o=a.length,s=0;s<o;s++)e.call(r,n[a[s]],a[s])}function Gw(n,e){let r,i,s,o;if(!n||!e||n.length!==e.length)return!1;for(r=0,i=n.length;r<i;++r)if(s=n[r],o=e[r],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Kw(n){if(Gn(n))return n.map(Kw);if(Yt(n)){const e=Object.create(null),r=Object.keys(n),i=r.length;let s=0;for(;s<i;++s)e[r[s]]=Kw(n[r[s]]);return e}return n}function $ne(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function OPe(n,e,r,i){if(!$ne(n))return;const s=e[n],o=r[n];Yt(s)&&Yt(o)?tb(s,o,i):e[n]=Kw(o)}function tb(n,e,r){const i=Gn(e)?e:[e],s=i.length;if(!Yt(n))return n;r=r||{};const o=r.merger||OPe;let a;for(let l=0;l<s;++l){if(a=i[l],!Yt(a))continue;const c=Object.keys(a);for(let u=0,h=c.length;u<h;++u)o(c[u],n,a,r)}return n}function Gg(n,e){return tb(n,e,{merger:IPe})}function IPe(n,e,r){if(!$ne(n))return;const i=e[n],s=r[n];Yt(i)&&Yt(s)?Gg(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Kw(s))}const $6={"":n=>n,x:n=>n.x,y:n=>n.y};function APe(n){const e=n.split("."),r=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(r.push(i),i="");return r}function RPe(n){const e=APe(n);return r=>{for(const i of e){if(i==="")break;r=r&&r[i]}return r}}function nb(n,e){return($6[e]||($6[e]=RPe(e)))(n)}function U3(n){return n.charAt(0).toUpperCase()+n.slice(1)}const vs=n=>typeof n<"u",Vi=n=>typeof n=="function",B6=(n,e)=>{if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0};function NPe(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const hn=Math.PI,Xr=2*hn,jPe=Xr+hn,Xw=Number.POSITIVE_INFINITY,W3=hn/180,Qr=hn/2,zs=hn/4,Qw=hn*2/3,Bne=Math.log10,Op=Math.sign;function Kg(n,e,r){return Math.abs(n-e)<r}function z6(n){const e=Math.round(n);n=Kg(n,e,n/1e3)?e:n;const r=Math.pow(10,Math.floor(Bne(n))),i=n/r;return(i<=1?1:i<=2?2:i<=5?5:10)*r}function LPe(n){const e=[],r=Math.sqrt(n);let i;for(i=1;i<r;i++)n%i===0&&(e.push(i),e.push(n/i));return r===(r|0)&&e.push(r),e.sort((s,o)=>s-o).pop(),e}function FPe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Ld(n){return!FPe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $Pe(n,e){const r=Math.round(n);return r-e<=n&&r+e>=n}function BPe(n,e,r){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function jr(n){return n*(hn/180)}function zne(n){return n*(180/hn)}function U6(n){if(!Gi(n))return;let e=1,r=0;for(;Math.round(n*e)/e!==n;)e*=10,r++;return r}function cA(n,e){const r=e.x-n.x,i=e.y-n.y,s=Math.sqrt(r*r+i*i);let o=Math.atan2(i,r);return o<-.5*hn&&(o+=Xr),{angle:o,distance:s}}function Ip(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function zPe(n,e){return(n-e+jPe)%Xr-hn}function oc(n){return(n%Xr+Xr)%Xr}function Jw(n,e,r,i){const s=oc(n),o=oc(e),a=oc(r),l=oc(o-s),c=oc(a-s),u=oc(s-o),h=oc(s-a);return s===o||s===a||i&&o===a||l>c&&u<h}function Vs(n,e,r){return Math.max(e,Math.min(r,n))}function UPe(n){return Vs(n,-32768,32767)}function wg(n,e,r,i=1e-6){return n>=Math.min(e,r)-i&&n<=Math.max(e,r)+i}function q3(n,e,r){r=r||(a=>n[a]<e);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,r(o)?s=o:i=o;return{lo:s,hi:i}}const Ju=(n,e,r,i)=>q3(n,r,i?s=>{const o=n[s][e];return o<r||o===r&&n[s+1][e]===r}:s=>n[s][e]<r),WPe=(n,e,r)=>q3(n,r,i=>n[i][e]>=r);function qPe(n,e,r){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>r;)s--;return i>0||s<n.length?n.slice(i,s):n}const Une=["push","pop","shift","splice","unshift"];function HPe(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Une.forEach(r=>{const i="_onData"+U3(r),s=n[r];Object.defineProperty(n,r,{configurable:!0,enumerable:!1,value(...o){const a=s.apply(this,o);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...o)}),a}})})}function W6(n,e){const r=n._chartjs;if(!r)return;const i=r.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(Une.forEach(o=>{delete n[o]}),delete n._chartjs)}function VPe(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Wne=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function qne(n,e){let r=[],i=!1;return function(...s){r=s,i||(i=!0,Wne.call(window,()=>{i=!1,n.apply(e,r)}))}}function YPe(n,e){let r;return function(...i){return e?(clearTimeout(r),r=setTimeout(n,e,i)):n.apply(this,i),e}}const H3=n=>n==="start"?"left":n==="end"?"right":"center",oi=(n,e,r)=>n==="start"?e:n==="end"?r:(e+r)/2,GPe=(n,e,r,i)=>n===(i?"left":"right")?r:n==="center"?(e+r)/2:e;function KPe(n,e,r){const i=e.length;let s=0,o=i;if(n._sorted){const{iScale:a,vScale:l,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=a.axis,{min:d,max:f,minDefined:m,maxDefined:g}=a.getUserBounds();if(m){if(s=Math.min(Ju(c,h,d).lo,r?i:Ju(e,h,a.getPixelForValue(d)).lo),u){const b=c.slice(0,s+1).reverse().findIndex(y=>!On(y[l.axis]));s-=Math.max(0,b)}s=Vs(s,0,i-1)}if(g){let b=Math.max(Ju(c,a.axis,f,!0).hi+1,r?0:Ju(e,h,a.getPixelForValue(f),!0).hi+1);if(u){const y=c.slice(b-1).findIndex(v=>!On(v[l.axis]));b+=Math.max(0,y)}o=Vs(b,s,i)-s}else o=i-s}return{start:s,count:o}}function XPe(n){const{xScale:e,yScale:r,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==r.min||i.ymax!==r.max;return Object.assign(i,s),o}const Rv=n=>n===0||n===1,q6=(n,e,r)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Xr/r)),H6=(n,e,r)=>Math.pow(2,-10*n)*Math.sin((n-e)*Xr/r)+1,Xg={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Qr)+1,easeOutSine:n=>Math.sin(n*Qr),easeInOutSine:n=>-.5*(Math.cos(hn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Rv(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Rv(n)?n:q6(n,.075,.3),easeOutElastic:n=>Rv(n)?n:H6(n,.075,.3),easeInOutElastic(n){return Rv(n)?n:n<.5?.5*q6(n*2,.1125,.45):.5+.5*H6(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Xg.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Xg.easeInBounce(n*2)*.5:Xg.easeOutBounce(n*2-1)*.5+.5};function V3(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function V6(n){return V3(n)?n:new eb(n)}function vC(n){return V3(n)?n:new eb(n).saturate(.5).darken(.1).hexString()}const QPe=["x","y","borderWidth","radius","tension"],JPe=["color","borderColor","backgroundColor"];function ZPe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:JPe},numbers:{type:"number",properties:QPe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function eMe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Y6=new Map;function tMe(n,e){e=e||{};const r=n+JSON.stringify(e);let i=Y6.get(r);return i||(i=new Intl.NumberFormat(n,e),Y6.set(r,i)),i}function Y3(n,e,r){return tMe(e,r).format(n)}const nMe={values(n){return Gn(n)?n:""+n},numeric(n,e,r){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(r.length>1){const u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),o=rMe(n,r)}const a=Bne(Math.abs(o)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Y3(n,i,c)}};function rMe(n,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&n!==Math.floor(n)&&(r=n-Math.floor(n)),r}var Hne={formatters:nMe};function iMe(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Hne.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fd=Object.create(null),uA=Object.create(null);function Qg(n,e){if(!e)return n;const r=e.split(".");for(let i=0,s=r.length;i<s;++i){const o=r[i];n=n[o]||(n[o]=Object.create(null))}return n}function xC(n,e,r){return typeof e=="string"?tb(Qg(n,e),r):tb(Qg(n,""),e)}class sMe{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>vC(s.backgroundColor),this.hoverBorderColor=(i,s)=>vC(s.borderColor),this.hoverColor=(i,s)=>vC(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return xC(this,e,r)}get(e){return Qg(this,e)}describe(e,r){return xC(uA,e,r)}override(e,r){return xC(Fd,e,r)}route(e,r,i,s){const o=Qg(this,e),a=Qg(this,i),l="_"+r;Object.defineProperties(o,{[l]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],u=a[s];return Yt(c)?Object.assign({},u,c):Ut(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var rr=new sMe({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ZPe,eMe,iMe]);function oMe(n){return!n||On(n.size)||On(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function G6(n,e,r,i,s){let o=e[s];return o||(o=e[s]=n.measureText(s).width,r.push(s)),o>i&&(i=o),i}function Tu(n,e,r){const i=n.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*i)/i+s}function K6(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function dA(n,e,r,i){Vne(n,e,r,i,null)}function Vne(n,e,r,i,s){let o,a,l,c,u,h,d,f;const m=e.pointStyle,g=e.rotation,b=e.radius;let y=(g||0)*W3;if(m&&typeof m=="object"&&(o=m.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(r,i),n.rotate(y),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),m){default:s?n.ellipse(r,i,s/2,b,0,0,Xr):n.arc(r,i,b,0,Xr),n.closePath();break;case"triangle":h=s?s/2:b,n.moveTo(r+Math.sin(y)*h,i-Math.cos(y)*b),y+=Qw,n.lineTo(r+Math.sin(y)*h,i-Math.cos(y)*b),y+=Qw,n.lineTo(r+Math.sin(y)*h,i-Math.cos(y)*b),n.closePath();break;case"rectRounded":u=b*.516,c=b-u,a=Math.cos(y+zs)*c,d=Math.cos(y+zs)*(s?s/2-u:c),l=Math.sin(y+zs)*c,f=Math.sin(y+zs)*(s?s/2-u:c),n.arc(r-d,i-l,u,y-hn,y-Qr),n.arc(r+f,i-a,u,y-Qr,y),n.arc(r+d,i+l,u,y,y+Qr),n.arc(r-f,i+a,u,y+Qr,y+hn),n.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*b,h=s?s/2:c,n.rect(r-h,i-c,2*h,2*c);break}y+=zs;case"rectRot":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+f,i-a),n.lineTo(r+d,i+l),n.lineTo(r-f,i+a),n.closePath();break;case"crossRot":y+=zs;case"cross":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a);break;case"star":d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a),y+=zs,d=Math.cos(y)*(s?s/2:b),a=Math.cos(y)*b,l=Math.sin(y)*b,f=Math.sin(y)*(s?s/2:b),n.moveTo(r-d,i-l),n.lineTo(r+d,i+l),n.moveTo(r+f,i-a),n.lineTo(r-f,i+a);break;case"line":a=s?s/2:Math.cos(y)*b,l=Math.sin(y)*b,n.moveTo(r-a,i-l),n.lineTo(r+a,i+l);break;case"dash":n.moveTo(r,i),n.lineTo(r+Math.cos(y)*(s?s/2:b),i+Math.sin(y)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function rb(n,e,r){return r=r||.5,!e||n&&n.x>e.left-r&&n.x<e.right+r&&n.y>e.top-r&&n.y<e.bottom+r}function M_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function D_(n){n.restore()}function aMe(n,e,r,i,s){if(!e)return n.lineTo(r.x,r.y);if(s==="middle"){const o=(e.x+r.x)/2;n.lineTo(o,e.y),n.lineTo(o,r.y)}else s==="after"!=!!i?n.lineTo(e.x,r.y):n.lineTo(r.x,e.y);n.lineTo(r.x,r.y)}function lMe(n,e,r,i){if(!e)return n.lineTo(r.x,r.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?r.cp2x:r.cp1x,i?r.cp2y:r.cp1y,r.x,r.y)}function cMe(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),On(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function uMe(n,e,r,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),a=e-o.actualBoundingBoxLeft,l=e+o.actualBoundingBoxRight,c=r-o.actualBoundingBoxAscent,u=r+o.actualBoundingBoxDescent,h=s.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,h),n.lineTo(l,h),n.stroke()}}function dMe(n,e){const r=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=r}function ib(n,e,r,i,s,o={}){const a=Gn(e)?e:[e],l=o.strokeWidth>0&&o.strokeColor!=="";let c,u;for(n.save(),n.font=s.string,cMe(n,o),c=0;c<a.length;++c)u=a[c],o.backdrop&&dMe(n,o.backdrop),l&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),On(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(u,r,i,o.maxWidth)),n.fillText(u,r,i,o.maxWidth),uMe(n,r,i,u,o),i+=Number(s.lineHeight);n.restore()}function Zw(n,e){const{x:r,y:i,w:s,h:o,radius:a}=e;n.arc(r+a.topLeft,i+a.topLeft,a.topLeft,1.5*hn,hn,!0),n.lineTo(r,i+o-a.bottomLeft),n.arc(r+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,hn,Qr,!0),n.lineTo(r+s-a.bottomRight,i+o),n.arc(r+s-a.bottomRight,i+o-a.bottomRight,a.bottomRight,Qr,0,!0),n.lineTo(r+s,i+a.topRight),n.arc(r+s-a.topRight,i+a.topRight,a.topRight,0,-Qr,!0),n.lineTo(r+a.topLeft,i)}const hMe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fMe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function pMe(n,e){const r=(""+n).match(hMe);if(!r||r[1]==="normal")return e*1.2;switch(n=+r[2],r[3]){case"px":return n;case"%":n/=100;break}return e*n}const mMe=n=>+n||0;function Yne(n,e){const r={},i=Yt(e),s=i?Object.keys(e):e,o=Yt(n)?i?a=>Ut(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of s)r[a]=mMe(o(a));return r}function gMe(n){return Yne(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ef(n){return Yne(n,["topLeft","topRight","bottomLeft","bottomRight"])}function di(n){const e=gMe(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Tr(n,e){n=n||{},e=e||rr.font;let r=Ut(n.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let i=Ut(n.style,e.style);i&&!(""+i).match(fMe)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ut(n.family,e.family),lineHeight:pMe(Ut(n.lineHeight,e.lineHeight),r),size:r,style:i,weight:Ut(n.weight,e.weight),string:""};return s.string=oMe(s),s}function Nv(n,e,r,i){let s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function bMe(n,e,r){const{min:i,max:s}=n,o=Fne(e,(s-i)/2),a=(l,c)=>r&&l===0?0:l+c;return{min:a(i,-Math.abs(o)),max:a(s,o)}}function eh(n,e){return Object.assign(Object.create(n),e)}function G3(n,e=[""],r,i,s=()=>n[0]){const o=r||n;typeof i>"u"&&(i=Qne("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:l=>G3([l,...n],e,o,i)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete n[0][c],!0},get(l,c){return Kne(l,c,()=>CMe(c,e,n,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,c){return Q6(l).includes(c)},ownKeys(l){return Q6(l)},set(l,c,u){const h=l._storage||(l._storage=s());return l[c]=h[c]=u,delete l._keys,!0}})}function Ap(n,e,r,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:r,_stack:new Set,_descriptors:Gne(n,i),setContext:o=>Ap(n,o,r,i),override:o=>Ap(n.override(o),e,r,i)};return new Proxy(s,{deleteProperty(o,a){return delete o[a],delete n[a],!0},get(o,a,l){return Kne(o,a,()=>vMe(o,a,l))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(o,a,l){return n[a]=l,delete o[a],!0}})}function Gne(n,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:r,indexable:i,isScriptable:Vi(r)?r:()=>r,isIndexable:Vi(i)?i:()=>i}}const yMe=(n,e)=>n?n+U3(e):e,K3=(n,e)=>Yt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Kne(n,e,r){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=r();return n[e]=i,i}function vMe(n,e,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;let l=i[e];return Vi(l)&&a.isScriptable(e)&&(l=xMe(e,l,n,r)),Gn(l)&&l.length&&(l=wMe(e,l,n,a.isIndexable)),K3(e,l)&&(l=Ap(l,s,o&&o[e],a)),l}function xMe(n,e,r,i){const{_proxy:s,_context:o,_subProxy:a,_stack:l}=r;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let c=e(o,a||i);return l.delete(n),K3(n,c)&&(c=X3(s._scopes,s,n,c)),c}function wMe(n,e,r,i){const{_proxy:s,_context:o,_subProxy:a,_descriptors:l}=r;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Yt(e[0])){const c=e,u=s._scopes.filter(h=>h!==c);e=[];for(const h of c){const d=X3(u,s,n,h);e.push(Ap(d,o,a&&a[n],l))}}return e}function Xne(n,e,r){return Vi(n)?n(e,r):n}const _Me=(n,e)=>n===!0?e:typeof n=="string"?nb(e,n):void 0;function SMe(n,e,r,i,s){for(const o of e){const a=_Me(r,o);if(a){n.add(a);const l=Xne(a._fallback,r,s);if(typeof l<"u"&&l!==r&&l!==i)return l}else if(a===!1&&typeof i<"u"&&r!==i)return null}return!1}function X3(n,e,r,i){const s=e._rootScopes,o=Xne(e._fallback,r,i),a=[...n,...s],l=new Set;l.add(i);let c=X6(l,a,r,o||r,i);return c===null||typeof o<"u"&&o!==r&&(c=X6(l,a,o,c,i),c===null)?!1:G3(Array.from(l),[""],s,o,()=>kMe(e,r,i))}function X6(n,e,r,i,s){for(;r;)r=SMe(n,e,r,i,s);return r}function kMe(n,e,r){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Gn(s)&&Yt(r)?r:s||{}}function CMe(n,e,r,i){let s;for(const o of e)if(s=Qne(yMe(o,n),r),typeof s<"u")return K3(n,s)?X3(r,i,n,s):s}function Qne(n,e){for(const r of e){if(!r)continue;const i=r[n];if(typeof i<"u")return i}}function Q6(n){let e=n._keys;return e||(e=n._keys=EMe(n._scopes)),e}function EMe(n){const e=new Set;for(const r of n)for(const i of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const TMe=Number.EPSILON||1e-14,Rp=(n,e)=>e<n.length&&!n[e].skip&&n[e],Jne=n=>n==="x"?"y":"x";function PMe(n,e,r,i){const s=n.skip?e:n,o=e,a=r.skip?e:r,l=Ip(o,s),c=Ip(a,o);let u=l/(l+c),h=c/(l+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:o.x-d*(a.x-s.x),y:o.y-d*(a.y-s.y)},next:{x:o.x+f*(a.x-s.x),y:o.y+f*(a.y-s.y)}}}function MMe(n,e,r){const i=n.length;let s,o,a,l,c,u=Rp(n,0);for(let h=0;h<i-1;++h)if(c=u,u=Rp(n,h+1),!(!c||!u)){if(Kg(e[h],0,TMe)){r[h]=r[h+1]=0;continue}s=r[h]/e[h],o=r[h+1]/e[h],l=Math.pow(s,2)+Math.pow(o,2),!(l<=9)&&(a=3/Math.sqrt(l),r[h]=s*a*e[h],r[h+1]=o*a*e[h])}}function DMe(n,e,r="x"){const i=Jne(r),s=n.length;let o,a,l,c=Rp(n,0);for(let u=0;u<s;++u){if(a=l,l=c,c=Rp(n,u+1),!l)continue;const h=l[r],d=l[i];a&&(o=(h-a[r])/3,l[`cp1${r}`]=h-o,l[`cp1${i}`]=d-o*e[u]),c&&(o=(c[r]-h)/3,l[`cp2${r}`]=h+o,l[`cp2${i}`]=d+o*e[u])}}function OMe(n,e="x"){const r=Jne(e),i=n.length,s=Array(i).fill(0),o=Array(i);let a,l,c,u=Rp(n,0);for(a=0;a<i;++a)if(l=c,c=u,u=Rp(n,a+1),!!c){if(u){const h=u[e]-c[e];s[a]=h!==0?(u[r]-c[r])/h:0}o[a]=l?u?Op(s[a-1])!==Op(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}MMe(n,s,o),DMe(n,o,e)}function jv(n,e,r){return Math.max(Math.min(n,r),e)}function IMe(n,e){let r,i,s,o,a,l=rb(n[0],e);for(r=0,i=n.length;r<i;++r)a=o,o=l,l=r<i-1&&rb(n[r+1],e),o&&(s=n[r],a&&(s.cp1x=jv(s.cp1x,e.left,e.right),s.cp1y=jv(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=jv(s.cp2x,e.left,e.right),s.cp2y=jv(s.cp2y,e.top,e.bottom)))}function AMe(n,e,r,i,s){let o,a,l,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")OMe(n,s);else{let u=i?n[n.length-1]:n[0];for(o=0,a=n.length;o<a;++o)l=n[o],c=PMe(u,l,n[Math.min(o+1,a-(i?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&IMe(n,r)}function Q3(){return typeof window<"u"&&typeof document<"u"}function J3(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function e1(n,e,r){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[r])):i=n,i}const O_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function RMe(n,e){return O_(n).getPropertyValue(e)}const NMe=["top","right","bottom","left"];function yd(n,e,r){const i={};r=r?"-"+r:"";for(let s=0;s<4;s++){const o=NMe[s];i[o]=parseFloat(n[e+"-"+o+r])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const jMe=(n,e,r)=>(n>0||e>0)&&(!r||!r.shadowRoot);function LMe(n,e){const r=n.touches,i=r&&r.length?r[0]:n,{offsetX:s,offsetY:o}=i;let a=!1,l,c;if(jMe(s,o,n.target))l=s,c=o;else{const u=e.getBoundingClientRect();l=i.clientX-u.left,c=i.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Lu(n,e){if("native"in n)return n;const{canvas:r,currentDevicePixelRatio:i}=e,s=O_(r),o=s.boxSizing==="border-box",a=yd(s,"padding"),l=yd(s,"border","width"),{x:c,y:u,box:h}=LMe(n,r),d=a.left+(h&&l.left),f=a.top+(h&&l.top);let{width:m,height:g}=e;return o&&(m-=a.width+l.width,g-=a.height+l.height),{x:Math.round((c-d)/m*r.width/i),y:Math.round((u-f)/g*r.height/i)}}function FMe(n,e,r){let i,s;if(e===void 0||r===void 0){const o=n&&J3(n);if(!o)e=n.clientWidth,r=n.clientHeight;else{const a=o.getBoundingClientRect(),l=O_(o),c=yd(l,"border","width"),u=yd(l,"padding");e=a.width-u.width-c.width,r=a.height-u.height-c.height,i=e1(l.maxWidth,o,"clientWidth"),s=e1(l.maxHeight,o,"clientHeight")}}return{width:e,height:r,maxWidth:i||Xw,maxHeight:s||Xw}}const Dc=n=>Math.round(n*10)/10;function $Me(n,e,r,i){const s=O_(n),o=yd(s,"margin"),a=e1(s.maxWidth,n,"clientWidth")||Xw,l=e1(s.maxHeight,n,"clientHeight")||Xw,c=FMe(n,e,r);let{width:u,height:h}=c;if(s.boxSizing==="content-box"){const f=yd(s,"border","width"),m=yd(s,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-o.width),h=Math.max(0,i?u/i:h-o.height),u=Dc(Math.min(u,a,c.maxWidth)),h=Dc(Math.min(h,l,c.maxHeight)),u&&!h&&(h=Dc(u/2)),(e!==void 0||r!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,u=Dc(Math.floor(h*i))),{width:u,height:h}}function J6(n,e,r){const i=e||1,s=Dc(n.height*i),o=Dc(n.width*i);n.height=Dc(n.height),n.width=Dc(n.width);const a=n.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==s||a.width!==o?(n.currentDevicePixelRatio=i,a.height=s,a.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const BMe=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Q3()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Z6(n,e){const r=RMe(n,e),i=r&&r.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Fu(n,e,r,i){return{x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)}}function zMe(n,e,r,i){return{x:n.x+r*(e.x-n.x),y:i==="middle"?r<.5?n.y:e.y:i==="after"?r<1?n.y:e.y:r>0?e.y:n.y}}function UMe(n,e,r,i){const s={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},a=Fu(n,s,r),l=Fu(s,o,r),c=Fu(o,e,r),u=Fu(a,l,r),h=Fu(l,c,r);return Fu(u,h,r)}const WMe=function(n,e){return{x(r){return n+n+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,i){return r-i},leftForLtr(r,i){return r-i}}},qMe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Tf(n,e,r){return n?WMe(e,r):qMe()}function Zne(n,e){let r,i;(e==="ltr"||e==="rtl")&&(r=n.canvas.style,i=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),n.prevTextDirection=i)}function ere(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function tre(n){return n==="angle"?{between:Jw,compare:zPe,normalize:oc}:{between:wg,compare:(e,r)=>e-r,normalize:e=>e}}function e$({start:n,end:e,count:r,loop:i,style:s}){return{start:n%r,end:e%r,loop:i&&(e-n+1)%r===0,style:s}}function HMe(n,e,r){const{property:i,start:s,end:o}=r,{between:a,normalize:l}=tre(i),c=e.length;let{start:u,end:h,loop:d}=n,f,m;if(d){for(u+=c,h+=c,f=0,m=c;f<m&&a(l(e[u%c][i]),s,o);++f)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:d,style:n.style}}function VMe(n,e,r){if(!r)return[n];const{property:i,start:s,end:o}=r,a=e.length,{compare:l,between:c,normalize:u}=tre(i),{start:h,end:d,loop:f,style:m}=HMe(n,e,r),g=[];let b=!1,y=null,v,w,k;const S=()=>c(s,k,v)&&l(s,k)!==0,_=()=>l(o,v)===0||c(o,k,v),C=()=>b||S(),P=()=>!b||_();for(let T=h,O=h;T<=d;++T)w=e[T%a],!w.skip&&(v=u(w[i]),v!==k&&(b=c(v,s,o),y===null&&C()&&(y=l(v,s)===0?T:O),y!==null&&P()&&(g.push(e$({start:y,end:T,loop:f,count:a,style:m})),y=null),O=T,k=v));return y!==null&&g.push(e$({start:y,end:d,loop:f,count:a,style:m})),g}function YMe(n,e){const r=[],i=n.segments;for(let s=0;s<i.length;s++){const o=VMe(i[s],n.points,e);o.length&&r.push(...o)}return r}function GMe(n,e,r,i){let s=0,o=e-1;if(r&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,r&&(o+=s);o>s&&n[o%e].skip;)o--;return o%=e,{start:s,end:o}}function KMe(n,e,r,i){const s=n.length,o=[];let a=e,l=n[e],c;for(c=e+1;c<=r;++c){const u=n[c%s];u.skip||u.stop?l.skip||(i=!1,o.push({start:e%s,end:(c-1)%s,loop:i}),e=a=u.stop?c:null):(a=c,l.skip&&(e=c)),l=u}return a!==null&&o.push({start:e%s,end:a%s,loop:i}),o}function XMe(n,e){const r=n.points,i=n.options.spanGaps,s=r.length;if(!s)return[];const o=!!n._loop,{start:a,end:l}=GMe(r,s,o,i);if(i===!0)return t$(n,[{start:a,end:l,loop:o}],r,e);const c=l<a?l+s:l,u=!!n._fullLoop&&a===0&&l===s-1;return t$(n,KMe(r,a,c,u),r,e)}function t$(n,e,r,i){return!i||!i.setContext||!r?e:QMe(n,e,r,i)}function QMe(n,e,r,i){const s=n._chart.getContext(),o=n$(n.options),{_datasetIndex:a,options:{spanGaps:l}}=n,c=r.length,u=[];let h=o,d=e[0].start,f=d;function m(g,b,y,v){const w=l?-1:1;if(g!==b){for(g+=c;r[g%c].skip;)g-=w;for(;r[b%c].skip;)b+=w;g%c!==b%c&&(u.push({start:g%c,end:b%c,loop:y,style:v}),h=v,d=b%c)}}for(const g of e){d=l?d:g.start;let b=r[d%c],y;for(f=d+1;f<=g.end;f++){const v=r[f%c];y=n$(i.setContext(eh(s,{type:"segment",p0:b,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),JMe(y,h)&&m(d,f-1,g.loop,h),b=v,h=y}d<f-1&&m(d,f-1,g.loop,h)}return u}function n$(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function JMe(n,e){if(!e)return!1;const r=[],i=function(s,o){return V3(o)?(r.includes(o)||r.push(o),r.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Lv(n,e,r){return n.options.clip?n[r]:e[r]}function ZMe(n,e){const{xScale:r,yScale:i}=n;return r&&i?{left:Lv(r,e,"left"),right:Lv(r,e,"right"),top:Lv(i,e,"top"),bottom:Lv(i,e,"bottom")}:e}function eDe(n,e){const r=e._clip;if(r.disabled)return!1;const i=ZMe(e,n.chartArea);return{left:r.left===!1?0:i.left-(r.left===!0?0:r.left),right:r.right===!1?n.width:i.right+(r.right===!0?0:r.right),top:r.top===!1?0:i.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?n.height:i.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class tDe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,i,s){const o=r.listeners[s],a=r.duration;o.forEach(l=>l({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(i-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Wne.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let a=o.length-1,l=!1,c;for(;a>=0;--a)c=o[a],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(o[a]=o[o.length-1],o.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),o.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),r+=o.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let i=r.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,i)),i}listen(e,r,i){this._getAnims(e).listeners[r].push(i)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const i=r.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ua=new tDe;const r$="transparent",nDe={boolean(n,e,r){return r>.5?e:n},color(n,e,r){const i=V6(n||r$),s=i.valid&&V6(e||r$);return s&&s.valid?s.mix(i,r).hexString():e},number(n,e,r){return n+(e-n)*r}};class rDe{constructor(e,r,i,s){const o=r[i];s=Nv([e.to,s,o,e.from]);const a=Nv([e.from,o,s]);this._active=!0,this._fn=e.fn||nDe[e.type||typeof a],this._easing=Xg[e.easing]||Xg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,a=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Nv([e.to,r,s,e.from]),this._from=Nv([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,i=this._duration,s=this._prop,o=this._from,a=this._loop,l=this._to;let c;if(this._active=o!==l&&(a||r<i),!this._active){this._target[s]=l,this._notify(!0);return}if(r<0){this._target[s]=o;return}c=r/i%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(o,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,i)=>{e.push({res:r,rej:i})})}_notify(e){const r=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][r]()}}class Z3{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Yt(e))return;const r=Object.keys(rr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!Yt(o))return;const a={};for(const l of r)a[l]=o[l];(Gn(o.properties)&&o.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,a)})})}_animateOptions(e,r){const i=r.options,s=sDe(e,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&iDe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,r){const i=this._properties,s=[],o=e.$animations||(e.$animations={}),a=Object.keys(r),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,r));continue}const h=r[u];let d=o[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,l);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}o[u]=d=new rDe(f,e,u,h),s.push(d)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const i=this._createAnimations(e,r);if(i.length)return Ua.add(this._chart,i),!0}}function iDe(n,e){const r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}function sDe(n,e){if(!e)return;let r=n.options;if(!r){n.options=e;return}return r.$shared&&(n.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function i$(n,e){const r=n&&n.options||{},i=r.reverse,s=r.min===void 0?e:0,o=r.max===void 0?e:0;return{start:i?o:s,end:i?s:o}}function oDe(n,e,r){if(r===!1)return!1;const i=i$(n,r),s=i$(e,r);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function aDe(n){let e,r,i,s;return Yt(n)?(e=n.top,r=n.right,i=n.bottom,s=n.left):e=r=i=s=n,{top:e,right:r,bottom:i,left:s,disabled:n===!1}}function nre(n,e){const r=[],i=n._getSortedDatasetMetas(e);let s,o;for(s=0,o=i.length;s<o;++s)r.push(i[s].index);return r}function s$(n,e,r,i={}){const s=n.keys,o=i.mode==="single";let a,l,c,u;if(e===null)return;let h=!1;for(a=0,l=s.length;a<l;++a){if(c=+s[a],c===r){if(h=!0,i.all)continue;break}u=n.values[c],Gi(u)&&(o||e===0||Op(e)===Op(u))&&(e+=u)}return!h&&!i.all?0:e}function lDe(n,e){const{iScale:r,vScale:i}=e,s=r.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",a=Object.keys(n),l=new Array(a.length);let c,u,h;for(c=0,u=a.length;c<u;++c)h=a[c],l[c]={[s]:h,[o]:n[h]};return l}function wC(n,e){const r=n&&n.options.stacked;return r||r===void 0&&e.stack!==void 0}function cDe(n,e,r){return`${n.id}.${e.id}.${r.stack||r.type}`}function uDe(n){const{min:e,max:r,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function dDe(n,e,r){const i=n[e]||(n[e]={});return i[r]||(i[r]={})}function o$(n,e,r,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(r&&o>0||!r&&o<0)return s.index}return null}function a$(n,e){const{chart:r,_cachedMeta:i}=n,s=r._stacks||(r._stacks={}),{iScale:o,vScale:a,index:l}=i,c=o.axis,u=a.axis,h=cDe(o,a,i),d=e.length;let f;for(let m=0;m<d;++m){const g=e[m],{[c]:b,[u]:y}=g,v=g._stacks||(g._stacks={});f=v[u]=dDe(s,h,b),f[l]=y,f._top=o$(f,a,!0,i.type),f._bottom=o$(f,a,!1,i.type);const w=f._visualValues||(f._visualValues={});w[l]=y}}function _C(n,e){const r=n.scales;return Object.keys(r).filter(i=>r[i].axis===e).shift()}function hDe(n,e){return eh(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function fDe(n,e,r){return eh(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Hm(n,e){const r=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const o=s._stacks;if(!o||o[i]===void 0||o[i][r]===void 0)return;delete o[i][r],o[i]._visualValues!==void 0&&o[i]._visualValues[r]!==void 0&&delete o[i]._visualValues[r]}}}const SC=n=>n==="reset"||n==="none",l$=(n,e)=>e?n:Object.assign({},n),pDe=(n,e,r)=>n&&!e.hidden&&e._stacked&&{keys:nre(r,!0),values:null};class Pf{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=wC(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Hm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(d,f,m,g)=>d==="x"?f:d==="r"?g:m,o=r.xAxisID=Ut(i.xAxisID,_C(e,"x")),a=r.yAxisID=Ut(i.yAxisID,_C(e,"y")),l=r.rAxisID=Ut(i.rAxisID,_C(e,"r")),c=r.indexAxis,u=r.iAxisID=s(c,o,a,l),h=r.vAxisID=s(c,a,o,l);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&W6(this._data,this),e._stacked&&Hm(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),i=this._data;if(Yt(r)){const s=this._cachedMeta;this._data=lDe(r,s)}else if(i!==r){if(i){W6(i,this);const s=this._cachedMeta;Hm(s),s._parsed=[]}r&&Object.isExtensible(r)&&HPe(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=wC(r.vScale,r),r.stack!==i.stack&&(s=!0,Hm(r),r.stack=i.stack),this._resyncElements(e),(s||o!==r._stacked)&&(a$(this,r._parsed),r._stacked=wC(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,l=o.axis;let c=e===0&&r===s.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Gn(s[e])?f=this.parseArrayData(i,s,e,r):Yt(s[e])?f=this.parseObjectData(i,s,e,r):f=this.parsePrimitiveData(i,s,e,r);const m=()=>d[l]===null||u&&d[l]<u[l];for(h=0;h<r;++h)i._parsed[h+e]=d=f[h],c&&(m()&&(c=!1),u=d);i._sorted=c}a&&a$(this,f)}parsePrimitiveData(e,r,i,s){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),h=o===a,d=new Array(s);let f,m,g;for(f=0,m=s;f<m;++f)g=f+i,d[f]={[l]:h||o.parse(u[g],g),[c]:a.parse(r[g],g)};return d}parseArrayData(e,r,i,s){const{xScale:o,yScale:a}=e,l=new Array(s);let c,u,h,d;for(c=0,u=s;c<u;++c)h=c+i,d=r[h],l[c]={x:o.parse(d[0],h),y:a.parse(d[1],h)};return l}parseObjectData(e,r,i,s){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let h,d,f,m;for(h=0,d=s;h<d;++h)f=h+i,m=r[f],u[h]={x:o.parse(nb(m,l),f),y:a.parse(nb(m,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,i){const s=this.chart,o=this._cachedMeta,a=r[e.axis],l={keys:nre(s,!0),values:r._stacks[e.axis]._visualValues};return s$(l,a,o.index,{mode:i})}updateRangeFromParsed(e,r,i,s){const o=i[r.axis];let a=o===null?NaN:o;const l=s&&i._stacks[r.axis];s&&l&&(s.values=l,a=s$(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&e===i.iScale,a=s.length,l=this._getOtherScale(e),c=pDe(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=uDe(l);let f,m;function g(){m=s[f];const b=m[l.axis];return!Gi(m[e.axis])||h>b||d<b}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,e,m,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,e,m,c);break}}return u}getAllParsedValues(e){const r=this._cachedMeta._parsed,i=[];let s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][e.axis],Gi(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=aDe(Ut(this.options.clip,oDe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,o,l,c),h=l;h<l+c;++h){const d=s[h];d.hidden||(d.active&&u?a.push(d):d.draw(e,o))}for(h=0;h<a.length;++h)a[h].draw(e,o)}getStyle(e,r){const i=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,r,i){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=fDe(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=hDe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",i){const s=r==="active",o=this._cachedDataOpts,a=e+"-"+r,l=o[a],c=this.enableOptionSharing&&vs(i);if(l)return l$(l,c);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(rr.elements[e]),g=()=>this.getContext(i,s,r),b=u.resolveNamedOptions(f,m,g,d);return b.$shared&&(b.$shared=c,o[a]=Object.freeze(l$(b,c))),b}_resolveAnimations(e,r,i){const s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,r),f=h.getOptionScopes(this.getDataset(),d);c=h.createResolver(f,this.getContext(e,i,r))}const u=new Z3(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||SC(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const i=this.resolveDataElementOptions(e,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(e,r,i,s){SC(s)?Object.assign(e,i):this._resolveAnimations(r,s).update(e,i)}updateSharedOptions(e,r,i){e&&!SC(r)&&this._resolveAnimations(void 0,r).update(e,i)}_setStyle(e,r,i,s){e.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,r,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,i=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,r,i=!0){const s=this._cachedMeta,o=s.data,a=e+r;let l;const c=u=>{for(u.length+=r,l=u.length-1;l>=a;l--)u[l]=u[l-r]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),i&&this.updateElements(o,e,r,"reset")}updateElements(e,r,i,s){}_removeElements(e,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,r);i._stacked&&Hm(i,s)}i.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,i,s]=e;this[r](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Be(Pf,"defaults",{}),Be(Pf,"datasetElementType",null),Be(Pf,"dataElementType",null);function mDe(n,e,r){let i=1,s=1,o=0,a=0;if(e<Xr){const l=n,c=l+e,u=Math.cos(l),h=Math.sin(l),d=Math.cos(c),f=Math.sin(c),m=(k,S,_)=>Jw(k,l,c,!0)?1:Math.max(S,S*r,_,_*r),g=(k,S,_)=>Jw(k,l,c,!0)?-1:Math.min(S,S*r,_,_*r),b=m(0,u,d),y=m(Qr,h,f),v=g(hn,u,d),w=g(hn+Qr,h,f);i=(b-v)/2,s=(y-w)/2,o=-(b+v)/2,a=-(y+w)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:a}}class _g extends Pf{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=c=>+i[c];if(Yt(i[e])){const{key:c="value"}=this._parsing;o=u=>+nb(i[u],c)}let a,l;for(a=e,l=e+r;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return jr(this.options.rotation-90)}_getCircumference(){return jr(this.options.circumference)}_getRotationExtents(){let e=Xr,r=-Xr;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),r=Math.max(r,o+a)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-a)/2,0),c=Math.min(DPe(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:g,offsetY:b}=mDe(d,h,c),y=(i.width-a)/f,v=(i.height-a)/m,w=Math.max(Math.min(y,v)/2,0),k=Fne(this.options.radius,w),S=Math.max(k*c,0),_=(k-S)/this._getVisibleDatasetWeightTotal();this.offsetX=g*k,this.offsetY=b*k,s.total=this.calculateTotal(),this.outerRadius=k-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/Xr)}updateElements(e,r,i,s){const o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,h=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=o&&u.animateScale,m=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:b,includeOptions:y}=this._getSharedOptions(r,s);let v=this._getRotation(),w;for(w=0;w<r;++w)v+=this._circumference(w,o);for(w=r;w<r+i;++w){const k=this._circumference(w,o),S=e[w],_={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+k,circumference:k,outerRadius:g,innerRadius:m};y&&(_.options=b||this.resolveDataElementOptions(w,S.active?"active":s)),v+=k,this.updateElement(S,w,_,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let i=0,s;for(s=0;s<r.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?Xr*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=Y3(r._parsed[e],i.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let r=0;const i=this.chart;let s,o,a,l,c;if(!e){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let i=0,s=e.length;i<s;++i){const o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(e){return Math.max(Ut(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Be(_g,"id","doughnut"),Be(_g,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Be(_g,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Be(_g,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data,{labels:{pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:l}}=e.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((c,u)=>{const d=e.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:d.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(u),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:i,borderRadius:a&&(l||d.borderRadius),index:u}}):[]}},onClick(e,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}});class Ax extends Pf{getLabelAndValue(e){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:i[e]||"",value:"("+l+", "+c+")"}}update(e){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:a}=KPe(r,i,s);if(this._drawStart=o,this._drawCount=a,XPe(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=r;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,i,s){const o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,s),d=this.getSharedOptions(h),f=this.includeOptions(s,d),m=a.axis,g=l.axis,{spanGaps:b,segment:y}=this.options,v=Ld(b)?b:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none";let k=r>0&&this.getParsed(r-1);for(let S=r;S<r+i;++S){const _=e[S],C=this.getParsed(S),P=w?_:{},T=On(C[g]),O=P[m]=a.getPixelForValue(C[m],S),D=P[g]=o||T?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[g],S);P.skip=isNaN(O)||isNaN(D)||T,P.stop=S>0&&Math.abs(C[m]-k[m])>v,y&&(P.parsed=C,P.raw=u.data[S]),f&&(P.options=d||this.resolveDataElementOptions(S,_.active?"active":s)),w||this.updateElement(_,S,P,s),k=C}this.updateSharedOptions(d,s,h)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let l=0;for(let c=r.length-1;c>=0;--c)l=Math.max(l,r[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}Be(Ax,"id","scatter"),Be(Ax,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Be(Ax,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Pu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class e5{constructor(e){Be(this,"options");this.options=e||{}}static override(e){Object.assign(e5.prototype,e)}init(){}formats(){return Pu()}parse(){return Pu()}format(){return Pu()}add(){return Pu()}diff(){return Pu()}startOf(){return Pu()}endOf(){return Pu()}}var gDe={_date:e5};function bDe(n,e,r,i){const{controller:s,data:o,_sorted:a}=n,l=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&o.length){const u=l._reversePixels?WPe:Ju;if(i){if(s._sharedOptions){const h=o[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(o,e,r-d),m=u(o,e,r+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(o,e,r);if(c){const{vScale:d}=s._cachedMeta,{_parsed:f}=n,m=f.slice(0,h.lo+1).reverse().findIndex(b=>!On(b[d.axis]));h.lo-=Math.max(0,m);const g=f.slice(h.hi).findIndex(b=>!On(b[d.axis]));h.hi+=Math.max(0,g)}return h}}return{lo:0,hi:o.length-1}}function I_(n,e,r,i,s){const o=n.getSortedVisibleDatasetMetas(),a=r[e];for(let l=0,c=o.length;l<c;++l){const{index:u,data:h}=o[l],{lo:d,hi:f}=bDe(o[l],e,a,s);for(let m=d;m<=f;++m){const g=h[m];g.skip||i(g,u,m)}}}function yDe(n){const e=n.indexOf("x")!==-1,r=n.indexOf("y")!==-1;return function(i,s){const o=e?Math.abs(i.x-s.x):0,a=r?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function kC(n,e,r,i,s){const o=[];return!s&&!n.isPointInArea(e)||I_(n,r,e,function(l,c,u){!s&&!rb(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&o.push({element:l,datasetIndex:c,index:u})},!0),o}function vDe(n,e,r,i){let s=[];function o(a,l,c){const{startAngle:u,endAngle:h}=a.getProps(["startAngle","endAngle"],i),{angle:d}=cA(a,{x:e.x,y:e.y});Jw(d,u,h)&&s.push({element:a,datasetIndex:l,index:c})}return I_(n,r,e,o),s}function xDe(n,e,r,i,s,o){let a=[];const l=yDe(r);let c=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,s);if(i&&!m)return;const g=h.getCenterPoint(s);if(!(!!o||n.isPointInArea(g))&&!m)return;const y=l(e,g);y<c?(a=[{element:h,datasetIndex:d,index:f}],c=y):y===c&&a.push({element:h,datasetIndex:d,index:f})}return I_(n,r,e,u),a}function CC(n,e,r,i,s,o){return!o&&!n.isPointInArea(e)?[]:r==="r"&&!i?vDe(n,e,r,s):xDe(n,e,r,i,s,o)}function c$(n,e,r,i,s){const o=[],a=r==="x"?"inXRange":"inYRange";let l=!1;return I_(n,r,e,(c,u,h)=>{c[a]&&c[a](e[r],s)&&(o.push({element:c,datasetIndex:u,index:h}),l=l||c.inRange(e.x,e.y,s))}),i&&!l?[]:o}var wDe={modes:{index(n,e,r,i){const s=Lu(e,n),o=r.axis||"x",a=r.includeInvisible||!1,l=r.intersect?kC(n,s,o,i,a):CC(n,s,o,!1,i,a),c=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=l[0].index,d=u.data[h];d&&!d.skip&&c.push({element:d,datasetIndex:u.index,index:h})}),c):[]},dataset(n,e,r,i){const s=Lu(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;let l=r.intersect?kC(n,s,o,i,a):CC(n,s,o,!1,i,a);if(l.length>0){const c=l[0].datasetIndex,u=n.getDatasetMeta(c).data;l=[];for(let h=0;h<u.length;++h)l.push({element:u[h],datasetIndex:c,index:h})}return l},point(n,e,r,i){const s=Lu(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;return kC(n,s,o,i,a)},nearest(n,e,r,i){const s=Lu(e,n),o=r.axis||"xy",a=r.includeInvisible||!1;return CC(n,s,o,r.intersect,i,a)},x(n,e,r,i){const s=Lu(e,n);return c$(n,s,"x",r.intersect,i)},y(n,e,r,i){const s=Lu(e,n);return c$(n,s,"y",r.intersect,i)}}};const rre=["left","top","right","bottom"];function Vm(n,e){return n.filter(r=>r.pos===e)}function u$(n,e){return n.filter(r=>rre.indexOf(r.pos)===-1&&r.box.axis===e)}function Ym(n,e){return n.sort((r,i)=>{const s=e?i:r,o=e?r:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function _De(n){const e=[];let r,i,s,o,a,l;for(r=0,i=(n||[]).length;r<i;++r)s=n[r],{position:o,options:{stack:a,stackWeight:l=1}}=s,e.push({index:r,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&o+a,stackWeight:l});return e}function SDe(n){const e={};for(const r of n){const{stack:i,pos:s,stackWeight:o}=r;if(!i||!rre.includes(s))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return e}function kDe(n,e){const r=SDe(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let o,a,l;for(o=0,a=n.length;o<a;++o){l=n[o];const{fullSize:c}=l.box,u=r[l.stack],h=u&&l.stackWeight/u.weight;l.horizontal?(l.width=h?h*i:c&&e.availableWidth,l.height=s):(l.width=i,l.height=h?h*s:c&&e.availableHeight)}return r}function CDe(n){const e=_De(n),r=Ym(e.filter(u=>u.box.fullSize),!0),i=Ym(Vm(e,"left"),!0),s=Ym(Vm(e,"right")),o=Ym(Vm(e,"top"),!0),a=Ym(Vm(e,"bottom")),l=u$(e,"x"),c=u$(e,"y");return{fullSize:r,leftAndTop:i.concat(o),rightAndBottom:s.concat(c).concat(a).concat(l),chartArea:Vm(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:o.concat(a).concat(l)}}function d$(n,e,r,i){return Math.max(n[r],e[r])+Math.max(n[i],e[i])}function ire(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function EDe(n,e,r,i){const{pos:s,box:o}=r,a=n.maxPadding;if(!Yt(s)){r.size&&(n[s]-=r.size);const d=i[r.stack]||{size:0,count:1};d.size=Math.max(d.size,r.horizontal?o.height:o.width),r.size=d.size/d.count,n[s]+=r.size}o.getPadding&&ire(a,o.getPadding());const l=Math.max(0,e.outerWidth-d$(a,n,"left","right")),c=Math.max(0,e.outerHeight-d$(a,n,"top","bottom")),u=l!==n.w,h=c!==n.h;return n.w=l,n.h=c,r.horizontal?{same:u,other:h}:{same:h,other:u}}function TDe(n){const e=n.maxPadding;function r(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=r("top"),n.x+=r("left"),r("right"),r("bottom")}function PDe(n,e){const r=e.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{o[a]=Math.max(e[a],r[a])}),o}return i(n?["left","right"]:["top","bottom"])}function Sg(n,e,r,i){const s=[];let o,a,l,c,u,h;for(o=0,a=n.length,u=0;o<a;++o){l=n[o],c=l.box,c.update(l.width||e.w,l.height||e.h,PDe(l.horizontal,e));const{same:d,other:f}=EDe(e,r,l,i);u|=d&&s.length,h=h||f,c.fullSize||s.push(l)}return u&&Sg(s,e,r,i)||h}function Fv(n,e,r,i,s){n.top=r,n.left=e,n.right=e+i,n.bottom=r+s,n.width=i,n.height=s}function h$(n,e,r,i){const s=r.padding;let{x:o,y:a}=e;for(const l of n){const c=l.box,u=i[l.stack]||{placed:0,weight:1},h=l.stackWeight/u.weight||1;if(l.horizontal){const d=e.w*h,f=u.size||c.height;vs(u.start)&&(a=u.start),c.fullSize?Fv(c,s.left,a,r.outerWidth-s.right-s.left,f):Fv(c,e.left+u.placed,a,d,f),u.start=a,u.placed+=d,a=c.bottom}else{const d=e.h*h,f=u.size||c.width;vs(u.start)&&(o=u.start),c.fullSize?Fv(c,o,s.top,f,r.outerHeight-s.bottom-s.top):Fv(c,o,e.top+u.placed,f,d),u.start=o,u.placed+=d,o=c.right}}e.x=o,e.y=a}var Ys={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},n.boxes.push(e)},removeBox(n,e){const r=n.boxes?n.boxes.indexOf(e):-1;r!==-1&&n.boxes.splice(r,1)},configure(n,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(n,e,r,i){if(!n)return;const s=di(n.options.layout.padding),o=Math.max(e-s.width,0),a=Math.max(r-s.height,0),l=CDe(n.boxes),c=l.vertical,u=l.horizontal;gn(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=c.reduce((b,y)=>y.box.options&&y.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/h,hBoxMaxHeight:a/2}),f=Object.assign({},s);ire(f,di(i));const m=Object.assign({maxPadding:f,w:o,h:a,x:s.left,y:s.top},s),g=kDe(c.concat(u),d);Sg(l.fullSize,m,d,g),Sg(c,m,d,g),Sg(u,m,d,g)&&Sg(c,m,d,g),TDe(m),h$(l.leftAndTop,m,d,g),m.x+=m.w,m.y+=m.h,h$(l.rightAndBottom,m,d,g),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},gn(l.chartArea,b=>{const y=b.box;Object.assign(y,n.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class sre{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,i){}removeEventListener(e,r,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,i,s){return r=Math.max(0,r||e.width),i=i||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):i)}}isAttached(e){return!0}updateConfig(e){}}class MDe extends sre{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Rx="$chartjs",DDe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},f$=n=>n===null||n==="";function ODe(n,e){const r=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Rx]={initial:{height:i,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",f$(s)){const o=Z6(n,"width");o!==void 0&&(n.width=o)}if(f$(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=Z6(n,"height");o!==void 0&&(n.height=o)}return n}const ore=BMe?{passive:!0}:!1;function IDe(n,e,r){n&&n.addEventListener(e,r,ore)}function ADe(n,e,r){n&&n.canvas&&n.canvas.removeEventListener(e,r,ore)}function RDe(n,e){const r=DDe[n.type]||n.type,{x:i,y:s}=Lu(n,e);return{type:r,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function t1(n,e){for(const r of n)if(r===e||r.contains(e))return!0}function NDe(n,e,r){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||t1(l.addedNodes,i),a=a&&!t1(l.removedNodes,i);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function jDe(n,e,r){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||t1(l.removedNodes,i),a=a&&!t1(l.addedNodes,i);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const sb=new Map;let p$=0;function are(){const n=window.devicePixelRatio;n!==p$&&(p$=n,sb.forEach((e,r)=>{r.currentDevicePixelRatio!==n&&e()}))}function LDe(n,e){sb.size||window.addEventListener("resize",are),sb.set(n,e)}function FDe(n){sb.delete(n),sb.size||window.removeEventListener("resize",are)}function $De(n,e,r){const i=n.canvas,s=i&&J3(i);if(!s)return;const o=qne((l,c)=>{const u=s.clientWidth;r(l,c),u<s.clientWidth&&r()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||o(u,h)});return a.observe(s),LDe(n,o),a}function EC(n,e,r){r&&r.disconnect(),e==="resize"&&FDe(n)}function BDe(n,e,r){const i=n.canvas,s=qne(o=>{n.ctx!==null&&r(RDe(o,n))},n);return IDe(i,e,s),s}class zDe extends sre{acquireContext(e,r){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(ODe(e,r),i):null}releaseContext(e){const r=e.canvas;if(!r[Rx])return!1;const i=r[Rx].initial;["height","width"].forEach(o=>{const a=i[o];On(a)?r.removeAttribute(o):r.setAttribute(o,a)});const s=i.style||{};return Object.keys(s).forEach(o=>{r.style[o]=s[o]}),r.width=r.width,delete r[Rx],!0}addEventListener(e,r,i){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),a={attach:NDe,detach:jDe,resize:$De}[r]||BDe;s[r]=a(e,r,i)}removeEventListener(e,r){const i=e.$proxies||(e.$proxies={}),s=i[r];if(!s)return;({attach:EC,detach:EC,resize:EC}[r]||ADe)(e,r,s),i[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,i,s){return $Me(e,r,i,s)}isAttached(e){const r=e&&J3(e);return!!(r&&r.isConnected)}}function UDe(n){return!Q3()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?MDe:zDe}var tx;let Qi=(tx=class{constructor(){Be(this,"x");Be(this,"y");Be(this,"active",!1);Be(this,"options");Be(this,"$animations")}tooltipPosition(e){const{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}hasValue(){return Ld(this.x)&&Ld(this.y)}getProps(e,r){const i=this.$animations;if(!r||!i)return this;const s={};return e.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},Be(tx,"defaults",{}),Be(tx,"defaultRoutes"),tx);function WDe(n,e){const r=n.options.ticks,i=qDe(n),s=Math.min(r.maxTicksLimit||i,i),o=r.major.enabled?VDe(e):[],a=o.length,l=o[0],c=o[a-1],u=[];if(a>s)return YDe(e,u,o,a/s),u;const h=HDe(o,e,s);if(a>0){let d,f;const m=a>1?Math.round((c-l)/(a-1)):null;for($v(e,u,h,On(m)?0:l-m,l),d=0,f=a-1;d<f;d++)$v(e,u,h,o[d],o[d+1]);return $v(e,u,h,c,On(m)?e.length:c+m),u}return $v(e,u,h),u}function qDe(n){const e=n.options.offset,r=n._tickSize(),i=n._length/r+(e?0:1),s=n._maxLength/r;return Math.floor(Math.min(i,s))}function HDe(n,e,r){const i=GDe(n),s=e.length/r;if(!i)return Math.max(s,1);const o=LPe(i);for(let a=0,l=o.length-1;a<l;a++){const c=o[a];if(c>s)return c}return Math.max(s,1)}function VDe(n){const e=[];let r,i;for(r=0,i=n.length;r<i;r++)n[r].major&&e.push(r);return e}function YDe(n,e,r,i){let s=0,o=r[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===o&&(e.push(n[a]),s++,o=r[s*i])}function $v(n,e,r,i,s){const o=Ut(i,0),a=Math.min(Ut(s,n.length),n.length);let l=0,c,u,h;for(r=Math.ceil(r),s&&(c=s-i,r=c/Math.floor(c/r)),h=o;h<0;)l++,h=Math.round(o+l*r);for(u=Math.max(o,0);u<a;u++)u===h&&(e.push(n[u]),l++,h=Math.round(o+l*r))}function GDe(n){const e=n.length;let r,i;if(e<2)return!1;for(i=n[0],r=1;r<e;++r)if(n[r]-n[r-1]!==i)return!1;return i}const KDe=n=>n==="left"?"right":n==="right"?"left":n,m$=(n,e,r)=>e==="top"||e==="left"?n[e]+r:n[e]-r,g$=(n,e)=>Math.min(e||n,n);function b$(n,e){const r=[],i=n.length/e,s=n.length;let o=0;for(;o<s;o+=i)r.push(n[Math.floor(o)]);return r}function XDe(n,e,r){const i=n.ticks.length,s=Math.min(e,i-1),o=n._startPixel,a=n._endPixel,l=1e-6;let c=n.getPixelForTick(s),u;if(!(r&&(i===1?u=Math.max(c-o,a-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<o-l||c>a+l)))return c}function QDe(n,e){gn(n,r=>{const i=r.gc,s=i.length/2;let o;if(s>e){for(o=0;o<s;++o)delete r.data[i[o]];i.splice(0,s)}})}function Gm(n){return n.drawTicks?n.tickLength:0}function y$(n,e){if(!n.display)return 0;const r=Tr(n.font,e),i=di(n.padding);return(Gn(n.text)?n.text.length:1)*r.lineHeight+i.height}function JDe(n,e){return eh(n,{scale:e,type:"scale"})}function ZDe(n,e,r){return eh(n,{tick:r,index:e,type:"tick"})}function eOe(n,e,r){let i=H3(n);return(r&&e!=="right"||!r&&e==="right")&&(i=KDe(i)),i}function tOe(n,e,r,i){const{top:s,left:o,bottom:a,right:l,chart:c}=n,{chartArea:u,scales:h}=c;let d=0,f,m,g;const b=a-s,y=l-o;if(n.isHorizontal()){if(m=oi(i,o,l),Yt(r)){const v=Object.keys(r)[0],w=r[v];g=h[v].getPixelForValue(w)+b-e}else r==="center"?g=(u.bottom+u.top)/2+b-e:g=m$(n,r,e);f=l-o}else{if(Yt(r)){const v=Object.keys(r)[0],w=r[v];m=h[v].getPixelForValue(w)-y+e}else r==="center"?m=(u.left+u.right)/2-y+e:m=m$(n,r,e);g=oi(i,a,s),d=r==="left"?-Qr:Qr}return{titleX:m,titleY:g,maxWidth:f,rotation:d}}class rm extends Qi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:i,_suggestedMax:s}=this;return e=Uo(e,Number.POSITIVE_INFINITY),r=Uo(r,Number.NEGATIVE_INFINITY),i=Uo(i,Number.POSITIVE_INFINITY),s=Uo(s,Number.NEGATIVE_INFINITY),{min:Uo(e,i),max:Uo(r,s),minDefined:Gi(e),maxDefined:Gi(r)}}getMinMax(e){let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),a;if(s&&o)return{min:r,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,e),s||(r=Math.min(r,a.min)),o||(i=Math.max(i,a.max));return r=o&&r>i?i:r,i=s&&r>i?r:i,{min:Uo(r,Uo(i,r)),max:Uo(i,Uo(r,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xn(this.options.beforeUpdate,[this])}update(e,r,i){const{beginAtZero:s,grace:o,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bMe(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?b$(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=WDe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,i;this.isHorizontal()?(r=this.left,i=this.right):(r=this.top,i=this.bottom,e=!e),this._startPixel=r,this._endPixel=i,this._reversePixels=e,this._length=i-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xn(this.options.afterUpdate,[this])}beforeSetDimensions(){xn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i],o.label=xn(r.callback,[o.value,i,e],this)}afterTickToLabelConversion(){xn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,i=g$(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,o=r.maxRotation;let a=s,l,c,u;if(!this._isVisible()||!r.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Vs(this.chart.width-d,0,this.maxWidth);l=e.offset?this.maxWidth/i:m/(i-1),d+6>l&&(l=m/(i-(e.offset?.5:1)),c=this.maxHeight-Gm(e.grid)-r.padding-y$(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),a=zne(Math.min(Math.asin(Vs((h.highest.height+6)/l,-1,1)),Math.asin(Vs(c/u,-1,1))-Math.asin(Vs(f/u,-1,1)))),a=Math.max(s,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){xn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:i,title:s,grid:o}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=y$(s,r.options.font);if(l?(e.width=this.maxWidth,e.height=Gm(o)+c):(e.height=this.maxHeight,e.width=Gm(o)+c),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,g=jr(this.labelRotation),b=Math.cos(g),y=Math.sin(g);if(l){const v=i.mirror?0:y*d.width+b*f.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=i.mirror?0:b*d.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(u,h,y,b)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,i,s){const{ticks:{align:o,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=s*e.width,m=i*r.height):(f=i*e.height,m=s*r.width):o==="start"?m=r.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,m=r.width/2),this.paddingLeft=Math.max((f-h+a)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+a)*this.width/(this.width-d),0)}else{let h=r.height/2,d=e.height/2;o==="start"?(h=0,d=e.height):o==="end"&&(h=r.height,d=0),this.paddingTop=h+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,i;for(r=0,i=e.length;r<i;r++)On(e[r].label)&&(e.splice(r,1),i--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let i=this.ticks;r<i.length&&(i=b$(i,r)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,i){const{ctx:s,_longestTextCache:o}=this,a=[],l=[],c=Math.floor(r/g$(r,i));let u=0,h=0,d,f,m,g,b,y,v,w,k,S,_;for(d=0;d<r;d+=c){if(g=e[d].label,b=this._resolveTickFontOptions(d),s.font=y=b.string,v=o[y]=o[y]||{data:{},gc:[]},w=b.lineHeight,k=S=0,!On(g)&&!Gn(g))k=G6(s,v.data,v.gc,k,g),S=w;else if(Gn(g))for(f=0,m=g.length;f<m;++f)_=g[f],!On(_)&&!Gn(_)&&(k=G6(s,v.data,v.gc,k,_),S+=w);a.push(k),l.push(S),u=Math.max(k,u),h=Math.max(S,h)}QDe(o,r);const C=a.indexOf(u),P=l.indexOf(h),T=O=>({width:a[O]||0,height:l[O]||0});return{first:T(0),last:T(r-1),widest:T(C),highest:T(P),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return UPe(this._alignToPixels?Tu(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const i=r[e];return i.$context||(i.$context=ZDe(this.getContext(),e,i))}return this.$context||(this.$context=JDe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=jr(this.labelRotation),i=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),o=this._getLabelSizes(),a=e.autoSkipPadding||0,l=o?o.widest.width+a:0,c=o?o.highest.height+a:0;return this.isHorizontal()?c*i>l*s?l/i:c/s:c*s<l*i?c/i:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,i=this.chart,s=this.options,{grid:o,position:a,border:l}=s,c=o.offset,u=this.isHorizontal(),d=this.ticks.length+(c?1:0),f=Gm(o),m=[],g=l.setContext(this.getContext()),b=g.display?g.width:0,y=b/2,v=function(F){return Tu(i,F,b)};let w,k,S,_,C,P,T,O,D,I,U,B;if(a==="top")w=v(this.bottom),P=this.bottom-f,O=w-y,I=v(e.top)+y,B=e.bottom;else if(a==="bottom")w=v(this.top),I=e.top,B=v(e.bottom)-y,P=w+y,O=this.top+f;else if(a==="left")w=v(this.right),C=this.right-f,T=w-y,D=v(e.left)+y,U=e.right;else if(a==="right")w=v(this.left),D=e.left,U=v(e.right)-y,C=w+y,T=this.left+f;else if(r==="x"){if(a==="center")w=v((e.top+e.bottom)/2+.5);else if(Yt(a)){const F=Object.keys(a)[0],N=a[F];w=v(this.chart.scales[F].getPixelForValue(N))}I=e.top,B=e.bottom,P=w+y,O=P+f}else if(r==="y"){if(a==="center")w=v((e.left+e.right)/2);else if(Yt(a)){const F=Object.keys(a)[0],N=a[F];w=v(this.chart.scales[F].getPixelForValue(N))}C=w-y,T=C-f,D=e.left,U=e.right}const z=Ut(s.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/z));for(k=0;k<d;k+=j){const F=this.getContext(k),N=o.setContext(F),R=l.setContext(F),W=N.lineWidth,Y=N.color,K=R.dash||[],H=R.dashOffset,Q=N.tickWidth,G=N.tickColor,X=N.tickBorderDash||[],de=N.tickBorderDashOffset;S=XDe(this,k,c),S!==void 0&&(_=Tu(i,S,W),u?C=T=D=U=_:P=O=I=B=_,m.push({tx1:C,ty1:P,tx2:T,ty2:O,x1:D,y1:I,x2:U,y2:B,width:W,color:Y,borderDash:K,borderDashOffset:H,tickWidth:Q,tickColor:G,tickBorderDash:X,tickBorderDashOffset:de}))}return this._ticksLength=d,this._borderValue=w,m}_computeLabelItems(e){const r=this.axis,i=this.options,{position:s,ticks:o}=i,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:h,mirror:d}=o,f=Gm(i.grid),m=f+h,g=d?-h:m,b=-jr(this.labelRotation),y=[];let v,w,k,S,_,C,P,T,O,D,I,U,B="middle";if(s==="top")C=this.bottom-g,P=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+g,P=this._getXAxisLabelAlignment();else if(s==="left"){const j=this._getYAxisLabelAlignment(f);P=j.textAlign,_=j.x}else if(s==="right"){const j=this._getYAxisLabelAlignment(f);P=j.textAlign,_=j.x}else if(r==="x"){if(s==="center")C=(e.top+e.bottom)/2+m;else if(Yt(s)){const j=Object.keys(s)[0],F=s[j];C=this.chart.scales[j].getPixelForValue(F)+m}P=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")_=(e.left+e.right)/2-m;else if(Yt(s)){const j=Object.keys(s)[0],F=s[j];_=this.chart.scales[j].getPixelForValue(F)}P=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(c==="start"?B="top":c==="end"&&(B="bottom"));const z=this._getLabelSizes();for(v=0,w=l.length;v<w;++v){k=l[v],S=k.label;const j=o.setContext(this.getContext(v));T=this.getPixelForTick(v)+o.labelOffset,O=this._resolveTickFontOptions(v),D=O.lineHeight,I=Gn(S)?S.length:1;const F=I/2,N=j.color,R=j.textStrokeColor,W=j.textStrokeWidth;let Y=P;a?(_=T,P==="inner"&&(v===w-1?Y=this.options.reverse?"left":"right":v===0?Y=this.options.reverse?"right":"left":Y="center"),s==="top"?u==="near"||b!==0?U=-I*D+D/2:u==="center"?U=-z.highest.height/2-F*D+D:U=-z.highest.height+D/2:u==="near"||b!==0?U=D/2:u==="center"?U=z.highest.height/2-F*D:U=z.highest.height-I*D,d&&(U*=-1),b!==0&&!j.showLabelBackdrop&&(_+=D/2*Math.sin(b))):(C=T,U=(1-I)*D/2);let K;if(j.showLabelBackdrop){const H=di(j.backdropPadding),Q=z.heights[v],G=z.widths[v];let X=U-H.top,de=0-H.left;switch(B){case"middle":X-=Q/2;break;case"bottom":X-=Q;break}switch(P){case"center":de-=G/2;break;case"right":de-=G;break;case"inner":v===w-1?de-=G:v>0&&(de-=G/2);break}K={left:de,top:X,width:G+H.width,height:Q+H.height,color:j.backdropColor}}y.push({label:S,font:O,textOffset:U,options:{rotation:b,color:N,strokeColor:R,strokeWidth:W,textAlign:Y,textBaseline:B,translation:[_,C],backdrop:K}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-jr(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,a=this._getLabelSizes(),l=e+o,c=a.widest.width;let u,h;return r==="left"?s?(h=this.right+o,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-l,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h=this.left)):r==="right"?s?(h=this.left+o,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+l,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:i,top:s,width:o,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(i,s,o,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,a;const l=(c,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(r.display)for(o=0,a=s.length;o<a;++o){const c=s[o];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),a=i.display?o.width:0;if(!a)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=Tu(e,this.left,a)-a/2,h=Tu(e,this.right,l)+l/2,d=f=c):(d=Tu(e,this.top,a)-a/2,f=Tu(e,this.bottom,l)+l/2,u=h=c),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(u,d),r.lineTo(h,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&M_(i,s);const o=this.getLabelItems(e);for(const a of o){const l=a.options,c=a.font,u=a.label,h=a.textOffset;ib(i,u,0,h,c,l)}s&&D_(i)}drawTitle(){const{ctx:e,options:{position:r,title:i,reverse:s}}=this;if(!i.display)return;const o=Tr(i.font),a=di(i.padding),l=i.align;let c=o.lineHeight/2;r==="bottom"||r==="center"||Yt(r)?(c+=a.bottom,Gn(i.text)&&(c+=o.lineHeight*(i.text.length-1))):c+=a.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=tOe(this,c,r,l);ib(e,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:f,textAlign:eOe(l,r,s),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,i=Ut(e.grid&&e.grid.z,-1),s=Ut(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rm.prototype.draw?[{z:r,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o];l[i]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Tr(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bv{constructor(e,r,i){this.type=e,this.scope=r,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let i;iOe(r)&&(i=this.register(r));const s=this.items,o=e.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,nOe(e,a,i),this.override&&rr.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,i=e.id,s=this.scope;i in r&&delete r[i],s&&i in rr[s]&&(delete rr[s][i],this.override&&delete Fd[i])}}function nOe(n,e,r){const i=tb(Object.create(null),[r?rr.get(r):{},rr.get(e),n.defaults]);rr.set(e,i),n.defaultRoutes&&rOe(e,n.defaultRoutes),n.descriptors&&rr.describe(e,n.descriptors)}function rOe(n,e){Object.keys(e).forEach(r=>{const i=r.split("."),s=i.pop(),o=[n].concat(i).join("."),a=e[r].split("."),l=a.pop(),c=a.join(".");rr.route(o,s,c,l)})}function iOe(n){return"id"in n&&"defaults"in n}class sOe{constructor(){this.controllers=new Bv(Pf,"datasets",!0),this.elements=new Bv(Qi,"elements"),this.plugins=new Bv(Object,"plugins"),this.scales=new Bv(rm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,i){[...r].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):gn(s,a=>{const l=i||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,r,i){const s=U3(e);xn(i["before"+s],[],i),r[e](i),xn(i["after"+s],[],i)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const i=this._typedRegistries[r];if(i.isForType(e))return i}return this.plugins}_get(e,r,i){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Ko=new sOe;class oOe{constructor(){this._init=void 0}notify(e,r,i,s){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(o,e,r,i);return r==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,r,i,s){s=s||{};for(const o of e){const a=o.plugin,l=a[i],c=[r,s,o.options];if(xn(l,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){On(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const i=e&&e.config,s=Ut(i.options&&i.options.plugins,{}),o=aOe(i);return s===!1&&!r?[]:cOe(e,o,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],i=this._cache,s=(o,a)=>o.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(s(r,i),e,"stop"),this._notify(s(i,r),e,"start")}}function aOe(n){const e={},r=[],i=Object.keys(Ko.plugins.items);for(let o=0;o<i.length;o++)r.push(Ko.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const a=s[o];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function lOe(n,e){return!e&&n===!1?null:n===!0?{}:n}function cOe(n,{plugins:e,localIds:r},i,s){const o=[],a=n.getContext();for(const l of e){const c=l.id,u=lOe(i[c],s);u!==null&&o.push({plugin:l,options:uOe(n.config,{plugin:l,local:r[c]},u,a)})}return o}function uOe(n,{plugin:e,local:r},i,s){const o=n.pluginScopeKeys(e),a=n.getOptionScopes(i,o);return r&&e.defaults&&a.push(e.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hA(n,e){const r=rr.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function dOe(n,e){let r=n;return n==="_index_"?r=e:n==="_value_"&&(r=e==="x"?"y":"x"),r}function hOe(n,e){return n===e?"_index_":"_value_"}function v$(n){if(n==="x"||n==="y"||n==="r")return n}function fOe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function fA(n,...e){if(v$(n))return n;for(const r of e){const i=r.axis||fOe(r.position)||n.length>1&&v$(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function x$(n,e,r){if(r[e+"AxisID"]===n)return{axis:e}}function pOe(n,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(r.length)return x$(n,"x",r[0])||x$(n,"y",r[0])}return{}}function mOe(n,e){const r=Fd[n.type]||{scales:{}},i=e.scales||{},s=hA(n.type,e),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!Yt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=fA(a,l,pOe(a,n),rr.scales[l.type]),u=hOe(c,s),h=r.scales||{};o[a]=Gg(Object.create(null),[{axis:c},l,h[c],h[u]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||hA(l,e),h=(Fd[l]||{}).scales||{};Object.keys(h).forEach(d=>{const f=dOe(d,c),m=a[f+"AxisID"]||f;o[m]=o[m]||Object.create(null),Gg(o[m],[{axis:f},i[m],h[d]])})}),Object.keys(o).forEach(a=>{const l=o[a];Gg(l,[rr.scales[l.type],rr.scale])}),o}function lre(n){const e=n.options||(n.options={});e.plugins=Ut(e.plugins,{}),e.scales=mOe(n,e)}function cre(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function gOe(n){return n=n||{},n.data=cre(n.data),lre(n),n}const w$=new Map,ure=new Set;function zv(n,e){let r=w$.get(n);return r||(r=e(),w$.set(n,r),ure.add(r)),r}const Km=(n,e,r)=>{const i=nb(e,r);i!==void 0&&n.add(i)};class bOe{constructor(e){this._config=gOe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cre(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lre(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return zv(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return zv(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,i=this.type;return zv(`${i}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const i=this._scopeCache;let s=i.get(e);return(!s||r)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,r,i){const{options:s,type:o}=this,a=this._cachedScopes(e,i),l=a.get(r);if(l)return l;const c=new Set;r.forEach(h=>{e&&(c.add(e),h.forEach(d=>Km(c,e,d))),h.forEach(d=>Km(c,s,d)),h.forEach(d=>Km(c,Fd[o]||{},d)),h.forEach(d=>Km(c,rr,d)),h.forEach(d=>Km(c,uA,d))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),ure.has(r)&&a.set(r,u),u}chartOptionScopes(){const{options:e,type:r}=this;return[e,Fd[r]||{},rr.datasets[r]||{},{type:r},rr,uA]}resolveNamedOptions(e,r,i,s=[""]){const o={$shared:!0},{resolver:a,subPrefixes:l}=_$(this._resolverCache,e,s);let c=a;if(vOe(a,r)){o.$shared=!1,i=Vi(i)?i():i;const u=this.createResolver(e,i,l);c=Ap(a,i,u)}for(const u of r)o[u]=c[u];return o}createResolver(e,r,i=[""],s){const{resolver:o}=_$(this._resolverCache,e,i);return Yt(r)?Ap(o,r,void 0,s):o}}function _$(n,e,r){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=r.join();let o=i.get(s);return o||(o={resolver:G3(e,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,o)),o}const yOe=n=>Yt(n)&&Object.getOwnPropertyNames(n).some(e=>Vi(n[e]));function vOe(n,e){const{isScriptable:r,isIndexable:i}=Gne(n);for(const s of e){const o=r(s),a=i(s),l=(a||o)&&n[s];if(o&&(Vi(l)||yOe(l))||a&&Gn(l))return!0}return!1}var xOe="4.5.1";const wOe=["top","bottom","left","right","chartArea"];function S$(n,e){return n==="top"||n==="bottom"||wOe.indexOf(n)===-1&&e==="x"}function k$(n,e){return function(r,i){return r[n]===i[n]?r[e]-i[e]:r[n]-i[n]}}function C$(n){const e=n.chart,r=e.options.animation;e.notifyPlugins("afterRender"),xn(r&&r.onComplete,[n],e)}function _Oe(n){const e=n.chart,r=e.options.animation;xn(r&&r.onProgress,[n],e)}function dre(n){return Q3()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Nx={},E$=n=>{const e=dre(n);return Object.values(Nx).filter(r=>r.canvas===e).pop()};function SOe(n,e,r){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=e){const a=n[s];delete n[s],(r>0||o>e)&&(n[o+r]=a)}}}function kOe(n,e,r,i){return!r||n.type==="mouseout"?null:i?e:n}var rc;let vd=(rc=class{static register(...e){Ko.add(...e),T$()}static unregister(...e){Ko.remove(...e),T$()}constructor(e,r){const i=this.config=new bOe(r),s=dre(e),o=E$(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||UDe(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,h=c&&c.width;if(this.id=MPe(),this.ctx=l,this.canvas=c,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new oOe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=YPe(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],Nx[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ua.listen(this,"complete",C$),Ua.listen(this,"progress",_Oe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return On(e)?r&&o?o:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ko}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J6(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return K6(this.canvas,this.ctx),this}stop(){return Ua.stop(this),this}resize(e,r){Ua.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,r,o),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,J6(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),xn(i.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};gn(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,i=this.scales,s=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{});let o=[];r&&(o=o.concat(Object.keys(r).map(a=>{const l=r[a],c=fA(a,l),u=c==="r",h=c==="x";return{options:l,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),gn(o,a=>{const l=a.options,c=l.id,u=fA(c,l),h=Ut(l.type,a.dtype);(l.position===void 0||S$(l.position,u)!==S$(a.dposition))&&(l.position=a.dposition),s[c]=!0;let d=null;if(c in i&&i[c].type===h)d=i[c];else{const f=Ko.getScale(h);d=new f({id:c,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(l,e)}),gn(s,(a,l)=>{a||delete i[l]}),gn(i,a=>{Ys.configure(this,a,a.options),Ys.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,i=e.length;if(e.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);e.splice(r,i-r)}this._sortedMetasets=e.slice(0).sort(k$("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){const o=r[i];let a=this.getDatasetMeta(i);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=o.indexAxis||hA(l,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const c=Ko.getController(l),{datasetElementType:u,dataElementType:h}=rr.datasets[l];Object.assign(c,{dataElementType:Ko.getElement(h),datasetElementType:u&&Ko.getElement(u)}),a.controller=new c(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){gn(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!s&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||gn(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(k$("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){gn(this.scales,e=>{Ys.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!B6(r,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of r){const a=i==="_removeElements"?-o:o;SOe(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!B6(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ys.update(this,this.width,this.height,e);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],gn(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Vi(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ua.has(this)?this.attached&&!Ua.running(this)&&Ua.start(this):(this.draw(),C$({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,i=[];let s,o;for(s=0,o=r.length;s<o;++s){const a=r[s];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=eDe(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&M_(r,s),e.controller.draw(),s&&D_(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return rb(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,i,s){const o=wDe.modes[r];return typeof o=="function"?o(this,e,i,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],i=this._metasets;let s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=eh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(e,r){const i=this.getDatasetMeta(e);i.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,i){const s=i?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);vs(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(o,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Ua.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),K6(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Nx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};gn(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,i=(c,u)=>{r.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(r.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",l)},r.isAttached(this.canvas)?l():a()}unbindEvents(){gn(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},gn(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,i){const s=i?"set":"remove";let o,a,l,c;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],i=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Gw(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(e,r,i){return this._plugins.notify(this,e,r,i)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,i){const s=this.options.hover,o=(c,u)=>c.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),a=o(r,e),l=i?e:o(e,r);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,r){const i={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(e,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(e,r,i){const{_active:s=[],options:o}=this,a=r,l=this._getActiveElements(e,s,i,a),c=NPe(e),u=kOe(e,this._lastEvent,i,c);i&&(this._lastEvent=null,xn(o.onHover,[e,l,this],this),c&&xn(o.onClick,[e,l,this],this));const h=!Gw(l,s);return(h||r)&&(this._active=l,this._updateHoverStyles(l,s,r)),this._lastEvent=u,h}_getActiveElements(e,r,i,s){if(e.type==="mouseout")return[];if(!i)return r;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}},Be(rc,"defaults",rr),Be(rc,"instances",Nx),Be(rc,"overrides",Fd),Be(rc,"registry",Ko),Be(rc,"version",xOe),Be(rc,"getChart",E$),rc);function T$(){return gn(vd.instances,n=>n._plugins.invalidate())}function hre(n,e,r=e){n.lineCap=Ut(r.borderCapStyle,e.borderCapStyle),n.setLineDash(Ut(r.borderDash,e.borderDash)),n.lineDashOffset=Ut(r.borderDashOffset,e.borderDashOffset),n.lineJoin=Ut(r.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ut(r.borderWidth,e.borderWidth),n.strokeStyle=Ut(r.borderColor,e.borderColor)}function COe(n,e,r){n.lineTo(r.x,r.y)}function EOe(n){return n.stepped?aMe:n.tension||n.cubicInterpolationMode==="monotone"?lMe:COe}function fre(n,e,r={}){const i=n.length,{start:s=0,end:o=i-1}=r,{start:a,end:l}=e,c=Math.max(s,a),u=Math.min(o,l),h=s<a&&o<a||s>l&&o>l;return{count:i,start:c,loop:e.loop,ilen:u<c&&!h?i+u-c:u-c}}function TOe(n,e,r,i){const{points:s,options:o}=e,{count:a,start:l,loop:c,ilen:u}=fre(s,r,i),h=EOe(o);let{move:d=!0,reverse:f}=i||{},m,g,b;for(m=0;m<=u;++m)g=s[(l+(f?u-m:m))%a],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):h(n,b,g,f,o.stepped),b=g);return c&&(g=s[(l+(f?u:0))%a],h(n,b,g,f,o.stepped)),!!c}function POe(n,e,r,i){const s=e.points,{count:o,start:a,ilen:l}=fre(s,r,i),{move:c=!0,reverse:u}=i||{};let h=0,d=0,f,m,g,b,y,v;const w=S=>(a+(u?l-S:S))%o,k=()=>{b!==y&&(n.lineTo(h,y),n.lineTo(h,b),n.lineTo(h,v))};for(c&&(m=s[w(0)],n.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=s[w(f)],m.skip)continue;const S=m.x,_=m.y,C=S|0;C===g?(_<b?b=_:_>y&&(y=_),h=(d*h+S)/++d):(k(),n.lineTo(S,_),g=C,d=0,b=y=_),v=_}k()}function pA(n){const e=n.options,r=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?POe:TOe}function MOe(n){return n.stepped?zMe:n.tension||n.cubicInterpolationMode==="monotone"?UMe:Fu}function DOe(n,e,r,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,i)&&s.closePath()),hre(n,e.options),n.stroke(s)}function OOe(n,e,r,i){const{segments:s,options:o}=e,a=pA(e);for(const l of s)hre(n,o,l.style),n.beginPath(),a(n,e,l,{start:r,end:r+i-1})&&n.closePath(),n.stroke()}const IOe=typeof Path2D=="function";function AOe(n,e,r,i){IOe&&!e.options.segment?DOe(n,e,r,i):OOe(n,e,r,i)}class kg extends Qi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;AMe(this._points,i,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=XMe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,i=e.length;return i&&r[e[i-1].end]}interpolate(e,r){const i=this.options,s=e[r],o=this.points,a=YMe(this,{property:r,start:s,end:s});if(!a.length)return;const l=[],c=MOe(i);let u,h;for(u=0,h=a.length;u<h;++u){const{start:d,end:f}=a[u],m=o[d],g=o[f];if(m===g){l.push(m);continue}const b=Math.abs((s-m[r])/(g[r]-m[r])),y=c(m,g,b,i.stepped);y[r]=e[r],l.push(y)}return l.length===1?l[0]:l}pathSegment(e,r,i){return pA(this)(e,this,r,i)}path(e,r,i){const s=this.segments,o=pA(this);let a=this._loop;r=r||0,i=i||this.points.length-r;for(const l of s)a&=o(e,this,l,{start:r,end:r+i-1});return!!a}draw(e,r,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),AOe(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Be(kg,"id","line"),Be(kg,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Be(kg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Be(kg,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function P$(n,e,r,i){const s=n.options,{[r]:o}=n.getProps([r],i);return Math.abs(e-o)<s.radius+s.hitRadius}class jx extends Qi{constructor(r){super();Be(this,"parsed");Be(this,"skip");Be(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,i,s){const o=this.options,{x:a,y:l}=this.getProps(["x","y"],s);return Math.pow(r-a,2)+Math.pow(i-l,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(r,i){return P$(this,r,"x",i)}inYRange(r,i){return P$(this,r,"y",i)}getCenterPoint(r){const{x:i,y:s}=this.getProps(["x","y"],r);return{x:i,y:s}}size(r){r=r||this.options||{};let i=r.radius||0;i=Math.max(i,i&&r.hoverRadius||0);const s=i&&r.borderWidth||0;return(i+s)*2}draw(r,i){const s=this.options;this.skip||s.radius<.1||!rb(this,i,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,dA(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Be(jx,"id","point"),Be(jx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Be(jx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const M$=(n,e)=>{let{boxHeight:r=e,boxWidth:i=e}=n;return n.usePointStyle&&(r=Math.min(r,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(e,r)}},ROe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;let D$=class extends Qi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,i){this.maxWidth=e,this.maxHeight=r,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=xn(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(i=>e.filter(i,this.chart.data))),e.sort&&(r=r.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Tr(i.font),o=s.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=M$(i,o);let u,h;r.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(a,o,l,c)+10):(h=this.maxHeight,u=this._fitCols(a,s,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,r,i,s){const{ctx:o,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+l;let d=e;o.textAlign="left",o.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((g,b)=>{const y=i+r/2+o.measureText(g.text).width;(b===0||u[u.length-1]+y+2*l>a)&&(d+=h,u[u.length-(b>0?0:1)]=0,m+=h,f++),c[b]={left:0,top:m,row:f,width:y,height:s},u[u.length-1]+=y+l}),d}_fitCols(e,r,i,s){const{ctx:o,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],h=a-e;let d=l,f=0,m=0,g=0,b=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:w,itemHeight:k}=NOe(i,r,o,y,s);v>0&&m+k+2*l>h&&(d+=f+l,u.push({width:f,height:m}),g+=f+l,b++,f=m=0),c[v]={left:g,top:m,col:b,width:w,height:k},f=Math.max(f,w),m+=k+l}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:i,labels:{padding:s},rtl:o}}=this,a=Tf(o,this.left,this.width);if(this.isHorizontal()){let l=0,c=oi(i,this.left+s,this.right-this.lineWidths[l]);for(const u of r)l!==u.row&&(l=u.row,c=oi(i,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let l=0,c=oi(i,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of r)u.col!==l&&(l=u.col,c=oi(i,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;M_(e,this),this._draw(),D_(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:i,ctx:s}=this,{align:o,labels:a}=e,l=rr.color,c=Tf(e.rtl,this.left,this.width),u=Tr(a.font),{padding:h}=a,d=u.size,f=d/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:g,boxHeight:b,itemHeight:y}=M$(a,d),v=function(C,P,T){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;s.save();const O=Ut(T.lineWidth,1);if(s.fillStyle=Ut(T.fillStyle,l),s.lineCap=Ut(T.lineCap,"butt"),s.lineDashOffset=Ut(T.lineDashOffset,0),s.lineJoin=Ut(T.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=Ut(T.strokeStyle,l),s.setLineDash(Ut(T.lineDash,[])),a.usePointStyle){const D={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:O},I=c.xPlus(C,g/2),U=P+f;Vne(s,D,I,U,a.pointStyleWidth&&g)}else{const D=P+Math.max((d-b)/2,0),I=c.leftForLtr(C,g),U=Ef(T.borderRadius);s.beginPath(),Object.values(U).some(B=>B!==0)?Zw(s,{x:I,y:D,w:g,h:b,radius:U}):s.rect(I,D,g,b),s.fill(),O!==0&&s.stroke()}s.restore()},w=function(C,P,T){ib(s,T.text,C,P+y/2,u,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},k=this.isHorizontal(),S=this._computeTitleHeight();k?m={x:oi(o,this.left+h,this.right-i[0]),y:this.top+h+S,line:0}:m={x:this.left+h,y:oi(o,this.top+S+h,this.bottom-r[0].height),line:0},Zne(this.ctx,e.textDirection);const _=y+h;this.legendItems.forEach((C,P)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const T=s.measureText(C.text).width,O=c.textAlign(C.textAlign||(C.textAlign=a.textAlign)),D=g+f+T;let I=m.x,U=m.y;c.setWidth(this.width),k?P>0&&I+D+h>this.right&&(U=m.y+=_,m.line++,I=m.x=oi(o,this.left+h,this.right-i[m.line])):P>0&&U+_>this.bottom&&(I=m.x=I+r[m.line].width+h,m.line++,U=m.y=oi(o,this.top+S+h,this.bottom-r[m.line].height));const B=c.x(I);if(v(B,U,C),I=GPe(O,I+g+f,k?I+D:this.right,e.rtl),w(c.x(I),U,C),k)m.x+=D+h;else if(typeof C.text!="string"){const z=u.lineHeight;m.y+=pre(C,z)+h}else m.y+=_}),ere(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,i=Tr(r.font),s=di(r.padding);if(!r.display)return;const o=Tf(e.rtl,this.left,this.width),a=this.ctx,l=r.position,c=i.size/2,u=s.top+c;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=oi(e.align,d,this.right-f);else{const g=this.columnSizes.reduce((b,y)=>Math.max(b,y.height),0);h=u+oi(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const m=oi(l,d,d+f);a.textAlign=o.textAlign(H3(l)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=i.string,ib(a,r.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,r=Tr(e.font),i=di(e.padding);return e.display?r.lineHeight+i.height:0}_getLegendItemAt(e,r){let i,s,o;if(wg(e,this.left,this.right)&&wg(r,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],wg(e,s.left,s.left+s.width)&&wg(r,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const r=this.options;if(!FOe(e.type,r))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=ROe(s,i);s&&!o&&xn(r.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!o&&xn(r.onHover,[e,i,this],this)}else i&&xn(r.onClick,[e,i,this],this)}};function NOe(n,e,r,i,s){const o=jOe(i,n,e,r),a=LOe(s,i,e.lineHeight);return{itemWidth:o,itemHeight:a}}function jOe(n,e,r,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,a)=>o.length>a.length?o:a)),e+r.size/2+i.measureText(s).width}function LOe(n,e,r){let i=n;return typeof e.text!="string"&&(i=pre(e,r)),i}function pre(n,e){const r=n.text?n.text.length:0;return e*r}function FOe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var $Oe={id:"legend",_element:D$,start(n,e,r){const i=n.legend=new D$({ctx:n.ctx,options:r,chart:n});Ys.configure(n,i,r),Ys.addBox(n,i)},stop(n){Ys.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,r){const i=n.legend;Ys.configure(n,i,r),i.options=r},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,r){const i=e.datasetIndex,s=r.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:r,pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(r?0:void 0),h=di(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class mre extends Qi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=Gn(i.text)?i.text.length:1;this._padding=di(i.padding);const o=s*Tr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:i,bottom:s,right:o,options:a}=this,l=a.align;let c=0,u,h,d;return this.isHorizontal()?(h=oi(l,i,o),d=r+e,u=o-i):(a.position==="left"?(h=i+e,d=oi(l,s,r),c=hn*-.5):(h=o-e,d=oi(l,r,s),c=hn*.5),u=s-r),{titleX:h,titleY:d,maxWidth:u,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const i=Tr(r.font),o=i.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(o);ib(e,r.text,0,0,i,{color:r.color,maxWidth:c,rotation:u,textAlign:H3(r.align),textBaseline:"middle",translation:[a,l]})}}function BOe(n,e){const r=new mre({ctx:n.ctx,options:e,chart:n});Ys.configure(n,r,e),Ys.addBox(n,r),n.titleBlock=r}var zOe={id:"title",_element:mre,start(n,e,r){BOe(n,r)},stop(n){const e=n.titleBlock;Ys.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,r){const i=n.titleBlock;Ys.configure(n,i,r),i.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cg={average(n){if(!n.length)return!1;let e,r,i=new Set,s=0,o=0;for(e=0,r=n.length;e<r;++e){const l=n[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),s+=c.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:s/o}},nearest(n,e){if(!n.length)return!1;let r=e.x,i=e.y,s=Number.POSITIVE_INFINITY,o,a,l;for(o=0,a=n.length;o<a;++o){const c=n[o].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),h=Ip(e,u);h<s&&(s=h,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,i=c.y}return{x:r,y:i}}};function Ho(n,e){return e&&(Gn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Wa(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function UOe(n,e){const{element:r,datasetIndex:i,index:s}=e,o=n.getDatasetMeta(i).controller,{label:a,value:l}=o.getLabelAndValue(s);return{chart:n,label:a,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:l,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:r}}function O$(n,e){const r=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:a,boxHeight:l}=e,c=Tr(e.bodyFont),u=Tr(e.titleFont),h=Tr(e.footerFont),d=o.length,f=s.length,m=i.length,g=di(e.padding);let b=g.height,y=0,v=i.reduce((S,_)=>S+_.before.length+_.lines.length+_.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const S=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=m*S+(v-m)*c.lineHeight+(v-1)*e.bodySpacing}f&&(b+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const k=function(S){y=Math.max(y,r.measureText(S).width+w)};return r.save(),r.font=u.string,gn(n.title,k),r.font=c.string,gn(n.beforeBody.concat(n.afterBody),k),w=e.displayColors?a+2+e.boxPadding:0,gn(i,S=>{gn(S.before,k),gn(S.lines,k),gn(S.after,k)}),w=0,r.font=h.string,gn(n.footer,k),r.restore(),y+=g.width,{width:y,height:b}}function WOe(n,e){const{y:r,height:i}=e;return r<i/2?"top":r>n.height-i/2?"bottom":"center"}function qOe(n,e,r,i){const{x:s,width:o}=i,a=r.caretSize+r.caretPadding;if(n==="left"&&s+o+a>e.width||n==="right"&&s-o-a<0)return!0}function HOe(n,e,r,i){const{x:s,width:o}=r,{width:a,chartArea:{left:l,right:c}}=n;let u="center";return i==="center"?u=s<=(l+c)/2?"left":"right":s<=o/2?u="left":s>=a-o/2&&(u="right"),qOe(u,n,e,r)&&(u="center"),u}function I$(n,e,r){const i=r.yAlign||e.yAlign||WOe(n,r);return{xAlign:r.xAlign||e.xAlign||HOe(n,e,r,i),yAlign:i}}function VOe(n,e){let{x:r,width:i}=n;return e==="right"?r-=i:e==="center"&&(r-=i/2),r}function YOe(n,e,r){let{y:i,height:s}=n;return e==="top"?i+=r:e==="bottom"?i-=s+r:i-=s/2,i}function A$(n,e,r,i){const{caretSize:s,caretPadding:o,cornerRadius:a}=n,{xAlign:l,yAlign:c}=r,u=s+o,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=Ef(a);let g=VOe(e,l);const b=YOe(e,c,u);return c==="center"?l==="left"?g+=u:l==="right"&&(g-=u):l==="left"?g-=Math.max(h,f)+s:l==="right"&&(g+=Math.max(d,m)+s),{x:Vs(g,0,i.width-e.width),y:Vs(b,0,i.height-e.height)}}function Uv(n,e,r){const i=di(r.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function R$(n){return Ho([],Wa(n))}function GOe(n,e,r){return eh(n,{tooltip:e,tooltipItems:r,type:"tooltip"})}function N$(n,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?n.override(r):n}const gre={beforeTitle:ja,title(n){if(n.length>0){const e=n[0],r=e.chart.data.labels,i=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return r[e.dataIndex]}return""},afterTitle:ja,beforeBody:ja,beforeLabel:ja,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const r=n.formattedValue;return On(r)||(e+=r),e},labelColor(n){const r=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const r=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ja,afterBody:ja,beforeFooter:ja,footer:ja,afterFooter:ja};function Ai(n,e,r,i){const s=n[e].call(r,i);return typeof s>"u"?gre[e].call(r,i):s}class mA extends Qi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new Z3(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=GOe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:i}=r,s=Ai(i,"beforeTitle",this,e),o=Ai(i,"title",this,e),a=Ai(i,"afterTitle",this,e);let l=[];return l=Ho(l,Wa(s)),l=Ho(l,Wa(o)),l=Ho(l,Wa(a)),l}getBeforeBody(e,r){return R$(Ai(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:i}=r,s=[];return gn(e,o=>{const a={before:[],lines:[],after:[]},l=N$(i,o);Ho(a.before,Wa(Ai(l,"beforeLabel",this,o))),Ho(a.lines,Ai(l,"label",this,o)),Ho(a.after,Wa(Ai(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,r){return R$(Ai(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:i}=r,s=Ai(i,"beforeFooter",this,e),o=Ai(i,"footer",this,e),a=Ai(i,"afterFooter",this,e);let l=[];return l=Ho(l,Wa(s)),l=Ho(l,Wa(o)),l=Ho(l,Wa(a)),l}_createItems(e){const r=this._active,i=this.chart.data,s=[],o=[],a=[];let l=[],c,u;for(c=0,u=r.length;c<u;++c)l.push(UOe(this.chart,r[c]));return e.filter&&(l=l.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(l=l.sort((h,d)=>e.itemSort(h,d,i))),gn(l,h=>{const d=N$(e.callbacks,h);s.push(Ai(d,"labelColor",this,h)),o.push(Ai(d,"labelPointStyle",this,h)),a.push(Ai(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,r){const i=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const l=Cg[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const c=this._size=O$(this,i),u=Object.assign({},l,c),h=I$(this.chart,i,u),d=A$(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,i,s){const o=this.getCaretPosition(e,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,i){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=Ef(l),{x:f,y:m}=e,{width:g,height:b}=r;let y,v,w,k,S,_;return o==="center"?(S=m+b/2,s==="left"?(y=f,v=y-a,k=S+a,_=S-a):(y=f+g,v=y+a,k=S-a,_=S+a),w=y):(s==="left"?v=f+Math.max(c,h)+a:s==="right"?v=f+g-Math.max(u,d)-a:v=this.caretX,o==="top"?(k=m,S=k-a,y=v-a,w=v+a):(k=m+b,S=k+a,y=v+a,w=v-a),_=k),{x1:y,x2:v,x3:w,y1:k,y2:S,y3:_}}drawTitle(e,r,i){const s=this.title,o=s.length;let a,l,c;if(o){const u=Tf(i.rtl,this.x,this.width);for(e.x=Uv(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=Tr(i.titleFont),l=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,r,i,s,o){const a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=o,h=Tr(o.bodyFont),d=Uv(this,"left",o),f=s.x(d),m=c<h.lineHeight?(h.lineHeight-c)/2:0,g=r.y+m;if(o.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,v=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,dA(e,b,y,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,dA(e,b,y,v)}else{e.lineWidth=Yt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const b=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),v=Ef(a.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Zw(e,{x:b,y:g,w:u,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Zw(e,{x:y,y:g+1,w:u-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(b,g,u,c),e.strokeRect(b,g,u,c),e.fillStyle=a.backgroundColor,e.fillRect(y,g+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,r,i){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:h}=i,d=Tr(i.bodyFont);let f=d.lineHeight,m=0;const g=Tf(i.rtl,this.x,this.width),b=function(T){r.fillText(T,g.x(e.x+m),e.y+f/2),e.y+=f+o},y=g.textAlign(a);let v,w,k,S,_,C,P;for(r.textAlign=a,r.textBaseline="middle",r.font=d.string,e.x=Uv(this,y,i),r.fillStyle=i.bodyColor,gn(this.beforeBody,b),m=l&&y!=="right"?a==="center"?u/2+h:u+2+h:0,S=0,C=s.length;S<C;++S){for(v=s[S],w=this.labelTextColors[S],r.fillStyle=w,gn(v.before,b),k=v.lines,l&&k.length&&(this._drawColorBox(r,e,S,g,i),f=Math.max(d.lineHeight,c)),_=0,P=k.length;_<P;++_)b(k[_]),f=d.lineHeight;gn(v.after,b)}m=0,f=d.lineHeight,gn(this.afterBody,b),e.y-=o}drawFooter(e,r,i){const s=this.footer,o=s.length;let a,l;if(o){const c=Tf(i.rtl,this.x,this.width);for(e.x=Uv(this,i.footerAlign,i),e.y+=i.footerMarginTop,r.textAlign=c.textAlign(i.footerAlign),r.textBaseline="middle",a=Tr(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,r,i,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:g}=Ef(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(l+d,c),a==="top"&&this.drawCaret(e,r,i,s),r.lineTo(l+u-f,c),r.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&o==="right"&&this.drawCaret(e,r,i,s),r.lineTo(l+u,c+h-g),r.quadraticCurveTo(l+u,c+h,l+u-g,c+h),a==="bottom"&&this.drawCaret(e,r,i,s),r.lineTo(l+m,c+h),r.quadraticCurveTo(l,c+h,l,c+h-m),a==="center"&&o==="left"&&this.drawCaret(e,r,i,s),r.lineTo(l,c+d),r.quadraticCurveTo(l,c,l+d,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const a=Cg[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=O$(this,e),c=Object.assign({},a,this._size),u=I$(r,e,c),h=A$(e,c,u,r);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=di(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,s,r),Zne(e,r.textDirection),o.y+=a.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),ere(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const i=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Gw(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(e,o,r,i),l=this._positionChanged(a,e),c=r||!Gw(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,i,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:i,caretY:s,options:o}=this,a=Cg[o.position].call(this,e,r);return a!==!1&&(i!==a.x||s!==a.y)}}Be(mA,"positioners",Cg);var KOe={id:"tooltip",_element:mA,positioners:Cg,afterInit(n,e,r){r&&(n.tooltip=new mA({chart:n,options:r}))},beforeUpdate(n,e,r){n.tooltip&&n.tooltip.initialize(r)},reset(n,e,r){n.tooltip&&n.tooltip.initialize(r)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",r)}},afterEvent(n,e){if(n.tooltip){const r=e.replay;n.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gre},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const XOe=(n,e,r,i)=>(typeof e=="string"?(r=n.push(e)-1,i.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function QOe(n,e,r,i){const s=n.indexOf(e);if(s===-1)return XOe(n,e,r,i);const o=n.lastIndexOf(e);return s!==o?r:s}const JOe=(n,e)=>n===null?null:Vs(Math.round(n),0,e);function j$(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class gA extends rm{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(On(e))return null;const i=this.getLabels();return r=isFinite(r)&&i[r]===e?r:QOe(i,e,Ut(r,e),this._addedLabels),JOe(r,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,r=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=r;a++)s.push({value:a});return s}getLabelForValue(e){return j$.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Be(gA,"id","category"),Be(gA,"defaults",{ticks:{callback:j$}});function ZOe(n,e){const r=[],{bounds:s,step:o,min:a,max:l,precision:c,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=n,m=o||1,g=h-1,{min:b,max:y}=e,v=!On(a),w=!On(l),k=!On(u),S=(y-b)/(d+1);let _=z6((y-b)/g/m)*m,C,P,T,O;if(_<1e-14&&!v&&!w)return[{value:b},{value:y}];O=Math.ceil(y/_)-Math.floor(b/_),O>g&&(_=z6(O*_/g/m)*m),On(c)||(C=Math.pow(10,c),_=Math.ceil(_*C)/C),s==="ticks"?(P=Math.floor(b/_)*_,T=Math.ceil(y/_)*_):(P=b,T=y),v&&w&&o&&$Pe((l-a)/o,_/1e3)?(O=Math.round(Math.min((l-a)/_,h)),_=(l-a)/O,P=a,T=l):k?(P=v?a:P,T=w?l:T,O=u-1,_=(T-P)/O):(O=(T-P)/_,Kg(O,Math.round(O),_/1e3)?O=Math.round(O):O=Math.ceil(O));const D=Math.max(U6(_),U6(P));C=Math.pow(10,On(c)?D:c),P=Math.round(P*C)/C,T=Math.round(T*C)/C;let I=0;for(v&&(f&&P!==a?(r.push({value:a}),P<a&&I++,Kg(Math.round((P+I*_)*C)/C,a,L$(a,S,n))&&I++):P<a&&I++);I<O;++I){const U=Math.round((P+I*_)*C)/C;if(w&&U>l)break;r.push({value:U})}return w&&f&&T!==l?r.length&&Kg(r[r.length-1].value,l,L$(l,S,n))?r[r.length-1].value=l:r.push({value:l}):(!w||T===l)&&r.push({value:T}),r}function L$(n,e,{horizontal:r,minRotation:i}){const s=jr(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+n).length;return Math.min(e/o,a)}class eIe extends rm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return On(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const a=c=>s=r?s:c,l=c=>o=i?o:c;if(e){const c=Op(s),u=Op(o);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(s===o){let c=o===0?1:Math.abs(o*.05);l(o+c),e||a(s-c)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},o=this._range||this,a=ZOe(s,o);return e.bounds==="ticks"&&BPe(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-r)/Math.max(e.length-1,1)/2;r-=s,i+=s}this._startValue=r,this._endValue=i,this._valueRange=i-r}getLabelForValue(e){return Y3(e,this.chart.options.locale,this.options.ticks.format)}}class bA extends eIe{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Gi(e)?e:0,this.max=Gi(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,i=jr(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Be(bA,"id","linear"),Be(bA,"defaults",{ticks:{callback:Hne.formatters.numeric}});const A_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bi=Object.keys(A_);function F$(n,e){return n-e}function $$(n,e){if(On(e))return null;const r=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let a=e;return typeof i=="function"&&(a=i(a)),Gi(a)||(a=typeof i=="string"?r.parse(a,i):r.parse(a)),a===null?null:(s&&(a=s==="week"&&(Ld(o)||o===!0)?r.startOf(a,"isoWeek",o):r.startOf(a,s)),+a)}function B$(n,e,r,i){const s=Bi.length;for(let o=Bi.indexOf(n);o<s-1;++o){const a=A_[Bi[o]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(l*a.size))<=i)return Bi[o]}return Bi[s-1]}function tIe(n,e,r,i,s){for(let o=Bi.length-1;o>=Bi.indexOf(r);o--){const a=Bi[o];if(A_[a].common&&n._adapter.diff(s,i,a)>=e-1)return a}return Bi[r?Bi.indexOf(r):0]}function nIe(n){for(let e=Bi.indexOf(n)+1,r=Bi.length;e<r;++e)if(A_[Bi[e]].common)return Bi[e]}function z$(n,e,r){if(!r)n[e]=!0;else if(r.length){const{lo:i,hi:s}=q3(r,e),o=r[i]>=e?r[i]:r[s];n[o]=!0}}function rIe(n,e,r,i){const s=n._adapter,o=+s.startOf(e[0].value,i),a=e[e.length-1].value;let l,c;for(l=o;l<=a;l=+s.add(l,1,i))c=r[l],c>=0&&(e[c].major=!0);return e}function U$(n,e,r){const i=[],s={},o=e.length;let a,l;for(a=0;a<o;++a)l=e[a],s[l]=a,i.push({value:l,major:!1});return o===0||!r?i:rIe(n,i,s,r)}class n1 extends rm{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const i=e.time||(e.time={}),s=this._adapter=new gDe._date(e.adapters.date);s.init(r),Gg(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:$$(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,i=e.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Gi(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=Gi(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],i=e[e.length-1]),{min:r,max:i}}buildTicks(){const e=this.options,r=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,a=this.max,l=qPe(s,o,a);return this._unit=r.unit||(i.autoSkip?B$(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):tIe(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:nIe(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),U$(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,i=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=Vs(r,0,a),i=Vs(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||B$(o.minUnit,r,i,this._getLabelCapacity(r)),l=Ut(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Ld(c)||c===!0,h={};let d=r,f,m;if(u&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,u?"day":a),e.diff(i,r,a)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+a);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,l,a),m++)z$(h,f,g);return(f===i||s.bounds==="ticks"||m===1)&&z$(h,f,g),Object.keys(h).sort(F$).map(b=>+b)}getLabelForValue(e){const r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(e,i.tooltipFormat):r.format(e,i.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,r,i,s){const o=this.options,a=o.ticks.callback;if(a)return xn(a,[e,r,i],this);const l=o.time.displayFormats,c=this._unit,u=this._majorUnit,h=c&&l[c],d=u&&l[u],f=i[r],m=u&&d&&f&&f.major;return this._adapter.format(e,s||(m?d:h))}generateTickLabels(e){let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(e){const r=this._offsets,i=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,i=this.ctx.measureText(e).width,s=jr(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*o+l*a,h:i*a+l*o}}_getLabelCapacity(e){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(e,0,U$(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,i;if(e.length)return e;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)e.push($$(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return VPe(e.sort(F$))}}Be(n1,"id","time"),Be(n1,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wv(n,e,r){let i=0,s=n.length-1,o,a,l,c;r?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Ju(n,"pos",e)),{pos:o,time:l}=n[i],{pos:a,time:c}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Ju(n,"time",e)),{time:o,pos:l}=n[i],{time:a,pos:c}=n[s]);const u=a-o;return u?l+(c-l)*(e-o)/u:l}class W$ extends n1{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Wv(r,this.min),this._tableRange=Wv(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:i}=this,s=[],o=[];let a,l,c,u,h;for(a=0,l=e.length;a<l;++a)u=e[a],u>=r&&u<=i&&s.push(u);if(s.length<2)return[{time:r,pos:0},{time:i,pos:1}];for(a=0,l=s.length;a<l;++a)h=s[a+1],c=s[a-1],u=s[a],Math.round((h+c)/2)!==u&&o.push({time:u,pos:a/(l-1)});return o}_generate(){const e=this.min,r=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(r)||i.length===1)&&i.push(r),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),i=this.getLabelTimestamps();return r.length&&i.length?e=this.normalize(r.concat(i)):e=r.length?r:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Wv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,i=this.getDecimalForPixel(e)/r.factor-r.end;return Wv(this._table,i*this._tableRange+this._minPos,!0)}}Be(W$,"id","timeseries"),Be(W$,"defaults",n1.defaults);const bre="label";function q$(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function iIe(n,e){const r=n.options;r&&e&&Object.assign(r,e)}function yre(n,e){n.labels=e}function vre(n,e,r=bre){const i=[];n.datasets=e.map(s=>{const o=n.datasets.find(a=>a[r]===s[r]);return!o||!s.data||i.includes(o)?{...s}:(i.push(o),Object.assign(o,s),o)})}function sIe(n,e=bre){const r={labels:[],datasets:[]};return yre(r,n.labels),vre(r,n.datasets,e),r}function oIe(n,e){const{height:r=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d,...f}=n,m=E.useRef(null),g=E.useRef(null),b=()=>{m.current&&(g.current=new vd(m.current,{type:a,data:sIe(l,o),options:c&&{...c},plugins:u}),q$(e,g.current))},y=()=>{q$(e,null),g.current&&(g.current.destroy(),g.current=null)};return E.useEffect(()=>{!s&&g.current&&c&&iIe(g.current,c)},[s,c]),E.useEffect(()=>{!s&&g.current&&yre(g.current.config.data,l.labels)},[s,l.labels]),E.useEffect(()=>{!s&&g.current&&l.datasets&&vre(g.current.config.data,l.datasets,o)},[s,l.datasets]),E.useEffect(()=>{g.current&&(s?(y(),setTimeout(b)):g.current.update(d))},[s,c,l.labels,l.datasets,d]),E.useEffect(()=>{g.current&&(y(),setTimeout(b))},[a]),E.useEffect(()=>(b(),()=>y()),[]),p.jsx("canvas",{ref:m,role:"img",height:r,width:i,...f,children:h})}const aIe=E.forwardRef(oIe);function lIe(n,e){return vd.register(e),E.forwardRef((r,i)=>p.jsx(aIe,{...r,ref:i,type:n}))}const cIe=lIe("scatter",Ax);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const H$={modes:{point(n,e){return Lx(n,e,{intersect:!0})},nearest(n,e,r){return hIe(n,e,r)},x(n,e,r){return Lx(n,e,{intersect:r.intersect,axis:"x"})},y(n,e,r){return Lx(n,e,{intersect:r.intersect,axis:"y"})}}};function t5(n,e,r){return(H$.modes[r.mode]||H$.modes.nearest)(n,e,r)}function uIe(n,e,r){return r!=="x"&&r!=="y"?n.inRange(e.x,e.y,"x",!0)||n.inRange(e.x,e.y,"y",!0):n.inRange(e.x,e.y,r,!0)}function dIe(n,e,r){return r==="x"?{x:n.x,y:e.y}:r==="y"?{x:e.x,y:n.y}:e}function Lx(n,e,r){return n.filter(i=>r.intersect?i.inRange(e.x,e.y):uIe(i,e,r.axis))}function hIe(n,e,r){let i=Number.POSITIVE_INFINITY;return Lx(n,e,r).reduce((s,o)=>{const a=o.getCenterPoint(),l=dIe(e,a,r.axis),c=Ip(e,l);return c<i?(s=[o],i=c):c===i&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function th(n,e,r){const i=Math.cos(r),s=Math.sin(r),o=e.x,a=e.y;return{x:o+i*(n.x-o)-s*(n.y-a),y:a+s*(n.x-o)+i*(n.y-a)}}const fIe=(n,e)=>e>n||n.length>e.length&&n.slice(0,e.length)===e,Zu=.001,R_=(n,e,r)=>Math.min(r,Math.max(e,n)),xre=(n,e)=>n.value>=n.start-e&&n.value<=n.end+e;function pIe(n,e,r){for(const i of Object.keys(n))n[i]=R_(n[i],e,r);return n}function mIe(n,e,r,i){return!n||!e||r<=0?!1:Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)<=Math.pow(r+i,2)}function wre(n,{x:e,y:r,x2:i,y2:s},o,{borderWidth:a,hitTolerance:l}){const c=(a+l)/2,u=n.x>=e-c-Zu&&n.x<=i+c+Zu,h=n.y>=r-c-Zu&&n.y<=s+c+Zu;return o==="x"?u:(o==="y"||u)&&h}function _re(n,{rect:e,center:r},i,{rotation:s,borderWidth:o,hitTolerance:a}){const l=th(n,r,jr(-s));return wre(l,e,i,{borderWidth:o,hitTolerance:a})}function nh(n,e){const{centerX:r,centerY:i}=n.getProps(["centerX","centerY"],e);return{x:r,y:i}}function gIe(n,e,r,i=!0){const s=r.split(".");let o=0;for(const a of e.split(".")){const l=s[o++];if(parseInt(a,10)<parseInt(l,10))break;if(fIe(l,a)){if(i)throw new Error(`${n} v${r} is not supported. v${e} or newer is required.`);return!1}}return!0}const Sre=n=>typeof n=="string"&&n.endsWith("%"),kre=n=>parseFloat(n)/100,Cre=n=>R_(kre(n),0,1),Xm=(n,e)=>({x:n,y:e,x2:n,y2:e,width:0,height:0}),bIe={box:n=>Xm(n.centerX,n.centerY),doughnutLabel:n=>Xm(n.centerX,n.centerY),ellipse:n=>({centerX:n.centerX,centerY:n.centerX,radius:0,width:0,height:0}),label:n=>Xm(n.centerX,n.centerY),line:n=>Xm(n.x,n.y),point:n=>({centerX:n.centerX,centerY:n.centerY,radius:0,width:0,height:0}),polygon:n=>Xm(n.centerX,n.centerY)};function n5(n,e){return e==="start"?0:e==="end"?n:Sre(e)?Cre(e)*n:n/2}function Zc(n,e,r=!0){return typeof e=="number"?e:Sre(e)?(r?Cre(e):kre(e))*n:n}function yIe(n,e){const{x:r,width:i}=n,s=e.textAlign;return s==="center"?r+i/2:s==="end"||s==="right"?r+i:r}function Ere(n,e,{borderWidth:r,position:i,xAdjust:s,yAdjust:o},a){const l=Yt(a),c=e.width+(l?a.width:0)+r,u=e.height+(l?a.height:0)+r,h=r5(i),d=V$(n.x,c,s,h.x),f=V$(n.y,u,o,h.y);return{x:d,y:f,x2:d+c,y2:f+u,width:c,height:u,centerX:d+c/2,centerY:f+u/2}}function r5(n,e="center"){return Yt(n)?{x:Ut(n.x,e),y:Ut(n.y,e)}:(n=Ut(n,e),{x:n,y:n})}const Tre=(n,e)=>n&&n.autoFit&&e<1;function Pre(n,e){const r=n.font,i=Gn(r)?r:[r];return Tre(n,e)?i.map(function(s){const o=Tr(s);return o.size=Math.floor(s.size*e),o.lineHeight=s.lineHeight,Tr(o)}):i.map(s=>Tr(s))}function Mre(n){return n&&(vs(n.xValue)||vs(n.yValue))}function V$(n,e,r=0,i){return n-n5(e,i)+r}function im(n,e,r){const i=r.init;if(i){if(i===!0)return Ore(e,r)}else return;return vIe(n,e,r)}function Dre(n,e,r){let i=!1;return e.forEach(s=>{Vi(n[s])?(i=!0,r[s]=n[s]):vs(r[s])&&delete r[s]}),i}function Ore(n,e){const r=e.type||"line";return bIe[r](n)}function vIe(n,e,r){const i=xn(r.init,[{chart:n,properties:e,options:r}]);if(i===!0)return Ore(e,r);if(Yt(i))return i}const TC=new Map,xIe=n=>isNaN(n)||n<=0,wIe=n=>n.reduce(function(e,r){return e+=r.string,e},"");function N_(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function j_(n,{x:e,y:r},i){i&&(n.translate(e,r),n.rotate(jr(i)),n.translate(-e,-r))}function Pl(n,e){if(e&&e.borderWidth)return n.lineCap=e.borderCapStyle||"butt",n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.lineJoin=e.borderJoinStyle||"miter",n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,!0}function sm(n,e){n.shadowColor=e.backgroundShadowColor,n.shadowBlur=e.shadowBlur,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY}function L_(n,e){const r=e.content;if(N_(r))return{width:Zc(r.width,e.width),height:Zc(r.height,e.height)};const i=Pre(e),s=e.textStrokeWidth,o=Gn(r)?r:[r],a=o.join()+wIe(i)+s+(n._measureText?"-spriting":"");return TC.has(a)||TC.set(a,CIe(n,o,i,s)),TC.get(a)}function Ire(n,e,r){const{x:i,y:s,width:o,height:a}=e;n.save(),sm(n,r);const l=Pl(n,r);n.fillStyle=r.backgroundColor,n.beginPath(),Zw(n,{x:i,y:s,w:o,h:a,radius:pIe(Ef(r.borderRadius),0,Math.min(o,a)/2)}),n.closePath(),n.fill(),l&&(n.shadowColor=r.borderShadowColor,n.stroke()),n.restore()}function Are(n,e,r,i){const s=r.content;if(N_(s)){n.save(),n.globalAlpha=PIe(r.opacity,s.style.opacity),n.drawImage(s,e.x,e.y,e.width,e.height),n.restore();return}const o=Gn(s)?s:[s],a=Pre(r,i),l=r.color,c=Gn(l)?l:[l],u=yIe(e,r),h=e.y+r.textStrokeWidth/2;n.save(),n.textBaseline="middle",n.textAlign=r.textAlign,_Ie(n,r)&&EIe(n,{x:u,y:h},o,a),TIe(n,{x:u,y:h},o,{fonts:a,colors:c}),n.restore()}function _Ie(n,e){if(e.textStrokeWidth>0)return n.lineJoin="round",n.miterLimit=2,n.lineWidth=e.textStrokeWidth,n.strokeStyle=e.textStrokeColor,!0}function SIe(n,e,r,i){const{radius:s,options:o}=e,a=o.pointStyle,l=o.rotation;let c=(l||0)*W3;if(N_(a)){n.save(),n.translate(r,i),n.rotate(c),n.drawImage(a,-a.width/2,-a.height/2,a.width,a.height),n.restore();return}xIe(s)||kIe(n,{x:r,y:i,radius:s,rotation:l,style:a,rad:c})}function kIe(n,{x:e,y:r,radius:i,rotation:s,style:o,rad:a}){let l,c,u,h;switch(n.beginPath(),o){default:n.arc(e,r,i,0,Xr),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(a)*i,r-Math.cos(a)*i),a+=Qw,n.lineTo(e+Math.sin(a)*i,r-Math.cos(a)*i),a+=Qw,n.lineTo(e+Math.sin(a)*i,r-Math.cos(a)*i),n.closePath();break;case"rectRounded":h=i*.516,u=i-h,l=Math.cos(a+zs)*u,c=Math.sin(a+zs)*u,n.arc(e-l,r-c,h,a-hn,a-Qr),n.arc(e+c,r-l,h,a-Qr,a),n.arc(e+l,r+c,h,a,a+Qr),n.arc(e-c,r+l,h,a+Qr,a+hn),n.closePath();break;case"rect":if(!s){u=Math.SQRT1_2*i,n.rect(e-u,r-u,2*u,2*u);break}a+=zs;case"rectRot":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+c,r-l),n.lineTo(e+l,r+c),n.lineTo(e-c,r+l),n.closePath();break;case"crossRot":a+=zs;case"cross":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l);break;case"star":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l),a+=zs,l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c),n.moveTo(e+c,r-l),n.lineTo(e-c,r+l);break;case"line":l=Math.cos(a)*i,c=Math.sin(a)*i,n.moveTo(e-l,r-c),n.lineTo(e+l,r+c);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(a)*i,r+Math.sin(a)*i);break}n.fill()}function CIe(n,e,r,i){n.save();const s=e.length;let o=0,a=i;for(let l=0;l<s;l++){const c=r[Math.min(l,r.length-1)];n.font=c.string;const u=e[l];o=Math.max(o,n.measureText(u).width+i),a+=c.lineHeight}return n.restore(),{width:o,height:a}}function EIe(n,{x:e,y:r},i,s){n.beginPath();let o=0;i.forEach(function(a,l){const c=s[Math.min(l,s.length-1)],u=c.lineHeight;n.font=c.string,n.strokeText(a,e,r+u/2+o),o+=u}),n.stroke()}function TIe(n,{x:e,y:r},i,{fonts:s,colors:o}){let a=0;i.forEach(function(l,c){const u=o[Math.min(c,o.length-1)],h=s[Math.min(c,s.length-1)],d=h.lineHeight;n.beginPath(),n.font=h.string,n.fillStyle=u,n.fillText(l,e,r+d/2+a),a+=d,n.fill()})}function PIe(n,e){const r=Ld(n)?n:e;return Ld(r)?R_(r,0,1):1}const Rre=["left","bottom","top","right"];function MIe(n,e){const{pointX:r,pointY:i,options:s}=e,o=s.callout,a=o&&o.display&&RIe(e,o);if(!a||jIe(e,o,a))return;if(n.save(),n.beginPath(),!Pl(n,o))return n.restore();const{separatorStart:c,separatorEnd:u}=DIe(e,a),{sideStart:h,sideEnd:d}=IIe(e,a,c);(o.margin>0||s.borderWidth===0)&&(n.moveTo(c.x,c.y),n.lineTo(u.x,u.y)),n.moveTo(h.x,h.y),n.lineTo(d.x,d.y);const f=th({x:r,y:i},e.getCenterPoint(),jr(-e.rotation));n.lineTo(f.x,f.y),n.stroke(),n.restore()}function DIe(n,e){const{x:r,y:i,x2:s,y2:o}=n,a=OIe(n,e);let l,c;return e==="left"||e==="right"?(l={x:r+a,y:i},c={x:l.x,y:o}):(l={x:r,y:i+a},c={x:s,y:l.y}),{separatorStart:l,separatorEnd:c}}function OIe(n,e){const{width:r,height:i,options:s}=n,o=s.callout.margin+s.borderWidth/2;return e==="right"?r+o:e==="bottom"?i+o:-o}function IIe(n,e,r){const{y:i,width:s,height:o,options:a}=n,l=a.callout.start,c=AIe(e,a.callout);let u,h;return e==="left"||e==="right"?(u={x:r.x,y:i+Zc(o,l)},h={x:u.x+c,y:u.y}):(u={x:r.x+Zc(s,l),y:r.y},h={x:u.x,y:u.y+c}),{sideStart:u,sideEnd:h}}function AIe(n,e){const r=e.side;return n==="left"||n==="top"?-r:r}function RIe(n,e){const r=e.position;return Rre.includes(r)?r:NIe(n,e)}function NIe(n,e){const{x:r,y:i,x2:s,y2:o,width:a,height:l,pointX:c,pointY:u,centerX:h,centerY:d,rotation:f}=n,m={x:h,y:d},g=e.start,b=Zc(a,g),y=Zc(l,g),v=[r,r+b,r+b,s],w=[i+y,o,i,o],k=[];for(let S=0;S<4;S++){const _=th({x:v[S],y:w[S]},m,jr(f));k.push({position:Rre[S],distance:Ip(_,{x:c,y:u})})}return k.sort((S,_)=>S.distance-_.distance)[0].position}function jIe(n,e,r){const{pointX:i,pointY:s}=n,o=e.margin;let a=i,l=s;return r==="left"?a+=o:r==="right"?a-=o:r==="top"?l+=o:r==="bottom"&&(l-=o),n.inRange(a,l)}const Y$={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Np(n,e,r){return e=typeof e=="number"?e:n.parse(e),Gi(e)?n.getPixelForValue(e):r}function $d(n,e,r){const i=e[r];if(i||r==="scaleID")return i;const s=r.charAt(0),o=Object.values(n).filter(a=>a.axis&&a.axis===s);return o.length?o[0].id:s}function Nre(n,e){if(n){const r=n.options.reverse,i=Np(n,e.min,r?e.end:e.start),s=Np(n,e.max,r?e.start:e.end);return{start:i,end:s}}}function jre(n,e){const{chartArea:r,scales:i}=n,s=i[$d(i,e,"xScaleID")],o=i[$d(i,e,"yScaleID")];let a=r.width/2,l=r.height/2;return s&&(a=Np(s,e.xValue,s.left+s.width/2)),o&&(l=Np(o,e.yValue,o.top+o.height/2)),{x:a,y:l}}function i5(n,e){const r=n.scales,i=r[$d(r,e,"xScaleID")],s=r[$d(r,e,"yScaleID")];if(!i&&!s)return{};let{left:o,right:a}=i||n.chartArea,{top:l,bottom:c}=s||n.chartArea;const u=G$(i,{min:e.xMin,max:e.xMax,start:o,end:a});o=u.start,a=u.end;const h=G$(s,{min:e.yMin,max:e.yMax,start:c,end:l});return l=h.start,c=h.end,{x:o,y:l,x2:a,y2:c,width:a-o,height:c-l,centerX:o+(a-o)/2,centerY:l+(c-l)/2}}function Lre(n,e){if(!Mre(e)){const r=i5(n,e);let i=e.radius;(!i||isNaN(i))&&(i=Math.min(r.width,r.height)/2,e.radius=i);const s=i*2,o=r.centerX+e.xAdjust,a=r.centerY+e.yAdjust;return{x:o-i,y:a-i,x2:o+i,y2:a+i,centerX:o,centerY:a,width:s,height:s,radius:i}}return FIe(n,e)}function LIe(n,e){const{scales:r,chartArea:i}=n,s=r[e.scaleID],o={x:i.left,y:i.top,x2:i.right,y2:i.bottom};return s?$Ie(s,o,e):BIe(r,o,e),o}function Fre(n,e){const r=i5(n,e);return r.initProperties=im(n,r,e),r.elements=[{type:"label",optionScope:"label",properties:WIe(n,r,e),initProperties:r.initProperties}],r}function FIe(n,e){const r=jre(n,e),i=e.radius*2;return{x:r.x-e.radius+e.xAdjust,y:r.y-e.radius+e.yAdjust,x2:r.x+e.radius+e.xAdjust,y2:r.y+e.radius+e.yAdjust,centerX:r.x+e.xAdjust,centerY:r.y+e.yAdjust,radius:e.radius,width:i,height:i}}function G$(n,e){const r=Nre(n,e)||e;return{start:Math.min(r.start,r.end),end:Math.max(r.start,r.end)}}function $Ie(n,e,r){const i=Np(n,r.value,NaN),s=Np(n,r.endValue,i);n.isHorizontal()?(e.x=i,e.x2=s):(e.y=i,e.y2=s)}function BIe(n,e,r){for(const i of Object.keys(Y$)){const s=n[$d(n,r,i)];if(s){const{min:o,max:a,start:l,end:c,startProp:u,endProp:h}=Y$[i],d=Nre(s,{min:r[o],max:r[a],start:s[l],end:s[c]});e[u]=d.start,e[h]=d.end}}}function zIe({properties:n,options:e},r,i,s){const{x:o,x2:a,width:l}=n;return $re({start:o,end:a,borderWidth:e.borderWidth},{position:i.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:r.width})}function UIe({properties:n,options:e},r,i,s){const{y:o,y2:a,height:l}=n;return $re({start:o,end:a,borderWidth:e.borderWidth},{position:i.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:r.height})}function $re(n,e){const{start:r,end:i,borderWidth:s}=n,{position:o,padding:{start:a,end:l},adjust:c}=e,u=i-s-r-a-l-e.size;return r+s/2+c+n5(u,o)}function WIe(n,e,r){const i=r.label;i.backgroundColor="transparent",i.callout.display=!1;const s=r5(i.position),o=di(i.padding),a=L_(n.ctx,i),l=zIe({properties:e,options:r},a,s,o),c=UIe({properties:e,options:r},a,s,o),u=a.width+o.width,h=a.height+o.height;return{x:l,y:c,x2:l+u,y2:c+h,width:u,height:h,centerX:l+u/2,centerY:c+h/2,rotation:i.rotation}}const yA=["enter","leave"],s5=yA.concat("click");function qIe(n,e,r){e.listened=Dre(r,s5,e.listeners),e.moveListened=!1,yA.forEach(i=>{Vi(r[i])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(i=>{!e.listened&&Vi(i.click)&&(e.listened=!0),e.moveListened||yA.forEach(s=>{Vi(i[s])&&(e.listened=!0,e.moveListened=!0)})})}function HIe(n,e,r){if(n.listened)switch(e.type){case"mousemove":case"mouseout":return VIe(n,e,r);case"click":return YIe(n,e,r)}}function VIe(n,e,r){if(!n.moveListened)return;let i;e.type==="mousemove"?i=t5(n.visibleElements,e,r.interaction):i=[];const s=n.hovered;n.hovered=i;const o={state:n,event:e};let a=K$(o,"leave",s,i);return K$(o,"enter",i,s)||a}function K$({state:n,event:e},r,i,s){let o;for(const a of i)s.indexOf(a)<0&&(o=Bre(a.options[r]||n.listeners[r],a,e)||o);return o}function YIe(n,e,r){const i=n.listeners,s=t5(n.visibleElements,e,r.interaction);let o;for(const a of s)o=Bre(a.options.click||i.click,a,e)||o;return o}function Bre(n,e,r){return xn(n,[e.$context,r])===!0}const r1=["afterDraw","beforeDraw"];function GIe(n,e,r){const i=e.visibleElements;e.hooked=Dre(r,r1,e.hooks),e.hooked||i.forEach(s=>{e.hooked||r1.forEach(o=>{Vi(s.options[o])&&(e.hooked=!0)})})}function X$(n,e,r){if(n.hooked){const i=e.options[r]||n.hooks[r];return xn(i,[e.$context])}}function KIe(n,e,r){const i=eAe(n.scales,e,r);let s=Q$(e,i,"min","suggestedMin");s=Q$(e,i,"max","suggestedMax")||s,s&&Vi(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function XIe(n,e){for(const r of n)JIe(r,e)}function Q$(n,e,r,i){if(Gi(e[r])&&!QIe(n.options,r,i)){const s=n[r]!==e[r];return n[r]=e[r],s}}function QIe(n,e,r){return vs(n[e])||vs(n[r])}function JIe(n,e){for(const r of["scaleID","xScaleID","yScaleID"]){const i=$d(e,n,r);i&&!e[i]&&ZIe(n,r)&&console.warn(`No scale found with id '${i}' for annotation '${n.id}'`)}}function ZIe(n,e){if(e==="scaleID")return!0;const r=e.charAt(0);for(const i of["Min","Max","Value"])if(vs(n[r+i]))return!0;return!1}function eAe(n,e,r){const i=e.axis,s=e.id,o=i+"ScaleID",a={min:Ut(e.min,Number.NEGATIVE_INFINITY),max:Ut(e.max,Number.POSITIVE_INFINITY)};for(const l of r)l.scaleID===s?J$(l,e,["value","endValue"],a):$d(n,l,o)===s&&J$(l,e,[i+"Min",i+"Max",i+"Value"],a);return a}function J$(n,e,r,i){for(const s of r){const o=n[s];if(vs(o)){const a=e.parse(o);i.min=Math.min(i.min,a),i.max=Math.max(i.max,a)}}}class om extends Qi{inRange(e,r,i,s){const{x:o,y:a}=th({x:e,y:r},this.getCenterPoint(s),jr(-this.options.rotation));return wre({x:o,y:a},this.getProps(["x","y","x2","y2"],s),i,this.options)}getCenterPoint(e){return nh(this,e)}draw(e){e.save(),j_(e,this.getCenterPoint(),this.options.rotation),Ire(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return Fre(e,r)}}om.id="boxAnnotation";om.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};om.defaultRoutes={borderColor:"color",backgroundColor:"color"};om.descriptors={label:{_fallback:!0}};class F_ extends Qi{inRange(e,r,i,s){return _re({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},i,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return nh(this,e)}draw(e){const r=this.options;!r.display||!r.content||(oAe(e,this),e.save(),j_(e,this.getCenterPoint(),this.rotation),Are(e,this,r,this._fitRatio),e.restore())}resolveElementProperties(e,r){const i=tAe(e,r);if(!i)return{};const{controllerMeta:s,point:o,radius:a}=rAe(e,r,i);let l=L_(e.ctx,r);const c=iAe(l,a);Tre(r,c)&&(l={width:l.width*c,height:l.height*c});const{position:u,xAdjust:h,yAdjust:d}=r,f=Ere(o,l,{borderWidth:0,position:u,xAdjust:h,yAdjust:d});return{initProperties:im(e,f,r),...f,...s,rotation:r.rotation,_fitRatio:c}}}F_.id="doughnutLabelAnnotation";F_.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};F_.defaultRoutes={};function tAe(n,e){return n.getSortedVisibleDatasetMetas().reduce(function(r,i){const s=i.controller;return s instanceof _g&&nAe(n,e,i.data)&&(!r||s.innerRadius<r.controller.innerRadius)&&s.options.circumference>=90?i:r},void 0)}function nAe(n,e,r){if(!e.autoHide)return!0;for(let i=0;i<r.length;i++)if(!r[i].hidden&&n.getDataVisibility(i))return!0}function rAe({chartArea:n},e,r){const{left:i,top:s,right:o,bottom:a}=n,{innerRadius:l,offsetX:c,offsetY:u}=r.controller,h=(i+o)/2+c,d=(s+a)/2+u,f={left:Math.max(h-l,i),right:Math.min(h+l,o),top:Math.max(d-l,s),bottom:Math.min(d+l,a)},m={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},g=e.spacing+e.borderWidth/2,b=l-g,y=m.y>d,v=y?s+g:a-g,w=sAe(v,h,d,b);return{controllerMeta:{_centerX:h,_centerY:d,_radius:b,_counterclockwise:y,...w},point:m,radius:Math.min(l,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function iAe({width:n,height:e},r){const i=Math.sqrt(Math.pow(n,2)+Math.pow(e,2));return r*2/i}function sAe(n,e,r,i){const s=Math.pow(r-n,2),o=Math.pow(i,2),a=e*-2,l=Math.pow(e,2)+s-o,c=Math.pow(a,2)-4*l;if(c<=0)return{_startAngle:0,_endAngle:Xr};const u=(-a-Math.sqrt(c))/2,h=(-a+Math.sqrt(c))/2;return{_startAngle:cA({x:e,y:r},{x:u,y:n}).angle,_endAngle:cA({x:e,y:r},{x:h,y:n}).angle}}function oAe(n,e){const{_centerX:r,_centerY:i,_radius:s,_startAngle:o,_endAngle:a,_counterclockwise:l,options:c}=e;n.save();const u=Pl(n,c);n.fillStyle=c.backgroundColor,n.beginPath(),n.arc(r,i,s,o,a,l),n.closePath(),n.fill(),u&&n.stroke(),n.restore()}class Vb extends Qi{inRange(e,r,i,s){return _re({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},i,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return nh(this,e)}draw(e){const r=this.options,i=!vs(this._visible)||this._visible;!r.display||!r.content||!i||(e.save(),j_(e,this.getCenterPoint(),this.rotation),MIe(e,this),Ire(e,this,r),Are(e,aAe(this),r),e.restore())}resolveElementProperties(e,r){let i;if(Mre(r))i=jre(e,r);else{const{centerX:l,centerY:c}=i5(e,r);i={x:l,y:c}}const s=di(r.padding),o=L_(e.ctx,r),a=Ere(i,o,r,s);return{initProperties:im(e,a,r),pointX:i.x,pointY:i.y,...a,rotation:r.rotation}}}Vb.id="labelAnnotation";Vb.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Vb.defaultRoutes={borderColor:"color"};function aAe({x:n,y:e,width:r,height:i,options:s}){const o=s.borderWidth/2,a=di(s.padding);return{x:n+a.left+o,y:e+a.top+o,width:r-a.left-a.right-s.borderWidth,height:i-a.top-a.bottom-s.borderWidth}}const o5=(n,e,r)=>({x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)}),vA=(n,e,r)=>o5(e,r,Math.abs((n-e.y)/(r.y-e.y))).x,Z$=(n,e,r)=>o5(e,r,Math.abs((n-e.x)/(r.x-e.x))).y,Eg=n=>n*n,lAe=(n,e,{x:r,y:i,x2:s,y2:o},a)=>a==="y"?{start:Math.min(i,o),end:Math.max(i,o),value:e}:{start:Math.min(r,s),end:Math.max(r,s),value:n},eB=(n,e,r,i)=>(1-i)*(1-i)*n+2*(1-i)*i*e+i*i*r,xA=(n,e,r,i)=>({x:eB(n.x,e.x,r.x,i),y:eB(n.y,e.y,r.y,i)}),tB=(n,e,r,i)=>2*(1-i)*(e-n)+2*i*(r-e),nB=(n,e,r,i)=>-Math.atan2(tB(n.x,e.x,r.x,i),tB(n.y,e.y,r.y,i))+.5*hn;class Yb extends Qi{inRange(e,r,i,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y"){const a={mouseX:e,mouseY:r},{path:l,ctx:c}=this;if(l){Pl(c,this.options),c.lineWidth+=this.options.hitTolerance;const{chart:h}=this.$context,d=e*h.currentDevicePixelRatio,f=r*h.currentDevicePixelRatio,m=c.isPointInStroke(l,d,f)||wA(this,a,s);return c.restore(),m}const u=Eg(o);return hAe(this,a,u,s)||wA(this,a,s)}return cAe(this,{mouseX:e,mouseY:r},i,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return nh(this,e)}draw(e){const{x:r,y:i,x2:s,y2:o,cp:a,options:l}=this;if(e.save(),!Pl(e,l))return e.restore();sm(e,l);const c=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-i,2));if(l.curve&&a)return xAe(e,this,a,c),e.restore();const{startOpts:u,endOpts:h,startAdjust:d,endAdjust:f}=zre(this),m=Math.atan2(o-i,s-r);e.translate(r,i),e.rotate(m),e.beginPath(),e.moveTo(0+d,0),e.lineTo(c-f,0),e.shadowColor=l.borderShadowColor,e.stroke(),_A(e,0,d,u),_A(e,c,-f,h),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){const i=LIe(e,r),{x:s,y:o,x2:a,y2:l}=i,c=uAe(i,e.chartArea),u=c?dAe({x:s,y:o},{x:a,y:l},e.chartArea):{x:s,y:o,x2:a,y2:l,width:Math.abs(a-s),height:Math.abs(l-o)};if(u.centerX=(a+s)/2,u.centerY=(l+o)/2,u.initProperties=im(e,u,r),r.curve){const d={x:u.x,y:u.y},f={x:u.x2,y:u.y2};u.cp=vAe(u,r,Ip(d,f))}const h=fAe(e,u,r.label);return h._visible=c,u.elements=[{type:"label",optionScope:"label",properties:h,initProperties:u.initProperties}],u}}Yb.id="lineAnnotation";const rB={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Yb.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},rB),fill:!1,length:12,start:Object.assign({},rB),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Vb.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Yb.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Yb.defaultRoutes={borderColor:"color"};function cAe(n,{mouseX:e,mouseY:r},i,{hitSize:s,useFinalPosition:o}){const a=lAe(e,r,n.getProps(["x","y","x2","y2"],o),i);return xre(a,s)||wA(n,{mouseX:e,mouseY:r},o,i)}function uAe({x:n,y:e,x2:r,y2:i},{top:s,right:o,bottom:a,left:l}){return!(n<l&&r<l||n>o&&r>o||e<s&&i<s||e>a&&i>a)}function iB({x:n,y:e},r,{top:i,right:s,bottom:o,left:a}){return n<a&&(e=Z$(a,{x:n,y:e},r),n=a),n>s&&(e=Z$(s,{x:n,y:e},r),n=s),e<i&&(n=vA(i,{x:n,y:e},r),e=i),e>o&&(n=vA(o,{x:n,y:e},r),e=o),{x:n,y:e}}function dAe(n,e,r){const{x:i,y:s}=iB(n,e,r),{x:o,y:a}=iB(e,n,r);return{x:i,y:s,x2:o,y2:a,width:Math.abs(o-i),height:Math.abs(a-s)}}function hAe(n,{mouseX:e,mouseY:r},i=Zu,s){const{x:o,y:a,x2:l,y2:c}=n.getProps(["x","y","x2","y2"],s),u=l-o,h=c-a,d=Eg(u)+Eg(h),f=d===0?-1:((e-o)*u+(r-a)*h)/d;let m,g;return f<0?(m=o,g=a):f>1?(m=l,g=c):(m=o+f*u,g=a+f*h),Eg(e-m)+Eg(r-g)<=i}function wA(n,{mouseX:e,mouseY:r},i,s){const o=n.label;return o.options.display&&o.inRange(e,r,s,i)}function fAe(n,e,r){const i=r.borderWidth,s=di(r.padding),o=L_(n.ctx,r),a=o.width+s.width+i,l=o.height+s.height+i;return mAe(e,r,{width:a,height:l,padding:s},n.chartArea)}function pAe(n){const{x:e,y:r,x2:i,y2:s}=n,o=Math.atan2(s-r,i-e);return o>hn/2?o-hn:o<hn/-2?o+hn:o}function mAe(n,e,r,i){const{width:s,height:o,padding:a}=r,{xAdjust:l,yAdjust:c}=e,u={x:n.x,y:n.y},h={x:n.x2,y:n.y2},d=e.rotation==="auto"?pAe(n):jr(e.rotation),f=gAe(s,o,d),m=bAe(n,e,{labelSize:f,padding:a},i),g=n.cp?xA(u,n.cp,h,m):o5(u,h,m),b={size:f.w,min:i.left,max:i.right,padding:a.left},y={size:f.h,min:i.top,max:i.bottom,padding:a.top},v=oB(g.x,b)+l,w=oB(g.y,y)+c;return{x:v-s/2,y:w-o/2,x2:v+s/2,y2:w+o/2,centerX:v,centerY:w,pointX:g.x,pointY:g.y,width:s,height:o,rotation:zne(d)}}function gAe(n,e,r){const i=Math.cos(r),s=Math.sin(r);return{w:Math.abs(n*i)+Math.abs(e*s),h:Math.abs(n*s)+Math.abs(e*i)}}function bAe(n,e,r,i){let s;const o=yAe(n,i);return e.position==="start"?s=sB({w:n.x2-n.x,h:n.y2-n.y},r,e,o):e.position==="end"?s=1-sB({w:n.x-n.x2,h:n.y-n.y2},r,e,o):s=n5(1,e.position),s}function sB(n,e,r,i){const{labelSize:s,padding:o}=e,a=n.w*i.dx,l=n.h*i.dy,c=a>0&&(s.w/2+o.left-i.x)/a,u=l>0&&(s.h/2+o.top-i.y)/l;return R_(Math.max(c,u),0,.25)}function yAe(n,e){const{x:r,x2:i,y:s,y2:o}=n,a=Math.min(s,o)-e.top,l=Math.min(r,i)-e.left,c=e.bottom-Math.max(s,o),u=e.right-Math.max(r,i);return{x:Math.min(l,u),y:Math.min(a,c),dx:l<=u?1:-1,dy:a<=c?1:-1}}function oB(n,e){const{size:r,min:i,max:s,padding:o}=e,a=r/2;return r>s-i?(s+i)/2:(i>=n-o-a&&(n=i+o+a),s<=n+o+a&&(n=s-o-a),n)}function zre(n){const e=n.options,r=e.arrowHeads&&e.arrowHeads.start,i=e.arrowHeads&&e.arrowHeads.end;return{startOpts:r,endOpts:i,startAdjust:aB(n,r),endAdjust:aB(n,i)}}function aB(n,e){if(!e||!e.display)return 0;const{length:r,width:i}=e,s=n.options.borderWidth/2,o={x:r,y:i+s};return Math.abs(vA(0,o,{x:0,y:s}))}function _A(n,e,r,i){if(!i||!i.display)return;const{length:s,width:o,fill:a,backgroundColor:l,borderColor:c}=i,u=Math.abs(e-s)+r;n.beginPath(),sm(n,i),Pl(n,i),n.moveTo(u,-o),n.lineTo(e+r,0),n.lineTo(u,o),a===!0?(n.fillStyle=l||c,n.closePath(),n.fill(),n.shadowColor="transparent"):n.shadowColor=i.borderShadowColor,n.stroke()}function vAe(n,e,r){const{x:i,y:s,x2:o,y2:a,centerX:l,centerY:c}=n,u=Math.atan2(a-s,o-i),h=r5(e.controlPoint,0),d={x:l+Zc(r,h.x,!1),y:c+Zc(r,h.y,!1)};return th(d,{x:l,y:c},u)}function lB(n,{x:e,y:r},{angle:i,adjust:s},o){!o||!o.display||(n.save(),n.translate(e,r),n.rotate(i),_A(n,0,-s,o),n.restore())}function xAe(n,e,r,i){const{x:s,y:o,x2:a,y2:l,options:c}=e,{startOpts:u,endOpts:h,startAdjust:d,endAdjust:f}=zre(e),m={x:s,y:o},g={x:a,y:l},b=nB(m,r,g,0),y=nB(m,r,g,1)-hn,v=xA(m,r,g,d/i),w=xA(m,r,g,1-f/i),k=new Path2D;n.beginPath(),k.moveTo(v.x,v.y),k.quadraticCurveTo(r.x,r.y,w.x,w.y),n.shadowColor=c.borderShadowColor,n.stroke(k),e.path=k,e.ctx=n,lB(n,v,{angle:b,adjust:d},u),lB(n,w,{angle:y,adjust:f},h)}class Gb extends Qi{inRange(e,r,i,s){const o=this.options.rotation,a=(this.options.borderWidth+this.options.hitTolerance)/2;if(i!=="x"&&i!=="y")return wAe({x:e,y:r},this.getProps(["width","height","centerX","centerY"],s),o,a);const{x:l,y:c,x2:u,y2:h}=this.getProps(["x","y","x2","y2"],s),d=i==="y"?{start:c,end:h}:{start:l,end:u},f=th({x:e,y:r},this.getCenterPoint(s),jr(-o));return f[i]>=d.start-a-Zu&&f[i]<=d.end+a+Zu}getCenterPoint(e){return nh(this,e)}draw(e){const{width:r,height:i,centerX:s,centerY:o,options:a}=this;e.save(),j_(e,this.getCenterPoint(),a.rotation),sm(e,this.options),e.beginPath(),e.fillStyle=a.backgroundColor;const l=Pl(e,a);e.ellipse(s,o,i/2,r/2,hn/2,0,2*hn),e.fill(),l&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return Fre(e,r)}}Gb.id="ellipseAnnotation";Gb.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},om.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Gb.defaultRoutes={borderColor:"color",backgroundColor:"color"};Gb.descriptors={label:{_fallback:!0}};function wAe(n,e,r,i){const{width:s,height:o,centerX:a,centerY:l}=e,c=s/2,u=o/2;if(c<=0||u<=0)return!1;const h=jr(r||0),d=Math.cos(h),f=Math.sin(h),m=Math.pow(d*(n.x-a)+f*(n.y-l),2),g=Math.pow(f*(n.x-a)-d*(n.y-l),2);return m/Math.pow(c+i,2)+g/Math.pow(u+i,2)<=1.0001}class $_ extends Qi{inRange(e,r,i,s){const{x:o,y:a,x2:l,y2:c,width:u}=this.getProps(["x","y","x2","y2","width"],s),h=(this.options.borderWidth+this.options.hitTolerance)/2;return i!=="x"&&i!=="y"?mIe({x:e,y:r},this.getCenterPoint(s),u/2,h):xre(i==="y"?{start:a,end:c,value:r}:{start:o,end:l,value:e},h)}getCenterPoint(e){return nh(this,e)}draw(e){const r=this.options,i=r.borderWidth;if(r.radius<.1)return;e.save(),e.fillStyle=r.backgroundColor,sm(e,r);const s=Pl(e,r);SIe(e,this,this.centerX,this.centerY),s&&!N_(r.pointStyle)&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore(),r.borderWidth=i}resolveElementProperties(e,r){const i=Lre(e,r);return i.initProperties=im(e,i,r),i}}$_.id="pointAnnotation";$_.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};$_.defaultRoutes={borderColor:"color",backgroundColor:"color"};class B_ extends Qi{inRange(e,r,i,s){if(i!=="x"&&i!=="y")return this.options.radius>=.1&&this.elements.length>1&&SAe(this.elements,e,r,s);const o=th({x:e,y:r},this.getCenterPoint(s),jr(-this.options.rotation)),a=this.elements.map(u=>i==="y"?u.bY:u.bX),l=Math.min(...a),c=Math.max(...a);return o[i]>=l&&o[i]<=c}getCenterPoint(e){return nh(this,e)}draw(e){const{elements:r,options:i}=this;e.save(),e.beginPath(),e.fillStyle=i.backgroundColor,sm(e,i);const s=Pl(e,i);let o=!0;for(const a of r)o?(e.moveTo(a.x,a.y),o=!1):e.lineTo(a.x,a.y);e.closePath(),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,r){const i=Lre(e,r),{sides:s,rotation:o}=r,a=[],l=2*hn/s;let c=o*W3;for(let u=0;u<s;u++,c+=l){const h=_Ae(i,r,c);h.initProperties=im(e,i,r),a.push(h)}return i.elements=a,i}}B_.id="polygonAnnotation";B_.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};B_.defaultRoutes={borderColor:"color",backgroundColor:"color"};function _Ae({centerX:n,centerY:e},{radius:r,borderWidth:i,hitTolerance:s},o){const a=(i+s)/2,l=Math.sin(o),c=Math.cos(o),u={x:n+l*r,y:e-c*r};return{type:"point",optionScope:"point",properties:{x:u.x,y:u.y,centerX:u.x,centerY:u.y,bX:n+l*(r+a),bY:e-c*(r+a)}}}function SAe(n,e,r,i){let s=!1,o=n[n.length-1].getProps(["bX","bY"],i);for(const a of n){const l=a.getProps(["bX","bY"],i);l.bY>r!=o.bY>r&&e<(o.bX-l.bX)*(r-l.bY)/(o.bY-l.bY)+l.bX&&(s=!s),o=l}return s}const Hc={box:om,doughnutLabel:F_,ellipse:Gb,label:Vb,line:Yb,point:$_,polygon:B_};Object.keys(Hc).forEach(n=>{rr.describe(`elements.${Hc[n].id}`,{_fallback:"plugins.annotation.common"})});const kAe={update:Object.assign},CAe=s5.concat(r1),cB=(n,e)=>Yt(e)?kA(n,e):n,SA=n=>n==="color"||n==="font";function a5(n="line"){return Hc[n]?n:(console.warn(`Unknown annotation type: '${n}', defaulting to 'line'`),"line")}function EAe(n,e,r,i){const s=PAe(n,r.animations,i),o=e.annotations,a=OAe(e.elements,o);for(let l=0;l<o.length;l++){const c=o[l],u=Ure(a,l,c.type),h=c.setContext(DAe(n,u,a,c)),d=u.resolveElementProperties(n,h);d.skip=TAe(d),"elements"in d&&(MAe(u,d.elements,h,s),delete d.elements),vs(u.x)||Object.assign(u,d),Object.assign(u,d.initProperties),d.options=Wre(h),s.update(u,d)}}function TAe(n){return isNaN(n.x)||isNaN(n.y)}function PAe(n,e,r){return r==="reset"||r==="none"||r==="resize"?kAe:new Z3(n,e)}function MAe(n,e,r,i){const s=n.elements||(n.elements=[]);s.length=e.length;for(let o=0;o<e.length;o++){const a=e[o],l=a.properties,c=Ure(s,o,a.type,a.initProperties),u=r[a.optionScope].override(a);l.options=Wre(u),i.update(c,l)}}function Ure(n,e,r,i){const s=Hc[a5(r)];let o=n[e];return(!o||!(o instanceof s))&&(o=n[e]=new s,Object.assign(o,i)),o}function Wre(n){const e=Hc[a5(n.type)],r={};r.id=n.id,r.type=n.type,r.drawTime=n.drawTime,Object.assign(r,kA(n,e.defaults),kA(n,e.defaultRoutes));for(const i of CAe)r[i]=n[i];return r}function kA(n,e){const r={};for(const i of Object.keys(e)){const s=e[i],o=n[i];SA(i)&&Gn(o)?r[i]=o.map(a=>cB(a,s)):r[i]=cB(o,s)}return r}function DAe(n,e,r,i){return e.$context||(e.$context=Object.assign(Object.create(n.getContext()),{element:e,get elements(){return r.filter(s=>s&&s.options)},id:i.id,type:"annotation"}))}function OAe(n,e){const r=e.length,i=n.length;if(i<r){const s=r-i;n.splice(i,0,...new Array(s))}else i>r&&n.splice(r,i-r);return n}var IAe="3.1.0";const ac=new Map,uB=n=>n.type!=="doughnutLabel",AAe=s5.concat(r1);var RAe={id:"annotation",version:IAe,beforeRegister(){gIe("chart.js","4.0",vd.version)},afterRegister(){vd.register(Hc)},afterUnregister(){vd.unregister(Hc)},beforeInit(n){ac.set(n,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(n,e,r){const i=ac.get(n),s=i.annotations=[];let o=r.annotations;Yt(o)?Object.keys(o).forEach(a=>{const l=o[a];Yt(l)&&(l.id=a,s.push(l))}):Gn(o)&&s.push(...o),XIe(s.filter(uB),n.scales)},afterDataLimits(n,e){const r=ac.get(n);KIe(n,e.scale,r.annotations.filter(uB).filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(n,e,r){const i=ac.get(n);qIe(n,i,r),EAe(n,i,r,e.mode),i.visibleElements=i.elements.filter(s=>!s.skip&&s.options.display),GIe(n,i,r)},beforeDatasetsDraw(n,e,r){Qm(n,"beforeDatasetsDraw",r.clip)},afterDatasetsDraw(n,e,r){Qm(n,"afterDatasetsDraw",r.clip)},beforeDatasetDraw(n,e,r){Qm(n,e.index,r.clip)},beforeDraw(n,e,r){Qm(n,"beforeDraw",r.clip)},afterDraw(n,e,r){Qm(n,"afterDraw",r.clip)},beforeEvent(n,e,r){const i=ac.get(n);HIe(i,e.event,r)&&(e.changed=!0)},afterDestroy(n){ac.delete(n)},getAnnotations(n){const e=ac.get(n);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(n,e,r){return t5(n,e,r)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:n=>!AAe.includes(n)&&n!=="init",annotations:{_allKeys:!1,_fallback:(n,e)=>`elements.${Hc[a5(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:SA,_fallback:!0},_indexable:SA}},additionalOptionScopes:[""]};function Qm(n,e,r){const{ctx:i,chartArea:s}=n,o=ac.get(n);r&&M_(i,s);const a=NAe(o.visibleElements,e).sort((l,c)=>l.element.options.z-c.element.options.z);for(const l of a)jAe(i,s,o,l);r&&D_(i)}function NAe(n,e){const r=[];for(const i of n)if(i.options.drawTime===e&&r.push({element:i,main:!0}),i.elements&&i.elements.length)for(const s of i.elements)s.options.display&&s.options.drawTime===e&&r.push({element:s});return r}function jAe(n,e,r,i){const s=i.element;i.main?(X$(r,s,"beforeDraw"),s.draw(n,e),X$(r,s,"afterDraw")):s.draw(n,e)}vd.register(gA,bA,jx,kg,zOe,KOe,$Oe,RAe);const LAe=({minPrice:n,maxPrice:e,orders:r,pendingOrders:i=[],onAddOrder:s,onRemoveOrder:o,currentPrice:a,markPrice:l})=>{const c=E.useRef(null),[u,h]=E.useState(null),d=E.useMemo(()=>{const g=[...r,...i];return g.length>0?Math.max(...g.map(b=>b.amount),.1):.1},[r,i]),f=E.useMemo(()=>{const g=r.map(y=>({x:y.amount,y:y.price,id:y.id,side:y.side,isPending:!1})),b=i.map(y=>({x:y.amount,y:y.price,id:y.id,side:y.side,isPending:!0}));return{transition:{show:{animations:{colors:{from:"transparent"},y:{type:"number",from:0,easing:"easeOutQuart"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},y:{type:"number",to:0,easing:"easeInExpo"}}}},animation:{duration:500},datasets:[{label:"New Long Orders",data:g.filter(y=>{const v=r.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="long"||(v==null?void 0:v.side)==="buy"||!(v!=null&&v.side)}),backgroundColor:"#a1f2f7",borderColor:"green",borderWidth:2,pointRadius:13,pointHoverRadius:10},{label:"New Short Orders",data:g.filter(y=>{const v=r.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="short"||(v==null?void 0:v.side)==="sell"}),backgroundColor:"#a1f2f7",borderColor:"red",borderWidth:2,pointRadius:13,pointHoverRadius:10},{label:"Open Longs",data:b.filter(y=>{const v=i.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="long"||(v==null?void 0:v.side)==="buy"}),backgroundColor:"rgba(40, 167, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10},{label:"Open Shorts",data:b.filter(y=>{const v=i.find(w=>w.id===y.id);return(v==null?void 0:v.side)==="short"||(v==null?void 0:v.side)==="sell"}),backgroundColor:"rgba(220, 53, 69, 0.8)",borderColor:"#fff",borderWidth:2,borderDash:[3,3],pointRadius:6,pointHoverRadius:10}]}},[r,i]),m=E.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,backgroundColor:"#1a1a1a",plugins:{legend:{display:!0,position:"top",labels:{color:"#fff",font:{size:12}}},tooltip:{enabled:!0,callbacks:{label:g=>{const b=g.raw,y=[...r,...i].find(v=>v.id===b.id);return y?[`Price: ${y.price.toFixed(2)} USDC`,`Amount: ${y.amount.toFixed(4)} BTC`,y.isPending?`Pending ${y.side==="long"||y.side==="buy"?"Long":"Short"}`:""].filter(Boolean):`Price: ${b.y.toFixed(2)}, Amount: ${b.x.toFixed(4)}`}}},annotation:{annotations:{...a!==null&&a>=n&&a<=e?{currentPriceLine:{type:"line",xMin:0,xMax:d,yMin:a,yMax:a,borderColor:"#00ff00",borderWidth:2,borderDash:[5,5],label:{display:!0,content:`Current: ${a.toLocaleString()}`,position:"end",backgroundColor:"rgba(0, 255, 0, 0.8)",color:"#000",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y"}}:{},...l!==null&&l>=n&&l<=e?{markPriceLine:{type:"line",xMin:0,xMax:d,yMin:l,yMax:l,borderColor:"#ff0000",borderWidth:2,label:{display:!0,content:`Mark Price: ${l.toLocaleString()}`,position:"start",backgroundColor:"rgba(255, 0, 0, 0.8)",color:"#fff",font:{size:12,weight:"bold",family:"monospace"},padding:{left:5,right:5,top:2,bottom:2}},xScaleID:"x",yScaleID:"y",arrowHeads:{start:{enabled:!1,fill:!1,length:0,width:0},end:{enabled:!0,fill:!0,length:15,width:10,backgroundColor:"#ff0000",borderColor:"#ff0000",borderWidth:2}}}}:{}}}},scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Amount (BTC)",color:"#fff",font:{size:14,weight:"bold"}},min:0,max:d,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toFixed(4)}},grid:{color:"#333"}},y:{type:"linear",title:{display:!0,text:"Price (USDC)",color:"#fff",font:{size:14,weight:"bold"}},min:n,max:e,ticks:{color:"#888",font:{size:12,family:"monospace"},callback:function(g){return Number(g).toLocaleString()}},grid:{color:"#333"}}},onClick:(g,b)=>{if(!c.current)return;const y=c.current,v=y.canvas;if(!v)return;const w=v.getBoundingClientRect(),k=g.native;if(!k)return;const S=k.clientX-w.left,_=k.clientY-w.top,C=y.scales.x,P=y.scales.y,T=C.getValueForPixel(S),O=P.getValueForPixel(_);if(T==null||O===null||O===void 0)return;const I=[...r,...i].find(U=>{const B=C.getPixelForValue(U.amount),z=P.getPixelForValue(U.price);return Math.sqrt(Math.pow(S-B,2)+Math.pow(_-z,2))<=12});if(I)o(I.id);else{const U=Math.max(n,Math.min(e,O)),B=Math.max(.001,Math.min(1,T));s(U,B)}},onHover:(g,b)=>{if(!c.current)return;const y=c.current,v=y.canvas;if(!v)return;const w=v.getBoundingClientRect(),k=g.native;if(!k)return;const S=k.clientX-w.left,_=k.clientY-w.top,C=[...r,...i],P=y.scales.x,T=y.scales.y,O=C.find(D=>{const I=P.getPixelForValue(D.amount),U=T.getPixelForValue(D.price);return Math.sqrt(Math.pow(S-I,2)+Math.pow(_-U,2))<=10});h((O==null?void 0:O.id)||null)}}),[n,e,d,r,i,s,o,a,l]);return p.jsx("div",{className:"price-amount-chart-container",children:p.jsx("div",{className:`price-amount-chart-wrapper ${u?"price-amount-chart-pointer":""}`,children:p.jsx(cIe,{ref:c,data:f,options:m})})})},FAe=({isOpen:n,onClose:e,minPrice:r,maxPrice:i,onMinPriceChange:s,onMaxPriceChange:o,markPrice:a,hasManualPriceChange:l,onResetToAuto:c,orderMode:u,onOrderModeChange:h,curveIntensity:d,onCurveIntensityChange:f,roundingStep:m,onRoundingStepChange:g})=>{const b=_=>Math.round(_/1.5/m)*m,y=_=>Math.round(_*1.5/m)*m;if(!n)return null;const v=(a==null?void 0:a.mark_price)??null,w=a!==null&&v!==null,k=w?b(v):null,S=w?y(v):null;return typeof document<"u"?ba.createPortal(p.jsx("div",{className:"modal-overlay",onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:0,minWidth:"400px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[p.jsx("div",{className:"modal-header",style:{padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:p.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:600,color:"rgba(255, 255, 255, 0.9)"},children:"Price Range Configuration"})}),p.jsx("div",{className:"modal-body",style:{padding:"2rem 1.5rem"},children:p.jsxs("div",{className:"trading-test-price-range-controls",children:[p.jsxs("div",{children:[p.jsxs("label",{children:["Rounding Step ($):",p.jsx("input",{type:"number",value:m,onChange:_=>g(Math.max(1,parseFloat(_.target.value)||100)),min:1,step:10,className:"trading-test-input"})]}),p.jsxs("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:["Prices will be rounded to the nearest $",m]})]}),p.jsxs("div",{children:[p.jsxs("label",{children:["Min Price (USDC):",p.jsx("input",{type:"number",value:r,onChange:_=>{s(parseFloat(_.target.value)||1e4)},min:1e3,max:i-1e3,className:"trading-test-input",disabled:!w,title:w?`Auto-managed by mark price (mark price / 1.5, rounded to $${m})`:"Enter min price manually"})]}),w&&k!==null&&v!==null&&p.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:l?p.jsxs(p.Fragment,{children:["Manual override (Auto:"," ",v.toLocaleString()," / 1.5 ="," ",k.toLocaleString(),")"]}):p.jsxs(p.Fragment,{children:["Auto: ",v.toLocaleString()," / 1.5 ="," ",r.toLocaleString()]})})]}),p.jsxs("div",{children:[p.jsxs("label",{children:["Max Price (USDC):",p.jsx("input",{type:"number",value:i,onChange:_=>{o(parseFloat(_.target.value)||1e5)},min:r+1e3,max:1e6,className:"trading-test-input",disabled:!w,title:w?`Auto-managed by mark price (mark price  1.5, rounded to $${m})`:"Enter max price manually"})]}),w&&v!==null&&S!==null&&p.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:l?p.jsxs(p.Fragment,{children:["Manual override (Auto:"," ",v.toLocaleString(),"  1.5 ="," ",S.toLocaleString(),")"]}):p.jsxs(p.Fragment,{children:["Auto: ",v.toLocaleString(),"  1.5 ="," ",i.toLocaleString()]})}),!w&&p.jsx("small",{style:{color:"#888",display:"block",marginTop:"4px"},children:"Mark price not available. Enter prices manually."})]}),p.jsx("div",{children:p.jsxs("label",{children:["Order Mode:",p.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"trading-test-select",children:[p.jsx("option",{value:"random",children:"Random"}),p.jsx("option",{value:"curve",children:"Curve (Buy more at lower prices)"})]})]})}),u==="curve"&&p.jsx("div",{children:p.jsxs("label",{children:["Curve Intensity: ",d,p.jsx("input",{type:"range",value:d,onChange:_=>f(parseFloat(_.target.value)),min:1,max:5,step:.5,className:"trading-test-range"}),p.jsx("small",{children:"Higher = more aggressive buying at lower prices"})]})})]})}),p.jsxs("div",{className:"modal-footer",style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[l&&w&&p.jsx("button",{onClick:c,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(77, 171, 247, 0.2)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Reset to Auto"}),p.jsx("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:p.jsx("button",{onClick:e,className:"btn btn-secondary",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer"},children:"Close"})})]})]})}),document.body):null},$Ae=({isOpen:n,onClose:e,testResults:r,onClearResults:i})=>{if(!n)return null;const s=r.filter(a=>a.success).length,o=r.filter(a=>!a.success).length;return typeof document<"u"?ba.createPortal(p.jsx("div",{className:"test-results-modal-overlay",onClick:e,children:p.jsxs("div",{className:"test-results-modal-content",onClick:a=>a.stopPropagation(),children:[p.jsx("div",{className:"test-results-modal-header",children:p.jsx("h3",{children:"Batch Transaction Results"})}),p.jsxs("div",{className:"test-results-modal-body",children:[p.jsxs("div",{className:"test-results-modal-summary",children:[p.jsxs("div",{className:"test-results-modal-summary-text",children:[p.jsx("strong",{children:"Total:"})," ",r.length," |"," ",p.jsx("strong",{className:"success",children:"Success:"})," ",s," |"," ",p.jsx("strong",{className:"error",children:"Failed:"})," ",o]}),p.jsx("button",{onClick:i,className:"test-results-modal-clear-button",children:"Clear Results"})]}),p.jsx("div",{className:"test-results-modal-list",children:r.length===0?p.jsx("div",{className:"test-results-modal-empty",children:"No results to display"}):r.slice(-20).map((a,l)=>p.jsx("div",{className:`test-results-modal-item ${a.success?"success":"error"}`,children:p.jsxs("div",{className:"test-results-modal-item-content",children:[p.jsx("div",{className:"test-results-modal-item-header",children:p.jsxs("strong",{className:`test-results-modal-item-title ${a.success?"success":"error"}`,children:[a.success?"":""," Order @"," ",a.order.price.toFixed(2)," USDC"]})}),p.jsxs("div",{className:"test-results-modal-item-details",children:[p.jsxs("span",{children:["Amount: ",a.order.amount.toFixed(4)," BTC"]}),a.order.orderId&&p.jsxs("span",{children:["Order ID: ",a.order.orderId.substring(0,16),"..."]})]}),a.error&&p.jsxs("span",{className:"test-results-modal-error-text",children:["Error: ",a.error]})]})},l))})]}),p.jsx("div",{className:"test-results-modal-footer",children:p.jsx("button",{onClick:e,className:"test-results-modal-close-button",children:"Close"})})]})}),document.body):null},BAe=({onClick:n,disabled:e,orderMode:r})=>p.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-primary",style:{backgroundColor:e?"#ccc":"#007bff",cursor:e?"not-allowed":"pointer"},children:["Submit Test Orders (",r==="random"?"Random":"Curve-Based",")"]}),zAe=({onClick:n,disabled:e,orderCount:r})=>p.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-success",style:{backgroundColor:e?"#ccc":"#28a745",cursor:e?"not-allowed":"pointer"},children:["Submit Chart Orders (",r," orders)"]}),UAe=({onClick:n,disabled:e})=>p.jsx("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-secondary",style:{cursor:e?"not-allowed":"pointer"},children:"Reset Chart"}),WAe=({onClick:n,disabled:e,pendingCount:r})=>p.jsxs("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-info",style:{backgroundColor:e?"#ccc":"#17a2b8",cursor:e?"not-allowed":"pointer"},children:["Load Pending Orders ",r>0&&`(${r})`]}),PC=({onClick:n,disabled:e,filter:r})=>{const i=r==="long"?"Cancel All Long":r==="short"?"Cancel All Short":"Cancel All Orders";return p.jsx("button",{onClick:n,disabled:e,className:"trading-test-button trading-test-button-danger",style:{backgroundColor:e?"#ccc":"#dc3545",cursor:e?"not-allowed":"pointer"},children:i})};function qAe(){var xe,L,re,fe;const[n,e]=E.useState(Jd),[r,i]=E.useState(""),[s,o]=E.useState(""),[a,l]=E.useState(""),[c,u]=E.useState(1e4),[h,d]=E.useState(1e5),[f,m]=E.useState(null),[g,b]=E.useState("random"),[y,v]=E.useState(2),[w,k]=E.useState("long"),[S,_]=E.useState([]),[C,P]=E.useState([]),[T,O]=E.useState([]),[D,I]=E.useState(!1),[U,B]=E.useState(!1),[z,j]=E.useState(100),[F,N]=E.useState(!1),R=E.useRef(null),W=E.useRef(null),Y=E.useRef(n),K=E.useRef(0),{markets:H}=ya({baseURL:n,sessionToken:"",autoFetchMarkets:!0}),{mnemonic:Q,walletAddress:G,authToken:X,setMnemonic:de}=Il(),{client:ye}=Qc(),{markPrice:se}=l_({subscriptionClient:ye,baseURL:n,marketId:r||"",disablePolling:!0}),{buckets:ie}=JN({subscriptionClient:ye,baseURL:n,authToken:a||"",walletAddress:G||"",refreshInterval:0,useWebSocket:!1,marketId:"0"}),[Pe,ke]=E.useState(!1);E.useEffect(()=>{if(se!=null&&se.mark_price&&!Pe){const le=se.mark_price;if(!isNaN(le)&&le>1e3){const ce=Math.round(le*1.5/z)*z,ge=Math.round(le/1.5/z)*z;ge>0&&ce>ge&&(u(ge),d(ce))}}},[se==null?void 0:se.mark_price,Pe,z]),E.useEffect(()=>{Q&&o(Q),X&&l(X)},[Q,X]);const{setAuthToken:q,setWalletAddress:Ee}=Qc();E.useEffect(()=>{q(a||void 0)},[a,q]),E.useEffect(()=>{Ee(G||void 0)},[G,Ee]);const Je=H.length>0?(((xe=H.find(le=>le.active))==null?void 0:xe.market_id)??H[0].market_id)||(((re=(L=H.find(le=>le.active))==null?void 0:L.id)==null?void 0:re.toString())??((fe=H[0].id)==null?void 0:fe.toString())??""):null;E.useEffect(()=>{Je&&!r&&i(Je)},[Je]),E.useEffect(()=>{Y.current=n},[n]),E.useEffect(()=>{s&&s.trim()!==""&&(R.current=new iu({baseURL:Y.current,mnemonic:s}),R.current.initialize().catch(le=>{console.error("Failed to initialize ExchangeClient:",le)}))},[s,n]),E.useEffect(()=>{W.current=new cr({baseURL:Y.current})},[n]),E.useEffect(()=>{if(!r||!W.current)return;const le=async()=>{try{const ge=await W.current.getTicker(r);if(ge!=null&&ge.last_price){const J=typeof ge.last_price=="string"?parseFloat(ge.last_price):ge.last_price;m(J)}}catch(ge){console.error("Failed to fetch current price:",ge)}};le();const ce=setInterval(le,5e3);return()=>clearInterval(ce)},[r]);const ct=E.useCallback(le=>{const ce=[];for(let ge=0;ge<le;ge++){const J=c+Math.random()*(h-c),he=.001+Math.random()*.01;ce.push({price:J,amount:he})}return ce.sort((ge,J)=>ge.price-J.price)},[c,h]),$e=E.useCallback(le=>{const ce=[],ge=h-c;for(let J=0;J<le;J++){const he=Math.random(),pe=Math.pow(he,y),_e=c+pe*ge,ae=.001+(h-_e)/ge*.02;ce.push({price:_e,amount:ae})}return ce.sort((J,he)=>J.price-he.price)},[c,h,y]),ut=E.useCallback(async()=>{if(!R.current||!r||!G){ht.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(!ie||ie.length===0){ht.error("No buckets available",{description:"Please create a bucket first before placing orders."});return}const ce=ie[0].bucketId;if(!ce){ht.error("Bucket ID not found",{description:"Bucket ID is required for order placement."});return}I(!0);const ge=[];try{const he=g==="random"?ct(10):$e(10),pe=ht.info("Submitting test orders",{description:`Submitting ${he.length} ${g} orders...`});K.current=typeof pe=="number"?pe:0;for(const De of he){try{const Xe=un("1"),Fe=await R.current.placeOrder({marketId:r,bucketId:ce,side:w==="long"?"buy":"sell",orderType:"LIMIT",price:De.price,quantity:De.amount,timeInForce:"GTC",leverage:Xe});ge.push({success:!0,order:{price:De.price,amount:De.amount,orderId:Fe==null?void 0:Fe.order_id},timestamp:Date.now()})}catch(ae){ge.push({success:!1,order:{price:De.price,amount:De.amount},error:ae.message,timestamp:Date.now()})}await new Promise(ae=>setTimeout(ae,200))}O(De=>[...De,...ge]),K.current!==0&&(ht.dismiss(K.current),K.current=0);const _e=ge.filter(De=>De.success).length;ht.success("Test orders submitted",{description:`${_e}/${ge.length} orders placed successfully.`}),N(!0)}catch(J){K.current!==0&&(ht.dismiss(K.current),K.current=0),ht.error("Test submission failed",{description:J.message||"Unknown error occurred"})}finally{I(!1)}},[r,G,g,w,ct,$e,ie]),qe=E.useCallback(async()=>{if(!R.current||!r||!G){ht.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}if(S.length===0){ht.warning("No chart orders",{description:"Please add orders to the chart first."});return}if(!ie||ie.length===0){ht.error("No buckets available",{description:"Please create a bucket first before placing orders."});return}const ce=ie[0].bucketId;if(!ce){ht.error("Bucket ID not found",{description:"Bucket ID is required for order placement."});return}I(!0);const ge=[];try{const J=ht.info("Submitting chart orders",{description:`Submitting ${S.length} chart orders...`});K.current=typeof J=="number"?J:0;for(const pe of S){try{const De=un("1"),ae=await R.current.placeOrder({marketId:r,bucketId:ce,side:pe.side==="short"||pe.side==="sell"?"sell":"buy",orderType:"LIMIT",price:pe.price,quantity:pe.amount,timeInForce:"GTC",leverage:De});ge.push({success:!0,order:{price:pe.price,amount:pe.amount,orderId:ae==null?void 0:ae.order_id},timestamp:Date.now()})}catch(_e){ge.push({success:!1,order:{price:pe.price,amount:pe.amount},error:_e.message,timestamp:Date.now()})}await new Promise(_e=>setTimeout(_e,200))}O(pe=>[...pe,...ge]),K.current!==0&&(ht.dismiss(K.current),K.current=0);const he=ge.filter(pe=>pe.success).length;ht.success("Chart orders submitted",{description:`${he}/${ge.length} orders placed successfully.`}),_([]),Ie(),N(!0)}catch(J){K.current!==0&&(ht.dismiss(K.current),K.current=0),ht.error("Chart order submission failed",{description:J.message||"Unknown error occurred"})}finally{I(!1)}},[r,G,S,ie]),we=E.useCallback(()=>{_([]),ht.info("Chart reset",{description:"All chart orders have been cleared."})},[]),ze=E.useCallback((le,ce)=>{const ge={price:le,amount:ce,id:`chart-${Date.now()}-${Math.random()}`,side:w};_(J=>[...J,ge])},[w]),Me=E.useCallback(le=>{_(ce=>ce.filter(ge=>ge.id!==le)),P(ce=>ce.filter(ge=>ge.id!==le))},[]),Ie=E.useCallback(async()=>{if(!W.current||!G||!r){ht.error("Setup required",{description:"Please ensure wallet address and market ID are configured."});return}try{ht.info("Loading pending orders...");const le=await W.current.getOrders(G),ce=(le==null?void 0:le.orders)||[];console.log(le);const ge=ce.filter(J=>{const he=J.market_id,pe=(J.status||"").toUpperCase();return he===r&&["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(pe)}).map(J=>{const _e=(J.side||"").toUpperCase().includes("BUY")?"long":"short";return{price:Ct(J.price),amount:Ct(J.quantity),id:`pending-${J.order_id}`,side:_e,orderId:J.order_id,isPending:!0}});P(ge),ht.success("Pending orders loaded",{description:`Loaded ${ge.length} pending orders.`})}catch(le){ht.error("Failed to load pending orders",{description:le.message||"Unknown error occurred"})}},[G,r]),Ce=E.useCallback(async le=>{if(!R.current||!W.current||!r||!G){ht.error("Setup required",{description:"Please ensure mnemonic, market ID, and wallet address are configured."});return}try{const ce=await W.current.getOrders(G),J=((ce==null?void 0:ce.orders)||[]).filter(_e=>{const De=_e.market_id,ae=(_e.status||"").toUpperCase();if(De!==r||!["ORDER_STATUS_PENDING","ORDER_STATUS_OPEN","PENDING","OPEN","NEW","PARTIALLY_FILLED"].includes(ae))return!1;if(le==="all")return!0;const Fe=(_e.side||"").toUpperCase(),te=Fe.includes("BUY"),ee=Fe.includes("SELL");return le==="long"?te:le==="short"?ee:!1});if(J.length===0){ht.info("No orders to cancel",{description:`No ${le} pending orders found.`});return}I(!0),ht.info("Canceling orders",{description:`Canceling ${J.length} ${le} orders...`});let he=0,pe=0;for(const _e of J){try{const De=_e.order_id;await R.current.cancelOrder({orderId:De,marketId:r}),he++}catch(De){pe++,console.error("Failed to cancel order:",De)}await new Promise(De=>setTimeout(De,100))}await Ie(),ht.success("Orders canceled",{description:`${he} orders canceled successfully${pe>0?`, ${pe} failed`:""}.`})}catch(ce){ht.error("Failed to cancel orders",{description:ce.message||"Unknown error occurred"})}finally{I(!1)}},[r,G,Ie]);return p.jsxs("div",{className:"App-content-row",children:[p.jsx("h1",{children:"Trading QA"}),p.jsx("p",{children:"Advanced trading test with price range, interactive chart, and multiple submission modes"}),p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{children:"Configuration"}),p.jsxs("div",{className:"trading-test-config-grid",children:[p.jsx("div",{children:p.jsxs("label",{children:["HTTP Base URL:",p.jsx("input",{type:"text",value:n,onChange:le=>e(le.target.value),className:"trading-test-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Market:",p.jsx("select",{value:r||"",onChange:le=>i(le.target.value),className:"trading-test-select",children:H.length===0?p.jsx("option",{value:"",children:"Loading markets..."}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"",disabled:!0,children:"-- Select a market --"}),H.map(le=>{var J;const ce=le.market_id??((J=le.id)==null?void 0:J.toString())??"",ge=le.moniker?le.moniker:le.symbol?le.symbol:`Market ID: ${ce}`;return p.jsx("option",{value:ce,children:ge},ce)})]})})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Mnemonic:",p.jsx("input",{type:"text",value:s,onChange:le=>{o(le.target.value),de(le.target.value)},placeholder:"Enter mnemonic",className:"trading-test-input"})]})}),f&&p.jsxs("div",{className:"trading-test-price-display",children:[p.jsx("strong",{children:"Current Price:"})," ",f.toLocaleString()," ","USDC"]})]})]}),p.jsxs("div",{className:"trading-test-tabs",children:[p.jsx("button",{className:`trading-test-tab ${w==="long"?"active":""}`,onClick:()=>k("long"),children:"Long (Buy)"}),p.jsx("button",{className:`trading-test-tab ${w==="short"?"active":""}`,onClick:()=>k("short"),children:"Short (Sell)"})]}),p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{children:"Interactive Price-Amount Chart"}),p.jsx("div",{className:"trading-test-chart-controls",children:p.jsxs("div",{className:"trading-test-chart-info",children:[p.jsxs("span",{children:["Orders on chart: ",S.length]}),p.jsxs("span",{onClick:()=>B(!0),style:{cursor:"pointer",textDecoration:"underline"},title:"Click to configure price range",children:["Price range: ",c.toLocaleString()," -"," ",h.toLocaleString()," USDC"]})]})}),p.jsx(LAe,{minPrice:c,maxPrice:h,orders:S,pendingOrders:C,onAddOrder:ze,onRemoveOrder:Me,currentPrice:f,markPrice:se!=null&&se.mark_price?se.mark_price:null}),p.jsxs("div",{className:"price-amount-chart-instructions",children:[p.jsx("p",{children:"Click on the chart to add orders. Click on existing orders to remove them."}),p.jsx("p",{children:"Y-axis: Price (USDC) | X-axis: Amount (BTC)"})]})]}),p.jsxs("div",{className:"App-section",children:[p.jsx("h2",{children:"Order Submission"}),p.jsxs("div",{className:"trading-test-submission-buttons",children:[p.jsx(UAe,{onClick:we,disabled:S.length===0}),p.jsx(BAe,{onClick:ut,disabled:D||!r||!G,orderMode:g}),p.jsx(zAe,{onClick:qe,disabled:D||S.length===0||!r||!G,orderCount:S.length})]}),p.jsx("h2",{children:"Pending Orders Management"}),p.jsxs("div",{className:"trading-test-pending-orders-controls",children:[p.jsx(WAe,{onClick:Ie,disabled:!r||!G,pendingCount:C.length}),p.jsxs("div",{className:"trading-test-cancel-buttons",children:[p.jsx(PC,{onClick:()=>Ce("long"),disabled:D||!r||!G,filter:"long"}),p.jsx(PC,{onClick:()=>Ce("short"),disabled:D||!r||!G,filter:"short"}),p.jsx(PC,{onClick:()=>Ce("all"),disabled:D||!r||!G,filter:"all"})]})]})]}),T.length>0&&p.jsxs("div",{className:"trading-test-results",style:{display:"none"},children:[p.jsx("h2",{children:"Test Results"}),p.jsxs("div",{className:"trading-test-results-summary",children:[p.jsxs("div",{children:["Total: ",T.length," | Success:"," ",T.filter(le=>le.success).length," | Failed:"," ",T.filter(le=>!le.success).length]}),p.jsx("button",{onClick:()=>O([]),className:"trading-test-button-secondary",children:"Clear Results"})]}),p.jsx("div",{className:"trading-test-results-list",children:T.slice(-20).map((le,ce)=>p.jsx("div",{className:`trading-test-result-item ${le.success?"success":"error"}`,children:p.jsxs("div",{children:[p.jsxs("strong",{children:[le.success?"":""," Order @"," ",le.order.price.toFixed(2)," USDC"]}),p.jsxs("span",{children:["Amount: ",le.order.amount.toFixed(4)," BTC"]}),le.order.orderId&&p.jsxs("span",{children:["Order ID: ",le.order.orderId.substring(0,16),"..."]}),le.error&&p.jsx("span",{className:"error-text",children:le.error})]})},ce))})]}),p.jsx(FAe,{isOpen:U,onClose:()=>B(!1),minPrice:c,maxPrice:h,onMinPriceChange:le=>{u(le),ke(!0)},onMaxPriceChange:le=>{d(le),ke(!0)},markPrice:se||null,hasManualPriceChange:Pe,onResetToAuto:()=>{if(se!=null&&se.mark_price){const le=se.mark_price;if(!isNaN(le)&&le>1e3){ke(!1);const ce=Math.round(le*1.5/z)*z,ge=Math.round(le/1.5/z)*z;ge>0&&ce>ge&&(u(ge),d(ce))}}},orderMode:g,onOrderModeChange:b,curveIntensity:y,onCurveIntensityChange:v,roundingStep:z,onRoundingStepChange:j}),p.jsx($Ae,{isOpen:F,onClose:()=>N(!1),testResults:T,onClearResults:()=>{O([]),N(!1)}})]})}function HAe(){return p.jsx(n3,{defaultWsURL:su,children:p.jsx(qAe,{})})}const qv=[{symbol:"ETH",name:"Ethereum",address:"ETH",decimals:18},{symbol:"BTC",name:"Bitcoin",address:"BTC",decimals:8},{symbol:"USDC",name:"USD Coin",address:"USDC",decimals:6},{symbol:"USDT",name:"Tether",address:"USDT",decimals:6},{symbol:"DAI",name:"Dai Stablecoin",address:"DAI",decimals:18}];function VAe(){const[n,e]=E.useState(Jd),[r,i]=E.useState(qv[0]),[s,o]=E.useState(qv[2]),[a,l]=E.useState(""),[c,u]=E.useState(""),[h,d]=E.useState(!1),[f,m]=E.useState(!1),[g,b]=E.useState(!1),[y,v]=E.useState(.5),[w,k]=E.useState(null),[S,_]=E.useState(""),C=E.useRef(null),P=E.useRef(n),{mnemonic:T,walletAddress:O,setMnemonic:D}=Il();E.useEffect(()=>{P.current=n},[n]),E.useEffect(()=>{T&&T.trim()!==""&&(C.current=new iu({baseURL:P.current,mnemonic:T}),C.current.initialize().catch(j=>{console.error("Failed to initialize ExchangeClient:",j)}))},[T,n]),E.useEffect(()=>{if(a&&parseFloat(a)>0&&r&&s){const F=parseFloat(a)*1;u(F.toFixed(6)),_(`1 ${r.symbol} = ${1 .toFixed(4)} ${s.symbol}`),k(.1)}else u(""),_(""),k(null)},[a,r,s]);const I=E.useCallback(()=>{const j=r;i(s),o(j);const F=a;l(c),u(F)},[r,s,a,c]),U=E.useCallback(async()=>{if(!C.current||!r||!s||!a){ht.error("Setup required",{description:"Please ensure mnemonic and swap details are configured."});return}if(parseFloat(a)<=0){ht.error("Invalid amount",{description:"Please enter a valid amount to swap."});return}if(!O){ht.error("Wallet required",{description:"Please connect your wallet first."});return}b(!0);try{const j=parseFloat(a),N=parseFloat(c)*(1-y/100),R=ht.info("Swapping tokens",{description:`Swapping ${a} ${r.symbol} for ${s.symbol}...`});await C.current.swap({fromToken:r.address,toToken:s.address,amountIn:j,minAmountOut:N}),ht.dismiss(R),ht.success("Swap successful",{description:`Successfully swapped ${a} ${r.symbol} for ${s.symbol}`}),l(""),u("")}catch(j){ht.error("Swap failed",{description:j.message||"Unknown error occurred"})}finally{b(!1)}},[r,s,a,c,y,O]),B=E.useMemo(()=>!!r&&!!s&&!!a&&parseFloat(a)>0&&!!O&&!g&&r.symbol!==s.symbol,[r,s,a,O,g]),z=j=>({ETH:"",BTC:"",USDC:"$",USDT:"$",DAI:""})[j]||"";return p.jsxs("div",{className:"App-content-row",children:[p.jsxs("div",{className:"swap-test-header",children:[p.jsx("h1",{children:"Swap"}),p.jsx("p",{className:"swap-test-subtitle",children:"Swap anytime, anywhere"})]}),p.jsxs("div",{className:"App-section swap-config-section",children:[p.jsx("h3",{children:"Configuration"}),p.jsxs("div",{className:"swap-config-grid",children:[p.jsx("div",{children:p.jsxs("label",{children:["HTTP Base URL:",p.jsx("input",{type:"text",value:n,onChange:j=>e(j.target.value),className:"swap-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Mnemonic:",p.jsx("input",{type:"text",value:T||"",onChange:j=>D(j.target.value),placeholder:"Enter mnemonic",className:"swap-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Wallet Address:",p.jsx("input",{type:"text",value:O||"",disabled:!0,placeholder:"Auto-generated from mnemonic",className:"swap-input"})]})}),p.jsx("div",{children:p.jsxs("label",{children:["Slippage Tolerance (%):",p.jsx("input",{type:"number",value:y,onChange:j=>v(parseFloat(j.target.value)||.5),min:"0",max:"50",step:"0.1",className:"swap-input"})]})})]})]}),p.jsxs("div",{className:"swap-container",children:[p.jsxs("div",{className:"swap-card",children:[p.jsxs("div",{className:"swap-token-section",children:[p.jsx("div",{className:"swap-token-label",children:"Sell"}),p.jsxs("div",{className:"swap-token-input-group",children:[p.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:a,onChange:j=>l(j.target.value),min:"0",step:"any"}),p.jsxs("div",{className:"swap-token-selector-wrapper",children:[p.jsx("button",{className:"swap-token-selector",onClick:()=>{d(!h),m(!1)},children:r?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"swap-token-icon",children:z(r.symbol)}),p.jsx("span",{className:"swap-token-symbol",children:r.symbol}),p.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Select token"}),p.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),h&&p.jsx("div",{className:"swap-token-dropdown",children:qv.map(j=>p.jsxs("button",{className:"swap-token-option",onClick:()=>{j.address===(s==null?void 0:s.address)?I():(i(j),d(!1))},children:[p.jsx("span",{className:"swap-token-icon",children:z(j.symbol)}),p.jsxs("div",{className:"swap-token-option-info",children:[p.jsx("span",{className:"swap-token-option-symbol",children:j.symbol}),p.jsx("span",{className:"swap-token-option-name",children:j.name})]})]},j.address))})]})]}),a&&parseFloat(a)>0&&p.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(a)*1).toFixed(2)]})]}),p.jsx("div",{className:"swap-button-container",children:p.jsx("button",{className:"swap-button-middle",onClick:I,"aria-label":"Swap tokens",children:p.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M4 6L8 2L12 6M12 10L8 14L4 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),p.jsxs("div",{className:"swap-token-section",children:[p.jsx("div",{className:"swap-token-label",children:"Buy"}),p.jsxs("div",{className:"swap-token-input-group",children:[p.jsx("input",{type:"number",className:"swap-amount-input",placeholder:"0",value:c,onChange:j=>u(j.target.value),min:"0",step:"any",readOnly:!0}),p.jsxs("div",{className:"swap-token-selector-wrapper",children:[p.jsx("button",{className:"swap-token-selector",onClick:()=>{m(!f),d(!1)},children:s?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"swap-token-icon",children:z(s.symbol)}),p.jsx("span",{className:"swap-token-symbol",children:s.symbol}),p.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Select token"}),p.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M6 9L1 4H11L6 9Z",fill:"currentColor"})})]})}),f&&p.jsx("div",{className:"swap-token-dropdown",children:qv.map(j=>p.jsxs("button",{className:"swap-token-option",onClick:()=>{j.address===(r==null?void 0:r.address)?I():(o(j),m(!1))},children:[p.jsx("span",{className:"swap-token-icon",children:z(j.symbol)}),p.jsxs("div",{className:"swap-token-option-info",children:[p.jsx("span",{className:"swap-token-option-symbol",children:j.symbol}),p.jsx("span",{className:"swap-token-option-name",children:j.name})]})]},j.address))})]})]}),c&&parseFloat(c)>0&&p.jsxs("div",{className:"swap-token-value",children:["$",(parseFloat(c)*1).toFixed(2)]})]}),S&&p.jsxs("div",{className:"swap-info",children:[p.jsxs("div",{className:"swap-info-row",children:[p.jsx("span",{children:"Exchange Rate"}),p.jsx("span",{children:S})]}),w!==null&&p.jsxs("div",{className:"swap-info-row",children:[p.jsx("span",{children:"Price Impact"}),p.jsxs("span",{className:w>1?"swap-warning":"",children:[w.toFixed(2),"%"]})]}),p.jsxs("div",{className:"swap-info-row",children:[p.jsx("span",{children:"Slippage Tolerance"}),p.jsxs("span",{children:[y,"%"]})]})]}),p.jsx("button",{className:"swap-button-primary",onClick:U,disabled:!B,children:O?g?"Swapping...":(r==null?void 0:r.symbol)===(s==null?void 0:s.symbol)?"Select different tokens":!a||parseFloat(a)<=0?"Enter amount":"Swap":"Connect Wallet"})]}),p.jsx("div",{className:"swap-footer",children:p.jsx("p",{children:"Buy and sell crypto on 16+ networks including"})})]})]})}const Zl=({onClick:n,disabled:e=!1,variant:r="primary",children:i})=>p.jsx("button",{className:`explorer-button ${r}`,onClick:n,disabled:e,children:i}),YAe=({wsURL:n,setWsURL:e,authToken:r,setAuthToken:i,deviceID:s,setDeviceID:o,shardId:a,setShardId:l,eventType:c,setEventType:u,txAddress:h,setTxAddress:d,txHash:f,setTxHash:m,txTypes:g,setTxTypes:b,txEventTypes:y,setTxEventTypes:v})=>p.jsxs("div",{className:"config-section",children:[p.jsx("h3",{children:"Configuration"}),p.jsxs("div",{className:"config-grid",children:[p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"ws-url",children:"WebSocket URL"}),p.jsx("input",{id:"ws-url",type:"text",value:n,onChange:w=>e(w.target.value),placeholder:"ws://localhost:8080/ws"})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"auth-token",children:"Auth Token (optional)"}),p.jsx("input",{id:"auth-token",type:"text",value:r,onChange:w=>i(w.target.value),placeholder:"JWT token"})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"device-id",children:"Device ID"}),p.jsx("input",{id:"device-id",type:"text",value:s,onChange:w=>o(w.target.value),placeholder:"device-id"})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"shard-id",children:"Shard ID (optional filter)"}),p.jsx("input",{id:"shard-id",type:"text",value:a,onChange:w=>l(w.target.value),placeholder:"e.g., 1, 2, 3"})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"event-type",children:"Event Type (optional filter for consensus_flat)"}),p.jsx("input",{id:"event-type",type:"text",value:c,onChange:w=>u(w.target.value),placeholder:"e.g., new_vertex, new_tx, validator_update"})]})]}),p.jsxs("div",{className:"config-section-divider",children:[p.jsx("h4",{children:"Transaction Channel Filters"}),p.jsxs("div",{className:"config-grid",children:[p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"tx-address",children:"Address (optional filter)"}),p.jsx("input",{id:"tx-address",type:"text",value:h,onChange:w=>d(w.target.value),placeholder:"0x..."})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"tx-hash",children:"Transaction Hash (optional filter)"}),p.jsx("input",{id:"tx-hash",type:"text",value:f,onChange:w=>m(w.target.value),placeholder:"0x..."})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"tx-types",children:"Transaction Types (optional filter)"}),p.jsx("input",{id:"tx-types",type:"text",value:g,onChange:w=>b(w.target.value),placeholder:"e.g., order, transfer, deposit (comma-separated)"})]}),p.jsxs("div",{className:"config-item",children:[p.jsx("label",{htmlFor:"tx-event-types",children:"Event Types (optional filter)"}),p.jsx("input",{id:"tx-event-types",type:"text",value:y,onChange:w=>v(w.target.value),placeholder:"e.g., new_tx, tx_confirmed (comma-separated)"})]})]})]})]}),GAe=({message:n})=>{const{event:e,timestamp:r,type:i,eventSource:s}=n,o=u=>"data"in u&&u.data&&typeof u.data=="object"&&("hash"in u.data||"txhash"in u.data),a=u=>"data"in u&&u.data&&typeof u.data=="object"&&"type"in u.data,l=()=>{if(o(e))return p.jsx(ZAe,{event:e});if(a(e)){const{data:u}=e;switch(u.type){case"vertex":return p.jsx(KAe,{data:u});case"tx":return p.jsx(XAe,{data:u});case"unconfirmed_tx":return p.jsx(QAe,{data:u});case"validator":return p.jsx(JAe,{data:u});default:return p.jsx(dB,{data:u})}}return p.jsx(dB,{data:e})},c=o(e)?e.source_shard||"unknown":e.source_shard;return p.jsxs("div",{className:`consensus-event-item ${i}`,children:[p.jsx("div",{className:"event-header",children:p.jsxs("div",{className:"event-meta",children:[p.jsx("span",{className:"event-type-badge",children:e.event_type}),s&&p.jsx("span",{className:"event-source-badge",children:s}),p.jsx("span",{className:"event-time",children:new Date(r).toLocaleString()}),p.jsxs("span",{className:"event-shard",children:["Shard: ",c]})]})}),p.jsxs("div",{className:"event-body",children:[a(e)&&p.jsxs("div",{className:"event-data-type",children:[p.jsx("strong",{children:"Data Type:"})," ",e.data.type]}),l(),p.jsxs("details",{className:"raw-data-details",children:[p.jsx("summary",{children:"View Raw JSON"}),p.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(e,null,2)})]})]})]})},KAe=({data:n})=>p.jsxs("div",{className:"event-details vertex-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"ID:"}),p.jsx("span",{className:"detail-value",children:n.id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Shard ID:"}),p.jsx("span",{className:"detail-value",children:n.shard_id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",children:n.status})]}),n.parent_ids&&n.parent_ids.length>0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Parent IDs:"}),p.jsx("span",{className:"detail-value",children:n.parent_ids.join(", ")})]}),n.tx_count!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"TX Count:"}),p.jsx("span",{className:"detail-value",children:n.tx_count})]}),n.state_root&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"State Root:"}),p.jsx("span",{className:"detail-value",children:n.state_root})]}),n.qc_achieved!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"QC Achieved:"}),p.jsx("span",{className:"detail-value",children:n.qc_achieved?"Yes":"No"})]}),n.qc_vote_count!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"QC Vote Count:"}),p.jsx("span",{className:"detail-value",children:n.qc_vote_count})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Timestamp:"}),p.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),XAe=({data:n})=>p.jsxs("div",{className:"event-details tx-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"TX Hash:"}),p.jsx("span",{className:"detail-value",children:n.txhash||n.id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Shard ID:"}),p.jsx("span",{className:"detail-value",children:n.shard_id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",children:n.status})]}),n.from_address&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"From:"}),p.jsx("span",{className:"detail-value",children:n.from_address})]}),n.to_address&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"To:"}),p.jsx("span",{className:"detail-value",children:n.to_address})]}),n.amount&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Amount:"}),p.jsx("span",{className:"detail-value",children:n.amount})]}),n.tx_type&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"TX Type:"}),p.jsx("span",{className:"detail-value",children:n.tx_type})]}),n.nonce!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Nonce:"}),p.jsx("span",{className:"detail-value",children:n.nonce})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Timestamp:"}),p.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),QAe=({data:n})=>p.jsxs("div",{className:"event-details unconfirmed-tx-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"TX Hash:"}),p.jsx("span",{className:"detail-value",children:n.txhash||n.id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value status-pending",children:n.status})]}),n.from_address&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"From:"}),p.jsx("span",{className:"detail-value",children:n.from_address})]}),n.to_address&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"To:"}),p.jsx("span",{className:"detail-value",children:n.to_address})]}),n.amount&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Amount:"}),p.jsx("span",{className:"detail-value",children:n.amount})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Timestamp:"}),p.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),JAe=({data:n})=>p.jsxs("div",{className:"event-details validator-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Validator ID:"}),p.jsx("span",{className:"detail-value",children:n.validator_id||n.id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Shard ID:"}),p.jsx("span",{className:"detail-value",children:n.shard_id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",children:n.validator_status||n.status})]}),n.voting_power!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Voting Power:"}),p.jsx("span",{className:"detail-value",children:n.voting_power})]}),n.public_key&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Public Key:"}),p.jsx("span",{className:"detail-value public-key",children:n.public_key})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Timestamp:"}),p.jsx("span",{className:"detail-value",children:new Date(n.timestamp*1e3).toLocaleString()})]})]}),ZAe=({event:n})=>{const{data:e}=n;return p.jsxs("div",{className:"event-details transaction-event-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Hash:"}),p.jsx("span",{className:"detail-value",children:e.hash||e.txhash||"N/A"})]}),e.vertex_hash&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Vertex Hash:"}),p.jsx("span",{className:"detail-value",children:e.vertex_hash})]}),e.status&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",children:e.status})]}),e.shard_id!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Shard ID:"}),p.jsx("span",{className:"detail-value",children:e.shard_id})]}),e.dag_depth!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"DAG Depth:"}),p.jsx("span",{className:"detail-value",children:e.dag_depth})]}),e.consensus_round!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Consensus Round:"}),p.jsx("span",{className:"detail-value",children:e.consensus_round})]}),e.code!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Code:"}),p.jsx("span",{className:"detail-value",children:e.code})]}),e.info&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Info:"}),p.jsx("span",{className:"detail-value",children:e.info})]}),e.raw_log&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Raw Log:"}),p.jsx("span",{className:"detail-value",children:e.raw_log})]}),e.transaction_index!==void 0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Transaction Index:"}),p.jsx("span",{className:"detail-value",children:e.transaction_index})]}),e.consensus_version&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Consensus Version:"}),p.jsx("span",{className:"detail-value",children:e.consensus_version})]}),e.parent_vertices&&e.parent_vertices.length>0&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Parent Vertices:"}),p.jsx("span",{className:"detail-value",children:e.parent_vertices.join(", ")})]}),n.event_time&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Event Time:"}),p.jsx("span",{className:"detail-value",children:typeof n.event_time=="number"?new Date(n.event_time*1e3).toLocaleString():typeof n.event_time=="object"&&"seconds"in n.event_time?new Date(n.event_time.seconds*1e3).toLocaleString():"N/A"})]})]})},dB=({data:n})=>p.jsxs("div",{className:"event-details generic-details",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"ID:"}),p.jsx("span",{className:"detail-value",children:n.id})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Type:"}),p.jsx("span",{className:"detail-value",children:n.type})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",children:n.status})]})]}),eRe=({isOpen:n,onClose:e,event:r})=>(E.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),E.useEffect(()=>{const i=s=>{s.key==="Escape"&&n&&e()};return n&&window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[n,e]),!n||!r?null:typeof document<"u"?ba.createPortal(p.jsx("div",{className:"event-modal-overlay",onClick:e,children:p.jsxs("div",{className:"event-modal",onClick:i=>i.stopPropagation(),children:[p.jsxs("div",{className:"event-modal-header",children:[p.jsx("h3",{className:"event-modal-title",children:"Event Details"}),p.jsx("button",{className:"event-modal-close-button",onClick:e,children:""})]}),p.jsx("div",{className:"event-modal-body",children:p.jsx(GAe,{message:r})})]})}),document.body):null),tRe=n=>{if("data"in n&&n.data&&typeof n.data=="object"){const e=n.data;if("hash"in e&&e.hash)return e.hash;if("txhash"in e&&e.txhash)return e.txhash;if("id"in e&&e.id)return e.id}if("data"in n&&n.data&&typeof n.data=="object"){const e=n.data;if("id"in e&&e.id)return e.id;if("txhash"in e&&e.txhash)return e.txhash}return"N/A"},nRe=({events:n})=>{const[e,r]=E.useState(null),[i,s]=E.useState(!1),o=l=>{r(l),s(!0)},a=()=>{s(!1),r(null)};return n.length===0?p.jsx("div",{className:"consensus-event-list empty",children:p.jsx("p",{children:"No events received yet. Connect and subscribe to start receiving consensus events."})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"consensus-event-list",children:[p.jsx("div",{className:"event-list-header",children:p.jsxs("h3",{children:["Consensus Events (",n.length,")"]})}),p.jsxs("div",{className:"event-list-table",children:[p.jsxs("div",{className:"event-list-table-header",children:[p.jsx("div",{className:"event-list-table-cell hash-column",children:"Hash"}),p.jsx("div",{className:"event-list-table-cell time-column",children:"Time"}),p.jsx("div",{className:"event-list-table-cell type-column",children:"Type"})]}),p.jsx("div",{className:"event-list-table-body",children:n.map(l=>{const c=tRe(l.event),u=new Date(l.timestamp).toLocaleString(),h=l.event.event_type||"unknown";return p.jsxs("div",{className:"event-list-table-row",onClick:()=>o(l),children:[p.jsx("div",{className:"event-list-table-cell hash-column",title:c,children:c.length>20?`${c.substring(0,20)}...`:c}),p.jsx("div",{className:"event-list-table-cell time-column",children:u}),p.jsx("div",{className:"event-list-table-cell type-column",children:p.jsx("span",{className:`event-type-badge ${l.type}`,children:h})})]},l.id)})})]})]}),p.jsx(eRe,{isOpen:i,onClose:a,event:e})]})};function rRe(n){return n.type==="vertex"}function hB(n){return n.type==="tx"}function iRe(n){return n.type==="unconfirmed_tx"}function fB(){return{vertexMap:new Map,txMap:new Map,parentToChildren:new Map,orphanMap:new Map}}function pB(n){n.vertexMap.clear(),n.txMap.clear(),n.parentToChildren.clear(),n.orphanMap.clear()}const sRe=3e4,oRe=1e3;function aRe(n,e){var r;for(const[i,s]of e.orphanMap.entries())(r=s.parent_ids)!=null&&r.includes(n.id)&&(e.parentToChildren.has(n.id)||e.parentToChildren.set(n.id,new Set),e.parentToChildren.get(n.id).add(i),e.orphanMap.delete(i));if(n.parent_ids&&n.parent_ids.length>0&&!n.parent_ids.every(s=>e.vertexMap.has(s))){if(e.orphanMap.size>=oRe){const s=e.orphanMap.keys().next().value;s&&(e.orphanMap.delete(s),console.warn(`[dagUtils] Orphan buffer full, evicted: ${s}`))}e.orphanMap.set(n.id,n),console.warn(`[dagUtils] Orphaned vertex detected: ${n.id}`)}}function lRe(n,e=sRe){for(const[r]of n.orphanMap.entries())console.warn(`[dagUtils] Orphan timeout: ${r} - marking as missing parent`),n.orphanMap.delete(r)}const cRe=3e4;function uRe(n,e,r){const i=cRe;let s=null;for(const[o,a]of r.vertexMap.entries()){if(a.shardId!==n.shard_id)continue;const l=Math.abs(a.timestamp-e);l<i&&(!s||l<s.timeDiff)&&(s={vertexId:o,timeDiff:l})}return(s==null?void 0:s.vertexId)||null}function dRe(n,e){const{data:r,event_time:i}=n;if(rRe(r)){const s=r.parent_ids||[],o={id:r.id,type:"vertex",timestamp:i||r.timestamp,parents:s,children:[],data:r,shardId:r.shard_id};e.vertexMap.set(r.id,o),s.forEach(l=>{e.parentToChildren.has(l)||e.parentToChildren.set(l,new Set),e.parentToChildren.get(l).add(r.id)});const a=e.parentToChildren.get(r.id);return a&&(o.children=Array.from(a)),aRe(r,e),o}else if(hB(r)||iRe(r)){const s={id:r.id||r.txhash||`tx-${Date.now()}`,type:hB(r)?"tx":"unconfirmed_tx",timestamp:i||r.timestamp,parents:[],children:[],data:r,shardId:r.shard_id};e.txMap.set(s.id,s);const o=uRe(r,s.timestamp,e);if(o){const a=e.vertexMap.get(o);a&&(s.vertexId=o,s.parents=a.parents)}return s}return null}function hRe(n){for(const e of[...n.vertexMap.values(),...n.txMap.values()]){const r=n.parentToChildren.get(e.id);e.children=r?Array.from(r):[]}}function fRe(n,e){const r=dRe(n,e);return r?(hRe(e),{id:r.id,timestamp:r.timestamp,parents:r.parents,children:r.children,data:r.data,nodeType:r.type,shardId:r.shardId}):null}class pRe{constructor(e=500){Be(this,"timeoutId",null);Be(this,"accumulatedMessages",[]);Be(this,"waitMs");this.waitMs=e}add(e,r,i){this.accumulatedMessages.push(...e),this.timeoutId!==null&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{const s=this.accumulatedMessages.map(o=>fRe(o,r)).filter(o=>o!==null);this.accumulatedMessages=[],i(s),this.timeoutId=null},this.waitMs)}cancel(){this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.accumulatedMessages=[]}}const mRe=new pRe(500);function gRe(n,e,r){mRe.add(n,e,r)}function bRe(n){const e=new Map,r=i=>{if(e.has(i.id))return e.get(i.id);if(i.parents.length===0)return e.set(i.id,"root"),"root";const o=i.parents.map(a=>{const l=n.find(c=>c.id===a);return l?e.get(a)||r(l):null}).filter(a=>a!==null).join("-")||"root";return e.set(i.id,o),o};return n.map(i=>{const s=r(i),o=i.nodeType==="vertex"?"V":i.nodeType==="tx"?"TX":"UTX",a=i.id.length>8?i.id.slice(0,8)+"...":i.id;return{id:i.id,content:`${o} ${a}`,start:new Date(i.timestamp*1e3),group:s,title:`${i.nodeType} | Parents: ${i.parents.length} | Children: ${i.children.length} | Shard: ${i.shardId}`,className:`dag-node-${i.nodeType}`}})}function yRe(n,e,r=5){if(!e)return n.length>100?{nodes:[],links:[]}:{nodes:n.map(c=>({id:c.id,label:`${c.nodeType==="vertex"?"V":"TX"} ${c.id.slice(0,8)}`,type:c.nodeType,shardId:c.shardId})),links:n.flatMap(c=>c.children.map(u=>({source:c.id,target:u})))};const i=new Set,s=[{id:e,depth:0}],o=[],a=[],l=new Set;for(;s.length>0;){const{id:c,depth:u}=s.shift();if(i.has(c)||u>r)continue;i.add(c);const h=n.find(d=>d.id===c);if(h){if(!l.has(c)){const d=h.nodeType==="vertex"?"V":"TX",f=h.id.length>8?h.id.slice(0,8)+"...":h.id;o.push({id:h.id,label:`${d} ${f}`,type:h.nodeType,shardId:h.shardId}),l.add(c)}h.children.forEach(d=>{a.push({source:c,target:d}),i.has(d)||s.push({id:d,depth:u+1})}),h.parents.forEach(d=>{if(a.push({source:d,target:c}),!l.has(d)){const f=n.find(m=>m.id===d);if(f){const m=f.nodeType==="vertex"?"V":"TX",g=f.id.length>8?f.id.slice(0,8)+"...":f.id;o.push({id:f.id,label:`${m} ${g}`,type:f.nodeType,shardId:f.shardId}),l.add(d)}}i.has(d)||s.push({id:d,depth:u+1})})}}return{nodes:o,links:a}}/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 8.5.0
 * @date    2025-12-12T13:44:42.806Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Ii(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var vRe=`.vis .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Must be displayed above for example selected Timeline items */
  z-index: 10;
}

.vis-active {
  box-shadow: 0 0 10px #86d5f8;
}
`;Ii(vRe);var xRe=`/* override some bootstrap styles screwing up the timelines css */

.vis [class*="span"] {
  min-height: 0;
  width: auto;
}
`;Ii(xRe);var wRe=`div.vis-configuration {
  position: relative;
  display: block;
  float: left;
  font-size: 12px;
}

div.vis-configuration-wrapper {
  display: block;
  width: 700px;
}

div.vis-configuration-wrapper::after {
  clear: both;
  content: "";
  display: block;
}

div.vis-configuration.vis-config-option-container {
  display: block;
  width: 495px;
  background-color: #ffffff;
  border: 2px solid #f7f8fa;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
}

div.vis-configuration.vis-config-button {
  display: block;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
  background-color: #f7f8fa;
  border: 2px solid #ceced0;
  border-radius: 4px;
  margin-top: 20px;
  left: 10px;
  padding-left: 5px;
  cursor: pointer;
  margin-bottom: 30px;
}

div.vis-configuration.vis-config-button.hover {
  background-color: #4588e6;
  border: 2px solid #214373;
  color: #ffffff;
}

div.vis-configuration.vis-config-item {
  display: block;
  float: left;
  width: 495px;
  height: 25px;
  vertical-align: middle;
  line-height: 25px;
}

div.vis-configuration.vis-config-item.vis-config-s2 {
  left: 10px;
  background-color: #f7f8fa;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s3 {
  left: 20px;
  background-color: #e4e9f0;
  padding-left: 5px;
  border-radius: 3px;
}
div.vis-configuration.vis-config-item.vis-config-s4 {
  left: 30px;
  background-color: #cfd8e6;
  padding-left: 5px;
  border-radius: 3px;
}

div.vis-configuration.vis-config-header {
  font-size: 18px;
  font-weight: bold;
}

div.vis-configuration.vis-config-label {
  width: 120px;
  height: 25px;
  line-height: 25px;
}

div.vis-configuration.vis-config-label.vis-config-s3 {
  width: 110px;
}
div.vis-configuration.vis-config-label.vis-config-s4 {
  width: 100px;
}

div.vis-configuration.vis-config-colorBlock {
  top: 1px;
  width: 30px;
  height: 19px;
  border: 1px solid #444444;
  border-radius: 2px;
  padding: 0px;
  margin: 0px;
  cursor: pointer;
}

input.vis-configuration.vis-config-checkbox {
  left: -5px;
}

input.vis-configuration.vis-config-rangeinput {
  position: relative;
  top: -5px;
  width: 60px;
  /*height:13px;*/
  padding: 1px;
  margin: 0;
  pointer-events: none;
}

input.vis-configuration.vis-config-range {
  /*removes default webkit styles*/
  -webkit-appearance: none;

  /*fix for FF unable to apply focus style bug */
  border: 0px solid white;
  background-color: rgba(0, 0, 0, 0);

  /*required for proper track sizing in FF*/
  width: 300px;
  height: 20px;
}
input.vis-configuration.vis-config-range::-webkit-slider-runnable-track {
  width: 300px;
  height: 5px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  border: 1px solid #14334b;
  height: 17px;
  width: 17px;
  border-radius: 50%;
  background: #3876c2; /* Old browsers */
  background: -moz-linear-gradient(top, #3876c2 0%, #385380 100%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #3876c2),
    color-stop(100%, #385380)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #3876c2 0%,
    #385380 100%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #3876c2 0%, #385380 100%); /* IE10+ */
  background: linear-gradient(to bottom, #3876c2 0%, #385380 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */
  box-shadow: #111927 0px 0px 1px 0px;
  margin-top: -7px;
}
input.vis-configuration.vis-config-range:focus {
  outline: none;
}
input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {
  background: #9d9d9d; /* Old browsers */
  background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #9d9d9d),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #9d9d9d 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #9d9d9d 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */
}

input.vis-configuration.vis-config-range::-moz-range-track {
  width: 300px;
  height: 10px;
  background: #dedede; /* Old browsers */
  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
  background: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0%, #dedede),
    color-stop(99%, #c8c8c8)
  ); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(
    top,
    #dedede 0%,
    #c8c8c8 99%
  ); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */
  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

  border: 1px solid #999999;
  box-shadow: #aaaaaa 0px 0px 3px 0px;
  border-radius: 3px;
}
input.vis-configuration.vis-config-range::-moz-range-thumb {
  border: none;
  height: 16px;
  width: 16px;

  border-radius: 50%;
  background: #385380;
}

/*hide the outline behind the border*/
input.vis-configuration.vis-config-range:-moz-focusring {
  outline: 1px solid white;
  outline-offset: -1px;
}

input.vis-configuration.vis-config-range::-ms-track {
  width: 300px;
  height: 5px;

  /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
  background: transparent;

  /*leave room for the larger thumb to overflow with a transparent border */
  border-color: transparent;
  border-width: 6px 0;

  /*remove default tick marks*/
  color: transparent;
}
input.vis-configuration.vis-config-range::-ms-fill-lower {
  background: #777;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-fill-upper {
  background: #ddd;
  border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-thumb {
  border: none;
  height: 16px;
  width: 16px;
  border-radius: 50%;
  background: #385380;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-lower {
  background: #888;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-upper {
  background: #ccc;
}

.vis-configuration-popup {
  position: absolute;
  background: rgba(57, 76, 89, 0.85);
  border: 2px solid #f2faff;
  line-height: 30px;
  height: 30px;
  width: 150px;
  text-align: center;
  color: #ffffff;
  font-size: 14px;
  border-radius: 4px;
  -webkit-transition: opacity 0.3s ease-in-out;
  -moz-transition: opacity 0.3s ease-in-out;
  transition: opacity 0.3s ease-in-out;
}
.vis-configuration-popup:after,
.vis-configuration-popup:before {
  left: 100%;
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none;
}

.vis-configuration-popup:after {
  border-color: rgba(136, 183, 213, 0);
  border-left-color: rgba(57, 76, 89, 0.85);
  border-width: 8px;
  margin-top: -8px;
}
.vis-configuration-popup:before {
  border-color: rgba(194, 225, 245, 0);
  border-left-color: #f2faff;
  border-width: 12px;
  margin-top: -12px;
}
`;Ii(wRe);var _Re=`div.vis-tooltip {
  position: absolute;
  visibility: hidden;
  padding: 5px;
  white-space: nowrap;

  font-family: verdana;
  font-size: 14px;
  color: #000000;
  background-color: #f5f4ed;

  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #808074;

  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  pointer-events: none;

  z-index: 5;
}
`;Ii(_Re);var SRe=`.vis-timeline {
  /*
  -webkit-transition: height .4s ease-in-out;
  transition:         height .4s ease-in-out;
  */
}

.vis-panel {
  /*
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
  */
}

.vis-axis {
  /*
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
  */
}

/* TODO: get animation working nicely

.vis-item {
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
}

.vis-item.line {
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
}
/**/
`;Ii(SRe);var kRe=`.vis-current-time {
  background-color: #ff7f6e;
  width: 2px;
  z-index: 1;
  pointer-events: none;
}

.vis-rolling-mode-btn {
  height: 40px;
  width: 40px;
  position: absolute;
  top: 7px;
  right: 20px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  opacity: 0.8;
  color: white;
  font-weight: bold;
  text-align: center;
  background: #3876c2;
}
.vis-rolling-mode-btn:before {
  content: "\\26F6";
}

.vis-rolling-mode-btn:hover {
  opacity: 1;
}
`;Ii(kRe);var CRe=`.vis-custom-time {
  background-color: #6e94ff;
  width: 2px;
  cursor: move;
  z-index: 1;
}

.vis-custom-time > .vis-custom-time-marker {
  background-color: inherit;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  padding: 3px 5px;
  top: 0px;
  cursor: initial;
  z-index: inherit;
}
`;Ii(CRe);var ERe=`.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal {
  position: absolute;
  width: 100%;
  height: 0;
  border-bottom: 1px solid;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major {
  border-color: #bfbfbf;
}

.vis-data-axis .vis-y-axis.vis-major {
  width: 100%;
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-major.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-minor {
  position: absolute;
  width: 100%;
  color: #bebebe;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-minor.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title {
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
  bottom: 20px;
  text-align: center;
}

.vis-data-axis .vis-y-axis.vis-title.vis-measure {
  padding: 0;
  margin: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title.vis-left {
  bottom: 0;
  -webkit-transform-origin: left top;
  -moz-transform-origin: left top;
  -ms-transform-origin: left top;
  -o-transform-origin: left top;
  transform-origin: left bottom;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.vis-data-axis .vis-y-axis.vis-title.vis-right {
  bottom: 0;
  -webkit-transform-origin: right bottom;
  -moz-transform-origin: right bottom;
  -ms-transform-origin: right bottom;
  -o-transform-origin: right bottom;
  transform-origin: right bottom;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
}

.vis-legend {
  background-color: rgba(247, 252, 255, 0.65);
  padding: 5px;
  border: 1px solid #b3b3b3;
  box-shadow: 2px 2px 10px rgba(154, 154, 154, 0.55);
}

.vis-legend-text {
  /*font-size: 10px;*/
  white-space: nowrap;
  display: inline-block;
}
`;Ii(ERe);var TRe=`.vis-item {
  position: absolute;
  color: #1a1a1a;
  border-color: #97b0f8;
  border-width: 1px;
  background-color: #d5ddf6;
  display: inline-block;
  z-index: 1;
  /*overflow: hidden;*/
}

.vis-item.vis-selected {
  border-color: #ffc200;
  background-color: #fff785;

  /* z-index must be higher than the z-index of custom time bar and current time bar */
  z-index: 2;
}

.vis-editable.vis-selected {
  cursor: move;
}

.vis-item.vis-point.vis-selected {
  background-color: #fff785;
}

.vis-item.vis-box {
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-point {
  background: none;
}

.vis-item.vis-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}

.vis-item.vis-range {
  border-style: solid;
  border-radius: 2px;
  box-sizing: border-box;
}

.vis-item.vis-background {
  border: none;
  background-color: rgba(213, 221, 246, 0.4);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.vis-item .vis-item-overflow {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

.vis-item-visible-frame {
  white-space: nowrap;
}

.vis-item.vis-range .vis-item-content {
  position: relative;
  display: inline-block;
}

.vis-item.vis-background .vis-item-content {
  position: absolute;
  display: inline-block;
}

.vis-item.vis-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item .vis-item-content {
  white-space: nowrap;
  box-sizing: border-box;
  padding: 5px;
}

.vis-item .vis-onUpdateTime-tooltip {
  position: absolute;
  background: #4f81bd;
  color: white;
  width: 200px;
  text-align: center;
  white-space: nowrap;
  padding: 5px;
  border-radius: 1px;
  transition: 0.4s;
  -o-transition: 0.4s;
  -moz-transition: 0.4s;
  -webkit-transition: 0.4s;
}

.vis-item .vis-delete,
.vis-item .vis-delete-rtl {
  position: absolute;
  top: 0px;
  width: 24px;
  height: 24px;
  box-sizing: border-box;
  padding: 0px 5px;
  cursor: pointer;

  -webkit-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -ms-transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  transition: background 0.2s linear;
}

.vis-item .vis-delete {
  right: -24px;
}

.vis-item .vis-delete-rtl {
  left: -24px;
}

.vis-item .vis-delete:after,
.vis-item .vis-delete-rtl:after {
  content: "\\00D7"; /* MULTIPLICATION SIGN */
  color: red;
  font-family: arial, sans-serif;
  font-size: 22px;
  font-weight: bold;

  -webkit-transition: color 0.2s linear;
  -moz-transition: color 0.2s linear;
  -ms-transition: color 0.2s linear;
  -o-transition: color 0.2s linear;
  transition: color 0.2s linear;
}

.vis-item .vis-delete:hover,
.vis-item .vis-delete-rtl:hover {
  background: red;
}

.vis-item .vis-delete:hover:after,
.vis-item .vis-delete-rtl:hover:after {
  color: white;
}

.vis-item .vis-drag-center {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0px;
  cursor: move;
}

.vis-item.vis-range .vis-drag-left {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  left: -4px;

  cursor: w-resize;
}

.vis-item.vis-range .vis-drag-right {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  right: -4px;

  cursor: e-resize;
}

.vis-range.vis-item.vis-readonly .vis-drag-left,
.vis-range.vis-item.vis-readonly .vis-drag-right {
  cursor: auto;
}

.vis-item.vis-cluster {
  vertical-align: center;
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-cluster-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item.vis-cluster-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}
`;Ii(TRe);var PRe=`.vis-itemset {
  position: relative;
  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-itemset .vis-background,
.vis-itemset .vis-foreground {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.vis-axis {
  position: absolute;
  width: 100%;
  height: 0;
  left: 0;
  z-index: 1;
}

.vis-foreground .vis-group {
  position: relative;
  box-sizing: border-box;
  border-bottom: 1px solid #bfbfbf;
}

.vis-foreground .vis-group:last-child {
  border-bottom: none;
}

.vis-nesting-group {
  cursor: pointer;
}

.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1 {
  background: #f5f5f5;
}
.vis-label.vis-nested-group.vis-group-level-0 {
  background-color: #ffffff;
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-left: 0;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-right: 0;
}
.vis-label.vis-nested-group.vis-group-level-1 {
  background-color: rgba(0, 0, 0, 0.05);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-left: 15px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-right: 15px;
}
.vis-label.vis-nested-group.vis-group-level-2 {
  background-color: rgba(0, 0, 0, 0.1);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-left: 30px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-right: 30px;
}
.vis-label.vis-nested-group.vis-group-level-3 {
  background-color: rgba(0, 0, 0, 0.15);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-left: 45px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-right: 45px;
}
.vis-label.vis-nested-group.vis-group-level-4 {
  background-color: rgba(0, 0, 0, 0.2);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-left: 60px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-right: 60px;
}
.vis-label.vis-nested-group.vis-group-level-5 {
  background-color: rgba(0, 0, 0, 0.25);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-left: 75px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-right: 75px;
}
.vis-label.vis-nested-group.vis-group-level-6 {
  background-color: rgba(0, 0, 0, 0.3);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-left: 90px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-right: 90px;
}
.vis-label.vis-nested-group.vis-group-level-7 {
  background-color: rgba(0, 0, 0, 0.35);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-left: 105px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-right: 105px;
}
.vis-label.vis-nested-group.vis-group-level-8 {
  background-color: rgba(0, 0, 0, 0.4);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-left: 120px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-right: 120px;
}
.vis-label.vis-nested-group.vis-group-level-9 {
  background-color: rgba(0, 0, 0, 0.45);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-left: 135px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-right: 135px;
}
/* default takes over beginning with level-10 (thats why we add .vis-nested-group
  to the selectors above, to have higher specifity than these rules for the defaults) */
.vis-label.vis-nested-group {
  background-color: rgba(0, 0, 0, 0.5);
}
.vis-ltr .vis-label.vis-nested-group .vis-inner {
  padding-left: 150px;
}
.vis-rtl .vis-label.vis-nested-group .vis-inner {
  padding-right: 150px;
}

.vis-group-level-unknown-but-gte1 {
  border: 1px solid red;
}

/* expanded/collapsed indicators */
.vis-label.vis-nesting-group:before,
.vis-label.vis-nesting-group:before {
  display: inline-block;
  width: 15px;
}
.vis-label.vis-nesting-group.expanded:before {
  content: "\\25BC";
}
.vis-label.vis-nesting-group.collapsed:before {
  content: "\\25B6";
}
.vis-rtl .vis-label.vis-nesting-group.collapsed:before {
  content: "\\25C0";
}
/* compensate missing expanded/collapsed indicator, but only at levels > 0 */
.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-left: 15px;
}
.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-right: 15px;
}

.vis-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}
`;Ii(PRe);var MRe=`.vis-labelset {
  position: relative;

  overflow: hidden;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  color: #4d4d4d;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  border-bottom: 1px solid #bfbfbf;
}

.vis-labelset .vis-label.draggable {
  cursor: pointer;
}

.vis-group-is-dragging {
  background: rgba(0, 0, 0, 0.1);
}

.vis-labelset .vis-label:last-child {
  border-bottom: none;
}

.vis-labelset .vis-label .vis-inner {
  display: inline-block;
  padding: 5px;
}

.vis-labelset .vis-label .vis-inner.vis-hidden {
  padding: 0;
}
`;Ii(MRe);var DRe=`.vis-panel {
  position: absolute;

  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border: 1px #bfbfbf;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right {
  border-top-style: solid;
  border-bottom-style: solid;
  overflow: hidden;
}

.vis-left.vis-panel.vis-vertical-scroll,
.vis-right.vis-panel.vis-vertical-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;
}

.vis-left.vis-panel.vis-vertical-scroll {
  direction: rtl;
}

.vis-left.vis-panel.vis-vertical-scroll .vis-content {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll .vis-content {
  direction: rtl;
}

.vis-panel.vis-center,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border-left-style: solid;
  border-right-style: solid;
}

.vis-background {
  overflow: hidden;
}

.vis-panel > .vis-content {
  position: relative;
}

.vis-panel .vis-shadow {
  position: absolute;
  width: 100%;
  height: 1px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
  /* TODO: find a nice way to ensure vis-shadows are drawn on top of items
  z-index: 1;
  */
}

.vis-panel .vis-shadow.vis-top {
  top: -1px;
  left: 0;
}

.vis-panel .vis-shadow.vis-bottom {
  bottom: -1px;
  left: 0;
}
`;Ii(DRe);var ORe=`.vis-graph-group0 {
  fill: #4f81bd;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #4f81bd;
}

.vis-graph-group1 {
  fill: #f79646;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #f79646;
}

.vis-graph-group2 {
  fill: #8c51cf;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8c51cf;
}

.vis-graph-group3 {
  fill: #75c841;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #75c841;
}

.vis-graph-group4 {
  fill: #ff0100;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff0100;
}

.vis-graph-group5 {
  fill: #37d8e6;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #37d8e6;
}

.vis-graph-group6 {
  fill: #042662;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #042662;
}

.vis-graph-group7 {
  fill: #00ff26;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #00ff26;
}

.vis-graph-group8 {
  fill: #ff00ff;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #ff00ff;
}

.vis-graph-group9 {
  fill: #8f3938;
  fill-opacity: 0;
  stroke-width: 2px;
  stroke: #8f3938;
}

.vis-timeline .vis-fill {
  fill-opacity: 0.1;
  stroke: none;
}

.vis-timeline .vis-bar {
  fill-opacity: 0.5;
  stroke-width: 1px;
}

.vis-timeline .vis-point {
  stroke-width: 2px;
  fill-opacity: 1;
}

.vis-timeline .vis-legend-background {
  stroke-width: 1px;
  fill-opacity: 0.9;
  fill: #ffffff;
  stroke: #c2c2c2;
}

.vis-timeline .vis-outline {
  stroke-width: 1px;
  fill-opacity: 1;
  fill: #ffffff;
  stroke: #e5e5e5;
}

.vis-timeline .vis-icon-fill {
  fill-opacity: 0.3;
  stroke: none;
}
`;Ii(ORe);var IRe=`.vis-time-axis {
  position: relative;
  overflow: hidden;
}

.vis-time-axis.vis-foreground {
  top: 0;
  left: 0;
  width: 100%;
}

.vis-time-axis.vis-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.vis-time-axis .vis-text {
  position: absolute;
  color: #4d4d4d;
  padding: 3px;
  overflow: hidden;
  box-sizing: border-box;

  white-space: nowrap;
}

.vis-time-axis .vis-text.vis-measure {
  position: absolute;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  visibility: hidden;
}

.vis-time-axis .vis-grid.vis-vertical {
  position: absolute;
  border-left: 1px solid;
}

.vis-time-axis .vis-grid.vis-vertical-rtl {
  position: absolute;
  border-right: 1px solid;
}

.vis-time-axis .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-time-axis .vis-grid.vis-major {
  border-color: #bfbfbf;
}
`;Ii(IRe);var ARe=`.vis-timeline {
  position: relative;
  border: 1px solid #bfbfbf;
  overflow: hidden;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

.vis-loading-screen {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}
`;Ii(ARe);var mB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ao(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CA={exports:{}},Fx={exports:{}},RRe=Fx.exports,gB;function Ro(){return gB||(gB=1,function(n,e){(function(r,i){n.exports=i()})(RRe,function(){var r;function i(){return r.apply(null,arguments)}function s(x){r=x}function o(x){return x instanceof Array||Object.prototype.toString.call(x)==="[object Array]"}function a(x){return x!=null&&Object.prototype.toString.call(x)==="[object Object]"}function l(x,M){return Object.prototype.hasOwnProperty.call(x,M)}function c(x){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(x).length===0;var M;for(M in x)if(l(x,M))return!1;return!0}function u(x){return x===void 0}function h(x){return typeof x=="number"||Object.prototype.toString.call(x)==="[object Number]"}function d(x){return x instanceof Date||Object.prototype.toString.call(x)==="[object Date]"}function f(x,M){var A=[],$,V=x.length;for($=0;$<V;++$)A.push(M(x[$],$));return A}function m(x,M){for(var A in M)l(M,A)&&(x[A]=M[A]);return l(M,"toString")&&(x.toString=M.toString),l(M,"valueOf")&&(x.valueOf=M.valueOf),x}function g(x,M,A,$){return yj(x,M,A,$,!0).utc()}function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(x){return x._pf==null&&(x._pf=b()),x._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(x){var M=Object(this),A=M.length>>>0,$;for($=0;$<A;$++)if($ in M&&x.call(this,M[$],$,M))return!0;return!1};function w(x){var M=null,A=!1,$=x._d&&!isNaN(x._d.getTime());if($&&(M=y(x),A=v.call(M.parsedDateParts,function(V){return V!=null}),$=M.overflow<0&&!M.empty&&!M.invalidEra&&!M.invalidMonth&&!M.invalidWeekday&&!M.weekdayMismatch&&!M.nullInput&&!M.invalidFormat&&!M.userInvalidated&&(!M.meridiem||M.meridiem&&A),x._strict&&($=$&&M.charsLeftOver===0&&M.unusedTokens.length===0&&M.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(x))x._isValid=$;else return $;return x._isValid}function k(x){var M=g(NaN);return x!=null?m(y(M),x):y(M).userInvalidated=!0,M}var S=i.momentProperties=[],_=!1;function C(x,M){var A,$,V,ue=S.length;if(u(M._isAMomentObject)||(x._isAMomentObject=M._isAMomentObject),u(M._i)||(x._i=M._i),u(M._f)||(x._f=M._f),u(M._l)||(x._l=M._l),u(M._strict)||(x._strict=M._strict),u(M._tzm)||(x._tzm=M._tzm),u(M._isUTC)||(x._isUTC=M._isUTC),u(M._offset)||(x._offset=M._offset),u(M._pf)||(x._pf=y(M)),u(M._locale)||(x._locale=M._locale),ue>0)for(A=0;A<ue;A++)$=S[A],V=M[$],u(V)||(x[$]=V);return x}function P(x){C(this,x),this._d=new Date(x._d!=null?x._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),_===!1&&(_=!0,i.updateOffset(this),_=!1)}function T(x){return x instanceof P||x!=null&&x._isAMomentObject!=null}function O(x){i.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+x)}function D(x,M){var A=!0;return m(function(){if(i.deprecationHandler!=null&&i.deprecationHandler(null,x),A){var $=[],V,ue,Re,vt=arguments.length;for(ue=0;ue<vt;ue++){if(V="",typeof arguments[ue]=="object"){V+=`
[`+ue+"] ";for(Re in arguments[0])l(arguments[0],Re)&&(V+=Re+": "+arguments[0][Re]+", ");V=V.slice(0,-2)}else V=arguments[ue];$.push(V)}O(x+`
Arguments: `+Array.prototype.slice.call($).join("")+`
`+new Error().stack),A=!1}return M.apply(this,arguments)},M)}var I={};function U(x,M){i.deprecationHandler!=null&&i.deprecationHandler(x,M),I[x]||(O(M),I[x]=!0)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;function B(x){return typeof Function<"u"&&x instanceof Function||Object.prototype.toString.call(x)==="[object Function]"}function z(x){var M,A;for(A in x)l(x,A)&&(M=x[A],B(M)?this[A]=M:this["_"+A]=M);this._config=x,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(x,M){var A=m({},x),$;for($ in M)l(M,$)&&(a(x[$])&&a(M[$])?(A[$]={},m(A[$],x[$]),m(A[$],M[$])):M[$]!=null?A[$]=M[$]:delete A[$]);for($ in x)l(x,$)&&!l(M,$)&&a(x[$])&&(A[$]=m({},A[$]));return A}function F(x){x!=null&&this.set(x)}var N;Object.keys?N=Object.keys:N=function(x){var M,A=[];for(M in x)l(x,M)&&A.push(M);return A};var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function W(x,M,A){var $=this._calendar[x]||this._calendar.sameElse;return B($)?$.call(M,A):$}function Y(x,M,A){var $=""+Math.abs(x),V=M-$.length,ue=x>=0;return(ue?A?"+":"":"-")+Math.pow(10,Math.max(0,V)).toString().substr(1)+$}var K=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Q={},G={};function X(x,M,A,$){var V=$;typeof $=="string"&&(V=function(){return this[$]()}),x&&(G[x]=V),M&&(G[M[0]]=function(){return Y(V.apply(this,arguments),M[1],M[2])}),A&&(G[A]=function(){return this.localeData().ordinal(V.apply(this,arguments),x)})}function de(x){return x.match(/\[[\s\S]/)?x.replace(/^\[|\]$/g,""):x.replace(/\\/g,"")}function ye(x){var M=x.match(K),A,$;for(A=0,$=M.length;A<$;A++)G[M[A]]?M[A]=G[M[A]]:M[A]=de(M[A]);return function(V){var ue="",Re;for(Re=0;Re<$;Re++)ue+=B(M[Re])?M[Re].call(V,x):M[Re];return ue}}function se(x,M){return x.isValid()?(M=ie(M,x.localeData()),Q[M]=Q[M]||ye(M),Q[M](x)):x.localeData().invalidDate()}function ie(x,M){var A=5;function $(V){return M.longDateFormat(V)||V}for(H.lastIndex=0;A>=0&&H.test(x);)x=x.replace(H,$),H.lastIndex=0,A-=1;return x}var Pe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ke(x){var M=this._longDateFormat[x],A=this._longDateFormat[x.toUpperCase()];return M||!A?M:(this._longDateFormat[x]=A.match(K).map(function($){return $==="MMMM"||$==="MM"||$==="DD"||$==="dddd"?$.slice(1):$}).join(""),this._longDateFormat[x])}var q="Invalid date";function Ee(){return this._invalidDate}var Je="%d",ct=/\d{1,2}/;function $e(x){return this._ordinal.replace("%d",x)}var ut={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function qe(x,M,A,$){var V=this._relativeTime[A];return B(V)?V(x,M,A,$):V.replace(/%d/i,x)}function we(x,M){var A=this._relativeTime[x>0?"future":"past"];return B(A)?A(M):A.replace(/%s/i,M)}var ze={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Me(x){return typeof x=="string"?ze[x]||ze[x.toLowerCase()]:void 0}function Ie(x){var M={},A,$;for($ in x)l(x,$)&&(A=Me($),A&&(M[A]=x[$]));return M}var Ce={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function xe(x){var M=[],A;for(A in x)l(x,A)&&M.push({unit:A,priority:Ce[A]});return M.sort(function($,V){return $.priority-V.priority}),M}var L=/\d/,re=/\d\d/,fe=/\d{3}/,le=/\d{4}/,ce=/[+-]?\d{6}/,ge=/\d\d?/,J=/\d\d\d\d?/,he=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,_e=/\d{1,4}/,De=/[+-]?\d{1,6}/,ae=/\d+/,Xe=/[+-]?\d+/,Fe=/Z|[+-]\d\d:?\d\d/gi,te=/Z|[+-]\d\d(?::?\d\d)?/gi,ee=/[+-]?\d+(\.\d{1,3})?/,ne=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ze=/^[1-9]\d?/,je=/^([1-9]\d|\d)/,Ve;Ve={};function Ae(x,M,A){Ve[x]=B(M)?M:function($,V){return $&&A?A:M}}function Qe(x,M){return l(Ve,x)?Ve[x](M._strict,M._locale):new RegExp(lt(x))}function lt(x){return He(x.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(M,A,$,V,ue){return A||$||V||ue}))}function He(x){return x.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function rt(x){return x<0?Math.ceil(x)||0:Math.floor(x)}function Te(x){var M=+x,A=0;return M!==0&&isFinite(M)&&(A=rt(M)),A}var it={};function ve(x,M){var A,$=M,V;for(typeof x=="string"&&(x=[x]),h(M)&&($=function(ue,Re){Re[M]=Te(ue)}),V=x.length,A=0;A<V;A++)it[x[A]]=$}function wt(x,M){ve(x,function(A,$,V,ue){V._w=V._w||{},M(A,V._w,V,ue)})}function ft(x,M,A){M!=null&&l(it,x)&&it[x](M,A._a,A,x)}function _t(x){return x%4===0&&x%100!==0||x%400===0}var Rt=0,Mt=1,Wt=2,Nt=3,et=4,Gt=5,$n=6,Xt=7,ts=8;X("Y",0,0,function(){var x=this.year();return x<=9999?Y(x,4):"+"+x}),X(0,["YY",2],0,function(){return this.year()%100}),X(0,["YYYY",4],0,"year"),X(0,["YYYYY",5],0,"year"),X(0,["YYYYYY",6,!0],0,"year"),Ae("Y",Xe),Ae("YY",ge,re),Ae("YYYY",_e,le),Ae("YYYYY",De,ce),Ae("YYYYYY",De,ce),ve(["YYYYY","YYYYYY"],Rt),ve("YYYY",function(x,M){M[Rt]=x.length===2?i.parseTwoDigitYear(x):Te(x)}),ve("YY",function(x,M){M[Rt]=i.parseTwoDigitYear(x)}),ve("Y",function(x,M){M[Rt]=parseInt(x,10)});function Br(x){return _t(x)?366:365}i.parseTwoDigitYear=function(x){return Te(x)+(Te(x)>68?1900:2e3)};var Cs=yr("FullYear",!0);function io(){return _t(this.year())}function yr(x,M){return function(A){return A!=null?(ns(this,x,A),i.updateOffset(this,M),this):zr(this,x)}}function zr(x,M){if(!x.isValid())return NaN;var A=x._d,$=x._isUTC;switch(M){case"Milliseconds":return $?A.getUTCMilliseconds():A.getMilliseconds();case"Seconds":return $?A.getUTCSeconds():A.getSeconds();case"Minutes":return $?A.getUTCMinutes():A.getMinutes();case"Hours":return $?A.getUTCHours():A.getHours();case"Date":return $?A.getUTCDate():A.getDate();case"Day":return $?A.getUTCDay():A.getDay();case"Month":return $?A.getUTCMonth():A.getMonth();case"FullYear":return $?A.getUTCFullYear():A.getFullYear();default:return NaN}}function ns(x,M,A){var $,V,ue,Re,vt;if(!(!x.isValid()||isNaN(A))){switch($=x._d,V=x._isUTC,M){case"Milliseconds":return void(V?$.setUTCMilliseconds(A):$.setMilliseconds(A));case"Seconds":return void(V?$.setUTCSeconds(A):$.setSeconds(A));case"Minutes":return void(V?$.setUTCMinutes(A):$.setMinutes(A));case"Hours":return void(V?$.setUTCHours(A):$.setHours(A));case"Date":return void(V?$.setUTCDate(A):$.setDate(A));case"FullYear":break;default:return}ue=A,Re=x.month(),vt=x.date(),vt=vt===29&&Re===1&&!_t(ue)?28:vt,V?$.setUTCFullYear(ue,Re,vt):$.setFullYear(ue,Re,vt)}}function dh(x){return x=Me(x),B(this[x])?this[x]():this}function hh(x,M){if(typeof x=="object"){x=Ie(x);var A=xe(x),$,V=A.length;for($=0;$<V;$++)this[A[$].unit](x[A[$].unit])}else if(x=Me(x),B(this[x]))return this[x](M);return this}function Lo(x,M){return(x%M+M)%M}var fn;Array.prototype.indexOf?fn=Array.prototype.indexOf:fn=function(x){var M;for(M=0;M<this.length;++M)if(this[M]===x)return M;return-1};function ka(x,M){if(isNaN(x)||isNaN(M))return NaN;var A=Lo(M,12);return x+=(M-A)/12,A===1?_t(x)?29:28:31-A%7%2}X("M",["MM",2],"Mo",function(){return this.month()+1}),X("MMM",0,0,function(x){return this.localeData().monthsShort(this,x)}),X("MMMM",0,0,function(x){return this.localeData().months(this,x)}),Ae("M",ge,Ze),Ae("MM",ge,re),Ae("MMM",function(x,M){return M.monthsShortRegex(x)}),Ae("MMMM",function(x,M){return M.monthsRegex(x)}),ve(["M","MM"],function(x,M){M[Mt]=Te(x)-1}),ve(["MMM","MMMM"],function(x,M,A,$){var V=A._locale.monthsParse(x,$,A._strict);V!=null?M[Mt]=V:y(A).invalidMonth=x});var jl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ca="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ll=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fh=ne,ph=ne;function Bn(x,M){return x?o(this._months)?this._months[x.month()]:this._months[(this._months.isFormat||Ll).test(M)?"format":"standalone"][x.month()]:o(this._months)?this._months:this._months.standalone}function Mr(x,M){return x?o(this._monthsShort)?this._monthsShort[x.month()]:this._monthsShort[Ll.test(M)?"format":"standalone"][x.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function vr(x,M,A){var $,V,ue,Re=x.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],$=0;$<12;++$)ue=g([2e3,$]),this._shortMonthsParse[$]=this.monthsShort(ue,"").toLocaleLowerCase(),this._longMonthsParse[$]=this.months(ue,"").toLocaleLowerCase();return A?M==="MMM"?(V=fn.call(this._shortMonthsParse,Re),V!==-1?V:null):(V=fn.call(this._longMonthsParse,Re),V!==-1?V:null):M==="MMM"?(V=fn.call(this._shortMonthsParse,Re),V!==-1?V:(V=fn.call(this._longMonthsParse,Re),V!==-1?V:null)):(V=fn.call(this._longMonthsParse,Re),V!==-1?V:(V=fn.call(this._shortMonthsParse,Re),V!==-1?V:null))}function mh(x,M,A){var $,V,ue;if(this._monthsParseExact)return vr.call(this,x,M,A);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),$=0;$<12;$++){if(V=g([2e3,$]),A&&!this._longMonthsParse[$]&&(this._longMonthsParse[$]=new RegExp("^"+this.months(V,"").replace(".","")+"$","i"),this._shortMonthsParse[$]=new RegExp("^"+this.monthsShort(V,"").replace(".","")+"$","i")),!A&&!this._monthsParse[$]&&(ue="^"+this.months(V,"")+"|^"+this.monthsShort(V,""),this._monthsParse[$]=new RegExp(ue.replace(".",""),"i")),A&&M==="MMMM"&&this._longMonthsParse[$].test(x))return $;if(A&&M==="MMM"&&this._shortMonthsParse[$].test(x))return $;if(!A&&this._monthsParse[$].test(x))return $}}function Fl(x,M){if(!x.isValid())return x;if(typeof M=="string"){if(/^\d+$/.test(M))M=Te(M);else if(M=x.localeData().monthsParse(M),!h(M))return x}var A=M,$=x.date();return $=$<29?$:Math.min($,ka(x.year(),A)),x._isUTC?x._d.setUTCMonth(A,$):x._d.setMonth(A,$),x}function fu(x){return x!=null?(Fl(this,x),i.updateOffset(this,!0),this):zr(this,"Month")}function pu(){return ka(this.year(),this.month())}function mu(x){return this._monthsParseExact?(l(this,"_monthsRegex")||$l.call(this),x?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=fh),this._monthsShortStrictRegex&&x?this._monthsShortStrictRegex:this._monthsShortRegex)}function gu(x){return this._monthsParseExact?(l(this,"_monthsRegex")||$l.call(this),x?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ph),this._monthsStrictRegex&&x?this._monthsStrictRegex:this._monthsRegex)}function $l(){function x(jt,Zt){return Zt.length-jt.length}var M=[],A=[],$=[],V,ue,Re,vt;for(V=0;V<12;V++)ue=g([2e3,V]),Re=He(this.monthsShort(ue,"")),vt=He(this.months(ue,"")),M.push(Re),A.push(vt),$.push(vt),$.push(Re);M.sort(x),A.sort(x),$.sort(x),this._monthsRegex=new RegExp("^("+$.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+A.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+M.join("|")+")","i")}function Se(x,M,A,$,V,ue,Re){var vt;return x<100&&x>=0?(vt=new Date(x+400,M,A,$,V,ue,Re),isFinite(vt.getFullYear())&&vt.setFullYear(x)):vt=new Date(x,M,A,$,V,ue,Re),vt}function Ge(x){var M,A;return x<100&&x>=0?(A=Array.prototype.slice.call(arguments),A[0]=x+400,M=new Date(Date.UTC.apply(null,A)),isFinite(M.getUTCFullYear())&&M.setUTCFullYear(x)):M=new Date(Date.UTC.apply(null,arguments)),M}function Ue(x,M,A){var $=7+M-A,V=(7+Ge(x,0,$).getUTCDay()-M)%7;return-V+$-1}function Ye(x,M,A,$,V){var ue=(7+A-$)%7,Re=Ue(x,$,V),vt=1+7*(M-1)+ue+Re,jt,Zt;return vt<=0?(jt=x-1,Zt=Br(jt)+vt):vt>Br(x)?(jt=x+1,Zt=vt-Br(x)):(jt=x,Zt=vt),{year:jt,dayOfYear:Zt}}function Oe(x,M,A){var $=Ue(x.year(),M,A),V=Math.floor((x.dayOfYear()-$-1)/7)+1,ue,Re;return V<1?(Re=x.year()-1,ue=V+gt(Re,M,A)):V>gt(x.year(),M,A)?(ue=V-gt(x.year(),M,A),Re=x.year()+1):(Re=x.year(),ue=V),{week:ue,year:Re}}function gt(x,M,A){var $=Ue(x,M,A),V=Ue(x+1,M,A);return(Br(x)-$+V)/7}X("w",["ww",2],"wo","week"),X("W",["WW",2],"Wo","isoWeek"),Ae("w",ge,Ze),Ae("ww",ge,re),Ae("W",ge,Ze),Ae("WW",ge,re),wt(["w","ww","W","WW"],function(x,M,A,$){M[$.substr(0,1)]=Te(x)});function It(x){return Oe(x,this._week.dow,this._week.doy).week}var dt={dow:0,doy:6};function dn(){return this._week.dow}function An(){return this._week.doy}function Jt(x){var M=this.localeData().week(this);return x==null?M:this.add((x-M)*7,"d")}function xr(x){var M=Oe(this,1,4).week;return x==null?M:this.add((x-M)*7,"d")}X("d",0,"do","day"),X("dd",0,0,function(x){return this.localeData().weekdaysMin(this,x)}),X("ddd",0,0,function(x){return this.localeData().weekdaysShort(this,x)}),X("dddd",0,0,function(x){return this.localeData().weekdays(this,x)}),X("e",0,0,"weekday"),X("E",0,0,"isoWeekday"),Ae("d",ge),Ae("e",ge),Ae("E",ge),Ae("dd",function(x,M){return M.weekdaysMinRegex(x)}),Ae("ddd",function(x,M){return M.weekdaysShortRegex(x)}),Ae("dddd",function(x,M){return M.weekdaysRegex(x)}),wt(["dd","ddd","dddd"],function(x,M,A,$){var V=A._locale.weekdaysParse(x,$,A._strict);V!=null?M.d=V:y(A).invalidWeekday=x}),wt(["d","e","E"],function(x,M,A,$){M[$]=Te(x)});function qt(x,M){return typeof x!="string"?x:isNaN(x)?(x=M.weekdaysParse(x),typeof x=="number"?x:null):parseInt(x,10)}function rs(x,M){return typeof x=="string"?M.weekdaysParse(x)%7||7:isNaN(x)?null:x}function Ht(x,M){return x.slice(M,7).concat(x.slice(0,M))}var ar="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),oe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),tt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),bt=ne,Cn=ne,kr=ne;function Ea(x,M){var A=o(this._weekdays)?this._weekdays:this._weekdays[x&&x!==!0&&this._weekdays.isFormat.test(M)?"format":"standalone"];return x===!0?Ht(A,this._week.dow):x?A[x.day()]:A}function Ur(x){return x===!0?Ht(this._weekdaysShort,this._week.dow):x?this._weekdaysShort[x.day()]:this._weekdaysShort}function poe(x){return x===!0?Ht(this._weekdaysMin,this._week.dow):x?this._weekdaysMin[x.day()]:this._weekdaysMin}function moe(x,M,A){var $,V,ue,Re=x.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],$=0;$<7;++$)ue=g([2e3,1]).day($),this._minWeekdaysParse[$]=this.weekdaysMin(ue,"").toLocaleLowerCase(),this._shortWeekdaysParse[$]=this.weekdaysShort(ue,"").toLocaleLowerCase(),this._weekdaysParse[$]=this.weekdays(ue,"").toLocaleLowerCase();return A?M==="dddd"?(V=fn.call(this._weekdaysParse,Re),V!==-1?V:null):M==="ddd"?(V=fn.call(this._shortWeekdaysParse,Re),V!==-1?V:null):(V=fn.call(this._minWeekdaysParse,Re),V!==-1?V:null):M==="dddd"?(V=fn.call(this._weekdaysParse,Re),V!==-1||(V=fn.call(this._shortWeekdaysParse,Re),V!==-1)?V:(V=fn.call(this._minWeekdaysParse,Re),V!==-1?V:null)):M==="ddd"?(V=fn.call(this._shortWeekdaysParse,Re),V!==-1||(V=fn.call(this._weekdaysParse,Re),V!==-1)?V:(V=fn.call(this._minWeekdaysParse,Re),V!==-1?V:null)):(V=fn.call(this._minWeekdaysParse,Re),V!==-1||(V=fn.call(this._weekdaysParse,Re),V!==-1)?V:(V=fn.call(this._shortWeekdaysParse,Re),V!==-1?V:null))}function goe(x,M,A){var $,V,ue;if(this._weekdaysParseExact)return moe.call(this,x,M,A);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),$=0;$<7;$++){if(V=g([2e3,1]).day($),A&&!this._fullWeekdaysParse[$]&&(this._fullWeekdaysParse[$]=new RegExp("^"+this.weekdays(V,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[$]=new RegExp("^"+this.weekdaysShort(V,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[$]=new RegExp("^"+this.weekdaysMin(V,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[$]||(ue="^"+this.weekdays(V,"")+"|^"+this.weekdaysShort(V,"")+"|^"+this.weekdaysMin(V,""),this._weekdaysParse[$]=new RegExp(ue.replace(".",""),"i")),A&&M==="dddd"&&this._fullWeekdaysParse[$].test(x))return $;if(A&&M==="ddd"&&this._shortWeekdaysParse[$].test(x))return $;if(A&&M==="dd"&&this._minWeekdaysParse[$].test(x))return $;if(!A&&this._weekdaysParse[$].test(x))return $}}function boe(x){if(!this.isValid())return x!=null?this:NaN;var M=zr(this,"Day");return x!=null?(x=qt(x,this.localeData()),this.add(x-M,"d")):M}function yoe(x){if(!this.isValid())return x!=null?this:NaN;var M=(this.day()+7-this.localeData()._week.dow)%7;return x==null?M:this.add(x-M,"d")}function voe(x){if(!this.isValid())return x!=null?this:NaN;if(x!=null){var M=rs(x,this.localeData());return this.day(this.day()%7?M:M-7)}else return this.day()||7}function xoe(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||pS.call(this),x?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=bt),this._weekdaysStrictRegex&&x?this._weekdaysStrictRegex:this._weekdaysRegex)}function woe(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||pS.call(this),x?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Cn),this._weekdaysShortStrictRegex&&x?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function _oe(x){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||pS.call(this),x?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kr),this._weekdaysMinStrictRegex&&x?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function pS(){function x(pi,Oa){return Oa.length-pi.length}var M=[],A=[],$=[],V=[],ue,Re,vt,jt,Zt;for(ue=0;ue<7;ue++)Re=g([2e3,1]).day(ue),vt=He(this.weekdaysMin(Re,"")),jt=He(this.weekdaysShort(Re,"")),Zt=He(this.weekdays(Re,"")),M.push(vt),A.push(jt),$.push(Zt),V.push(vt),V.push(jt),V.push(Zt);M.sort(x),A.sort(x),$.sort(x),V.sort(x),this._weekdaysRegex=new RegExp("^("+V.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+$.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+A.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+M.join("|")+")","i")}function mS(){return this.hours()%12||12}function Soe(){return this.hours()||24}X("H",["HH",2],0,"hour"),X("h",["hh",2],0,mS),X("k",["kk",2],0,Soe),X("hmm",0,0,function(){return""+mS.apply(this)+Y(this.minutes(),2)}),X("hmmss",0,0,function(){return""+mS.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)}),X("Hmm",0,0,function(){return""+this.hours()+Y(this.minutes(),2)}),X("Hmmss",0,0,function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)});function dj(x,M){X(x,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),M)})}dj("a",!0),dj("A",!1);function hj(x,M){return M._meridiemParse}Ae("a",hj),Ae("A",hj),Ae("H",ge,je),Ae("h",ge,Ze),Ae("k",ge,Ze),Ae("HH",ge,re),Ae("hh",ge,re),Ae("kk",ge,re),Ae("hmm",J),Ae("hmmss",he),Ae("Hmm",J),Ae("Hmmss",he),ve(["H","HH"],Nt),ve(["k","kk"],function(x,M,A){var $=Te(x);M[Nt]=$===24?0:$}),ve(["a","A"],function(x,M,A){A._isPm=A._locale.isPM(x),A._meridiem=x}),ve(["h","hh"],function(x,M,A){M[Nt]=Te(x),y(A).bigHour=!0}),ve("hmm",function(x,M,A){var $=x.length-2;M[Nt]=Te(x.substr(0,$)),M[et]=Te(x.substr($)),y(A).bigHour=!0}),ve("hmmss",function(x,M,A){var $=x.length-4,V=x.length-2;M[Nt]=Te(x.substr(0,$)),M[et]=Te(x.substr($,2)),M[Gt]=Te(x.substr(V)),y(A).bigHour=!0}),ve("Hmm",function(x,M,A){var $=x.length-2;M[Nt]=Te(x.substr(0,$)),M[et]=Te(x.substr($))}),ve("Hmmss",function(x,M,A){var $=x.length-4,V=x.length-2;M[Nt]=Te(x.substr(0,$)),M[et]=Te(x.substr($,2)),M[Gt]=Te(x.substr(V))});function koe(x){return(x+"").toLowerCase().charAt(0)==="p"}var Coe=/[ap]\.?m?\.?/i,Eoe=yr("Hours",!0);function Toe(x,M,A){return x>11?A?"pm":"PM":A?"am":"AM"}var fj={calendar:R,longDateFormat:Pe,invalidDate:q,ordinal:Je,dayOfMonthOrdinalParse:ct,relativeTime:ut,months:jl,monthsShort:Ca,week:dt,weekdays:ar,weekdaysMin:tt,weekdaysShort:oe,meridiemParse:Coe},zn={},xm={},wm;function Poe(x,M){var A,$=Math.min(x.length,M.length);for(A=0;A<$;A+=1)if(x[A]!==M[A])return A;return $}function pj(x){return x&&x.toLowerCase().replace("_","-")}function Moe(x){for(var M=0,A,$,V,ue;M<x.length;){for(ue=pj(x[M]).split("-"),A=ue.length,$=pj(x[M+1]),$=$?$.split("-"):null;A>0;){if(V=vy(ue.slice(0,A).join("-")),V)return V;if($&&$.length>=A&&Poe(ue,$)>=A-1)break;A--}M++}return wm}function Doe(x){return!!(x&&x.match("^[^/\\\\]*$"))}function vy(x){var M=null,A;if(zn[x]===void 0&&n&&n.exports&&Doe(x))try{M=wm._abbr,A=Ao,A("./locale/"+x),Bl(M)}catch{zn[x]=null}return zn[x]}function Bl(x,M){var A;return x&&(u(M)?A=Ta(x):A=gS(x,M),A?wm=A:typeof console<"u"&&console.warn&&console.warn("Locale "+x+" not found. Did you forget to load it?")),wm._abbr}function gS(x,M){if(M!==null){var A,$=fj;if(M.abbr=x,zn[x]!=null)U("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),$=zn[x]._config;else if(M.parentLocale!=null)if(zn[M.parentLocale]!=null)$=zn[M.parentLocale]._config;else if(A=vy(M.parentLocale),A!=null)$=A._config;else return xm[M.parentLocale]||(xm[M.parentLocale]=[]),xm[M.parentLocale].push({name:x,config:M}),null;return zn[x]=new F(j($,M)),xm[x]&&xm[x].forEach(function(V){gS(V.name,V.config)}),Bl(x),zn[x]}else return delete zn[x],null}function Ooe(x,M){if(M!=null){var A,$,V=fj;zn[x]!=null&&zn[x].parentLocale!=null?zn[x].set(j(zn[x]._config,M)):($=vy(x),$!=null&&(V=$._config),M=j(V,M),$==null&&(M.abbr=x),A=new F(M),A.parentLocale=zn[x],zn[x]=A),Bl(x)}else zn[x]!=null&&(zn[x].parentLocale!=null?(zn[x]=zn[x].parentLocale,x===Bl()&&Bl(x)):zn[x]!=null&&delete zn[x]);return zn[x]}function Ta(x){var M;if(x&&x._locale&&x._locale._abbr&&(x=x._locale._abbr),!x)return wm;if(!o(x)){if(M=vy(x),M)return M;x=[x]}return Moe(x)}function Ioe(){return N(zn)}function bS(x){var M,A=x._a;return A&&y(x).overflow===-2&&(M=A[Mt]<0||A[Mt]>11?Mt:A[Wt]<1||A[Wt]>ka(A[Rt],A[Mt])?Wt:A[Nt]<0||A[Nt]>24||A[Nt]===24&&(A[et]!==0||A[Gt]!==0||A[$n]!==0)?Nt:A[et]<0||A[et]>59?et:A[Gt]<0||A[Gt]>59?Gt:A[$n]<0||A[$n]>999?$n:-1,y(x)._overflowDayOfYear&&(M<Rt||M>Wt)&&(M=Wt),y(x)._overflowWeeks&&M===-1&&(M=Xt),y(x)._overflowWeekday&&M===-1&&(M=ts),y(x).overflow=M),x}var Aoe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Roe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Noe=/Z|[+-]\d\d(?::?\d\d)?/,xy=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],yS=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],joe=/^\/?Date\((-?\d+)/i,Loe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Foe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mj(x){var M,A,$=x._i,V=Aoe.exec($)||Roe.exec($),ue,Re,vt,jt,Zt=xy.length,pi=yS.length;if(V){for(y(x).iso=!0,M=0,A=Zt;M<A;M++)if(xy[M][1].exec(V[1])){Re=xy[M][0],ue=xy[M][2]!==!1;break}if(Re==null){x._isValid=!1;return}if(V[3]){for(M=0,A=pi;M<A;M++)if(yS[M][1].exec(V[3])){vt=(V[2]||" ")+yS[M][0];break}if(vt==null){x._isValid=!1;return}}if(!ue&&vt!=null){x._isValid=!1;return}if(V[4])if(Noe.exec(V[4]))jt="Z";else{x._isValid=!1;return}x._f=Re+(vt||"")+(jt||""),xS(x)}else x._isValid=!1}function $oe(x,M,A,$,V,ue){var Re=[Boe(x),Ca.indexOf(M),parseInt(A,10),parseInt($,10),parseInt(V,10)];return ue&&Re.push(parseInt(ue,10)),Re}function Boe(x){var M=parseInt(x,10);return M<=49?2e3+M:M<=999?1900+M:M}function zoe(x){return x.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Uoe(x,M,A){if(x){var $=oe.indexOf(x),V=new Date(M[0],M[1],M[2]).getDay();if($!==V)return y(A).weekdayMismatch=!0,A._isValid=!1,!1}return!0}function Woe(x,M,A){if(x)return Foe[x];if(M)return 0;var $=parseInt(A,10),V=$%100,ue=($-V)/100;return ue*60+V}function gj(x){var M=Loe.exec(zoe(x._i)),A;if(M){if(A=$oe(M[4],M[3],M[2],M[5],M[6],M[7]),!Uoe(M[1],A,x))return;x._a=A,x._tzm=Woe(M[8],M[9],M[10]),x._d=Ge.apply(null,x._a),x._d.setUTCMinutes(x._d.getUTCMinutes()-x._tzm),y(x).rfc2822=!0}else x._isValid=!1}function qoe(x){var M=joe.exec(x._i);if(M!==null){x._d=new Date(+M[1]);return}if(mj(x),x._isValid===!1)delete x._isValid;else return;if(gj(x),x._isValid===!1)delete x._isValid;else return;x._strict?x._isValid=!1:i.createFromInputFallback(x)}i.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(x){x._d=new Date(x._i+(x._useUTC?" UTC":""))});function gh(x,M,A){return x??M??A}function Hoe(x){var M=new Date(i.now());return x._useUTC?[M.getUTCFullYear(),M.getUTCMonth(),M.getUTCDate()]:[M.getFullYear(),M.getMonth(),M.getDate()]}function vS(x){var M,A,$=[],V,ue,Re;if(!x._d){for(V=Hoe(x),x._w&&x._a[Wt]==null&&x._a[Mt]==null&&Voe(x),x._dayOfYear!=null&&(Re=gh(x._a[Rt],V[Rt]),(x._dayOfYear>Br(Re)||x._dayOfYear===0)&&(y(x)._overflowDayOfYear=!0),A=Ge(Re,0,x._dayOfYear),x._a[Mt]=A.getUTCMonth(),x._a[Wt]=A.getUTCDate()),M=0;M<3&&x._a[M]==null;++M)x._a[M]=$[M]=V[M];for(;M<7;M++)x._a[M]=$[M]=x._a[M]==null?M===2?1:0:x._a[M];x._a[Nt]===24&&x._a[et]===0&&x._a[Gt]===0&&x._a[$n]===0&&(x._nextDay=!0,x._a[Nt]=0),x._d=(x._useUTC?Ge:Se).apply(null,$),ue=x._useUTC?x._d.getUTCDay():x._d.getDay(),x._tzm!=null&&x._d.setUTCMinutes(x._d.getUTCMinutes()-x._tzm),x._nextDay&&(x._a[Nt]=24),x._w&&typeof x._w.d<"u"&&x._w.d!==ue&&(y(x).weekdayMismatch=!0)}}function Voe(x){var M,A,$,V,ue,Re,vt,jt,Zt;M=x._w,M.GG!=null||M.W!=null||M.E!=null?(ue=1,Re=4,A=gh(M.GG,x._a[Rt],Oe(Rn(),1,4).year),$=gh(M.W,1),V=gh(M.E,1),(V<1||V>7)&&(jt=!0)):(ue=x._locale._week.dow,Re=x._locale._week.doy,Zt=Oe(Rn(),ue,Re),A=gh(M.gg,x._a[Rt],Zt.year),$=gh(M.w,Zt.week),M.d!=null?(V=M.d,(V<0||V>6)&&(jt=!0)):M.e!=null?(V=M.e+ue,(M.e<0||M.e>6)&&(jt=!0)):V=ue),$<1||$>gt(A,ue,Re)?y(x)._overflowWeeks=!0:jt!=null?y(x)._overflowWeekday=!0:(vt=Ye(A,$,V,ue,Re),x._a[Rt]=vt.year,x._dayOfYear=vt.dayOfYear)}i.ISO_8601=function(){},i.RFC_2822=function(){};function xS(x){if(x._f===i.ISO_8601){mj(x);return}if(x._f===i.RFC_2822){gj(x);return}x._a=[],y(x).empty=!0;var M=""+x._i,A,$,V,ue,Re,vt=M.length,jt=0,Zt,pi;for(V=ie(x._f,x._locale).match(K)||[],pi=V.length,A=0;A<pi;A++)ue=V[A],$=(M.match(Qe(ue,x))||[])[0],$&&(Re=M.substr(0,M.indexOf($)),Re.length>0&&y(x).unusedInput.push(Re),M=M.slice(M.indexOf($)+$.length),jt+=$.length),G[ue]?($?y(x).empty=!1:y(x).unusedTokens.push(ue),ft(ue,$,x)):x._strict&&!$&&y(x).unusedTokens.push(ue);y(x).charsLeftOver=vt-jt,M.length>0&&y(x).unusedInput.push(M),x._a[Nt]<=12&&y(x).bigHour===!0&&x._a[Nt]>0&&(y(x).bigHour=void 0),y(x).parsedDateParts=x._a.slice(0),y(x).meridiem=x._meridiem,x._a[Nt]=Yoe(x._locale,x._a[Nt],x._meridiem),Zt=y(x).era,Zt!==null&&(x._a[Rt]=x._locale.erasConvertYear(Zt,x._a[Rt])),vS(x),bS(x)}function Yoe(x,M,A){var $;return A==null?M:x.meridiemHour!=null?x.meridiemHour(M,A):(x.isPM!=null&&($=x.isPM(A),$&&M<12&&(M+=12),!$&&M===12&&(M=0)),M)}function Goe(x){var M,A,$,V,ue,Re,vt=!1,jt=x._f.length;if(jt===0){y(x).invalidFormat=!0,x._d=new Date(NaN);return}for(V=0;V<jt;V++)ue=0,Re=!1,M=C({},x),x._useUTC!=null&&(M._useUTC=x._useUTC),M._f=x._f[V],xS(M),w(M)&&(Re=!0),ue+=y(M).charsLeftOver,ue+=y(M).unusedTokens.length*10,y(M).score=ue,vt?ue<$&&($=ue,A=M):($==null||ue<$||Re)&&($=ue,A=M,Re&&(vt=!0));m(x,A||M)}function Koe(x){if(!x._d){var M=Ie(x._i),A=M.day===void 0?M.date:M.day;x._a=f([M.year,M.month,A,M.hour,M.minute,M.second,M.millisecond],function($){return $&&parseInt($,10)}),vS(x)}}function Xoe(x){var M=new P(bS(bj(x)));return M._nextDay&&(M.add(1,"d"),M._nextDay=void 0),M}function bj(x){var M=x._i,A=x._f;return x._locale=x._locale||Ta(x._l),M===null||A===void 0&&M===""?k({nullInput:!0}):(typeof M=="string"&&(x._i=M=x._locale.preparse(M)),T(M)?new P(bS(M)):(d(M)?x._d=M:o(A)?Goe(x):A?xS(x):Qoe(x),w(x)||(x._d=null),x))}function Qoe(x){var M=x._i;u(M)?x._d=new Date(i.now()):d(M)?x._d=new Date(M.valueOf()):typeof M=="string"?qoe(x):o(M)?(x._a=f(M.slice(0),function(A){return parseInt(A,10)}),vS(x)):a(M)?Koe(x):h(M)?x._d=new Date(M):i.createFromInputFallback(x)}function yj(x,M,A,$,V){var ue={};return(M===!0||M===!1)&&($=M,M=void 0),(A===!0||A===!1)&&($=A,A=void 0),(a(x)&&c(x)||o(x)&&x.length===0)&&(x=void 0),ue._isAMomentObject=!0,ue._useUTC=ue._isUTC=V,ue._l=A,ue._i=x,ue._f=M,ue._strict=$,Xoe(ue)}function Rn(x,M,A,$){return yj(x,M,A,$,!1)}var Joe=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var x=Rn.apply(null,arguments);return this.isValid()&&x.isValid()?x<this?this:x:k()}),Zoe=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var x=Rn.apply(null,arguments);return this.isValid()&&x.isValid()?x>this?this:x:k()});function vj(x,M){var A,$;if(M.length===1&&o(M[0])&&(M=M[0]),!M.length)return Rn();for(A=M[0],$=1;$<M.length;++$)(!M[$].isValid()||M[$][x](A))&&(A=M[$]);return A}function eae(){var x=[].slice.call(arguments,0);return vj("isBefore",x)}function tae(){var x=[].slice.call(arguments,0);return vj("isAfter",x)}var nae=function(){return Date.now?Date.now():+new Date},_m=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rae(x){var M,A=!1,$,V=_m.length;for(M in x)if(l(x,M)&&!(fn.call(_m,M)!==-1&&(x[M]==null||!isNaN(x[M]))))return!1;for($=0;$<V;++$)if(x[_m[$]]){if(A)return!1;parseFloat(x[_m[$]])!==Te(x[_m[$]])&&(A=!0)}return!0}function iae(){return this._isValid}function sae(){return so(NaN)}function wy(x){var M=Ie(x),A=M.year||0,$=M.quarter||0,V=M.month||0,ue=M.week||M.isoWeek||0,Re=M.day||0,vt=M.hour||0,jt=M.minute||0,Zt=M.second||0,pi=M.millisecond||0;this._isValid=rae(M),this._milliseconds=+pi+Zt*1e3+jt*6e4+vt*1e3*60*60,this._days=+Re+ue*7,this._months=+V+$*3+A*12,this._data={},this._locale=Ta(),this._bubble()}function _y(x){return x instanceof wy}function wS(x){return x<0?Math.round(-1*x)*-1:Math.round(x)}function oae(x,M,A){var $=Math.min(x.length,M.length),V=Math.abs(x.length-M.length),ue=0,Re;for(Re=0;Re<$;Re++)Te(x[Re])!==Te(M[Re])&&ue++;return ue+V}function xj(x,M){X(x,0,0,function(){var A=this.utcOffset(),$="+";return A<0&&(A=-A,$="-"),$+Y(~~(A/60),2)+M+Y(~~A%60,2)})}xj("Z",":"),xj("ZZ",""),Ae("Z",te),Ae("ZZ",te),ve(["Z","ZZ"],function(x,M,A){A._useUTC=!0,A._tzm=_S(te,x)});var aae=/([\+\-]|\d\d)/gi;function _S(x,M){var A=(M||"").match(x),$,V,ue;return A===null?null:($=A[A.length-1]||[],V=($+"").match(aae)||["-",0,0],ue=+(V[1]*60)+Te(V[2]),ue===0?0:V[0]==="+"?ue:-ue)}function SS(x,M){var A,$;return M._isUTC?(A=M.clone(),$=(T(x)||d(x)?x.valueOf():Rn(x).valueOf())-A.valueOf(),A._d.setTime(A._d.valueOf()+$),i.updateOffset(A,!1),A):Rn(x).local()}function kS(x){return-Math.round(x._d.getTimezoneOffset())}i.updateOffset=function(){};function lae(x,M,A){var $=this._offset||0,V;if(!this.isValid())return x!=null?this:NaN;if(x!=null){if(typeof x=="string"){if(x=_S(te,x),x===null)return this}else Math.abs(x)<16&&!A&&(x=x*60);return!this._isUTC&&M&&(V=kS(this)),this._offset=x,this._isUTC=!0,V!=null&&this.add(V,"m"),$!==x&&(!M||this._changeInProgress?kj(this,so(x-$,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?$:kS(this)}function cae(x,M){return x!=null?(typeof x!="string"&&(x=-x),this.utcOffset(x,M),this):-this.utcOffset()}function uae(x){return this.utcOffset(0,x)}function dae(x){return this._isUTC&&(this.utcOffset(0,x),this._isUTC=!1,x&&this.subtract(kS(this),"m")),this}function hae(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var x=_S(Fe,this._i);x!=null?this.utcOffset(x):this.utcOffset(0,!0)}return this}function fae(x){return this.isValid()?(x=x?Rn(x).utcOffset():0,(this.utcOffset()-x)%60===0):!1}function pae(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function mae(){if(!u(this._isDSTShifted))return this._isDSTShifted;var x={},M;return C(x,this),x=bj(x),x._a?(M=x._isUTC?g(x._a):Rn(x._a),this._isDSTShifted=this.isValid()&&oae(x._a,M.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function gae(){return this.isValid()?!this._isUTC:!1}function bae(){return this.isValid()?this._isUTC:!1}function wj(){return this.isValid()?this._isUTC&&this._offset===0:!1}var yae=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,vae=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function so(x,M){var A=x,$=null,V,ue,Re;return _y(x)?A={ms:x._milliseconds,d:x._days,M:x._months}:h(x)||!isNaN(+x)?(A={},M?A[M]=+x:A.milliseconds=+x):($=yae.exec(x))?(V=$[1]==="-"?-1:1,A={y:0,d:Te($[Wt])*V,h:Te($[Nt])*V,m:Te($[et])*V,s:Te($[Gt])*V,ms:Te(wS($[$n]*1e3))*V}):($=vae.exec(x))?(V=$[1]==="-"?-1:1,A={y:bu($[2],V),M:bu($[3],V),w:bu($[4],V),d:bu($[5],V),h:bu($[6],V),m:bu($[7],V),s:bu($[8],V)}):A==null?A={}:typeof A=="object"&&("from"in A||"to"in A)&&(Re=xae(Rn(A.from),Rn(A.to)),A={},A.ms=Re.milliseconds,A.M=Re.months),ue=new wy(A),_y(x)&&l(x,"_locale")&&(ue._locale=x._locale),_y(x)&&l(x,"_isValid")&&(ue._isValid=x._isValid),ue}so.fn=wy.prototype,so.invalid=sae;function bu(x,M){var A=x&&parseFloat(x.replace(",","."));return(isNaN(A)?0:A)*M}function _j(x,M){var A={};return A.months=M.month()-x.month()+(M.year()-x.year())*12,x.clone().add(A.months,"M").isAfter(M)&&--A.months,A.milliseconds=+M-+x.clone().add(A.months,"M"),A}function xae(x,M){var A;return x.isValid()&&M.isValid()?(M=SS(M,x),x.isBefore(M)?A=_j(x,M):(A=_j(M,x),A.milliseconds=-A.milliseconds,A.months=-A.months),A):{milliseconds:0,months:0}}function Sj(x,M){return function(A,$){var V,ue;return $!==null&&!isNaN(+$)&&(U(M,"moment()."+M+"(period, number) is deprecated. Please use moment()."+M+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ue=A,A=$,$=ue),V=so(A,$),kj(this,V,x),this}}function kj(x,M,A,$){var V=M._milliseconds,ue=wS(M._days),Re=wS(M._months);x.isValid()&&($=$??!0,Re&&Fl(x,zr(x,"Month")+Re*A),ue&&ns(x,"Date",zr(x,"Date")+ue*A),V&&x._d.setTime(x._d.valueOf()+V*A),$&&i.updateOffset(x,ue||Re))}var wae=Sj(1,"add"),_ae=Sj(-1,"subtract");function Cj(x){return typeof x=="string"||x instanceof String}function Sae(x){return T(x)||d(x)||Cj(x)||h(x)||Cae(x)||kae(x)||x===null||x===void 0}function kae(x){var M=a(x)&&!c(x),A=!1,$=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],V,ue,Re=$.length;for(V=0;V<Re;V+=1)ue=$[V],A=A||l(x,ue);return M&&A}function Cae(x){var M=o(x),A=!1;return M&&(A=x.filter(function($){return!h($)&&Cj(x)}).length===0),M&&A}function Eae(x){var M=a(x)&&!c(x),A=!1,$=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],V,ue;for(V=0;V<$.length;V+=1)ue=$[V],A=A||l(x,ue);return M&&A}function Tae(x,M){var A=x.diff(M,"days",!0);return A<-6?"sameElse":A<-1?"lastWeek":A<0?"lastDay":A<1?"sameDay":A<2?"nextDay":A<7?"nextWeek":"sameElse"}function Pae(x,M){arguments.length===1&&(arguments[0]?Sae(arguments[0])?(x=arguments[0],M=void 0):Eae(arguments[0])&&(M=arguments[0],x=void 0):(x=void 0,M=void 0));var A=x||Rn(),$=SS(A,this).startOf("day"),V=i.calendarFormat(this,$)||"sameElse",ue=M&&(B(M[V])?M[V].call(this,A):M[V]);return this.format(ue||this.localeData().calendar(V,this,Rn(A)))}function Mae(){return new P(this)}function Dae(x,M){var A=T(x)?x:Rn(x);return this.isValid()&&A.isValid()?(M=Me(M)||"millisecond",M==="millisecond"?this.valueOf()>A.valueOf():A.valueOf()<this.clone().startOf(M).valueOf()):!1}function Oae(x,M){var A=T(x)?x:Rn(x);return this.isValid()&&A.isValid()?(M=Me(M)||"millisecond",M==="millisecond"?this.valueOf()<A.valueOf():this.clone().endOf(M).valueOf()<A.valueOf()):!1}function Iae(x,M,A,$){var V=T(x)?x:Rn(x),ue=T(M)?M:Rn(M);return this.isValid()&&V.isValid()&&ue.isValid()?($=$||"()",($[0]==="("?this.isAfter(V,A):!this.isBefore(V,A))&&($[1]===")"?this.isBefore(ue,A):!this.isAfter(ue,A))):!1}function Aae(x,M){var A=T(x)?x:Rn(x),$;return this.isValid()&&A.isValid()?(M=Me(M)||"millisecond",M==="millisecond"?this.valueOf()===A.valueOf():($=A.valueOf(),this.clone().startOf(M).valueOf()<=$&&$<=this.clone().endOf(M).valueOf())):!1}function Rae(x,M){return this.isSame(x,M)||this.isAfter(x,M)}function Nae(x,M){return this.isSame(x,M)||this.isBefore(x,M)}function jae(x,M,A){var $,V,ue;if(!this.isValid())return NaN;if($=SS(x,this),!$.isValid())return NaN;switch(V=($.utcOffset()-this.utcOffset())*6e4,M=Me(M),M){case"year":ue=Sy(this,$)/12;break;case"month":ue=Sy(this,$);break;case"quarter":ue=Sy(this,$)/3;break;case"second":ue=(this-$)/1e3;break;case"minute":ue=(this-$)/6e4;break;case"hour":ue=(this-$)/36e5;break;case"day":ue=(this-$-V)/864e5;break;case"week":ue=(this-$-V)/6048e5;break;default:ue=this-$}return A?ue:rt(ue)}function Sy(x,M){if(x.date()<M.date())return-Sy(M,x);var A=(M.year()-x.year())*12+(M.month()-x.month()),$=x.clone().add(A,"months"),V,ue;return M-$<0?(V=x.clone().add(A-1,"months"),ue=(M-$)/($-V)):(V=x.clone().add(A+1,"months"),ue=(M-$)/(V-$)),-(A+ue)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Lae(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Fae(x){if(!this.isValid())return null;var M=x!==!0,A=M?this.clone().utc():this;return A.year()<0||A.year()>9999?se(A,M?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):B(Date.prototype.toISOString)?M?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",se(A,"Z")):se(A,M?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $ae(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var x="moment",M="",A,$,V,ue;return this.isLocal()||(x=this.utcOffset()===0?"moment.utc":"moment.parseZone",M="Z"),A="["+x+'("]',$=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",V="-MM-DD[T]HH:mm:ss.SSS",ue=M+'[")]',this.format(A+$+V+ue)}function Bae(x){x||(x=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var M=se(this,x);return this.localeData().postformat(M)}function zae(x,M){return this.isValid()&&(T(x)&&x.isValid()||Rn(x).isValid())?so({to:this,from:x}).locale(this.locale()).humanize(!M):this.localeData().invalidDate()}function Uae(x){return this.from(Rn(),x)}function Wae(x,M){return this.isValid()&&(T(x)&&x.isValid()||Rn(x).isValid())?so({from:this,to:x}).locale(this.locale()).humanize(!M):this.localeData().invalidDate()}function qae(x){return this.to(Rn(),x)}function Ej(x){var M;return x===void 0?this._locale._abbr:(M=Ta(x),M!=null&&(this._locale=M),this)}var Tj=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(x){return x===void 0?this.localeData():this.locale(x)});function Pj(){return this._locale}var ky=1e3,bh=60*ky,Cy=60*bh,Mj=(365*400+97)*24*Cy;function yh(x,M){return(x%M+M)%M}function Dj(x,M,A){return x<100&&x>=0?new Date(x+400,M,A)-Mj:new Date(x,M,A).valueOf()}function Oj(x,M,A){return x<100&&x>=0?Date.UTC(x+400,M,A)-Mj:Date.UTC(x,M,A)}function Hae(x){var M,A;if(x=Me(x),x===void 0||x==="millisecond"||!this.isValid())return this;switch(A=this._isUTC?Oj:Dj,x){case"year":M=A(this.year(),0,1);break;case"quarter":M=A(this.year(),this.month()-this.month()%3,1);break;case"month":M=A(this.year(),this.month(),1);break;case"week":M=A(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":M=A(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":M=A(this.year(),this.month(),this.date());break;case"hour":M=this._d.valueOf(),M-=yh(M+(this._isUTC?0:this.utcOffset()*bh),Cy);break;case"minute":M=this._d.valueOf(),M-=yh(M,bh);break;case"second":M=this._d.valueOf(),M-=yh(M,ky);break}return this._d.setTime(M),i.updateOffset(this,!0),this}function Vae(x){var M,A;if(x=Me(x),x===void 0||x==="millisecond"||!this.isValid())return this;switch(A=this._isUTC?Oj:Dj,x){case"year":M=A(this.year()+1,0,1)-1;break;case"quarter":M=A(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":M=A(this.year(),this.month()+1,1)-1;break;case"week":M=A(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":M=A(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":M=A(this.year(),this.month(),this.date()+1)-1;break;case"hour":M=this._d.valueOf(),M+=Cy-yh(M+(this._isUTC?0:this.utcOffset()*bh),Cy)-1;break;case"minute":M=this._d.valueOf(),M+=bh-yh(M,bh)-1;break;case"second":M=this._d.valueOf(),M+=ky-yh(M,ky)-1;break}return this._d.setTime(M),i.updateOffset(this,!0),this}function Yae(){return this._d.valueOf()-(this._offset||0)*6e4}function Gae(){return Math.floor(this.valueOf()/1e3)}function Kae(){return new Date(this.valueOf())}function Xae(){var x=this;return[x.year(),x.month(),x.date(),x.hour(),x.minute(),x.second(),x.millisecond()]}function Qae(){var x=this;return{years:x.year(),months:x.month(),date:x.date(),hours:x.hours(),minutes:x.minutes(),seconds:x.seconds(),milliseconds:x.milliseconds()}}function Jae(){return this.isValid()?this.toISOString():null}function Zae(){return w(this)}function ele(){return m({},y(this))}function tle(){return y(this).overflow}function nle(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}X("N",0,0,"eraAbbr"),X("NN",0,0,"eraAbbr"),X("NNN",0,0,"eraAbbr"),X("NNNN",0,0,"eraName"),X("NNNNN",0,0,"eraNarrow"),X("y",["y",1],"yo","eraYear"),X("y",["yy",2],0,"eraYear"),X("y",["yyy",3],0,"eraYear"),X("y",["yyyy",4],0,"eraYear"),Ae("N",CS),Ae("NN",CS),Ae("NNN",CS),Ae("NNNN",fle),Ae("NNNNN",ple),ve(["N","NN","NNN","NNNN","NNNNN"],function(x,M,A,$){var V=A._locale.erasParse(x,$,A._strict);V?y(A).era=V:y(A).invalidEra=x}),Ae("y",ae),Ae("yy",ae),Ae("yyy",ae),Ae("yyyy",ae),Ae("yo",mle),ve(["y","yy","yyy","yyyy"],Rt),ve(["yo"],function(x,M,A,$){var V;A._locale._eraYearOrdinalRegex&&(V=x.match(A._locale._eraYearOrdinalRegex)),A._locale.eraYearOrdinalParse?M[Rt]=A._locale.eraYearOrdinalParse(x,V):M[Rt]=parseInt(x,10)});function rle(x,M){var A,$,V,ue=this._eras||Ta("en")._eras;for(A=0,$=ue.length;A<$;++A){switch(typeof ue[A].since){case"string":V=i(ue[A].since).startOf("day"),ue[A].since=V.valueOf();break}switch(typeof ue[A].until){case"undefined":ue[A].until=1/0;break;case"string":V=i(ue[A].until).startOf("day").valueOf(),ue[A].until=V.valueOf();break}}return ue}function ile(x,M,A){var $,V,ue=this.eras(),Re,vt,jt;for(x=x.toUpperCase(),$=0,V=ue.length;$<V;++$)if(Re=ue[$].name.toUpperCase(),vt=ue[$].abbr.toUpperCase(),jt=ue[$].narrow.toUpperCase(),A)switch(M){case"N":case"NN":case"NNN":if(vt===x)return ue[$];break;case"NNNN":if(Re===x)return ue[$];break;case"NNNNN":if(jt===x)return ue[$];break}else if([Re,vt,jt].indexOf(x)>=0)return ue[$]}function sle(x,M){var A=x.since<=x.until?1:-1;return M===void 0?i(x.since).year():i(x.since).year()+(M-x.offset)*A}function ole(){var x,M,A,$=this.localeData().eras();for(x=0,M=$.length;x<M;++x)if(A=this.clone().startOf("day").valueOf(),$[x].since<=A&&A<=$[x].until||$[x].until<=A&&A<=$[x].since)return $[x].name;return""}function ale(){var x,M,A,$=this.localeData().eras();for(x=0,M=$.length;x<M;++x)if(A=this.clone().startOf("day").valueOf(),$[x].since<=A&&A<=$[x].until||$[x].until<=A&&A<=$[x].since)return $[x].narrow;return""}function lle(){var x,M,A,$=this.localeData().eras();for(x=0,M=$.length;x<M;++x)if(A=this.clone().startOf("day").valueOf(),$[x].since<=A&&A<=$[x].until||$[x].until<=A&&A<=$[x].since)return $[x].abbr;return""}function cle(){var x,M,A,$,V=this.localeData().eras();for(x=0,M=V.length;x<M;++x)if(A=V[x].since<=V[x].until?1:-1,$=this.clone().startOf("day").valueOf(),V[x].since<=$&&$<=V[x].until||V[x].until<=$&&$<=V[x].since)return(this.year()-i(V[x].since).year())*A+V[x].offset;return this.year()}function ule(x){return l(this,"_erasNameRegex")||ES.call(this),x?this._erasNameRegex:this._erasRegex}function dle(x){return l(this,"_erasAbbrRegex")||ES.call(this),x?this._erasAbbrRegex:this._erasRegex}function hle(x){return l(this,"_erasNarrowRegex")||ES.call(this),x?this._erasNarrowRegex:this._erasRegex}function CS(x,M){return M.erasAbbrRegex(x)}function fle(x,M){return M.erasNameRegex(x)}function ple(x,M){return M.erasNarrowRegex(x)}function mle(x,M){return M._eraYearOrdinalRegex||ae}function ES(){var x=[],M=[],A=[],$=[],V,ue,Re,vt,jt,Zt=this.eras();for(V=0,ue=Zt.length;V<ue;++V)Re=He(Zt[V].name),vt=He(Zt[V].abbr),jt=He(Zt[V].narrow),M.push(Re),x.push(vt),A.push(jt),$.push(Re),$.push(vt),$.push(jt);this._erasRegex=new RegExp("^("+$.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+M.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+x.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+A.join("|")+")","i")}X(0,["gg",2],0,function(){return this.weekYear()%100}),X(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ey(x,M){X(0,[x,x.length],0,M)}Ey("gggg","weekYear"),Ey("ggggg","weekYear"),Ey("GGGG","isoWeekYear"),Ey("GGGGG","isoWeekYear"),Ae("G",Xe),Ae("g",Xe),Ae("GG",ge,re),Ae("gg",ge,re),Ae("GGGG",_e,le),Ae("gggg",_e,le),Ae("GGGGG",De,ce),Ae("ggggg",De,ce),wt(["gggg","ggggg","GGGG","GGGGG"],function(x,M,A,$){M[$.substr(0,2)]=Te(x)}),wt(["gg","GG"],function(x,M,A,$){M[$]=i.parseTwoDigitYear(x)});function gle(x){return Ij.call(this,x,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function ble(x){return Ij.call(this,x,this.isoWeek(),this.isoWeekday(),1,4)}function yle(){return gt(this.year(),1,4)}function vle(){return gt(this.isoWeekYear(),1,4)}function xle(){var x=this.localeData()._week;return gt(this.year(),x.dow,x.doy)}function wle(){var x=this.localeData()._week;return gt(this.weekYear(),x.dow,x.doy)}function Ij(x,M,A,$,V){var ue;return x==null?Oe(this,$,V).year:(ue=gt(x,$,V),M>ue&&(M=ue),_le.call(this,x,M,A,$,V))}function _le(x,M,A,$,V){var ue=Ye(x,M,A,$,V),Re=Ge(ue.year,0,ue.dayOfYear);return this.year(Re.getUTCFullYear()),this.month(Re.getUTCMonth()),this.date(Re.getUTCDate()),this}X("Q",0,"Qo","quarter"),Ae("Q",L),ve("Q",function(x,M){M[Mt]=(Te(x)-1)*3});function Sle(x){return x==null?Math.ceil((this.month()+1)/3):this.month((x-1)*3+this.month()%3)}X("D",["DD",2],"Do","date"),Ae("D",ge,Ze),Ae("DD",ge,re),Ae("Do",function(x,M){return x?M._dayOfMonthOrdinalParse||M._ordinalParse:M._dayOfMonthOrdinalParseLenient}),ve(["D","DD"],Wt),ve("Do",function(x,M){M[Wt]=Te(x.match(ge)[0])});var Aj=yr("Date",!0);X("DDD",["DDDD",3],"DDDo","dayOfYear"),Ae("DDD",pe),Ae("DDDD",fe),ve(["DDD","DDDD"],function(x,M,A){A._dayOfYear=Te(x)});function kle(x){var M=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return x==null?M:this.add(x-M,"d")}X("m",["mm",2],0,"minute"),Ae("m",ge,je),Ae("mm",ge,re),ve(["m","mm"],et);var Cle=yr("Minutes",!1);X("s",["ss",2],0,"second"),Ae("s",ge,je),Ae("ss",ge,re),ve(["s","ss"],Gt);var Ele=yr("Seconds",!1);X("S",0,0,function(){return~~(this.millisecond()/100)}),X(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),X(0,["SSS",3],0,"millisecond"),X(0,["SSSS",4],0,function(){return this.millisecond()*10}),X(0,["SSSSS",5],0,function(){return this.millisecond()*100}),X(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),X(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),X(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),X(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ae("S",pe,L),Ae("SS",pe,re),Ae("SSS",pe,fe);var zl,Rj;for(zl="SSSS";zl.length<=9;zl+="S")Ae(zl,ae);function Tle(x,M){M[$n]=Te(("0."+x)*1e3)}for(zl="S";zl.length<=9;zl+="S")ve(zl,Tle);Rj=yr("Milliseconds",!1),X("z",0,0,"zoneAbbr"),X("zz",0,0,"zoneName");function Ple(){return this._isUTC?"UTC":""}function Mle(){return this._isUTC?"Coordinated Universal Time":""}var st=P.prototype;st.add=wae,st.calendar=Pae,st.clone=Mae,st.diff=jae,st.endOf=Vae,st.format=Bae,st.from=zae,st.fromNow=Uae,st.to=Wae,st.toNow=qae,st.get=dh,st.invalidAt=tle,st.isAfter=Dae,st.isBefore=Oae,st.isBetween=Iae,st.isSame=Aae,st.isSameOrAfter=Rae,st.isSameOrBefore=Nae,st.isValid=Zae,st.lang=Tj,st.locale=Ej,st.localeData=Pj,st.max=Zoe,st.min=Joe,st.parsingFlags=ele,st.set=hh,st.startOf=Hae,st.subtract=_ae,st.toArray=Xae,st.toObject=Qae,st.toDate=Kae,st.toISOString=Fae,st.inspect=$ae,typeof Symbol<"u"&&Symbol.for!=null&&(st[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),st.toJSON=Jae,st.toString=Lae,st.unix=Gae,st.valueOf=Yae,st.creationData=nle,st.eraName=ole,st.eraNarrow=ale,st.eraAbbr=lle,st.eraYear=cle,st.year=Cs,st.isLeapYear=io,st.weekYear=gle,st.isoWeekYear=ble,st.quarter=st.quarters=Sle,st.month=fu,st.daysInMonth=pu,st.week=st.weeks=Jt,st.isoWeek=st.isoWeeks=xr,st.weeksInYear=xle,st.weeksInWeekYear=wle,st.isoWeeksInYear=yle,st.isoWeeksInISOWeekYear=vle,st.date=Aj,st.day=st.days=boe,st.weekday=yoe,st.isoWeekday=voe,st.dayOfYear=kle,st.hour=st.hours=Eoe,st.minute=st.minutes=Cle,st.second=st.seconds=Ele,st.millisecond=st.milliseconds=Rj,st.utcOffset=lae,st.utc=uae,st.local=dae,st.parseZone=hae,st.hasAlignedHourOffset=fae,st.isDST=pae,st.isLocal=gae,st.isUtcOffset=bae,st.isUtc=wj,st.isUTC=wj,st.zoneAbbr=Ple,st.zoneName=Mle,st.dates=D("dates accessor is deprecated. Use date instead.",Aj),st.months=D("months accessor is deprecated. Use month instead",fu),st.years=D("years accessor is deprecated. Use year instead",Cs),st.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",cae),st.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mae);function Dle(x){return Rn(x*1e3)}function Ole(){return Rn.apply(null,arguments).parseZone()}function Nj(x){return x}var ln=F.prototype;ln.calendar=W,ln.longDateFormat=ke,ln.invalidDate=Ee,ln.ordinal=$e,ln.preparse=Nj,ln.postformat=Nj,ln.relativeTime=qe,ln.pastFuture=we,ln.set=z,ln.eras=rle,ln.erasParse=ile,ln.erasConvertYear=sle,ln.erasAbbrRegex=dle,ln.erasNameRegex=ule,ln.erasNarrowRegex=hle,ln.months=Bn,ln.monthsShort=Mr,ln.monthsParse=mh,ln.monthsRegex=gu,ln.monthsShortRegex=mu,ln.week=It,ln.firstDayOfYear=An,ln.firstDayOfWeek=dn,ln.weekdays=Ea,ln.weekdaysMin=poe,ln.weekdaysShort=Ur,ln.weekdaysParse=goe,ln.weekdaysRegex=xoe,ln.weekdaysShortRegex=woe,ln.weekdaysMinRegex=_oe,ln.isPM=koe,ln.meridiem=Toe;function Ty(x,M,A,$){var V=Ta(),ue=g().set($,M);return V[A](ue,x)}function jj(x,M,A){if(h(x)&&(M=x,x=void 0),x=x||"",M!=null)return Ty(x,M,A,"month");var $,V=[];for($=0;$<12;$++)V[$]=Ty(x,$,A,"month");return V}function TS(x,M,A,$){typeof x=="boolean"?(h(M)&&(A=M,M=void 0),M=M||""):(M=x,A=M,x=!1,h(M)&&(A=M,M=void 0),M=M||"");var V=Ta(),ue=x?V._week.dow:0,Re,vt=[];if(A!=null)return Ty(M,(A+ue)%7,$,"day");for(Re=0;Re<7;Re++)vt[Re]=Ty(M,(Re+ue)%7,$,"day");return vt}function Ile(x,M){return jj(x,M,"months")}function Ale(x,M){return jj(x,M,"monthsShort")}function Rle(x,M,A){return TS(x,M,A,"weekdays")}function Nle(x,M,A){return TS(x,M,A,"weekdaysShort")}function jle(x,M,A){return TS(x,M,A,"weekdaysMin")}Bl("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(x){var M=x%10,A=Te(x%100/10)===1?"th":M===1?"st":M===2?"nd":M===3?"rd":"th";return x+A}}),i.lang=D("moment.lang is deprecated. Use moment.locale instead.",Bl),i.langData=D("moment.langData is deprecated. Use moment.localeData instead.",Ta);var Pa=Math.abs;function Lle(){var x=this._data;return this._milliseconds=Pa(this._milliseconds),this._days=Pa(this._days),this._months=Pa(this._months),x.milliseconds=Pa(x.milliseconds),x.seconds=Pa(x.seconds),x.minutes=Pa(x.minutes),x.hours=Pa(x.hours),x.months=Pa(x.months),x.years=Pa(x.years),this}function Lj(x,M,A,$){var V=so(M,A);return x._milliseconds+=$*V._milliseconds,x._days+=$*V._days,x._months+=$*V._months,x._bubble()}function Fle(x,M){return Lj(this,x,M,1)}function $le(x,M){return Lj(this,x,M,-1)}function Fj(x){return x<0?Math.floor(x):Math.ceil(x)}function Ble(){var x=this._milliseconds,M=this._days,A=this._months,$=this._data,V,ue,Re,vt,jt;return x>=0&&M>=0&&A>=0||x<=0&&M<=0&&A<=0||(x+=Fj(PS(A)+M)*864e5,M=0,A=0),$.milliseconds=x%1e3,V=rt(x/1e3),$.seconds=V%60,ue=rt(V/60),$.minutes=ue%60,Re=rt(ue/60),$.hours=Re%24,M+=rt(Re/24),jt=rt($j(M)),A+=jt,M-=Fj(PS(jt)),vt=rt(A/12),A%=12,$.days=M,$.months=A,$.years=vt,this}function $j(x){return x*4800/146097}function PS(x){return x*146097/4800}function zle(x){if(!this.isValid())return NaN;var M,A,$=this._milliseconds;if(x=Me(x),x==="month"||x==="quarter"||x==="year")switch(M=this._days+$/864e5,A=this._months+$j(M),x){case"month":return A;case"quarter":return A/3;case"year":return A/12}else switch(M=this._days+Math.round(PS(this._months)),x){case"week":return M/7+$/6048e5;case"day":return M+$/864e5;case"hour":return M*24+$/36e5;case"minute":return M*1440+$/6e4;case"second":return M*86400+$/1e3;case"millisecond":return Math.floor(M*864e5)+$;default:throw new Error("Unknown unit "+x)}}function Ma(x){return function(){return this.as(x)}}var Bj=Ma("ms"),Ule=Ma("s"),Wle=Ma("m"),qle=Ma("h"),Hle=Ma("d"),Vle=Ma("w"),Yle=Ma("M"),Gle=Ma("Q"),Kle=Ma("y"),Xle=Bj;function Qle(){return so(this)}function Jle(x){return x=Me(x),this.isValid()?this[x+"s"]():NaN}function yu(x){return function(){return this.isValid()?this._data[x]:NaN}}var Zle=yu("milliseconds"),ece=yu("seconds"),tce=yu("minutes"),nce=yu("hours"),rce=yu("days"),ice=yu("months"),sce=yu("years");function oce(){return rt(this.days()/7)}var Da=Math.round,vh={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ace(x,M,A,$,V){return V.relativeTime(M||1,!!A,x,$)}function lce(x,M,A,$){var V=so(x).abs(),ue=Da(V.as("s")),Re=Da(V.as("m")),vt=Da(V.as("h")),jt=Da(V.as("d")),Zt=Da(V.as("M")),pi=Da(V.as("w")),Oa=Da(V.as("y")),Ul=ue<=A.ss&&["s",ue]||ue<A.s&&["ss",ue]||Re<=1&&["m"]||Re<A.m&&["mm",Re]||vt<=1&&["h"]||vt<A.h&&["hh",vt]||jt<=1&&["d"]||jt<A.d&&["dd",jt];return A.w!=null&&(Ul=Ul||pi<=1&&["w"]||pi<A.w&&["ww",pi]),Ul=Ul||Zt<=1&&["M"]||Zt<A.M&&["MM",Zt]||Oa<=1&&["y"]||["yy",Oa],Ul[2]=M,Ul[3]=+x>0,Ul[4]=$,ace.apply(null,Ul)}function cce(x){return x===void 0?Da:typeof x=="function"?(Da=x,!0):!1}function uce(x,M){return vh[x]===void 0?!1:M===void 0?vh[x]:(vh[x]=M,x==="s"&&(vh.ss=M-1),!0)}function dce(x,M){if(!this.isValid())return this.localeData().invalidDate();var A=!1,$=vh,V,ue;return typeof x=="object"&&(M=x,x=!1),typeof x=="boolean"&&(A=x),typeof M=="object"&&($=Object.assign({},vh,M),M.s!=null&&M.ss==null&&($.ss=M.s-1)),V=this.localeData(),ue=lce(this,!A,$,V),A&&(ue=V.pastFuture(+this,ue)),V.postformat(ue)}var MS=Math.abs;function xh(x){return(x>0)-(x<0)||+x}function Py(){if(!this.isValid())return this.localeData().invalidDate();var x=MS(this._milliseconds)/1e3,M=MS(this._days),A=MS(this._months),$,V,ue,Re,vt=this.asSeconds(),jt,Zt,pi,Oa;return vt?($=rt(x/60),V=rt($/60),x%=60,$%=60,ue=rt(A/12),A%=12,Re=x?x.toFixed(3).replace(/\.?0+$/,""):"",jt=vt<0?"-":"",Zt=xh(this._months)!==xh(vt)?"-":"",pi=xh(this._days)!==xh(vt)?"-":"",Oa=xh(this._milliseconds)!==xh(vt)?"-":"",jt+"P"+(ue?Zt+ue+"Y":"")+(A?Zt+A+"M":"")+(M?pi+M+"D":"")+(V||$||x?"T":"")+(V?Oa+V+"H":"")+($?Oa+$+"M":"")+(x?Oa+Re+"S":"")):"P0D"}var tn=wy.prototype;tn.isValid=iae,tn.abs=Lle,tn.add=Fle,tn.subtract=$le,tn.as=zle,tn.asMilliseconds=Bj,tn.asSeconds=Ule,tn.asMinutes=Wle,tn.asHours=qle,tn.asDays=Hle,tn.asWeeks=Vle,tn.asMonths=Yle,tn.asQuarters=Gle,tn.asYears=Kle,tn.valueOf=Xle,tn._bubble=Ble,tn.clone=Qle,tn.get=Jle,tn.milliseconds=Zle,tn.seconds=ece,tn.minutes=tce,tn.hours=nce,tn.days=rce,tn.weeks=oce,tn.months=ice,tn.years=sce,tn.humanize=dce,tn.toISOString=Py,tn.toString=Py,tn.toJSON=Py,tn.locale=Ej,tn.localeData=Pj,tn.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Py),tn.lang=Tj,X("X",0,0,"unix"),X("x",0,0,"valueOf"),Ae("x",Xe),Ae("X",ee),ve("X",function(x,M,A){A._d=new Date(parseFloat(x)*1e3)}),ve("x",function(x,M,A){A._d=new Date(Te(x))});//! moment.js
return i.version="2.30.1",s(Rn),i.fn=st,i.min=eae,i.max=tae,i.now=nae,i.utc=g,i.unix=Dle,i.months=Ile,i.isDate=d,i.locale=Bl,i.invalid=k,i.duration=so,i.isMoment=T,i.weekdays=Rle,i.parseZone=Ole,i.localeData=Ta,i.isDuration=_y,i.monthsShort=Ale,i.weekdaysMin=jle,i.defineLocale=gS,i.updateLocale=Ooe,i.locales=Ioe,i.weekdaysShort=Nle,i.normalizeUnits=Me,i.relativeTimeRounding=cce,i.relativeTimeThreshold=uce,i.calendarFormat=Tae,i.prototype=st,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})}(Fx)),Fx.exports}var NRe=CA.exports,bB;function jRe(){return bB||(bB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(NRe,function(r){//! moment.js locale configuration
function i(o,a,l,c){var u={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[o+" Tage",o+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[o+" Monate",o+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[o+" Jahre",o+" Jahren"]};return a?u[l][0]:u[l][1]}var s=r.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})}()),CA.exports}jRe();var EA={exports:{}},LRe=EA.exports,yB;function FRe(){return yB||(yB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(LRe,function(r){//! moment.js locale configuration
var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),s="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),o=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,l=r.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?s[c.month()]:i[c.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"});return l})}()),EA.exports}FRe();var TA={exports:{}},$Re=TA.exports,vB;function BRe(){return vB||(vB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})($Re,function(r){//! moment.js locale configuration
var i=/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,s=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,o=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,a=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i],l=r.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:i,monthsShortStrictRegex:s,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(c,u){switch(u){case"D":return c+(c===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return c+(c===1?"er":"e");case"w":case"W":return c+(c===1?"re":"e")}},week:{dow:1,doy:4}});return l})}()),TA.exports}BRe();var PA={exports:{}},zRe=PA.exports,xB;function URe(){return xB||(xB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(zRe,function(r){//! moment.js locale configuration
var i=r.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}});return i})}()),PA.exports}URe();var MA={exports:{}},WRe=MA.exports,wB;function qRe(){return wB||(wB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(WRe,function(r){//! moment.js locale configuration
var i=r.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(s,o){return o[1]===""?1:parseInt(o[1]||s,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(s){return s===""},meridiem:function(s,o,a){return s<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(s){return s.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(s){return this.week()!==s.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(s,o){switch(o){case"y":return s===1?"":s+"";case"d":case"D":case"DDD":return s+"";default:return s}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}});return i})}()),MA.exports}qRe();var DA={exports:{}},HRe=DA.exports,_B;function VRe(){return _B||(_B=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(HRe,function(r){//! moment.js locale configuration
var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),s="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),o=[/^jan/i,/^feb/i,/^(maart|mrt\.?)$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,l=r.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(c,u){return c?/-MMM-/.test(u)?s[c.month()]:i[c.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(c){return c+(c===1||c===8||c>=20?"ste":"de")},week:{dow:1,doy:4}});return l})}()),DA.exports}VRe();var OA={exports:{}},YRe=OA.exports,SB;function GRe(){return SB||(SB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(YRe,function(r){//! moment.js locale configuration
var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),s="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),o=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function a(u){return u%10<5&&u%10>1&&~~(u/10)%10!==1}function l(u,h,d){var f=u+" ";switch(d){case"ss":return f+(a(u)?"sekundy":"sekund");case"m":return h?"minuta":"minut";case"mm":return f+(a(u)?"minuty":"minut");case"h":return h?"godzina":"godzin";case"hh":return f+(a(u)?"godziny":"godzin");case"ww":return f+(a(u)?"tygodnie":"tygodni");case"MM":return f+(a(u)?"miesice":"miesicy");case"yy":return f+(a(u)?"lata":"lat")}}var c=r.defineLocale("pl",{months:function(u,h){return u?/D MMMM/.test(h)?s[u.month()]:i[u.month()]:i},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:l,m:l,mm:l,h:l,hh:l,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:l,M:"miesic",MM:l,y:"rok",yy:l},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c})}()),OA.exports}GRe();var IA={exports:{}},KRe=IA.exports,kB;function XRe(){return kB||(kB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(KRe,function(r){//! moment.js locale configuration
function i(l,c){var u=l.split("_");return c%10===1&&c%100!==11?u[0]:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?u[1]:u[2]}function s(l,c,u){var h={ss:c?"__":"__",mm:c?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"};return u==="m"?c?"":"":l+" "+i(h[u],+l)}var o=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],a=r.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:o,longMonthsParse:o,shortMonthsParse:o,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},lastWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}else return this.day()===2?"[] dddd, [] LT":"[] dddd, [] LT"},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:s,m:s,mm:s,h:"",hh:s,d:"",dd:s,w:"",ww:s,M:"",MM:s,y:"",yy:s},meridiemParse:/|||/i,isPM:function(l){return/^(|)$/.test(l)},meridiem:function(l,c,u){return l<4?"":l<12?"":l<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(l,c){switch(c){case"M":case"d":case"DDD":return l+"-";case"D":return l+"-";case"w":case"W":return l+"-";default:return l}},week:{dow:1,doy:4}});return a})}()),IA.exports}XRe();var AA={exports:{}},QRe=AA.exports,CB;function JRe(){return CB||(CB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(QRe,function(r){//! moment.js locale configuration
var i={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"},s=r.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(o,a,l){return o<12?l?"":"":l?"s":"S"},meridiemParse:/||s|S/,isPM:function(o){return o==="s"||o==="S"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(o,a){switch(a){case"d":case"D":case"Do":case"DD":return o;default:if(o===0)return o+"'nc";var l=o%10,c=o%100-l,u=o>=100?100:null;return o+(i[l]||i[c]||i[u])}},week:{dow:1,doy:7}});return s})}()),AA.exports}JRe();var RA={exports:{}},ZRe=RA.exports,EB;function eNe(){return EB||(EB=1,function(n,e){(function(r,i){i(typeof Ao=="function"?Ro():r.moment)})(ZRe,function(r){//! moment.js locale configuration
function i(c,u){var h=c.split("_");return u%10===1&&u%100!==11?h[0]:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?h[1]:h[2]}function s(c,u,h){var d={ss:u?"__":"__",mm:u?"__":"__",hh:u?"__":"__",dd:"__",MM:"__",yy:"__"};return h==="m"?u?"":"":h==="h"?u?"":"":c+" "+i(d[h],+c)}function o(c,u){var h={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},d;return c===!0?h.nominative.slice(1,7).concat(h.nominative.slice(0,1)):c?(d=/(\[[]\]) ?dddd/.test(u)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(u)?"genitive":"nominative",h[d][c.day()]):h.nominative}function a(c){return function(){return c+""+(this.hours()===11?"":"")+"] LT"}}var l=r.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:o,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:a("[ "),nextDay:a("[ "),lastDay:a("[ "),nextWeek:a("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return a("[] dddd [").call(this);case 1:case 2:case 4:return a("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:s,m:s,mm:s,h:"",hh:s,d:"",dd:s,M:"",MM:s,y:"",yy:s},meridiemParse:/|||/,isPM:function(c){return/^(|)$/.test(c)},meridiem:function(c,u,h){return c<4?"":c<12?"":c<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(c,u){switch(u){case"M":case"d":case"DDD":case"w":case"W":return c+"-";case"D":return c+"-";default:return c}},week:{dow:1,doy:7}});return l})}()),RA.exports}eNe();var TB={},Jm,PB;function sr(){if(PB)return Jm;PB=1;var n=function(e){return e&&e.Math===Math&&e};return Jm=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof mB=="object"&&mB)||n(typeof Jm=="object"&&Jm)||function(){return this}()||Function("return this")(),Jm}var MC,MB;function nn(){return MB||(MB=1,MC=function(n){try{return!!n()}catch{return!0}}),MC}var DC,DB;function Kb(){if(DB)return DC;DB=1;var n=nn();return DC=!n(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),DC}var OC,OB;function z_(){if(OB)return OC;OB=1;var n=Kb(),e=Function.prototype,r=e.apply,i=e.call;return OC=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(r):function(){return i.apply(r,arguments)}),OC}var IC,IB;function an(){if(IB)return IC;IB=1;var n=Kb(),e=Function.prototype,r=e.call,i=n&&e.bind.bind(r,r);return IC=n?i:function(s){return function(){return r.apply(s,arguments)}},IC}var AC,AB;function _a(){if(AB)return AC;AB=1;var n=an(),e=n({}.toString),r=n("".slice);return AC=function(i){return r(e(i),8,-1)},AC}var RC,RB;function l5(){if(RB)return RC;RB=1;var n=_a(),e=an();return RC=function(r){if(n(r)==="Function")return e(r)},RC}var NC,NB;function Fr(){if(NB)return NC;NB=1;var n=typeof document=="object"&&document.all;return NC=typeof n>"u"&&n!==void 0?function(e){return typeof e=="function"||e===n}:function(e){return typeof e=="function"},NC}var jC={},LC,jB;function br(){if(jB)return LC;jB=1;var n=nn();return LC=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),LC}var FC,LB;function Ji(){if(LB)return FC;LB=1;var n=Kb(),e=Function.prototype.call;return FC=n?e.bind(e):function(){return e.apply(e,arguments)},FC}var $C={},FB;function U_(){if(FB)return $C;FB=1;var n={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!n.call({1:2},1);return $C.f=r?function(s){var o=e(this,s);return!!o&&o.enumerable}:n,$C}var BC,$B;function Xb(){return $B||($B=1,BC=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}),BC}var zC,BB;function W_(){if(BB)return zC;BB=1;var n=an(),e=nn(),r=_a(),i=Object,s=n("".split);return zC=e(function(){return!i("z").propertyIsEnumerable(0)})?function(o){return r(o)==="String"?s(o,""):i(o)}:i,zC}var UC,zB;function Qb(){return zB||(zB=1,UC=function(n){return n==null}),UC}var WC,UB;function Al(){if(UB)return WC;UB=1;var n=Qb(),e=TypeError;return WC=function(r){if(n(r))throw new e("Can't call method on "+r);return r},WC}var qC,WB;function No(){if(WB)return qC;WB=1;var n=W_(),e=Al();return qC=function(r){return n(e(r))},qC}var HC,qB;function fi(){if(qB)return HC;qB=1;var n=Fr();return HC=function(e){return typeof e=="object"?e!==null:n(e)},HC}var VC,HB;function In(){return HB||(HB=1,VC={}),VC}var YC,VB;function ks(){if(VB)return YC;VB=1;var n=In(),e=sr(),r=Fr(),i=function(s){return r(s)?s:void 0};return YC=function(s,o){return arguments.length<2?i(n[s])||i(e[s]):n[s]&&n[s][o]||e[s]&&e[s][o]},YC}var GC,YB;function Fn(){if(YB)return GC;YB=1;var n=an();return GC=n({}.isPrototypeOf),GC}var KC,GB;function am(){if(GB)return KC;GB=1;var n=sr(),e=n.navigator,r=e&&e.userAgent;return KC=r?String(r):"",KC}var XC,KB;function Jb(){if(KB)return XC;KB=1;var n=sr(),e=am(),r=n.process,i=n.Deno,s=r&&r.versions||i&&i.version,o=s&&s.v8,a,l;return o&&(a=o.split("."),l=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!l&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(l=+a[1]))),XC=l,XC}var QC,XB;function lm(){if(XB)return QC;XB=1;var n=Jb(),e=nn(),r=sr(),i=r.String;return QC=!!Object.getOwnPropertySymbols&&!e(function(){var s=Symbol("symbol detection");return!i(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&n&&n<41}),QC}var JC,QB;function qre(){if(QB)return JC;QB=1;var n=lm();return JC=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol",JC}var ZC,JB;function Zb(){if(JB)return ZC;JB=1;var n=ks(),e=Fr(),r=Fn(),i=qre(),s=Object;return ZC=i?function(o){return typeof o=="symbol"}:function(o){var a=n("Symbol");return e(a)&&r(a.prototype,s(o))},ZC}var e2,ZB;function cm(){if(ZB)return e2;ZB=1;var n=String;return e2=function(e){try{return n(e)}catch{return"Object"}},e2}var t2,e9;function Sa(){if(e9)return t2;e9=1;var n=Fr(),e=cm(),r=TypeError;return t2=function(i){if(n(i))return i;throw new r(e(i)+" is not a function")},t2}var n2,t9;function c5(){if(t9)return n2;t9=1;var n=Sa(),e=Qb();return n2=function(r,i){var s=r[i];return e(s)?void 0:n(s)},n2}var r2,n9;function tNe(){if(n9)return r2;n9=1;var n=Ji(),e=Fr(),r=fi(),i=TypeError;return r2=function(s,o){var a,l;if(o==="string"&&e(a=s.toString)&&!r(l=n(a,s))||e(a=s.valueOf)&&!r(l=n(a,s))||o!=="string"&&e(a=s.toString)&&!r(l=n(a,s)))return l;throw new i("Can't convert object to primitive value")},r2}var i2={exports:{}},s2,r9;function um(){return r9||(r9=1,s2=!0),s2}var o2,i9;function nNe(){if(i9)return o2;i9=1;var n=sr(),e=Object.defineProperty;return o2=function(r,i){try{e(n,r,{value:i,configurable:!0,writable:!0})}catch{n[r]=i}return i},o2}var s9;function u5(){if(s9)return i2.exports;s9=1;var n=um(),e=sr(),r=nNe(),i="__core-js_shared__",s=i2.exports=e[i]||r(i,{});return(s.versions||(s.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),i2.exports}var a2,o9;function dm(){if(o9)return a2;o9=1;var n=u5();return a2=function(e,r){return n[e]||(n[e]=r||{})},a2}var l2,a9;function Zi(){if(a9)return l2;a9=1;var n=Al(),e=Object;return l2=function(r){return e(n(r))},l2}var c2,l9;function $r(){if(l9)return c2;l9=1;var n=an(),e=Zi(),r=n({}.hasOwnProperty);return c2=Object.hasOwn||function(s,o){return r(e(s),o)},c2}var u2,c9;function q_(){if(c9)return u2;c9=1;var n=an(),e=0,r=Math.random(),i=n(1.1.toString);return u2=function(s){return"Symbol("+(s===void 0?"":s)+")_"+i(++e+r,36)},u2}var d2,u9;function Sr(){if(u9)return d2;u9=1;var n=sr(),e=dm(),r=$r(),i=q_(),s=lm(),o=qre(),a=n.Symbol,l=e("wks"),c=o?a.for||a:a&&a.withoutSetter||i;return d2=function(u){return r(l,u)||(l[u]=s&&r(a,u)?a[u]:c("Symbol."+u)),l[u]},d2}var h2,d9;function Hre(){if(d9)return h2;d9=1;var n=Ji(),e=fi(),r=Zb(),i=c5(),s=tNe(),o=Sr(),a=TypeError,l=o("toPrimitive");return h2=function(c,u){if(!e(c)||r(c))return c;var h=i(c,l),d;if(h){if(u===void 0&&(u="default"),d=n(h,c,u),!e(d)||r(d))return d;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),s(c,u)},h2}var f2,h9;function d5(){if(h9)return f2;h9=1;var n=Hre(),e=Zb();return f2=function(r){var i=n(r,"string");return e(i)?i:i+""},f2}var p2,f9;function Vre(){if(f9)return p2;f9=1;var n=sr(),e=fi(),r=n.document,i=e(r)&&e(r.createElement);return p2=function(s){return i?r.createElement(s):{}},p2}var m2,p9;function Yre(){if(p9)return m2;p9=1;var n=br(),e=nn(),r=Vre();return m2=!n&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),m2}var m9;function H_(){if(m9)return jC;m9=1;var n=br(),e=Ji(),r=U_(),i=Xb(),s=No(),o=d5(),a=$r(),l=Yre(),c=Object.getOwnPropertyDescriptor;return jC.f=n?c:function(h,d){if(h=s(h),d=o(d),l)try{return c(h,d)}catch{}if(a(h,d))return i(!e(r.f,h,d),h[d])},jC}var g2,g9;function rNe(){if(g9)return g2;g9=1;var n=nn(),e=Fr(),r=/#|\.prototype\./,i=function(c,u){var h=o[s(c)];return h===l?!0:h===a?!1:e(u)?n(u):!!u},s=i.normalize=function(c){return String(c).replace(r,".").toLowerCase()},o=i.data={},a=i.NATIVE="N",l=i.POLYFILL="P";return g2=i,g2}var b2,b9;function ey(){if(b9)return b2;b9=1;var n=l5(),e=Sa(),r=Kb(),i=n(n.bind);return b2=function(s,o){return e(s),o===void 0?s:r?i(s,o):function(){return s.apply(o,arguments)}},b2}var y2={},v2,y9;function Gre(){if(y9)return v2;y9=1;var n=br(),e=nn();return v2=n&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),v2}var x2,v9;function Rl(){if(v9)return x2;v9=1;var n=fi(),e=String,r=TypeError;return x2=function(i){if(n(i))return i;throw new r(e(i)+" is not an object")},x2}var x9;function to(){if(x9)return y2;x9=1;var n=br(),e=Yre(),r=Gre(),i=Rl(),s=d5(),o=TypeError,a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",h="writable";return y2.f=n?r?function(f,m,g){if(i(f),m=s(m),i(g),typeof f=="function"&&m==="prototype"&&"value"in g&&h in g&&!g[h]){var b=l(f,m);b&&b[h]&&(f[m]=g.value,g={configurable:u in g?g[u]:b[u],enumerable:c in g?g[c]:b[c],writable:!1})}return a(f,m,g)}:a:function(f,m,g){if(i(f),m=s(m),i(g),e)try{return a(f,m,g)}catch{}if("get"in g||"set"in g)throw new o("Accessors not supported");return"value"in g&&(f[m]=g.value),f},y2}var w2,w9;function hm(){if(w9)return w2;w9=1;var n=br(),e=to(),r=Xb();return w2=n?function(i,s,o){return e.f(i,s,r(1,o))}:function(i,s,o){return i[s]=o,i},w2}var _2,_9;function Tt(){if(_9)return _2;_9=1;var n=sr(),e=z_(),r=l5(),i=Fr(),s=H_().f,o=rNe(),a=In(),l=ey(),c=hm(),u=$r(),h=function(d){var f=function(m,g,b){if(this instanceof f){switch(arguments.length){case 0:return new d;case 1:return new d(m);case 2:return new d(m,g)}return new d(m,g,b)}return e(d,this,arguments)};return f.prototype=d.prototype,f};return _2=function(d,f){var m=d.target,g=d.global,b=d.stat,y=d.proto,v=g?n:b?n[m]:n[m]&&n[m].prototype,w=g?a:a[m]||c(a,m,{})[m],k=w.prototype,S,_,C,P,T,O,D,I,U;for(P in f)S=o(g?P:m+(b?".":"#")+P,d.forced),_=!S&&v&&u(v,P),O=w[P],_&&(d.dontCallGetSet?(U=s(v,P),D=U&&U.value):D=v[P]),T=_&&D?D:f[P],!(!S&&!y&&typeof O==typeof T)&&(d.bind&&_?I=l(T,n):d.wrap&&_?I=h(T):y&&i(T)?I=r(T):I=T,(d.sham||T&&T.sham||O&&O.sham)&&c(I,"sham",!0),c(w,P,I),y&&(C=m+"Prototype",u(a,C)||c(a,C,{}),c(a[C],P,T),d.real&&k&&(S||!k[P])&&c(k,P,T)))},_2}var S2,S9;function ou(){if(S9)return S2;S9=1;var n=_a();return S2=Array.isArray||function(r){return n(r)==="Array"},S2}var k2,k9;function iNe(){if(k9)return k2;k9=1;var n=Math.ceil,e=Math.floor;return k2=Math.trunc||function(i){var s=+i;return(s>0?e:n)(s)},k2}var C2,C9;function fm(){if(C9)return C2;C9=1;var n=iNe();return C2=function(e){var r=+e;return r!==r||r===0?0:n(r)},C2}var E2,E9;function Kre(){if(E9)return E2;E9=1;var n=fm(),e=Math.min;return E2=function(r){var i=n(r);return i>0?e(i,9007199254740991):0},E2}var T2,T9;function jo(){if(T9)return T2;T9=1;var n=Kre();return T2=function(e){return n(e.length)},T2}var P2,P9;function h5(){if(P9)return P2;P9=1;var n=TypeError,e=9007199254740991;return P2=function(r){if(r>e)throw n("Maximum allowed index exceeded");return r},P2}var M2,M9;function V_(){if(M9)return M2;M9=1;var n=br(),e=to(),r=Xb();return M2=function(i,s,o){n?e.f(i,s,r(0,o)):i[s]=o},M2}var D2,D9;function f5(){if(D9)return D2;D9=1;var n=Sr(),e=n("toStringTag"),r={};return r[e]="z",D2=String(r)==="[object z]",D2}var O2,O9;function au(){if(O9)return O2;O9=1;var n=f5(),e=Fr(),r=_a(),i=Sr(),s=i("toStringTag"),o=Object,a=r(function(){return arguments}())==="Arguments",l=function(c,u){try{return c[u]}catch{}};return O2=n?r:function(c){var u,h,d;return c===void 0?"Undefined":c===null?"Null":typeof(h=l(u=o(c),s))=="string"?h:a?r(u):(d=r(u))==="Object"&&e(u.callee)?"Arguments":d},O2}var I2,I9;function sNe(){if(I9)return I2;I9=1;var n=an(),e=Fr(),r=u5(),i=n(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(s){return i(s)}),I2=r.inspectSource,I2}var A2,A9;function Xre(){if(A9)return A2;A9=1;var n=an(),e=nn(),r=Fr(),i=au(),s=ks(),o=sNe(),a=function(){},l=s("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=n(c.exec),h=!c.test(a),d=function(g){if(!r(g))return!1;try{return l(a,[],g),!0}catch{return!1}},f=function(g){if(!r(g))return!1;switch(i(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!u(c,o(g))}catch{return!0}};return f.sham=!0,A2=!l||e(function(){var m;return d(d.call)||!d(Object)||!d(function(){m=!0})||m})?f:d,A2}var R2,R9;function oNe(){if(R9)return R2;R9=1;var n=ou(),e=Xre(),r=fi(),i=Sr(),s=i("species"),o=Array;return R2=function(a){var l;return n(a)&&(l=a.constructor,e(l)&&(l===o||n(l.prototype))?l=void 0:r(l)&&(l=l[s],l===null&&(l=void 0))),l===void 0?o:l},R2}var N2,N9;function Y_(){if(N9)return N2;N9=1;var n=oNe();return N2=function(e,r){return new(n(e))(r===0?0:r)},N2}var j2,j9;function ty(){if(j9)return j2;j9=1;var n=nn(),e=Sr(),r=Jb(),i=e("species");return j2=function(s){return r>=51||!n(function(){var o=[],a=o.constructor={};return a[i]=function(){return{foo:1}},o[s](Boolean).foo!==1})},j2}var L9;function Qre(){if(L9)return TB;L9=1;var n=Tt(),e=nn(),r=ou(),i=fi(),s=Zi(),o=jo(),a=h5(),l=V_(),c=Y_(),u=ty(),h=Sr(),d=Jb(),f=h("isConcatSpreadable"),m=d>=51||!e(function(){var y=[];return y[f]=!1,y.concat()[0]!==y}),g=function(y){if(!i(y))return!1;var v=y[f];return v!==void 0?!!v:r(y)},b=!m||!u("concat");return n({target:"Array",proto:!0,arity:1,forced:b},{concat:function(v){var w=s(this),k=c(w,0),S=0,_,C,P,T,O;for(_=-1,P=arguments.length;_<P;_++)if(O=_===-1?w:arguments[_],g(O))for(T=o(O),a(S+T),C=0;C<T;C++,S++)C in O&&l(k,S,O[C]);else a(S+1),l(k,S++,O);return k.length=S,k}}),TB}var F9={},$9={},L2,B9;function no(){if(B9)return L2;B9=1;var n=au(),e=String;return L2=function(r){if(n(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},L2}var F2={},$2,z9;function G_(){if(z9)return $2;z9=1;var n=fm(),e=Math.max,r=Math.min;return $2=function(i,s){var o=n(i);return o<0?e(o+s,0):r(o,s)},$2}var B2,U9;function p5(){if(U9)return B2;U9=1;var n=No(),e=G_(),r=jo(),i=function(s){return function(o,a,l){var c=n(o),u=r(c);if(u===0)return!s&&-1;var h=e(l,u),d;if(s&&a!==a){for(;u>h;)if(d=c[h++],d!==d)return!0}else for(;u>h;h++)if((s||h in c)&&c[h]===a)return s||h||0;return!s&&-1}};return B2={includes:i(!0),indexOf:i(!1)},B2}var z2,W9;function ny(){return W9||(W9=1,z2={}),z2}var U2,q9;function Jre(){if(q9)return U2;q9=1;var n=an(),e=$r(),r=No(),i=p5().indexOf,s=ny(),o=n([].push);return U2=function(a,l){var c=r(a),u=0,h=[],d;for(d in c)!e(s,d)&&e(c,d)&&o(h,d);for(;l.length>u;)e(c,d=l[u++])&&(~i(h,d)||o(h,d));return h},U2}var W2,H9;function m5(){return H9||(H9=1,W2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),W2}var q2,V9;function ry(){if(V9)return q2;V9=1;var n=Jre(),e=m5();return q2=Object.keys||function(i){return n(i,e)},q2}var Y9;function g5(){if(Y9)return F2;Y9=1;var n=br(),e=Gre(),r=to(),i=Rl(),s=No(),o=ry();return F2.f=n&&!e?Object.defineProperties:function(l,c){i(l);for(var u=s(c),h=o(c),d=h.length,f=0,m;d>f;)r.f(l,m=h[f++],u[m]);return l},F2}var H2,G9;function aNe(){if(G9)return H2;G9=1;var n=ks();return H2=n("document","documentElement"),H2}var V2,K9;function K_(){if(K9)return V2;K9=1;var n=dm(),e=q_(),r=n("keys");return V2=function(i){return r[i]||(r[i]=e(i))},V2}var Y2,X9;function iy(){if(X9)return Y2;X9=1;var n=Rl(),e=g5(),r=m5(),i=ny(),s=aNe(),o=Vre(),a=K_(),l=">",c="<",u="prototype",h="script",d=a("IE_PROTO"),f=function(){},m=function(w){return c+h+l+w+c+"/"+h+l},g=function(w){w.write(m("")),w.close();var k=w.parentWindow.Object;return w=null,k},b=function(){var w=o("iframe"),k="java"+h+":",S;return w.style.display="none",s.appendChild(w),w.src=String(k),S=w.contentWindow.document,S.open(),S.write(m("document.F=Object")),S.close(),S.F},y,v=function(){try{y=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&y?g(y):b():g(y);for(var w=r.length;w--;)delete v[u][r[w]];return v()};return i[d]=!0,Y2=Object.create||function(k,S){var _;return k!==null?(f[u]=n(k),_=new f,f[u]=null,_[d]=k):_=v(),S===void 0?_:e.f(_,S)},Y2}var G2={},Q9;function X_(){if(Q9)return G2;Q9=1;var n=Jre(),e=m5(),r=e.concat("length","prototype");return G2.f=Object.getOwnPropertyNames||function(s){return n(s,r)},G2}var K2={},X2,J9;function pm(){if(J9)return X2;J9=1;var n=an();return X2=n([].slice),X2}var Z9;function Zre(){if(Z9)return K2;Z9=1;var n=_a(),e=No(),r=X_().f,i=pm(),s=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(a){try{return r(a)}catch{return i(s)}};return K2.f=function(l){return s&&n(l)==="Window"?o(l):r(e(l))},K2}var Q2={},e7;function Q_(){return e7||(e7=1,Q2.f=Object.getOwnPropertySymbols),Q2}var J2,t7;function sy(){if(t7)return J2;t7=1;var n=hm();return J2=function(e,r,i,s){return s&&s.enumerable?e[r]=i:n(e,r,i),e},J2}var Z2,n7;function b5(){if(n7)return Z2;n7=1;var n=to();return Z2=function(e,r,i){return n.f(e,r,i)},Z2}var eE={},r7;function J_(){if(r7)return eE;r7=1;var n=Sr();return eE.f=n,eE}var tE,i7;function Zn(){if(i7)return tE;i7=1;var n=In(),e=$r(),r=J_(),i=to().f;return tE=function(s){var o=n.Symbol||(n.Symbol={});e(o,s)||i(o,s,{value:r.f(s)})},tE}var nE,s7;function eie(){if(s7)return nE;s7=1;var n=Ji(),e=ks(),r=Sr(),i=sy();return nE=function(){var s=e("Symbol"),o=s&&s.prototype,a=o&&o.valueOf,l=r("toPrimitive");o&&!o[l]&&i(o,l,function(c){return n(a,this)},{arity:1})},nE}var rE,o7;function lNe(){if(o7)return rE;o7=1;var n=f5(),e=au();return rE=n?{}.toString:function(){return"[object "+e(this)+"]"},rE}var iE,a7;function rh(){if(a7)return iE;a7=1;var n=f5(),e=to().f,r=hm(),i=$r(),s=lNe(),o=Sr(),a=o("toStringTag");return iE=function(l,c,u,h){var d=u?l:l&&l.prototype;d&&(i(d,a)||e(d,a,{configurable:!0,value:c}),h&&!n&&r(d,"toString",s))},iE}var sE,l7;function cNe(){if(l7)return sE;l7=1;var n=sr(),e=Fr(),r=n.WeakMap;return sE=e(r)&&/native code/.test(String(r)),sE}var oE,c7;function oy(){if(c7)return oE;c7=1;var n=cNe(),e=sr(),r=fi(),i=hm(),s=$r(),o=u5(),a=K_(),l=ny(),c="Object already initialized",u=e.TypeError,h=e.WeakMap,d,f,m,g=function(w){return m(w)?f(w):d(w,{})},b=function(w){return function(k){var S;if(!r(k)||(S=f(k)).type!==w)throw new u("Incompatible receiver, "+w+" required");return S}};if(n||o.state){var y=o.state||(o.state=new h);y.get=y.get,y.has=y.has,y.set=y.set,d=function(w,k){if(y.has(w))throw new u(c);return k.facade=w,y.set(w,k),k},f=function(w){return y.get(w)||{}},m=function(w){return y.has(w)}}else{var v=a("state");l[v]=!0,d=function(w,k){if(s(w,v))throw new u(c);return k.facade=w,i(w,v,k),k},f=function(w){return s(w,v)?w[v]:{}},m=function(w){return s(w,v)}}return oE={set:d,get:f,has:m,enforce:g,getterFor:b},oE}var aE,u7;function lu(){if(u7)return aE;u7=1;var n=ey(),e=an(),r=W_(),i=Zi(),s=jo(),o=Y_(),a=e([].push),l=function(c){var u=c===1,h=c===2,d=c===3,f=c===4,m=c===6,g=c===7,b=c===5||m;return function(y,v,w,k){for(var S=i(y),_=r(S),C=s(_),P=n(v,w),T=0,O=k||o,D=u?O(y,C):h||g?O(y,0):void 0,I,U;C>T;T++)if((b||T in _)&&(I=_[T],U=P(I,T,S),c))if(u)D[T]=U;else if(U)switch(c){case 3:return!0;case 5:return I;case 6:return T;case 2:a(D,I)}else switch(c){case 4:return!1;case 7:a(D,I)}return m?-1:d||f?f:D}};return aE={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)},aE}var d7;function uNe(){if(d7)return $9;d7=1;var n=Tt(),e=sr(),r=Ji(),i=an(),s=um(),o=br(),a=lm(),l=nn(),c=$r(),u=Fn(),h=Rl(),d=No(),f=d5(),m=no(),g=Xb(),b=iy(),y=ry(),v=X_(),w=Zre(),k=Q_(),S=H_(),_=to(),C=g5(),P=U_(),T=sy(),O=b5(),D=dm(),I=K_(),U=ny(),B=q_(),z=Sr(),j=J_(),F=Zn(),N=eie(),R=rh(),W=oy(),Y=lu().forEach,K=I("hidden"),H="Symbol",Q="prototype",G=W.set,X=W.getterFor(H),de=Object[Q],ye=e.Symbol,se=ye&&ye[Q],ie=e.RangeError,Pe=e.TypeError,ke=e.QObject,q=S.f,Ee=_.f,Je=w.f,ct=P.f,$e=i([].push),ut=D("symbols"),qe=D("op-symbols"),we=D("wks"),ze=!ke||!ke[Q]||!ke[Q].findChild,Me=function(J,he,pe){var _e=q(de,he);_e&&delete de[he],Ee(J,he,pe),_e&&J!==de&&Ee(de,he,_e)},Ie=o&&l(function(){return b(Ee({},"a",{get:function(){return Ee(this,"a",{value:7}).a}})).a!==7})?Me:Ee,Ce=function(J,he){var pe=ut[J]=b(se);return G(pe,{type:H,tag:J,description:he}),o||(pe.description=he),pe},xe=function(he,pe,_e){he===de&&xe(qe,pe,_e),h(he);var De=f(pe);return h(_e),c(ut,De)?(_e.enumerable?(c(he,K)&&he[K][De]&&(he[K][De]=!1),_e=b(_e,{enumerable:g(0,!1)})):(c(he,K)||Ee(he,K,g(1,b(null))),he[K][De]=!0),Ie(he,De,_e)):Ee(he,De,_e)},L=function(he,pe){h(he);var _e=d(pe),De=y(_e).concat(ge(_e));return Y(De,function(ae){(!o||r(fe,_e,ae))&&xe(he,ae,_e[ae])}),he},re=function(he,pe){return pe===void 0?b(he):L(b(he),pe)},fe=function(he){var pe=f(he),_e=r(ct,this,pe);return this===de&&c(ut,pe)&&!c(qe,pe)?!1:_e||!c(this,pe)||!c(ut,pe)||c(this,K)&&this[K][pe]?_e:!0},le=function(he,pe){var _e=d(he),De=f(pe);if(!(_e===de&&c(ut,De)&&!c(qe,De))){var ae=q(_e,De);return ae&&c(ut,De)&&!(c(_e,K)&&_e[K][De])&&(ae.enumerable=!0),ae}},ce=function(he){var pe=Je(d(he)),_e=[];return Y(pe,function(De){!c(ut,De)&&!c(U,De)&&$e(_e,De)}),_e},ge=function(J){var he=J===de,pe=Je(he?qe:d(J)),_e=[];return Y(pe,function(De){c(ut,De)&&(!he||c(de,De))&&$e(_e,ut[De])}),_e};return a||(ye=function(){if(u(se,this))throw new Pe("Symbol is not a constructor");var he=!arguments.length||arguments[0]===void 0?void 0:m(arguments[0]),pe=B(he),_e=function(De){var ae=this===void 0?e:this;ae===de&&r(_e,qe,De),c(ae,K)&&c(ae[K],pe)&&(ae[K][pe]=!1);var Xe=g(1,De);try{Ie(ae,pe,Xe)}catch(Fe){if(!(Fe instanceof ie))throw Fe;Me(ae,pe,Xe)}};return o&&ze&&Ie(de,pe,{configurable:!0,set:_e}),Ce(pe,he)},se=ye[Q],T(se,"toString",function(){return X(this).tag}),T(ye,"withoutSetter",function(J){return Ce(B(J),J)}),P.f=fe,_.f=xe,C.f=L,S.f=le,v.f=w.f=ce,k.f=ge,j.f=function(J){return Ce(z(J),J)},o&&(O(se,"description",{configurable:!0,get:function(){return X(this).description}}),s||T(de,"propertyIsEnumerable",fe,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:ye}),Y(y(we),function(J){F(J)}),n({target:H,stat:!0,forced:!a},{useSetter:function(){ze=!0},useSimple:function(){ze=!1}}),n({target:"Object",stat:!0,forced:!a,sham:!o},{create:re,defineProperty:xe,defineProperties:L,getOwnPropertyDescriptor:le}),n({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:ce}),N(),R(ye,H),U[K]=!0,$9}var h7={},lE,f7;function tie(){if(f7)return lE;f7=1;var n=lm();return lE=n&&!!Symbol.for&&!!Symbol.keyFor,lE}var p7;function dNe(){if(p7)return h7;p7=1;var n=Tt(),e=ks(),r=$r(),i=no(),s=dm(),o=tie(),a=s("string-to-symbol-registry"),l=s("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!o},{for:function(c){var u=i(c);if(r(a,u))return a[u];var h=e("Symbol")(u);return a[u]=h,l[h]=u,h}}),h7}var m7={},g7;function hNe(){if(g7)return m7;g7=1;var n=Tt(),e=$r(),r=Zb(),i=cm(),s=dm(),o=tie(),a=s("symbol-to-string-registry");return n({target:"Symbol",stat:!0,forced:!o},{keyFor:function(c){if(!r(c))throw new TypeError(i(c)+" is not a symbol");if(e(a,c))return a[c]}}),m7}var b7={},cE,y7;function fNe(){if(y7)return cE;y7=1;var n=an(),e=ou(),r=Fr(),i=_a(),s=no(),o=n([].push);return cE=function(a){if(r(a))return a;if(e(a)){for(var l=a.length,c=[],u=0;u<l;u++){var h=a[u];typeof h=="string"?o(c,h):(typeof h=="number"||i(h)==="Number"||i(h)==="String")&&o(c,s(h))}var d=c.length,f=!0;return function(m,g){if(f)return f=!1,g;if(e(this))return g;for(var b=0;b<d;b++)if(c[b]===m)return g}}},cE}var v7;function nie(){if(v7)return b7;v7=1;var n=Tt(),e=ks(),r=z_(),i=Ji(),s=an(),o=nn(),a=Fr(),l=Zb(),c=pm(),u=fNe(),h=lm(),d=String,f=e("JSON","stringify"),m=s(/./.exec),g=s("".charAt),b=s("".charCodeAt),y=s("".replace),v=s(1.1.toString),w=/[\uD800-\uDFFF]/g,k=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,_=!h||o(function(){var O=e("Symbol")("stringify detection");return f([O])!=="[null]"||f({a:O})!=="{}"||f(Object(O))!=="{}"}),C=o(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),P=function(O,D){var I=c(arguments),U=u(D);if(!(!a(U)&&(O===void 0||l(O))))return I[1]=function(B,z){if(a(U)&&(z=i(U,this,d(B),z)),!l(z))return z},r(f,null,I)},T=function(O,D,I){var U=g(I,D-1),B=g(I,D+1);return m(k,O)&&!m(S,B)||m(S,O)&&!m(k,U)?"\\u"+v(b(O,0),16):O};return f&&n({target:"JSON",stat:!0,arity:3,forced:_||C},{stringify:function(D,I,U){var B=c(arguments),z=r(_?P:f,null,B);return C&&typeof z=="string"?y(z,w,T):z}}),b7}var x7={},w7;function pNe(){if(w7)return x7;w7=1;var n=Tt(),e=lm(),r=nn(),i=Q_(),s=Zi(),o=!e||r(function(){i.f(1)});return n({target:"Object",stat:!0,forced:o},{getOwnPropertySymbols:function(l){var c=i.f;return c?c(s(l)):[]}}),x7}var _7;function rie(){return _7||(_7=1,uNe(),dNe(),hNe(),nie(),pNe()),F9}var S7={},k7;function iie(){if(k7)return S7;k7=1;var n=Zn();return n("asyncDispose"),S7}var C7={},E7;function mNe(){if(E7)return C7;E7=1;var n=Zn();return n("asyncIterator"),C7}var T7={},P7;function sie(){if(P7)return T7;P7=1;var n=Zn();return n("dispose"),T7}var M7={},D7;function gNe(){if(D7)return M7;D7=1;var n=Zn();return n("hasInstance"),M7}var O7={},I7;function bNe(){if(I7)return O7;I7=1;var n=Zn();return n("isConcatSpreadable"),O7}var A7={},R7;function oie(){if(R7)return A7;R7=1;var n=Zn();return n("iterator"),A7}var N7={},j7;function yNe(){if(j7)return N7;j7=1;var n=Zn();return n("match"),N7}var L7={},F7;function vNe(){if(F7)return L7;F7=1;var n=Zn();return n("matchAll"),L7}var $7={},B7;function xNe(){if(B7)return $7;B7=1;var n=Zn();return n("replace"),$7}var z7={},U7;function wNe(){if(U7)return z7;U7=1;var n=Zn();return n("search"),z7}var W7={},q7;function _Ne(){if(q7)return W7;q7=1;var n=Zn();return n("species"),W7}var H7={},V7;function SNe(){if(V7)return H7;V7=1;var n=Zn();return n("split"),H7}var Y7={},G7;function aie(){if(G7)return Y7;G7=1;var n=Zn(),e=eie();return n("toPrimitive"),e(),Y7}var K7={},X7;function kNe(){if(X7)return K7;X7=1;var n=ks(),e=Zn(),r=rh();return e("toStringTag"),r(n("Symbol"),"Symbol"),K7}var Q7={},J7;function CNe(){if(J7)return Q7;J7=1;var n=Zn();return n("unscopables"),Q7}var Z7={},ez;function ENe(){if(ez)return Z7;ez=1;var n=sr(),e=rh();return e(n.JSON,"JSON",!0),Z7}var uE,tz;function TNe(){if(tz)return uE;tz=1,Qre(),rie(),iie(),mNe(),sie(),gNe(),bNe(),oie(),yNe(),vNe(),xNe(),wNe(),_Ne(),SNe(),aie(),kNe(),CNe(),ENe();var n=In();return uE=n.Symbol,uE}var nz={},dE,rz;function ay(){return rz||(rz=1,dE=function(){}),dE}var hE,iz;function mm(){return iz||(iz=1,hE={}),hE}var fE,sz;function PNe(){if(sz)return fE;sz=1;var n=br(),e=$r(),r=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,s=e(r,"name"),o=s&&(function(){}).name==="something",a=s&&(!n||n&&i(r,"name").configurable);return fE={EXISTS:s,PROPER:o,CONFIGURABLE:a},fE}var pE,oz;function lie(){if(oz)return pE;oz=1;var n=nn();return pE=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),pE}var mE,az;function Z_(){if(az)return mE;az=1;var n=$r(),e=Fr(),r=Zi(),i=K_(),s=lie(),o=i("IE_PROTO"),a=Object,l=a.prototype;return mE=s?a.getPrototypeOf:function(c){var u=r(c);if(n(u,o))return u[o];var h=u.constructor;return e(h)&&u instanceof h?h.prototype:u instanceof a?l:null},mE}var gE,lz;function cie(){if(lz)return gE;lz=1;var n=nn(),e=Fr(),r=fi(),i=iy(),s=Z_(),o=sy(),a=Sr(),l=um(),c=a("iterator"),u=!1,h,d,f;[].keys&&(f=[].keys(),"next"in f?(d=s(s(f)),d!==Object.prototype&&(h=d)):u=!0);var m=!r(h)||n(function(){var g={};return h[c].call(g)!==g});return m?h={}:l&&(h=i(h)),e(h[c])||o(h,c,function(){return this}),gE={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:u},gE}var bE,cz;function MNe(){if(cz)return bE;cz=1;var n=cie().IteratorPrototype,e=iy(),r=Xb(),i=rh(),s=mm(),o=function(){return this};return bE=function(a,l,c,u){var h=l+" Iterator";return a.prototype=e(n,{next:r(+!u,c)}),i(a,h,!1,!0),s[h]=o,a},bE}var yE,uz;function DNe(){if(uz)return yE;uz=1;var n=an(),e=Sa();return yE=function(r,i,s){try{return n(e(Object.getOwnPropertyDescriptor(r,i)[s]))}catch{}},yE}var vE,dz;function ONe(){if(dz)return vE;dz=1;var n=fi();return vE=function(e){return n(e)||e===null},vE}var xE,hz;function INe(){if(hz)return xE;hz=1;var n=ONe(),e=String,r=TypeError;return xE=function(i){if(n(i))return i;throw new r("Can't set "+e(i)+" as a prototype")},xE}var wE,fz;function ANe(){if(fz)return wE;fz=1;var n=DNe(),e=fi(),r=Al(),i=INe();return wE=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,o={},a;try{a=n(Object.prototype,"__proto__","set"),a(o,[]),s=o instanceof Array}catch{}return function(c,u){return r(c),i(u),e(c)&&(s?a(c,u):c.__proto__=u),c}}():void 0),wE}var _E,pz;function y5(){if(pz)return _E;pz=1;var n=Tt(),e=Ji(),r=um(),i=PNe(),s=Fr(),o=MNe(),a=Z_(),l=ANe(),c=rh(),u=hm(),h=sy(),d=Sr(),f=mm(),m=cie(),g=i.PROPER,b=i.CONFIGURABLE,y=m.IteratorPrototype,v=m.BUGGY_SAFARI_ITERATORS,w=d("iterator"),k="keys",S="values",_="entries",C=function(){return this};return _E=function(P,T,O,D,I,U,B){o(O,T,D);var z=function(G){if(G===I&&W)return W;if(!v&&G&&G in N)return N[G];switch(G){case k:return function(){return new O(this,G)};case S:return function(){return new O(this,G)};case _:return function(){return new O(this,G)}}return function(){return new O(this)}},j=T+" Iterator",F=!1,N=P.prototype,R=N[w]||N["@@iterator"]||I&&N[I],W=!v&&R||z(I),Y=T==="Array"&&N.entries||R,K,H,Q;if(Y&&(K=a(Y.call(new P)),K!==Object.prototype&&K.next&&(!r&&a(K)!==y&&(l?l(K,y):s(K[w])||h(K,w,C)),c(K,j,!0,!0),r&&(f[j]=C))),g&&I===S&&R&&R.name!==S&&(!r&&b?u(N,"name",S):(F=!0,W=function(){return e(R,this)})),I)if(H={values:z(S),keys:U?W:z(k),entries:z(_)},B)for(Q in H)(v||F||!(Q in N))&&h(N,Q,H[Q]);else n({target:T,proto:!0,forced:v||F},H);return(!r||B)&&N[w]!==W&&h(N,w,W,{name:I}),f[T]=W,H},_E}var SE,mz;function v5(){return mz||(mz=1,SE=function(n,e){return{value:n,done:e}}),SE}var kE,gz;function cu(){if(gz)return kE;gz=1;var n=No(),e=ay(),r=mm(),i=oy(),s=to().f,o=y5(),a=v5(),l=um(),c=br(),u="Array Iterator",h=i.set,d=i.getterFor(u);kE=o(Array,"Array",function(m,g){h(this,{type:u,target:n(m),index:0,kind:g})},function(){var m=d(this),g=m.target,b=m.index++;if(!g||b>=g.length)return m.target=null,a(void 0,!0);switch(m.kind){case"keys":return a(b,!1);case"values":return a(g[b],!1)}return a([b,g[b]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!l&&c&&f.name!=="values")try{s(f,"name",{value:"values"})}catch{}return kE}var CE,bz;function RNe(){return bz||(bz=1,CE={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),CE}var yz;function uu(){if(yz)return nz;yz=1,cu();var n=RNe(),e=sr(),r=rh(),i=mm();for(var s in n)r(e[s],s),i[s]=i.Array;return nz}var EE,vz;function uie(){if(vz)return EE;vz=1;var n=TNe();return uu(),EE=n,EE}var TE,xz;function NNe(){return xz||(xz=1,TE=uie()),TE}var jNe=NNe(),LNe=Pt(jNe),wz={},_z;function FNe(){if(_z)return wz;_z=1;var n=Tt(),e=ou(),r=Xre(),i=fi(),s=G_(),o=jo(),a=No(),l=V_(),c=Sr(),u=ty(),h=pm(),d=u("slice"),f=c("species"),m=Array,g=Math.max;return n({target:"Array",proto:!0,forced:!d},{slice:function(y,v){var w=a(this),k=o(w),S=s(y,k),_=s(v===void 0?k:v,k),C,P,T;if(e(w)&&(C=w.constructor,r(C)&&(C===m||e(C.prototype))?C=void 0:i(C)&&(C=C[f],C===null&&(C=void 0)),C===m||C===void 0))return h(w,S,_);for(P=new(C===void 0?m:C)(g(_-S,0)),T=0;S<_;S++,T++)S in w&&l(P,T,w[S]);return P.length=T,P}}),wz}var PE,Sz;function or(){if(Sz)return PE;Sz=1;var n=sr(),e=In();return PE=function(r,i){var s=e[r+"Prototype"],o=s&&s[i];if(o)return o;var a=n[r],l=a&&a.prototype;return l&&l[i]},PE}var ME,kz;function $Ne(){if(kz)return ME;kz=1,FNe();var n=or();return ME=n("Array","slice"),ME}var DE,Cz;function BNe(){if(Cz)return DE;Cz=1;var n=Fn(),e=$Ne(),r=Array.prototype;return DE=function(i){var s=i.slice;return i===r||n(r,i)&&s===r.slice?e:s},DE}var OE,Ez;function zNe(){if(Ez)return OE;Ez=1;var n=BNe();return OE=n,OE}var IE,Tz;function UNe(){return Tz||(Tz=1,IE=zNe()),IE}var WNe=UNe(),gm=Pt(WNe),Pz={},AE,Mz;function die(){if(Mz)return AE;Mz=1;var n=ks(),e=an(),r=X_(),i=Q_(),s=Rl(),o=e([].concat);return AE=n("Reflect","ownKeys")||function(l){var c=r.f(s(l)),u=i.f;return u?o(c,u(l)):c},AE}var Dz;function qNe(){if(Dz)return Pz;Dz=1;var n=Tt(),e=die();return n({target:"Reflect",stat:!0},{ownKeys:e}),Pz}var RE,Oz;function HNe(){if(Oz)return RE;Oz=1,qNe();var n=In();return RE=n.Reflect.ownKeys,RE}var NE,Iz;function VNe(){if(Iz)return NE;Iz=1;var n=HNe();return NE=n,NE}var jE,Az;function YNe(){return Az||(Az=1,jE=VNe()),jE}var GNe=YNe(),hie=Pt(GNe),Rz={},Nz;function KNe(){if(Nz)return Rz;Nz=1;var n=Tt(),e=ou();return n({target:"Array",stat:!0},{isArray:e}),Rz}var LE,jz;function XNe(){if(jz)return LE;jz=1,KNe();var n=In();return LE=n.Array.isArray,LE}var FE,Lz;function QNe(){if(Lz)return FE;Lz=1;var n=XNe();return FE=n,FE}var $E,Fz;function JNe(){return Fz||(Fz=1,$E=QNe()),$E}var ZNe=JNe(),Vt=Pt(ZNe),$z={},Bz;function e3e(){if(Bz)return $z;Bz=1;var n=Tt(),e=lu().map,r=ty(),i=r("map");return n({target:"Array",proto:!0,forced:!i},{map:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),$z}var BE,zz;function t3e(){if(zz)return BE;zz=1,e3e();var n=or();return BE=n("Array","map"),BE}var zE,Uz;function n3e(){if(Uz)return zE;Uz=1;var n=Fn(),e=t3e(),r=Array.prototype;return zE=function(i){var s=i.map;return i===r||n(r,i)&&s===r.map?e:s},zE}var UE,Wz;function r3e(){if(Wz)return UE;Wz=1;var n=n3e();return UE=n,UE}var WE,qz;function i3e(){return qz||(qz=1,WE=r3e()),WE}var s3e=i3e(),mn=Pt(s3e),Hz={},Vz;function o3e(){if(Vz)return Hz;Vz=1;var n=Tt(),e=Zi(),r=ry(),i=nn(),s=i(function(){r(1)});return n({target:"Object",stat:!0,forced:s},{keys:function(a){return r(e(a))}}),Hz}var qE,Yz;function a3e(){if(Yz)return qE;Yz=1,o3e();var n=In();return qE=n.Object.keys,qE}var HE,Gz;function l3e(){if(Gz)return HE;Gz=1;var n=a3e();return HE=n,HE}var VE,Kz;function c3e(){return Kz||(Kz=1,VE=l3e()),VE}var u3e=c3e(),Pr=Pt(u3e),Xz={},Qz;function d3e(){if(Qz)return Xz;Qz=1;var n=Tt(),e=an(),r=Date,i=e(r.prototype.getTime);return n({target:"Date",stat:!0},{now:function(){return i(new r)}}),Xz}var YE,Jz;function h3e(){if(Jz)return YE;Jz=1,d3e();var n=In();return YE=n.Date.now,YE}var GE,Zz;function f3e(){if(Zz)return GE;Zz=1;var n=h3e();return GE=n,GE}var KE,eU;function p3e(){return eU||(eU=1,KE=f3e()),KE}var m3e=p3e(),cs=Pt(m3e),tU={},XE,nU;function g3e(){if(nU)return XE;nU=1;var n=an(),e=Sa(),r=fi(),i=$r(),s=pm(),o=Kb(),a=Function,l=n([].concat),c=n([].join),u={},h=function(d,f,m){if(!i(u,f)){for(var g=[],b=0;b<f;b++)g[b]="a["+b+"]";u[f]=a("C,a","return new C("+c(g,",")+")")}return u[f](d,m)};return XE=o?a.bind:function(f){var m=e(this),g=m.prototype,b=s(arguments,1),y=function(){var w=l(b,s(arguments));return this instanceof y?h(m,w.length,w):m.apply(f,w)};return r(g)&&(y.prototype=g),y},XE}var rU;function b3e(){if(rU)return tU;rU=1;var n=Tt(),e=g3e();return n({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),tU}var QE,iU;function y3e(){if(iU)return QE;iU=1,b3e();var n=or();return QE=n("Function","bind"),QE}var JE,sU;function v3e(){if(sU)return JE;sU=1;var n=Fn(),e=y3e(),r=Function.prototype;return JE=function(i){var s=i.bind;return i===r||n(r,i)&&s===r.bind?e:s},JE}var ZE,oU;function x3e(){if(oU)return ZE;oU=1;var n=v3e();return ZE=n,ZE}var eT,aU;function w3e(){return aU||(aU=1,eT=x3e()),eT}var _3e=w3e(),Le=Pt(_3e),lU={},tT,cU;function bm(){if(cU)return tT;cU=1;var n=nn();return tT=function(e,r){var i=[][e];return!!i&&n(function(){i.call(null,r||function(){return 1},1)})},tT}var nT,uU;function S3e(){if(uU)return nT;uU=1;var n=lu().forEach,e=bm(),r=e("forEach");return nT=r?[].forEach:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)},nT}var dU;function k3e(){if(dU)return lU;dU=1;var n=Tt(),e=S3e();return n({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),lU}var rT,hU;function C3e(){if(hU)return rT;hU=1,k3e();var n=or();return rT=n("Array","forEach"),rT}var iT,fU;function E3e(){if(fU)return iT;fU=1;var n=C3e();return iT=n,iT}var sT,pU;function T3e(){if(pU)return sT;pU=1;var n=au(),e=$r(),r=Fn(),i=E3e(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return sT=function(a){var l=a.forEach;return a===s||r(s,a)&&l===s.forEach||e(o,n(a))?i:l},sT}var oT,mU;function P3e(){return mU||(mU=1,oT=T3e()),oT}var M3e=P3e(),mt=Pt(M3e),gU={},bU;function D3e(){if(bU)return gU;bU=1;var n=Tt(),e=an(),r=ou(),i=e([].reverse),s=[1,2];return n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),i(this)}}),gU}var aT,yU;function O3e(){if(yU)return aT;yU=1,D3e();var n=or();return aT=n("Array","reverse"),aT}var lT,vU;function I3e(){if(vU)return lT;vU=1;var n=Fn(),e=O3e(),r=Array.prototype;return lT=function(i){var s=i.reverse;return i===r||n(r,i)&&s===r.reverse?e:s},lT}var cT,xU;function A3e(){if(xU)return cT;xU=1;var n=I3e();return cT=n,cT}var uT,wU;function R3e(){return wU||(wU=1,uT=A3e()),uT}var N3e=R3e(),j3e=Pt(N3e),_U={},dT,SU;function L3e(){if(SU)return dT;SU=1;var n=br(),e=ou(),r=TypeError,i=Object.getOwnPropertyDescriptor,s=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(o){return o instanceof TypeError}}();return dT=s?function(o,a){if(e(o)&&!i(o,"length").writable)throw new r("Cannot set read only .length");return o.length=a}:function(o,a){return o.length=a},dT}var hT,kU;function fie(){if(kU)return hT;kU=1;var n=cm(),e=TypeError;return hT=function(r,i){if(!delete r[i])throw new e("Cannot delete property "+n(i)+" of "+n(r))},hT}var CU;function F3e(){if(CU)return _U;CU=1;var n=Tt(),e=Zi(),r=G_(),i=fm(),s=jo(),o=L3e(),a=h5(),l=Y_(),c=V_(),u=fie(),h=ty(),d=h("splice"),f=Math.max,m=Math.min;return n({target:"Array",proto:!0,forced:!d},{splice:function(b,y){var v=e(this),w=s(v),k=r(b,w),S=arguments.length,_,C,P,T,O,D;for(S===0?_=C=0:S===1?(_=0,C=w-k):(_=S-2,C=m(f(i(y),0),w-k)),a(w+_-C),P=l(v,C),T=0;T<C;T++)O=k+T,O in v&&c(P,T,v[O]);if(P.length=C,_<C){for(T=k;T<w-C;T++)O=T+C,D=T+_,O in v?v[D]=v[O]:u(v,D);for(T=w;T>w-C+_;T--)u(v,T-1)}else if(_>C)for(T=w-C;T>k;T--)O=T+C-1,D=T+_-1,O in v?v[D]=v[O]:u(v,D);for(T=0;T<_;T++)v[T+k]=arguments[T+2];return o(v,w-C+_),P}}),_U}var fT,EU;function $3e(){if(EU)return fT;EU=1,F3e();var n=or();return fT=n("Array","splice"),fT}var pT,TU;function B3e(){if(TU)return pT;TU=1;var n=Fn(),e=$3e(),r=Array.prototype;return pT=function(i){var s=i.splice;return i===r||n(r,i)&&s===r.splice?e:s},pT}var mT,PU;function z3e(){if(PU)return mT;PU=1;var n=B3e();return mT=n,mT}var gT,MU;function U3e(){return MU||(MU=1,gT=z3e()),gT}var W3e=U3e(),_i=Pt(W3e),DU={},bT,OU;function q3e(){if(OU)return bT;OU=1;var n=br(),e=an(),r=Ji(),i=nn(),s=ry(),o=Q_(),a=U_(),l=Zi(),c=W_(),u=Object.assign,h=Object.defineProperty,d=e([].concat);return bT=!u||i(function(){if(n&&u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},m={},g=Symbol("assign detection"),b="abcdefghijklmnopqrst";return f[g]=7,b.split("").forEach(function(y){m[y]=y}),u({},f)[g]!==7||s(u({},m)).join("")!==b})?function(m,g){for(var b=l(m),y=arguments.length,v=1,w=o.f,k=a.f;y>v;)for(var S=c(arguments[v++]),_=w?d(s(S),w(S)):s(S),C=_.length,P=0,T;C>P;)T=_[P++],(!n||r(k,S,T))&&(b[T]=S[T]);return b}:u,bT}var IU;function H3e(){if(IU)return DU;IU=1;var n=Tt(),e=q3e();return n({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),DU}var yT,AU;function V3e(){if(AU)return yT;AU=1,H3e();var n=In();return yT=n.Object.assign,yT}var vT,RU;function Y3e(){if(RU)return vT;RU=1;var n=V3e();return vT=n,vT}var xT,NU;function G3e(){return NU||(NU=1,xT=Y3e()),xT}var K3e=G3e(),Ml=Pt(K3e),jU={},LU;function X3e(){if(LU)return jU;LU=1;var n=Tt(),e=p5().includes,r=nn(),i=ay(),s=r(function(){return!Array(1).includes()});return n({target:"Array",proto:!0,forced:s},{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),i("includes"),jU}var wT,FU;function Q3e(){if(FU)return wT;FU=1,X3e();var n=or();return wT=n("Array","includes"),wT}var $U={},_T,BU;function J3e(){if(BU)return _T;BU=1;var n=fi(),e=_a(),r=Sr(),i=r("match");return _T=function(s){var o;return n(s)&&((o=s[i])!==void 0?!!o:e(s)==="RegExp")},_T}var ST,zU;function Z3e(){if(zU)return ST;zU=1;var n=J3e(),e=TypeError;return ST=function(r){if(n(r))throw new e("The method doesn't accept regular expressions");return r},ST}var kT,UU;function e5e(){if(UU)return kT;UU=1;var n=Sr(),e=n("match");return kT=function(r){var i=/./;try{"/./"[r](i)}catch{try{return i[e]=!1,"/./"[r](i)}catch{}}return!1},kT}var WU;function t5e(){if(WU)return $U;WU=1;var n=Tt(),e=an(),r=Z3e(),i=Al(),s=no(),o=e5e(),a=e("".indexOf);return n({target:"String",proto:!0,forced:!o("includes")},{includes:function(c){return!!~a(s(i(this)),s(r(c)),arguments.length>1?arguments[1]:void 0)}}),$U}var CT,qU;function n5e(){if(qU)return CT;qU=1,t5e();var n=or();return CT=n("String","includes"),CT}var ET,HU;function r5e(){if(HU)return ET;HU=1;var n=Fn(),e=Q3e(),r=n5e(),i=Array.prototype,s=String.prototype;return ET=function(o){var a=o.includes;return o===i||n(i,o)&&a===i.includes?e:typeof o=="string"||o===s||n(s,o)&&a===s.includes?r:a},ET}var TT,VU;function i5e(){if(VU)return TT;VU=1;var n=r5e();return TT=n,TT}var PT,YU;function s5e(){return YU||(YU=1,PT=i5e()),PT}var o5e=s5e(),jp=Pt(o5e),GU={},KU;function a5e(){if(KU)return GU;KU=1;var n=Tt(),e=nn(),r=Zi(),i=Z_(),s=lie(),o=e(function(){i(1)});return n({target:"Object",stat:!0,forced:o,sham:!s},{getPrototypeOf:function(l){return i(r(l))}}),GU}var MT,XU;function l5e(){if(XU)return MT;XU=1,a5e();var n=In();return MT=n.Object.getPrototypeOf,MT}var DT,QU;function c5e(){if(QU)return DT;QU=1;var n=l5e();return DT=n,DT}var OT,JU;function u5e(){return JU||(JU=1,OT=c5e()),OT}var d5e=u5e(),ZU=Pt(d5e),IT,eW;function h5e(){if(eW)return IT;eW=1,Qre();var n=or();return IT=n("Array","concat"),IT}var AT,tW;function f5e(){if(tW)return AT;tW=1;var n=Fn(),e=h5e(),r=Array.prototype;return AT=function(i){var s=i.concat;return i===r||n(r,i)&&s===r.concat?e:s},AT}var RT,nW;function p5e(){if(nW)return RT;nW=1;var n=f5e();return RT=n,RT}var NT,rW;function m5e(){return rW||(rW=1,NT=p5e()),NT}var g5e=m5e(),ur=Pt(g5e),iW={},sW;function b5e(){if(sW)return iW;sW=1;var n=Tt(),e=lu().filter,r=ty(),i=r("filter");return n({target:"Array",proto:!0,forced:!i},{filter:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),iW}var jT,oW;function y5e(){if(oW)return jT;oW=1,b5e();var n=or();return jT=n("Array","filter"),jT}var LT,aW;function v5e(){if(aW)return LT;aW=1;var n=Fn(),e=y5e(),r=Array.prototype;return LT=function(i){var s=i.filter;return i===r||n(r,i)&&s===r.filter?e:s},LT}var FT,lW;function x5e(){if(lW)return FT;lW=1;var n=v5e();return FT=n,FT}var $T,cW;function w5e(){return cW||(cW=1,$T=x5e()),$T}var _5e=w5e(),Ot=Pt(_5e),uW={},BT,dW;function pie(){if(dW)return BT;dW=1;var n=br(),e=nn(),r=an(),i=Z_(),s=ry(),o=No(),a=U_().f,l=r(a),c=r([].push),u=n&&e(function(){var d=Object.create(null);return d[2]=2,!l(d,2)}),h=function(d){return function(f){for(var m=o(f),g=s(m),b=u&&i(m)===null,y=g.length,v=0,w=[],k;y>v;)k=g[v++],(!n||(b?k in m:l(m,k)))&&c(w,d?[k,m[k]]:m[k]);return w}};return BT={entries:h(!0),values:h(!1)},BT}var hW;function S5e(){if(hW)return uW;hW=1;var n=Tt(),e=pie().values;return n({target:"Object",stat:!0},{values:function(i){return e(i)}}),uW}var zT,fW;function k5e(){if(fW)return zT;fW=1,S5e();var n=In();return zT=n.Object.values,zT}var UT,pW;function C5e(){if(pW)return UT;pW=1;var n=k5e();return UT=n,UT}var WT,mW;function E5e(){return mW||(mW=1,WT=C5e()),WT}var T5e=E5e(),x5=Pt(T5e),gW={},qT,bW;function w5(){return bW||(bW=1,qT=`	
\v\f\r \u2028\u2029\uFEFF`),qT}var HT,yW;function mie(){if(yW)return HT;yW=1;var n=an(),e=Al(),r=no(),i=w5(),s=n("".replace),o=RegExp("^["+i+"]+"),a=RegExp("(^|[^"+i+"])["+i+"]+$"),l=function(c){return function(u){var h=r(e(u));return c&1&&(h=s(h,o,"")),c&2&&(h=s(h,a,"$1")),h}};return HT={start:l(1),end:l(2),trim:l(3)},HT}var VT,vW;function P5e(){if(vW)return VT;vW=1;var n=sr(),e=nn(),r=an(),i=no(),s=mie().trim,o=w5(),a=n.parseInt,l=n.Symbol,c=l&&l.iterator,u=/^[+-]?0x/i,h=r(u.exec),d=a(o+"08")!==8||a(o+"0x16")!==22||c&&!e(function(){a(Object(c))});return VT=d?function(m,g){var b=s(i(m));return a(b,g>>>0||(h(u,b)?16:10))}:a,VT}var xW;function M5e(){if(xW)return gW;xW=1;var n=Tt(),e=P5e();return n({global:!0,forced:parseInt!==e},{parseInt:e}),gW}var YT,wW;function D5e(){if(wW)return YT;wW=1,M5e();var n=In();return YT=n.parseInt,YT}var GT,_W;function O5e(){if(_W)return GT;_W=1;var n=D5e();return GT=n,GT}var KT,SW;function I5e(){return SW||(SW=1,KT=O5e()),KT}var A5e=I5e(),us=Pt(A5e),kW={},CW;function R5e(){if(CW)return kW;CW=1;var n=Tt(),e=l5(),r=p5().indexOf,i=bm(),s=e([].indexOf),o=!!s&&1/s([1],1,-0)<0,a=o||!i("indexOf");return n({target:"Array",proto:!0,forced:a},{indexOf:function(c){var u=arguments.length>1?arguments[1]:void 0;return o?s(this,c,u)||0:r(this,c,u)}}),kW}var XT,EW;function N5e(){if(EW)return XT;EW=1,R5e();var n=or();return XT=n("Array","indexOf"),XT}var QT,TW;function j5e(){if(TW)return QT;TW=1;var n=Fn(),e=N5e(),r=Array.prototype;return QT=function(i){var s=i.indexOf;return i===r||n(r,i)&&s===r.indexOf?e:s},QT}var JT,PW;function L5e(){if(PW)return JT;PW=1;var n=j5e();return JT=n,JT}var ZT,MW;function F5e(){return MW||(MW=1,ZT=L5e()),ZT}var $5e=F5e(),_n=Pt($5e),DW={},OW;function B5e(){if(OW)return DW;OW=1;var n=Tt(),e=pie().entries;return n({target:"Object",stat:!0},{entries:function(i){return e(i)}}),DW}var eP,IW;function z5e(){if(IW)return eP;IW=1,B5e();var n=In();return eP=n.Object.entries,eP}var tP,AW;function U5e(){if(AW)return tP;AW=1;var n=z5e();return tP=n,tP}var nP,RW;function W5e(){return RW||(RW=1,nP=U5e()),nP}var q5e=W5e(),H5e=Pt(q5e),NW={},jW;function V5e(){if(jW)return NW;jW=1;var n=Tt(),e=br(),r=iy();return n({target:"Object",stat:!0,sham:!e},{create:r}),NW}var rP,LW;function Y5e(){if(LW)return rP;LW=1,V5e();var n=In(),e=n.Object;return rP=function(i,s){return e.create(i,s)},rP}var iP,FW;function G5e(){if(FW)return iP;FW=1;var n=Y5e();return iP=n,iP}var sP,$W;function K5e(){return $W||($W=1,sP=G5e()),sP}var X5e=K5e(),ly=Pt(X5e),BW={},oP,zW;function gie(){if(zW)return oP;zW=1;var n=fm(),e=no(),r=Al(),i=RangeError;return oP=function(o){var a=e(r(this)),l="",c=n(o);if(c<0||c===1/0)throw new i("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(a+=a))c&1&&(l+=a);return l},oP}var aP,UW;function Q5e(){if(UW)return aP;UW=1;var n=an(),e=Kre(),r=no(),i=gie(),s=Al(),o=n(i),a=n("".slice),l=Math.ceil,c=function(u){return function(h,d,f){var m=r(s(h)),g=e(d),b=m.length,y=f===void 0?" ":r(f),v,w;return g<=b||y===""?m:(v=g-b,w=o(y,l(v/y.length)),w.length>v&&(w=a(w,0,v)),u?m+w:w+m)}};return aP={start:c(!1),end:c(!0)},aP}var lP,WW;function J5e(){if(WW)return lP;WW=1;var n=an(),e=nn(),r=Q5e().start,i=RangeError,s=isFinite,o=Math.abs,a=Date.prototype,l=a.toISOString,c=n(a.getTime),u=n(a.getUTCDate),h=n(a.getUTCFullYear),d=n(a.getUTCHours),f=n(a.getUTCMilliseconds),m=n(a.getUTCMinutes),g=n(a.getUTCMonth),b=n(a.getUTCSeconds);return lP=e(function(){return l.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){l.call(new Date(NaN))})?function(){if(!s(c(this)))throw new i("Invalid time value");var v=this,w=h(v),k=f(v),S=w<0?"-":w>9999?"+":"";return S+r(o(w),S?6:4,0)+"-"+r(g(v)+1,2,0)+"-"+r(u(v),2,0)+"T"+r(d(v),2,0)+":"+r(m(v),2,0)+":"+r(b(v),2,0)+"."+r(k,3,0)+"Z"}:l,lP}var qW;function Z5e(){if(qW)return BW;qW=1;var n=Tt(),e=Ji(),r=Zi(),i=Hre(),s=J5e(),o=_a(),a=nn(),l=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return n({target:"Date",proto:!0,forced:l},{toJSON:function(u){var h=r(this),d=i(h,"number");return typeof d=="number"&&!isFinite(d)?null:!("toISOString"in h)&&o(h)==="Date"?e(s,h):h.toISOString()}}),BW}var cP,HW;function eje(){if(HW)return cP;HW=1,Z5e(),nie();var n=In(),e=z_();return n.JSON||(n.JSON={stringify:JSON.stringify}),cP=function(i,s,o){return e(n.JSON.stringify,null,arguments)},cP}var uP,VW;function tje(){if(VW)return uP;VW=1;var n=eje();return uP=n,uP}var dP,YW;function nje(){return YW||(YW=1,dP=tje()),dP}var rje=nje(),$i=Pt(rje),GW={},KW={},hP,XW;function bie(){if(XW)return hP;XW=1;var n=sr(),e=am(),r=_a(),i=function(s){return e.slice(0,s.length)===s};return hP=function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":r(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}(),hP}var fP,QW;function ije(){if(QW)return fP;QW=1;var n=TypeError;return fP=function(e,r){if(e<r)throw new n("Not enough arguments");return e},fP}var pP,JW;function yie(){if(JW)return pP;JW=1;var n=sr(),e=z_(),r=Fr(),i=bie(),s=am(),o=pm(),a=ije(),l=n.Function,c=/MSIE .\./.test(s)||i==="BUN"&&function(){var u=n.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return pP=function(u,h){var d=h?2:1;return c?function(f,m){var g=a(arguments.length,1)>d,b=r(f)?f:l(f),y=g?o(arguments,d):[],v=g?function(){e(b,this,y)}:b;return h?u(v,m):u(v)}:u},pP}var ZW;function sje(){if(ZW)return KW;ZW=1;var n=Tt(),e=sr(),r=yie(),i=r(e.setInterval,!0);return n({global:!0,bind:!0,forced:e.setInterval!==i},{setInterval:i}),KW}var eq={},tq;function oje(){if(tq)return eq;tq=1;var n=Tt(),e=sr(),r=yie(),i=r(e.setTimeout,!0);return n({global:!0,bind:!0,forced:e.setTimeout!==i},{setTimeout:i}),eq}var nq;function vie(){return nq||(nq=1,sje(),oje()),GW}var mP,rq;function aje(){if(rq)return mP;rq=1,vie();var n=In();return mP=n.setTimeout,mP}var gP,iq;function lje(){return iq||(iq=1,gP=aje()),gP}var cje=lje(),ci=Pt(cje),sq={},bP,oq;function uje(){if(oq)return bP;oq=1;var n=Zi(),e=G_(),r=jo();return bP=function(s){for(var o=n(this),a=r(o),l=arguments.length,c=e(l>1?arguments[1]:void 0,a),u=l>2?arguments[2]:void 0,h=u===void 0?a:e(u,a);h>c;)o[c++]=s;return o},bP}var aq;function dje(){if(aq)return sq;aq=1;var n=Tt(),e=uje(),r=ay();return n({target:"Array",proto:!0},{fill:e}),r("fill"),sq}var yP,lq;function hje(){if(lq)return yP;lq=1,dje();var n=or();return yP=n("Array","fill"),yP}var vP,cq;function fje(){if(cq)return vP;cq=1;var n=Fn(),e=hje(),r=Array.prototype;return vP=function(i){var s=i.fill;return i===r||n(r,i)&&s===r.fill?e:s},vP}var xP,uq;function pje(){if(uq)return xP;uq=1;var n=fje();return xP=n,xP}var wP,dq;function mje(){return dq||(dq=1,wP=pje()),wP}var gje=mje(),xie=Pt(gje),_P={exports:{}},hq;function bje(){return hq||(hq=1,function(n){n.exports=e;function e(i){if(i)return r(i)}function r(i){for(var s in e.prototype)i[s]=e.prototype[s];return i}e.prototype.on=e.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},e.prototype.once=function(i,s){function o(){this.off(i,o),s.apply(this,arguments)}return o.fn=s,this.on(i,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+i];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,l=0;l<o.length;l++)if(a=o[l],a===s||a.fn===s){o.splice(l,1);break}return o.length===0&&delete this._callbacks["$"+i],this},e.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),o=this._callbacks["$"+i],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(o){o=o.slice(0);for(var a=0,l=o.length;a<l;++a)o[a].apply(this,s)}return this},e.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},e.prototype.hasListeners=function(i){return!!this.listeners(i).length}}(_P)),_P.exports}var yje=bje(),_5=Pt(yje);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Oo(){return Oo=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Oo.apply(this,arguments)}function ro(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function Hv(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var NA;typeof Object.assign!="function"?NA=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(s!=null)for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])}return r}:NA=Object.assign;var Bd=NA,fq=["","webkit","Moz","MS","ms","o"],vje=typeof document>"u"?{style:{}}:document.createElement("div"),xje="function",uf=Math.round,zd=Math.abs,S5=Date.now;function eS(n,e){for(var r,i,s=e[0].toUpperCase()+e.slice(1),o=0;o<fq.length;){if(r=fq[o],i=r?r+s:e,i in n)return i;o++}}var yl;typeof window>"u"?yl={}:yl=window;var wie=eS(vje.style,"touchAction"),_ie=wie!==void 0;function wje(){if(!_ie)return!1;var n={},e=yl.CSS&&yl.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return n[r]=e?yl.CSS.supports("touch-action",r):!0}),n}var Sie="compute",kie="auto",jA="manipulation",xd="none",ob="pan-x",ab="pan-y",Vv=wje(),_je=/mobile|tablet|ip(ad|hone|od)|android/i,Cie="ontouchstart"in yl,Sje=eS(yl,"PointerEvent")!==void 0,kje=Cie&&_je.test(navigator.userAgent),cy="touch",Cje="pen",k5="mouse",Eje="kinect",Tje=25,Pi=1,ih=2,_r=4,Ki=8,i1=1,uy=2,dy=4,hy=8,Lp=16,pa=uy|dy,wd=hy|Lp,Eie=pa|wd,Tie=["x","y"],s1=["clientX","clientY"];function vl(n,e,r){var i;if(n)if(n.forEach)n.forEach(e,r);else if(n.length!==void 0)for(i=0;i<n.length;)e.call(r,n[i],i,n),i++;else for(i in n)n.hasOwnProperty(i)&&e.call(r,n[i],i,n)}function tS(n,e){return typeof n===xje?n.apply(e&&e[0]||void 0,e):n}function ed(n,e){return n.indexOf(e)>-1}function Pje(n){if(ed(n,xd))return xd;var e=ed(n,ob),r=ed(n,ab);return e&&r?xd:e||r?e?ob:ab:ed(n,jA)?jA:kie}var Pie=function(){function n(r,i){this.manager=r,this.set(i)}var e=n.prototype;return e.set=function(i){i===Sie&&(i=this.compute()),_ie&&this.manager.element.style&&Vv[i]&&(this.manager.element.style[wie]=i),this.actions=i.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var i=[];return vl(this.manager.recognizers,function(s){tS(s.options.enable,[s])&&(i=i.concat(s.getTouchAction()))}),Pje(i.join(" "))},e.preventDefaults=function(i){var s=i.srcEvent,o=i.offsetDirection;if(this.manager.session.prevented){s.preventDefault();return}var a=this.actions,l=ed(a,xd)&&!Vv[xd],c=ed(a,ab)&&!Vv[ab],u=ed(a,ob)&&!Vv[ob];if(l){var h=i.pointers.length===1,d=i.distance<2,f=i.deltaTime<250;if(h&&d&&f)return}if(!(u&&c)&&(l||c&&o&pa||u&&o&wd))return this.preventSrc(s)},e.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},n}();function C5(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function Mie(n){var e=n.length;if(e===1)return{x:uf(n[0].clientX),y:uf(n[0].clientY)};for(var r=0,i=0,s=0;s<e;)r+=n[s].clientX,i+=n[s].clientY,s++;return{x:uf(r/e),y:uf(i/e)}}function pq(n){for(var e=[],r=0;r<n.pointers.length;)e[r]={clientX:uf(n.pointers[r].clientX),clientY:uf(n.pointers[r].clientY)},r++;return{timeStamp:S5(),pointers:e,center:Mie(e),deltaX:n.deltaX,deltaY:n.deltaY}}function o1(n,e,r){r||(r=Tie);var i=e[r[0]]-n[r[0]],s=e[r[1]]-n[r[1]];return Math.sqrt(i*i+s*s)}function LA(n,e,r){r||(r=Tie);var i=e[r[0]]-n[r[0]],s=e[r[1]]-n[r[1]];return Math.atan2(s,i)*180/Math.PI}function Die(n,e){return n===e?i1:zd(n)>=zd(e)?n<0?uy:dy:e<0?hy:Lp}function Mje(n,e){var r=e.center,i=n.offsetDelta||{},s=n.prevDelta||{},o=n.prevInput||{};(e.eventType===Pi||o.eventType===_r)&&(s=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=n.offsetDelta={x:r.x,y:r.y}),e.deltaX=s.x+(r.x-i.x),e.deltaY=s.y+(r.y-i.y)}function Oie(n,e,r){return{x:e/n||0,y:r/n||0}}function Dje(n,e){return o1(e[0],e[1],s1)/o1(n[0],n[1],s1)}function Oje(n,e){return LA(e[1],e[0],s1)+LA(n[1],n[0],s1)}function Ije(n,e){var r=n.lastInterval||e,i=e.timeStamp-r.timeStamp,s,o,a,l;if(e.eventType!==Ki&&(i>Tje||r.velocity===void 0)){var c=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,h=Oie(i,c,u);o=h.x,a=h.y,s=zd(h.x)>zd(h.y)?h.x:h.y,l=Die(c,u),n.lastInterval=e}else s=r.velocity,o=r.velocityX,a=r.velocityY,l=r.direction;e.velocity=s,e.velocityX=o,e.velocityY=a,e.direction=l}function Aje(n,e){var r=n.session,i=e.pointers,s=i.length;r.firstInput||(r.firstInput=pq(e)),s>1&&!r.firstMultiple?r.firstMultiple=pq(e):s===1&&(r.firstMultiple=!1);var o=r.firstInput,a=r.firstMultiple,l=a?a.center:o.center,c=e.center=Mie(i);e.timeStamp=S5(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=LA(l,c),e.distance=o1(l,c),Mje(r,e),e.offsetDirection=Die(e.deltaX,e.deltaY);var u=Oie(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=zd(u.x)>zd(u.y)?u.x:u.y,e.scale=a?Dje(a.pointers,i):1,e.rotation=a?Oje(a.pointers,i):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,Ije(r,e);var h=n.element,d=e.srcEvent,f;d.composedPath?f=d.composedPath()[0]:d.path?f=d.path[0]:f=d.target,C5(f,h)&&(h=f),e.target=h}function Rje(n,e,r){var i=r.pointers.length,s=r.changedPointers.length,o=e&Pi&&i-s===0,a=e&(_r|Ki)&&i-s===0;r.isFirst=!!o,r.isFinal=!!a,o&&(n.session={}),r.eventType=e,Aje(n,r),n.emit("hammer.input",r),n.recognize(r),n.session.prevInput=r}function lb(n){return n.trim().split(/\s+/g)}function Jg(n,e,r){vl(lb(e),function(i){n.addEventListener(i,r,!1)})}function Zg(n,e,r){vl(lb(e),function(i){n.removeEventListener(i,r,!1)})}function mq(n){var e=n.ownerDocument||n;return e.defaultView||e.parentWindow||window}var ym=function(){function n(r,i){var s=this;this.manager=r,this.callback=i,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(o){tS(r.options.enable,[r])&&s.handler(o)},this.init()}var e=n.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Jg(this.element,this.evEl,this.domHandler),this.evTarget&&Jg(this.target,this.evTarget,this.domHandler),this.evWin&&Jg(mq(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Zg(this.element,this.evEl,this.domHandler),this.evTarget&&Zg(this.target,this.evTarget,this.domHandler),this.evWin&&Zg(mq(this.element),this.evWin,this.domHandler)},n}();function Ud(n,e,r){if(n.indexOf&&!r)return n.indexOf(e);for(var i=0;i<n.length;){if(r&&n[i][r]==e||!r&&n[i]===e)return i;i++}return-1}var Nje={pointerdown:Pi,pointermove:ih,pointerup:_r,pointercancel:Ki,pointerout:Ki},jje={2:cy,3:Cje,4:k5,5:Eje},Iie="pointerdown",Aie="pointermove pointerup pointercancel";yl.MSPointerEvent&&!yl.PointerEvent&&(Iie="MSPointerDown",Aie="MSPointerMove MSPointerUp MSPointerCancel");var Rie=function(n){ro(e,n);function e(){var i,s=e.prototype;return s.evEl=Iie,s.evWin=Aie,i=n.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var r=e.prototype;return r.handler=function(s){var o=this.store,a=!1,l=s.type.toLowerCase().replace("ms",""),c=Nje[l],u=jje[s.pointerType]||s.pointerType,h=u===cy,d=Ud(o,s.pointerId,"pointerId");c&Pi&&(s.button===0||h)?d<0&&(o.push(s),d=o.length-1):c&(_r|Ki)&&(a=!0),!(d<0)&&(o[d]=s,this.callback(this.manager,c,{pointers:o,changedPointers:[s],pointerType:u,srcEvent:s}),a&&o.splice(d,1))},e}(ym);function cb(n){return Array.prototype.slice.call(n,0)}function E5(n,e,r){for(var i=[],s=[],o=0;o<n.length;){var a=e?n[o][e]:n[o];Ud(s,a)<0&&i.push(n[o]),s[o]=a,o++}return r&&(e?i=i.sort(function(l,c){return l[e]>c[e]}):i=i.sort()),i}var Lje={touchstart:Pi,touchmove:ih,touchend:_r,touchcancel:Ki},Fje="touchstart touchmove touchend touchcancel",T5=function(n){ro(e,n);function e(){var i;return e.prototype.evTarget=Fje,i=n.apply(this,arguments)||this,i.targetIds={},i}var r=e.prototype;return r.handler=function(s){var o=Lje[s.type],a=$je.call(this,s,o);a&&this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:cy,srcEvent:s})},e}(ym);function $je(n,e){var r=cb(n.touches),i=this.targetIds;if(e&(Pi|ih)&&r.length===1)return i[r[0].identifier]=!0,[r,r];var s,o,a=cb(n.changedTouches),l=[],c=this.target;if(o=r.filter(function(u){return C5(u.target,c)}),e===Pi)for(s=0;s<o.length;)i[o[s].identifier]=!0,s++;for(s=0;s<a.length;)i[a[s].identifier]&&l.push(a[s]),e&(_r|Ki)&&delete i[a[s].identifier],s++;if(l.length)return[E5(o.concat(l),"identifier",!0),l]}var Bje={mousedown:Pi,mousemove:ih,mouseup:_r},zje="mousedown",Uje="mousemove mouseup",P5=function(n){ro(e,n);function e(){var i,s=e.prototype;return s.evEl=zje,s.evWin=Uje,i=n.apply(this,arguments)||this,i.pressed=!1,i}var r=e.prototype;return r.handler=function(s){var o=Bje[s.type];o&Pi&&s.button===0&&(this.pressed=!0),o&ih&&s.which!==1&&(o=_r),this.pressed&&(o&_r&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[s],changedPointers:[s],pointerType:k5,srcEvent:s}))},e}(ym),Wje=2500,gq=25;function bq(n){var e=n.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var i={x:r.clientX,y:r.clientY},s=this.lastTouches;this.lastTouches.push(i);var o=function(){var l=s.indexOf(i);l>-1&&s.splice(l,1)};setTimeout(o,Wje)}}function qje(n,e){n&Pi?(this.primaryTouch=e.changedPointers[0].identifier,bq.call(this,e)):n&(_r|Ki)&&bq.call(this,e)}function Hje(n){for(var e=n.srcEvent.clientX,r=n.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var s=this.lastTouches[i],o=Math.abs(e-s.x),a=Math.abs(r-s.y);if(o<=gq&&a<=gq)return!0}return!1}var Nie=function(){var n=function(e){ro(r,e);function r(s,o){var a;return a=e.call(this,s,o)||this,a.handler=function(l,c,u){var h=u.pointerType===cy,d=u.pointerType===k5;if(!(d&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)qje.call(Hv(Hv(a)),c,u);else if(d&&Hje.call(Hv(Hv(a)),u))return;a.callback(l,c,u)}},a.touch=new T5(a.manager,a.handler),a.mouse=new P5(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var i=r.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(ym);return n}();function Vje(n){var e,r=n.options.inputClass;return r?e=r:Sje?e=Rie:kje?e=T5:Cie?e=Nie:e=P5,new e(n,Rje)}function df(n,e,r){return Array.isArray(n)?(vl(n,r[e],r),!0):!1}var $x=1,Xs=2,Fp=4,Vc=8,xl=Vc,ub=16,aa=32,Yje=1;function Gje(){return Yje++}function Yv(n,e){var r=e.manager;return r?r.get(n):n}function yq(n){return n&ub?"cancel":n&Vc?"end":n&Fp?"move":n&Xs?"start":""}var fy=function(){function n(r){r===void 0&&(r={}),this.options=Oo({enable:!0},r),this.id=Gje(),this.manager=null,this.state=$x,this.simultaneous={},this.requireFail=[]}var e=n.prototype;return e.set=function(i){return Bd(this.options,i),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(i){if(df(i,"recognizeWith",this))return this;var s=this.simultaneous;return i=Yv(i,this),s[i.id]||(s[i.id]=i,i.recognizeWith(this)),this},e.dropRecognizeWith=function(i){return df(i,"dropRecognizeWith",this)?this:(i=Yv(i,this),delete this.simultaneous[i.id],this)},e.requireFailure=function(i){if(df(i,"requireFailure",this))return this;var s=this.requireFail;return i=Yv(i,this),Ud(s,i)===-1&&(s.push(i),i.requireFailure(this)),this},e.dropRequireFailure=function(i){if(df(i,"dropRequireFailure",this))return this;i=Yv(i,this);var s=Ud(this.requireFail,i);return s>-1&&this.requireFail.splice(s,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},e.emit=function(i){var s=this,o=this.state;function a(l){s.manager.emit(l,i)}o<Vc&&a(s.options.event+yq(o)),a(s.options.event),i.additionalEvent&&a(i.additionalEvent),o>=Vc&&a(s.options.event+yq(o))},e.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=aa},e.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(aa|$x)))return!1;i++}return!0},e.recognize=function(i){var s=Bd({},i);if(!tS(this.options.enable,[this,s])){this.reset(),this.state=aa;return}this.state&(xl|ub|aa)&&(this.state=$x),this.state=this.process(s),this.state&(Xs|Fp|Vc|ub)&&this.tryEmit(s)},e.process=function(i){},e.getTouchAction=function(){},e.reset=function(){},n}(),FA=function(n){ro(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Oo({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,s.pTime=!1,s.pCenter=!1,s._timer=null,s._input=null,s.count=0,s}var r=e.prototype;return r.getTouchAction=function(){return[jA]},r.process=function(s){var o=this,a=this.options,l=s.pointers.length===a.pointers,c=s.distance<a.threshold,u=s.deltaTime<a.time;if(this.reset(),s.eventType&Pi&&this.count===0)return this.failTimeout();if(c&&u&&l){if(s.eventType!==_r)return this.failTimeout();var h=this.pTime?s.timeStamp-this.pTime<a.interval:!0,d=!this.pCenter||o1(this.pCenter,s.center)<a.posThreshold;this.pTime=s.timeStamp,this.pCenter=s.center,!d||!h?this.count=1:this.count+=1,this._input=s;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){o.state=xl,o.tryEmit()},a.interval),Xs):xl}return aa},r.failTimeout=function(){var s=this;return this._timer=setTimeout(function(){s.state=aa},this.options.interval),aa},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===xl&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(fy),$p=function(n){ro(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Oo({pointers:1},i))||this}var r=e.prototype;return r.attrTest=function(s){var o=this.options.pointers;return o===0||s.pointers.length===o},r.process=function(s){var o=this.state,a=s.eventType,l=o&(Xs|Fp),c=this.attrTest(s);return l&&(a&Ki||!c)?o|ub:l||c?a&_r?o|Vc:o&Xs?o|Fp:Xs:aa},e}(fy);function jie(n){return n===Lp?"down":n===hy?"up":n===uy?"left":n===dy?"right":""}var M5=function(n){ro(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Oo({event:"pan",threshold:10,pointers:1,direction:Eie},i))||this,s.pX=null,s.pY=null,s}var r=e.prototype;return r.getTouchAction=function(){var s=this.options.direction,o=[];return s&pa&&o.push(ab),s&wd&&o.push(ob),o},r.directionTest=function(s){var o=this.options,a=!0,l=s.distance,c=s.direction,u=s.deltaX,h=s.deltaY;return c&o.direction||(o.direction&pa?(c=u===0?i1:u<0?uy:dy,a=u!==this.pX,l=Math.abs(s.deltaX)):(c=h===0?i1:h<0?hy:Lp,a=h!==this.pY,l=Math.abs(s.deltaY))),s.direction=c,a&&l>o.threshold&&c&o.direction},r.attrTest=function(s){return $p.prototype.attrTest.call(this,s)&&(this.state&Xs||!(this.state&Xs)&&this.directionTest(s))},r.emit=function(s){this.pX=s.deltaX,this.pY=s.deltaY;var o=jie(s.direction);o&&(s.additionalEvent=this.options.event+o),n.prototype.emit.call(this,s)},e}($p),Lie=function(n){ro(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Oo({event:"swipe",threshold:10,velocity:.3,direction:pa|wd,pointers:1},i))||this}var r=e.prototype;return r.getTouchAction=function(){return M5.prototype.getTouchAction.call(this)},r.attrTest=function(s){var o=this.options.direction,a;return o&(pa|wd)?a=s.overallVelocity:o&pa?a=s.overallVelocityX:o&wd&&(a=s.overallVelocityY),n.prototype.attrTest.call(this,s)&&o&s.offsetDirection&&s.distance>this.options.threshold&&s.maxPointers===this.options.pointers&&zd(a)>this.options.velocity&&s.eventType&_r},r.emit=function(s){var o=jie(s.offsetDirection);o&&this.manager.emit(this.options.event+o,s),this.manager.emit(this.options.event,s)},e}($p),Fie=function(n){ro(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Oo({event:"pinch",threshold:0,pointers:2},i))||this}var r=e.prototype;return r.getTouchAction=function(){return[xd]},r.attrTest=function(s){return n.prototype.attrTest.call(this,s)&&(Math.abs(s.scale-1)>this.options.threshold||this.state&Xs)},r.emit=function(s){if(s.scale!==1){var o=s.scale<1?"in":"out";s.additionalEvent=this.options.event+o}n.prototype.emit.call(this,s)},e}($p),$ie=function(n){ro(e,n);function e(i){return i===void 0&&(i={}),n.call(this,Oo({event:"rotate",threshold:0,pointers:2},i))||this}var r=e.prototype;return r.getTouchAction=function(){return[xd]},r.attrTest=function(s){return n.prototype.attrTest.call(this,s)&&(Math.abs(s.rotation)>this.options.threshold||this.state&Xs)},e}($p),Bie=function(n){ro(e,n);function e(i){var s;return i===void 0&&(i={}),s=n.call(this,Oo({event:"press",pointers:1,time:251,threshold:9},i))||this,s._timer=null,s._input=null,s}var r=e.prototype;return r.getTouchAction=function(){return[kie]},r.process=function(s){var o=this,a=this.options,l=s.pointers.length===a.pointers,c=s.distance<a.threshold,u=s.deltaTime>a.time;if(this._input=s,!c||!l||s.eventType&(_r|Ki)&&!u)this.reset();else if(s.eventType&Pi)this.reset(),this._timer=setTimeout(function(){o.state=xl,o.tryEmit()},a.time);else if(s.eventType&_r)return xl;return aa},r.reset=function(){clearTimeout(this._timer)},r.emit=function(s){this.state===xl&&(s&&s.eventType&_r?this.manager.emit(this.options.event+"up",s):(this._input.timeStamp=S5(),this.manager.emit(this.options.event,this._input)))},e}(fy),zie={domEvents:!1,touchAction:Sie,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},vq=[[$ie,{enable:!1}],[Fie,{enable:!1},["rotate"]],[Lie,{direction:pa}],[M5,{direction:pa},["swipe"]],[FA],[FA,{event:"doubletap",taps:2},["tap"]],[Bie]],Kje=1,xq=2;function wq(n,e){var r=n.element;if(r.style){var i;vl(n.options.cssProps,function(s,o){i=eS(r.style,o),e?(n.oldCssProps[i]=r.style[i],r.style[i]=s):r.style[i]=n.oldCssProps[i]||""}),e||(n.oldCssProps={})}}function Xje(n,e){var r=document.createEvent("Event");r.initEvent(n,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var _q=function(){function n(r,i){var s=this;this.options=Bd({},zie,i||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Vje(this),this.touchAction=new Pie(this,this.options.touchAction),wq(this,!0),vl(this.options.recognizers,function(o){var a=s.add(new o[0](o[1]));o[2]&&a.recognizeWith(o[2]),o[3]&&a.requireFailure(o[3])},this)}var e=n.prototype;return e.set=function(i){return Bd(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},e.stop=function(i){this.session.stopped=i?xq:Kje},e.recognize=function(i){var s=this.session;if(!s.stopped){this.touchAction.preventDefaults(i);var o,a=this.recognizers,l=s.curRecognizer;(!l||l&&l.state&xl)&&(s.curRecognizer=null,l=null);for(var c=0;c<a.length;)o=a[c],s.stopped!==xq&&(!l||o===l||o.canRecognizeWith(l))?o.recognize(i):o.reset(),!l&&o.state&(Xs|Fp|Vc)&&(s.curRecognizer=o,l=o),c++}},e.get=function(i){if(i instanceof fy)return i;for(var s=this.recognizers,o=0;o<s.length;o++)if(s[o].options.event===i)return s[o];return null},e.add=function(i){if(df(i,"add",this))return this;var s=this.get(i.options.event);return s&&this.remove(s),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},e.remove=function(i){if(df(i,"remove",this))return this;var s=this.get(i);if(i){var o=this.recognizers,a=Ud(o,s);a!==-1&&(o.splice(a,1),this.touchAction.update())}return this},e.on=function(i,s){if(i===void 0||s===void 0)return this;var o=this.handlers;return vl(lb(i),function(a){o[a]=o[a]||[],o[a].push(s)}),this},e.off=function(i,s){if(i===void 0)return this;var o=this.handlers;return vl(lb(i),function(a){s?o[a]&&o[a].splice(Ud(o[a],s),1):delete o[a]}),this},e.emit=function(i,s){this.options.domEvents&&Xje(i,s);var o=this.handlers[i]&&this.handlers[i].slice();if(!(!o||!o.length)){s.type=i,s.preventDefault=function(){s.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](s),a++}},e.destroy=function(){this.element&&wq(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},n}(),Qje={touchstart:Pi,touchmove:ih,touchend:_r,touchcancel:Ki},Jje="touchstart",Zje="touchstart touchmove touchend touchcancel",e4e=function(n){ro(e,n);function e(){var i,s=e.prototype;return s.evTarget=Jje,s.evWin=Zje,i=n.apply(this,arguments)||this,i.started=!1,i}var r=e.prototype;return r.handler=function(s){var o=Qje[s.type];if(o===Pi&&(this.started=!0),!!this.started){var a=t4e.call(this,s,o);o&(_r|Ki)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:cy,srcEvent:s})}},e}(ym);function t4e(n,e){var r=cb(n.touches),i=cb(n.changedTouches);return e&(_r|Ki)&&(r=E5(r.concat(i),"identifier",!0)),[r,i]}function Uie(n,e,r){var i="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var s=new Error("get-stack-trace"),o=s&&s.stack?s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,i,o),n.apply(this,arguments)}}var Wie=Uie(function(n,e,r){for(var i=Object.keys(e),s=0;s<i.length;)(!r||r&&n[i[s]]===void 0)&&(n[i[s]]=e[i[s]]),s++;return n},"extend","Use `assign`."),n4e=Uie(function(n,e){return Wie(n,e,!0)},"merge","Use `assign`.");function r4e(n,e,r){var i=e.prototype,s;s=n.prototype=Object.create(i),s.constructor=n,s._super=i,r&&Bd(s,r)}function Sq(n,e){return function(){return n.apply(e,arguments)}}var D5=function(){var n=function(r,i){return i===void 0&&(i={}),new _q(r,Oo({recognizers:vq.concat()},i))};return n.VERSION="2.0.17-rc",n.DIRECTION_ALL=Eie,n.DIRECTION_DOWN=Lp,n.DIRECTION_LEFT=uy,n.DIRECTION_RIGHT=dy,n.DIRECTION_UP=hy,n.DIRECTION_HORIZONTAL=pa,n.DIRECTION_VERTICAL=wd,n.DIRECTION_NONE=i1,n.DIRECTION_DOWN=Lp,n.INPUT_START=Pi,n.INPUT_MOVE=ih,n.INPUT_END=_r,n.INPUT_CANCEL=Ki,n.STATE_POSSIBLE=$x,n.STATE_BEGAN=Xs,n.STATE_CHANGED=Fp,n.STATE_ENDED=Vc,n.STATE_RECOGNIZED=xl,n.STATE_CANCELLED=ub,n.STATE_FAILED=aa,n.Manager=_q,n.Input=ym,n.TouchAction=Pie,n.TouchInput=T5,n.MouseInput=P5,n.PointerEventInput=Rie,n.TouchMouseInput=Nie,n.SingleTouchInput=e4e,n.Recognizer=fy,n.AttrRecognizer=$p,n.Tap=FA,n.Pan=M5,n.Swipe=Lie,n.Pinch=Fie,n.Rotate=$ie,n.Press=Bie,n.on=Jg,n.off=Zg,n.each=vl,n.merge=n4e,n.extend=Wie,n.bindFn=Sq,n.assign=Bd,n.inherit=r4e,n.bindFn=Sq,n.prefixed=eS,n.toArray=cb,n.inArray=Ud,n.uniqueArray=E5,n.splitStr=lb,n.boolOrFn=tS,n.hasParent=C5,n.addEventListeners=Jg,n.removeEventListeners=Zg,n.defaults=Bd({},zie,{preset:vq}),n}();D5.defaults;const O5=LNe("DELETE");function qie(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return I5({},n,...r)}function I5(){const n=a1(...arguments);return Vie(n),n}function a1(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return a1(I5(e[0],e[1]),...gm(e).call(e,2));const i=e[0],s=e[1];if(i instanceof Date&&s instanceof Date)return i.setTime(s.getTime()),i;for(const o of hie(s))Object.prototype.propertyIsEnumerable.call(s,o)&&(s[o]===O5?delete i[o]:i[o]!==null&&s[o]!==null&&typeof i[o]=="object"&&typeof s[o]=="object"&&!Vt(i[o])&&!Vt(s[o])?i[o]=a1(i[o],s[o]):i[o]=Hie(s[o]));return i}function Hie(n){return Vt(n)?mn(n).call(n,e=>Hie(e)):typeof n=="object"&&n!==null?n instanceof Date?new Date(n.getTime()):a1({},n):n}function Vie(n){for(const e of Pr(n))n[e]===O5?delete n[e]:typeof n[e]=="object"&&n[e]!==null&&Vie(n[e])}function i4e(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return s4e(e.length?e:[cs()])}function s4e(n){let[e,r,i]=o4e(n),s=1;const o=()=>{const a=2091639*e+s*23283064365386963e-26;return e=r,r=i,i=a-(s=a|0)};return o.uint32=()=>o()*4294967296,o.fract53=()=>o()+(o()*2097152|0)*11102230246251565e-32,o.algorithm="Alea",o.seed=n,o.version="0.9",o}function o4e(){const n=a4e();let e=n(" "),r=n(" "),i=n(" ");for(let s=0;s<arguments.length;s++)e-=n(s<0||arguments.length<=s?void 0:arguments[s]),e<0&&(e+=1),r-=n(s<0||arguments.length<=s?void 0:arguments[s]),r<0&&(r+=1),i-=n(s<0||arguments.length<=s?void 0:arguments[s]),i<0&&(i+=1);return[e,r,i]}function a4e(){let n=4022871197;return function(e){const r=e.toString();for(let i=0;i<r.length;i++){n+=r.charCodeAt(i);let s=.02519603282416938*n;n=s>>>0,s-=n,s*=n,n=s>>>0,s-=n,n+=s*4294967296}return(n>>>0)*23283064365386963e-26}}function l4e(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}const A5=typeof window<"u"?window.Hammer||D5:function(){return l4e()};function la(n){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:n,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=A5(this._dom.overlay);r.on("tap",Le(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];mt(i).call(i,s=>{r.on(s,o=>{o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=s=>{c4e(s.target,n)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=s=>{("key"in s?s.key==="Escape":s.keyCode===27)&&this.deactivate()}}_5(la.prototype);la.current=null;la.prototype.destroy=function(){this.deactivate();for(const r of j3e(n=_i(e=this._cleanupQueue).call(e,0)).call(n)){var n,e;r()}};la.prototype.activate=function(){la.current&&la.current.deactivate(),la.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};la.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};la.prototype._onTapOverlay=function(n){this.activate(),n.srcEvent.stopPropagation()};function c4e(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const u4e=/^\/?Date\((-?\d+)/i,d4e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,h4e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,f4e=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,p4e=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function e0(n){return n instanceof Number||typeof n=="number"}function Yie(n){if(n)for(;n.hasChildNodes()===!0;){const e=n.firstChild;e&&(Yie(e),n.removeChild(e))}}function ds(n){return n instanceof String||typeof n=="string"}function $A(n){return typeof n=="object"&&n!==null}function m4e(n){if(n instanceof Date)return!0;if(ds(n)){if(u4e.exec(n))return!0;if(!isNaN(Date.parse(n)))return!0}return!1}function Wd(n,e,r,i){let s=!1;i===!0&&(s=e[r]===null&&n[r]!==void 0),s?delete n[r]:n[r]=e[r]}function Gie(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const i in n)if(e[i]!==void 0)if(e[i]===null||typeof e[i]!="object")Wd(n,e,i,r);else{const s=n[i],o=e[i];$A(s)&&$A(o)&&Gie(s,o,r)}}const g4e=Ml;function b4e(n,e){if(!Vt(n))throw new Error("Array with property names expected as first argument");for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];for(const o of i)for(let a=0;a<n.length;a++){const l=n[a];o&&Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e}function y4e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Vt(r))throw new TypeError("Arrays are not supported by deepExtend");for(let s=0;s<n.length;s++){const o=n[s];if(Object.prototype.hasOwnProperty.call(r,o))if(r[o]&&r[o].constructor===Object)e[o]===void 0&&(e[o]={}),e[o].constructor===Object?db(e[o],r[o],!1,i):Wd(e,r,o,i);else{if(Vt(r[o]))throw new TypeError("Arrays are not supported by deepExtend");Wd(e,r,o,i)}}return e}function v4e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Vt(r))throw new TypeError("Arrays are not supported by deepExtend");for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&!jp(n).call(n,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?db(e[s],r[s]):Wd(e,r,s,i);else if(Vt(r[s])){e[s]=[];for(let o=0;o<r[s].length;o++)e[s].push(r[s][o])}else Wd(e,r,s,i);return e}function db(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)||r===!0)if(typeof e[o]=="object"&&e[o]!==null&&ZU(e[o])===Object.prototype)n[o]===void 0?n[o]=db({},e[o],r):typeof n[o]=="object"&&n[o]!==null&&ZU(n[o])===Object.prototype?db(n[o],e[o],r):Wd(n,e,o,i);else if(Vt(e[o])){var s;n[o]=gm(s=e[o]).call(s)}else Wd(n,e,o,i);return n}function x4e(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!=e[r])return!1;return!0}function Tg(n){const e=typeof n;return e==="object"?n===null?"null":n instanceof Boolean?"Boolean":n instanceof Number?"Number":n instanceof String?"String":Vt(n)?"Array":n instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function hb(n,e){return[...n,e]}function Kie(n){return gm(n).call(n)}function w4e(n){return n.getBoundingClientRect().left}function _4e(n){return n.getBoundingClientRect().right}function S4e(n){return n.getBoundingClientRect().top}function k4e(n,e){let r=n.className.split(" ");const i=e.split(" ");r=ur(r).call(r,Ot(i).call(i,function(s){return!jp(r).call(r,s)})),n.className=r.join(" ")}function C4e(n,e){let r=n.className.split(" ");const i=e.split(" ");r=Ot(r).call(r,function(s){return!jp(i).call(i,s)}),n.className=r.join(" ")}function E4e(n,e){if(Vt(n)){const r=n.length;for(let i=0;i<r;i++)e(n[i],i,n)}else for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(n[r],r,n)}const T4e=x5;function P4e(n,e,r){return n[e]!==r?(n[e]=r,!0):!1}function M4e(n){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,n()}))}}function D4e(n){n||(n=window.event),n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}function O4e(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,e=null;return n&&(n.target?e=n.target:n.srcElement&&(e=n.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function I4e(n,e){let r=n;for(;r;){if(r===e)return!0;if(r.parentNode)r=r.parentNode;else return!1}return!1}const A4e={asBoolean(n,e){return typeof n=="function"&&(n=n()),n!=null?n!=!1:e||null},asNumber(n,e){return typeof n=="function"&&(n=n()),n!=null?Number(n)||e||null:e||null},asString(n,e){return typeof n=="function"&&(n=n()),n!=null?String(n):e||null},asSize(n,e){return typeof n=="function"&&(n=n()),ds(n)?n:e0(n)?n+"px":e||null},asElement(n,e){return typeof n=="function"&&(n=n()),n||e||null}};function nS(n){let e;switch(n.length){case 3:case 4:return e=h4e.exec(n),e?{r:us(e[1]+e[1],16),g:us(e[2]+e[2],16),b:us(e[3]+e[3],16)}:null;case 6:case 7:return e=d4e.exec(n),e?{r:us(e[1],16),g:us(e[2],16),b:us(e[3],16)}:null;default:return null}}function R4e(n,e){if(jp(n).call(n,"rgba"))return n;if(jp(n).call(n,"rgb")){const r=n.substr(_n(n).call(n,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=nS(n);return r==null?n:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function R5(n,e,r){var i;return"#"+gm(i=((1<<24)+(n<<16)+(e<<8)+r).toString(16)).call(i,1)}function N4e(n,e){if(ds(n)){let i=n;if(j5(i)){var r;const s=mn(r=i.substr(4).substr(0,i.length-5).split(",")).call(r,function(o){return us(o)});i=R5(s[0],s[1],s[2])}if(N5(i)===!0){const s=Qie(i),o={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)},a={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8},l=BA(a.h,a.s,a.v),c=BA(o.h,o.s,o.v);return{background:i,border:l,highlight:{background:c,border:l},hover:{background:c,border:l}}}else return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}else return e?{background:n.background||e.background,border:n.border||e.border,highlight:ds(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||e.highlight.background,border:n.highlight&&n.highlight.border||e.highlight.border},hover:ds(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||e.hover.border,background:n.hover&&n.hover.background||e.hover.background}}:{background:n.background||void 0,border:n.border||void 0,highlight:ds(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||void 0,border:n.highlight&&n.highlight.border||void 0},hover:ds(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||void 0,background:n.hover&&n.hover.background||void 0}}}function hf(n,e,r){n=n/255,e=e/255,r=r/255;const i=Math.min(n,Math.min(e,r)),s=Math.max(n,Math.max(e,r));if(i===s)return{h:0,s:0,v:i};const o=n===i?e-r:r===i?n-e:r-n,l=60*((n===i?3:r===i?1:5)-o/(s-i))/360,c=(s-i)/s;return{h:l,s:c,v:s}}function Xie(n){const e=document.createElement("div"),r={};e.style.cssText=n;for(let i=0;i<e.style.length;++i)r[e.style[i]]=e.style.getPropertyValue(e.style[i]);return r}function j4e(n,e){const r=Xie(e);for(const[i,s]of H5e(r))n.style.setProperty(i,s)}function L4e(n,e){const r=Xie(e);for(const i of Pr(r))n.style.removeProperty(i)}function t0(n,e,r){let i,s,o;const a=Math.floor(n*6),l=n*6-a,c=r*(1-e),u=r*(1-l*e),h=r*(1-(1-l)*e);switch(a%6){case 0:i=r,s=h,o=c;break;case 1:i=u,s=r,o=c;break;case 2:i=c,s=r,o=h;break;case 3:i=c,s=u,o=r;break;case 4:i=h,s=c,o=r;break;case 5:i=r,s=c,o=u;break}return{r:Math.floor(i*255),g:Math.floor(s*255),b:Math.floor(o*255)}}function BA(n,e,r){const i=t0(n,e,r);return R5(i.r,i.g,i.b)}function Qie(n){const e=nS(n);if(!e)throw new TypeError("'".concat(n,"' is not a valid color."));return hf(e.r,e.g,e.b)}function N5(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)}function j5(n){return f4e.test(n)}function Jie(n){return p4e.test(n)}function F4e(n,e){if(e!==null&&typeof e=="object"){const r=ly(e);for(let i=0;i<n.length;i++)Object.prototype.hasOwnProperty.call(e,n[i])&&typeof e[n[i]]=="object"&&(r[n[i]]=L5(e[n[i]]));return r}else return null}function L5(n){if(n===null||typeof n!="object")return null;if(n instanceof Element)return n;const e=ly(n);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&typeof n[r]=="object"&&(e[r]=L5(n[r]));return e}function $4e(n,e){for(let r=0;r<n.length;r++){const i=n[r];let s;for(s=r;s>0&&e(i,n[s-1])<0;s--)n[s]=n[s-1];n[s]=i}return n}function B4e(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=function(m){return m!=null},o=function(m){return m!==null&&typeof m=="object"},a=function(m){for(const g in m)if(Object.prototype.hasOwnProperty.call(m,g))return!1;return!0};if(!o(n))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!s(r))throw new Error("Parameter option must have a value");if(!o(i))throw new Error("Parameter globalOptions must be an object");const l=function(m,g,b){o(m[b])||(m[b]={});const y=g[b],v=m[b];for(const w in y)Object.prototype.hasOwnProperty.call(y,w)&&(v[w]=y[w])},c=e[r],h=o(i)&&!a(i)?i[r]:void 0,d=h?h.enabled:void 0;if(c===void 0)return;if(typeof c=="boolean"){o(n[r])||(n[r]={}),n[r].enabled=c;return}if(c===null&&!o(n[r]))if(s(h))n[r]=ly(h);else return;if(!o(c))return;let f=!0;c.enabled!==void 0?f=c.enabled:d!==void 0&&(f=h.enabled),l(n,e,r),n[r].enabled=f}function z4e(n,e,r,i){let o=0,a=0,l=n.length-1;for(;a<=l&&o<1e4;){const c=Math.floor((a+l)/2),u=n[c],h=i===void 0?u[r]:u[r][i],d=e(h);if(d==0)return c;d==-1?a=c+1:l=c-1,o++}return-1}function U4e(n,e,r,i,s){let a=0,l=0,c=n.length-1,u,h,d,f;for(s=s??function(m,g){return m==g?0:m<g?-1:1};l<=c&&a<1e4;){if(f=Math.floor(.5*(c+l)),u=n[Math.max(0,f-1)][r],h=n[f][r],d=n[Math.min(n.length-1,f+1)][r],s(h,e)==0)return f;if(s(u,e)<0&&s(h,e)>0)return i=="before"?Math.max(0,f-1):f;if(s(h,e)<0&&s(d,e)>0)return i=="before"?f:Math.min(n.length-1,f+1);s(h,e)<0?l=f+1:c=f-1,a++}return-1}const W4e={linear(n){return n},easeInQuad(n){return n*n},easeOutQuad(n){return n*(2-n)},easeInOutQuad(n){return n<.5?2*n*n:-1+(4-2*n)*n},easeInCubic(n){return n*n*n},easeOutCubic(n){return--n*n*n+1},easeInOutCubic(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart(n){return n*n*n*n},easeOutQuart(n){return 1- --n*n*n*n},easeInOutQuart(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint(n){return n*n*n*n*n},easeOutQuint(n){return 1+--n*n*n*n*n},easeInOutQuint(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}};function q4e(){const n=document.createElement("p");n.style.width="100%",n.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(n),document.body.appendChild(e);const r=n.offsetWidth;e.style.overflow="scroll";let i=n.offsetWidth;return r==i&&(i=e.clientWidth),document.body.removeChild(e),r-i}function H4e(n,e){let r;Vt(e)||(e=[e]);for(const i of n)if(i){r=i[e[0]];for(let s=1;s<e.length;s++)r&&(r=r[e[s]]);if(typeof r<"u")break}return r}const V4e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let Zie=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return V4e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;const s=this._isColorString(e);if(s!==void 0&&(e=s),ds(e)===!0){if(j5(e)===!0){const o=e.substr(4).substr(0,e.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(Jie(e)===!0){const o=e.substr(5).substr(0,e.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(N5(e)===!0){const o=nS(e);i={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const o=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:o}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+$i(e));this._setColor(i,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Ml({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ci(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Ml({},e)),this.color=e;const i=hf(e.r,e.g,e.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=hf(this.color.r,this.color.g,this.color.b);r.v=e/100;const i=t0(r.h,r.s,r.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=hf(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-r.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),xie(i).call(i),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=Le(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=Le(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=Le(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=Le(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new A5(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,i);let s,o,a,l;this.centerCoordinates={x:r*.5,y:i*.5},this.r=.49*r;const c=2*Math.PI/360,u=1/360,h=1/this.r;let d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(c*a),o=this.centerCoordinates.y+l*Math.cos(c*a),d=t0(a*u,l*h,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(s-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,i)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-r.left,s=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,c=s-o,u=Math.atan2(l,c),h=.98*Math.min(Math.sqrt(l*l+c*c),a),d=Math.cos(u)*h+o,f=Math.sin(u)*h+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let m=u/(2*Math.PI);m=m<0?m+1:m;const g=h/this.r,b=hf(this.color.r,this.color.g,this.color.b);b.h=m,b.s=g;const y=t0(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function zA(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const i=document.createElement(e[0]);return i.appendChild(zA(...gm(e).call(e,1))),i}}let Y4e=class{constructor(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Ml(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Zie(s),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(Vt(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Ot(e)!==void 0&&(this.options.filter=Ot(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Ot(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Ot(this.options);let r=0,i=!1;for(const s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(e===!0||_n(e).call(e,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let i=0;i<e.length;i++)if(r[e[i]]!==void 0)r=r[e[i]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const o=document.createElement("div");o.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return mt(i).call(i,a=>{o.appendChild(a)}),this.domElements.push(o),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const s=document.createElement("div");if(s.className="vis-configuration vis-config-label vis-config-s"+r.length,i===!0){for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(zA("i","b",e))}else s.innerText=e+":";return s}_makeDropdown(e,r,i){const s=document.createElement("select");s.className="vis-configuration vis-config-select";let o=0;r!==void 0&&_n(e).call(e,r)!==-1&&(o=_n(e).call(e,r));for(let c=0;c<e.length;c++){const u=document.createElement("option");u.value=e[c],c===o&&(u.selected="selected"),u.innerText=e[c],s.appendChild(u)}const a=this;s.onchange=function(){a._update(this.value,i)};const l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,s)}_makeRange(e,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=a}catch{}c.step=l;let u="",h=0;r!==void 0?(r<0&&r*1.2<o?(c.min=Math.ceil(r*1.2),h=c.min,u="range increased"):r/1.2<o&&(c.min=Math.ceil(r/1.2),h=c.min,u="range increased"),r*1.2>a&&a!==1&&(c.max=Math.ceil(r*1.2),h=c.max,u="range increased"),c.value=r):c.value=s;const d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=c.value;const f=this;c.onchange=function(){d.value=this.value,f._update(Number(this.value),i)},c.oninput=function(){d.value=this.value};const m=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,m,c,d);u!==""&&this.popupHistory[g]!==h&&(this.popupHistory[g]=h,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerText=e,i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ci(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ci(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,i){const s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=e,r!==void 0&&(s.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:i,value:r}):this.changedOptions.push({path:i,value:r})));const o=this;s.onchange=function(){o._update(this.checked,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeTextInput(e,r,i){const s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=r,r!==e&&this.changedOptions.push({path:i,value:r});const o=this;s.onchange=function(){o._update(this.value,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeColorField(e,r,i){const s=e[1],o=document.createElement("div");r=r===void 0?s:r,r!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=r):o.className="vis-configuration vis-config-colorBlock none",r=r===void 0?s:r,o.onclick=()=>{this._showColorPicker(r,o,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,o)}_showColorPicker(e,r,i){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(s=>{const o="rgba("+s.r+","+s.g+","+s.b+","+s.a+")";r.style.backgroundColor=o,this._update(o,i)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,i)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1;const o=Ot(this.options);let a=!1;for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){s=!0;const c=e[l],u=hb(r,l);if(typeof o=="function"&&(s=o(l,r),s===!1&&!Vt(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,s=this._handleObject(c,u,!0),this.allowCreation=i===!1)),s!==!1){a=!0;const h=this._getValue(u);if(Vt(c))this._handleArray(c,h,u);else if(typeof c=="string")this._makeTextInput(c,h,u);else if(typeof c=="boolean")this._makeCheckbox(c,h,u);else if(c instanceof Object){if(!this.hideOption(r,l,this.moduleOptions))if(c.enabled!==void 0){const d=hb(u,"enabled"),f=this._getValue(d);if(f===!0){const m=this._makeLabel(l,u,!0);this._makeItem(u,m),a=this._handleObject(c,u)||a}else this._makeCheckbox(c,f,u)}else{const d=this._makeLabel(l,u,!0);this._makeItem(u,d),a=this._handleObject(c,u)||a}}else console.error("dont know how to handle",c,l,u)}}return a}_handleArray(e,r,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,i),e[1]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:Number(r)}))}_update(e,r){const i=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<r.length;o++)r[o]!=="global"&&(s[r[o]]===void 0&&(s[r[o]]={}),o!==r.length-1?s=s[r[o]]:s[r[o]]=e);return i}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(zA("pre","const options = "+$i(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},G4e=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=us(e),this.y=us(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth;let a=0,l=0;if(this.overflowMethod=="flip"){let c=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+i>o-this.padding&&(c=!0),c?a=this.x-i:a=this.x,u?l=this.y-r:l=this.y}else l=this.y-r,l+r+this.padding>s&&(l=s-r-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Zm=!1,kq;const UA="background: #FFeeee; color: #dd0000";let K4e=class er{static validate(e,r,i){Zm=!1,kq=r;let s=r;return i!==void 0&&(s=r[i]),er.parse(e,s,[]),Zm}static parse(e,r,i){for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&er.check(s,e,r,i)}static check(e,r,i,s){if(i[e]===void 0&&i.__any__===void 0){er.getSuggestion(e,i,s);return}let o=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(o="__any__",a=er.getType(r[e])==="object");let l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),er.checkFields(e,r,i,o,l,s)}static checkFields(e,r,i,s,o,a){const l=function(h){console.error("%c"+h+er.printLocation(a,e),UA)},c=er.getType(r[e]),u=o[c];u!==void 0?er.getType(u)==="array"&&_n(u).call(u,r[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+er.print(u)+' not "'+r[e]+'". '),Zm=!0):c==="object"&&s!=="__any__"&&(a=hb(a,e),er.parse(r[e],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+er.print(Pr(o))+". Received ["+c+'] "'+r[e]+'"'),Zm=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Vt(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,i){const s=er.findInOptions(e,r,i,!1),o=er.findInOptions(e,kq,[],!0),a=8,l=4;let c;s.indexMatch!==void 0?c=" in "+er.printLocation(s.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?c=" in "+er.printLocation(s.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+er.printLocation(o.path,o.closestMatch,""):s.distance<=a?c='. Did you mean "'+s.closestMatch+'"?'+er.printLocation(s.path,e):c=". Did you mean one of these: "+er.print(Pr(r))+er.printLocation(i,e),console.error('%cUnknown option detected: "'+e+'"'+c,UA),Zm=!0}static findInOptions(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[];const c=e.toLowerCase();let u;for(const d in r){let f;if(r[d].__type__!==void 0&&s===!0){const m=er.findInOptions(e,r[d],hb(i,d));o>m.distance&&(a=m.closestMatch,l=m.path,o=m.distance,u=m.indexMatch)}else{var h;_n(h=d.toLowerCase()).call(h,c)!==-1&&(u=d),f=er.levenshteinDistance(e,d),o>f&&(a=d,l=Kie(i),o=f)}}return{closestMatch:a,path:l,distance:o,indexMatch:u}}static printLocation(e,r){let s=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)s+="  ";s+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)s+="  ";s+=r+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)s+="  ";s+=`}
`}return s+`

`}static print(e){return $i(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const i=[];let s;for(s=0;s<=r.length;s++)i[s]=[s];let o;for(o=0;o<=e.length;o++)i[0][o]=o;for(s=1;s<=r.length;s++)for(o=1;o<=e.length;o++)r.charAt(s-1)==e.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[r.length][e.length]}};const X4e=la,Q4e=Zie,J4e=Y4e,Z4e=A5,eLe=G4e,tLe=UA,nLe=K4e;var rLe=Object.freeze({__proto__:null,Activator:X4e,Alea:i4e,ColorPicker:Q4e,Configurator:J4e,DELETE:O5,HSVToHex:BA,HSVToRGB:t0,Hammer:Z4e,Popup:eLe,RGBToHSV:hf,RGBToHex:R5,VALIDATOR_PRINT_STYLE:tLe,Validator:nLe,addClassName:k4e,addCssText:j4e,binarySearchCustom:z4e,binarySearchValue:U4e,bridgeObject:L5,copyAndExtendArray:hb,copyArray:Kie,deepExtend:db,deepObjectAssign:I5,easingFunctions:W4e,equalArray:x4e,extend:g4e,fillIfDefined:Gie,forEach:E4e,getAbsoluteLeft:w4e,getAbsoluteRight:_4e,getAbsoluteTop:S4e,getScrollBarWidth:q4e,getTarget:O4e,getType:Tg,hasParent:I4e,hexToHSV:Qie,hexToRGB:nS,insertSort:$4e,isDate:m4e,isNumber:e0,isObject:$A,isString:ds,isValidHex:N5,isValidRGB:j5,isValidRGBA:Jie,mergeOptions:B4e,option:A4e,overrideOpacity:R4e,parseColor:N4e,preventDefault:D4e,pureDeepObjectAssign:qie,recursiveDOMDelete:Yie,removeClassName:C4e,removeCssText:L4e,selectiveBridgeObject:F4e,selectiveDeepExtend:y4e,selectiveExtend:b4e,selectiveNotDeepExtend:v4e,throttle:M4e,toArray:T4e,topMost:H4e,updateProperty:P4e});function pc(n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e].redundant=n[e].used,n[e].used=[])}function Ls(n){for(var e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const i=n[e];for(var r=0;r<i.redundant.length;r++)i.redundant[r].parentNode.removeChild(i.redundant[r]);i.redundant=[]}}function iLe(n){pc(n),Ls(n),pc(n)}function To(n,e,r){var i;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(i=e[n].redundant[0],e[n].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",n),r.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",n),e[n]={used:[],redundant:[]},r.appendChild(i)),e[n].used.push(i),i}function SP(n,e,r,i){var s;return Object.prototype.hasOwnProperty.call(e,n)?e[n].redundant.length>0?(s=e[n].redundant[0],e[n].redundant.shift()):(s=document.createElement(n),i!==void 0?r.insertBefore(s,i):r.appendChild(s)):(s=document.createElement(n),e[n]={used:[],redundant:[]},i!==void 0?r.insertBefore(s,i):r.appendChild(s)),e[n].used.push(s),s}function Bp(n,e,r,i,s,o){var a;if(r.style=="circle"?(a=To("circle",i,s),a.setAttributeNS(null,"cx",n),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*r.size)):(a=To("rect",i,s),a.setAttributeNS(null,"x",n-.5*r.size),a.setAttributeNS(null,"y",e-.5*r.size),a.setAttributeNS(null,"width",r.size),a.setAttributeNS(null,"height",r.size)),r.styles!==void 0&&a.setAttributeNS(null,"style",r.styles),a.setAttributeNS(null,"class",r.className+" vis-point"),o){var l=To("text",i,s);o.xOffset&&(n=n+o.xOffset),o.yOffset&&(e=e+o.yOffset),o.content&&(l.textContent=o.content),o.className&&l.setAttributeNS(null,"class",o.className+" vis-label"),l.setAttributeNS(null,"x",n),l.setAttributeNS(null,"y",e)}return a}function WA(n,e,r,i,s,o,a,l){if(i!=0){i<0&&(i*=-1,e-=i);var c=To("rect",o,a);c.setAttributeNS(null,"x",n-.5*r),c.setAttributeNS(null,"y",e),c.setAttributeNS(null,"width",r),c.setAttributeNS(null,"height",i),c.setAttributeNS(null,"class",s),l&&c.setAttributeNS(null,"style",l)}}function sLe(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}var kP,Cq;function oLe(){if(Cq)return kP;Cq=1,rie();var n=In();return kP=n.Object.getOwnPropertySymbols,kP}var CP,Eq;function aLe(){if(Eq)return CP;Eq=1;var n=oLe();return CP=n,CP}var EP,Tq;function lLe(){return Tq||(Tq=1,EP=aLe()),EP}var cLe=lLe(),l1=Pt(cLe),TP={exports:{}},Pq={},Mq;function uLe(){if(Mq)return Pq;Mq=1;var n=Tt(),e=nn(),r=No(),i=H_().f,s=br(),o=!s||e(function(){i(1)});return n({target:"Object",stat:!0,forced:o,sham:!s},{getOwnPropertyDescriptor:function(l,c){return i(r(l),c)}}),Pq}var Dq;function dLe(){if(Dq)return TP.exports;Dq=1,uLe();var n=In(),e=n.Object,r=TP.exports=function(s,o){return e.getOwnPropertyDescriptor(s,o)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),TP.exports}var PP,Oq;function hLe(){if(Oq)return PP;Oq=1;var n=dLe();return PP=n,PP}var MP,Iq;function fLe(){return Iq||(Iq=1,MP=hLe()),MP}var pLe=fLe(),rS=Pt(pLe),Aq={},Rq;function mLe(){if(Rq)return Aq;Rq=1;var n=Tt(),e=br(),r=die(),i=No(),s=H_(),o=V_();return n({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(l){for(var c=i(l),u=s.f,h=r(c),d={},f=0,m,g;h.length>f;)g=u(c,m=h[f++]),g!==void 0&&o(d,m,g);return d}}),Aq}var DP,Nq;function gLe(){if(Nq)return DP;Nq=1,mLe();var n=In();return DP=n.Object.getOwnPropertyDescriptors,DP}var OP,jq;function bLe(){if(jq)return OP;jq=1;var n=gLe();return OP=n,OP}var IP,Lq;function yLe(){return Lq||(Lq=1,IP=bLe()),IP}var vLe=yLe(),c1=Pt(vLe),AP={exports:{}},Fq={},$q;function xLe(){if($q)return Fq;$q=1;var n=Tt(),e=br(),r=g5().f;return n({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),Fq}var Bq;function wLe(){if(Bq)return AP.exports;Bq=1,xLe();var n=In(),e=n.Object,r=AP.exports=function(s,o){return e.defineProperties(s,o)};return e.defineProperties.sham&&(r.sham=!0),AP.exports}var RP,zq;function _Le(){if(zq)return RP;zq=1;var n=wLe();return RP=n,RP}var NP,Uq;function SLe(){return Uq||(Uq=1,NP=_Le()),NP}var kLe=SLe(),ese=Pt(kLe),jP={exports:{}},Wq={},qq;function CLe(){if(qq)return Wq;qq=1;var n=Tt(),e=br(),r=to().f;return n({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),Wq}var Hq;function ELe(){if(Hq)return jP.exports;Hq=1,CLe();var n=In(),e=n.Object,r=jP.exports=function(s,o,a){return e.defineProperty(s,o,a)};return e.defineProperty.sham&&(r.sham=!0),jP.exports}var LP,Vq;function tse(){if(Vq)return LP;Vq=1;var n=ELe();return LP=n,LP}var FP,Yq;function TLe(){if(Yq)return FP;Yq=1;var n=tse();return FP=n,FP}var $P,Gq;function PLe(){if(Gq)return $P;Gq=1;var n=TLe();return $P=n,$P}var BP,Kq;function MLe(){return Kq||(Kq=1,BP=PLe()),BP}var DLe=MLe(),OLe=Pt(DLe),Xq={},Qq;function ILe(){if(Qq)return Xq;Qq=1;var n=Sr(),e=to().f,r=n("metadata"),i=Function.prototype;return i[r]===void 0&&e(i,r,{value:null}),Xq}var Jq={},Zq;function ALe(){return Zq||(Zq=1,iie()),Jq}var eH={},tH;function RLe(){return tH||(tH=1,sie()),eH}var nH={},rH;function NLe(){if(rH)return nH;rH=1;var n=Zn();return n("metadata"),nH}var zP,iH;function jLe(){if(iH)return zP;iH=1;var n=uie();return ILe(),ALe(),RLe(),NLe(),zP=n,zP}var sH={},UP,oH;function nse(){if(oH)return UP;oH=1;var n=ks(),e=an(),r=n("Symbol"),i=r.keyFor,s=e(r.prototype.valueOf);return UP=r.isRegisteredSymbol||function(a){try{return i(s(a))!==void 0}catch{return!1}},UP}var aH;function LLe(){if(aH)return sH;aH=1;var n=Tt(),e=nse();return n({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),sH}var lH={},WP,cH;function rse(){if(cH)return WP;cH=1;for(var n=dm(),e=ks(),r=an(),i=Zb(),s=Sr(),o=e("Symbol"),a=o.isWellKnownSymbol,l=e("Object","getOwnPropertyNames"),c=r(o.prototype.valueOf),u=n("wks"),h=0,d=l(o),f=d.length;h<f;h++)try{var m=d[h];i(o[m])&&s(m)}catch{}return WP=function(b){if(a&&a(b))return!0;try{for(var y=c(b),v=0,w=l(u),k=w.length;v<k;v++)if(u[w[v]]==y)return!0}catch{}return!1},WP}var uH;function FLe(){if(uH)return lH;uH=1;var n=Tt(),e=rse();return n({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),lH}var dH={},hH;function $Le(){if(hH)return dH;hH=1;var n=Zn();return n("customMatcher"),dH}var fH={},pH;function BLe(){if(pH)return fH;pH=1;var n=Zn();return n("observable"),fH}var mH={},gH;function zLe(){if(gH)return mH;gH=1;var n=Tt(),e=nse();return n({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),mH}var bH={},yH;function ULe(){if(yH)return bH;yH=1;var n=Tt(),e=rse();return n({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),bH}var vH={},xH;function WLe(){if(xH)return vH;xH=1;var n=Zn();return n("matcher"),vH}var wH={},_H;function qLe(){if(_H)return wH;_H=1;var n=Zn();return n("metadataKey"),wH}var SH={},kH;function HLe(){if(kH)return SH;kH=1;var n=Zn();return n("patternMatch"),SH}var CH={},EH;function VLe(){if(EH)return CH;EH=1;var n=Zn();return n("replaceAll"),CH}var qP,TH;function YLe(){if(TH)return qP;TH=1;var n=jLe();return LLe(),FLe(),$Le(),BLe(),zLe(),ULe(),WLe(),qLe(),HLe(),VLe(),qP=n,qP}var HP,PH;function GLe(){return PH||(PH=1,HP=YLe()),HP}var KLe=GLe(),Gv=Pt(KLe),MH={},VP,DH;function XLe(){if(DH)return VP;DH=1;var n=an(),e=fm(),r=no(),i=Al(),s=n("".charAt),o=n("".charCodeAt),a=n("".slice),l=function(c){return function(u,h){var d=r(i(u)),f=e(h),m=d.length,g,b;return f<0||f>=m?c?"":void 0:(g=o(d,f),g<55296||g>56319||f+1===m||(b=o(d,f+1))<56320||b>57343?c?s(d,f):g:c?a(d,f,f+2):(g-55296<<10)+(b-56320)+65536)}};return VP={codeAt:l(!1),charAt:l(!0)},VP}var OH;function iS(){if(OH)return MH;OH=1;var n=XLe().charAt,e=no(),r=oy(),i=y5(),s=v5(),o="String Iterator",a=r.set,l=r.getterFor(o);return i(String,"String",function(c){a(this,{type:o,string:e(c),index:0})},function(){var u=l(this),h=u.string,d=u.index,f;return d>=h.length?s(void 0,!0):(f=n(h,d),u.index+=f.length,s(f,!1))}),MH}var YP,IH;function QLe(){if(IH)return YP;IH=1,cu(),iS(),oie();var n=J_();return YP=n.f("iterator"),YP}var GP,AH;function ise(){if(AH)return GP;AH=1;var n=QLe();return uu(),GP=n,GP}var KP,RH;function JLe(){if(RH)return KP;RH=1;var n=ise();return KP=n,KP}var XP,NH;function ZLe(){if(NH)return XP;NH=1;var n=JLe();return XP=n,XP}var QP,jH;function eFe(){return jH||(jH=1,QP=ZLe()),QP}var tFe=eFe(),nFe=Pt(tFe);function fb(n){"@babel/helpers - typeof";return fb=typeof Gv=="function"&&typeof nFe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Gv=="function"&&e.constructor===Gv&&e!==Gv.prototype?"symbol":typeof e},fb(n)}var JP,LH;function rFe(){if(LH)return JP;LH=1,aie();var n=J_();return JP=n.f("toPrimitive"),JP}var ZP,FH;function iFe(){if(FH)return ZP;FH=1;var n=rFe();return ZP=n,ZP}var eM,$H;function sFe(){if($H)return eM;$H=1;var n=iFe();return eM=n,eM}var tM,BH;function oFe(){if(BH)return tM;BH=1;var n=sFe();return tM=n,tM}var nM,zH;function aFe(){return zH||(zH=1,nM=oFe()),nM}var lFe=aFe(),cFe=Pt(lFe);function uFe(n,e){if(fb(n)!="object"||!n)return n;var r=n[cFe];if(r!==void 0){var i=r.call(n,e);if(fb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dFe(n){var e=uFe(n,"string");return fb(e)=="symbol"?e:e+""}function Sn(n,e,r){return(e=dFe(e))in n?OLe(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var UH={},rM,WH;function hFe(){if(WH)return rM;WH=1;var n=Sa(),e=Zi(),r=W_(),i=jo(),s=TypeError,o="Reduce of empty array with no initial value",a=function(l){return function(c,u,h,d){var f=e(c),m=r(f),g=i(f);if(n(u),g===0&&h<2)throw new s(o);var b=l?g-1:0,y=l?-1:1;if(h<2)for(;;){if(b in m){d=m[b],b+=y;break}if(b+=y,l?b<0:g<=b)throw new s(o)}for(;l?b>=0:g>b;b+=y)b in m&&(d=u(d,m[b],b,f));return d}};return rM={left:a(!1),right:a(!0)},rM}var iM,qH;function fFe(){if(qH)return iM;qH=1;var n=bie();return iM=n==="NODE",iM}var HH;function pFe(){if(HH)return UH;HH=1;var n=Tt(),e=hFe().left,r=bm(),i=Jb(),s=fFe(),o=!s&&i>79&&i<83,a=o||!r("reduce");return n({target:"Array",proto:!0,forced:a},{reduce:function(c){var u=arguments.length;return e(this,c,u,u>1?arguments[1]:void 0)}}),UH}var sM,VH;function mFe(){if(VH)return sM;VH=1,pFe();var n=or();return sM=n("Array","reduce"),sM}var oM,YH;function gFe(){if(YH)return oM;YH=1;var n=Fn(),e=mFe(),r=Array.prototype;return oM=function(i){var s=i.reduce;return i===r||n(r,i)&&s===r.reduce?e:s},oM}var aM,GH;function bFe(){if(GH)return aM;GH=1;var n=gFe();return aM=n,aM}var lM,KH;function yFe(){return KH||(KH=1,lM=bFe()),lM}var vFe=yFe(),sS=Pt(vFe),XH={},cM,QH;function xFe(){if(QH)return cM;QH=1;var n=ou(),e=jo(),r=h5(),i=ey(),s=function(o,a,l,c,u,h,d,f){for(var m=u,g=0,b=d?i(d,f):!1,y,v;g<c;)g in l&&(y=b?b(l[g],g,a):l[g],h>0&&n(y)?(v=e(y),m=s(o,a,y,v,m,h-1)-1):(r(m+1),o[m]=y),m++),g++;return m};return cM=s,cM}var JH;function wFe(){if(JH)return XH;JH=1;var n=Tt(),e=xFe(),r=Sa(),i=Zi(),s=jo(),o=Y_();return n({target:"Array",proto:!0},{flatMap:function(l){var c=i(this),u=s(c),h;return r(l),h=o(c,0),h.length=e(h,c,c,u,0,1,l,arguments.length>1?arguments[1]:void 0),h}}),XH}var ZH={},eV;function _Fe(){if(eV)return ZH;eV=1;var n=ay();return n("flatMap"),ZH}var uM,tV;function SFe(){if(tV)return uM;tV=1,wFe(),_Fe();var n=or();return uM=n("Array","flatMap"),uM}var dM,nV;function kFe(){if(nV)return dM;nV=1;var n=Fn(),e=SFe(),r=Array.prototype;return dM=function(i){var s=i.flatMap;return i===r||n(r,i)&&s===r.flatMap?e:s},dM}var hM,rV;function CFe(){if(rV)return hM;rV=1;var n=kFe();return hM=n,hM}var fM,iV;function EFe(){return iV||(iV=1,fM=CFe()),fM}var TFe=EFe(),PFe=Pt(TFe),pM,sV;function MFe(){return sV||(sV=1,pM=ise()),pM}var DFe=MFe(),td=Pt(DFe),oV={},aV={},mM={exports:{}},gM,lV;function OFe(){if(lV)return gM;lV=1;var n=nn();return gM=n(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),gM}var bM,cV;function IFe(){if(cV)return bM;cV=1;var n=nn(),e=fi(),r=_a(),i=OFe(),s=Object.isExtensible,o=n(function(){});return bM=o||i?function(l){return!e(l)||i&&r(l)==="ArrayBuffer"?!1:s?s(l):!0}:s,bM}var yM,uV;function AFe(){if(uV)return yM;uV=1;var n=nn();return yM=!n(function(){return Object.isExtensible(Object.preventExtensions({}))}),yM}var dV;function sse(){if(dV)return mM.exports;dV=1;var n=Tt(),e=an(),r=ny(),i=fi(),s=$r(),o=to().f,a=X_(),l=Zre(),c=IFe(),u=q_(),h=AFe(),d=!1,f=u("meta"),m=0,g=function(S){o(S,f,{value:{objectID:"O"+m++,weakData:{}}})},b=function(S,_){if(!i(S))return typeof S=="symbol"?S:(typeof S=="string"?"S":"P")+S;if(!s(S,f)){if(!c(S))return"F";if(!_)return"E";g(S)}return S[f].objectID},y=function(S,_){if(!s(S,f)){if(!c(S))return!0;if(!_)return!1;g(S)}return S[f].weakData},v=function(S){return h&&d&&c(S)&&!s(S,f)&&g(S),S},w=function(){k.enable=function(){},d=!0;var S=a.f,_=e([].splice),C={};C[f]=1,S(C).length&&(a.f=function(P){for(var T=S(P),O=0,D=T.length;O<D;O++)if(T[O]===f){_(T,O,1);break}return T},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},k=mM.exports={enable:w,fastKey:b,getWeakData:y,onFreeze:v};return r[f]=!0,mM.exports}var vM,hV;function RFe(){if(hV)return vM;hV=1;var n=Sr(),e=mm(),r=n("iterator"),i=Array.prototype;return vM=function(s){return s!==void 0&&(e.Array===s||i[r]===s)},vM}var xM,fV;function ose(){if(fV)return xM;fV=1;var n=au(),e=c5(),r=Qb(),i=mm(),s=Sr(),o=s("iterator");return xM=function(a){if(!r(a))return e(a,o)||e(a,"@@iterator")||i[n(a)]},xM}var wM,pV;function ase(){if(pV)return wM;pV=1;var n=Ji(),e=Sa(),r=Rl(),i=cm(),s=ose(),o=TypeError;return wM=function(a,l){var c=arguments.length<2?s(a):l;if(e(c))return r(n(c,a));throw new o(i(a)+" is not iterable")},wM}var _M,mV;function F5(){if(mV)return _M;mV=1;var n=Ji(),e=Rl(),r=c5();return _M=function(i,s,o){var a,l;e(i);try{if(a=r(i,"return"),!a){if(s==="throw")throw o;return o}a=n(a,i)}catch(c){l=!0,a=c}if(s==="throw")throw o;if(l)throw a;return e(a),o},_M}var SM,gV;function $5(){if(gV)return SM;gV=1;var n=ey(),e=Ji(),r=Rl(),i=cm(),s=RFe(),o=jo(),a=Fn(),l=ase(),c=ose(),u=F5(),h=TypeError,d=function(m,g){this.stopped=m,this.result=g},f=d.prototype;return SM=function(m,g,b){var y=b&&b.that,v=!!(b&&b.AS_ENTRIES),w=!!(b&&b.IS_RECORD),k=!!(b&&b.IS_ITERATOR),S=!!(b&&b.INTERRUPTED),_=n(g,y),C,P,T,O,D,I,U,B=function(j){return C&&u(C,"normal"),new d(!0,j)},z=function(j){return v?(r(j),S?_(j[0],j[1],B):_(j[0],j[1])):S?_(j,B):_(j)};if(w)C=m.iterator;else if(k)C=m;else{if(P=c(m),!P)throw new h(i(m)+" is not iterable");if(s(P)){for(T=0,O=o(m);O>T;T++)if(D=z(m[T]),D&&a(f,D))return D;return new d(!1)}C=l(m,P)}for(I=w?m.next:C.next;!(U=e(I,C)).done;){try{D=z(U.value)}catch(j){u(C,"throw",j)}if(typeof D=="object"&&D&&a(f,D))return D}return new d(!1)},SM}var kM,bV;function lse(){if(bV)return kM;bV=1;var n=Fn(),e=TypeError;return kM=function(r,i){if(n(i,r))return r;throw new e("Incorrect invocation")},kM}var CM,yV;function cse(){if(yV)return CM;yV=1;var n=Tt(),e=sr(),r=sse(),i=nn(),s=hm(),o=$5(),a=lse(),l=Fr(),c=fi(),u=Qb(),h=rh(),d=to().f,f=lu().forEach,m=br(),g=oy(),b=g.set,y=g.getterFor;return CM=function(v,w,k){var S=v.indexOf("Map")!==-1,_=v.indexOf("Weak")!==-1,C=S?"set":"add",P=e[v],T=P&&P.prototype,O={},D;if(!m||!l(P)||!(_||T.forEach&&!i(function(){new P().entries().next()})))D=k.getConstructor(w,v,S,C),r.enable();else{D=w(function(B,z){b(a(B,I),{type:v,collection:new P}),u(z)||o(z,B[C],{that:B,AS_ENTRIES:S})});var I=D.prototype,U=y(v);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(B){var z=B==="add"||B==="set";B in T&&!(_&&B==="clear")&&s(I,B,function(j,F){var N=U(this).collection;if(!z&&_&&!c(j))return B==="get"?void 0:!1;var R=N[B](j===0?0:j,F);return z?this:R})}),_||d(I,"size",{configurable:!0,get:function(){return U(this).collection.size}})}return h(D,v,!1,!0),O[v]=D,n({global:!0,forced:!0},O),_||k.setStrong(D,v,S),D},CM}var EM,vV;function NFe(){if(vV)return EM;vV=1;var n=sy();return EM=function(e,r,i){for(var s in r)i&&i.unsafe&&e[s]?e[s]=r[s]:n(e,s,r[s],i);return e},EM}var TM,xV;function jFe(){if(xV)return TM;xV=1;var n=ks(),e=b5(),r=Sr(),i=br(),s=r("species");return TM=function(o){var a=n(o);i&&a&&!a[s]&&e(a,s,{configurable:!0,get:function(){return this}})},TM}var PM,wV;function use(){if(wV)return PM;wV=1;var n=iy(),e=b5(),r=NFe(),i=ey(),s=lse(),o=Qb(),a=$5(),l=y5(),c=v5(),u=jFe(),h=br(),d=sse().fastKey,f=oy(),m=f.set,g=f.getterFor;return PM={getConstructor:function(b,y,v,w){var k=b(function(T,O){s(T,S),m(T,{type:y,index:n(null),first:null,last:null,size:0}),h||(T.size=0),o(O)||a(O,T[w],{that:T,AS_ENTRIES:v})}),S=k.prototype,_=g(y),C=function(T,O,D){var I=_(T),U=P(T,O),B,z;return U?U.value=D:(I.last=U={index:z=d(O,!0),key:O,value:D,previous:B=I.last,next:null,removed:!1},I.first||(I.first=U),B&&(B.next=U),h?I.size++:T.size++,z!=="F"&&(I.index[z]=U)),T},P=function(T,O){var D=_(T),I=d(O),U;if(I!=="F")return D.index[I];for(U=D.first;U;U=U.next)if(U.key===O)return U};return r(S,{clear:function(){for(var O=this,D=_(O),I=D.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=null),I=I.next;D.first=D.last=null,D.index=n(null),h?D.size=0:O.size=0},delete:function(T){var O=this,D=_(O),I=P(O,T);if(I){var U=I.next,B=I.previous;delete D.index[I.index],I.removed=!0,B&&(B.next=U),U&&(U.previous=B),D.first===I&&(D.first=U),D.last===I&&(D.last=B),h?D.size--:O.size--}return!!I},forEach:function(O){for(var D=_(this),I=i(O,arguments.length>1?arguments[1]:void 0),U;U=U?U.next:D.first;)for(I(U.value,U.key,this);U&&U.removed;)U=U.previous},has:function(O){return!!P(this,O)}}),r(S,v?{get:function(O){var D=P(this,O);return D&&D.value},set:function(O,D){return C(this,O===0?0:O,D)}}:{add:function(O){return C(this,O=O===0?0:O,O)}}),h&&e(S,"size",{configurable:!0,get:function(){return _(this).size}}),k},setStrong:function(b,y,v){var w=y+" Iterator",k=g(y),S=g(w);l(b,y,function(_,C){m(this,{type:w,target:_,state:k(_),kind:C,last:null})},function(){for(var _=S(this),C=_.kind,P=_.last;P&&P.removed;)P=P.previous;return!_.target||!(_.last=P=P?P.next:_.state.first)?(_.target=null,c(void 0,!0)):c(C==="keys"?P.key:C==="values"?P.value:[P.key,P.value],!1)},v?"entries":"values",!v,!0),u(y)}},PM}var _V;function LFe(){if(_V)return aV;_V=1;var n=cse(),e=use();return n("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),aV}var SV;function FFe(){return SV||(SV=1,LFe()),oV}var kV={},MM,CV;function dse(){return CV||(CV=1,MM=function(n,e){return e===1?function(r,i){return r[n](i)}:function(r,i,s){return r[n](i,s)}}),MM}var DM,EV;function $Fe(){if(EV)return DM;EV=1;var n=ks(),e=dse(),r=n("Map");return DM={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},DM}var TV;function BFe(){if(TV)return kV;TV=1;var n=Tt(),e=an(),r=Sa(),i=Al(),s=$5(),o=$Fe(),a=um(),l=nn(),c=o.Map,u=o.has,h=o.get,d=o.set,f=e([].push),m=a||l(function(){return c.groupBy("ab",function(g){return g}).get("a").length!==1});return n({target:"Map",stat:!0,forced:a||m},{groupBy:function(b,y){i(b),r(y);var v=new c,w=0;return s(b,function(k){var S=y(k,w++);u(v,S)?f(h(v,S),k):d(v,S,[k])}),v}}),kV}var OM,PV;function zFe(){if(PV)return OM;PV=1,cu(),FFe(),BFe(),iS();var n=In();return OM=n.Map,OM}var IM,MV;function UFe(){if(MV)return IM;MV=1;var n=zFe();return uu(),IM=n,IM}var AM,DV;function WFe(){return DV||(DV=1,AM=UFe()),AM}var qFe=WFe(),hse=Pt(qFe),OV={},IV={},AV;function HFe(){if(AV)return IV;AV=1;var n=cse(),e=use();return n("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),IV}var RV;function VFe(){return RV||(RV=1,HFe()),OV}var NV={},RM,jV;function sh(){if(jV)return RM;jV=1;var n=cm(),e=TypeError;return RM=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(n(r)+" is not a set")},RM}var NM,LV;function oh(){if(LV)return NM;LV=1;var n=ks(),e=dse(),r=n("Set"),i=r.prototype;return NM={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:i},NM}var jM,FV;function ah(){if(FV)return jM;FV=1;var n=Ji();return jM=function(e,r,i){for(var s=i?e:e.iterator,o=e.next,a,l;!(a=n(o,s)).done;)if(l=r(a.value),l!==void 0)return l},jM}var LM,$V;function py(){if($V)return LM;$V=1;var n=ah();return LM=function(e,r,i){return i?n(e.keys(),r,!0):e.forEach(r)},LM}var FM,BV;function B5(){if(BV)return FM;BV=1;var n=oh(),e=py(),r=n.Set,i=n.add;return FM=function(s){var o=new r;return e(s,function(a){i(o,a)}),o},FM}var $M,zV;function my(){return zV||(zV=1,$M=function(n){return n.size}),$M}var BM,UV;function YFe(){return UV||(UV=1,BM=function(n){return{iterator:n,next:n.next,done:!1}}),BM}var zM,WV;function lh(){if(WV)return zM;WV=1;var n=Sa(),e=Rl(),r=Ji(),i=fm(),s=YFe(),o="Invalid size",a=RangeError,l=TypeError,c=Math.max,u=function(h,d){this.set=h,this.size=c(d,0),this.has=n(h.has),this.keys=n(h.keys)};return u.prototype={getIterator:function(){return s(e(r(this.keys,this.set)))},includes:function(h){return r(this.has,this.set,h)}},zM=function(h){e(h);var d=+h.size;if(d!==d)throw new l(o);var f=i(d);if(f<0)throw new a(o);return new u(h,f)},zM}var UM,qV;function GFe(){if(qV)return UM;qV=1;var n=sh(),e=oh(),r=B5(),i=my(),s=lh(),o=py(),a=ah(),l=e.has,c=e.remove;return UM=function(h){var d=n(this),f=s(h),m=r(d);return i(d)<=f.size?o(d,function(g){f.includes(g)&&c(m,g)}):a(f.getIterator(),function(g){l(m,g)&&c(m,g)}),m},UM}var WM,HV;function ch(){return HV||(HV=1,WM=function(){return!1}),WM}var VV;function KFe(){if(VV)return NV;VV=1;var n=Tt(),e=GFe(),r=nn(),i=ch(),s=!i("difference",function(a){return a.size===0}),o=s||r(function(){var a={size:1,has:function(){return!0},keys:function(){var c=0;return{next:function(){var u=c++>1;return l.has(1)&&l.clear(),{done:u,value:2}}}}},l=new Set([1,2,3,4]);return l.difference(a).size!==3});return n({target:"Set",proto:!0,real:!0,forced:o},{difference:e}),NV}var YV={},qM,GV;function XFe(){if(GV)return qM;GV=1;var n=sh(),e=oh(),r=my(),i=lh(),s=py(),o=ah(),a=e.Set,l=e.add,c=e.has;return qM=function(h){var d=n(this),f=i(h),m=new a;return r(d)>f.size?o(f.getIterator(),function(g){c(d,g)&&l(m,g)}):s(d,function(g){f.includes(g)&&l(m,g)}),m},qM}var KV;function QFe(){if(KV)return YV;KV=1;var n=Tt(),e=nn(),r=XFe(),i=ch(),s=!i("intersection",function(o){return o.size===2&&o.has(1)&&o.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return n({target:"Set",proto:!0,real:!0,forced:s},{intersection:r}),YV}var XV={},HM,QV;function JFe(){if(QV)return HM;QV=1;var n=sh(),e=oh().has,r=my(),i=lh(),s=py(),o=ah(),a=F5();return HM=function(c){var u=n(this),h=i(c);if(r(u)<=h.size)return s(u,function(f){if(h.includes(f))return!1},!0)!==!1;var d=h.getIterator();return o(d,function(f){if(e(u,f))return a(d,"normal",!1)})!==!1},HM}var JV;function ZFe(){if(JV)return XV;JV=1;var n=Tt(),e=JFe(),r=ch(),i=!r("isDisjointFrom",function(s){return!s});return n({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:e}),XV}var ZV={},VM,eY;function e8e(){if(eY)return VM;eY=1;var n=sh(),e=my(),r=py(),i=lh();return VM=function(o){var a=n(this),l=i(o);return e(a)>l.size?!1:r(a,function(c){if(!l.includes(c))return!1},!0)!==!1},VM}var tY;function t8e(){if(tY)return ZV;tY=1;var n=Tt(),e=e8e(),r=ch(),i=!r("isSubsetOf",function(s){return s});return n({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:e}),ZV}var nY={},YM,rY;function n8e(){if(rY)return YM;rY=1;var n=sh(),e=oh().has,r=my(),i=lh(),s=ah(),o=F5();return YM=function(l){var c=n(this),u=i(l);if(r(c)<u.size)return!1;var h=u.getIterator();return s(h,function(d){if(!e(c,d))return o(h,"normal",!1)})!==!1},YM}var iY;function r8e(){if(iY)return nY;iY=1;var n=Tt(),e=n8e(),r=ch(),i=!r("isSupersetOf",function(s){return!s});return n({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:e}),nY}var sY={},GM,oY;function i8e(){if(oY)return GM;oY=1;var n=sh(),e=oh(),r=B5(),i=lh(),s=ah(),o=e.add,a=e.has,l=e.remove;return GM=function(u){var h=n(this),d=i(u).getIterator(),f=r(h);return s(d,function(m){a(h,m)?l(f,m):o(f,m)}),f},GM}var KM,aY;function fse(){return aY||(aY=1,KM=function(n){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[n](r);return i.size===1&&i.values().next().value===4}catch{return!1}}),KM}var lY;function s8e(){if(lY)return sY;lY=1;var n=Tt(),e=i8e(),r=fse(),i=ch(),s=!i("symmetricDifference")||!r("symmetricDifference");return n({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:e}),sY}var cY={},XM,uY;function o8e(){if(uY)return XM;uY=1;var n=sh(),e=oh().add,r=B5(),i=lh(),s=ah();return XM=function(a){var l=n(this),c=i(a).getIterator(),u=r(l);return s(c,function(h){e(u,h)}),u},XM}var dY;function a8e(){if(dY)return cY;dY=1;var n=Tt(),e=o8e(),r=fse(),i=ch(),s=!i("union")||!r("union");return n({target:"Set",proto:!0,real:!0,forced:s},{union:e}),cY}var QM,hY;function l8e(){if(hY)return QM;hY=1,cu(),VFe(),KFe(),QFe(),ZFe(),t8e(),r8e(),s8e(),a8e(),iS();var n=In();return QM=n.Set,QM}var JM,fY;function c8e(){if(fY)return JM;fY=1;var n=l8e();return uu(),JM=n,JM}var ZM,pY;function u8e(){return pY||(pY=1,ZM=c8e()),ZM}var d8e=u8e(),Yc=Pt(d8e),eD,mY;function h8e(){if(mY)return eD;mY=1,cu(),iS();var n=ase();return eD=n,eD}var tD,gY;function f8e(){if(gY)return tD;gY=1;var n=h8e();return uu(),tD=n,tD}var nD,bY;function p8e(){if(bY)return nD;bY=1;var n=f8e();return nD=n,nD}var rD,yY;function m8e(){if(yY)return rD;yY=1;var n=p8e();return rD=n,rD}var iD,vY;function g8e(){return vY||(vY=1,iD=m8e()),iD}var sD,xY;function b8e(){return xY||(xY=1,sD=g8e()),sD}var y8e=b8e(),oD=Pt(y8e),wY={},aD,_Y;function v8e(){if(_Y)return aD;_Y=1;var n=pm(),e=Math.floor,r=function(i,s){var o=i.length;if(o<8)for(var a=1,l,c;a<o;){for(c=a,l=i[a];c&&s(i[c-1],l)>0;)i[c]=i[--c];c!==a++&&(i[c]=l)}else for(var u=e(o/2),h=r(n(i,0,u),s),d=r(n(i,u),s),f=h.length,m=d.length,g=0,b=0;g<f||b<m;)i[g+b]=g<f&&b<m?s(h[g],d[b])<=0?h[g++]:d[b++]:g<f?h[g++]:d[b++];return i};return aD=r,aD}var lD,SY;function x8e(){if(SY)return lD;SY=1;var n=am(),e=n.match(/firefox\/(\d+)/i);return lD=!!e&&+e[1],lD}var cD,kY;function w8e(){if(kY)return cD;kY=1;var n=am();return cD=/MSIE|Trident/.test(n),cD}var uD,CY;function _8e(){if(CY)return uD;CY=1;var n=am(),e=n.match(/AppleWebKit\/(\d+)\./);return uD=!!e&&+e[1],uD}var EY;function S8e(){if(EY)return wY;EY=1;var n=Tt(),e=an(),r=Sa(),i=Zi(),s=jo(),o=fie(),a=no(),l=nn(),c=v8e(),u=bm(),h=x8e(),d=w8e(),f=Jb(),m=_8e(),g=[],b=e(g.sort),y=e(g.push),v=l(function(){g.sort(void 0)}),w=l(function(){g.sort(null)}),k=u("sort"),S=!l(function(){if(f)return f<70;if(!(h&&h>3)){if(d)return!0;if(m)return m<603;var P="",T,O,D,I;for(T=65;T<76;T++){switch(O=String.fromCharCode(T),T){case 66:case 69:case 70:case 72:D=3;break;case 68:case 71:D=4;break;default:D=2}for(I=0;I<47;I++)g.push({k:O+I,v:D})}for(g.sort(function(U,B){return B.v-U.v}),I=0;I<g.length;I++)O=g[I].k.charAt(0),P.charAt(P.length-1)!==O&&(P+=O);return P!=="DGBEFHACIJK"}}),_=v||!w||!k||!S,C=function(P){return function(T,O){return O===void 0?-1:T===void 0?1:P!==void 0?+P(T,O)||0:a(T)>a(O)?1:-1}};return n({target:"Array",proto:!0,forced:_},{sort:function(T){T!==void 0&&r(T);var O=i(this);if(S)return T===void 0?b(O):b(O,T);var D=[],I=s(O),U,B;for(B=0;B<I;B++)B in O&&y(D,O[B]);for(c(D,C(T)),U=s(D),B=0;B<U;)O[B]=D[B++];for(;B<I;)o(O,B++);return O}}),wY}var dD,TY;function k8e(){if(TY)return dD;TY=1,S8e();var n=or();return dD=n("Array","sort"),dD}var hD,PY;function C8e(){if(PY)return hD;PY=1;var n=Fn(),e=k8e(),r=Array.prototype;return hD=function(i){var s=i.sort;return i===r||n(r,i)&&s===r.sort?e:s},hD}var fD,MY;function E8e(){if(MY)return fD;MY=1;var n=C8e();return fD=n,fD}var pD,DY;function T8e(){return DY||(DY=1,pD=E8e()),pD}var P8e=T8e(),pr=Pt(P8e),OY={},IY;function M8e(){if(IY)return OY;IY=1;var n=Tt(),e=lu().some,r=bm(),i=r("some");return n({target:"Array",proto:!0,forced:!i},{some:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),OY}var mD,AY;function D8e(){if(AY)return mD;AY=1,M8e();var n=or();return mD=n("Array","some"),mD}var gD,RY;function O8e(){if(RY)return gD;RY=1;var n=Fn(),e=D8e(),r=Array.prototype;return gD=function(i){var s=i.some;return i===r||n(r,i)&&s===r.some?e:s},gD}var bD,NY;function I8e(){if(NY)return bD;NY=1;var n=O8e();return bD=n,bD}var yD,jY;function A8e(){return jY||(jY=1,yD=I8e()),yD}var R8e=A8e(),z5=Pt(R8e),vD,LY;function N8e(){if(LY)return vD;LY=1,cu();var n=or();return vD=n("Array","keys"),vD}var xD,FY;function j8e(){if(FY)return xD;FY=1;var n=N8e();return xD=n,xD}var wD,$Y;function L8e(){if($Y)return wD;$Y=1,uu();var n=au(),e=$r(),r=Fn(),i=j8e(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return wD=function(a){var l=a.keys;return a===s||r(s,a)&&l===s.keys||e(o,n(a))?i:l},wD}var _D,BY;function F8e(){return BY||(BY=1,_D=L8e()),_D}var $8e=F8e(),$u=Pt($8e),SD,zY;function B8e(){if(zY)return SD;zY=1,cu();var n=or();return SD=n("Array","values"),SD}var kD,UY;function z8e(){if(UY)return kD;UY=1;var n=B8e();return kD=n,kD}var CD,WY;function U8e(){if(WY)return CD;WY=1,uu();var n=au(),e=$r(),r=Fn(),i=z8e(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return CD=function(a){var l=a.values;return a===s||r(s,a)&&l===s.values||e(o,n(a))?i:l},CD}var ED,qY;function W8e(){return qY||(qY=1,ED=U8e()),ED}var q8e=W8e(),HY=Pt(q8e),TD,VY;function H8e(){if(VY)return TD;VY=1,cu();var n=or();return TD=n("Array","entries"),TD}var PD,YY;function V8e(){if(YY)return PD;YY=1;var n=H8e();return PD=n,PD}var MD,GY;function Y8e(){if(GY)return MD;GY=1,uu();var n=au(),e=$r(),r=Fn(),i=V8e(),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};return MD=function(a){var l=a.entries;return a===s||r(s,a)&&l===s.entries||e(o,n(a))?i:l},MD}var DD,KY;function G8e(){return KY||(KY=1,DD=Y8e()),DD}var K8e=G8e(),X8e=Pt(K8e),OD,XY;function Q8e(){return XY||(XY=1,OD=tse()),OD}var J8e=Q8e(),oS=Pt(J8e);const qr=[];for(let n=0;n<256;++n)qr.push((n+256).toString(16).slice(1));function Z8e(n,e=0){return(qr[n[e+0]]+qr[n[e+1]]+qr[n[e+2]]+qr[n[e+3]]+"-"+qr[n[e+4]]+qr[n[e+5]]+"-"+qr[n[e+6]]+qr[n[e+7]]+"-"+qr[n[e+8]]+qr[n[e+9]]+"-"+qr[n[e+10]]+qr[n[e+11]]+qr[n[e+12]]+qr[n[e+13]]+qr[n[e+14]]+qr[n[e+15]]).toLowerCase()}let ID;const e6e=new Uint8Array(16);function t6e(){if(!ID){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ID=crypto.getRandomValues.bind(crypto)}return ID(e6e)}const n6e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var QY={randomUUID:n6e};function r6e(n,e,r){var s;n=n||{};const i=n.random??((s=n.rng)==null?void 0:s.call(n))??t6e();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Z8e(i)}function _d(n,e,r){return QY.randomUUID&&!n?QY.randomUUID():r6e(n)}function JY(n,e){var r=Pr(n);if(l1){var i=l1(n);e&&(i=Ot(i).call(i,function(s){return rS(n,s).enumerable})),r.push.apply(r,i)}return r}function ZY(n){for(var e=1;e<arguments.length;e++){var r,i,s=arguments[e]!=null?arguments[e]:{};e%2?mt(r=JY(Object(s),!0)).call(r,function(o){Sn(n,o,s[o])}):c1?ese(n,c1(s)):mt(i=JY(Object(s))).call(i,function(o){oS(n,o,rS(s,o))})}return n}function i6e(n){return new o6e(n)}class s6e{constructor(e,r,i){var s,o,a;Sn(this,"_source",void 0),Sn(this,"_transformers",void 0),Sn(this,"_target",void 0),Sn(this,"_listeners",{add:Le(s=this._add).call(s,this),remove:Le(o=this._remove).call(o,this),update:Le(a=this._update).call(a,this)}),this._source=e,this._transformers=r,this._target=i}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){var r;return sS(r=this._transformers).call(r,(i,s)=>s(i),e)}_add(e,r){r!=null&&this._target.add(this._transformItems(this._source.get(r.items)))}_update(e,r){r!=null&&this._target.update(this._transformItems(this._source.get(r.items)))}_remove(e,r){r!=null&&this._target.remove(this._transformItems(r.oldData))}}class o6e{constructor(e){Sn(this,"_source",void 0),Sn(this,"_transformers",[]),this._source=e}filter(e){return this._transformers.push(r=>Ot(r).call(r,e)),this}map(e){return this._transformers.push(r=>mn(r).call(r,e)),this}flatMap(e){return this._transformers.push(r=>PFe(r).call(r,e)),this}to(e){return new s6e(this._source,this._transformers,e)}}function qA(n){return typeof n=="string"||typeof n=="number"}class U5{constructor(e){Sn(this,"delay",void 0),Sn(this,"max",void 0),Sn(this,"_queue",[]),Sn(this,"_timeout",null),Sn(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const i=new U5(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{i.flush()};const s=[{name:"flush",original:void 0}];if(r&&r.replace)for(let o=0;o<r.replace.length;o++){const a=r.replace[o];s.push({name:a,original:e[a]}),i.replace(e,a)}return i._extended={object:e,methods:s},i}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let i=0;i<r.length;i++){const s=r[i];s.original?e[s.name]=s.original:delete e[s.name]}this._extended=null}}replace(e,r){const i=this,s=e[r];if(!s)throw new Error("Method "+r+" undefined");e[r]=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.queue({args:a,fn:s,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=ci(()=>{this.flush()},this.delay))}flush(){var e,r;mt(e=_i(r=this._queue).call(r,0)).call(e,i=>{i.fn.apply(i.context||i.fn,i.args||[])})}}class pb{constructor(){Sn(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Sn(this,"subscribe",pb.prototype.on),Sn(this,"unsubscribe",pb.prototype.off)}_trigger(e,r,i){var s;if(e==="*")throw new Error("Cannot trigger event *");mt(s=[...this._subscribers[e],...this._subscribers["*"]]).call(s,o=>{o(e,r,i??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var i;this._subscribers[e]=Ot(i=this._subscribers[e]).call(i,s=>s!==r)}}class nd{constructor(e){Sn(this,"_pairs",void 0),this._pairs=e}*[td](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return mn(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return mn(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=ly(null);for(const[r,i]of this._pairs)e[r]=i;return e}toMap(){return new hse(this._pairs)}toIdSet(){return new Yc(this.toIdArray())}toItemSet(){return new Yc(this.toItemArray())}cache(){return new nd([...this._pairs])}distinct(e){const r=new Yc;for(const[i,s]of this._pairs)r.add(e(s,i));return r}filter(e){const r=this._pairs;return new nd({*[td](){for(const[i,s]of r)e(s,i)&&(yield[i,s])}})}forEach(e){for(const[r,i]of this._pairs)e(i,r)}map(e){const r=this._pairs;return new nd({*[td](){for(const[i,s]of r)yield[i,e(s,i)]}})}max(e){const r=oD(this._pairs);let i=r.next();if(i.done)return null;let s=i.value[1],o=e(i.value[1],i.value[0]);for(;!(i=r.next()).done;){const[a,l]=i.value,c=e(l,a);c>o&&(o=c,s=l)}return s}min(e){const r=oD(this._pairs);let i=r.next();if(i.done)return null;let s=i.value[1],o=e(i.value[1],i.value[0]);for(;!(i=r.next()).done;){const[a,l]=i.value,c=e(l,a);c<o&&(o=c,s=l)}return s}reduce(e,r){for(const[i,s]of this._pairs)r=e(r,s,i);return r}sort(e){return new nd({[td]:()=>{var r;return oD(pr(r=[...this._pairs]).call(r,(i,s)=>{let[o,a]=i,[l,c]=s;return e(a,c,o,l)}))}})}}function a6e(n,e){return n[e]==null&&(n[e]=_d()),n}class zp extends pb{get idProp(){return this._idProp}constructor(e,r){super(),Sn(this,"flush",void 0),Sn(this,"length",void 0),Sn(this,"_options",void 0),Sn(this,"_data",void 0),Sn(this,"_idProp",void 0),Sn(this,"_queue",null),e&&!Vt(e)&&(r=e,e=[]),this._options=r||{},this._data=new hse,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=U5.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const i=[];let s;if(Vt(e)){const o=mn(e).call(e,a=>a[this._idProp]);if(z5(o).call(o,a=>this._data.has(a)))throw new Error("A duplicate id was found in the parameter array.");for(let a=0,l=e.length;a<l;a++)s=this._addItem(e[a]),i.push(s)}else if(e&&typeof e=="object")s=this._addItem(e),i.push(s);else throw new Error("Unknown dataType");return i.length&&this._trigger("add",{items:i},r),i}update(e,r){const i=[],s=[],o=[],a=[],l=this._idProp,c=u=>{const h=u[l];if(h!=null&&this._data.has(h)){const d=u,f=Ml({},this._data.get(h)),m=this._updateItem(d);s.push(m),a.push(d),o.push(f)}else{const d=this._addItem(u);i.push(d)}};if(Vt(e))for(let u=0,h=e.length;u<h;u++)e[u]&&typeof e[u]=="object"?c(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")c(e);else throw new Error("Unknown dataType");if(i.length&&this._trigger("add",{items:i},r),s.length){const u={items:s,oldData:o,data:a};this._trigger("update",u,r)}return ur(i).call(i,s)}updateOnly(e,r){var i;Vt(e)||(e=[e]);const s=mn(i=mn(e).call(e,o=>{const a=this._data.get(o[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:o}})).call(i,o=>{let{oldData:a,update:l}=o;const c=a[this._idProp],u=qie(a,l);return this._data.set(c,u),{id:c,oldData:a,updatedData:u}});if(s.length){const o={items:mn(s).call(s,a=>a.id),oldData:mn(s).call(s,a=>a.oldData),data:mn(s).call(s,a=>a.updatedData)};return this._trigger("update",o,r),o.items}else return[]}get(e,r){let i,s,o;qA(e)?(i=e,o=r):Vt(e)?(s=e,o=r):o=e;const a=o&&o.returnType==="Object"?"Object":"Array",l=o&&Ot(o),c=[];let u,h,d;if(i!=null)u=this._data.get(i),u&&l&&!l(u)&&(u=void 0);else if(s!=null)for(let m=0,g=s.length;m<g;m++)u=this._data.get(s[m]),u!=null&&(!l||l(u))&&c.push(u);else{var f;h=[...$u(f=this._data).call(f)];for(let m=0,g=h.length;m<g;m++)d=h[m],u=this._data.get(d),u!=null&&(!l||l(u))&&c.push(u)}if(o&&o.order&&i==null&&this._sort(c,o.order),o&&o.fields){const m=o.fields;if(i!=null&&u!=null)u=this._filterFields(u,m);else for(let g=0,b=c.length;g<b;g++)c[g]=this._filterFields(c[g],m)}if(a=="Object"){const m={};for(let g=0,b=c.length;g<b;g++){const y=c[g],v=y[this._idProp];m[v]=y}return m}else return i!=null?u??null:c}getIds(e){const r=this._data,i=e&&Ot(e),s=e&&e.order,o=[...$u(r).call(r)],a=[];if(i)if(s){const l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c],d=this._data.get(h);d!=null&&i(d)&&l.push(d)}this._sort(l,s);for(let c=0,u=l.length;c<u;c++)a.push(l[c][this._idProp])}else for(let l=0,c=o.length;l<c;l++){const u=o[l],h=this._data.get(u);h!=null&&i(h)&&a.push(h[this._idProp])}else if(s){const l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];l.push(r.get(h))}this._sort(l,s);for(let c=0,u=l.length;c<u;c++)a.push(l[c][this._idProp])}else for(let l=0,c=o.length;l<c;l++){const u=o[l],h=r.get(u);h!=null&&a.push(h[this._idProp])}return a}getDataSet(){return this}forEach(e,r){const i=r&&Ot(r),s=this._data,o=[...$u(s).call(s)];if(r&&r.order){const a=this.get(r);for(let l=0,c=a.length;l<c;l++){const u=a[l],h=u[this._idProp];e(u,h)}}else for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!i||i(u))&&e(u,c)}}map(e,r){const i=r&&Ot(r),s=[],o=this._data,a=[...$u(o).call(o)];for(let l=0,c=a.length;l<c;l++){const u=a[l],h=this._data.get(u);h!=null&&(!i||i(h))&&s.push(e(h,u))}return r&&r.order&&this._sort(s,r.order),s}_filterFields(e,r){var i;return e&&sS(i=Vt(r)?r:Pr(r)).call(i,(s,o)=>(s[o]=e[o],s),{})}_sort(e,r){if(typeof r=="string"){const i=r;pr(e).call(e,(s,o)=>{const a=s[i],l=o[i];return a>l?1:a<l?-1:0})}else if(typeof r=="function")pr(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const i=[],s=[],o=Vt(e)?e:[e];for(let a=0,l=o.length;a<l;a++){const c=this._remove(o[a]);if(c){const u=c[this._idProp];u!=null&&(i.push(u),s.push(c))}}return i.length&&this._trigger("remove",{items:i,oldData:s},r),i}_remove(e){let r;if(qA(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const i=this._data.get(r)||null;return this._data.delete(r),--this.length,i}return null}clear(e){var r;const i=[...$u(r=this._data).call(r)],s=[];for(let o=0,a=i.length;o<a;o++)s.push(this._data.get(i[o]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:s},e),i}max(e){let r=null,i=null;for(const o of HY(s=this._data).call(s)){var s;const a=o[e];typeof a=="number"&&(i==null||a>i)&&(r=o,i=a)}return r||null}min(e){let r=null,i=null;for(const o of HY(s=this._data).call(s)){var s;const a=o[e];typeof a=="number"&&(i==null||a<i)&&(r=o,i=a)}return r||null}distinct(e){const r=this._data,i=[...$u(r).call(r)],s=[];let o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],h=r.get(c)[e];let d=!1;for(let f=0;f<o;f++)if(s[f]==h){d=!0;break}!d&&h!==void 0&&(s[o]=h,o++)}return s}_addItem(e){const r=a6e(e,this._idProp),i=r[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,r),++this.length,i}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+$i(e)+")");const i=this._data.get(r);if(!i)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,ZY(ZY({},i),e)),r}stream(e){if(e){const i=this._data;return new nd({*[td](){for(const s of e){const o=i.get(s);o!=null&&(yield[s,o])}}})}else{var r;return new nd({[td]:Le(r=X8e(this._data)).call(r,this._data)})}}}let l6e=class pse extends pb{get idProp(){return this.getDataSet().idProp}constructor(e,r){var i;super(),Sn(this,"length",0),Sn(this,"_listener",void 0),Sn(this,"_data",void 0),Sn(this,"_ids",new Yc),Sn(this,"_options",void 0),this._options=r||{},this._listener=Le(i=this._onEvent).call(i,this),this.setData(e)}setData(e){if(this._data){this._data.off&&this._data.off("*",this._listener);const r=this._data.getIds({filter:Ot(this._options)}),i=this._data.get(r);this._ids.clear(),this.length=0,this._trigger("remove",{items:r,oldData:i})}if(e!=null){this._data=e;const r=this._data.getIds({filter:Ot(this._options)});for(let i=0,s=r.length;i<s;i++){const o=r[i];this._ids.add(o)}this.length=r.length,this._trigger("add",{items:r})}else this._data=new zp;this._data.on&&this._data.on("*",this._listener)}refresh(){const e=this._data.getIds({filter:Ot(this._options)}),r=[...this._ids],i={},s=[],o=[],a=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];i[u]=!0,this._ids.has(u)||(s.push(u),this._ids.add(u))}for(let l=0,c=r.length;l<c;l++){const u=r[l],h=this._data.get(u);h==null?console.error("If you see this, report it please."):i[u]||(o.push(u),a.push(h),this._ids.delete(u))}this.length+=s.length-o.length,s.length&&this._trigger("add",{items:s}),o.length&&this._trigger("remove",{items:o,oldData:a})}get(e,r){if(this._data==null)return null;let i=null,s;qA(e)||Vt(e)?(i=e,s=r):s=e;const o=Ml({},this._options,s),a=Ot(this._options),l=s&&Ot(s);return a&&l&&(o.filter=c=>a(c)&&l(c)),i==null?this._data.get(o):this._data.get(i,o)}getIds(e){if(this._data.length){const r=Ot(this._options),i=e!=null?Ot(e):null;let s;return i?r?s=o=>r(o)&&i(o):s=i:s=r,this._data.getIds({filter:s,order:e&&e.order})}else return[]}forEach(e,r){if(this._data){var i;const s=Ot(this._options),o=r&&Ot(r);let a;o?s?a=function(l){return s(l)&&o(l)}:a=o:a=s,mt(i=this._data).call(i,e,{filter:a,order:r&&r.order})}}map(e,r){if(this._data){var i;const s=Ot(this._options),o=r&&Ot(r);let a;return o?s?a=l=>s(l)&&o(l):a=o:a=s,mn(i=this._data).call(i,e,{filter:a,order:r&&r.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(e){var r;return this._data.stream(e||{[td]:Le(r=$u(this._ids)).call(r,this._ids)})}dispose(){var e;(e=this._data)!==null&&e!==void 0&&e.off&&this._data.off("*",this._listener);const r="This data view has already been disposed of.",i={get:()=>{throw new Error(r)},set:()=>{throw new Error(r)},configurable:!1};for(const s of hie(pse.prototype))oS(this,s,i)}_onEvent(e,r,i){if(!r||!r.items||!this._data)return;const s=r.items,o=[],a=[],l=[],c=[],u=[],h=[];switch(e){case"add":for(let d=0,f=s.length;d<f;d++){const m=s[d];this.get(m)&&(this._ids.add(m),o.push(m))}break;case"update":for(let d=0,f=s.length;d<f;d++){const m=s[d];this.get(m)?this._ids.has(m)?(a.push(m),u.push(r.data[d]),c.push(r.oldData[d])):(this._ids.add(m),o.push(m)):this._ids.has(m)&&(this._ids.delete(m),l.push(m),h.push(r.oldData[d]))}break;case"remove":for(let d=0,f=s.length;d<f;d++){const m=s[d];this._ids.has(m)&&(this._ids.delete(m),l.push(m),h.push(r.oldData[d]))}break}this.length+=o.length-l.length,o.length&&this._trigger("add",{items:o},i),a.length&&this._trigger("update",{items:a,oldData:c,data:u},i),l.length&&this._trigger("remove",{items:l,oldData:h},i)}};function c6e(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof mt(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof mn(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function u6e(n,e){return typeof e=="object"&&e!==null&&n===e.idProp&&typeof mt(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof mn(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&c6e(n,e.getDataSet())}var d6e=Ro(),As=Pt(d6e);const Si=typeof window<"u"&&window.moment||As;var Kv={exports:{}},Un={},Xv={exports:{}},Mu={},eG;function mse(){if(eG)return Mu;eG=1;function n(){var o={};return o["align-content"]=!1,o["align-items"]=!1,o["align-self"]=!1,o["alignment-adjust"]=!1,o["alignment-baseline"]=!1,o.all=!1,o["anchor-point"]=!1,o.animation=!1,o["animation-delay"]=!1,o["animation-direction"]=!1,o["animation-duration"]=!1,o["animation-fill-mode"]=!1,o["animation-iteration-count"]=!1,o["animation-name"]=!1,o["animation-play-state"]=!1,o["animation-timing-function"]=!1,o.azimuth=!1,o["backface-visibility"]=!1,o.background=!0,o["background-attachment"]=!0,o["background-clip"]=!0,o["background-color"]=!0,o["background-image"]=!0,o["background-origin"]=!0,o["background-position"]=!0,o["background-repeat"]=!0,o["background-size"]=!0,o["baseline-shift"]=!1,o.binding=!1,o.bleed=!1,o["bookmark-label"]=!1,o["bookmark-level"]=!1,o["bookmark-state"]=!1,o.border=!0,o["border-bottom"]=!0,o["border-bottom-color"]=!0,o["border-bottom-left-radius"]=!0,o["border-bottom-right-radius"]=!0,o["border-bottom-style"]=!0,o["border-bottom-width"]=!0,o["border-collapse"]=!0,o["border-color"]=!0,o["border-image"]=!0,o["border-image-outset"]=!0,o["border-image-repeat"]=!0,o["border-image-slice"]=!0,o["border-image-source"]=!0,o["border-image-width"]=!0,o["border-left"]=!0,o["border-left-color"]=!0,o["border-left-style"]=!0,o["border-left-width"]=!0,o["border-radius"]=!0,o["border-right"]=!0,o["border-right-color"]=!0,o["border-right-style"]=!0,o["border-right-width"]=!0,o["border-spacing"]=!0,o["border-style"]=!0,o["border-top"]=!0,o["border-top-color"]=!0,o["border-top-left-radius"]=!0,o["border-top-right-radius"]=!0,o["border-top-style"]=!0,o["border-top-width"]=!0,o["border-width"]=!0,o.bottom=!1,o["box-decoration-break"]=!0,o["box-shadow"]=!0,o["box-sizing"]=!0,o["box-snap"]=!0,o["box-suppress"]=!0,o["break-after"]=!0,o["break-before"]=!0,o["break-inside"]=!0,o["caption-side"]=!1,o.chains=!1,o.clear=!0,o.clip=!1,o["clip-path"]=!1,o["clip-rule"]=!1,o.color=!0,o["color-interpolation-filters"]=!0,o["column-count"]=!1,o["column-fill"]=!1,o["column-gap"]=!1,o["column-rule"]=!1,o["column-rule-color"]=!1,o["column-rule-style"]=!1,o["column-rule-width"]=!1,o["column-span"]=!1,o["column-width"]=!1,o.columns=!1,o.contain=!1,o.content=!1,o["counter-increment"]=!1,o["counter-reset"]=!1,o["counter-set"]=!1,o.crop=!1,o.cue=!1,o["cue-after"]=!1,o["cue-before"]=!1,o.cursor=!1,o.direction=!1,o.display=!0,o["display-inside"]=!0,o["display-list"]=!0,o["display-outside"]=!0,o["dominant-baseline"]=!1,o.elevation=!1,o["empty-cells"]=!1,o.filter=!1,o.flex=!1,o["flex-basis"]=!1,o["flex-direction"]=!1,o["flex-flow"]=!1,o["flex-grow"]=!1,o["flex-shrink"]=!1,o["flex-wrap"]=!1,o.float=!1,o["float-offset"]=!1,o["flood-color"]=!1,o["flood-opacity"]=!1,o["flow-from"]=!1,o["flow-into"]=!1,o.font=!0,o["font-family"]=!0,o["font-feature-settings"]=!0,o["font-kerning"]=!0,o["font-language-override"]=!0,o["font-size"]=!0,o["font-size-adjust"]=!0,o["font-stretch"]=!0,o["font-style"]=!0,o["font-synthesis"]=!0,o["font-variant"]=!0,o["font-variant-alternates"]=!0,o["font-variant-caps"]=!0,o["font-variant-east-asian"]=!0,o["font-variant-ligatures"]=!0,o["font-variant-numeric"]=!0,o["font-variant-position"]=!0,o["font-weight"]=!0,o.grid=!1,o["grid-area"]=!1,o["grid-auto-columns"]=!1,o["grid-auto-flow"]=!1,o["grid-auto-rows"]=!1,o["grid-column"]=!1,o["grid-column-end"]=!1,o["grid-column-start"]=!1,o["grid-row"]=!1,o["grid-row-end"]=!1,o["grid-row-start"]=!1,o["grid-template"]=!1,o["grid-template-areas"]=!1,o["grid-template-columns"]=!1,o["grid-template-rows"]=!1,o["hanging-punctuation"]=!1,o.height=!0,o.hyphens=!1,o.icon=!1,o["image-orientation"]=!1,o["image-resolution"]=!1,o["ime-mode"]=!1,o["initial-letters"]=!1,o["inline-box-align"]=!1,o["justify-content"]=!1,o["justify-items"]=!1,o["justify-self"]=!1,o.left=!1,o["letter-spacing"]=!0,o["lighting-color"]=!0,o["line-box-contain"]=!1,o["line-break"]=!1,o["line-grid"]=!1,o["line-height"]=!1,o["line-snap"]=!1,o["line-stacking"]=!1,o["line-stacking-ruby"]=!1,o["line-stacking-shift"]=!1,o["line-stacking-strategy"]=!1,o["list-style"]=!0,o["list-style-image"]=!0,o["list-style-position"]=!0,o["list-style-type"]=!0,o.margin=!0,o["margin-bottom"]=!0,o["margin-left"]=!0,o["margin-right"]=!0,o["margin-top"]=!0,o["marker-offset"]=!1,o["marker-side"]=!1,o.marks=!1,o.mask=!1,o["mask-box"]=!1,o["mask-box-outset"]=!1,o["mask-box-repeat"]=!1,o["mask-box-slice"]=!1,o["mask-box-source"]=!1,o["mask-box-width"]=!1,o["mask-clip"]=!1,o["mask-image"]=!1,o["mask-origin"]=!1,o["mask-position"]=!1,o["mask-repeat"]=!1,o["mask-size"]=!1,o["mask-source-type"]=!1,o["mask-type"]=!1,o["max-height"]=!0,o["max-lines"]=!1,o["max-width"]=!0,o["min-height"]=!0,o["min-width"]=!0,o["move-to"]=!1,o["nav-down"]=!1,o["nav-index"]=!1,o["nav-left"]=!1,o["nav-right"]=!1,o["nav-up"]=!1,o["object-fit"]=!1,o["object-position"]=!1,o.opacity=!1,o.order=!1,o.orphans=!1,o.outline=!1,o["outline-color"]=!1,o["outline-offset"]=!1,o["outline-style"]=!1,o["outline-width"]=!1,o.overflow=!1,o["overflow-wrap"]=!1,o["overflow-x"]=!1,o["overflow-y"]=!1,o.padding=!0,o["padding-bottom"]=!0,o["padding-left"]=!0,o["padding-right"]=!0,o["padding-top"]=!0,o.page=!1,o["page-break-after"]=!1,o["page-break-before"]=!1,o["page-break-inside"]=!1,o["page-policy"]=!1,o.pause=!1,o["pause-after"]=!1,o["pause-before"]=!1,o.perspective=!1,o["perspective-origin"]=!1,o.pitch=!1,o["pitch-range"]=!1,o["play-during"]=!1,o.position=!1,o["presentation-level"]=!1,o.quotes=!1,o["region-fragment"]=!1,o.resize=!1,o.rest=!1,o["rest-after"]=!1,o["rest-before"]=!1,o.richness=!1,o.right=!1,o.rotation=!1,o["rotation-point"]=!1,o["ruby-align"]=!1,o["ruby-merge"]=!1,o["ruby-position"]=!1,o["shape-image-threshold"]=!1,o["shape-outside"]=!1,o["shape-margin"]=!1,o.size=!1,o.speak=!1,o["speak-as"]=!1,o["speak-header"]=!1,o["speak-numeral"]=!1,o["speak-punctuation"]=!1,o["speech-rate"]=!1,o.stress=!1,o["string-set"]=!1,o["tab-size"]=!1,o["table-layout"]=!1,o["text-align"]=!0,o["text-align-last"]=!0,o["text-combine-upright"]=!0,o["text-decoration"]=!0,o["text-decoration-color"]=!0,o["text-decoration-line"]=!0,o["text-decoration-skip"]=!0,o["text-decoration-style"]=!0,o["text-emphasis"]=!0,o["text-emphasis-color"]=!0,o["text-emphasis-position"]=!0,o["text-emphasis-style"]=!0,o["text-height"]=!0,o["text-indent"]=!0,o["text-justify"]=!0,o["text-orientation"]=!0,o["text-overflow"]=!0,o["text-shadow"]=!0,o["text-space-collapse"]=!0,o["text-transform"]=!0,o["text-underline-position"]=!0,o["text-wrap"]=!0,o.top=!1,o.transform=!1,o["transform-origin"]=!1,o["transform-style"]=!1,o.transition=!1,o["transition-delay"]=!1,o["transition-duration"]=!1,o["transition-property"]=!1,o["transition-timing-function"]=!1,o["unicode-bidi"]=!1,o["vertical-align"]=!1,o.visibility=!1,o["voice-balance"]=!1,o["voice-duration"]=!1,o["voice-family"]=!1,o["voice-pitch"]=!1,o["voice-range"]=!1,o["voice-rate"]=!1,o["voice-stress"]=!1,o["voice-volume"]=!1,o.volume=!1,o["white-space"]=!1,o.widows=!1,o.width=!0,o["will-change"]=!1,o["word-break"]=!0,o["word-spacing"]=!0,o["word-wrap"]=!0,o["wrap-flow"]=!1,o["wrap-through"]=!1,o["writing-mode"]=!1,o["z-index"]=!1,o}function e(o,a,l){}function r(o,a,l){}var i=/javascript\s*\:/img;function s(o,a){return i.test(a)?"":a}return Mu.whiteList=n(),Mu.getDefaultWhiteList=n,Mu.onAttr=e,Mu.onIgnoreAttr=r,Mu.safeAttrValue=s,Mu}var AD,tG;function gse(){return tG||(tG=1,AD={indexOf:function(n,e){var r,i;if(Array.prototype.indexOf)return n.indexOf(e);for(r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1},forEach:function(n,e,r){var i,s;if(Array.prototype.forEach)return n.forEach(e,r);for(i=0,s=n.length;i<s;i++)e.call(r,n[i],i,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(n){return String.prototype.trimRight?n.trimRight():n.replace(/(\s*$)/g,"")}}),AD}var RD,nG;function h6e(){if(nG)return RD;nG=1;var n=gse();function e(r,i){r=n.trimRight(r),r[r.length-1]!==";"&&(r+=";");var s=r.length,o=!1,a=0,l=0,c="";function u(){if(!o){var f=n.trim(r.slice(a,l)),m=f.indexOf(":");if(m!==-1){var g=n.trim(f.slice(0,m)),b=n.trim(f.slice(m+1));if(g){var y=i(a,c.length,g,b,f);y&&(c+=y+"; ")}}}a=l+1}for(;l<s;l++){var h=r[l];if(h==="/"&&r[l+1]==="*"){var d=r.indexOf("*/",l+2);if(d===-1)break;l=d+1,a=l+1,o=!1}else h==="("?o=!0:h===")"?o=!1:h===";"?o||u():h===`
`&&u()}return n.trim(c)}return RD=e,RD}var ND,rG;function f6e(){if(rG)return ND;rG=1;var n=mse(),e=h6e();gse();function r(o){return o==null}function i(o){var a={};for(var l in o)a[l]=o[l];return a}function s(o){o=i(o||{}),o.whiteList=o.whiteList||n.whiteList,o.onAttr=o.onAttr||n.onAttr,o.onIgnoreAttr=o.onIgnoreAttr||n.onIgnoreAttr,o.safeAttrValue=o.safeAttrValue||n.safeAttrValue,this.options=o}return s.prototype.process=function(o){if(o=o||"",o=o.toString(),!o)return"";var a=this,l=a.options,c=l.whiteList,u=l.onAttr,h=l.onIgnoreAttr,d=l.safeAttrValue,f=e(o,function(m,g,b,y,v){var w=c[b],k=!1;if(w===!0?k=w:typeof w=="function"?k=w(y):w instanceof RegExp&&(k=w.test(y)),k!==!0&&(k=!1),y=d(b,y),!!y){var S={position:g,sourcePosition:m,source:v,isWhite:k};if(k){var _=u(b,y,S);return r(_)?b+":"+y:_}else{var _=h(b,y,S);if(!r(_))return _}}});return f},ND=s,ND}var iG;function HA(){return iG||(iG=1,function(n,e){var r=mse(),i=f6e();function s(a,l){var c=new i(l);return c.process(a)}e=n.exports=s,e.FilterCSS=i;for(var o in r)e[o]=r[o];typeof window<"u"&&(window.filterCSS=n.exports)}(Xv,Xv.exports)),Xv.exports}var jD,sG;function W5(){return sG||(sG=1,jD={indexOf:function(n,e){var r,i;if(Array.prototype.indexOf)return n.indexOf(e);for(r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1},forEach:function(n,e,r){var i,s;if(Array.prototype.forEach)return n.forEach(e,r);for(i=0,s=n.length;i<s;i++)e.call(r,n[i],i,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(n){var e=/\s|\n|\t/,r=e.exec(n);return r?r.index:-1}}),jD}var oG;function bse(){if(oG)return Un;oG=1;var n=HA().FilterCSS,e=HA().getDefaultWhiteList,r=W5();function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new n;function o(F,N,R){}function a(F,N,R){}function l(F,N,R){}function c(F,N,R){}function u(F){return F.replace(d,"&lt;").replace(f,"&gt;")}function h(F,N,R,W){if(R=D(R),N==="href"||N==="src"){if(R=r.trim(R),R==="#")return"#";if(!(R.substr(0,7)==="http://"||R.substr(0,8)==="https://"||R.substr(0,7)==="mailto:"||R.substr(0,4)==="tel:"||R.substr(0,11)==="data:image/"||R.substr(0,6)==="ftp://"||R.substr(0,2)==="./"||R.substr(0,3)==="../"||R[0]==="#"||R[0]==="/"))return""}else if(N==="background"){if(w.lastIndex=0,w.test(R))return""}else if(N==="style"){if(k.lastIndex=0,k.test(R)||(S.lastIndex=0,S.test(R)&&(w.lastIndex=0,w.test(R))))return"";W!==!1&&(W=W||s,R=W.process(R))}return R=I(R),R}var d=/</g,f=/>/g,m=/"/g,g=/&quot;/g,b=/&#([a-zA-Z0-9]*);?/gim,y=/&colon;?/gim,v=/&newline;?/gim,w=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,k=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,S=/u\s*r\s*l\s*\(.*/gi;function _(F){return F.replace(m,"&quot;")}function C(F){return F.replace(g,'"')}function P(F){return F.replace(b,function(R,W){return W[0]==="x"||W[0]==="X"?String.fromCharCode(parseInt(W.substr(1),16)):String.fromCharCode(parseInt(W,10))})}function T(F){return F.replace(y,":").replace(v," ")}function O(F){for(var N="",R=0,W=F.length;R<W;R++)N+=F.charCodeAt(R)<32?" ":F.charAt(R);return r.trim(N)}function D(F){return F=C(F),F=P(F),F=T(F),F=O(F),F}function I(F){return F=_(F),F=u(F),F}function U(){return""}function B(F,N){typeof N!="function"&&(N=function(){});var R=!Array.isArray(F);function W(H){return R?!0:r.indexOf(F,H)!==-1}var Y=[],K=!1;return{onIgnoreTag:function(H,Q,G){if(W(H))if(G.isClosing){var X="[/removed]",de=G.position+X.length;return Y.push([K!==!1?K:G.position,de]),K=!1,X}else return K||(K=G.position),"[removed]";else return N(H,Q,G)},remove:function(H){var Q="",G=0;return r.forEach(Y,function(X){Q+=H.slice(G,X[0]),G=X[1]}),Q+=H.slice(G),Q}}}function z(F){for(var N="",R=0;R<F.length;){var W=F.indexOf("<!--",R);if(W===-1){N+=F.slice(R);break}N+=F.slice(R,W);var Y=F.indexOf("-->",W);if(Y===-1)break;R=Y+3}return N}function j(F){var N=F.split("");return N=N.filter(function(R){var W=R.charCodeAt(0);return W===127?!1:W<=31?W===10||W===13:!0}),N.join("")}return Un.whiteList=i(),Un.getDefaultWhiteList=i,Un.onTag=o,Un.onIgnoreTag=a,Un.onTagAttr=l,Un.onIgnoreTagAttr=c,Un.safeAttrValue=h,Un.escapeHtml=u,Un.escapeQuote=_,Un.unescapeQuote=C,Un.escapeHtmlEntities=P,Un.escapeDangerHtml5Entities=T,Un.clearNonPrintableCharacter=O,Un.friendlyAttrValue=D,Un.escapeAttrValue=I,Un.onIgnoreTagStripAll=U,Un.StripTagBody=B,Un.stripCommentTag=z,Un.stripBlankChar=j,Un.attributeWrapSign='"',Un.cssFilter=s,Un.getDefaultCSSWhiteList=e,Un}var Qv={},aG;function yse(){if(aG)return Qv;aG=1;var n=W5();function e(d){var f=n.spaceIndex(d),m;return f===-1?m=d.slice(1,-1):m=d.slice(1,f+1),m=n.trim(m).toLowerCase(),m.slice(0,1)==="/"&&(m=m.slice(1)),m.slice(-1)==="/"&&(m=m.slice(0,-1)),m}function r(d){return d.slice(0,2)==="</"}function i(d,f,m){var g="",b=0,y=!1,v=!1,w=0,k=d.length,S="",_="";e:for(w=0;w<k;w++){var C=d.charAt(w);if(y===!1){if(C==="<"){y=w;continue}}else if(v===!1){if(C==="<"){g+=m(d.slice(b,w)),y=w,b=w;continue}if(C===">"||w===k-1){g+=m(d.slice(b,y)),_=d.slice(y,w+1),S=e(_),g+=f(y,g.length,S,_,r(_)),b=w+1,y=!1;continue}if(C==='"'||C==="'")for(var P=1,T=d.charAt(w-P);T.trim()===""||T==="=";){if(T==="="){v=C;continue e}T=d.charAt(w-++P)}}else if(C===v){v=!1;continue}}return b<k&&(g+=m(d.substr(b))),g}var s=/[^a-zA-Z0-9\\_:.-]/gim;function o(d,f){var m=0,g=0,b=[],y=!1,v=d.length;function w(P,T){if(P=n.trim(P),P=P.replace(s,"").toLowerCase(),!(P.length<1)){var O=f(P,T||"");O&&b.push(O)}}for(var k=0;k<v;k++){var S=d.charAt(k),_,C;if(y===!1&&S==="="){y=d.slice(m,k),m=k+1,g=d.charAt(m)==='"'||d.charAt(m)==="'"?m:l(d,k+1);continue}if(y!==!1&&k===g){if(C=d.indexOf(S,k+1),C===-1)break;_=n.trim(d.slice(g+1,C)),w(y,_),y=!1,k=C,m=k+1;continue}if(/\s|\n|\t/.test(S))if(d=d.replace(/\s|\n|\t/g," "),y===!1)if(C=a(d,k),C===-1){_=n.trim(d.slice(m,k)),w(_),y=!1,m=k+1;continue}else{k=C-1;continue}else if(C=c(d,k-1),C===-1){_=n.trim(d.slice(m,k)),_=h(_),w(y,_),y=!1,m=k+1;continue}else continue}return m<d.length&&(y===!1?w(d.slice(m)):w(y,h(n.trim(d.slice(m))))),n.trim(b.join(" "))}function a(d,f){for(;f<d.length;f++){var m=d[f];if(m!==" ")return m==="="?f:-1}}function l(d,f){for(;f<d.length;f++){var m=d[f];if(m!==" ")return m==="'"||m==='"'?f:-1}}function c(d,f){for(;f>0;f--){var m=d[f];if(m!==" ")return m==="="?f:-1}}function u(d){return d[0]==='"'&&d[d.length-1]==='"'||d[0]==="'"&&d[d.length-1]==="'"}function h(d){return u(d)?d.substr(1,d.length-2):d}return Qv.parseTag=i,Qv.parseAttr=o,Qv}var LD,lG;function p6e(){if(lG)return LD;lG=1;var n=HA().FilterCSS,e=bse(),r=yse(),i=r.parseTag,s=r.parseAttr,o=W5();function a(d){return d==null}function l(d){var f=o.spaceIndex(d);if(f===-1)return{html:"",closing:d[d.length-2]==="/"};d=o.trim(d.slice(f+1,-1));var m=d[d.length-1]==="/";return m&&(d=o.trim(d.slice(0,-1))),{html:d,closing:m}}function c(d){var f={};for(var m in d)f[m]=d[m];return f}function u(d){var f={};for(var m in d)Array.isArray(d[m])?f[m.toLowerCase()]=d[m].map(function(g){return g.toLowerCase()}):f[m.toLowerCase()]=d[m];return f}function h(d){d=c(d||{}),d.stripIgnoreTag&&(d.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),d.onIgnoreTag=e.onIgnoreTagStripAll),d.whiteList||d.allowList?d.whiteList=u(d.whiteList||d.allowList):d.whiteList=e.whiteList,this.attributeWrapSign=d.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,d.onTag=d.onTag||e.onTag,d.onTagAttr=d.onTagAttr||e.onTagAttr,d.onIgnoreTag=d.onIgnoreTag||e.onIgnoreTag,d.onIgnoreTagAttr=d.onIgnoreTagAttr||e.onIgnoreTagAttr,d.safeAttrValue=d.safeAttrValue||e.safeAttrValue,d.escapeHtml=d.escapeHtml||e.escapeHtml,this.options=d,d.css===!1?this.cssFilter=!1:(d.css=d.css||{},this.cssFilter=new n(d.css))}return h.prototype.process=function(d){if(d=d||"",d=d.toString(),!d)return"";var f=this,m=f.options,g=m.whiteList,b=m.onTag,y=m.onIgnoreTag,v=m.onTagAttr,w=m.onIgnoreTagAttr,k=m.safeAttrValue,S=m.escapeHtml,_=f.attributeWrapSign,C=f.cssFilter;m.stripBlankChar&&(d=e.stripBlankChar(d)),m.allowCommentTag||(d=e.stripCommentTag(d));var P=!1;m.stripIgnoreTagBody&&(P=e.StripTagBody(m.stripIgnoreTagBody,y),y=P.onIgnoreTag);var T=i(d,function(O,D,I,U,B){var z={sourcePosition:O,position:D,isClosing:B,isWhite:Object.prototype.hasOwnProperty.call(g,I)},j=b(I,U,z);if(!a(j))return j;if(z.isWhite){if(z.isClosing)return"</"+I+">";var F=l(U),N=g[I],R=s(F.html,function(W,Y){var K=o.indexOf(N,W)!==-1,H=v(I,W,Y,K);return a(H)?K?(Y=k(I,W,Y,C),Y?W+"="+_+Y+_:W):(H=w(I,W,Y,K),a(H)?void 0:H):H});return U="<"+I,R&&(U+=" "+R),F.closing&&(U+=" /"),U+=">",U}else return j=y(I,U,z),a(j)?S(U):j},S);return P&&(T=P.remove(T)),T},LD=h,LD}var cG;function m6e(){return cG||(cG=1,function(n,e){var r=bse(),i=yse(),s=p6e();function o(l,c){var u=new s(c);return u.process(l)}e=n.exports=o,e.filterXSS=o,e.FilterXSS=s,function(){for(var l in r)e[l]=r[l];for(var c in i)e[c]=i[c]}(),typeof window<"u"&&(window.filterXSS=n.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=n.exports)}(Kv,Kv.exports)),Kv.exports}var g6e=m6e(),b6e=Pt(g6e);function uG(n,e){var r=Pr(n);if(l1){var i=l1(n);e&&(i=Ot(i).call(i,function(s){return rS(n,s).enumerable})),r.push.apply(r,i)}return r}function dG(n){for(var e=1;e<arguments.length;e++){var r,i,s=arguments[e]!=null?arguments[e]:{};e%2?mt(r=uG(Object(s),!0)).call(r,function(o){Sn(n,o,s[o])}):c1?ese(n,c1(s)):mt(i=uG(Object(s))).call(i,function(o){oS(n,o,rS(s,o))})}return n}function Dl(n){var e;if(!n)return!1;let r=(e=n.idProp)!==null&&e!==void 0?e:n._idProp;return r?u6e(r,n):!1}const FD=/^\/?Date\((-?\d+)/i,y6e=/^\d+$/;function q5(n,e){let r;if(n!==void 0){if(n===null)return null;if(!e)return n;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!n;case"number":case"Number":return ds(n)&&!isNaN(Date.parse(n))?As(n).valueOf():Number(n.valueOf());case"string":case"String":return String(n);case"Date":try{return q5(n,"Moment").toDate()}catch(i){throw i instanceof TypeError?new TypeError("Cannot convert object of type "+Tg(n)+" to type "+e):i}case"Moment":if(e0(n))return As(n);if(n instanceof Date)return As(n.valueOf());if(As.isMoment(n))return As(n);if(ds(n))return r=FD.exec(n),r?As(Number(r[1])):(r=y6e.exec(n),As(r?Number(n):n));throw new TypeError("Cannot convert object of type "+Tg(n)+" to type "+e);case"ISODate":if(e0(n))return new Date(n);if(n instanceof Date)return n.toISOString();if(As.isMoment(n))return n.toDate().toISOString();if(ds(n))return r=FD.exec(n),r?new Date(Number(r[1])).toISOString():As(n).format();throw new Error("Cannot convert object of type "+Tg(n)+" to type ISODate");case"ASPDate":if(e0(n))return"/Date("+n+")/";if(n instanceof Date||As.isMoment(n))return"/Date("+n.valueOf()+")/";if(ds(n)){r=FD.exec(n);let i;return r?i=new Date(Number(r[1])).valueOf():i=new Date(n).valueOf(),"/Date("+i+")/"}else throw new Error("Cannot convert object of type "+Tg(n)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function Up(n){var e,r,i,s,o,a;let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"};const c=n._idProp,u=new zp({fieldId:c}),h=mn(e=i6e(n)).call(e,d=>{var f;return sS(f=Pr(d)).call(f,(m,g)=>(m[g]=q5(d[g],l[g]),m),{})}).to(u);return h.all().start(),{add:function(){return n.getDataSet().add(...arguments)},remove:function(){return n.getDataSet().remove(...arguments)},update:function(){return n.getDataSet().update(...arguments)},updateOnly:function(){return n.getDataSet().updateOnly(...arguments)},clear:function(){return n.getDataSet().clear(...arguments)},forEach:Le(r=mt(u)).call(r,u),get:Le(i=u.get).call(i,u),getIds:Le(s=u.getIds).call(s,u),off:Le(o=u.off).call(o,u),on:Le(a=u.on).call(a,u),get length(){return u.length},idProp:c,type:l,rawDS:n,coercedDS:u,dispose:()=>h.stop()}}const vse=n=>{const e=new b6e.FilterXSS(n);return r=>typeof r=="string"?e.process(r):r},v6e=n=>n;let VA=vse();const x6e=n=>{n&&(n.disabled===!0?(VA=v6e,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):n.filterOptions&&(VA=vse(n.filterOptions)))},Z=dG(dG({},rLe),{},{convert:q5,setupXSSProtection:x6e});oS(Z,"xss",{get:function(){return VA}});var hG={},$D,fG;function w6e(){if(fG)return $D;fG=1;var n=sr(),e=nn(),r=an(),i=no(),s=mie().trim,o=w5(),a=r("".charAt),l=n.parseFloat,c=n.Symbol,u=c&&c.iterator,h=1/l(o+"-0")!==-1/0||u&&!e(function(){l(Object(u))});return $D=h?function(f){var m=s(i(f)),g=l(m);return g===0&&a(m,0)==="-"?-0:g}:l,$D}var pG;function _6e(){if(pG)return hG;pG=1;var n=Tt(),e=w6e();return n({global:!0,forced:parseFloat!==e},{parseFloat:e}),hG}var BD,mG;function S6e(){if(mG)return BD;mG=1,_6e();var n=In();return BD=n.parseFloat,BD}var zD,gG;function k6e(){if(gG)return zD;gG=1;var n=S6e();return zD=n,zD}var UD,bG;function C6e(){return bG||(bG=1,UD=k6e()),UD}var E6e=C6e(),u1=Pt(E6e);class du{constructor(){this.options=null,this.props=null}setOptions(e){e&&Z.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}var yG={},vG;function T6e(){if(vG)return yG;vG=1;var n=Tt(),e=gie();return n({target:"String",proto:!0},{repeat:e}),yG}var WD,xG;function P6e(){if(xG)return WD;xG=1,T6e();var n=or();return WD=n("String","repeat"),WD}var qD,wG;function M6e(){if(wG)return qD;wG=1;var n=Fn(),e=P6e(),r=String.prototype;return qD=function(i){var s=i.repeat;return typeof i=="string"||i===r||n(r,i)&&s===r.repeat?e:s},qD}var HD,_G;function D6e(){if(_G)return HD;_G=1;var n=M6e();return HD=n,HD}var VD,SG;function O6e(){return SG||(SG=1,VD=D6e()),VD}var I6e=O6e(),Wh=Pt(I6e);function H5(n,e,r){if(r&&!Vt(r))return H5(n,e,[r]);if(e.hiddenDates=[],r&&Vt(r)==!0){var i;for(let s=0;s<r.length;s++)if(Wh(r[s])===void 0){const o={};o.start=n(r[s].start).toDate().valueOf(),o.end=n(r[s].end).toDate().valueOf(),e.hiddenDates.push(o)}pr(i=e.hiddenDates).call(i,(s,o)=>s.start-o.start)}}function d1(n,e,r){if(r&&!Vt(r))return d1(n,e,[r]);if(r&&e.domProps.centerContainer.width!==void 0){H5(n,e,r);const i=n(e.range.start),s=n(e.range.end),a=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let d=0;d<r.length;d++)if(Wh(r[d])!==void 0){let f=n(r[d].start),m=n(r[d].end);if(f._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(r[d].start));if(m._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(r[d].end));if(m-f>=4*a){let b=0,y=s.clone();switch(Wh(r[d])){case"daily":f.day()!=m.day()&&(b=1),f=f.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7,"days"),m=m.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7-b,"days"),y.add(1,"weeks");break;case"weekly":{const v=m.diff(f,"days"),w=f.day();f=f.date(i.date()).month(i.month()).year(i.year()),m=f.clone(),f=f.day(w).subtract(1,"weeks"),m=m.day(w).add(v,"days").subtract(1,"weeks"),y.add(1,"weeks");break}case"monthly":f.month()!=m.month()&&(b=1),f=f.month(i.month()).year(i.year()).subtract(1,"months"),m=m.month(i.month()).year(i.year()).subtract(1,"months").add(b,"months"),y.add(1,"months");break;case"yearly":f.year()!=m.year()&&(b=1),f=f.year(i.year()).subtract(1,"years"),m=m.year(i.year()).subtract(1,"years").add(b,"years"),y.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Wh(r[d]));return}for(;f<y;)switch(e.hiddenDates.push({start:f.valueOf(),end:m.valueOf()}),Wh(r[d])){case"daily":f=f.add(1,"days"),m=m.add(1,"days");break;case"weekly":f=f.add(1,"weeks"),m=m.add(1,"weeks");break;case"monthly":f=f.add(1,"months"),m=m.add(1,"months");break;case"yearly":f=f.add(1,"y"),m=m.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Wh(r[d]));return}e.hiddenDates.push({start:f.valueOf(),end:m.valueOf()})}}A6e(e);const l=f1(e.range.start,e.hiddenDates),c=f1(e.range.end,e.hiddenDates);let u=e.range.start,h=e.range.end;l.hidden==!0&&(u=e.range.startToFront==!0?l.startDate-1:l.endDate+1),c.hidden==!0&&(h=e.range.endToFront==!0?c.startDate-1:c.endDate+1),(l.hidden==!0||c.hidden==!0)&&e.range._applyRange(u,h)}}function A6e(n){var e;const r=n.hiddenDates,i=[];for(var s=0;s<r.length;s++)for(let o=0;o<r.length;o++)s!=o&&r[o].remove!=!0&&r[s].remove!=!0&&(r[o].start>=r[s].start&&r[o].end<=r[s].end?r[o].remove=!0:r[o].start>=r[s].start&&r[o].start<=r[s].end?(r[s].end=r[o].end,r[o].remove=!0):r[o].end>=r[s].start&&r[o].end<=r[s].end&&(r[s].start=r[o].start,r[o].remove=!0));for(s=0;s<r.length;s++)r[s].remove!==!0&&i.push(r[s]);n.hiddenDates=i,pr(e=n.hiddenDates).call(e,(o,a)=>o.start-a.start)}function R6e(n,e,r){let i=!1;const s=e.current.valueOf();for(let a=0;a<e.hiddenDates.length;a++){const l=e.hiddenDates[a].start;var o=e.hiddenDates[a].end;if(s>=l&&s<o){i=!0;break}}if(i==!0&&s<e._end.valueOf()&&s!=r){const a=n(r),l=n(o);a.year()!=l.year()?e.switchedYear=!0:a.month()!=l.month()?e.switchedMonth=!0:a.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}}function kG(n,e,r){let i;if(n.body.hiddenDates.length==0)return i=n.range.conversion(r),(e.valueOf()-i.offset)*i.scale;{const s=f1(e,n.body.hiddenDates);s.hidden==!0&&(e=s.startDate);const o=n0(n.body.hiddenDates,n.range.start,n.range.end);if(e<n.range.start){i=n.range.conversion(r,o);const a=N6e(n.body.hiddenDates,e,i.offset);return e=n.options.moment(e).toDate().valueOf(),e=e+a,-(i.offset-e.valueOf())*i.scale}else if(e>n.range.end){const a={start:n.range.start,end:e};return e=EG(n.options.moment,n.body.hiddenDates,a,e),i=n.range.conversion(r,o),(e.valueOf()-i.offset)*i.scale}else return e=EG(n.options.moment,n.body.hiddenDates,n.range,e),i=n.range.conversion(r,o),(e.valueOf()-i.offset)*i.scale}}function CG(n,e,r){if(n.body.hiddenDates.length==0){const i=n.range.conversion(r);return new Date(e/i.scale+i.offset)}else{const i=n0(n.body.hiddenDates,n.range.start,n.range.end),o=(n.range.end-n.range.start-i)*e/r,a=j6e(n.body.hiddenDates,n.range,o);return new Date(a+o+n.range.start)}}function n0(n,e,r){let i=0;for(let s=0;s<n.length;s++){const o=n[s].start,a=n[s].end;o>=e&&a<r&&(i+=a-o)}return i}function N6e(n,e,r){let i=0;for(let s=0;s<n.length;s++){const o=n[s].start,a=n[s].end;o>=e&&a<=r&&(i+=a-o)}return i}function EG(n,e,r,i){return i=n(i).toDate().valueOf(),i-=h1(n,e,r,i),i}function h1(n,e,r,i){let s=0;i=n(i).toDate().valueOf();for(let o=0;o<e.length;o++){const a=e[o].start,l=e[o].end;a>=r.start&&l<r.end&&i>=l&&(s+=l-a)}return s}function j6e(n,e,r){let i=0,s=0,o=e.start;for(let a=0;a<n.length;a++){const l=n[a].start,c=n[a].end;if(l>=e.start&&c<e.end){if(s+=l-o,o=c,s>=r)break;i+=c-l}}return i}function Bu(n,e,r,i){const s=f1(e,n);return s.hidden==!0?r<0?i==!0?s.startDate-(s.endDate-e)-1:s.startDate-1:i==!0?s.endDate+(e-s.startDate)+1:s.endDate+1:e}function f1(n,e){for(let s=0;s<e.length;s++){var r=e[s].start,i=e[s].end;if(n>=r&&n<i)return{hidden:!0,startDate:r,endDate:i}}return{hidden:!1,startDate:r,endDate:i}}class aS extends du{constructor(e,r){var i,s,o,a,l,c,u;super();const h=Si().hours(0).minutes(0).seconds(0).milliseconds(0),d=h.clone().add(-3,"days").valueOf(),f=h.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,r===void 0?(this.start=d,this.end=f):(this.start=r.start||d,this.end=r.end||f),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:Si,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=Z.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",Le(i=this._onDragStart).call(i,this)),this.body.emitter.on("panmove",Le(s=this._onDrag).call(s,this)),this.body.emitter.on("panend",Le(o=this._onDragEnd).call(o,this)),this.body.emitter.on("mousewheel",Le(a=this._onMouseWheel).call(a,this)),this.body.emitter.on("touch",Le(l=this._onTouch).call(l,this)),this.body.emitter.on("pinch",Le(c=this._onPinch).call(c,this)),this.body.dom.rollingModeBtn.addEventListener("click",Le(u=this.startRolling).call(u,this)),this.setOptions(r)}setOptions(e){if(e){const r=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];Z.selectiveExtend(r,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function r(){e.stopRolling(),e.rolling=!0;let i=e.end-e.start;const s=Z.convert(new Date,"Date").valueOf(),o=e.options.rollingMode&&e.options.rollingMode.offset||.5,a=s-i*o,l=s+i*(1-o),c={animation:!1};e.setRange(a,l,c),i=1/e.conversion(e.body.domProps.center.width).scale/10,i<30&&(i=30),i>1e3&&(i=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=ci(r,i)}r()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,r,i,s,o){i||(i={}),i.byUser!==!0&&(i.byUser=!1);const a=this,l=e!=null?Z.convert(e,"Date").valueOf():null,c=r!=null?Z.convert(r,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,i.animation){const d=this.start,f=this.end,m=typeof i.animation=="object"&&"duration"in i.animation?i.animation.duration:500,g=typeof i.animation=="object"&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad",b=Z.easingFunctions[g];if(!b){var u;throw new Error(ur(u="Unknown easing function ".concat($i(g),". Choose from: ")).call(u,Pr(Z.easingFunctions).join(", ")))}const y=cs();let v=!1;const w=()=>{if(!a.props.touch.dragging){const S=cs()-y,_=b(S/m),C=S>m,P=C||l===null?l:d+(l-d)*_,T=C||c===null?c:f+(c-f)*_;h=a._applyRange(P,T),d1(a.options.moment,a.body,a.options.hiddenDates),v=v||h;const O={start:new Date(a.start),end:new Date(a.end),byUser:i.byUser,event:i.event};if(o&&o(_,h,C),h&&a.body.emitter.emit("rangechange",O),C){if(v&&(a.body.emitter.emit("rangechanged",O),s))return s()}else a.animationTimer=ci(w,20)}};return w()}else{var h=this._applyRange(l,c);if(d1(this.options.moment,this.body,this.options.hiddenDates),h){const d={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};if(this.body.emitter.emit("rangechange",d),clearTimeout(a.timeoutID),a.timeoutID=ci(()=>{a.body.emitter.emit("rangechanged",d)},200),s)return s()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,r){let i=e!=null?Z.convert(e,"Date").valueOf():this.start,s=r!=null?Z.convert(r,"Date").valueOf():this.end;const o=this.options.max!=null?Z.convert(this.options.max,"Date").valueOf():null,a=this.options.min!=null?Z.convert(this.options.min,"Date").valueOf():null;let l;if(isNaN(i)||i===null)throw new Error('Invalid start "'.concat(e,'"'));if(isNaN(s)||s===null)throw new Error('Invalid end "'.concat(r,'"'));if(s<i&&(s=i),a!==null&&i<a&&(l=a-i,i+=l,s+=l,o!=null&&s>o&&(s=o)),o!==null&&s>o&&(l=s-o,i-=l,s-=l,a!=null&&i<a&&(i=a)),this.options.zoomMin!==null){let u=u1(this.options.zoomMin);u<0&&(u=0),s-i<u&&(this.end-this.start===u&&i>=this.start-.5&&s<=this.end?(i=this.start,s=this.end):(l=u-(s-i),i-=l/2,s+=l/2))}if(this.options.zoomMax!==null){let u=u1(this.options.zoomMax);u<0&&(u=0),s-i>u&&(this.end-this.start===u&&i<this.start&&s>this.end?(i=this.start,s=this.end):(l=s-i-u,i+=l/2,s-=l/2))}const c=this.start!=i||this.end!=s;return!(i>=this.start&&i<=this.end||s>=this.start&&s<=this.end)&&!(this.start>=i&&this.start<=s||this.end>=i&&this.end<=s)&&this.body.emitter.emit("checkRangedItems"),this.start=i,this.end=s,c}getRange(){return{start:this.start,end:this.end}}conversion(e,r){return aS.conversion(this.start,this.end,e,r)}static conversion(e,r,i,s){return s===void 0&&(s=0),i!=0&&r-e!=0?{offset:e,scale:i/(r-e-s)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const r=this.options.direction;TG(r);let i=r=="horizontal"?e.deltaX:e.deltaY;i-=this.deltaDifference;let s=this.props.touch.end-this.props.touch.start;const o=n0(this.body.hiddenDates,this.start,this.end);s-=o;const a=r=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let l;this.options.rtl?l=i/a*s:l=-i/a*s;const c=this.props.touch.start+l,u=this.props.touch.end+l,h=Bu(this.body.hiddenDates,c,this.previousDelta-i,!0),d=Bu(this.body.hiddenDates,u,this.previousDelta-i,!0);if(h!=c||d!=u){this.deltaDifference+=i,this.props.touch.start=h,this.props.touch.end=d,this._onDrag(e);return}this.previousDelta=i,this._applyRange(c,u);const f=new Date(this.start),m=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:m,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let r=0;if(e.wheelDelta?r=e.wheelDelta/120:e.detail?r=-e.detail/3:e.deltaY&&(r=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&r){const i=this.options.zoomFriction||5;let s;r<0?s=1-r/i:s=1/(1+r/i);let o;if(this.rolling){const a=this.options.rollingMode&&this.options.rollingMode.offset||.5;o=this.start+(this.end-this.start)*a}else{const a=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);o=this._pointerToDate(a)}this.zoom(s,o,r,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,Z.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;Z.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const r=1/(e.scale+this.scaleOffset),i=this.props.touch.centerDate,s=n0(this.body.hiddenDates,this.start,this.end),o=h1(this.options.moment,this.body.hiddenDates,this,i),a=s-o;let l=i-o+(this.props.touch.start-(i-o))*r,c=i+a+(this.props.touch.end-(i+a))*r;this.startToFront=1-r<=0,this.endToFront=r-1<=0;const u=Bu(this.body.hiddenDates,l,1-r,!0),h=Bu(this.body.hiddenDates,c,r-1,!0);(u!=l||h!=c)&&(this.props.touch.start=u,this.props.touch.end=h,this.scaleOffset=1-e.scale,l=u,c=h);const d={animation:!1,byUser:!0,event:e};this.setRange(l,c,d),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const r=e.center?e.center.x:e.clientX,i=this.body.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?r-i.left:i.right-r,o=this.body.util.toTime(s);return o>=this.start&&o<=this.end}_pointerToDate(e){let r;const i=this.options.direction;if(TG(i),i=="horizontal")return this.body.util.toTime(e.x).valueOf();{const s=this.body.domProps.center.height;return r=this.conversion(s),e.y/r.scale+r.offset}}getPointer(e,r){const i=r.getBoundingClientRect();return this.options.rtl?{x:i.right-e.x,y:e.y-i.top}:{x:e.x-i.left,y:e.y-i.top}}zoom(e,r,i,s){r==null&&(r=(this.start+this.end)/2);const o=n0(this.body.hiddenDates,this.start,this.end),a=h1(this.options.moment,this.body.hiddenDates,this,r),l=o-a;let c=r-a+(this.start-(r-a))*e,u=r+l+(this.end-(r+l))*e;this.startToFront=!(i>0),this.endToFront=!(-i>0);const h=Bu(this.body.hiddenDates,c,i,!0),d=Bu(this.body.hiddenDates,u,-i,!0);(h!=c||d!=u)&&(c=h,u=d);const f={animation:!1,byUser:!0,event:s};this.setRange(c,u,f),this.startToFront=!1,this.endToFront=!0}move(e){const r=this.end-this.start,i=this.start+r*e,s=this.end+r*e;this.start=i,this.end=s}moveTo(e){const i=(this.start+this.end)/2-e,s=this.start-i,o=this.end-i,a={animation:!1,byUser:!0,event:null};this.setRange(s,o,a)}destroy(){this.stopRolling()}}function TG(n){if(n!="horizontal"&&n!="vertical")throw new TypeError('Unknown direction "'.concat(n,'". Choose "horizontal" or "vertical".'))}var YD,PG;function L6e(){if(PG)return YD;PG=1,vie();var n=In();return YD=n.setInterval,YD}var GD,MG;function F6e(){return MG||(MG=1,GD=L6e()),GD}var $6e=F6e(),B6e=Pt($6e),eg=null;function YA(n,e){var r=e||{preventDefault:!1};if(n.Manager){var i=n,s=function(u,h){var d=Object.create(r);return h&&i.assign(d,h),YA(new i(u,d),d)};return i.assign(s,i),s.Manager=function(u,h){var d=Object.create(r);return h&&i.assign(d,h),YA(new i.Manager(u,d),d)},s}var o=Object.create(n),a=n.element;a.hammer||(a.hammer=[]),a.hammer.push(o),n.on("hammer.input",function(u){(r.preventDefault===!0||r.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&(eg=u.target)}),o._handlers={},o.on=function(u,h){return l(u).forEach(function(d){var f=o._handlers[d];f||(o._handlers[d]=f=[],n.on(d,c)),f.push(h)}),o},o.off=function(u,h){return l(u).forEach(function(d){var f=o._handlers[d];f&&(f=h?f.filter(function(m){return m!==h}):[],f.length>0?o._handlers[d]=f:(n.off(d,c),delete o._handlers[d]))}),o},o.emit=function(u,h){eg=h.target,n.emit(u,h)},o.destroy=function(){var u=n.element.hammer,h=u.indexOf(o);h!==-1&&u.splice(h,1),u.length||delete n.element.hammer,o._handlers={},n.destroy()};function l(u){return u.match(/[^ ]+/g)}function c(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var h=!1;u.stopPropagation=function(){h=!0};var d=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof d=="function"&&(u.srcEvent.stopPropagation=function(){d(),u.stopPropagation()}),u.firstTarget=eg;for(var f=eg.isConnected?eg:u.target;f&&!h;){var m=f.hammer;if(m){for(var g,b=0;b<m.length;b++)if(g=m[b]._handlers[u.type],g)for(var y=0;y<g.length&&!h;y++)g[y](u)}f=f.parentNode}}return o}function z6e(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get(){return{set:n}}}}let GA;if(typeof window<"u"){const n=window.Hammer||D5;GA=YA(n,{preventDefault:"mouse"})}else GA=function(){return z6e()};var wi=GA;function xse(n,e){e.inputHandler=function(r){r.isFirst&&e(r)},n.on("hammer.input",e.inputHandler)}function U6e(n,e){return e.inputHandler=function(r){r.isFinal&&e(r)},n.on("hammer.input",e.inputHandler)}function W6e(n){const e="pan-y";return n.getTouchAction=function(){return[e]},n}class qd{constructor(e,r,i,s,o){this.moment=o&&o.moment||Si,this.options=o||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,r,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Vt(s)?this.hiddenDates=s:s!=null?this.hiddenDates=[s]:this.hiddenDates=[],this.format=qd.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const r=Z.deepExtend({},qd.FORMAT);this.format=Z.deepExtend(r,e)}setRange(e,r,i){if(!(e instanceof Date)||!(r instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):cs(),this._end=r!=null?this.moment(r.valueOf()):cs(),this.autoScale&&this.setMinimumStep(i)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(Bu(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const r=this.current.clone();r.add(1,"week"),r.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,R6e(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const r=1e3*60*60*24*30*12,i=1e3*60*60*24*30,s=1e3*60*60*24,o=1e3*60*60,a=1e3*60,l=1e3,c=1;r*1e3>e&&(this.scale="year",this.step=1e3),r*500>e&&(this.scale="year",this.step=500),r*100>e&&(this.scale="year",this.step=100),r*50>e&&(this.scale="year",this.step=50),r*10>e&&(this.scale="year",this.step=10),r*5>e&&(this.scale="year",this.step=5),r>e&&(this.scale="year",this.step=1),i*3>e&&(this.scale="month",this.step=3),i>e&&(this.scale="month",this.step=1),s*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),s*2>e&&(this.scale="day",this.step=2),s>e&&(this.scale="day",this.step=1),s/2>e&&(this.scale="weekday",this.step=1),o*4>e&&(this.scale="hour",this.step=4),o>e&&(this.scale="hour",this.step=1),a*15>e&&(this.scale="minute",this.step=15),a*10>e&&(this.scale="minute",this.step=10),a*5>e&&(this.scale="minute",this.step=5),a>e&&(this.scale="minute",this.step=1),l*15>e&&(this.scale="second",this.step=15),l*10>e&&(this.scale="second",this.step=10),l*5>e&&(this.scale="second",this.step=5),l>e&&(this.scale="second",this.step=1),c*200>e&&(this.scale="millisecond",this.step=200),c*100>e&&(this.scale="millisecond",this.step=100),c*50>e&&(this.scale="millisecond",this.step=50),c*10>e&&(this.scale="millisecond",this.step=10),c*5>e&&(this.scale="millisecond",this.step=5),c>e&&(this.scale="millisecond",this.step=1)}static snap(e,r,i){let s=Si(e);if(r=="year"){const o=s.year()+Math.round(s.month()/12);s=s.year(Math.round(o/i)*i).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(r=="month")s.date()>15?s=s.date(1).add(1,"month"):s=s.date(1),s=s.hours(0).minutes(0).seconds(0).milliseconds(0);else if(r=="week")s.weekday()>2?s=s.weekday(0).add(1,"week"):s=s.weekday(0),s=s.hours(0).minutes(0).seconds(0).milliseconds(0);else if(r=="day"){switch(i){case 5:case 2:s=s.hours(Math.round(s.hours()/24)*24);break;default:s=s.hours(Math.round(s.hours()/12)*12);break}s=s.minutes(0).seconds(0).milliseconds(0)}else if(r=="weekday"){switch(i){case 5:case 2:s=s.hours(Math.round(s.hours()/12)*12);break;default:s=s.hours(Math.round(s.hours()/6)*6);break}s=s.minutes(0).seconds(0).milliseconds(0)}else if(r=="hour"){switch(i){case 4:s=s.minutes(Math.round(s.minutes()/60)*60);break;default:s=s.minutes(Math.round(s.minutes()/30)*30);break}s=s.seconds(0).milliseconds(0)}else if(r=="minute"){switch(i){case 15:case 10:s=s.minutes(Math.round(s.minutes()/5)*5).seconds(0);break;case 5:s=s.seconds(Math.round(s.seconds()/60)*60);break;default:s=s.seconds(Math.round(s.seconds()/30)*30);break}s=s.milliseconds(0)}else if(r=="second")switch(i){case 15:case 10:s=s.seconds(Math.round(s.seconds()/5)*5).milliseconds(0);break;case 5:s=s.milliseconds(Math.round(s.milliseconds()/1e3)*1e3);break;default:s=s.milliseconds(Math.round(s.milliseconds()/500)*500);break}else if(r=="millisecond"){const o=i>5?i/2:1;s=s.milliseconds(Math.round(s.milliseconds()/o)*o)}return s}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const r=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return r&&r.length>0?this.moment(e).format(r):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const r=this.format.majorLabels[this.scale];return r&&r.length>0?this.moment(e).format(r):""}getClassName(){var e;const r=this.moment,i=this.moment(this.current),s=i.locale?i.locale("en"):i.lang("en"),o=this.step,a=[];function l(f){return f/o%2==0?" vis-even":" vis-odd"}function c(f){return f.isSame(cs(),"day")?" vis-today":f.isSame(r().add(1,"day"),"day")?" vis-tomorrow":f.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function u(f){return f.isSame(cs(),"week")?" vis-current-week":""}function h(f){return f.isSame(cs(),"month")?" vis-current-month":""}function d(f){return f.isSame(cs(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":a.push(c(s)),a.push(l(s.milliseconds()));break;case"second":a.push(c(s)),a.push(l(s.seconds()));break;case"minute":a.push(c(s)),a.push(l(s.minutes()));break;case"hour":a.push(ur(e="vis-h".concat(s.hours())).call(e,this.step==4?"-h"+(s.hours()+4):"")),a.push(c(s)),a.push(l(s.hours()));break;case"weekday":a.push("vis-".concat(s.format("dddd").toLowerCase())),a.push(c(s)),a.push(u(s)),a.push(l(s.date()));break;case"day":a.push("vis-day".concat(s.date())),a.push("vis-".concat(s.format("MMMM").toLowerCase())),a.push(c(s)),a.push(h(s)),a.push(this.step<=2?c(s):""),a.push(this.step<=2?"vis-".concat(s.format("dddd").toLowerCase()):""),a.push(l(s.date()-1));break;case"week":a.push("vis-week".concat(s.format("w"))),a.push(u(s)),a.push(l(s.week()));break;case"month":a.push("vis-".concat(s.format("MMMM").toLowerCase())),a.push(h(s)),a.push(l(s.month()));break;case"year":a.push("vis-year".concat(s.year())),a.push(d(s)),a.push(l(s.year()));break}return Ot(a).call(a,String).join(" ")}}qd.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class p1 extends du{constructor(e,r){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:Z.extend({},qd.FORMAT),moment:Si,timeAxis:null},this.options=Z.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(r)}setOptions(e){e&&(Z.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),Z.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof Si.locale=="function"?Si.locale(e.locale):Si.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,r=this.dom.foreground,i=this.dom.background,s=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,o=r.parentNode!==s;this._calculateCharSize();const a=this.options.showMinorLabels&&this.options.orientation.axis!=="none",l=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=a?e.minorCharHeight:0,e.majorLabelHeight=l?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=r.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const c=r.nextSibling,u=i.nextSibling;return r.parentNode&&r.parentNode.removeChild(r),i.parentNode&&i.parentNode.removeChild(i),r.style.height="".concat(this.props.height,"px"),this._repaintLabels(),c?s.insertBefore(r,c):s.appendChild(r),u?this.body.dom.backgroundVertical.insertBefore(i,u):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o}_repaintLabels(){const e=this.options.orientation.axis,r=Z.convert(this.body.range.start,"Number"),i=Z.convert(this.body.range.end,"Number"),s=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let o=s-h1(this.options.moment,this.body.hiddenDates,this.body.range,s);o-=this.body.util.toTime(0).valueOf();const a=new qd(new Date(r),new Date(i),o,this.body.hiddenDates,this.options);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;const l=this.dom;l.redundant.lines=l.lines,l.redundant.majorTexts=l.majorTexts,l.redundant.minorTexts=l.minorTexts,l.lines=[],l.majorTexts=[],l.minorTexts=[];let c,u,h,d,f,m,g=0,b,y,v,w=0;const k=1e3;let S;for(a.start(),u=a.getCurrent(),d=this.body.util.toScreen(u);a.hasNext()&&w<k;){switch(w++,f=a.isMajor(),S=a.getClassName(),c=u,h=d,a.next(),u=a.getCurrent(),d=this.body.util.toScreen(u),b=g,g=d-h,a.scale){case"week":m=!0;break;default:m=g>=b*.4;break}if(this.options.showMinorLabels&&m){var _=this._repaintMinorText(h,a.getLabelMinor(c),e,S);_.style.width="".concat(g,"px")}f&&this.options.showMajorLabels?(h>0&&(v==null&&(v=h),_=this._repaintMajorText(h,a.getLabelMajor(c),e,S)),y=this._repaintMajorLine(h,g,e,S)):m?y=this._repaintMinorLine(h,g,e,S):y&&(y.style.width="".concat(us(y.style.width)+g,"px"))}if(w===k&&!DG&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(k," lines.")),DG=!0),this.options.showMajorLabels){const C=this.body.util.toTime(0),P=a.getLabelMajor(C),T=P.length*(this.props.majorCharWidth||10)+10;(v==null||T<v)&&this._repaintMajorText(0,P,e,S)}mt(Z).call(Z,this.dom.redundant,C=>{for(;C.length;){const P=C.pop();P&&P.parentNode&&P.parentNode.removeChild(P)}})}_repaintMinorText(e,r,i,s){let o=this.dom.redundant.minorTexts.shift();if(!o){const l=document.createTextNode("");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}this.dom.minorTexts.push(o),o.innerHTML=Z.xss(r);let a=i=="top"?this.props.majorLabelHeight:0;return this._setXY(o,e,a),o.className="vis-text vis-minor ".concat(s),o}_repaintMajorText(e,r,i,s){let o=this.dom.redundant.majorTexts.shift();if(!o){const l=document.createElement("div");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}o.childNodes[0].innerHTML=Z.xss(r),o.className="vis-text vis-major ".concat(s);let a=i=="top"?0:this.props.minorLabelHeight;return this._setXY(o,e,a),this.dom.majorTexts.push(o),o}_setXY(e,r,i){var s;const o=this.options.rtl?r*-1:r;e.style.transform=ur(s="translate(".concat(o,"px, ")).call(s,i,"px)")}_repaintMinorLine(e,r,i,s){var o;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const l=this.props;a.style.width="".concat(r,"px"),a.style.height="".concat(l.minorLineHeight,"px");let c=i=="top"?l.majorLabelHeight:this.body.domProps.top.height,u=e-l.minorLineWidth/2;return this._setXY(a,u,c),a.className=ur(o="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(o,s),a}_repaintMajorLine(e,r,i,s){var o;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const l=this.props;a.style.width="".concat(r,"px"),a.style.height="".concat(l.majorLineHeight,"px");let c=i=="top"?0:this.body.domProps.top.height,u=e-l.majorLineWidth/2;return this._setXY(a,u,c),a.className=ur(o="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(o,s),a}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var DG=!1;function q6e(n){var e=window,r={},i={keydown:{},keyup:{}},s={},o;for(o=97;o<=122;o++)s[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)s[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)s[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)s["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)s["num"+o]={code:96+o,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(u){c(u,"keydown")},l=function(u){c(u,"keyup")},c=function(u,h){if(i[h][u.keyCode]!==void 0)for(var d=i[h][u.keyCode],f=0;f<d.length;f++)(d[f].shift===void 0||d[f].shift==!0&&u.shiftKey==!0||d[f].shift==!1&&u.shiftKey==!1)&&d[f].fn(u)};return r.bind=function(u,h,d){if(d===void 0&&(d="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);i[d][s[u].code]===void 0&&(i[d][s[u].code]=[]),i[d][s[u].code].push({fn:h,shift:s[u].shift})},r.bindAll=function(u,h){h===void 0&&(h="keydown");for(var d in s)s.hasOwnProperty(d)&&r.bind(d,u,h)},r.getKey=function(u){for(var h in s)if(s.hasOwnProperty(h)){if(u.shiftKey==!0&&s[h].shift==!0&&u.keyCode==s[h].code)return h;if(u.shiftKey==!1&&s[h].shift==!1&&u.keyCode==s[h].code)return h;if(u.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},r.unbind=function(u,h,d){if(d===void 0&&(d="keydown"),s[u]===void 0)throw new Error("unsupported key: "+u);if(h!==void 0){var f=[],m=i[d][s[u].code];if(m!==void 0)for(var g=0;g<m.length;g++)m[g].fn==h&&m[g].shift==s[u].shift||f.push(i[d][s[u].code][g]);i[d][s[u].code]=f}else i[d][s[u].code]=[]},r.reset=function(){i={keydown:{},keyup:{}}},r.destroy=function(){i={keydown:{},keyup:{}},e.removeEventListener("keydown",a,!0),e.removeEventListener("keyup",l,!0)},e.addEventListener("keydown",a,!0),e.addEventListener("keyup",l,!0),r}function Gs(n){var e,r;this.active=!1,this.dom={container:n},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=wi(this.dom.overlay),this.hammer.on("tap",Le(e=this._onTapOverlay).call(e,this));var i=this,s=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];mt(s).call(s,function(o){i.hammer.on(o,function(a){a.stopPropagation()})}),document&&document.body&&(this.onClick=function(o){H6e(o.target,n)||i.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=q6e(),this.escListener=Le(r=this.deactivate).call(r,this)}_5(Gs.prototype);Gs.current=null;Gs.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Gs.prototype.activate=function(){var n;Gs.current&&Gs.current.deactivate(),Gs.current=this,this.active=!0,this.dom.overlay.style.display="none",Z.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),Le(n=this.keycharm).call(n,"esc",this.escListener)};Gs.prototype.deactivate=function(){Gs.current===this&&(Gs.current=null),this.active=!1,this.dom.overlay.style.display="",Z.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Gs.prototype._onTapOverlay=function(n){this.activate(),n.stopPropagation()};function H6e(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const V5={current:"current",time:"time",deleteSelected:"Delete selected"},V6e=V5,Y6e=V5,Y5={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},G6e=Y5,K6e=Y5,G5={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},X6e=G5,Q6e=G5,K5={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},J6e=K5,Z6e=K5,gy={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},e$e=gy,t$e=gy,n$e=gy,r$e=gy,wse={current:"actual",time:"hora",deleteSelected:"Eliminar seleccin"},i$e=wse,_se={current:"",time:"",deleteSelected:" "},s$e=_se,Sse={current:"",time:"",deleteSelected:" "},o$e=Sse,kse={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},a$e=kse,X5={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},l$e=X5,c$e=X5,Cse={current:"gncel",time:"zaman",deleteSelected:"Seileni sil"},u$e=Cse,Ese={current:"",time:"",deleteSelected:""},d$e=Ese,Tse={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},h$e=Tse,lS={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},f$e=lS,p$e=lS,m$e=lS,Pse={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},g$e=Pse,Wp={en:V5,en_EN:V6e,en_US:Y6e,it:Y5,it_IT:G6e,it_CH:K6e,nl:G5,nl_NL:X6e,nl_BE:Q6e,de:K5,de_DE:J6e,de_CH:Z6e,fr:gy,fr_FR:e$e,fr_CA:t$e,fr_BE:n$e,fr_CH:r$e,es:wse,es_ES:i$e,uk:_se,uk_UA:s$e,ru:Sse,ru_RU:o$e,pl:kse,pl_PL:a$e,pt:X5,pt_BR:l$e,pt_PT:c$e,tr:Cse,tr_TR:u$e,ja:Ese,ja_JP:d$e,lt:Pse,lt_LT:g$e,sv:Tse,sv_SE:h$e,nb:lS,nn:p$e,nb_NO:f$e,nn_NO:m$e};class Q5 extends du{constructor(e,r){var i;super(),this.body=e,this.defaultOptions={moment:Si,locales:Wp,locale:"en",id:void 0,title:void 0},this.options=Z.extend({},this.defaultOptions),this.setOptions(r),this.options.locales=Z.extend({},Wp,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];mt(i=Pr(this.options.locales)).call(i,o=>{this.options.locales[o]=Z.extend({},s,this.options.locales[o])}),r&&r.time!=null?this.customTime=r.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&Z.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){var e,r,i;const s=document.createElement("div");s["custom-time"]=this,s.className="vis-custom-time ".concat(this.options.id||""),s.style.position="absolute",s.style.top="0px",s.style.height="100%",this.bar=s;const o=document.createElement("div");o.style.position="relative",o.style.top="0px",this.options.rtl?o.style.right="-10px":o.style.left="-10px",o.style.height="100%",o.style.width="20px";function a(l){this.body.range._onMouseWheel(l)}o.addEventListener?(o.addEventListener("mousewheel",Le(a).call(a,this),!1),o.addEventListener("DOMMouseScroll",Le(a).call(a,this),!1)):o.attachEvent("onmousewheel",Le(a).call(a,this)),s.appendChild(o),this.hammer=new wi(o),this.hammer.on("panstart",Le(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",Le(r=this._onDrag).call(r,this)),this.hammer.on("panend",Le(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:wi.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const r=this.body.util.toScreen(this.customTime);let i=this.options.locales[this.options.locale];i||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),i=this.options.locales.en);let s=this.options.title;if(s===void 0){var o;s=ur(o="".concat(i.time,": ")).call(o,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),s=s.charAt(0).toUpperCase()+s.substring(1)}else typeof s=="function"&&(s=s.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(r,"px"):this.bar.style.left="".concat(r,"px"),this.bar.title=s,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=Z.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,r){if(this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=Z.xss(e),this.marker.style.position="absolute",r){var i;this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",Le(i=this._onMarkerChange).call(i,this)),this.marker.title=e,this.marker.addEventListener("blur",s=>{this.title!=s.target.innerHTML&&(this._onMarkerChanged(s),this.title=s.target.innerHTML)})}this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let r=this.options.rtl?-1*e.deltaX:e.deltaX;const i=this.body.util.toScreen(this.eventParams.customTime)+r,s=this.body.util.toTime(i),o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.options.snap,c=l?l(s,o,a):s;this.setCustomTime(c),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let r=e.target;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"custom-time"))return r["custom-time"];r=r.parentNode}return null}}class Mf{_create(e){var r,i,s;this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",Le(r=this._onTouch).call(r,this)),this.on("panmove",Le(i=this._onDrag).call(i,this));const o=this;this._origRedraw=Le(s=this._redraw).call(s,this),this._redraw=Z.throttle(this._origRedraw),this.on("_change",g=>{o.itemSet&&o.itemSet.initialItemSetDrawn&&g&&g.queue==!0?o._redraw():o._origRedraw()}),this.hammer=new wi(this.dom.root);const a=this.hammer.get("pinch").set({enable:!0});a&&W6e(a),this.hammer.get("pan").set({threshold:5,direction:wi.DIRECTION_ALL}),this.timelineListeners={};const l=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];mt(l).call(l,g=>{const b=y=>{o.isActive()&&o.emit(g,y)};o.hammer.on(g,b),o.timelineListeners[g]=b}),xse(this.hammer,g=>{o.emit("touch",g)}),U6e(this.hammer,g=>{o.emit("release",g)});function c(g){if(!this.isActive())return;if(this.emit("mousewheel",g),this.options.preferZoom){if(!this.options.zoomKey||g[this.options.zoomKey])return}else if(this.options.zoomKey&&g[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let b=0,y=0;"detail"in g&&(y=g.detail*-1),"wheelDelta"in g&&(y=g.wheelDelta),"wheelDeltaY"in g&&(y=g.wheelDeltaY),"wheelDeltaX"in g&&(b=g.wheelDeltaX*-1),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(b=y*-1,y=0),"deltaY"in g&&(y=g.deltaY*-1),"deltaX"in g&&(b=g.deltaX);var v=40,w=800;g.deltaMode&&(g.deltaMode===1?(b*=v,y*=v):(b*=v,y*=w));const k=this.options.verticalScroll,S=Math.abs(y)>=Math.abs(b),_=this.options.horizontalScroll&&this.options.horizontalScrollKey&&g[this.options.horizontalScrollKey];if(k&&S&&!_){const C=this.props.scrollTop,P=C+y;this._setScrollTop(P)!==C&&(this._redraw(),this.emit("scroll",g),g.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let P=(S?y:b)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&S&&(P=-P);const T=this.range.start+P,O=this.range.end+P,D={animation:!1,byUser:!0,event:g};this.range.setRange(T,O,D),g.preventDefault();return}}const u="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(u,Le(c).call(c,this),!1),this.dom.top.addEventListener(u,Le(c).call(c,this),!1),this.dom.bottom.addEventListener(u,Le(c).call(c,this),!1);function h(g){if(o.options.verticalScroll&&(g.preventDefault(),o.isActive())){const b=-g.target.scrollTop;o._setScrollTop(b),o._redraw(),o.emit("scrollSide",g)}}this.dom.left.parentNode.addEventListener("scroll",Le(h).call(h,this)),this.dom.right.parentNode.addEventListener("scroll",Le(h).call(h,this));let d=!1;function f(g){var b;if(g.preventDefault&&(o.emit("dragover",o.getEventProperties(g)),g.preventDefault()),_n(b=g.target.className).call(b,"timeline")>-1&&!d)return g.dataTransfer.dropEffect="move",d=!0,!1}function m(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation();try{var b=JSON.parse(g.dataTransfer.getData("text"));if(!b||!b.content)return}catch{return!1}return d=!1,g.center={x:g.clientX,y:g.clientY},b.target!=="item"?o.itemSet._onAddItem(g):o.itemSet._onDropObjectOnItem(g),o.emit("drop",o.getEventProperties(g)),!1}if(this.dom.center.addEventListener("dragover",Le(f).call(f,this),!1),this.dom.center.addEventListener("drop",Le(m).call(m,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){var r;if(e){const a=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(Z.selectiveExtend(a,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const l=this.timeAxis2=new p1(this.body,this.options);l.setOptions=c=>{const u=c?Z.extend({},c):{};u.orientation="top",p1.prototype.setOptions.call(l,u)},this.components.push(l)}}else if(this.timeAxis2){var i;const l=_n(i=this.components).call(i,this.timeAxis2);if(l!==-1){var s;_i(s=this.components).call(s,l,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&H5(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new Gs(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(mt(r=this.components).call(r,a=>a.setOptions(e)),"configure"in e){var o;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const a=Z.deepExtend({},this.options);mt(o=this.components).call(o,l=>{Z.deepExtend(a,l.options)}),this.configurator.setModuleOptions({global:a})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){var e;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const r in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,r)&&delete this.timelineListeners[r];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,mt(e=this.components).call(e,r=>r.destroy()),this.body=null}setCustomTime(e,r){var i;const s=Ot(i=this.customTimes).call(i,o=>r===o.options.id);if(s.length===0)throw new Error("No custom time bar found with id ".concat($i(r)));s.length>0&&s[0].setCustomTime(e)}getCustomTime(e){var r;const i=Ot(r=this.customTimes).call(r,s=>s.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat($i(e)));return i[0].getCustomTime()}setCustomTimeMarker(e,r,i){var s;const o=Ot(s=this.customTimes).call(s,a=>a.options.id===r);if(o.length===0)throw new Error("No custom time bar found with id ".concat($i(r)));o.length>0&&o[0].setCustomMarker(e,i)}setCustomTimeTitle(e,r){var i;const s=Ot(i=this.customTimes).call(i,o=>o.options.id===r);if(s.length===0)throw new Error("No custom time bar found with id ".concat($i(r)));if(s.length>0)return s[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,r){var i;const s=e!==void 0?Z.convert(e,"Date"):new Date;if(z5(i=this.customTimes).call(i,l=>l.options.id===r))throw new Error("A custom time with id ".concat($i(r)," already exists"));const a=new Q5(this.body,Z.extend({},this.options,{time:s,id:r,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(a),this.components.push(a),this._redraw(),r}removeCustomTime(e){var r;const i=Ot(r=this.customTimes).call(r,s=>s.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat($i(e)));mt(i).call(i,s=>{var o,a,l,c;_i(o=this.customTimes).call(o,_n(a=this.customTimes).call(a,s),1),_i(l=this.components).call(l,_n(c=this.components).call(c,s),1),s.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,r){const i=this.getDataRange();if(i.min===null&&i.max===null)return;const s=i.max-i.min,o=new Date(i.min.valueOf()-s*.01),a=new Date(i.max.valueOf()+s*.01),l=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(o,a,{animation:l},r)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,r,i,s){typeof arguments[2]=="function"&&(s=arguments[2],i={});let o,a;arguments.length==1?(a=arguments[0],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(a=arguments[0],s=arguments[1],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o},s)):(o=i&&i.animation!==void 0?i.animation:!0,this.range.setRange(e,r,{animation:o},s))}moveTo(e,r,i){typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.range.end-this.range.start,o=Z.convert(e,"Date").valueOf(),a=o-s/2,l=o+s/2,c=r&&r.animation!==void 0?r.animation:!0;this.range.setRange(a,l,{animation:c},i)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,r,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.getWindow(),o=s.start.valueOf(),a=s.end.valueOf(),l=a-o,c=l/(1+e),u=(l-c)/2,h=o+u,d=a-u;this.setWindow(h,d,r,i)}zoomOut(e,r,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],r={});const s=this.getWindow(),o=s.start.valueOf(),a=s.end.valueOf(),l=a-o,c=o-l*e/2,u=a+l*e/2;this.setWindow(c,u,r,i)}redraw(){this._redraw()}_redraw(){var e;this.redrawCount++;const r=this.dom;if(!r||!r.container||r.root.offsetWidth==0)return;let i=!1;const s=this.options,o=this.props;d1(this.options.moment,this.body,this.options.hiddenDates),s.orientation=="top"?(Z.addClassName(r.root,"vis-top"),Z.removeClassName(r.root,"vis-bottom")):(Z.removeClassName(r.root,"vis-top"),Z.addClassName(r.root,"vis-bottom")),s.rtl?(Z.addClassName(r.root,"vis-rtl"),Z.removeClassName(r.root,"vis-ltr")):(Z.addClassName(r.root,"vis-ltr"),Z.removeClassName(r.root,"vis-rtl")),r.root.style.maxHeight=Z.option.asSize(s.maxHeight,""),r.root.style.minHeight=Z.option.asSize(s.minHeight,""),r.root.style.width=Z.option.asSize(s.width,"");const a=r.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=r.center.offsetHeight,o.left.height=r.left.offsetHeight,o.right.height=r.right.offsetHeight,o.top.height=r.top.clientHeight||-o.border.top,o.bottom.height=Math.round(r.bottom.getBoundingClientRect().height)||r.bottom.clientHeight||-o.border.bottom;const l=Math.max(o.left.height,o.center.height,o.right.height),c=o.top.height+l+o.bottom.height+o.border.top+o.border.bottom;r.root.style.height=Z.option.asSize(s.height,"".concat(c,"px")),o.root.height=r.root.offsetHeight,o.background.height=o.root.height;const u=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=u,o.leftContainer.height=u,o.rightContainer.height=o.leftContainer.height,o.root.width=a,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=Z.getScrollBarWidth());const h=r.leftContainer.clientWidth,d=r.rightContainer.clientWidth;s.verticalScroll?s.rtl?(o.left.width=h||-o.border.left,o.right.width=d+o.scrollbarWidth||-o.border.right):(o.left.width=h+o.scrollbarWidth||-o.border.left,o.right.width=d||-o.border.right):(o.left.width=h||-o.border.left,o.right.width=d||-o.border.right),this._setDOM();let f=this._updateScrollTop();s.orientation.item!="top"&&(f+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),r.center.style.transform="translateY(".concat(f,"px)");const m=o.scrollTop==0?"hidden":"",g=o.scrollTop==o.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=m,r.shadowBottom.style.visibility=g,r.shadowTopLeft.style.visibility=m,r.shadowBottomLeft.style.visibility=g,r.shadowTopRight.style.visibility=m,r.shadowBottomRight.style.visibility=g,s.verticalScroll&&(r.rightContainer.className="vis-panel vis-right vis-vertical-scroll",r.leftContainer.className="vis-panel vis-left vis-vertical-scroll",r.shadowTopRight.style.visibility="hidden",r.shadowBottomRight.style.visibility="hidden",r.shadowTopLeft.style.visibility="hidden",r.shadowBottomLeft.style.visibility="hidden",r.left.style.top="0px",r.right.style.top="0px"),(!s.verticalScroll||o.center.height<o.centerContainer.height)&&(r.left.style.top="".concat(f,"px"),r.right.style.top="".concat(f,"px"),r.rightContainer.className=r.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.leftContainer.className=r.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=h||-o.border.left,o.right.width=d||-o.border.right,this._setDOM());const b=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:b?wi.DIRECTION_ALL:wi.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),mt(e=this.components).call(e,v=>{i=v.redraw()||i});const y=5;if(i)if(this.redrawCount<y){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,r=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const i=e.root.width-e.left.width-e.right.width;e.center.width=i,e.centerContainer.width=i,e.top.width=i,e.bottom.width=i,r.background.style.height="".concat(e.background.height,"px"),r.backgroundVertical.style.height="".concat(e.background.height,"px"),r.backgroundHorizontal.style.height="".concat(e.centerContainer.height,"px"),r.centerContainer.style.height="".concat(e.centerContainer.height,"px"),r.leftContainer.style.height="".concat(e.leftContainer.height,"px"),r.rightContainer.style.height="".concat(e.rightContainer.height,"px"),r.background.style.width="".concat(e.background.width,"px"),r.backgroundVertical.style.width="".concat(e.centerContainer.width,"px"),r.backgroundHorizontal.style.width="".concat(e.background.width,"px"),r.centerContainer.style.width="".concat(e.center.width,"px"),r.top.style.width="".concat(e.top.width,"px"),r.bottom.style.width="".concat(e.bottom.width,"px"),r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left="".concat(e.left.width+e.border.left,"px"),r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top="".concat(e.top.height,"px"),r.centerContainer.style.left="".concat(e.left.width,"px"),r.centerContainer.style.top="".concat(e.top.height,"px"),r.leftContainer.style.left="0",r.leftContainer.style.top="".concat(e.top.height,"px"),r.rightContainer.style.left="".concat(e.left.width+e.center.width,"px"),r.rightContainer.style.top="".concat(e.top.height,"px"),r.top.style.left="".concat(e.left.width,"px"),r.top.style.top="0",r.bottom.style.left="".concat(e.left.width,"px"),r.bottom.style.top="".concat(e.top.height+e.centerContainer.height,"px"),r.center.style.left="0",r.left.style.left="0",r.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return CG(this,e,this.props.center.width)}_toGlobalTime(e){return CG(this,e,this.props.root.width)}_toScreen(e){return kG(this,e,this.props.center.width)}_toGlobalScreen(e){return kG(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const r=e.dom.root.offsetHeight,i=e.dom.root.offsetWidth;(i!=e.props.lastWidth||r!=e.props.lastHeight)&&(e.props.lastWidth=i,e.props.lastHeight=r,e.props.scrollbarWidth=Z.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=B6e(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const r=e.deltaY,i=this._getScrollTop(),s=this._setScrollTop(this.touch.initialScrollTop+r);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),s!=i&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}_5(Mf.prototype);class Mse extends du{constructor(e,r){var i;super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Si,locales:Wp,locale:"en"},this.options=Z.extend({},this.defaultOptions),this.setOptions(r),this.options.locales=Z.extend({},Wp,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];mt(i=Pr(this.options.locales)).call(i,o=>{this.options.locales[o]=Z.extend({},s,this.options.locales[o])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&Z.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){var e,r;const i=this.body.dom.backgroundVertical;this.bar.parentNode!=i&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),i.appendChild(this.bar),this.start());let s=this.options.moment(cs()+this.offset);this.options.alignCurrentTime&&(s=s.startOf(this.options.alignCurrentTime));const o=this.body.util.toScreen(s);let a=this.options.locales[this.options.locale];a||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),a=this.options.locales.en);let l=ur(e=ur(r="".concat(a.current," ")).call(r,a.time,": ")).call(e,s.format("dddd, MMMM Do YYYY, H:mm:ss"));l=l.charAt(0).toUpperCase()+l.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(o*-1,"px)"):this.bar.style.transform="translateX(".concat(o,"px)"),this.bar.title=l}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function r(){e.stop();let s=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;s<30&&(s=30),s>1e3&&(s=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=ci(r,s)}r()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const r=Z.convert(e,"Date").valueOf(),i=cs();this.offset=r-i,this.redraw()}getCurrentTime(){return new Date(cs()+this.offset)}}var OG={},IG;function b$e(){if(IG)return OG;IG=1;var n=Tt(),e=lu().find,r=ay(),i="find",s=!0;return i in[]&&Array(1)[i](function(){s=!1}),n({target:"Array",proto:!0,forced:s},{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),r(i),OG}var KD,AG;function y$e(){if(AG)return KD;AG=1,b$e();var n=or();return KD=n("Array","find"),KD}var XD,RG;function v$e(){if(RG)return XD;RG=1;var n=Fn(),e=y$e(),r=Array.prototype;return XD=function(i){var s=i.find;return i===r||n(r,i)&&s===r.find?e:s},XD}var QD,NG;function x$e(){if(NG)return QD;NG=1;var n=v$e();return QD=n,QD}var JD,jG;function w$e(){return jG||(jG=1,JD=x$e()),JD}var _$e=w$e(),S$e=Pt(_$e);const os=.001;function k$e(n){pr(n).call(n,(e,r)=>e.data.start-r.data.start)}function C$e(n){pr(n).call(n,(e,r)=>{const i="end"in e.data?e.data.end:e.data.start,s="end"in r.data?r.data.end:r.data.start;return i-s})}function LG(n,e,r,i){return J5(n,e.item,!1,o=>o.stack&&(r||o.top===null),o=>o.stack,()=>e.axis,i)===null}function E$e(n,e,r){const i=J5(n,e.item,!1,s=>s.stack,()=>!0,s=>s.baseTop);r.height=i-r.top+.5*e.item.vertical}function T$e(n,e,r,i){for(let s=0;s<n.length;s++){if(n[s].data.subgroup==null){n[s].top=e.item.vertical;continue}if(n[s].data.subgroup===void 0||!i)continue;let o=0;for(const a in r)!Object.prototype.hasOwnProperty.call(r,a)||r[a].visible!==!0||r[a].index>=r[n[s].data.subgroup].index||(o+=r[a].height,r[n[s].data.subgroup].top=o);n[s].top=o+.5*e.item.vertical}i||P$e(n,e,r)}function P$e(n,e,r){var i;J5(pr(i=x5(r)).call(i,(s,o)=>s.index>o.index?1:s.index<o.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let s=0;s<n.length;s++)n[s].data.subgroup!==void 0&&(n[s].top=r[n[s].data.subgroup].top+.5*e.item.vertical)}function FG(n,e,r){let i=!1;const s=[];for(let o in r)Object.prototype.hasOwnProperty.call(r[o],"index")?s[r[o].index]=o:s.push(o);for(let o=0;o<s.length;o++){let a=s[o];if(!Object.prototype.hasOwnProperty.call(r,a))continue;i=i||r[a].stack,r[a].top=0;for(const c in r)r[c].visible&&r[a].index>r[c].index&&(r[a].top+=r[c].height);const l=n[a];for(let c=0;c<l.length;c++)l[c].data.subgroup!==void 0&&(l[c].top=r[l[c].data.subgroup].top+.5*e.item.vertical,r[a].stack&&(l[c].baseTop=l[c].top));i&&r[a].stack&&E$e(n[a],e,r[a])}}function J5(n,e,r,i,s,o,a){let l=w=>w.start,c=w=>w.end;r||(!!(n[0]&&n[0].options.rtl)?l=k=>k.right:l=k=>k.left,c=k=>l(k)+k.width+e.horizontal);const u=[],h=[];let d=null,f=0;for(const w of n)if(i(w))u.push(w);else if(s(w)){const k=l(w);d!==null&&k<d-os&&(f=0),d=k,f=Jv(h,S=>l(S)-os>k,f),_i(h).call(h,f,0,w),f++}d=null;let m=null;f=0;let g=0,b=0,y=0;for(;u.length>0;){var v;const w=u.shift();w.top=o(w);const k=l(w),S=c(w);d!==null&&k<d-os&&(g=0,b=0,f=0,m=null),(d===null||k>d+os)&&(g=Jv(h,P=>k<c(P)-os,g)),d=k,(m===null||m<S-os)&&(b=Jv(h,P=>S<l(P)-os,Math.max(g,b))),m!==null&&m-os>S&&(b=D$e(h,P=>S+os>=l(P),g,b)+1),m=S;const _=pr(v=O$e(h,P=>k<c(P)-os,g,b)).call(v,(P,T)=>P.top-T.top);for(let P=0;P<_.length;P++){const T=_[P];M$e(w,T,e)&&(w.top=T.top+T.height+e.vertical)}s(w)&&(f=Jv(h,P=>l(P)-os>k,f),_i(h).call(h,f,0,w),f<g&&g++,f<=b&&b++,f++);const C=w.top+w.height;if(C>y&&(y=C),a&&a())return null}return y}function M$e(n,e,r){return n.top-r.vertical+os<e.top+e.height&&n.top+n.height+r.vertical-os>e.top}function Jv(n,e,r){r||(r=0);for(let i=r;i<n.length;i++)if(e(n[i]))return i;return n.length}function D$e(n,e,r,i){r||(r=0),i||(i=n.length);for(let s=i-1;s>=r;s--)if(e(n[s]))return s;return r-1}function O$e(n,e,r,i){r||(r=0),i?i=Math.min(i,n.length):i=n.length;const s=[];for(let o=r;o<i;o++)e(n[o])&&s.push(n[o]);return s}const I$e="__background__",$G={BACKGROUND:I$e};let KA=class{constructor(e,r,i){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=r&&r.subgroupOrder,this.itemSet=i,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],r&&r.nestedGroups&&(this.nestedGroups=r.nestedGroups,r.showNested==!1?this.showNested=!1:this.showNested=!0),r&&r.subgroupStack)if(typeof r.subgroupStack=="boolean")this.doInnerStack=r.subgroupStack,this.subgroupStackAll=r.subgroupStack;else for(const o in r.subgroupStack)Object.prototype.hasOwnProperty.call(r.subgroupStack,o)&&(this.subgroupStack[o]=r.subgroupStack[o],this.doInnerStack=this.doInnerStack||r.subgroupStack[o]);r&&r.heightMode?this.heightMode=r.heightMode:this.heightMode=i.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const s=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",s),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",s)}),this._create(),this.setData(r)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const r=document.createElement("div");r.className="vis-inner",e.appendChild(r),this.dom.inner=r;const i=document.createElement("div");i.className="vis-group",i["vis-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let r,i;if(e&&e.subgroupVisibility)for(const a in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,a)&&(this.subgroupVisibility[a]=e.subgroupVisibility[a]);if(this.itemSet.options&&this.itemSet.options.groupTemplate){var s;i=Le(s=this.itemSet.options.groupTemplate).call(s,this),r=i(e,this.dom.inner)}else r=e&&e.content;if(r instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(r)}else r instanceof Object&&r.isReactComponent||(r instanceof Object?i(e,this.dom.inner):r!=null?this.dom.inner.innerHTML=Z.xss(r):this.dom.inner.innerHTML=Z.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?Z.removeClassName(this.dom.inner,"vis-hidden"):Z.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),Z.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(Z.removeClassName(this.dom.label,"collapsed"),Z.addClassName(this.dom.label,"expanded")):(Z.removeClassName(this.dom.label,"expanded"),Z.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,Z.removeClassName(this.dom.label,"collapsed"),Z.removeClassName(this.dom.label,"expanded"),Z.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(Z.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?Z.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):Z.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):Z.addClassName(this.dom.label,"vis-group-level-0");const o=e&&e.className||null;o!=this.className&&(this.className&&(Z.removeClassName(this.dom.label,this.className),Z.removeClassName(this.dom.foreground,this.className),Z.removeClassName(this.dom.background,this.className),Z.removeClassName(this.dom.axis,this.className)),Z.addClassName(this.dom.label,o),Z.addClassName(this.dom.foreground,o),Z.addClassName(this.dom.background,o),Z.addClassName(this.dom.axis,o),this.className=o),this.style&&(Z.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(Z.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const r={};let i=0;if(mt(Z).call(Z,this.items,(o,a)=>{o.dirty=!0,o.displayed&&(r[a]=o.redraw(!0),i=r[a].length)}),i>0)for(let o=0;o<i;o++)mt(Z).call(Z,r,a=>{a[o]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:r,offsetWidth:i}=this.dom.foreground;this.top=e,this.right=r,this.width=i}_shouldBailItemsRedraw(){const e=this,r=this.itemSet.options.onTimeout,i={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:r&&r.timeoutMs,userBailFunction:r&&r.callback,shouldBailStackItems:this.shouldBailStackItems};let s=null;if(!this.itemSet.initialDrawDone){if(i.shouldBailStackItems)return!0;Math.abs(cs()-new Date(i.relativeBailingTime))>i.bailTimeMs&&(i.userBailFunction&&this.itemSet.userContinueNotBail==null?i.userBailFunction(o=>{e.itemSet.userContinueNotBail=o,s=!o}):e.itemSet.userContinueNotBail==!1?s=!0:s=!1)}return s}_redrawItems(e,r,i,s){if(e||this.stackDirty||this.isVisible&&!r){var a,l,c,u,h,d;const v={byEnd:Ot(a=this.orderedItems.byEnd).call(a,_=>!_.isCluster),byStart:Ot(l=this.orderedItems.byStart).call(l,_=>!_.isCluster)},w={byEnd:[...new Yc(Ot(c=mn(u=this.orderedItems.byEnd).call(u,_=>_.cluster)).call(c,_=>!!_))],byStart:[...new Yc(Ot(h=mn(d=this.orderedItems.byStart).call(d,_=>_.cluster)).call(h,_=>!!_))]},k=()=>{var _,C;const P=this._updateItemsInRange(v,Ot(_=this.visibleItems).call(_,O=>!O.isCluster),s),T=this._updateClustersInRange(w,Ot(C=this.visibleItems).call(C,O=>O.isCluster),s);return[...P,...T]},S=_=>{let C={};for(const T in this.subgroups){var P;if(!Object.prototype.hasOwnProperty.call(this.subgroups,T))continue;const O=Ot(P=this.visibleItems).call(P,D=>D.data.subgroup===T);C[T]=_?pr(O).call(O,(D,I)=>_(D.data,I.data)):O}return C};if(typeof this.itemSet.options.order=="function"){const _=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const C=S(this.itemSet.options.order);FG(C,i,this.subgroups),this.visibleItems=k(),this._updateSubGroupHeights(i)}else{var f,m,g,b;this.visibleItems=k(),this._updateSubGroupHeights(i);const C=pr(f=Ot(m=gm(g=this.visibleItems).call(g)).call(m,P=>P.isCluster||!P.isCluster&&!P.cluster)).call(f,(P,T)=>_.itemSet.options.order(P.data,T.data));this.shouldBailStackItems=LG(C,i,!0,Le(b=this._shouldBailItemsRedraw).call(b,this))}}else if(this.visibleItems=k(),this._updateSubGroupHeights(i),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const _=S();FG(_,i,this.subgroups)}else{var y;this.shouldBailStackItems=LG(this.visibleItems,i,!0,Le(y=this._shouldBailItemsRedraw).call(y,this))}else T$e(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);for(let _=0;_<this.visibleItems.length;_++)this.visibleItems[_].repositionX(),this.subgroupVisibility[this.visibleItems[_].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[_].data.subgroup]||this.visibleItems[_].hide());this.itemSet.options.cluster&&mt(Z).call(Z,this.items,_=>{_.cluster&&_.displayed&&_.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,r){e=Z.updateProperty(this,"height",r)||e;const i=this.dom.inner.clientWidth,s=this.dom.inner.clientHeight;return e=Z.updateProperty(this.props.label,"width",i)||e,e=Z.updateProperty(this.props.label,"height",s)||e,e}_applyGroupHeight(e){this.dom.background.style.height="".concat(e,"px"),this.dom.foreground.style.height="".concat(e,"px"),this.dom.label.style.height="".concat(e,"px")}_updateItemsVerticalPosition(e){for(let r=0,i=this.visibleItems.length;r<i;r++){const s=this.visibleItems[r];s.repositionY(e),!this.isVisible&&this.groupId!=$G.BACKGROUND&&s.displayed&&s.hide()}}redraw(e,r,i,s){var o,a,l,c,u;let h=!1;const d=this.isVisible;let f;const m=[()=>{i=this._didMarkerHeightChange.call(this)||i},Le(o=this._updateSubGroupHeights).call(o,this,r),Le(a=this._calculateGroupSizeAndPosition).call(a,this),()=>{var g;this.isVisible=Le(g=this._isGroupVisible).call(g,this)(e,r)},()=>{var g;Le(g=this._redrawItems).call(g,this)(i,d,r,e)},Le(l=this._updateSubgroupsSizes).call(l,this),()=>{var g;f=this.height=Le(g=this._calculateHeight).call(g,this)(r)},Le(c=this._calculateGroupSizeAndPosition).call(c,this),()=>{var g;h=Le(g=this._didResize).call(g,this)(h,f)},()=>{var g;Le(g=this._applyGroupHeight).call(g,this)(f)},()=>{var g;Le(g=this._updateItemsVerticalPosition).call(g,this)(r)},Le(u=()=>(!this.isVisible&&this.height&&(h=!1),h)).call(u,this)];if(s)return m;{let g;return mt(m).call(m,b=>{g=b()}),g}}_updateSubGroupHeights(e){if(Pr(this.subgroups).length>0){const r=this;this._resetSubgroups(),mt(Z).call(Z,this.visibleItems,i=>{i.data.subgroup!==void 0&&(r.subgroups[i.data.subgroup].height=Math.max(r.subgroups[i.data.subgroup].height,i.height+e.item.vertical),r.subgroups[i.data.subgroup].visible=typeof this.subgroupVisibility[i.data.subgroup]>"u"?!0:!!this.subgroupVisibility[i.data.subgroup])})}}_isGroupVisible(e,r){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+r.axis&&this.top+this.height+r.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let r,i;if(this.heightMode==="fixed"?i=Z.toArray(this.items):i=this.visibleItems,!this.isVisible&&this.height)r=Math.max(this.height,this.props.label.height);else if(i.length>0){let s=i[0].top,o=i[0].top+i[0].height;if(mt(Z).call(Z,i,a=>{s=Math.min(s,a.top),o=Math.max(o,a.top+a.height)}),s>e.axis){const a=s-e.axis;o-=a,mt(Z).call(Z,i,l=>{l.top-=a})}r=Math.ceil(o+e.item.vertical/2),this.heightMode!=="fitItems"&&(r=Math.max(r,this.props.label.height))}else r=this.props.label.height;return r}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const r=this.dom.foreground;r.parentNode&&r.parentNode.removeChild(r);const i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);const s=this.dom.axis;s.parentNode&&s.parentNode.removeChild(s)}add(e){var r;if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!jp(r=this.visibleItems).call(r,e)){const i=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,i)}}_addToSubgroup(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;r!=null&&this.subgroups[r]===void 0&&(this.subgroups[r]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[r]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[r].start)&&(this.subgroups[r].start=e.data.start);const i=e.data.end||e.data.start;new Date(i)>new Date(this.subgroups[r].end)&&(this.subgroups[r].end=i),this.subgroups[r].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const i in e.subgroups){var r;if(!Object.prototype.hasOwnProperty.call(e.subgroups,i))continue;const s=e.subgroups[i].items[0].data.end||e.subgroups[i].items[0].data.start;let o=e.subgroups[i].items[0].data.start,a=s-1;mt(r=e.subgroups[i].items).call(r,l=>{new Date(l.data.start)<new Date(o)&&(o=l.data.start);const c=l.data.end||l.data.start;new Date(c)>new Date(a)&&(a=c)}),e.subgroups[i].start=o,e.subgroups[i].end=new Date(a-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const r in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,r)&&e.push({subgroup:r,sortField:this.subgroups[r].items[0].data[this.subgroupOrderer]});pr(e).call(e,(r,i)=>r.sortField-i.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const r in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,r)&&e.push(this.subgroups[r].items[0].data);pr(e).call(e,this.subgroupOrderer)}if(e.length>0)for(let r=0;r<e.length;r++)this.subgroups[e[r].subgroup].index=r}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){var r,i;delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const s=_n(r=this.visibleItems).call(r,e);s!=-1&&_i(i=this.visibleItems).call(i,s,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;if(r!=null){const o=this.subgroups[r];if(o){var i;const a=_n(i=o.items).call(i,e);if(a>=0){var s;_i(s=o.items).call(s,a,1),o.items.length?this._updateSubgroupsSizes():delete this.subgroups[r]}}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=Z.toArray(this.items),r=[],i=[];for(let s=0;s<e.length;s++)e[s].data.end!==void 0&&i.push(e[s]),r.push(e[s]);this.orderedItems={byStart:r,byEnd:i},k$e(this.orderedItems.byStart),C$e(this.orderedItems.byEnd)}_updateItemsInRange(e,r,i){const s=[],o={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=$G.BACKGROUND){for(let y=0;y<r.length;y++){var a=r[y];a.displayed&&a.hide()}return s}const l=(i.end-i.start)/4,c=i.start-l,u=i.end+l,h=y=>y<c?-1:y<=u?0:1,d=y=>{const{start:v,end:w}=y;return w<c?-1:v<=u?0:1};if(r.length>0)for(let y=0;y<r.length;y++)this._checkIfVisibleWithReference(r[y],s,o,i);const f=Z.binarySearchCustom(e.byStart,h,"data","start");if(this._traceVisible(f,e.byStart,s,o,y=>y.data.start<c||y.data.start>u),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let y=0;y<e.byEnd.length;y++)this._checkIfVisibleWithReference(e.byEnd[y],s,o,i)}else{const y=Z.binarySearchCustom(e.byEnd,d,"data");this._traceVisible(y,e.byEnd,s,o,v=>v.data.end<c||v.data.start>u)}this._sortVisibleItems(e.byStart,s,o);const m={};let g=0;for(let y=0;y<s.length;y++){const v=s[y];v.displayed||(m[y]=v.redraw(!0),g=m[y].length)}if(g>0)for(let y=0;y<g;y++)mt(Z).call(Z,m,v=>{v[y]()});for(let y=0;y<s.length;y++)s[y].repositionX();return s}_traceVisible(e,r,i,s,o){if(e!=-1){for(let a=e;a>=0;a--){let l=r[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&s[l.id]===void 0&&(s[l.id]=!0,i.unshift(l))}for(let a=e+1;a<r.length;a++){let l=r[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&s[l.id]===void 0&&(s[l.id]=!0,i.push(l))}}}_sortVisibleItems(e,r,i){r.length=0;for(let s=0;s<e.length;s++){let o=e[s];i[o.id]&&r.push(o)}}_checkIfVisible(e,r,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),r.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,r,i,s){e.isVisible(s)?i[e.id]===void 0&&(i[e.id]=!0,r.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,r,i){const s=[],o={};if(r.length>0)for(let h=0;h<r.length;h++)this._checkIfVisibleWithReference(r[h],s,o,i);for(let h=0;h<e.byStart.length;h++)this._checkIfVisibleWithReference(e.byStart[h],s,o,i);for(let h=0;h<e.byEnd.length;h++)this._checkIfVisibleWithReference(e.byEnd[h],s,o,i);const a={};let l=0;for(let h=0;h<s.length;h++){const d=s[h];d.displayed||(a[h]=d.redraw(!0),l=a[h].length)}if(l>0)for(var u=0;u<l;u++)mt(Z).call(Z,a,function(h){h[u]()});for(let h=0;h<s.length;h++)s[h].repositionX();return s}changeSubgroup(e,r,i){this._removeFromSubgroup(e,r),this._addToSubgroup(e,i),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}};class Dse extends KA{constructor(e,r,i){super(e,r,i),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,r){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let s=0,o=this.visibleItems.length;s<o;s++)this.visibleItems[s].repositionY(r);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class vm{constructor(e,r,i){var s;this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=r||{},this.defaultOptions={locales:Wp,locale:"en"},this.options=Z.extend({},this.defaultOptions,i),this.options.locales=Z.extend({},Wp,this.options.locales);const o=this.defaultOptions.locales[this.defaultOptions.locale];mt(s=Pr(this.options.locales)).call(s,a=>{this.options.locales[a]=Z.extend({},o,this.options.locales[a])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=i&&i.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var e,r;const i=this,s=document.createElement("div");s.className="vis-drag-center",s.dragCenterItem=this,this.hammerDragCenter=new wi(s),this.hammerDragCenter.on("tap",o=>{i.parent.itemSet.body.emitter.emit("click",{event:o,item:i.id})}),this.hammerDragCenter.on("doubletap",o=>{o.stopPropagation(),i.parent.itemSet._onUpdateItem(i),i.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:i.id})}),this.hammerDragCenter.on("panstart",o=>{o.stopPropagation(),i.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",Le(e=i.parent.itemSet._onDrag).call(e,i.parent.itemSet)),this.hammerDragCenter.on("panend",Le(r=i.parent.itemSet._onDragEnd).call(r,i.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(s,this.dom.dragLeft):this.dom.box.appendChild(s):this.dom.point&&this.dom.point.appendChild(s),this.dom.dragCenter=s}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const r=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&r&&!this.dom.deleteButton){const i=this,s=document.createElement("div");this.options.rtl?s.className="vis-delete-rtl":s.className="vis-delete";let o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),s.title=o.deleteSelected,this.hammerDeleteButton=new wi(s).on("tap",a=>{a.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(s),this.dom.deleteButton=s}else(!this.selected||!r)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const r=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&r&&!this.dom.onItemUpdateTimeTooltip){const s=document.createElement("div");s.className="vis-onUpdateTime-tooltip",e.appendChild(s),this.dom.onItemUpdateTimeTooltip=s}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const s=50,o=this.parent.itemSet.body.domProps.scrollTop;let a;this.options.orientation.item=="top"?a=this.top:a=this.parent.height-this.top-this.height,a+this.parent.top-s<-o?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));let c,u;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var i;u=Le(i=this.options.tooltipOnItemUpdateTime.template).call(i,this),c=u(this.data)}else c="start: ".concat(Si(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(c+="<br> end: ".concat(Si(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=Z.xss(c)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let r,i,s,o,a;const l=this._getItemData(),u=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var h;a=Le(h=this.options.visibleFrameTemplate).call(h,this),o=Z.xss(a(l,u))}else o="";if(u){if(o instanceof Object&&!(o instanceof Element))a(l,u);else if(i=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),i){if(o instanceof Element)u.innerHTML="",u.appendChild(o);else if(o!=null)u.innerHTML=Z.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var d;s=Le(d=this.options.template).call(d,this),r=s(l,e,this.data)}else r=this.data.content;if(r instanceof Object&&!(r instanceof Element))s(l,e);else if(i=this._contentToString(this.content)!==this._contentToString(r),i){if(r instanceof Element)e.innerHTML="",e.appendChild(r);else if(r!=null)e.innerHTML=Z.xss(r);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=r}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let r=[];if(Vt(this.options.dataAttributes))r=this.options.dataAttributes;else if(this.options.dataAttributes=="all")r=Pr(this.data);else return;for(const i of r){const s=this.data[i];s!=null?e.setAttribute("data-".concat(i),s):e.removeAttribute("data-".concat(i))}}}_updateStyle(e){this.style&&(Z.removeCssText(e,this.style),this.style=null),this.data.style&&(Z.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},Z.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},Z.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){if(this.options.tooltip&&this.options.tooltip.template){var e;return Le(e=this.options.tooltip.template).call(e,this)(this._getItemData(),this.data)}return this.data.title}}vm.prototype.stack=!0;class A$e extends vm{constructor(e,r,i){if(super(e,r,i),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;let r;const i=this.data.align||this.options.align,s=this.width*e.getMillisecondsPerPixel();return i=="right"?r=this.data.start.getTime()>e.start&&this.data.start.getTime()-s<e.end:i=="left"?r=this.data.start.getTime()+s>e.start&&this.data.start.getTime()<e.end:r=this.data.start.getTime()+s/2>e.start&&this.data.start.getTime()-s/2<e.end,r}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const r=this.parent.dom.foreground;if(!r)throw new Error("Cannot redraw item: parent has no foreground container element");r.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const r=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(r),this.dom.line.className="vis-item vis-line".concat(r),this.dom.dot.className="vis-item vis-dot".concat(r)}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){var r,i,s,o;let a;const l=[Le(r=this._createDomElement).call(r,this),Le(i=this._appendDomElement).call(i,this),Le(s=this._updateDirtyDomComponents).call(s,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var c;Le(c=this._updateDomComponentsSizes).call(c,this)(a)}},Le(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return mt(l).call(l,u=>{c=u()}),c}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,r=function(i,s,o){var a;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(s===void 0&&o===void 0)return;const c=l?s*-1:s;if(o===void 0){i.style.transform="translateX(".concat(c,"px)");return}if(s===void 0){i.style.transform="translateY(".concat(o,"px)");return}i.style.transform=ur(a="translate(".concat(c,"px, ")).call(a,o,"px)")};r(this.dom.box,this.boxX,this.boxY,e),r(this.dom.dot,this.dotX,this.dotY,e),r(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),r=this.data.align===void 0?this.options.align:this.data.align,i=this.props.line.width,s=this.props.dot.width;r=="right"?(this.boxX=e-this.width,this.lineX=e-i,this.dotX=e-i/2-s/2):r=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+i/2-s/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-i:e-i/2,this.dotX=e-s/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,r=this.dom.line.style;if(e=="top"){const i=this.parent.top+this.top+1;this.boxY=this.top||0,r.height="".concat(i,"px"),r.bottom="",r.top="0"}else{const s=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),r.height="".concat(s,"px"),r.top="",r.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class R$e extends vm{constructor(e,r,i){if(super(e,r,i),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;const r=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+r>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(r),this.dom.dot.className="vis-item vis-dot".concat(r)}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");const r=this.props.dot.width,i=this.options.rtl?r/2:r/2*-1;this.dom.dot.style.transform="translateX(".concat(i,"px"),this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){var r,i,s,o;let a;const l=[Le(r=this._createDomElement).call(r,this),Le(i=this._appendDomElement).call(i,this),Le(s=this._updateDirtyDomComponents).call(s,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var c;Le(c=this._updateDomComponentsSizes).call(c,this)(a)}},Le(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return mt(l).call(l,u=>{c=u()}),c}}repositionXY(){const e=this.options.rtl;(function(i,s,o){var a;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(s===void 0&&o===void 0)return;const c=l?s*-1:s;if(o===void 0){i.style.transform="translateX(".concat(c,"px)");return}if(s===void 0){i.style.transform="translateY(".concat(o,"px)");return}i.style.transform=ur(a="translate(".concat(c,"px, ")).call(a,o,"px)")})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Hd extends vm{constructor(e,r,i){if(super(e,r,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+r,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){var r,i,s,o;let a;const l=[Le(r=this._createDomElement).call(r,this),Le(i=this._appendDomElement).call(i,this),Le(s=this._updateDirtyDomComponents).call(s,this),()=>{if(this.dirty){var c;a=Le(c=this._getDomComponentsSizes).call(c,this)()}},()=>{if(this.dirty){var c;Le(c=this._updateDomComponentsSizes).call(c,this)(a)}},Le(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return mt(l).call(l,u=>{c=u()}),c}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const r=this.parent.width;let i=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end);const o=this.data.align===void 0?this.options.align:this.data.align;let a,l;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(i<-r&&(i=-r),s>2*r&&(s=2*r));const c=Math.max(Math.round((s-i)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=i:this.left=i,this.width=c+this.props.content.width,l=this.props.content.width):(this.options.rtl?this.right=i:this.left=i,this.width=c,l=Math.min(s-i,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(c,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),o){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const u=Math.max(c-l,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(c-l,0),"px)");break;case"center":if(this.options.rtl){const u=Math.max((c-l)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((c-l)/2,0),"px)");break;default:if(this.overflow?s>0?a=Math.max(-i,0):a=-l:i<0?a=-i:a=0,this.options.rtl){const u=a*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(a,"px)")}}repositionY(){const e=this.options.orientation.item,r=this.dom.box;e=="top"?r.style.top="".concat(this.top,"px"):r.style.top="".concat(this.parent.height-this.top-this.height,"px")}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Hd.prototype.baseClassName="vis-item vis-range";class uh extends vm{constructor(e,r,i){if(super(e,r,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){var r,i,s,o;let a;const l=[Le(r=this._createDomElement).call(r,this),Le(i=this._appendDomElement).call(i,this),Le(s=this._updateDirtyDomComponents).call(s,this),()=>{if(this.dirty){var c;a=Le(c=this._getDomComponentsSizes).call(c,this)()}},()=>{if(this.dirty){var c;Le(c=this._updateDomComponentsSizes).call(c,this)(a)}},Le(o=this._repaintDomAdditionals).call(o,this)];if(e)return l;{let c;return mt(l).call(l,u=>{c=u()}),c}}repositionY(){let e;const r=this.options.orientation.item;if(this.data.subgroup!==void 0){const i=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[i].height,"px"),r=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[i].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[i].top-this.parent.subgroups[i].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof Dse?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=r=="bottom"?"0":"",this.dom.box.style.top=r=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(e,"px")}}uh.prototype.baseClassName="vis-item vis-background";uh.prototype.stack=!1;uh.prototype.show=Hd.prototype.show;uh.prototype.hide=Hd.prototype.hide;uh.prototype.repositionX=Hd.prototype.repositionX;class N$e{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=us(e),this.y=us(r)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=Z.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var r=this.frame.clientHeight,i=this.frame.clientWidth,s=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let c=!1,u=!0;this.overflowMethod=="flip"&&(this.y-r<this.padding&&(u=!1),this.x+i>o-this.padding&&(c=!0)),c?a=this.x-i:a=this.x,u?l=this.y-r:l=this.y}else l=this.y-r,l+r+this.padding>s&&(l=s-r-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+i+this.padding>o&&(a=o-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}var BG={},zG;function j$e(){if(zG)return BG;zG=1;var n=Tt(),e=lu().every,r=bm(),i=r("every");return n({target:"Array",proto:!0,forced:!i},{every:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),BG}var ZD,UG;function L$e(){if(UG)return ZD;UG=1,j$e();var n=or();return ZD=n("Array","every"),ZD}var eO,WG;function F$e(){if(WG)return eO;WG=1;var n=Fn(),e=L$e(),r=Array.prototype;return eO=function(i){var s=i.every;return i===r||n(r,i)&&s===r.every?e:s},eO}var tO,qG;function $$e(){if(qG)return tO;qG=1;var n=F$e();return tO=n,tO}var nO,HG;function B$e(){return HG||(HG=1,nO=$$e()),nO}var z$e=B$e(),U$e=Pt(z$e);class cS extends vm{constructor(e,r,i){const s=Ml({},{fitOnDoubleClick:!0},i,{editable:!1});if(super(e,r,s),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=_d(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const r=this.data.end?this.data.end-this.data.start:0,i=this.width*e.getMillisecondsPerPixel(),s=Math.max(this.data.start.getTime()+r,this.data.start.getTime()+i);return this.data.start<e.end&&s>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var r,i,s,o,a,l,c,u=[Le(r=this._createDomElement).call(r,this),Le(i=this._appendDomElement).call(i,this),Le(s=this._updateDirtyDomComponents).call(s,this),Le(o=function(){this.dirty&&(c=this._getDomComponentsSizes())}).call(o,this),Le(a=function(){if(this.dirty){var d;Le(d=this._updateDomComponentsSizes).call(d,this)(c)}}).call(a,this),Le(l=this._repaintDomAdditionals).call(l,this)];if(e)return u;var h;return mt(u).call(u,function(d){h=d()}),h}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),r=this.data.end?this.conversion.toScreen(this.data.end):0;if(r)this.repositionXWithRanges(e,r);else{let i=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,i)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,r))}repositionStype(e,r){this.dom.line.style.display="block",this.dom.dot.style.display="block";const i=this.dom.line.offsetWidth,s=this.dom.dot.offsetWidth;if(r){const o=i+e+(r-e)/2,a=o-s/2,l=this.options.rtl?o*-1:o,c=this.options.rtl?a*-1:a;this.dom.line.style.transform="translateX(".concat(l,"px)"),this.dom.dot.style.transform="translateX(".concat(c,"px)")}else{const o=this.options.rtl?e*-1:e,a=this.options.rtl?(e-s/2)*-1:e-s/2;this.dom.line.style.transform="translateX(".concat(o,"px)"),this.dom.dot.style.transform="translateX(".concat(a,"px)")}}repositionXWithoutRanges(e,r){r=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):r=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,r){let i=Math.round(Math.max(r-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(i,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=i+"px"}repositionY(){var e=this.options.orientation.item,r=this.dom.box;if(e=="top"?r.style.top=(this.top||0)+"px":r.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var i=this.parent.itemSet.props.height,s=i-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=i-s+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){var e;for(let r of this.data.uiItems)r.cluster=this;this.data.items=mn(e=this.data.uiItems).call(e,r=>r.data),this.attached=!0,this.dirty=!0}detach(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.hasItems()){for(let r of this.data.uiItems)delete r.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){var e,r,i;const s=mn(e=this.data.uiItems).call(e,l=>({start:l.data.start.valueOf(),end:l.data.end?l.data.end.valueOf():l.data.start.valueOf()}));this.data.min=Math.min(...mn(s).call(s,l=>Math.min(l.start,l.end||l.start))),this.data.max=Math.max(...mn(s).call(s,l=>Math.max(l.start,l.end||l.start)));const o=mn(r=this.data.uiItems).call(r,l=>l.center),a=sS(o).call(o,(l,c)=>l+c,0)/this.data.uiItems.length;z5(i=this.data.uiItems).call(i,l=>l.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(a),this.data.end=null)}_getUiItems(){if(this.data.uiItems&&this.data.uiItems.length){var e;return Ot(e=this.data.uiItems).call(e,r=>r.cluster===this)}return[]}_createDomElement(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var e;this.dom.box.ondblclick=Le(e=cS.prototype._onDoubleClick).call(e,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const i=this.parent.dom.foreground;if(!i)throw new Error("Cannot redraw item: parent has no foreground container element");i.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var r=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:r}=this._getFitRange(),i={start:new Date(e),end:new Date(r),animation:!0};this.emitter.emit("fit",i)}}_getItemData(){return this.data}}cS.prototype.baseClassName="vis-item vis-range vis-cluster";const W$e="__ungrouped__",q$e={UNGROUPED:W$e};class H$e{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,r,i){return new cS(e,r,i)}setItems(e,r){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,r&&r.applyOnChangedLevel&&(this.applyOnChangedLevel=r.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,r,i){let{maxItems:s,clusterCriteria:o}=typeof i=="boolean"?{}:i;o||(o=()=>!0),s=s||1;let a=-1,l=2,c=0;if(r>0){if(r>=1)return[];a=Math.abs(Math.round(Math.log(100/r)/Math.log(l))),c=Math.abs(Math.pow(l,a))}if(this.dataChanged){const h=a!=this.cacheLevel;(this.applyOnChangedLevel?h:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=a;let u=this.cache[a];if(!u){u=[];for(let h in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,h))continue;const d=this.groups[h],f=d.length;let m=0;for(;m<f;){let g=d[m],b=1,y=m-1;for(;y>=0&&g.center-d[y].center<c/2;)!d[y].cluster&&o(g.data,d[y].data)&&b++,y--;let v=m+1;for(;v<d.length&&d[v].center-g.center<c/2;)o(g.data,d[v].data)&&b++,v++;let w=u.length-1;for(;w>=0&&g.center-u[w].center<c;)g.group==u[w].group&&o(g.data,u[w].data)&&b++,w--;if(b>s){const k=b-s+1,S=[];let _=m;for(;S.length<k&&_<d.length;)o(d[m].data,d[_].data)&&S.push(d[_]),_++;const C=this.itemSet.getGroupId(g.data),P=this.itemSet.groups[C]||this.itemSet.groups[q$e.UNGROUPED];let T=this._getClusterForItems(S,P,e,i);u.push(T),m+=k}else delete g.cluster,m+=1}}this.cache[a]=u}return u}_filterData(){const e={};this.groups=e;for(const i of x5(this.items)){const s=i.parent?i.parent.groupId:"";let o=e[s];o||(o=[],e[s]=o),o.push(i),i.data.start&&(i.data.end?i.center=(i.data.start.valueOf()+i.data.end.valueOf())/2:i.center=i.data.start.valueOf())}for(let i in e){var r;Object.prototype.hasOwnProperty.call(e,i)&&pr(r=e[i]).call(r,(s,o)=>s.center-o.center)}this.dataChanged=!1}_getClusterForItems(e,r,i,s){var o;const a=mn(o=i||[]).call(o,g=>{var b;return{cluster:g,itemsIds:new Yc(mn(b=g.data.uiItems).call(b,y=>y.id))}});let l;if(a.length){for(let g of a)if(g.itemsIds.size===e.length&&U$e(e).call(e,b=>g.itemsIds.has(b.id))){l=g.cluster;break}}if(l)return l.setUiItems(e),l.group!==r&&(l.group&&l.group.remove(l),r&&(r.add(l),l.group=r)),l;let c=s.titleTemplate||"";const u={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},h=c.replace(/{count}/,e.length),d='<div title="'+h+'">'+e.length+"</div>",f=Ml({},s,this.itemSet.options),m={content:d,title:h,group:r,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return l=this.createClusterItem(m,u,f),r&&(r.add(l),l.group=r),l.attach(),l}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const Rh="__ungrouped__",ec="__background__";class Vd extends du{constructor(e,r){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(s,o){const a=o.order;o.order=s.order,s.order=a},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:qd.snap,onDropObjectOnItem(s,o,a){a(o)},onAdd(s,o){o(s)},onUpdate(s,o){o(s)},onMove(s,o){o(s)},onRemove(s,o){o(s)},onMoving(s,o){o(s)},onAddGroup(s,o){o(s)},onMoveGroup(s,o){o(s)},onRemoveGroup(s,o){o(s)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=Z.extend({},this.defaultOptions),this.options.rtl=r.rtl,this.options.onTimeout=r.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const i=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(s,o){i._onAdd(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},update(s,o){i._onUpdate(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},remove(s,o){i._onRemove(o.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()}},this.groupListeners={add(s,o,a){if(i._onAddGroups(o.items),i.groupsData&&i.groupsData.length>0){var l;const c=i.groupsData.getDataSet();mt(l=c.get()).call(l,u=>{if(u.nestedGroups){var h;u.showNested!=!1&&(u.showNested=!0);let d=[];mt(h=u.nestedGroups).call(h,f=>{const m=c.get(f);m&&(m.nestedInGroup=u.id,u.showNested==!1&&(m.visible=!1),d=ur(d).call(d,m))}),c.update(d,a)}})}},update(s,o){i._onUpdateGroups(o.items)},remove(s,o){i._onRemoveGroups(o.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(r),this.clusters=[]}_create(){var e,r,i,s,o,a,l,c,u,h,d,f,m,g,b;const y=document.createElement("div");y.className="vis-itemset",y["vis-itemset"]=this,this.dom.frame=y;const v=document.createElement("div");v.className="vis-background",y.appendChild(v),this.dom.background=v;const w=document.createElement("div");w.className="vis-foreground",y.appendChild(w),this.dom.foreground=w;const k=document.createElement("div");k.className="vis-axis",this.dom.axis=k;const S=document.createElement("div");S.className="vis-labelset",this.dom.labelSet=S,this._updateUngrouped();const _=new Dse(ec,null,this);_.show(),this.groups[ec]=_,this.hammer=new wi(this.body.dom.centerContainer),this.hammer.on("hammer.input",C=>{C.isFirst&&this._onTouch(C)}),this.hammer.on("panstart",Le(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",Le(r=this._onDrag).call(r,this)),this.hammer.on("panend",Le(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:wi.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",Le(s=this._onSelectItem).call(s,this)),this.hammer.on("press",Le(o=this._onMultiSelectItem).call(o,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",Le(a=this._onAddItem).call(a,this)),this.options.rtl?this.groupHammer=new wi(this.body.dom.rightContainer):this.groupHammer=new wi(this.body.dom.leftContainer),this.groupHammer.on("tap",Le(l=this._onGroupClick).call(l,this)),this.groupHammer.on("panstart",Le(c=this._onGroupDragStart).call(c,this)),this.groupHammer.on("panmove",Le(u=this._onGroupDrag).call(u,this)),this.groupHammer.on("panend",Le(h=this._onGroupDragEnd).call(h,this)),this.groupHammer.get("pan").set({threshold:5,direction:wi.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",Le(d=this._onMouseOver).call(d,this)),this.body.dom.centerContainer.addEventListener("mouseout",Le(f=this._onMouseOut).call(f,this)),this.body.dom.centerContainer.addEventListener("mousemove",Le(m=this._onMouseMove).call(m,this)),this.body.dom.centerContainer.addEventListener("contextmenu",Le(g=this._onDragEnd).call(g,this)),this.body.dom.centerContainer.addEventListener("mousewheel",Le(b=this._onMouseWheel).call(b,this)),this.show()}setOptions(e){if(e){var r,i;const s=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];Z.selectiveExtend(s,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(Z.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(Z.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&Z.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),mt(r=["locale","locales"]).call(r,a=>{a in e&&(this.options[a]=e[a])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&Z.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&Z.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const o=a=>{const l=e[a];if(l){if(typeof l!="function"){var c;throw new Error(ur(c="option ".concat(a," must be a function ")).call(c,a,"(item, callback)"))}this.options[a]=l}};mt(i=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(i,o),e.cluster?(Ml(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new H$e(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&mt(Z).call(Z,this.items,r=>{r.dirty=!0,r.displayed&&r.redraw()}),e.restackGroups&&mt(Z).call(Z,this.groups,(r,i)=>{i!==ec&&(r.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const r=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=ci(function(){e.show()},r)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){var r;e==null&&(e=[]),Vt(e)||(e=[e]);const i=Ot(r=this.selection).call(r,s=>_n(e).call(e,s)===-1);for(let s of i){const o=this.getItemById(s);o&&o.unselect()}this.selection=[...e];for(let s of e){const o=this.getItemById(s);o&&o.select()}}getSelection(){var e;return ur(e=this.selection).call(e,[])}getVisibleItems(){const e=this.body.range.getRange();let r,i;this.options.rtl?(r=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end)):(i=this.body.util.toScreen(e.start),r=this.body.util.toScreen(e.end));const s=[];for(const o in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,o))continue;const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const c of l)this.options.rtl?c.right<i&&c.right+c.width>r&&s.push(c.id):c.left<r&&c.left+c.width>i&&s.push(c.id)}return s}getItemsAtCurrentTime(e){let r,i;this.options.rtl?(r=this.body.util.toScreen(e),i=this.body.util.toScreen(e)):(i=this.body.util.toScreen(e),r=this.body.util.toScreen(e));const s=[];for(const o in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,o))continue;const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const c of l)this.options.rtl?c.right<i&&c.right+c.width>r&&s.push(c.id):c.left<r&&c.left+c.width>i&&s.push(c.id)}return s}getVisibleGroups(){const e=[];for(const r in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,r))continue;this.groups[r].isVisible&&e.push(r)}return e}getItemById(e){var r;return this.items[e]||S$e(r=this.clusters).call(r,i=>i.id===e)}_deselect(e){const r=this.selection;for(let i=0,s=r.length;i<s;i++)if(r[i]==e){_i(r).call(r,i,1);break}}redraw(){const e=this.options.margin,r=this.body.range,i=Z.option.asSize,s=this.options,o=s.orientation.item;let a=!1;const l=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,l.className="vis-itemset",this.options.cluster&&this._clusterItems(),a=this._orderGroups()||a;const c=r.end-r.start,u=c!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,h=r.start!=this.lastRangeStart,d=s.stack!=this.lastStack,f=s.stackSubgroups!=this.lastStackSubgroups,m=u||h||d||f;this.lastVisibleInterval=c,this.lastRangeStart=r.start,this.lastStack=s.stack,this.lastStackSubgroups=s.stackSubgroups,this.props.lastWidth=this.props.width;const g=this._firstGroup(),b={item:e.item,axis:e.axis},y={item:e.item,axis:e.item.vertical/2};let v=0;const w=e.axis+e.item.vertical;this.groups[ec].redraw(r,y,m);const k={};let S=0;if(mt(Z).call(Z,this.groups,(C,P)=>{if(P===ec)return;const T=C==g?b:y,O=!0;k[P]=C.redraw(r,T,m,O),S=k[P].length}),S>0){const C={};for(let P=0;P<S;P++)mt(Z).call(Z,k,(T,O)=>{C[O]=T[P]()});mt(Z).call(Z,this.groups,(P,T)=>{if(T===ec)return;a=C[T]||a,v+=P.height}),v=Math.max(v,w)}return v=Math.max(v,w),l.style.height=i(v),this.props.width=l.offsetWidth,this.props.height=v,this.dom.axis.style.top=i(o=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,a=this._isResized()||a,a}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,r=this.groupIds[e];return this.groups[r]||this.groups[Rh]||null}_updateUngrouped(){let e=this.groups[Rh],r,i;if(this.groupsData){if(e){e.dispose(),delete this.groups[Rh];for(i in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,i))continue;r=this.items[i],r.parent&&r.parent.remove(r);const s=this.getGroupId(r.data),o=this.groups[s];o&&o.add(r)||r.hide()}}}else if(!e){e=new KA(null,null,this),this.groups[Rh]=e;for(i in this.items)Object.prototype.hasOwnProperty.call(this.items,i)&&(r=this.items[i],e.add(r));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const r=this;let i;const s=this.itemsData;if(!e)this.itemsData=null;else if(Dl(e))this.itemsData=Up(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(s&&(mt(Z).call(Z,this.itemListeners,(o,a)=>{s.off(a,o)}),s.dispose(),i=s.getIds(),this._onRemove(i)),this.itemsData){const o=this.id;mt(Z).call(Z,this.itemListeners,(a,l)=>{r.itemsData.on(l,a,o)}),i=this.itemsData.getIds(),this._onAdd(i),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const r=this;let i;if(this.groupsData&&(mt(Z).call(Z,this.groupListeners,(o,a)=>{r.groupsData.off(a,o)}),i=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(i)),!e)this.groupsData=null;else if(Dl(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s;const o=this.groupsData.getDataSet();mt(s=o.get()).call(s,l=>{if(l.nestedGroups){var c;mt(c=l.nestedGroups).call(c,u=>{const h=o.get(u);h.nestedInGroup=l.id,l.showNested==!1&&(h.visible=!1),o.update(h)})}});const a=this.id;mt(Z).call(Z,this.groupListeners,(l,c)=>{r.groupsData.on(c,l,a)}),i=this.groupsData.getIds(),this._onAddGroups(i)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const r=this.itemsData.get(e);r&&this.options.onRemove(r,i=>{i&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?ec:this.groupsData?e.group:Rh}_onUpdate(e){const r=this;mt(e).call(e,i=>{const s=r.itemsData.get(i);let o=r.items[i];const a=s?r._getType(s):null,l=Vd.types[a];let c;if(o&&(!l||!(o instanceof l)?(c=o.selected,r._removeItem(o),o=null):r._updateItem(o,s)),!o&&s)if(l)o=new l(s,r.conversion,r.options),o.id=i,r._addItem(o),c&&(this.selection.push(i),o.select());else throw new TypeError('Unknown item type "'.concat(a,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let r=0;const i=this;mt(e).call(e,s=>{const o=i.items[s];o&&(r++,i._removeItem(o))}),r&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){mt(Z).call(Z,this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const r=this;mt(e).call(e,i=>{const s=r.groupsData.get(i);let o=r.groups[i];if(o)o.setData(s);else{if(i==Rh||i==ec)throw new Error("Illegal group id. ".concat(i," is a reserved id."));const a=ly(r.options);Z.extend(a,{height:null}),o=new KA(i,s,r),r.groups[i]=o;for(const l in r.items){if(!Object.prototype.hasOwnProperty.call(r.items,l))continue;const c=r.items[l];c.data.group==i&&o.add(c)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){mt(e).call(e,r=>{const i=this.groups[r];i&&(i.dispose(),delete this.groups[r])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const r=!Z.equalArray(e,this.groupIds);if(r){const i=this.groups;mt(e).call(e,s=>{i[s].hide()}),mt(e).call(e,s=>{i[s].show()}),this.groupIds=e}return r}else return!1}_orderNestedGroups(e){function r(s,o){let a=[];return mt(o).call(o,l=>{if(a.push(l),s.groupsData.get(l).nestedGroups){var u;const h=mn(u=s.groupsData.get({filter(d){return d.nestedInGroup==l},order:s.options.groupOrder})).call(u,d=>d.id);a=ur(a).call(a,r(s,h))}}),a}const i=Ot(e).call(e,s=>!this.groupsData.get(s).nestedInGroup);return r(this,i)}_addItem(e){this.items[e.id]=e;const r=this.getGroupId(e.data),i=this.groups[r];i?i&&i.data&&i.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,i&&i.add(e)}_updateItem(e,r){e.setData(r);const i=this.getGroupId(e.data),s=this.groups[i];s?s&&s.data&&s.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){var r,i;e.hide(),delete this.items[e.id];const s=_n(r=this.selection).call(r,e.id);s!=-1&&_i(i=this.selection).call(i,s,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const r=[];for(let i=0;i<e.length;i++)e[i]instanceof Hd&&r.push(e[i]);return r}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let r=0;r<this.groupIds.length;r++)if(e==this.groupIds[r])return r}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const r=this.touchParams.item||null,i=this;let s;if(r&&(r.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||r.editable!=null&&!r.editable.updateTime&&!r.editable.updateGroup&&!this.options.editable.overrideItems)return;const o=this.touchParams.dragLeftItem,a=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=r,o)s={item:o,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(r.data)},this.touchParams.itemProps=[s];else if(a)s={item:a,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(r.data)},this.touchParams.itemProps=[s];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const l=this._getGroupIndex(r.data.group),c=this.options.itemsAlwaysDraggable.item&&!r.selected?[r.id]:this.getSelection();this.touchParams.itemProps=mn(c).call(c,u=>{const h=i.items[u],d=i._getGroupIndex(h.data.group);return{item:h,initialX:e.center.x,groupOffset:l-d,data:this._cloneItemData(h.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const r=this.options.snap||null,i=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?i.right-e.center.x+10:e.center.x-i.left-10,o=this.body.util.toTime(s),a=this.body.util.getScale(),l=this.body.util.getStep(),c=r?r(o,a,l):o,h={type:"range",start:c,end:c,content:"new item"},d=_d();h[this.itemsData.idProp]=d;const f=this.groupFromTarget(e);f&&(h.group=f.groupId);const m=new Hd(h,this.conversion,this.options);m.id=d,m.data=this._cloneItemData(h),this._addItem(m),this.touchParams.selectedItem=m;const g={item:m,initialX:e.center.x,data:m.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const i=this.body.dom.centerContainer,s=i.getBoundingClientRect();this.popup.setPosition(e.center.x-s.left+i.offsetLeft,e.center.y-s.top+i.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var r;e.stopPropagation();const i=this,s=this.options.snap||null,o=this.body.dom.root.offsetLeft,a=this.options.rtl?o+this.body.domProps.right.width:o+this.body.domProps.left.width,l=this.body.util.getScale(),c=this.body.util.getStep(),u=this.touchParams.selectedItem,h=(this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateGroup;let d=null;if(h&&u&&u.data.group!=null){const f=i.groupFromTarget(e);f&&(d=this._getGroupIndex(f.groupId))}mt(r=this.touchParams.itemProps).call(r,f=>{const m=i.body.util.toTime(e.center.x-a),g=i.body.util.toTime(f.initialX-a);let b,y,v,w,k;this.options.rtl?b=-(m-g):b=m-g;let S=this._cloneItemData(f.item.data);if(f.item.editable!=null&&!f.item.editable.updateTime&&!f.item.editable.updateGroup&&!i.options.editable.overrideItems)return;if((this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateTime){if(f.dragLeft)this.options.rtl?S.end!=null&&(v=Z.convert(f.data.end,"Date"),k=new Date(v.valueOf()+b),S.end=s?s(k,l,c):k):S.start!=null&&(y=Z.convert(f.data.start,"Date"),w=new Date(y.valueOf()+b),S.start=s?s(w,l,c):w);else if(f.dragRight)this.options.rtl?S.start!=null&&(y=Z.convert(f.data.start,"Date"),w=new Date(y.valueOf()+b),S.start=s?s(w,l,c):w):S.end!=null&&(v=Z.convert(f.data.end,"Date"),k=new Date(v.valueOf()+b),S.end=s?s(k,l,c):k);else if(S.start!=null)if(y=Z.convert(f.data.start,"Date").valueOf(),w=new Date(y+b),S.end!=null){v=Z.convert(f.data.end,"Date");const C=v.valueOf()-y.valueOf();S.start=s?s(w,l,c):w,S.end=new Date(S.start.valueOf()+C)}else S.start=s?s(w,l,c):w}if(h&&!f.dragLeft&&!f.dragRight&&d!=null&&S.group!=null){let C=d-f.groupOffset;C=Math.max(0,C),C=Math.min(i.groupIds.length-1,C),S.group=i.groupIds[C]}S=this._cloneItemData(S),i.options.onMoving(S,C=>{C&&f.item.setData(this._cloneItemData(C,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,r){const i=this.groups[r];if(i&&i.groupId!=e.data.group){const s=e.parent;s.remove(e),s.order(),e.data.group=i.groupId,i.add(e),i.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const r=this,i=this.touchParams.itemProps;this.touchParams.itemProps=null,mt(i).call(i,s=>{const o=s.item.id;if(!(r.itemsData.get(o)!=null))r.options.onAdd(s.item.data,l=>{r._removeItem(s.item),l&&r.itemsData.add(l),r.body.emitter.emit("_change")});else{const l=this._cloneItemData(s.item.data);r.options.onMove(l,c=>{c?(c[this.itemsData.idProp]=o,this.itemsData.update(c)):(s.item.setData(s.data),r.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const r=this.groupFromTarget(e);ci(()=>{this.toggleGroupShowNested(r)},1)}toggleGroupShowNested(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!e||!e.nestedGroups)return;const i=this.groupsData.getDataSet();r!=null?e.showNested=!!r:e.showNested=!e.showNested;let s=i.get(e.groupId);s.showNested=e.showNested;let o=e.nestedGroups,a=o;for(;a.length>0;){let h=a;a=[];for(let d=0;d<h.length;d++){let f=i.get(h[d]);f.nestedGroups&&(a=ur(a).call(a,f.nestedGroups))}a.length>0&&(o=ur(o).call(o,a))}var l;if(s.showNested){var c=i.get(s.nestedGroups);for(let h=0;h<c.length;h++){let d=c[h];d.nestedGroups&&d.nestedGroups.length>0&&(d.showNested==null||d.showNested==!0)&&c.push(...i.get(d.nestedGroups))}l=mn(c).call(c,function(h){return h.visible==null&&(h.visible=!0),h.visible=!!s.showNested,h})}else{var u;l=mn(u=i.get(o)).call(u,function(h){return h.visible==null&&(h.visible=!0),h.visible=!!s.showNested,h})}i.update(ur(l).call(l,s)),s.showNested?(Z.removeClassName(e.dom.label,"collapsed"),Z.addClassName(e.dom.label,"expanded")):(Z.removeClassName(e.dom.label,"expanded"),Z.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const r=this.groupsData.getDataSet(),i=this.groupFromTarget(e);if(i&&i.height!=this.groupTouchParams.group.height){const s=i.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,a=i.dom.foreground.getBoundingClientRect(),l=this.groupTouchParams.group.height;if(s){if(a.top+l<o)return}else{const c=i.height;if(a.top+c-l>o)return}}if(i&&i!=this.groupTouchParams.group){const s=r.get(i.groupId),o=r.get(this.groupTouchParams.group.groupId);o&&s&&(this.options.groupOrderSwap(o,s,r),r.update(o),r.update(s));const a=r.getIds({order:this.options.groupOrder});if(!Z.equalArray(a,this.groupTouchParams.originalOrder)){const l=this.groupTouchParams.originalOrder,c=this.groupTouchParams.group.groupId,u=Math.min(l.length,a.length);let h=0,d=0,f=0;for(;h<u;){for(;h+d<u&&h+f<u&&a[h+d]==l[h+f];)h++;if(h+d>=u)break;if(a[h+d]==c)d=1;else if(l[h+f]==c)f=1;else{const m=_n(a).call(a,l[h+f]),g=r.get(a[h+d]),b=r.get(l[h+f]);this.options.groupOrderSwap(g,b,r),r.update(g),r.update(b);const y=a[h+d];a[h+d]=l[h+f],a[m]=y,h++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const r=this,i=r.groupTouchParams.group.groupId,s=r.groupsData.getDataSet(),o=Z.extend({},s.get(i));r.options.onMoveGroup(o,a=>{if(a)a[s._idProp]=i,s.update(a);else{const l=s.getIds({order:r.options.groupOrder});if(!Z.equalArray(l,r.groupTouchParams.originalOrder)){const c=r.groupTouchParams.originalOrder,u=Math.min(c.length,l.length);let h=0;for(;h<u;){for(;h<u&&l[h]==c[h];)h++;if(h>=u)break;const d=_n(l).call(l,c[h]),f=s.get(l[h]),m=s.get(c[h]);r.options.groupOrderSwap(f,m,s),s.update(f),s.update(m);const g=l[h];l[h]=c[h],l[d]=g,h++}}}}),r.body.emitter.emit("groupDragged",{groupId:i}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const r=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(r||i){this._onMultiSelectItem(e);return}const s=this.getSelection(),o=this.itemFromTarget(e),a=o&&o.selectable?[o.id]:[];this.setSelection(a);const l=this.getSelection();(l.length>0||s.length>0)&&this.body.emitter.emit("select",{items:l,event:e})}_onMouseOver(e){const r=this.itemFromTarget(e);if(!r)return;const i=this.itemFromRelatedTarget(e);if(r===i)return;const s=r.getTitle();if(this.options.showTooltips&&s){this.popup==null&&(this.popup=new N$e(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(s);const o=this.body.dom.centerContainer,a=o.getBoundingClientRect();this.popup.setPosition(e.clientX-a.left+o.offsetLeft,e.clientY-a.top+o.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:r.id,event:e})}_onMouseOut(e){const r=this.itemFromTarget(e);if(!r)return;const i=this.itemFromRelatedTarget(e);r!==i&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:r.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const i=this.body.dom.centerContainer,s=i.getBoundingClientRect();this.popup.setPosition(e.clientX-s.left+i.offsetLeft,e.clientY-s.top+i.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const r=this;if(e){const i=r.itemsData.get(e.id);this.options.onUpdate(i,s=>{s&&r.itemsData.update(s)})}}_onDropObjectOnItem(e){const r=this.itemFromTarget(e),i=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,r)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const r=this,i=this.options.snap||null,s=this.dom.frame.getBoundingClientRect(),o=this.options.rtl?s.right-e.center.x:e.center.x-s.left,a=this.body.util.toTime(o),l=this.body.util.getScale(),c=this.body.util.getStep();let u,h;e.type=="drop"?(h=JSON.parse(e.dataTransfer.getData("text")),h.content=h.content?h.content:"new item",h.start=h.start?h.start:i?i(a,l,c):a,h.type=h.type||"box",h[this.itemsData.idProp]=h.id||_d(),h.type=="range"&&!h.end&&(u=this.body.util.toTime(o+this.props.width/5),h.end=i?i(u,l,c):u)):(h={start:i?i(a,l,c):a,content:"new item"},h[this.itemsData.idProp]=_d(),this.options.type==="range"&&(u=this.body.util.toTime(o+this.props.width/5),h.end=i?i(u,l,c):u));const d=this.groupFromTarget(e);d&&(h.group=d.groupId),h=this._cloneItemData(h),this.options.onAdd(h,f=>{f&&(r.itemsData.add(f),e.type=="drop"&&r.setSelection([f.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const r=this.itemFromTarget(e);if(r){let i=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const a=this.itemsData.get(r.id).group;let l;this.options.multiselectPerGroup&&i.length>0&&(l=this.itemsData.get(i[0]).group),(!this.options.multiselectPerGroup||l==null||l==a)&&i.push(r.id);const c=Vd._getItemRange(this.itemsData.get(i));if(!this.options.multiselectPerGroup||l==a){i=[];for(const u in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,u))continue;const h=this.items[u],d=h.data.start,f=h.data.end!==void 0?h.data.end:d;d>=c.min&&f<=c.max&&(!this.options.multiselectPerGroup||l==this.itemsData.get(h.id).group)&&!(h instanceof uh)&&i.push(h.id)}}}else{const a=_n(i).call(i,r.id);a==-1?i.push(r.id):_i(i).call(i,a,1)}const o=Ot(i).call(i,a=>this.getItemById(a).selectable);this.setSelection(o),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let r=null,i=null;return mt(e).call(e,s=>{(i==null||s.start<i)&&(i=s.start),s.end!=null?(r==null||s.end>r)&&(r=s.end):(r==null||s.start>r)&&(r=s.start)}),{min:i,max:r}}itemFromElement(e){let r=e;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"vis-item"))return r["vis-item"];r=r.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const r=e.center?e.center.y:e.clientY;let i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(let s=0;s<i.length;s++){const o=i[s],a=this.groups[o],l=a.dom.foreground,c=l.getBoundingClientRect();if(r>=c.top&&r<c.top+l.offsetHeight)return a;if(this.options.orientation.item==="top"){if(s===this.groupIds.length-1&&r>c.top)return a}else if(s===0&&r<c.top+l.offset)return a}return null}static itemSetFromTarget(e){let r=e.target;for(;r;){if(Object.prototype.hasOwnProperty.call(r,"vis-itemset"))return r["vis-itemset"];r=r.parentNode}return null}_cloneItemData(e,r){const i=Z.extend({},e);return r||(r=this.itemsData.type),i.start!=null&&(i.start=Z.convert(i.start,r&&r.start||"Date")),i.end!=null&&(i.end=Z.convert(i.end,r&&r.end||"Date")),i}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),r=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=r){if(this._detachAllClusters(),r){for(let i of r)i.attach();this.clusters=r}this._updateClusters(r)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){var r;const o=new Yc(mn(e).call(e,c=>c.id)),a=Ot(r=this.clusters).call(r,c=>!o.has(c.id));let l=!1;for(let c of a){var i;const u=_n(i=this.selection).call(i,c.id);if(u!==-1){var s;c.unselect(),_i(s=this.selection).call(s,u,1),l=!0}}if(l){const c=this.getSelection();this.body.emitter.emit("select",{items:c,event})}}this.clusters=e||[]}}Vd.types={background:uh,box:A$e,range:Hd,point:R$e};Vd.prototype._onAdd=Vd.prototype._onUpdate;let tg=!1,VG,m1="background: #FFeeee; color: #dd0000";class qn{constructor(){}static validate(e,r,i){tg=!1,VG=r;let s=r;return i!==void 0&&(s=r[i]),qn.parse(e,s,[]),tg}static parse(e,r,i){for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&qn.check(s,e,r,i)}static check(e,r,i,s){if(i[e]===void 0&&i.__any__===void 0){qn.getSuggestion(e,i,s);return}let o=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(o="__any__",a=qn.getType(r[e])==="object");let l=i[o];a&&l.__type__!==void 0&&(l=l.__type__),qn.checkFields(e,r,i,o,l,s)}static checkFields(e,r,i,s,o,a){let l=function(h){console.log("%c"+h+qn.printLocation(a,e),m1)},c=qn.getType(r[e]),u=o[c];u!==void 0?qn.getType(u)==="array"&&_n(u).call(u,r[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+qn.print(u)+' not "'+r[e]+'". '),tg=!0):c==="object"&&s!=="__any__"&&(a=Z.copyAndExtendArray(a,e),qn.parse(r[e],i[s],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+qn.print(Pr(o))+". Received ["+c+'] "'+r[e]+'"'),tg=!0)}static getType(e){var r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Vt(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,i){let s=qn.findInOptions(e,r,i,!1),o=qn.findInOptions(e,VG,[],!0),a=8,l=4,c;s.indexMatch!==void 0?c=" in "+qn.printLocation(s.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`:o.distance<=l&&s.distance>o.distance?c=" in "+qn.printLocation(s.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+qn.printLocation(o.path,o.closestMatch,""):s.distance<=a?c='. Did you mean "'+s.closestMatch+'"?'+qn.printLocation(s.path,e):c=". Did you mean one of these: "+qn.print(Pr(r))+qn.printLocation(i,e),console.log('%cUnknown option detected: "'+e+'"'+c,m1),tg=!0}static findInOptions(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,a="",l=[],c=e.toLowerCase(),u;for(let d in r){if(!Object.prototype.hasOwnProperty.call(r,d))continue;let f;if(r[d].__type__!==void 0&&s===!0){let m=qn.findInOptions(e,r[d],Z.copyAndExtendArray(i,d));o>m.distance&&(a=m.closestMatch,l=m.path,o=m.distance,u=m.indexMatch)}else{var h;_n(h=d.toLowerCase()).call(h,c)!==-1&&(u=d),f=qn.levenshteinDistance(e,d),o>f&&(a=d,l=Z.copyArray(i),o=f)}}return{closestMatch:a,path:l,distance:o,indexMatch:u}}static printLocation(e,r){let s=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)s+="  ";s+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)s+="  ";s+=r+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)s+="  ";s+=`}
`}return s+`

`}static print(e){return $i(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;var i=[],s;for(s=0;s<=r.length;s++)i[s]=[s];var o;for(o=0;o<=e.length;o++)i[0][o]=o;for(s=1;s<=r.length;s++)for(o=1;o<=e.length;o++)r.charAt(s-1)==e.charAt(o-1)?i[s][o]=i[s-1][o-1]:i[s][o]=Math.min(i[s-1][o-1]+1,Math.min(i[s][o-1]+1,i[s-1][o]+1));return i[r.length][e.length]}}let Ft="string",Lt="boolean",Pn="number",YG="array",Nh="date",lr="object",V$e="dom",jh="moment",GG="any",Y$e={configure:{enabled:{boolean:Lt},filter:{boolean:Lt,function:"function"},container:{dom:V$e},__type__:{object:lr,boolean:Lt,function:"function"}},align:{string:Ft},alignCurrentTime:{string:Ft,undefined:"undefined"},rtl:{boolean:Lt,undefined:"undefined"},rollingMode:{follow:{boolean:Lt},offset:{number:Pn,undefined:"undefined"},__type__:{object:lr}},onTimeout:{timeoutMs:{number:Pn},callback:{function:"function"},__type__:{object:lr}},verticalScroll:{boolean:Lt,undefined:"undefined"},horizontalScroll:{boolean:Lt,undefined:"undefined"},horizontalScrollKey:{string:Ft,undefined:"undefined"},horizontalScrollInvert:{boolean:Lt,undefined:"undefined"},autoResize:{boolean:Lt},throttleRedraw:{number:Pn},clickToUse:{boolean:Lt},dataAttributes:{string:Ft,array:YG},editable:{add:{boolean:Lt,undefined:"undefined"},remove:{boolean:Lt,undefined:"undefined"},updateGroup:{boolean:Lt,undefined:"undefined"},updateTime:{boolean:Lt,undefined:"undefined"},overrideItems:{boolean:Lt,undefined:"undefined"},__type__:{boolean:Lt,object:lr}},end:{number:Pn,date:Nh,string:Ft,moment:jh},format:{minorLabels:{millisecond:{string:Ft,undefined:"undefined"},second:{string:Ft,undefined:"undefined"},minute:{string:Ft,undefined:"undefined"},hour:{string:Ft,undefined:"undefined"},weekday:{string:Ft,undefined:"undefined"},day:{string:Ft,undefined:"undefined"},week:{string:Ft,undefined:"undefined"},month:{string:Ft,undefined:"undefined"},year:{string:Ft,undefined:"undefined"},__type__:{object:lr,function:"function"}},majorLabels:{millisecond:{string:Ft,undefined:"undefined"},second:{string:Ft,undefined:"undefined"},minute:{string:Ft,undefined:"undefined"},hour:{string:Ft,undefined:"undefined"},weekday:{string:Ft,undefined:"undefined"},day:{string:Ft,undefined:"undefined"},week:{string:Ft,undefined:"undefined"},month:{string:Ft,undefined:"undefined"},year:{string:Ft,undefined:"undefined"},__type__:{object:lr,function:"function"}},__type__:{object:lr}},moment:{function:"function"},groupHeightMode:{string:Ft},groupOrder:{string:Ft,function:"function"},groupEditable:{add:{boolean:Lt,undefined:"undefined"},remove:{boolean:Lt,undefined:"undefined"},order:{boolean:Lt,undefined:"undefined"},__type__:{boolean:Lt,object:lr}},groupOrderSwap:{function:"function"},height:{string:Ft,number:Pn},hiddenDates:{start:{date:Nh,number:Pn,string:Ft,moment:jh},end:{date:Nh,number:Pn,string:Ft,moment:jh},repeat:{string:Ft},__type__:{object:lr,array:YG}},itemsAlwaysDraggable:{item:{boolean:Lt,undefined:"undefined"},range:{boolean:Lt,undefined:"undefined"},__type__:{boolean:Lt,object:lr}},limitSize:{boolean:Lt},locale:{string:Ft},locales:{__any__:{any:GG},__type__:{object:lr}},longSelectPressTime:{number:Pn},margin:{axis:{number:Pn},item:{horizontal:{number:Pn,undefined:"undefined"},vertical:{number:Pn,undefined:"undefined"},__type__:{object:lr,number:Pn}},__type__:{object:lr,number:Pn}},max:{date:Nh,number:Pn,string:Ft,moment:jh},maxHeight:{number:Pn,string:Ft},maxMinorChars:{number:Pn},min:{date:Nh,number:Pn,string:Ft,moment:jh},minHeight:{number:Pn,string:Ft},moveable:{boolean:Lt},multiselect:{boolean:Lt},multiselectPerGroup:{boolean:Lt},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:Ft,undefined:"undefined"},item:{string:Ft,undefined:"undefined"},__type__:{string:Ft,object:lr}},selectable:{boolean:Lt},sequentialSelection:{boolean:Lt},showCurrentTime:{boolean:Lt},showMajorLabels:{boolean:Lt},showMinorLabels:{boolean:Lt},showWeekScale:{boolean:Lt},stack:{boolean:Lt},stackSubgroups:{boolean:Lt},cluster:{maxItems:{number:Pn,undefined:"undefined"},titleTemplate:{string:Ft,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:Lt,undefined:"undefined"},fitOnDoubleClick:{boolean:Lt,undefined:"undefined"},__type__:{boolean:Lt,object:lr}},snap:{function:"function",null:"null"},start:{date:Nh,number:Pn,string:Ft,moment:jh},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:Ft,function:"function"},showTooltips:{boolean:Lt},tooltip:{followMouse:{boolean:Lt},overflowMethod:{string:["cap","flip","none"]},delay:{number:Pn},template:{function:"function"},__type__:{object:lr}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:Lt,object:lr}},timeAxis:{scale:{string:Ft,undefined:"undefined"},step:{number:Pn,undefined:"undefined"},__type__:{object:lr}},type:{string:Ft},width:{string:Ft,number:Pn},preferZoom:{boolean:Lt},zoomable:{boolean:Lt},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:Pn},zoomMax:{number:Pn},zoomMin:{number:Pn},xss:{disabled:{boolean:Lt},filterOptions:{__any__:{any:GG},__type__:{object:lr}},__type__:{object:lr}},__type__:{object:lr}},G$e={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var K$e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class X$e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return K$e[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;var s=this._isColorString(e);if(s!==void 0&&(e=s),Z.isString(e)===!0){if(Z.isValidRGB(e)===!0){let o=e.substr(4).substr(0,e.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(Z.isValidRGBA(e)===!0){let o=e.substr(5).substr(0,e.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(Z.isValidHex(e)===!0){let o=Z.hexToRGB(e);i={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let o=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:o}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+$i(e));this._setColor(i,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Z.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ci(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Z.extend({},e)),this.color=e;let i=Z.RGBToHSV(e.r,e.g,e.b),s=2*Math.PI,o=this.r*i.s,a=this.centerCoordinates.x+o*Math.sin(s*i.h),l=this.centerCoordinates.y+o*Math.cos(s*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let r=Z.RGBToHSV(this.color.r,this.color.g,this.color.b);r.v=e/100;let i=Z.HSVToRGB(r.h,r.s,r.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=Z.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let s=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,s,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-r.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),xie(i).call(i),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,i,s;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var o=this;this.opacityRange.onchange=function(){o._setOpacity(this.value)},this.opacityRange.oninput=function(){o._setOpacity(this.value)},this.brightnessRange.onchange=function(){o._setBrightness(this.value)},this.brightnessRange.oninput=function(){o._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=Le(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=Le(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=Le(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=Le(s=this._loadLast).call(s,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new wi(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),xse(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let r=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,i);let s,o,a,l;this.centerCoordinates={x:r*.5,y:i*.5},this.r=.49*r;let c=2*Math.PI/360,u=1/360,h=1/this.r,d;for(a=0;a<360;a++)for(l=0;l<this.r;l++)s=this.centerCoordinates.x+l*Math.sin(c*a),o=this.centerCoordinates.y+l*Math.cos(c*a),d=Z.HSVToRGB(a*u,l*h,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(s-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,i)}this.generated=!0}_moveSelector(e){let r=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-r.left,s=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=i-a,c=s-o,u=Math.atan2(l,c),h=.98*Math.min(Math.sqrt(l*l+c*c),a),d=Math.cos(u)*h+o,f=Math.sin(u)*h+a;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let m=u/(2*Math.PI);m=m<0?m+1:m;let g=h/this.r,b=Z.RGBToHSV(this.color.r,this.color.g,this.color.b);b.h=m,b.s=g;let y=Z.HSVToRGB(b.h,b.s,b.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class Ose{constructor(e,r,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Z.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new X$e(s),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(Vt(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Ot(e)!==void 0&&(this.options.filter=Ot(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);Ot(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=Ot(this.options),r=0,i=!1;for(let s in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,s)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(s,[]),i=i||this._handleObject(this.configureOptions[s],[s],!0)):(e===!0||_n(e).call(e,s)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let i=0;i<e.length;i++)if(r[e[i]]!==void 0)r=r[e[i]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){let o=document.createElement("div");o.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return mt(i).call(i,a=>{o.appendChild(a)}),this.domElements.push(o),this.domElements.length}return 0}_makeHeader(e){let r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerHTML=Z.xss(e),this._makeItem([],r)}_makeLabel(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=document.createElement("div");return s.className="vis-configuration vis-config-label vis-config-s"+r.length,i===!0?s.innerHTML=Z.xss("<i><b>"+e+":</b></i>"):s.innerHTML=Z.xss(e+":"),s}_makeDropdown(e,r,i){let s=document.createElement("select");s.className="vis-configuration vis-config-select";let o=0;r!==void 0&&_n(e).call(e,r)!==-1&&(o=_n(e).call(e,r));for(let c=0;c<e.length;c++){let u=document.createElement("option");u.value=e[c],c===o&&(u.selected="selected"),u.innerHTML=e[c],s.appendChild(u)}let a=this;s.onchange=function(){a._update(this.value,i)};let l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,s)}_makeRange(e,r,i){let s=e[0],o=e[1],a=e[2],l=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=a}catch{}c.step=l;let u="",h=0;if(r!==void 0){let b=1.2;r<0&&r*b<o?(c.min=Math.ceil(r*b),h=c.min,u="range increased"):r/b<o&&(c.min=Math.ceil(r/b),h=c.min,u="range increased"),r*b>a&&a!==1&&(c.max=Math.ceil(r*b),h=c.max,u="range increased"),c.value=r}else c.value=s;let d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=Number(c.value);var f=this;c.onchange=function(){d.value=this.value,f._update(Number(this.value),i)},c.oninput=function(){d.value=this.value};let m=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,m,c,d);u!==""&&this.popupHistory[g]!==h&&(this.popupHistory[g]=h,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerHTML=Z.xss(e),i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ci(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ci(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,i){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=e,r!==void 0&&(s.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:i,value:r}):this.changedOptions.push({path:i,value:r})));let o=this;s.onchange=function(){o._update(this.checked,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeTextInput(e,r,i){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=r,r!==e&&this.changedOptions.push({path:i,value:r});let o=this;s.onchange=function(){o._update(this.value,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_makeColorField(e,r,i){let s=e[1],o=document.createElement("div");r=r===void 0?s:r,r!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=r):o.className="vis-configuration vis-config-colorBlock none",r=r===void 0?s:r,o.onclick=()=>{this._showColorPicker(r,o,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,o)}_showColorPicker(e,r,i){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(s=>{let o="rgba("+s.r+","+s.g+","+s.b+","+s.a+")";r.style.backgroundColor=o,this._update(o,i)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,i)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=!1,o=Ot(this.options),a=!1;for(let l in e){if(!Object.prototype.hasOwnProperty.call(e,l))continue;s=!0;let c=e[l],u=Z.copyAndExtendArray(r,l);if(typeof o=="function"&&(s=o(l,r),s===!1&&!Vt(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,s=this._handleObject(c,u,!0),this.allowCreation=i===!1)),s!==!1){a=!0;let h=this._getValue(u);if(Vt(c))this._handleArray(c,h,u);else if(typeof c=="string")this._makeTextInput(c,h,u);else if(typeof c=="boolean")this._makeCheckbox(c,h,u);else if(c instanceof Object){let d=!0;if(_n(r).call(r,"physics")!==-1&&this.moduleOptions.physics.solver!==l&&(d=!1),d===!0)if(c.enabled!==void 0){let f=Z.copyAndExtendArray(u,"enabled"),m=this._getValue(f);if(m===!0){let g=this._makeLabel(l,u,!0);this._makeItem(u,g),a=this._handleObject(c,u)||a}else this._makeCheckbox(c,m,u)}else{let f=this._makeLabel(l,u,!0);this._makeItem(u,f),a=this._handleObject(c,u)||a}}else console.error("dont know how to handle",c,l,u)}}return a}_handleArray(e,r,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,i),e[1]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,i),e[0]!==r&&this.changedOptions.push({path:i,value:Number(r)}))}_update(e,r){let i=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<r.length;o++)r[o]!=="global"&&(s[r[o]]===void 0&&(s[r[o]]={}),o!==r.length-1?s=s[r[o]]:s[r[o]]=e);return i}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+$i(e,null,2)+"</pre>"}getOptions(){let e={};for(var r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}}class Z5 extends Mf{constructor(e,r,i,s){var o,a,l,c,u,h,d;if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof Z5))throw new SyntaxError("Constructor must be called with the new operator");if(!(Vt(i)||Dl(i))&&i instanceof Object){const y=s;s=i,i=y}s&&s.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const f=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Si},this.options=Z.deepExtend({},this.defaultOptions),s&&Z.setupXSSProtection(s.xss),this._create(e),!s||s&&typeof s.rtl>"u"){this.dom.root.style.visibility="hidden";let y,v=this.dom.root;for(;!y&&v;)y=window.getComputedStyle(v,null).direction,v=v.parentElement;this.options.rtl=y&&y.toLowerCase()=="rtl"}else this.options.rtl=s.rtl;s&&(s.rollingMode&&(this.options.rollingMode=s.rollingMode),s.onInitialDrawComplete&&(this.options.onInitialDrawComplete=s.onInitialDrawComplete),s.onTimeout&&(this.options.onTimeout=s.onTimeout),s.loadingScreenTemplate&&(this.options.loadingScreenTemplate=s.loadingScreenTemplate));const m=document.createElement("div");if(this.options.loadingScreenTemplate){var g;const y=Le(g=this.options.loadingScreenTemplate).call(g,this),v=y(this.dom.loadingScreen);v instanceof Object&&!(v instanceof Element)?y(m):v instanceof Element?(m.innerHTML="",m.appendChild(v)):v!=null&&(m.innerHTML=Z.xss(v))}this.dom.loadingScreen.appendChild(m),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:Le(o=this.on).call(o,this),off:Le(a=this.off).call(a,this),emit:Le(l=this.emit).call(l,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:Le(c=f._toScreen).call(c,f),toGlobalScreen:Le(u=f._toGlobalScreen).call(u,f),toTime:Le(h=f._toTime).call(h,f),toGlobalTime:Le(d=f._toGlobalTime).call(d,f)}},this.range=new aS(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new p1(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new Mse(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Vd(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function b(y,v){f.hasListeners(y)&&f.emit(y,f.getEventProperties(v))}this.dom.root.onclick=y=>b("click",y),this.dom.root.ondblclick=y=>b("doubleClick",y),this.dom.root.oncontextmenu=y=>b("contextmenu",y),this.dom.root.onmouseover=y=>b("mouseOver",y),window.PointerEvent?(this.dom.root.onpointerdown=y=>b("mouseDown",y),this.dom.root.onpointermove=y=>b("mouseMove",y),this.dom.root.onpointerup=y=>b("mouseUp",y)):(this.dom.root.onmousemove=y=>b("mouseMove",y),this.dom.root.onmousedown=y=>b("mouseDown",y),this.dom.root.onmouseup=y=>b("mouseUp",y)),this.initialFitDone=!1,this.on("changed",()=>{if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var y=f.getItemRange();const v=f.options.start!=null?f.options.start:y.min,w=f.options.end!=null?f.options.end:y.max;f.setWindow(v,w,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.itemSet.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&ci(()=>f.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{f.destroy()}),s&&this.setOptions(s),this.body.emitter.on("fit",y=>{this._onFit(y),this.redraw()}),i&&this.setGroups(i),r&&this.setItems(r),this._redraw()}_createConfigurator(){return new Ose(this,this.dom.container,G$e)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(qn.validate(e,Y$e)===!0&&console.log("%cErrors have been found in the supplied options object.",m1),Mf.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const i=this.itemsData;if(i){const s=this.getSelection();this.setItems(null),this.setItems(i.rawDS),this.setSelection(s)}}}setItems(e){this.itemsDone=!1;let r;e?Dl(e)?r=Up(e):r=Up(new zp(e)):r=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=r,this.itemSet&&this.itemSet.setItems(r!=null?r.rawDS:null)}setGroups(e){let r;const i=s=>s.visible!==!1;e?(Vt(e)&&(e=new zp(e)),r=new l6e(e,{filter:i})):r=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=r,this.itemSet.setGroups(r)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,r){this.itemSet&&this.itemSet.setSelection(e),r&&r.focus&&this.focus(e,r)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,r){if(!this.itemsData||e==null)return;const i=Vt(e)?e:[e],s=this.itemsData.get(i);let o=null,a=null;if(mt(s).call(s,l=>{const c=l.start.valueOf(),u="end"in l?l.end.valueOf():l.start.valueOf();(o===null||c<o)&&(o=c),(a===null||u>a)&&(a=u)}),o!==null&&a!==null){const l=this,c=this.itemSet.items[i[0]];let u=this._getScrollTop()*-1,h=null;const d=(w,k,S)=>{const _=KG(l,c);if(_===!1||(h||(h=_),h.itemTop==_.itemTop&&!h.shouldScroll))return;h.itemTop!=_.itemTop&&_.shouldScroll&&(h=_,u=l._getScrollTop()*-1);const C=u,P=h.scrollOffset,T=S?P:C+(P-C)*w;l._setScrollTop(-T),k||l._redraw()},f=()=>{const w=KG(l,c);w.shouldScroll&&w.itemTop!=h.itemTop&&(l._setScrollTop(-w.scrollOffset),l._redraw())},m=()=>{f(),ci(f,100)},g=r&&r.zoom!==void 0?r.zoom:!0,b=(o+a)/2,y=g?(a-o)*1.1:Math.max(this.range.end-this.range.start,(a-o)*1.1),v=r&&r.animation!==void 0?r.animation:!0;v||(h={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.stopRolling(),this.range.setRange(b-y/2,b+y/2,{animation:v},m,d)}}fit(e,r){const i=e&&e.animation!==void 0?e.animation:!0;let s;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(s=this.getDataRange(),this.moveTo(s.min.valueOf(),{animation:i},r)):(s=this.getItemRange(),this.range.setRange(s.min,s.max,{animation:i},r))}getItemRange(){const e=this.getDataRange();let r=e.min!==null?e.min.valueOf():null,i=e.max!==null?e.max.valueOf():null,s=null,o=null;if(r!=null&&i!=null){let a=i-r;a<=0&&(a=10);const l=a/this.props.center.width,c={};let u=0;if(mt(Z).call(Z,this.itemSet.items,(d,f)=>{d.groupShowing&&(c[f]=d.redraw(!0),u=c[f].length)}),u>0)for(let d=0;d<u;d++)mt(Z).call(Z,c,f=>{f[d]()});if(mt(Z).call(Z,this.itemSet.items,d=>{const f=rO(d),m=iO(d);let g,b;this.options.rtl?(g=f-(d.getWidthRight()+10)*l,b=m+(d.getWidthLeft()+10)*l):(g=f-(d.getWidthLeft()+10)*l,b=m+(d.getWidthRight()+10)*l),g<r&&(r=g,s=d),b>i&&(i=b,o=d)}),s&&o){const d=s.getWidthLeft()+10,f=o.getWidthRight()+10,m=this.props.center.width-d-f;m>0&&(this.options.rtl?(r=rO(s)-f*a/m,i=iO(o)+d*a/m):(r=rO(s)-d*a/m,i=iO(o)+f*a/m))}}return{min:r!=null?new Date(r):null,max:i!=null?new Date(i):null}}getDataRange(){let e=null,r=null;if(this.itemsData){var i;mt(i=this.itemsData).call(i,s=>{const o=Z.convert(s.start,"Date").valueOf(),a=Z.convert(s.end!=null?s.end:s.start,"Date").valueOf();(e===null||o<e)&&(e=o),(r===null||a>r)&&(r=a)})}return{min:e!=null?new Date(e):null,max:r!=null?new Date(r):null}}getEventProperties(e){const r=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,s=this.dom.centerContainer.getBoundingClientRect(),o=this.options.rtl?s.right-r:r-s.left,a=i-s.top,l=this.itemSet.itemFromTarget(e),c=this.itemSet.groupFromTarget(e),u=Q5.customTimeFromTarget(e),h=this.itemSet.options.snap||null,d=this.body.util.getScale(),f=this.body.util.getStep(),m=this._toTime(o),g=h?h(m,d,f):m,b=Z.getTarget(e);let y=null;return l!=null?y="item":u!=null?y="custom-time":Z.hasParent(b,this.timeAxis.dom.foreground)||this.timeAxis2&&Z.hasParent(b,this.timeAxis2.dom.foreground)?y="axis":Z.hasParent(b,this.itemSet.dom.labelSet)?y="group-label":Z.hasParent(b,this.currentTime.bar)?y="current-time":Z.hasParent(b,this.dom.center)&&(y="background"),{event:e,item:l?l.id:null,isCluster:l?!!l.isCluster:!1,items:l?l.items||[]:null,group:c?c.groupId:null,customTime:u?u.options.id:null,what:y,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:a,time:m,snappedTime:g}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){Mf.prototype._redraw.call(this)}_onFit(e){const{start:r,end:i,animation:s}=e;i?this.range.setRange(r,i,{animation:s}):this.moveTo(r.valueOf(),{animation:s})}}function rO(n){return Z.convert(n.data.start,"Date").valueOf()}function iO(n){const e=n.data.end!=null?n.data.end:n.data.start;return Z.convert(e,"Date").valueOf()}function KG(n,e){if(!e.parent)return!1;const r=n.options.rtl?n.props.rightContainer.height:n.props.leftContainer.height,i=n.props.center.height,s=e.parent;let o=s.top,a=!0;const l=n.timeAxis.options.orientation.axis,c=()=>l=="bottom"?s.height-e.top-e.height:e.top,u=n._getScrollTop()*-1,h=o+c(),d=e.height;return h<u?o+r<=o+c()+d&&(o+=c()-n.itemSet.options.margin.item.vertical):h+d>u+r?o+=c()+d-r+n.itemSet.options.margin.item.vertical:a=!1,o=Math.min(o,i-r),{shouldScroll:a,scrollOffset:o,itemTop:h}}class Q$e{constructor(e,r,i,s,o,a){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=a,this._start=e,this._end=r,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=i,this.autoScaleEnd=s,this.formattingFunction=c,i||s){const u=this,h=d=>{const f=d-d%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return d%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?f+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:f};i&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),s&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const r=this.majorCharHeight/this.scale,i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);let s=0;i<0&&(s=i);let o=!1;for(let a=s;Math.abs(a)<=Math.abs(i);a++){this.magnitudefactor=Math.pow(10,a);for(let l=0;l<this.minorSteps.length;l++)if(this.magnitudefactor*this.minorSteps[l]>=r){o=!0,this.minorStepIdx=l;break}if(o===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let r=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(r=this.formattingFunction(e)),typeof r=="number"?"".concat(r):typeof r=="string"?r:e.toPrecision(5)}getLines(){const e=[],r=this.getStep(),i=(r-this._start%r)%r;for(let s=this._start+i;this._end-s>1e-5;s+=r)s!=this._start&&e.push({major:this.is_major(s),y:this.convertValue(s),val:this.formatValue(s)});return e}followScale(e){const r=this.minorStepIdx,i=this._start,s=this._end,o=this,a=()=>{o.magnitudefactor*=2},l=()=>{o.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,r==2||a(),a()):(this.minorStepIdx=2,r==1||l(),l()));const c=e.convertValue(0),u=e.getStep()*e.scale;let h=!1,d=0;for(;!h&&d++<5;){this.scale=u/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const f=this.containerHeight/this.scale;this._start=i,this._end=this._start+f;const m=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],b=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const y=c-m;this._end+=y/this.scale,this._start=this._end-f}else this.autoScaleStart?(this._start-=b/this.scale,this._end=this._start+f):(this._start+=g-b/this.scale,this._end=this._start+f);if(!this.autoScaleEnd&&this._end>s+1e-5){l(),h=!1;continue}if(!this.autoScaleStart&&this._start<i-1e-5)if(this.zeroAlign&&i>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),h=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&f<s-i){a(),h=!1;continue}h=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class XG extends du{constructor(e,r,i,s){super(),this.id=_d(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(a){return"".concat(u1(a.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(a){return"".concat(u1(a.toPrecision(3)))},title:{text:void 0,style:void 0}}},this.linegraphOptions=s,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=Z.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(r),this.width=Number("".concat(this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const o=this;this.body.emitter.on("verticalDrag",()=>{o.dom.lineContainer.style.top="".concat(o.body.domProps.scrollTop,"px")})}addGroup(e,r){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=r),this.amountOfGroups+=1}updateGroup(e,r){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=r}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let r=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(r=!0);const i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];Z.selectiveDeepExtend(i,this.options,e),this.minWidth=Number("".concat(this.options.width).replace("px","")),r===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){pc(this.svgElements);let e;const r=this.options.iconWidth,i=15,s=4;let o=s+.5*i;this.options.orientation==="left"?e=s:e=this.width-r-s;const a=Pr(this.groups);pr(a).call(a,(l,c)=>l<c?-1:1);for(const l of a)this.groups[l].visible===!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]===!0)&&(this.groups[l].getLegend(r,i,this.framework,e,o),o+=i+s);Ls(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(pc(this.svgElements),Ls(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,r){this.range.start=e,this.range.end=r}redraw(){let e=!1,r=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(const i in this.groups)Object.prototype.hasOwnProperty.call(this.groups,i)&&this.groups[i].visible===!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]===!0)&&r++;if(this.amountOfGroups===0||r===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;const i=this.props,s=this.dom.frame;s.className="vis-data-axis",this._calculateCharSize();const o=this.options.orientation,a=this.options.showMinorLabels,l=this.options.showMajorLabels,c=this.body.dom.backgroundHorizontal.offsetWidth;i.minorLabelHeight=a?i.minorCharHeight:0,i.majorLabelHeight=l?i.majorCharHeight:0,i.minorLineWidth=c-this.lineOffset-this.width+2*this.options.minorLinesOffset,i.minorLineHeight=1,i.majorLineWidth=c-this.lineOffset-this.width+2*this.options.majorLinesOffset,i.majorLineHeight=1,o==="left"?(s.style.top="0",s.style.left="0",s.style.bottom="",s.style.width="".concat(this.width,"px"),s.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(s.style.top="",s.style.bottom="0",s.style.left="0",s.style.width="".concat(this.width,"px"),s.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return e}_redrawLabels(){let e=!1;pc(this.DOMelements.lines),pc(this.DOMelements.labels);const r=this.options.orientation,i=this.options[r].range!=null?this.options[r].range:{};let s=!0;i.max!=null&&(this.range.end=i.max,s=!1);let o=!0;i.min!=null&&(this.range.start=i.min,o=!1),this.scale=new Q$e(this.range.start,this.range.end,o,s,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[r].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;const a=this.scale.getLines();mt(a).call(a,u=>{const h=u.y,d=u.major;this.options.showMinorLabels&&d===!1&&this._redrawLabel(h-2,u.val,r,"vis-y-axis vis-minor",this.props.minorCharHeight),d&&h>=0&&this._redrawLabel(h-2,u.val,r,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(d?this._redrawLine(h,r,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(h,r,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let l=0;this.options[r].title!==void 0&&this.options[r].title.text!==void 0&&(l=this.props.titleCharHeight);const c=this.options.icons===!0?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width="".concat(this.width,"px"),Ls(this.DOMelements.lines),Ls(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width="".concat(this.width,"px"),Ls(this.DOMelements.lines),Ls(this.DOMelements.labels),this.redraw(),e=!0):(Ls(this.DOMelements.lines),Ls(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,r,i,s,o){const a=SP("div",this.DOMelements.labels,this.dom.frame);a.className=s,a.innerHTML=Z.xss(r),i==="left"?(a.style.left="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="right"):(a.style.right="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="left"),a.style.top="".concat(e-.5*o+this.options.labelOffsetY,"px"),r+="";const l=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<r.length*l&&(this.maxLabelSize=r.length*l)}_redrawLine(e,r,i,s,o){if(this.master===!0){const a=SP("div",this.DOMelements.lines,this.dom.lineContainer);a.className=i,a.innerHTML="",r==="left"?a.style.left="".concat(this.width-s,"px"):a.style.right="".concat(this.width-s,"px"),a.style.width="".concat(o,"px"),a.style.top="".concat(e,"px")}}_redrawTitle(e){if(pc(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const r=SP("div",this.DOMelements.title,this.dom.frame);r.className="vis-y-axis vis-title vis-".concat(e),r.innerHTML=Z.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&Z.addCssText(r,this.options[e].title.style),e==="left"?r.style.left="".concat(this.props.titleCharHeight,"px"):r.style.right="".concat(this.props.titleCharHeight,"px"),r.style.width="".concat(this.height,"px")}Ls(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-minor vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.minorCharHeight=r.clientHeight,this.props.minorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-major vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.majorCharHeight=r.clientHeight,this.props.majorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-title vis-measure",r.appendChild(e),this.dom.frame.appendChild(r),this.props.titleCharHeight=r.clientHeight,this.props.titleCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}}}function by(){}by.draw=function(n,e,r,i){i=i||0;for(var s=J$e(r,e),o=0;o<n.length;o++)if(!s)Bp(n[o].screen_x+i,n[o].screen_y,XA(e),r.svgElements,r.svg,n[o].label);else{var a=s(n[o],e);(a===!0||typeof a=="object")&&Bp(n[o].screen_x+i,n[o].screen_y,XA(e,a),r.svgElements,r.svg,n[o].label)}};by.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l=To("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",r-a),l.setAttributeNS(null,"width",i),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline"),Bp(e+.5*i,r,XA(n),o.svgElements,o.svg)};function XA(n,e){return e=typeof e>"u"?{}:e,{style:e.style||n.options.drawPoints.style,styles:e.styles||n.options.drawPoints.styles,size:e.size||n.options.drawPoints.size,className:e.className||n.className}}function J$e(n,e){var r=void 0;return n.options&&n.options.drawPoints&&n.options.drawPoints.onRender&&typeof n.options.drawPoints.onRender=="function"&&(r=n.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(r=e.group.options.drawPoints.onRender),r}function ki(){}ki.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l=To("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",r-a),l.setAttributeNS(null,"width",i),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline");var c=Math.round(.3*i),u=n.options.barChart.width,h=u/c,d=Math.round(.4*s),f=Math.round(.75*s),m=Math.round((i-2*c)/3);if(WA(e+.5*c+m,r+a-d-1,c,d,n.className+" vis-bar",o.svgElements,o.svg,n.style),WA(e+1.5*c+m+2,r+a-f-1,c,f,n.className+" vis-bar",o.svgElements,o.svg,n.style),n.options.drawPoints.enabled==!0){var g={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size/h,className:n.className};Bp(e+.5*c+m,r+a-d-1,g,o.svgElements,o.svg),Bp(e+1.5*c+m+2,r+a-f-1,g,o.svgElements,o.svg)}};ki.draw=function(n,e,r){var i=[],s={},o,a,l,c,u,h,d=0;for(u=0;u<n.length;u++)if(c=r.groups[n[u]],c.options.style==="bar"&&c.visible===!0&&(r.options.groups.visibility[n[u]]===void 0||r.options.groups.visibility[n[u]]===!0))for(h=0;h<e[n[u]].length;h++)i.push({screen_x:e[n[u]][h].screen_x,screen_end:e[n[u]][h].screen_end,screen_y:e[n[u]][h].screen_y,x:e[n[u]][h].x,end:e[n[u]][h].end,y:e[n[u]][h].y,groupId:n[u],label:e[n[u]][h].label}),d+=1;if(d!==0)for(pr(i).call(i,function(b,y){return b.screen_x===y.screen_x?b.groupId<y.groupId?-1:1:b.screen_x-y.screen_x}),ki._getDataIntersections(s,i),u=0;u<i.length;u++){c=r.groups[i[u].groupId];var f=c.options.barChart.minWidth!=null?c.options.barChart.minWidth:.1*c.options.barChart.width;a=i[u].screen_x;var m=0;if(s[a]===void 0)u+1<i.length&&(o=Math.abs(i[u+1].screen_x-a)),l=ki._getSafeDrawData(o,c,f);else{var g=u+(s[a].amount-s[a].resolved);g<i.length&&(o=Math.abs(i[g].screen_x-a)),l=ki._getSafeDrawData(o,c,f),s[a].resolved+=1,c.options.stack===!0&&c.options.excludeFromStacking!==!0?i[u].screen_y<c.zeroPosition?(m=s[a].accumulatedNegative,s[a].accumulatedNegative+=c.zeroPosition-i[u].screen_y):(m=s[a].accumulatedPositive,s[a].accumulatedPositive+=c.zeroPosition-i[u].screen_y):c.options.barChart.sideBySide===!0&&(l.width=l.width/s[a].amount,l.offset+=s[a].resolved*l.width-.5*l.width*(s[a].amount+1))}let b=l.width,y=i[u].screen_x;if(i[u].screen_end!=null?(b=i[u].screen_end-i[u].screen_x,y+=b*.5):y+=l.offset,WA(y,i[u].screen_y-m,b,c.zeroPosition-i[u].screen_y,c.className+" vis-bar",r.svgElements,r.svg,c.style),c.options.drawPoints.enabled===!0){let v={screen_x:i[u].screen_x,screen_y:i[u].screen_y-m,x:i[u].x,y:i[u].y,groupId:i[u].groupId,label:i[u].label};by.draw([v],c,r,l.offset)}}};ki._getDataIntersections=function(n,e){for(var r,i=0;i<e.length;i++)i+1<e.length&&(r=Math.abs(e[i+1].screen_x-e[i].screen_x)),i>0&&(r=Math.min(r,Math.abs(e[i-1].screen_x-e[i].screen_x))),r===0&&(n[e[i].screen_x]===void 0&&(n[e[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),n[e[i].screen_x].amount+=1)};ki._getSafeDrawData=function(n,e,r){var i,s;return n<e.options.barChart.width&&n>0?(i=n<r?r:n,s=0,e.options.barChart.align==="left"?s-=.5*n:e.options.barChart.align==="right"&&(s+=.5*n)):(i=e.options.barChart.width,s=0,e.options.barChart.align==="left"?s-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(s+=.5*e.options.barChart.width)),{width:i,offset:s}};ki.getStackedYRange=function(n,e,r,i,s){if(n.length>0){pr(n).call(n,function(a,l){return a.screen_x===l.screen_x?a.groupId<l.groupId?-1:1:a.screen_x-l.screen_x});var o={};ki._getDataIntersections(o,n),e[i]=ki._getStackedYRange(o,n),e[i].yAxisOrientation=s,r.push(i)}};ki._getStackedYRange=function(n,e){for(var r,i=e[0].screen_y,s=e[0].screen_y,o=0;o<e.length;o++)r=e[o].screen_x,n[r]===void 0?(i=i>e[o].screen_y?e[o].screen_y:i,s=s<e[o].screen_y?e[o].screen_y:s):e[o].screen_y<0?n[r].accumulatedNegative+=e[o].screen_y:n[r].accumulatedPositive+=e[o].screen_y;for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i=i>n[a].accumulatedNegative?n[a].accumulatedNegative:i,i=i>n[a].accumulatedPositive?n[a].accumulatedPositive:i,s=s<n[a].accumulatedNegative?n[a].accumulatedNegative:s,s=s<n[a].accumulatedPositive?n[a].accumulatedPositive:s);return{min:i,max:s}};function Gr(){}Gr.calcPath=function(n,e){if(n!=null&&n.length>0){var r=[];return e.options.interpolation.enabled==!0?r=Gr._catmullRom(n,e):r=Gr._linear(n),r}};Gr.drawIcon=function(n,e,r,i,s,o){var a=s*.5,l,c,u=To("rect",o.svgElements,o.svg);if(u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",r-a),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*a),u.setAttributeNS(null,"class","vis-outline"),l=To("path",o.svgElements,o.svg),l.setAttributeNS(null,"class",n.className),n.style!==void 0&&l.setAttributeNS(null,"style",n.style),l.setAttributeNS(null,"d","M"+e+","+r+" L"+(e+i)+","+r),n.options.shaded.enabled==!0&&(c=To("path",o.svgElements,o.svg),n.options.shaded.orientation=="top"?c.setAttributeNS(null,"d","M"+e+", "+(r-a)+"L"+e+","+r+" L"+(e+i)+","+r+" L"+(e+i)+","+(r-a)):c.setAttributeNS(null,"d","M"+e+","+r+" L"+e+","+(r+a)+" L"+(e+i)+","+(r+a)+"L"+(e+i)+","+r),c.setAttributeNS(null,"class",n.className+" vis-icon-fill"),n.options.shaded.style!==void 0&&n.options.shaded.style!==""&&c.setAttributeNS(null,"style",n.options.shaded.style)),n.options.drawPoints.enabled==!0){var h={style:n.options.drawPoints.style,styles:n.options.drawPoints.styles,size:n.options.drawPoints.size,className:n.className};Bp(e+.5*i,r,h,o.svgElements,o.svg)}};Gr.drawShading=function(n,e,r,i){if(e.options.shaded.enabled==!0){var s=Number(i.svg.style.height.replace("px","")),o=To("path",i.svgElements,i.svg),a="L";e.options.interpolation.enabled==!0&&(a="C");var l,c=0;e.options.shaded.orientation=="top"?c=0:e.options.shaded.orientation=="bottom"?c=s:c=Math.min(Math.max(0,e.zeroPosition),s),e.options.shaded.orientation=="group"&&r!=null&&r!=null?l="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,a,!1)+" L"+r[r.length-1][0]+","+r[r.length-1][1]+" "+this.serializePath(r,a,!0)+r[0][0]+","+r[0][1]+" Z":l="M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,a,!1)+" V"+c+" H"+n[0][0]+" Z",o.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&o.setAttributeNS(null,"style",e.options.shaded.style),o.setAttributeNS(null,"d",l)}};Gr.draw=function(n,e,r){if(n!=null&&n!=null){var i=To("path",r.svgElements,r.svg);i.setAttributeNS(null,"class",e.className),e.style!==void 0&&i.setAttributeNS(null,"style",e.style);var s="L";e.options.interpolation.enabled==!0&&(s="C"),i.setAttributeNS(null,"d","M"+n[0][0]+","+n[0][1]+" "+this.serializePath(n,s,!1))}};Gr.serializePath=function(n,e,r){if(n.length<2)return"";var i=e,s;if(r)for(s=n.length-2;s>0;s--)i+=n[s][0]+","+n[s][1]+" ";else for(s=1;s<n.length;s++)i+=n[s][0]+","+n[s][1]+" ";return i};Gr._catmullRomUniform=function(n){var e,r,i,s,o,a,l=[];l.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var c=1/6,u=n.length,h=0;h<u-1;h++)e=h==0?n[0]:n[h-1],r=n[h],i=n[h+1],s=h+2<u?n[h+2]:i,o={screen_x:(-e.screen_x+6*r.screen_x+i.screen_x)*c,screen_y:(-e.screen_y+6*r.screen_y+i.screen_y)*c},a={screen_x:(r.screen_x+6*i.screen_x-s.screen_x)*c,screen_y:(r.screen_y+6*i.screen_y-s.screen_y)*c},l.push([o.screen_x,o.screen_y]),l.push([a.screen_x,a.screen_y]),l.push([i.screen_x,i.screen_y]);return l};Gr._catmullRom=function(n,e){var r=e.options.interpolation.alpha;if(r==0||r===void 0)return this._catmullRomUniform(n);var i,s,o,a,l,c,u,h,d,f,m,g,b,y,v,w,k,S,_,C=[];C.push([Math.round(n[0].screen_x),Math.round(n[0].screen_y)]);for(var P=n.length,T=0;T<P-1;T++)i=T==0?n[0]:n[T-1],s=n[T],o=n[T+1],a=T+2<P?n[T+2]:o,u=Math.sqrt(Math.pow(i.screen_x-s.screen_x,2)+Math.pow(i.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),d=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),y=Math.pow(d,r),w=Math.pow(d,2*r),v=Math.pow(h,r),k=Math.pow(h,2*r),_=Math.pow(u,r),S=Math.pow(u,2*r),f=2*S+3*_*v+k,m=2*w+3*y*v+k,g=3*_*(_+v),g>0&&(g=1/g),b=3*y*(y+v),b>0&&(b=1/b),l={screen_x:(-k*i.screen_x+f*s.screen_x+S*o.screen_x)*g,screen_y:(-k*i.screen_y+f*s.screen_y+S*o.screen_y)*g},c={screen_x:(w*s.screen_x+m*o.screen_x-k*a.screen_x)*b,screen_y:(w*s.screen_y+m*o.screen_y-k*a.screen_y)*b},l.screen_x==0&&l.screen_y==0&&(l=s),c.screen_x==0&&c.screen_y==0&&(c=o),C.push([l.screen_x,l.screen_y]),C.push([c.screen_x,c.screen_y]),C.push([o.screen_x,o.screen_y]);return C};Gr._linear=function(n){for(var e=[],r=0;r<n.length;r++)e.push([n[r].screen_x,n[r].screen_y]);return e};function hu(n,e,r,i){this.id=e;var s=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=Z.selectiveBridgeObject(s,r),this.usingDefaultStyle=n.className===void 0,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(n),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=n.visible===void 0?!0:n.visible}hu.prototype.setItems=function(n){n!=null?(this.itemsData=n,pr(this.options)==!0&&Z.insertSort(this.itemsData,function(e,r){return e.x>r.x?1:-1})):this.itemsData=[]};hu.prototype.getItems=function(){return this.itemsData};hu.prototype.setZeroPosition=function(n){this.zeroPosition=n};hu.prototype.setOptions=function(n){if(n!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];Z.selectiveDeepExtend(e,this.options,n),typeof n.drawPoints=="function"&&(n.drawPoints={onRender:n.drawPoints}),Z.mergeOptions(this.options,n,"interpolation"),Z.mergeOptions(this.options,n,"drawPoints"),Z.mergeOptions(this.options,n,"shaded"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};hu.prototype.update=function(n){this.group=n,this.content=n.content||"graph",this.className=n.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=n.visible===void 0?!0:n.visible,this.style=n.style,this.setOptions(n.options)};hu.prototype.getLegend=function(n,e,r,i,s){if(r==null||r==null){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");r={svg:o,svgElements:{},options:this.options,groups:[this]}}switch((i==null||i==null)&&(i=0),(s==null||s==null)&&(s=.5*e),this.options.style){case"line":Gr.drawIcon(this,i,s,n,e,r);break;case"points":case"point":by.drawIcon(this,i,s,n,e,r);break;case"bar":ki.drawIcon(this,i,s,n,e,r);break}return{icon:r.svg,label:this.content,orientation:this.options.yAxisOrientation}};hu.prototype.getYRange=function(n){for(var e=n[0].y,r=n[0].y,i=0;i<n.length;i++)e=e>n[i].y?n[i].y:e,r=r<n[i].y?n[i].y:r;return{min:e,max:r,yAxisOrientation:this.options.yAxisOrientation}};function xs(n,e,r,i){this.body=n,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=r,this.options=Z.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}xs.prototype=new du;xs.prototype.clear=function(){this.groups={},this.amountOfGroups=0};xs.prototype.addGroup=function(n,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,n)||(this.groups[n]=e),this.amountOfGroups+=1)};xs.prototype.updateGroup=function(n,e){this.groups[n]=e};xs.prototype.removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(delete this.groups[n],this.amountOfGroups-=1)};xs.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};xs.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};xs.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};xs.prototype.setOptions=function(n){var e=["enabled","orientation","icons","left","right"];Z.selectiveDeepExtend(e,this.options,n)};xs.prototype.redraw=function(){var n=0,e=Pr(this.groups);pr(e).call(e,function(a,l){return a<l?-1:1});for(var r=0;r<e.length;r++){var i=e[r];this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&n++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||n==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var s=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+s+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var o="";for(r=0;r<e.length;r++)i=e[r],this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&(o+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=Z.xss(o),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};xs.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var n=Pr(this.groups);pr(n).call(n,function(u,h){return u<h?-1:1}),iLe(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,r=Number(e.replace("px","")),i=r,s=this.options.iconSize,o=.75*this.options.iconSize,a=r+.5*o+3;this.svg.style.width=s+5+r+"px";for(var l=0;l<n.length;l++){var c=n[l];this.groups[c].visible==!0&&(this.linegraphOptions.visibility[c]===void 0||this.linegraphOptions.visibility[c]==!0)&&(this.groups[c].getLegend(s,o,this.framework,i,a),a+=o+this.options.iconSpacing)}}};var g1="__ungrouped__";function kn(n,e){this.id=_d(),this.body=n,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=Z.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var r=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(i,s){r._onAdd(s.items)},update:function(i,s){r._onUpdate(s.items)},remove:function(i,s){r._onRemove(s.items)}},this.groupListeners={add:function(i,s){r._onAddGroups(s.items)},update:function(i,s){r._onUpdateGroups(s.items)},remove:function(i,s){r._onRemoveGroups(s.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){r.svg.style.left=Z.option.asSize(-r.props.width),r.forceGraphUpdate=!0,r.redraw.call(r)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}kn.prototype=new du;kn.prototype._create=function(){var n=document.createElement("div");n.className="vis-line-graph",this.dom.frame=n,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",n.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new XG(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new XG(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new xs(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new xs(this.body,this.options.legend,"right",this.options.groups),this.show()};kn.prototype.setOptions=function(n){if(n){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];n.graphHeight===void 0&&n.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&n.graphHeight!==void 0&&us((n.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),Z.selectiveDeepExtend(e,this.options,n),Z.mergeOptions(this.options,n,"interpolation"),Z.mergeOptions(this.options,n,"drawPoints"),Z.mergeOptions(this.options,n,"shaded"),Z.mergeOptions(this.options,n,"legend"),n.interpolation&&typeof n.interpolation=="object"&&n.interpolation.parametrization&&(n.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:n.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&n.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&n.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,g1)&&this.groups[g1].setOptions(n)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};kn.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};kn.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};kn.prototype.setItems=function(n){var e=this,r,i=this.itemsData;if(!n)this.itemsData=null;else if(Dl(n))this.itemsData=Up(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(mt(Z).call(Z,this.itemListeners,function(o,a){i.off(a,o)}),i.dispose(),r=i.getIds(),this._onRemove(r)),this.itemsData){var s=this.id;mt(Z).call(Z,this.itemListeners,function(o,a){e.itemsData.on(a,o,s)}),r=this.itemsData.getIds(),this._onAdd(r)}};kn.prototype.setGroups=function(n){var e=this,r;if(this.groupsData){mt(Z).call(Z,this.groupListeners,function(o,a){e.groupsData.off(a,o)}),r=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<r.length;i++)this._removeGroup(r[i])}if(!n)this.groupsData=null;else if(Dl(n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s=this.id;mt(Z).call(Z,this.groupListeners,function(o,a){e.groupsData.on(a,o,s)}),r=this.groupsData.getIds(),this._onAddGroups(r)}};kn.prototype._onUpdate=function(n){this._updateAllGroupData(n)};kn.prototype._onAdd=function(n){this._onUpdate(n)};kn.prototype._onRemove=function(n){this._onUpdate(n)};kn.prototype._onUpdateGroups=function(n){this._updateAllGroupData(null,n)};kn.prototype._onAddGroups=function(n){this._onUpdateGroups(n)};kn.prototype._onRemoveGroups=function(n){for(var e=0;e<n.length;e++)this._removeGroup(n[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};kn.prototype._removeGroup=function(n){Object.prototype.hasOwnProperty.call(this.groups,n)&&(this.groups[n].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(n),this.legendRight.removeGroup(n),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(n),this.legendLeft.removeGroup(n),this.legendLeft.redraw()),delete this.groups[n])};kn.prototype._updateGroup=function(n,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(n),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new hu(n,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};kn.prototype._updateAllGroupData=function(n,e){if(this.itemsData!=null){var r={},i=this.itemsData.get(),s=this.itemsData.idProp,o={};n&&mn(n).call(n,function(y){o[y]=y});for(var a={},l=0;l<i.length;l++){var c=i[l],u=c.group;u==null&&(u=g1),Object.prototype.hasOwnProperty.call(a,u)?a[u]++:a[u]=1}var h={};if(!e&&n){for(u in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,u)){b=this.groups[u];var d=b.getItems();r[u]=Ot(d).call(d,function(y){return h[y[s]]=y[s],y[s]!==o[y[s]]});var f=a[u];a[u]-=r[u].length,r[u].length<f&&(r[u][f-1]={})}}for(l=0;l<i.length;l++)if(c=i[l],u=c.group,u==null&&(u=g1),!(!e&&n&&c[s]!==o[c[s]]&&Object.prototype.hasOwnProperty.call(h,c[s]))){Object.prototype.hasOwnProperty.call(r,u)||(r[u]=new Array(a[u]));var m=Z.bridgeObject(c);m.x=Z.convert(c.x,"Date"),m.end=Z.convert(c.end,"Date"),m.orginalY=c.y,m.y=Number(c.y),m[s]=c[s];var g=r[u].length-a[u]--;r[u][g]=m}for(u in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,u)||Object.prototype.hasOwnProperty.call(r,u)||(r[u]=new Array(0));for(u in r)if(Object.prototype.hasOwnProperty.call(r,u))if(r[u].length==0)Object.prototype.hasOwnProperty.call(this.groups,u)&&this._removeGroup(u);else{var b=void 0;this.groupsData!=null&&(b=this.groupsData.get(u)),b==null&&(b={id:u,content:this.options.defaultGroup+u}),this._updateGroup(b,u),this.groups[u].setItems(r[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};kn.prototype.redraw=function(){var n=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,n=this._isResized()||n;var e=this.body.range.end-this.body.range.start,r=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,n==!0){var i;this.svg.style.width=Z.option.asSize(3*this.props.width),this.svg.style.left=Z.option.asSize(-this.props.width),(_n(i=this.options.height+"").call(i,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",n==!0||r==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)n=this._updateGraph()||n,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var s=this.body.range.start-this.lastStart,o=this.body.range.end-this.body.range.start;if(this.props.width!=0){var a=this.props.width/o,l=s*a;this.svg.style.left=-this.props.width-l+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),n};kn.prototype._getSortedGroupIds=function(){var n=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var r=this.groups[e];r.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&n.push({id:e,zIndex:r.options.zIndex})}Z.insertSort(n,function(o,a){var l=o.zIndex,c=a.zIndex;return l===void 0&&(l=0),c===void 0&&(c=0),l==c?0:l<c?-1:1});for(var i=new Array(n.length),s=0;s<n.length;s++)i[s]=n[s].id;return i};kn.prototype._updateGraph=function(){if(pc(this.svgElements),this.props.width!=0&&this.itemsData!=null){var n,e,r={},i=!1,s=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var l={};for(this._getRelevantData(a,l,s,o),this._applySampling(a,l),e=0;e<a.length;e++)this._convertXcoordinates(l[a[e]]);if(this._getYRanges(a,l,r),i=this._updateYAxis(a,r),i==!0)return Ls(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var c=void 0;for(e=0;e<a.length;e++)n=this.groups[a[e]],this.options.stack===!0&&this.options.style==="line"&&(n.options.excludeFromStacking==null||!n.options.excludeFromStacking)&&(c!=null&&(this._stack(l[n.id],l[c.id]),n.options.shaded.enabled==!0&&n.options.shaded.orientation!=="group"&&(n.options.shaded.orientation=="top"&&c.options.shaded.orientation!=="group"?(c.options.shaded.orientation="group",c.options.shaded.groupId=n.id):(n.options.shaded.orientation="group",n.options.shaded.groupId=c.id))),c=n),this._convertYcoordinates(l[a[e]],n);var u={};for(e=0;e<a.length;e++)if(n=this.groups[a[e]],n.options.style==="line"&&n.options.shaded.enabled==!0){var h=l[a[e]];if(h==null||h.length==0)continue;if(Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=Gr.calcPath(h,n)),n.options.shaded.orientation==="group"){var d=n.options.shaded.groupId;if(_n(a).call(a,d)===-1){console.log(n.id+": Unknown shading group target given:"+d);continue}Object.prototype.hasOwnProperty.call(u,d)||(u[d]=Gr.calcPath(l[d],this.groups[d])),Gr.drawShading(u[a[e]],n,u[d],this.framework)}else Gr.drawShading(u[a[e]],n,void 0,this.framework)}for(ki.draw(a,l,this.framework),e=0;e<a.length;e++)if(n=this.groups[a[e]],l[a[e]].length>0)switch(n.options.style){case"line":Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=Gr.calcPath(l[a[e]],n)),Gr.draw(u[a[e]],n,this.framework);case"point":case"points":(n.options.style=="point"||n.options.style=="points"||n.options.drawPoints.enabled==!0)&&by.draw(l[a[e]],n,this.framework);break}}}return Ls(this.svgElements),!1};kn.prototype._stack=function(n,e){var r,i,s,o,a;r=0;for(var l=0;l<n.length;l++){o=void 0,a=void 0;for(var c=r;c<e.length;c++)if(e[c].x===n[l].x){o=e[c],a=e[c],r=c;break}else if(e[c].x>n[l].x){a=e[c],c==0?o=a:o=e[c-1],r=c;break}a===void 0&&(o=e[e.length-1],a=e[e.length-1]),i=a.x-o.x,s=a.y-o.y,i==0?n[l].y=n[l].orginalY+a.y:n[l].y=n[l].orginalY+s/i*(n[l].x-o.x)+o.y}};kn.prototype._getRelevantData=function(n,e,r,i){var s,o,a,l;if(n.length>0)for(o=0;o<n.length;o++){s=this.groups[n[o]];var c=s.getItems();if(pr(s.options)==!0){var u=function(m,g){return m.getTime()==g.getTime()?0:m<g?-1:1},h=Math.max(0,Z.binarySearchValue(c,r,"x","before",u)),d=Math.min(c.length,Z.binarySearchValue(c,i,"x","after",u)+1);d<=0&&(d=c.length);var f=new Array(d-h);for(a=h;a<d;a++)l=s.itemsData[a],f[a-h]=l;e[n[o]]=f}else e[n[o]]=s.itemsData}};kn.prototype._applySampling=function(n,e){var r;if(n.length>0){for(var i=0;i<n.length;i++)if(r=this.groups[n[i]],r.options.sampling==!0){var s=e[n[i]];if(s.length>0){var o=1,a=s.length,l=this.body.util.toGlobalScreen(s[s.length-1].x)-this.body.util.toGlobalScreen(s[0].x),c=a/l;o=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(c)));for(var u=new Array(a),h=0;h<a;h+=o){var d=Math.round(h/o);u[d]=s[h]}e[n[i]]=_i(u).call(u,0,Math.round(a/o))}}}};kn.prototype._getYRanges=function(n,e,r){var i,s,o,a=[],l=[],c;if(n.length>0){for(o=0;o<n.length;o++)i=e[n[o]],c=this.groups[n[o]].options,i.length>0&&(s=this.groups[n[o]],c.stack===!0&&c.style==="bar"?c.yAxisOrientation==="left"?a=ur(a).call(a,i):l=ur(l).call(l,i):r[n[o]]=s.getYRange(i,n[o]));ki.getStackedYRange(a,r,n,"__barStackLeft","left"),ki.getStackedYRange(l,r,n,"__barStackRight","right")}};kn.prototype._updateYAxis=function(n,e){var r=!1,i=!1,s=!1,o=1e9,a=1e9,l=-1e9,c=-1e9,u,h;if(n.length>0){for(var d=0;d<n.length;d++){var f=this.groups[n[d]];f&&f.options.yAxisOrientation!="right"?(i=!0,o=1e9,l=-1e9):f&&f.options.yAxisOrientation&&(s=!0,a=1e9,c=-1e9)}for(d=0;d<n.length;d++)!Object.prototype.hasOwnProperty.call(e,n[d])||e[n[d]].ignore===!0||(u=e[n[d]].min,h=e[n[d]].max,e[n[d]].yAxisOrientation!="right"?(i=!0,o=o>u?u:o,l=l<h?h:l):(s=!0,a=a>u?u:a,c=c<h?h:c));i==!0&&this.yAxisLeft.setRange(o,l),s==!0&&this.yAxisRight.setRange(a,c)}r=this._toggleAxisVisiblity(i,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(s,this.yAxisRight)||r,s==!0&&i==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!i,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(s==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;var m=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(d=0;d<m.length;d++)_n(n).call(n,m[d])!=-1&&_i(n).call(n,_n(n).call(n,m[d]),1);return r};kn.prototype._toggleAxisVisiblity=function(n,e){var r=!1;return n==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),r=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),r=!0),r};kn.prototype._convertXcoordinates=function(n){for(var e=this.body.util.toScreen,r=0;r<n.length;r++)n[r].screen_x=e(n[r].x)+this.props.width,n[r].screen_y=n[r].y,n[r].end!=null?n[r].screen_end=e(n[r].end)+this.props.width:n[r].screen_end=void 0};kn.prototype._convertYcoordinates=function(n,e){var r=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(r=this.yAxisRight);for(var s=0;s<n.length;s++)n[s].screen_y=Math.round(r.convertValue(n[s].y));e.setZeroPosition(Math.min(i,r.convertValue(0)))};let $t="string",rn="boolean",yn="number",Z$e="array",Lh="date",Wn="object",eBe="dom",Fh="moment",QG="any",tBe={configure:{enabled:{boolean:rn},filter:{boolean:rn,function:"function"},container:{dom:eBe},__type__:{object:Wn,boolean:rn,function:"function"}},alignCurrentTime:{string:$t,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:$t},sort:{boolean:rn},sampling:{boolean:rn},stack:{boolean:rn},graphHeight:{string:$t,number:yn},shaded:{enabled:{boolean:rn},orientation:{string:["bottom","top","zero","group"]},groupId:{object:Wn},__type__:{boolean:rn,object:Wn}},style:{string:["line","bar","points"]},barChart:{width:{number:yn},minWidth:{number:yn},sideBySide:{boolean:rn},align:{string:["left","center","right"]},__type__:{object:Wn}},interpolation:{enabled:{boolean:rn},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:yn},__type__:{object:Wn,boolean:rn}},drawPoints:{enabled:{boolean:rn},onRender:{function:"function"},size:{number:yn},style:{string:["square","circle"]},__type__:{object:Wn,boolean:rn,function:"function"}},dataAxis:{showMinorLabels:{boolean:rn},showMajorLabels:{boolean:rn},showWeekScale:{boolean:rn},icons:{boolean:rn},width:{string:$t,number:yn},visible:{boolean:rn},alignZeros:{boolean:rn},left:{range:{min:{number:yn,undefined:"undefined"},max:{number:yn,undefined:"undefined"},__type__:{object:Wn}},format:{function:"function"},title:{text:{string:$t,number:yn,undefined:"undefined"},style:{string:$t,undefined:"undefined"},__type__:{object:Wn}},__type__:{object:Wn}},right:{range:{min:{number:yn,undefined:"undefined"},max:{number:yn,undefined:"undefined"},__type__:{object:Wn}},format:{function:"function"},title:{text:{string:$t,number:yn,undefined:"undefined"},style:{string:$t,undefined:"undefined"},__type__:{object:Wn}},__type__:{object:Wn}},__type__:{object:Wn}},legend:{enabled:{boolean:rn},icons:{boolean:rn},left:{visible:{boolean:rn},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Wn}},right:{visible:{boolean:rn},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Wn}},__type__:{object:Wn,boolean:rn}},groups:{visibility:{any:QG},__type__:{object:Wn}},autoResize:{boolean:rn},throttleRedraw:{number:yn},clickToUse:{boolean:rn},end:{number:yn,date:Lh,string:$t,moment:Fh},format:{minorLabels:{millisecond:{string:$t,undefined:"undefined"},second:{string:$t,undefined:"undefined"},minute:{string:$t,undefined:"undefined"},hour:{string:$t,undefined:"undefined"},weekday:{string:$t,undefined:"undefined"},day:{string:$t,undefined:"undefined"},week:{string:$t,undefined:"undefined"},month:{string:$t,undefined:"undefined"},quarter:{string:$t,undefined:"undefined"},year:{string:$t,undefined:"undefined"},__type__:{object:Wn}},majorLabels:{millisecond:{string:$t,undefined:"undefined"},second:{string:$t,undefined:"undefined"},minute:{string:$t,undefined:"undefined"},hour:{string:$t,undefined:"undefined"},weekday:{string:$t,undefined:"undefined"},day:{string:$t,undefined:"undefined"},week:{string:$t,undefined:"undefined"},month:{string:$t,undefined:"undefined"},quarter:{string:$t,undefined:"undefined"},year:{string:$t,undefined:"undefined"},__type__:{object:Wn}},__type__:{object:Wn}},moment:{function:"function"},height:{string:$t,number:yn},hiddenDates:{start:{date:Lh,number:yn,string:$t,moment:Fh},end:{date:Lh,number:yn,string:$t,moment:Fh},repeat:{string:$t},__type__:{object:Wn,array:Z$e}},locale:{string:$t},locales:{__any__:{any:QG},__type__:{object:Wn}},max:{date:Lh,number:yn,string:$t,moment:Fh},maxHeight:{number:yn,string:$t},maxMinorChars:{number:yn},min:{date:Lh,number:yn,string:$t,moment:Fh},minHeight:{number:yn,string:$t},moveable:{boolean:rn},multiselect:{boolean:rn},orientation:{string:$t},showCurrentTime:{boolean:rn},showMajorLabels:{boolean:rn},showMinorLabels:{boolean:rn},showWeekScale:{boolean:rn},snap:{function:"function",null:"null"},start:{date:Lh,number:yn,string:$t,moment:Fh},timeAxis:{scale:{string:$t,undefined:"undefined"},step:{number:yn,undefined:"undefined"},__type__:{object:Wn}},width:{string:$t,number:yn},zoomable:{boolean:rn},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:yn},zoomMin:{number:yn},zIndex:{number:yn},__type__:{object:Wn}},nBe={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function Nl(n,e,r,i){var s,o,a,l,c,u,h;if(!(Vt(r)||Dl(r))&&r instanceof Object){var d=i;i=r,r=d}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Si,width:null,height:null,maxHeight:null,minHeight:null},this.options=Z.deepExtend({},this.defaultOptions),this._create(n),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:Le(s=this.on).call(s,this),off:Le(o=this.off).call(o,this),emit:Le(a=this.emit).call(a,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:Le(l=f._toScreen).call(l,f),toGlobalScreen:Le(c=f._toGlobalScreen).call(c,f),toTime:Le(u=f._toTime).call(u,f),toGlobalTime:Le(h=f._toGlobalTime).call(h,f)}},this.range=new aS(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new p1(this.body),this.components.push(this.timeAxis),this.currentTime=new Mse(this.body),this.components.push(this.currentTime),this.linegraph=new kn(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(m){f.emit("click",f.getEventProperties(m))}),this.on("doubletap",function(m){f.emit("doubleClick",f.getEventProperties(m))}),this.dom.root.oncontextmenu=function(m){f.emit("contextmenu",f.getEventProperties(m))},this.initialFitDone=!1,this.on("changed",function(){if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var m=f.getItemRange();var g=f.options.start!=null?f.options.start:m.min,b=f.options.end!=null?f.options.end:m.max;f.setWindow(g,b,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&ci(()=>f.options.onInitialDrawComplete(),0))}}),i&&this.setOptions(i),r&&this.setGroups(r),e&&this.setItems(e),this._redraw()}Nl.prototype=new Mf;Nl.prototype.setOptions=function(n){qn.validate(n,tBe)===!0&&console.log("%cErrors have been found in the supplied options object.",m1),Mf.prototype.setOptions.call(this,n)};Nl.prototype.setItems=function(n){var e=this.itemsData==null,r;if(n?Dl(n)?r=Up(n):r=Up(new zp(n)):r=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=r,this.linegraph&&this.linegraph.setItems(r!=null?r.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var i=this.options.start!=null?this.options.start:null,s=this.options.end!=null?this.options.end:null;this.setWindow(i,s,{animation:!1})}else this.fit({animation:!1})};Nl.prototype.setGroups=function(n){var e;n?Dl(n)?e=n:e=new zp(n):e=null,this.groupsData=e,this.linegraph.setGroups(e)};Nl.prototype.getLegend=function(n,e,r){return e===void 0&&(e=15),r===void 0&&(r=15),this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].getLegend(e,r):"cannot find group:'"+n+"'"};Nl.prototype.isGroupVisible=function(n){return this.linegraph.groups[n]!==void 0?this.linegraph.groups[n].visible&&(this.linegraph.options.groups.visibility[n]===void 0||this.linegraph.options.groups.visibility[n]==!0):!1};Nl.prototype.getDataRange=function(){var n=null,e=null;for(var r in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,r)||this.linegraph.groups[r].visible!==!0))for(var i=0;i<this.linegraph.groups[r].itemsData.length;i++){var s=this.linegraph.groups[r].itemsData[i],o=Z.convert(s.x,"Date").valueOf();n=n==null||n>o?o:n,e=e==null||e<o?o:e}return{min:n!=null?new Date(n):null,max:e!=null?new Date(e):null}};Nl.prototype.getEventProperties=function(n){var e=n.center?n.center.x:n.clientX,r=n.center?n.center.y:n.clientY,i=e-Z.getAbsoluteLeft(this.dom.centerContainer),s=r-Z.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(i),a=Q5.customTimeFromTarget(n),l=Z.getTarget(n),c=null;Z.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&Z.hasParent(l,this.timeAxis2.dom.foreground)?c="axis":Z.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||Z.hasParent(l,this.linegraph.yAxisRight.dom.frame)?c="data-axis":Z.hasParent(l,this.linegraph.legendLeft.dom.frame)||Z.hasParent(l,this.linegraph.legendRight.dom.frame)?c="legend":a!=null?c="custom-time":Z.hasParent(l,this.currentTime.bar)?c="current-time":Z.hasParent(l,this.dom.center)&&(c="background");var u=[],h=this.linegraph.yAxisLeft,d=this.linegraph.yAxisRight;return!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(s)),!d.hidden&&this.itemsData.length>0&&u.push(d.screenToValue(s)),{event:n,customTime:a?a.options.id:null,what:c,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:i,y:s,time:o,value:u}};Nl.prototype._createConfigurator=function(){return new Ose(this,this.dom.container,nBe)};const rBe=sLe();Si.locale(rBe);function iBe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function sBe(n,e,r){return e=fBe(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function JG(n,e){return lBe(n)||iBe(n,e)||Ise(n,e)||dBe()}function oBe(n){return aBe(n)||cBe(n)||Ise(n)||uBe()}function aBe(n){if(Array.isArray(n))return QA(n)}function lBe(n){if(Array.isArray(n))return n}function cBe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ise(n,e){if(n){if(typeof n=="string")return QA(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QA(n,e)}}function QA(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function uBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hBe(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fBe(n){var e=hBe(n,"string");return typeof e=="symbol"?e:String(e)}var pBe=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(oBe(Object.entries(e).filter(function(s){var o=JG(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=JG(s,2),a=o[0],l=o[1];return sBe({},a,l)}))))};function JA(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function mBe(n){if(Array.isArray(n))return n}function gBe(n){if(Array.isArray(n))return JA(n)}function bBe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yBe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function vBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wBe(n,e){return mBe(n)||yBe(n,e)||Ase(n,e)||vBe()}function ZG(n){return gBe(n)||bBe(n)||Ase(n)||xBe()}function Ase(n,e){if(n){if(typeof n=="string")return JA(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JA(n,e):void 0}}function _Be(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(h){return h}:s,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return E.forwardRef(function(h,d){var f=E.useRef(),m=E.useMemo(function(){var y=Object.fromEntries(u.filter(function(v){return h.hasOwnProperty(v)}).map(function(v){return[v,h[v]]}));return n(y)},[]);eK(function(){m(o(f.current))},E.useLayoutEffect),eK(function(){return m._destructor instanceof Function?m._destructor:void 0});var g=E.useCallback(function(y){for(var v=arguments.length,w=new Array(v>1?v-1:0),k=1;k<v;k++)w[k-1]=arguments[k];return m[y]instanceof Function?m[y].apply(m,w):void 0},[m]),b=E.useRef({});return Object.keys(pBe(h,[].concat(ZG(l),ZG(u)))).filter(function(y){return b.current[y]!==h[y]}).forEach(function(y){return g(y,h[y])}),b.current=h,E.useImperativeHandle(d,function(){return Object.fromEntries(l.map(function(y){return[y,function(){for(var v=arguments.length,w=new Array(v),k=0;k<v;k++)w[k]=arguments[k];return g.apply(void 0,[y].concat(w))}]}))},[g]),Ke.createElement(i,{ref:f})})}function eK(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E.useEffect,r=E.useRef(),i=E.useRef(!1),s=E.useRef(!1),o=E.useState(0),a=wBe(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){s.current&&r.current&&r.current()}},[])}var SBe=typeof global=="object"&&global&&global.Object===Object&&global,kBe=typeof self=="object"&&self&&self.Object===Object&&self,Rse=SBe||kBe||Function("return this")(),b1=Rse.Symbol,Nse=Object.prototype,CBe=Nse.hasOwnProperty,EBe=Nse.toString,ng=b1?b1.toStringTag:void 0;function TBe(n){var e=CBe.call(n,ng),r=n[ng];try{n[ng]=void 0;var i=!0}catch{}var s=EBe.call(n);return i&&(e?n[ng]=r:delete n[ng]),s}var PBe=Object.prototype,MBe=PBe.toString;function DBe(n){return MBe.call(n)}var OBe="[object Null]",IBe="[object Undefined]",tK=b1?b1.toStringTag:void 0;function ABe(n){return n==null?n===void 0?IBe:OBe:tK&&tK in Object(n)?TBe(n):DBe(n)}function RBe(n){return n!=null&&typeof n=="object"}var NBe="[object Symbol]";function jBe(n){return typeof n=="symbol"||RBe(n)&&ABe(n)==NBe}var LBe=/\s/;function FBe(n){for(var e=n.length;e--&&LBe.test(n.charAt(e)););return e}var $Be=/^\s+/;function BBe(n){return n&&n.slice(0,FBe(n)+1).replace($Be,"")}function y1(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var nK=NaN,zBe=/^[-+]0x[0-9a-f]+$/i,UBe=/^0b[01]+$/i,WBe=/^0o[0-7]+$/i,qBe=parseInt;function rK(n){if(typeof n=="number")return n;if(jBe(n))return nK;if(y1(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=y1(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=BBe(n);var r=UBe.test(n);return r||WBe.test(n)?qBe(n.slice(2),r?2:8):zBe.test(n)?nK:+n}var sO=function(){return Rse.Date.now()},HBe="Expected a function",VBe=Math.max,YBe=Math.min;function jse(n,e,r){var i,s,o,a,l,c,u=0,h=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(HBe);e=rK(e)||0,y1(r)&&(h=!!r.leading,d="maxWait"in r,o=d?VBe(rK(r.maxWait)||0,e):o,f="trailing"in r?!!r.trailing:f);function m(C){var P=i,T=s;return i=s=void 0,u=C,a=n.apply(T,P),a}function g(C){return u=C,l=setTimeout(v,e),h?m(C):a}function b(C){var P=C-c,T=C-u,O=e-P;return d?YBe(O,o-T):O}function y(C){var P=C-c,T=C-u;return c===void 0||P>=e||P<0||d&&T>=o}function v(){var C=sO();if(y(C))return w(C);l=setTimeout(v,b(C))}function w(C){return l=void 0,f&&i?m(C):(i=s=void 0,a)}function k(){l!==void 0&&clearTimeout(l),u=0,i=c=s=l=void 0}function S(){return l===void 0?a:w(sO())}function _(){var C=sO(),P=y(C);if(i=arguments,s=this,c=C,P){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(v,e),m(c)}return l===void 0&&(l=setTimeout(v,e)),a}return _.cancel=k,_.flush=S,_}var GBe="Expected a function";function KBe(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(GBe);return y1(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),jse(n,e,{leading:i,maxWait:e,trailing:s})}var Sd=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Sd.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Sd.Bounce.In(n*2)*.5:Sd.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Pg=function(){return performance.now()},Lse=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=Pg()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),ZA={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=ZA.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},Fse=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),eR=new Lse,iK=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Sd.Linear.None,this._interpolationFunction=ZA.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Fse.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=eR,eR.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=Pg()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,h=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(h){var d=i[a];if(d.length===0)continue;for(var f=[l],m=0,g=d.length;m<g;m+=1){var b=this._handleRelativeValue(l,d[m]);if(isNaN(b)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(b)}h&&(i[a]=f)}if((u==="object"||c)&&l&&!h){r[a]=c?[]:{};var y=l;for(var v in y)r[a][v]=y[v];s[a]=c?[]:{};var d=i[a];if(!this._isDynamic){var w={};for(var v in d)w[v]=d[v];i[a]=d=w}this._setupProperties(y,r[a],d,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),c||(r[a]*=1),h?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Pg()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Pg()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Sd.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=ZA.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=Pg()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var b=Math.trunc(a/l),y=a-b*l,v=Math.min(y/i._duration,1);return v===0&&a===i._duration?1:v},h=u(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||a>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,g=this._chainedTweens.length;m<g;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],c=Array.isArray(e[o]),u=Array.isArray(l),h=!c&&u;h?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();Fse.nextId;var ga=eR;ga.getAll.bind(ga);ga.removeAll.bind(ga);ga.add.bind(ga);ga.remove.bind(ga);ga.update.bind(ga);function sK(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function XBe(n){if(Array.isArray(n))return n}function QBe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function JBe(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function ZBe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function e9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t9e(n,e){return XBe(n)||ZBe(n,e)||n9e(n,e)||e9e()}function n9e(n,e){if(n){if(typeof n=="string")return sK(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sK(n,e):void 0}}var r9e=JBe(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,c=l===void 0?function(u,h){}:l;QBe(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=c});function ej(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,c=l===void 0?{}:l,u=n.init,h=u===void 0?function(){}:u,d=n.update,f=d===void 0?function(){}:d,m=Object.keys(s).map(function(g){return new r9e(g,s[g])});return function g(){for(var b=arguments.length,y=new Array(b),v=0;v<b;v++)y[v]=arguments[v];var w=!!(this instanceof g&&this.constructor),k=w?y.shift():void 0,S=y[0],_=S===void 0?{}:S,C=Object.assign({},r instanceof Function?r(_):r,{initialised:!1}),P={};function T(I){return O(I,_),D(),T}var O=function(U,B){h.call(T,U,C,B),C.initialised=!0},D=jse(function(){C.initialised&&(f.call(T,C,P),P={})},1);return m.forEach(function(I){T[I.name]=U(I);function U(B){var z=B.name,j=B.triggerUpdate,F=j===void 0?!1:j,N=B.onChange,R=N===void 0?function(K,H){}:N,W=B.defaultVal,Y=W===void 0?null:W;return function(K){var H=C[z];if(!arguments.length)return H;var Q=K===void 0?Y:K;return C[z]=Q,R.call(T,Q,C,H),!P.hasOwnProperty(z)&&(P[z]=H),F&&D(),T}}}),Object.keys(a).forEach(function(I){T[I]=function(){for(var U,B=arguments.length,z=new Array(B),j=0;j<B;j++)z[j]=arguments[j];return(U=a[I]).call.apply(U,[T,C].concat(z))}}),Object.entries(c).forEach(function(I){var U=t9e(I,2),B=U[0],z=U[1];return T[B]=T[z]}),T.resetProps=function(){return m.forEach(function(I){T[I.name](I.defaultVal)}),T},T.resetProps(),C._rerender=D,w&&k&&T(k),T}}var pn=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function v1(n){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(n)}var i9e=/^\s+/,s9e=/\s+$/;function Et(n,e){if(n=n||"",e=e||{},n instanceof Et)return n;if(!(this instanceof Et))return new Et(n,e);var r=o9e(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Et.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=$se(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=aK(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=aK(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=oK(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=oK(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return lK(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return u9e(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Vn(this._r,255)*100)+"%",g:Math.round(Vn(this._g,255)*100)+"%",b:Math.round(Vn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Vn(this._r,255)*100)+"%, "+Math.round(Vn(this._g,255)*100)+"%, "+Math.round(Vn(this._b,255)*100)+"%)":"rgba("+Math.round(Vn(this._r,255)*100)+"%, "+Math.round(Vn(this._g,255)*100)+"%, "+Math.round(Vn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:_9e[lK(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+cK(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Et(e);i="#"+cK(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Et(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(p9e,arguments)},brighten:function(){return this._applyModification(m9e,arguments)},darken:function(){return this._applyModification(g9e,arguments)},desaturate:function(){return this._applyModification(d9e,arguments)},saturate:function(){return this._applyModification(h9e,arguments)},greyscale:function(){return this._applyModification(f9e,arguments)},spin:function(){return this._applyModification(b9e,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(x9e,arguments)},complement:function(){return this._applyCombination(y9e,arguments)},monochromatic:function(){return this._applyCombination(w9e,arguments)},splitcomplement:function(){return this._applyCombination(v9e,arguments)},triad:function(){return this._applyCombination(uK,[3])},tetrad:function(){return this._applyCombination(uK,[4])}};Et.fromRatio=function(n,e){if(v1(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=Mg(n[i]));n=r}return Et(n,e)};function o9e(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=E9e(n)),v1(n)=="object"&&(La(n.r)&&La(n.g)&&La(n.b)?(e=a9e(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):La(n.h)&&La(n.s)&&La(n.v)?(i=Mg(n.s),s=Mg(n.v),e=c9e(n.h,i,s),a=!0,l="hsv"):La(n.h)&&La(n.s)&&La(n.l)&&(i=Mg(n.s),o=Mg(n.l),e=l9e(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=$se(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function a9e(n,e,r){return{r:Vn(n,255)*255,g:Vn(e,255)*255,b:Vn(r,255)*255}}function oK(n,e,r){n=Vn(n,255),e=Vn(e,255),r=Vn(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s:a,l}}function l9e(n,e,r){var i,s,o;n=Vn(n,360),e=Vn(e,100),r=Vn(r,100);function a(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(h-u)*6*d:d<1/2?h:d<2/3?u+(h-u)*(2/3-d)*6:u}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),s=a(c,l,n),o=a(c,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function aK(n,e,r){n=Vn(n,255),e=Vn(e,255),r=Vn(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,c=i-s;if(a=i===0?0:c/i,i==s)o=0;else{switch(i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s:a,v:l}}function c9e(n,e,r){n=Vn(n,360)*6,e=Vn(e,100),r=Vn(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),c=i%6,u=[r,a,o,o,l,r][c],h=[l,r,r,a,o,o][c],d=[o,o,l,r,r,a][c];return{r:u*255,g:h*255,b:d*255}}function lK(n,e,r,i){var s=[ko(Math.round(n).toString(16)),ko(Math.round(e).toString(16)),ko(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function u9e(n,e,r,i,s){var o=[ko(Math.round(n).toString(16)),ko(Math.round(e).toString(16)),ko(Math.round(r).toString(16)),ko(Bse(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function cK(n,e,r,i){var s=[ko(Bse(i)),ko(Math.round(n).toString(16)),ko(Math.round(e).toString(16)),ko(Math.round(r).toString(16))];return s.join("")}Et.equals=function(n,e){return!n||!e?!1:Et(n).toRgbString()==Et(e).toRgbString()};Et.random=function(){return Et.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function d9e(n,e){e=e===0?0:e||10;var r=Et(n).toHsl();return r.s-=e/100,r.s=uS(r.s),Et(r)}function h9e(n,e){e=e===0?0:e||10;var r=Et(n).toHsl();return r.s+=e/100,r.s=uS(r.s),Et(r)}function f9e(n){return Et(n).desaturate(100)}function p9e(n,e){e=e===0?0:e||10;var r=Et(n).toHsl();return r.l+=e/100,r.l=uS(r.l),Et(r)}function m9e(n,e){e=e===0?0:e||10;var r=Et(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Et(r)}function g9e(n,e){e=e===0?0:e||10;var r=Et(n).toHsl();return r.l-=e/100,r.l=uS(r.l),Et(r)}function b9e(n,e){var r=Et(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Et(r)}function y9e(n){var e=Et(n).toHsl();return e.h=(e.h+180)%360,Et(e)}function uK(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Et(n).toHsl(),i=[Et(n)],s=360/e,o=1;o<e;o++)i.push(Et({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function v9e(n){var e=Et(n).toHsl(),r=e.h;return[Et(n),Et({h:(r+72)%360,s:e.s,l:e.l}),Et({h:(r+216)%360,s:e.s,l:e.l})]}function x9e(n,e,r){e=e||6,r=r||30;var i=Et(n).toHsl(),s=360/r,o=[Et(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Et(i));return o}function w9e(n,e){e=e||6;for(var r=Et(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Et({h:i,s,v:o})),o=(o+l)%1;return a}Et.mix=function(n,e,r){r=r===0?0:r||50;var i=Et(n).toRgb(),s=Et(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Et(a)};Et.readability=function(n,e){var r=Et(n),i=Et(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Et.isReadable=function(n,e,r){var i=Et.readability(n,e),s,o;switch(o=!1,s=T9e(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Et.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)o=Et.readability(n,e[u]),o>s&&(s=o,i=Et(e[u]));return Et.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,Et.mostReadable(n,["#fff","#000"],r))};var tR=Et.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_9e=Et.hexNames=S9e(tR);function S9e(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function $se(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Vn(n,e){k9e(n)&&(n="100%");var r=C9e(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function uS(n){return Math.min(1,Math.max(0,n))}function ss(n){return parseInt(n,16)}function k9e(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function C9e(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ko(n){return n.length==1?"0"+n:""+n}function Mg(n){return n<=1&&(n=n*100+"%"),n}function Bse(n){return Math.round(parseFloat(n)*255).toString(16)}function dK(n){return ss(n)/255}var co=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function La(n){return!!co.CSS_UNIT.exec(n)}function E9e(n){n=n.replace(i9e,"").replace(s9e,"").toLowerCase();var e=!1;if(tR[n])n=tR[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=co.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=co.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=co.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=co.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=co.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=co.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=co.hex8.exec(n))?{r:ss(r[1]),g:ss(r[2]),b:ss(r[3]),a:dK(r[4]),format:e?"name":"hex8"}:(r=co.hex6.exec(n))?{r:ss(r[1]),g:ss(r[2]),b:ss(r[3]),format:e?"name":"hex"}:(r=co.hex4.exec(n))?{r:ss(r[1]+""+r[1]),g:ss(r[2]+""+r[2]),b:ss(r[3]+""+r[3]),a:dK(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=co.hex3.exec(n))?{r:ss(r[1]+""+r[1]),g:ss(r[2]+""+r[2]),b:ss(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function T9e(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function nR(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function P9e(n){if(Array.isArray(n))return nR(n)}function zse(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function M9e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function D9e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ds(n,e){return n.get(zse(n,e))}function hK(n,e,r){M9e(n,e),e.set(n,r)}function fK(n,e,r){return n.set(zse(n,e),r),r}function O9e(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,L9e(i.key),i)}}function I9e(n,e,r){return e&&O9e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function A9e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function R9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9e(n){return P9e(n)||A9e(n)||F9e(n)||R9e()}function j9e(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function L9e(n){var e=j9e(n,"string");return typeof e=="symbol"?e:e+""}function F9e(n,e){if(n){if(typeof n=="string")return nR(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nR(n,e):void 0}}var $9e=123,B9e=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Use=function(e,r,i){return(e<<16)+(r<<8)+i},z9e=function(e){var r=Et(e).toRgb(),i=r.r,s=r.g,o=r.b;return Use(i,s,o)},pK=function(e,r){return e*$9e%Math.pow(2,r)},Du=new WeakMap,Fa=new WeakMap,U9e=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;D9e(this,n),hK(this,Du,void 0),hK(this,Fa,void 0),fK(Fa,this,e),this.reset()}return I9e(n,[{key:"reset",value:function(){fK(Du,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ds(Du,this).length>=Math.pow(2,24-Ds(Fa,this)))return null;var i=Ds(Du,this).length,s=pK(i,Ds(Fa,this)),o=B9e(i+(s<<24-Ds(Fa,this)));return Ds(Du,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?z9e(r):Use.apply(void 0,N9e(r));if(!i)return null;var s=i&Math.pow(2,24-Ds(Fa,this))-1,o=i>>24-Ds(Fa,this)&Math.pow(2,Ds(Fa,this))-1;return pK(s,Ds(Fa,this))!==o||s>=Ds(Du,this).length?null:Ds(Du,this)[s]}}])}(),yy,Kn,Wse,qse,Wu,mK,Hse,Vse,Yse,tj,rR,iR,mb={},Gse=[],W9e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dS=Array.isArray;function ca(n,e){for(var r in e)n[r]=e[r];return n}function nj(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function q9e(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?yy.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return r0(n,a,i,s,null)}function r0(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Wse,__i:-1,__u:0};return s==null&&Kn.vnode!=null&&Kn.vnode(o),o}function hS(n){return n.children}function Bx(n,e){this.props=n,this.context=e}function qp(n,e){if(e==null)return n.__?qp(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?qp(n):null}function Kse(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Kse(n)}}function gK(n){(!n.__d&&(n.__d=!0)&&Wu.push(n)&&!x1.__r++||mK!=Kn.debounceRendering)&&((mK=Kn.debounceRendering)||Hse)(x1)}function x1(){for(var n,e,r,i,s,o,a,l=1;Wu.length;)Wu.length>l&&Wu.sort(Vse),n=Wu.shift(),l=Wu.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=ca({},i)).__v=i.__v+1,Kn.vnode&&Kn.vnode(r),rj(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??qp(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,Jse(o,r,a),i.__e=i.__=null,r.__e!=s&&Kse(r)));x1.__r=0}function Xse(n,e,r,i,s,o,a,l,c,u,h){var d,f,m,g,b,y,v,w=i&&i.__k||Gse,k=e.length;for(c=H9e(r,e,w,c,k),d=0;d<k;d++)(m=r.__k[d])!=null&&(f=m.__i==-1?mb:w[m.__i]||mb,m.__i=d,y=rj(n,m,f,s,o,a,l,c,u,h),g=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&ij(f.ref,null,m),h.push(m.ref,m.__c||g,m)),b==null&&g!=null&&(b=g),(v=!!(4&m.__u))||f.__k===m.__k?c=Qse(m,c,n,v):typeof m.type=="function"&&y!==void 0?c=y:g&&(c=g.nextSibling),m.__u&=-7);return r.__e=b,c}function H9e(n,e,r,i,s){var o,a,l,c,u,h=r.length,d=h,f=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=r0(null,a,null,null,null):dS(a)?a=n.__k[o]=r0(hS,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=n.__k[o]=r0(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,c=o+f,a.__=n,a.__b=n.__b+1,l=null,(u=a.__i=V9e(a,r,c,d))!=-1&&(d--,(l=r[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(s>h?f--:s<h&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,a.__u|=4))):n.__k[o]=null;if(d)for(o=0;o<h;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=qp(l)),eoe(l,l));return i}function Qse(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=Qse(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=qp(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function V9e(n,e,r,i){var s,o,a,l=n.key,c=n.type,u=e[r],h=u!=null&&(2&u.__u)==0;if(u===null&&l==null||h&&l==u.key&&c==u.type)return r;if(i>(h?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((u=e[a=s>=0?s--:o++])!=null&&!(2&u.__u)&&l==u.key&&c==u.type)return a}return-1}function bK(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||W9e.test(e)?r:r+"px"}function Zv(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||bK(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||bK(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Yse,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=tj,n.addEventListener(e,o?iR:rR,o)):n.removeEventListener(e,o?iR:rR,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function yK(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=tj++;else if(e.t<r.u)return;return r(Kn.event?Kn.event(e):e)}}}function rj(n,e,r,i,s,o,a,l,c,u){var h,d,f,m,g,b,y,v,w,k,S,_,C,P,T,O,D,I=e.type;if(e.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),o=[l=e.__e=r.__e]),(h=Kn.__b)&&h(e);e:if(typeof I=="function")try{if(v=e.props,w="prototype"in I&&I.prototype.render,k=(h=I.contextType)&&i[h.__c],S=h?k?k.props.value:h.__:i,r.__c?y=(d=e.__c=r.__c).__=d.__E:(w?e.__c=d=new I(v,S):(e.__c=d=new Bx(v,S),d.constructor=I,d.render=G9e),k&&k.sub(d),d.state||(d.state={}),d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&I.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ca({},d.__s)),ca(d.__s,I.getDerivedStateFromProps(v,d.__s))),m=d.props,g=d.state,d.__v=e,f)w&&I.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&I.getDerivedStateFromProps==null&&v!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,S),e.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,S)===!1){for(e.__v!=r.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(U){U&&(U.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,S),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,g,b)})}if(d.context=S,d.props=v,d.__P=n,d.__e=!1,C=Kn.__r,P=0,w){for(d.state=d.__s,d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do d.__d=!1,C&&C(e),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++P<25);d.state=d.__s,d.getChildContext!=null&&(i=ca(ca({},i),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(b=d.getSnapshotBeforeUpdate(m,g)),O=h,h!=null&&h.type===hS&&h.key==null&&(O=Zse(h.props.children)),l=Xse(n,dS(O)?O:[O],e,r,i,s,o,a,l,c,u),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),y&&(d.__E=d.__=null)}catch(U){if(e.__v=null,c||o!=null)if(U.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(D=o.length;D--;)nj(o[D]);sR(e)}else e.__e=r.__e,e.__k=r.__k,U.then||sR(e);Kn.__e(U,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=Y9e(r.__e,e,r,i,s,o,a,c,u);return(h=Kn.diffed)&&h(e),128&e.__u?void 0:l}function sR(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(sR)}function Jse(n,e,r){for(var i=0;i<r.length;i++)ij(r[i],r[++i],r[++i]);Kn.__c&&Kn.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){Kn.__e(o,s.__v)}})}function Zse(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:dS(n)?n.map(Zse):ca({},n)}function Y9e(n,e,r,i,s,o,a,l,c){var u,h,d,f,m,g,b,y=r.props||mb,v=e.props,w=e.type;if(w=="svg"?s="http://www.w3.org/2000/svg":w=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((m=o[u])&&"setAttribute"in m==!!w&&(w?m.localName==w:m.nodeType==3)){n=m,o[u]=null;break}}if(n==null){if(w==null)return document.createTextNode(v);n=document.createElementNS(s,w,v.is&&v),l&&(Kn.__m&&Kn.__m(e,o),l=!1),o=null}if(w==null)y===v||l&&n.data==v||(n.data=v);else{if(o=o&&yy.call(n.childNodes),!l&&o!=null)for(y={},u=0;u<n.attributes.length;u++)y[(m=n.attributes[u]).name]=m.value;for(u in y)if(m=y[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=m;else if(!(u in v)){if(u=="value"&&"defaultValue"in v||u=="checked"&&"defaultChecked"in v)continue;Zv(n,u,null,m,s)}}for(u in v)m=v[u],u=="children"?f=m:u=="dangerouslySetInnerHTML"?h=m:u=="value"?g=m:u=="checked"?b=m:l&&typeof m!="function"||y[u]===m||Zv(n,u,m,y[u],s);if(h)l||d&&(h.__html==d.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(d&&(n.innerHTML=""),Xse(e.type=="template"?n.content:n,dS(f)?f:[f],e,r,i,w=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&qp(r,0),l,c),o!=null)for(u=o.length;u--;)nj(o[u]);l||(u="value",w=="progress"&&g==null?n.removeAttribute("value"):g!=null&&(g!==n[u]||w=="progress"&&!g||w=="option"&&g!=y[u])&&Zv(n,u,g,y[u],s),u="checked",b!=null&&b!=n[u]&&Zv(n,u,b,y[u],s))}return n}function ij(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){Kn.__e(s,r)}}function eoe(n,e,r){var i,s;if(Kn.unmount&&Kn.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||ij(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Kn.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&eoe(i[s],e,r||typeof n.type!="function");r||nj(n.__e),n.__c=n.__=n.__e=void 0}function G9e(n,e,r){return this.constructor(n,r)}function K9e(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),Kn.__&&Kn.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],rj(e,n=e.__k=q9e(hS,null,[n]),s||mb,mb,e.namespaceURI,s?null:e.firstChild?yy.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),Jse(o,n,a)}function toe(n,e,r){var i,s,o,a,l=ca({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?yy.call(arguments,2):r),r0(n.type,l,i||n.key,s||n.ref,null)}yy=Gse.slice,Kn={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},Wse=0,qse=function(n){return n!=null&&n.constructor==null},Bx.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ca({},this.state),typeof n=="function"&&(n=n(ca({},r),this.props)),n&&ca(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),gK(this))},Bx.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),gK(this))},Bx.prototype.render=hS,Wu=[],Hse=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vse=function(n,e){return n.__v.__b-e.__v.__b},x1.__r=0,Yse=/(PointerCapture)$|Capture$/i,tj=0,rR=yK(!1),iR=yK(!0);function vK(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function X9e(n){if(Array.isArray(n))return n}function Q9e(n,e,r){return(e=r7e(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function J9e(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function Z9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function e7e(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(i){Q9e(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function t7e(n,e){return X9e(n)||J9e(n,e)||i7e(n,e)||Z9e()}function n7e(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function r7e(n){var e=n7e(n,"string");return typeof e=="symbol"?e:e+""}function w1(n){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w1(n)}function i7e(n,e){if(n){if(typeof n=="string")return vK(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vK(n,e):void 0}}var oR=function(e){if(w1(e)!=="object")return e;var r=toe(e);if(r.props){var i;r.props=e7e({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(oR):oR(r.props.children))}return r},s7e=function(e){return qse(toe(e))},o7e=function(e,r){delete r.__k,K9e(oR(e),r)};function a7e(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var l7e=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;a7e(l7e);var c7e=ej({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&w1(e)==="object"&&!!e.node&&typeof e.node=="function",l=li(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(u){var h=t7e(u,2),d=h[0],f=h[1];return r.tooltipEl.style(d,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(c),function(u){r.mouseInside=!0;var h=vo(u),d=l.node(),f=d.offsetWidth,m=d.offsetHeight,g=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?m>130&&m-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(g.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):s7e(e.content)?(e.tooltipEl.text(""),o7e(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function u7e(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,c,u=0,h=0,d=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,h+=c.y||0,d+=c.z||0;for(u=(u/l-n)*s,h=(h/l-e)*s,d=(d/l-r)*s,a=0;a<l;++a)c=i[a],u&&(c.x-=u),h&&(c.y-=h),d&&(c.z-=d)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function d7e(n){const e=+this._x.call(null,n);return noe(this.cover(e),e,n)}function noe(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,c,u,h,d,f;if(!s)return n._root=o,n;for(;s.length;)if((h=e>=(c=(a+l)/2))?a=c:l=c,i=s,!(s=s[d=+h]))return i[d]=o,n;if(u=+n._x.call(null,s.data),e===u)return o.next=s,i?i[d]=o:n._root=o,n;do i=i?i[d]=new Array(2):n._root=new Array(2),(h=e>=(c=(a+l)/2))?a=c:l=c;while((d=+h)==(f=+(u>=c)));return i[f]=s,i[d]=o,n}function h7e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)noe(this,r[o],n[o]);return this}function f7e(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function p7e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function m7e(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function wl(n,e,r){this.node=n,this.x0=e,this.x1=r}function g7e(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],c=this._root,u,h;for(c&&l.push(new wl(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(s=u.x0)>a||(o=u.x1)<i))if(c.length){var d=(s+o)/2;l.push(new wl(c[1],d,o),new wl(c[0],s,d)),(h=+(n>=d))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=u)}else{var f=Math.abs(n-+this._x.call(null,c.data));f<e&&(e=f,i=n-f,a=n+f,r=c.data)}return r}function b7e(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,c,u,h,d,f;if(!r)return this;if(r.length)for(;;){if((h=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[d=+h]))return this;if(!r.length)break;e[d+1&1]&&(i=e,f=d)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[d]=o:delete e[d],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[f]=r:this._root=r),this):(this._root=o,this)}function y7e(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function v7e(){return this._root}function x7e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function w7e(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new wl(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new wl(s,l,a)),(s=i[0])&&e.push(new wl(s,o,l))}return this}function _7e(n){var e=[],r=[],i;for(this._root&&e.push(new wl(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,c=(a+l)/2;(o=s[0])&&e.push(new wl(o,a,c)),(o=s[1])&&e.push(new wl(o,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function S7e(n){return n[0]}function k7e(n){return arguments.length?(this._x=n,this):this._x}function roe(n,e){var r=new sj(e??S7e,NaN,NaN);return n==null?r:r.addAll(n)}function sj(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function wK(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var es=roe.prototype=sj.prototype;es.copy=function(){var n=new sj(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=wK(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=wK(i));return n};es.add=d7e;es.addAll=h7e;es.cover=f7e;es.data=p7e;es.extent=m7e;es.find=g7e;es.remove=b7e;es.removeAll=y7e;es.root=v7e;es.size=x7e;es.visit=w7e;es.visitAfter=_7e;es.x=k7e;function C7e(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return ioe(this.cover(e,r,i),e,r,i,n)}function ioe(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},c=n._x0,u=n._y0,h=n._z0,d=n._x1,f=n._y1,m=n._z1,g,b,y,v,w,k,S,_,C,P,T;if(!a)return n._root=l,n;for(;a.length;)if((S=e>=(g=(c+d)/2))?c=g:d=g,(_=r>=(b=(u+f)/2))?u=b:f=b,(C=i>=(y=(h+m)/2))?h=y:m=y,o=a,!(a=a[P=C<<2|_<<1|S]))return o[P]=l,n;if(v=+n._x.call(null,a.data),w=+n._y.call(null,a.data),k=+n._z.call(null,a.data),e===v&&r===w&&i===k)return l.next=a,o?o[P]=l:n._root=l,n;do o=o?o[P]=new Array(8):n._root=new Array(8),(S=e>=(g=(c+d)/2))?c=g:d=g,(_=r>=(b=(u+f)/2))?u=b:f=b,(C=i>=(y=(h+m)/2))?h=y:m=y;while((P=C<<2|_<<1|S)===(T=(k>=y)<<2|(w>=b)<<1|v>=g));return o[T]=a,o[P]=l,n}function E7e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let d=0,f,m,g,b;d<e;++d)isNaN(m=+this._x.call(null,f=n[d]))||isNaN(g=+this._y.call(null,f))||isNaN(b=+this._z.call(null,f))||(r[d]=m,i[d]=g,s[d]=b,m<o&&(o=m),m>c&&(c=m),g<a&&(a=g),g>u&&(u=g),b<l&&(l=b),b>h&&(h=b));if(o>c||a>u||l>h)return this;this.cover(o,a,l).cover(c,u,h);for(let d=0;d<e;++d)ioe(this,r[d],i[d],s[d],n[d]);return this}function T7e(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,c=(o=Math.floor(r))+1;else{for(var u=a-i||1,h=this._root,d,f;i>n||n>=a||s>e||e>=l||o>r||r>=c;)switch(f=(r<o)<<2|(e<s)<<1|n<i,d=new Array(8),d[f]=h,h=d,u*=2,f){case 0:a=i+u,l=s+u,c=o+u;break;case 1:i=a-u,l=s+u,c=o+u;break;case 2:a=i+u,s=l-u,c=o+u;break;case 3:i=a-u,s=l-u,c=o+u;break;case 4:a=i+u,l=s+u,o=c-u;break;case 5:i=a-u,l=s+u,o=c-u;break;case 6:a=i+u,s=l-u,o=c-u;break;case 7:i=a-u,s=l-u,o=c-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=c,this}function P7e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function M7e(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function En(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function D7e(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,c,u,h,d,f,m,g=this._x1,b=this._y1,y=this._z1,v=[],w=this._root,k,S;for(w&&v.push(new En(w,o,a,l,g,b,y)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,g=n+i,b=e+i,y=r+i,i*=i);k=v.pop();)if(!(!(w=k.node)||(c=k.x0)>g||(u=k.y0)>b||(h=k.z0)>y||(d=k.x1)<o||(f=k.y1)<a||(m=k.z1)<l))if(w.length){var _=(c+d)/2,C=(u+f)/2,P=(h+m)/2;v.push(new En(w[7],_,C,P,d,f,m),new En(w[6],c,C,P,_,f,m),new En(w[5],_,u,P,d,C,m),new En(w[4],c,u,P,_,C,m),new En(w[3],_,C,h,d,f,P),new En(w[2],c,C,h,_,f,P),new En(w[1],_,u,h,d,C,P),new En(w[0],c,u,h,_,C,P)),(S=(r>=P)<<2|(e>=C)<<1|n>=_)&&(k=v[v.length-1],v[v.length-1]=v[v.length-1-S],v[v.length-1-S]=k)}else{var T=n-+this._x.call(null,w.data),O=e-+this._y.call(null,w.data),D=r-+this._z.call(null,w.data),I=T*T+O*O+D*D;if(I<i){var U=Math.sqrt(i=I);o=n-U,a=e-U,l=r-U,g=n+U,b=e+U,y=r+U,s=w.data}}return s}const O7e=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function I7e(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,c=n+i,u=e+i,h=r+i;return this.visit((d,f,m,g,b,y,v)=>{if(!d.length)do{const w=d.data;O7e(n,e,r,this._x(w),this._y(w),this._z(w))<=i&&s.push(w)}while(d=d.next);return f>c||m>u||g>h||b<o||y<a||v<l}),s}function A7e(n){if(isNaN(f=+this._x.call(null,n))||isNaN(m=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,c=this._z0,u=this._x1,h=this._y1,d=this._z1,f,m,g,b,y,v,w,k,S,_,C;if(!r)return this;if(r.length)for(;;){if((w=f>=(b=(a+u)/2))?a=b:u=b,(k=m>=(y=(l+h)/2))?l=y:h=y,(S=g>=(v=(c+d)/2))?c=v:d=v,e=r,!(r=r[_=S<<2|k<<1|w]))return this;if(!r.length)break;(e[_+1&7]||e[_+2&7]||e[_+3&7]||e[_+4&7]||e[_+5&7]||e[_+6&7]||e[_+7&7])&&(i=e,C=_)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[_]=o:delete e[_],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=o,this)}function R7e(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function N7e(){return this._root}function j7e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function L7e(n){var e=[],r,i=this._root,s,o,a,l,c,u,h;for(i&&e.push(new En(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,h=r.z1)&&i.length){var d=(o+c)/2,f=(a+u)/2,m=(l+h)/2;(s=i[7])&&e.push(new En(s,d,f,m,c,u,h)),(s=i[6])&&e.push(new En(s,o,f,m,d,u,h)),(s=i[5])&&e.push(new En(s,d,a,m,c,f,h)),(s=i[4])&&e.push(new En(s,o,a,m,d,f,h)),(s=i[3])&&e.push(new En(s,d,f,l,c,u,m)),(s=i[2])&&e.push(new En(s,o,f,l,d,u,m)),(s=i[1])&&e.push(new En(s,d,a,l,c,f,m)),(s=i[0])&&e.push(new En(s,o,a,l,d,f,m))}return this}function F7e(n){var e=[],r=[],i;for(this._root&&e.push(new En(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,c=i.z0,u=i.x1,h=i.y1,d=i.z1,f=(a+u)/2,m=(l+h)/2,g=(c+d)/2;(o=s[0])&&e.push(new En(o,a,l,c,f,m,g)),(o=s[1])&&e.push(new En(o,f,l,c,u,m,g)),(o=s[2])&&e.push(new En(o,a,m,c,f,h,g)),(o=s[3])&&e.push(new En(o,f,m,c,u,h,g)),(o=s[4])&&e.push(new En(o,a,l,g,f,m,d)),(o=s[5])&&e.push(new En(o,f,l,g,u,m,d)),(o=s[6])&&e.push(new En(o,a,m,g,f,h,d)),(o=s[7])&&e.push(new En(o,f,m,g,u,h,d))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function $7e(n){return n[0]}function B7e(n){return arguments.length?(this._x=n,this):this._x}function z7e(n){return n[1]}function U7e(n){return arguments.length?(this._y=n,this):this._y}function W7e(n){return n[2]}function q7e(n){return arguments.length?(this._z=n,this):this._z}function soe(n,e,r,i){var s=new oj(e??$7e,r??z7e,i??W7e,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function oj(n,e,r,i,s,o,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function _K(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var ei=soe.prototype=oj.prototype;ei.copy=function(){var n=new oj(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=_K(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=_K(i));return n};ei.add=C7e;ei.addAll=E7e;ei.cover=T7e;ei.data=P7e;ei.extent=M7e;ei.find=D7e;ei.findAllWithinRadius=I7e;ei.remove=A7e;ei.removeAll=R7e;ei.root=N7e;ei.size=j7e;ei.visit=L7e;ei.visitAfter=F7e;ei.x=B7e;ei.y=U7e;ei.z=q7e;function ul(n){return function(){return n}}function Xa(n){return(n()-.5)*1e-6}function H7e(n){return n.index}function SK(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function V7e(n){var e=H7e,r=f,i,s=ul(30),o,a,l,c,u,h,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(c[v.source.index],c[v.target.index])}function m(v){for(var w=0,k=n.length;w<d;++w)for(var S=0,_,C,P,T=0,O=0,D=0,I,U;S<k;++S)_=n[S],C=_.source,P=_.target,T=P.x+P.vx-C.x-C.vx||Xa(h),l>1&&(O=P.y+P.vy-C.y-C.vy||Xa(h)),l>2&&(D=P.z+P.vz-C.z-C.vz||Xa(h)),I=Math.sqrt(T*T+O*O+D*D),I=(I-o[S])/I*v*i[S],T*=I,O*=I,D*=I,P.vx-=T*(U=u[S]),l>1&&(P.vy-=O*U),l>2&&(P.vz-=D*U),C.vx+=T*(U=1-U),l>1&&(C.vy+=O*U),l>2&&(C.vz+=D*U)}function g(){if(a){var v,w=a.length,k=n.length,S=new Map(a.map((C,P)=>[e(C,P,a),C])),_;for(v=0,c=new Array(w);v<k;++v)_=n[v],_.index=v,typeof _.source!="object"&&(_.source=SK(S,_.source)),typeof _.target!="object"&&(_.target=SK(S,_.target)),c[_.source.index]=(c[_.source.index]||0)+1,c[_.target.index]=(c[_.target.index]||0)+1;for(v=0,u=new Array(k);v<k;++v)_=n[v],u[v]=c[_.source.index]/(c[_.source.index]+c[_.target.index]);i=new Array(k),b(),o=new Array(k),y()}}function b(){if(a)for(var v=0,w=n.length;v<w;++v)i[v]=+r(n[v],v,n)}function y(){if(a)for(var v=0,w=n.length;v<w;++v)o[v]=+s(n[v],v,n)}return m.initialize=function(v,...w){a=v,h=w.find(k=>typeof k=="function")||Math.random,l=w.find(k=>[1,2,3].includes(k))||2,g()},m.links=function(v){return arguments.length?(n=v,g(),m):n},m.id=function(v){return arguments.length?(e=v,m):e},m.iterations=function(v){return arguments.length?(d=+v,m):d},m.strength=function(v){return arguments.length?(r=typeof v=="function"?v:ul(+v),b(),m):r},m.distance=function(v){return arguments.length?(s=typeof v=="function"?v:ul(+v),y(),m):s},m}const Y7e=1664525,G7e=1013904223,kK=4294967296;function K7e(){let n=1;return()=>(n=(Y7e*n+G7e)%kK)/kK}var CK=3;function oO(n){return n.x}function EK(n){return n.y}function X7e(n){return n.z}var Q7e=10,J7e=Math.PI*(3-Math.sqrt(5)),Z7e=Math.PI*20/(9+Math.sqrt(221));function eze(n,e){e=e||2;var r=Math.min(CK,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,c=.6,u=new Map,h=O3(m),d=Ub("tick","end"),f=K7e();n==null&&(n=[]);function m(){g(),d.call("tick",i),s<o&&(h.stop(),d.call("end",i))}function g(v){var w,k=n.length,S;v===void 0&&(v=1);for(var _=0;_<v;++_)for(s+=(l-s)*a,u.forEach(function(C){C(s)}),w=0;w<k;++w)S=n[w],S.fx==null?S.x+=S.vx*=c:(S.x=S.fx,S.vx=0),r>1&&(S.fy==null?S.y+=S.vy*=c:(S.y=S.fy,S.vy=0)),r>2&&(S.fz==null?S.z+=S.vz*=c:(S.z=S.fz,S.vz=0));return i}function b(){for(var v=0,w=n.length,k;v<w;++v){if(k=n[v],k.index=v,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),k.fz!=null&&(k.z=k.fz),isNaN(k.x)||r>1&&isNaN(k.y)||r>2&&isNaN(k.z)){var S=Q7e*(r>2?Math.cbrt(.5+v):r>1?Math.sqrt(.5+v):v),_=v*J7e,C=v*Z7e;r===1?k.x=S:r===2?(k.x=S*Math.cos(_),k.y=S*Math.sin(_)):(k.x=S*Math.sin(_)*Math.cos(C),k.y=S*Math.cos(_),k.z=S*Math.sin(_)*Math.sin(C))}(isNaN(k.vx)||r>1&&isNaN(k.vy)||r>2&&isNaN(k.vz))&&(k.vx=0,r>1&&(k.vy=0),r>2&&(k.vz=0))}}function y(v){return v.initialize&&v.initialize(n,f,r),v}return b(),i={tick:g,restart:function(){return h.restart(m),i},stop:function(){return h.stop(),i},numDimensions:function(v){return arguments.length?(r=Math.min(CK,Math.max(1,Math.round(v))),u.forEach(y),i):r},nodes:function(v){return arguments.length?(n=v,b(),u.forEach(y),i):n},alpha:function(v){return arguments.length?(s=+v,i):s},alphaMin:function(v){return arguments.length?(o=+v,i):o},alphaDecay:function(v){return arguments.length?(a=+v,i):+a},alphaTarget:function(v){return arguments.length?(l=+v,i):l},velocityDecay:function(v){return arguments.length?(c=1-v,i):1-c},randomSource:function(v){return arguments.length?(f=v,u.forEach(y),i):f},force:function(v,w){return arguments.length>1?(w==null?u.delete(v):u.set(v,y(w)),i):u.get(v)},find:function(){var v=Array.prototype.slice.call(arguments),w=v.shift()||0,k=(r>1?v.shift():null)||0,S=(r>2?v.shift():null)||0,_=v.shift()||1/0,C=0,P=n.length,T,O,D,I,U,B;for(_*=_,C=0;C<P;++C)U=n[C],T=w-U.x,O=k-(U.y||0),D=S-(U.z||0),I=T*T+O*O+D*D,I<_&&(B=U,_=I);return B},on:function(v,w){return arguments.length>1?(d.on(v,w),i):d.on(v)}}}function tze(){var n,e,r,i,s,o=ul(-30),a,l=1,c=1/0,u=.81;function h(g){var b,y=n.length,v=(e===1?roe(n,oO):e===2?Mne(n,oO,EK):e===3?soe(n,oO,EK,X7e):null).visitAfter(f);for(s=g,b=0;b<y;++b)r=n[b],v.visit(m)}function d(){if(n){var g,b=n.length,y;for(a=new Array(b),g=0;g<b;++g)y=n[g],a[y.index]=+o(y,g,n)}}function f(g){var b=0,y,v,w=0,k,S,_,C,P=g.length;if(P){for(k=S=_=C=0;C<P;++C)(y=g[C])&&(v=Math.abs(y.value))&&(b+=y.value,w+=v,k+=v*(y.x||0),S+=v*(y.y||0),_+=v*(y.z||0));b*=Math.sqrt(4/P),g.x=k/w,e>1&&(g.y=S/w),e>2&&(g.z=_/w)}else{y=g,y.x=y.data.x,e>1&&(y.y=y.data.y),e>2&&(y.z=y.data.z);do b+=a[y.data.index];while(y=y.next)}g.value=b}function m(g,b,y,v,w){if(!g.value)return!0;var k=[y,v,w][e-1],S=g.x-r.x,_=e>1?g.y-r.y:0,C=e>2?g.z-r.z:0,P=k-b,T=S*S+_*_+C*C;if(P*P/u<T)return T<c&&(S===0&&(S=Xa(i),T+=S*S),e>1&&_===0&&(_=Xa(i),T+=_*_),e>2&&C===0&&(C=Xa(i),T+=C*C),T<l&&(T=Math.sqrt(l*T)),r.vx+=S*g.value*s/T,e>1&&(r.vy+=_*g.value*s/T),e>2&&(r.vz+=C*g.value*s/T)),!0;if(g.length||T>=c)return;(g.data!==r||g.next)&&(S===0&&(S=Xa(i),T+=S*S),e>1&&_===0&&(_=Xa(i),T+=_*_),e>2&&C===0&&(C=Xa(i),T+=C*C),T<l&&(T=Math.sqrt(l*T)));do g.data!==r&&(P=a[g.data.index]*s/T,r.vx+=S*P,e>1&&(r.vy+=_*P),e>2&&(r.vz+=C*P));while(g=g.next)}return h.initialize=function(g,...b){n=g,i=b.find(y=>typeof y=="function")||Math.random,e=b.find(y=>[1,2,3].includes(y))||2,d()},h.strength=function(g){return arguments.length?(o=typeof g=="function"?g:ul(+g),d(),h):o},h.distanceMin=function(g){return arguments.length?(l=g*g,h):Math.sqrt(l)},h.distanceMax=function(g){return arguments.length?(c=g*g,h):Math.sqrt(c)},h.theta=function(g){return arguments.length?(u=g*g,h):Math.sqrt(u)},h}function nze(n,e,r,i){var s,o,a=ul(.1),l,c;typeof n!="function"&&(n=ul(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(d){for(var f=0,m=s.length;f<m;++f){var g=s[f],b=g.x-e||1e-6,y=(g.y||0)-r||1e-6,v=(g.z||0)-i||1e-6,w=Math.sqrt(b*b+y*y+v*v),k=(c[f]-w)*l[f]*d/w;g.vx+=b*k,o>1&&(g.vy+=y*k),o>2&&(g.vz+=v*k)}}function h(){if(s){var d,f=s.length;for(l=new Array(f),c=new Array(f),d=0;d<f;++d)c[d]=+n(s[d],d,s),l[d]=isNaN(c[d])?0:+a(s[d],d,s)}}return u.initialize=function(d,...f){s=d,o=f.find(m=>[1,2,3].includes(m))||2,h()},u.strength=function(d){return arguments.length?(a=typeof d=="function"?d:ul(+d),h(),u):a},u.radius=function(d){return arguments.length?(n=typeof d=="function"?d:ul(+d),h(),u):n},u.x=function(d){return arguments.length?(e=+d,u):e},u.y=function(d){return arguments.length?(r=+d,u):r},u.z=function(d){return arguments.length?(i=+d,u):i},u}const{abs:rg,cos:$a,sin:$h,acos:rze,atan2:ig,sqrt:tc,pow:Rs}=Math;function sg(n){return n<0?-Rs(-n,1/3):Rs(n,1/3)}const ooe=Math.PI,ex=2*ooe,nc=ooe/2,ize=1e-6,aO=Number.MAX_SAFE_INTEGER||9007199254740991,lO=Number.MIN_SAFE_INTEGER||-9007199254740991,sze={x:0,y:0,z:0},ot={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),tc(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,c=n*n,u,h,d,f=0;i===2?(o=[o[0],o[1],o[2],sze],u=l,h=s*n*2,d=c):i===3&&(u=l*s,h=l*n*3,d=s*c*3,f=n*c);const m={x:u*o[0].x+h*o[1].x+d*o[2].x+f*o[3].x,y:u*o[0].y+h*o[1].y+d*o[2].y+f*o[3].y,t:n};return r&&(m.z=u*o[0].z+h*o[1].z+d*o[2].z+f*o[3].z),m}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],c=o[1],u=o[2],h=o[3],d;if(l*=s,c*=n,a.length===2)return d=l+c,{x:(l*a[0].x+c*a[1].x)/d,y:(l*a[0].y+c*a[1].y)/d,z:i?(l*a[0].z+c*a[1].z)/d:!1,t:n};if(l*=s,c*=2*s,u*=n*n,a.length===3)return d=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/d,y:(l*a[0].y+c*a[1].y+u*a[2].y)/d,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/d:!1,t:n};if(l*=s,c*=1.5*s,u*=3*s,h*=n*n*n,a.length===4)return d=l+c+u+h,{x:(l*a[0].x+c*a[1].x+u*a[2].x+h*a[3].x)/d,y:(l*a[0].y+c*a[1].y+u*a[2].y+h*a[3].y)/d,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+h*a[3].z)/d:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,c;l<o;l++)c={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(c.z=o*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||ot.approximately(n,e)||ot.approximately(n,r)},approximately:function(n,e,r){return rg(n-e)<=(r||ize)},length:function(n){const r=ot.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*ot.Tvalues[s]+.5,i+=ot.Cvalues[s]*ot.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,c=l/o;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(ot.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,c=i*o+s*a;return ig(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return tc(r*r+i*i)},closest:function(n,e){let r=Rs(2,63),i,s;return n.forEach(function(o,a){s=ot.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Rs(n,e)+Rs(1-n,e),i=r-1;return rg(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Rs(1-n,e),i=Rs(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const c=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),u=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),h=(n-r)*(o-l)-(e-i)*(s-a);return h==0?!1:{x:c/h,y:u/h}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,c=r.x,u=r.y,h=i.x,d=i.y;return ot.lli8(s,o,a,l,c,u,h,d)},lli:function(n,e){return ot.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new jn(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=aO,r=aO,i=lO,s=lO;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!ot.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const h=c.intersects(u,s);h.length>0&&(h.c1=c,h.c2=u,h.s1=n,h.s2=r,o.push(h))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=ot.makeline(e.points[i-1],n.points[0]),a=ot.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:ot.findbbox([o,n,e,a])};return l.intersections=function(c){return ot.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=aO,s=lO,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-ig(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*$a(s)-(a.y-i)*$h(s),y:(a.x-r)*$h(s)+(a.y-i)*$a(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=ot.align(n,e),s=function(P){return 0<=P&&P<=1};if(r===2){const P=i[0].y,T=i[1].y,O=i[2].y,D=P-2*T+O;if(D!==0){const I=-tc(T*T-P*O),U=-P+T,B=-(I+U)/D,z=-(-I+U)/D;return[B,z].filter(s)}else if(T!==O&&D===0)return[(2*T-O)/(2*T-2*O)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-o+3*a-3*l+c,h=3*o-6*a+3*l,d=-3*o+3*a,f=o;if(ot.approximately(u,0)){if(ot.approximately(h,0))return ot.approximately(d,0)?[]:[-f/d].filter(s);const P=tc(d*d-4*h*f),T=2*h;return[(P-d)/T,(-d-P)/T].filter(s)}h/=u,d/=u,f/=u;const m=(3*d-h*h)/3,g=m/3,b=(2*h*h*h-9*h*d+27*f)/27,y=b/2,v=y*y+g*g*g;let w,k,S,_,C;if(v<0){const P=-m/3,T=P*P*P,O=tc(T),D=-b/(2*O),I=D<-1?-1:D>1?1:D,U=rze(I),B=sg(O),z=2*B;return S=z*$a(U/3)-h/3,_=z*$a((U+ex)/3)-h/3,C=z*$a((U+2*ex)/3)-h/3,[S,_,C].filter(s)}else{if(v===0)return w=y<0?sg(-y):-sg(y),S=2*w-h/3,_=-w-h/3,[S,_].filter(s);{const P=tc(v);return w=sg(-y+P),k=sg(y+P),[w-k-h/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-tc(r*r-e*i),a=-e+r,l=-(o+a)/s,c=-(-o+a)/s;return[l,c]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,c,u=0,h=0;const d=ot.compute(n,e),f=ot.compute(n,r),m=d.x*d.x+d.y*d.y;if(i?(o=tc(Rs(d.y*f.z-f.y*d.z,2)+Rs(d.z*f.x-f.z*d.x,2)+Rs(d.x*f.y-f.x*d.y,2)),a=Rs(m+d.z*d.z,3/2)):(o=d.x*f.y-d.y*f.x,a=Rs(m,3/2)),o===0||a===0)return{k:0,r:0};if(u=o/a,h=a/o,!s){const g=ot.curvature(n-.001,e,r,i,!0).k,b=ot.curvature(n+.001,e,r,i,!0).k;c=(b-u+(u-g))/2,l=(rg(b-u)+rg(u-g))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=ot.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),c=18*(s-r);if(ot.approximately(a,0)){if(!ot.approximately(l,0)){let f=-c/l;if(0<=f&&f<=1)return[f]}return[]}const u=2*a;if(ot.approximately(u,0))return[];const h=l*l-4*a*c;if(h<0)return[];const d=Math.sqrt(h);return[(d-l)/u,-(l+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,c;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,c=(n[o].size+e[o].size)/2,rg(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(d){return ot.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(ot.pairiteration(d.left,d.right,a))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*$a(nc)-s*$h(nc),c=i*$h(nc)+s*$a(nc),u=o*$a(nc)-a*$h(nc),h=o*$h(nc)+a*$a(nc),d=(n.x+e.x)/2,f=(n.y+e.y)/2,m=(e.x+r.x)/2,g=(e.y+r.y)/2,b=d+l,y=f+c,v=m+u,w=g+h,k=ot.lli8(d,f,b,y,m,g,v,w),S=ot.dist(k,n);let _=ig(n.y-k.y,n.x-k.x),C=ig(e.y-k.y,e.x-k.x),P=ig(r.y-k.y,r.x-k.x),T;return _<P?((_>C||C>P)&&(_+=ex),_>P&&(T=P,P=_,_=T)):P<C&&C<_?(T=P,P=_,_=T):P+=ex,k.s=_,k.e=P,k.r=S,k},numberSort:function(n,e){return n-e}};class i0{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return ot.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)ot.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new i0(r)}}const{abs:og,min:TK,max:PK,cos:oze,sin:aze,acos:lze,sqrt:ag}=Math,cze=Math.PI;class jn{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const m=[];r.forEach(function(g){["x","y","z"].forEach(function(b){typeof g[b]<"u"&&m.push(g[b])})}),r=m}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let m=0,g=a?3:2;m<o;m+=g){var c={x:r[m],y:r[m+1]};a&&(c.z=r[m+2]),l.push(c)}const u=this.order=l.length-1,h=this.dims=["x","y"];a&&h.push("z"),this.dimlen=h.length;const d=ot.align(l,{p1:l[0],p2:l[u]}),f=ot.dist(l[0],l[u]);this._linear=d.reduce((m,g)=>m+og(g.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new jn(r,r,i);if(s===1)return new jn(e,r,r);const o=jn.getABC(2,e,r,i,s);return new jn(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=jn.getABC(3,e,r,i,s);typeof o>"u"&&(o=ot.dist(r,a.C));const l=o*(1-s)/s,c=ot.dist(e,i),u=(i.x-e.x)/c,h=(i.y-e.y)/c,d=o*u,f=o*h,m=l*u,g=l*h,b={x:r.x-d,y:r.y-f},y={x:r.x+m,y:r.y+g},v=a.A,w={x:v.x+(b.x-v.x)/(1-s),y:v.y+(b.y-v.y)/(1-s)},k={x:v.x+(y.x-v.x)/s,y:v.y+(y.y-v.y)/s},S={x:e.x+(w.x-e.x)/s,y:e.y+(w.y-e.y)/s},_={x:i.x+(k.x-i.x)/(1-s),y:i.y+(k.y-i.y)/(1-s)};return new jn(e,S,_,i)}static getUtils(){return ot}getUtils(){return jn.getUtils()}static get PolyBezier(){return i0}valueOf(){return this.toString()}toString(){return ot.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=ot.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=ot.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return ot.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=ot.projectionratio(o,e),l=1-a,c={x:a*r.x+l*s.x,y:a*r.y+l*s.y},u=ot.abcratio(o,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return jn.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],ot.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=ot.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,c=.1/i;let u=s.mdist,h=a,d=h,f;u+=1;for(let m;h<l+c;h+=c)f=this.compute(h),m=ot.dist(e,f),m<u&&(u=m,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?ot.computeWithRatios(e,this.points,this.ratios,this._3d):ot.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new jn(r)}derivative(e){return ot.compute(e,this.dpoints[0],this._3d)}dderivative(e){return ot.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new jn(ot.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return ot.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return ot.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=ag(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=ag(r.x*r.x+r.y*r.y+r.z*r.z),o=ag(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=ag(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=ot.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new jn([i[0],i[3],i[5]]):new jn([i[0],i[4],i[7],i[9]]),right:this.order===2?new jn([i[5],i[4],i[2]]):new jn([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=ot.map(0,0,1,this._t1,this._t2),s.left._t2=ot.map(e,0,1,this._t1,this._t2),s.right._t1=ot.map(e,0,1,this._t1,this._t2),s.right._t2=ot.map(1,0,1,this._t1,this._t2),r?(r=ot.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=ot.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(ot.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(ot.numberSort))}).bind(this)),e.values=r.sort(ot.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=ot.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return ot.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new jn(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=ot.angle(this.points[0],this.points[3],this.points[1]),o=ot.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),og(lze(i))<cze/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=u.split(r,i),!o.simple()){if(i-=s,og(r-i)<s)return[];o=u.split(r,i),o._t1=ot.map(r,0,1,u._t1,u._t2),o._t2=ot.map(i,0,1,u._t1,u._t2),l.push(o),r=i;break}r<1&&(o=u.split(r,1),o._t1=ot.map(r,0,1,u._t1,u._t2),o._t2=u._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new jn(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],h=ot.lli4(c[0],c[0].c,c[1],c[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*r]=ot.copy(o[d*r]);f.x+=(d?l:a)*c[d].n.x,f.y+=(d?l:a)*c[d].n.y}),i?([0,1].forEach(function(d){if(!(r===2&&d)){var f=o[d+1],m={x:f.x-h.x,y:f.y-h.y},g=i?i((d+1)/r):e;i&&!s&&(g=-g);var b=ag(m.x*m.x+m.y*m.y);m.x/=b,m.y/=b,u[d+1]={x:f.x+g*m.x,y:f.y+g*m.y}}}),new jn(u)):([0,1].forEach(d=>{if(r===2&&d)return;const f=u[d*r],m=this.derivative(d),g={x:f.x+m.x,y:f.y+m.y};u[d+1]=ot.lli4(f,g,h,o[d+1])}),new jn(u))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const _=this.normal(0),C=this.points[0],P=this.points[this.points.length-1];let T,O,D;i===void 0&&(i=e,s=r),T={x:C.x+_.x*e,y:C.y+_.y*e},D={x:P.x+_.x*i,y:P.y+_.y*i},O={x:(T.x+D.x)/2,y:(T.y+D.y)/2};const I=[T,O,D];T={x:C.x-_.x*r,y:C.y-_.y*r},D={x:P.x-_.x*s,y:P.y-_.y*s},O={x:(T.x+D.x)/2,y:(T.y+D.y)/2};const U=[D,O,T],B=ot.makeline(U[2],I[0]),z=ot.makeline(I[2],U[0]),j=[B,new jn(I),z,new jn(U)];return new i0(j)}const o=this.reduce(),a=o.length,l=[];let c=[],u,h=0,d=this.length();const f=typeof i<"u"&&typeof s<"u";function m(_,C,P,T,O){return function(D){const I=T/P,U=(T+O)/P,B=C-_;return ot.map(D,0,1,_+I*B,_+U*B)}}o.forEach(function(_){const C=_.length();f?(l.push(_.scale(m(e,i,d,h,C))),c.push(_.scale(m(-r,-s,d,h,C)))):(l.push(_.scale(e)),c.push(_.scale(-r))),h+=C}),c=c.map(function(_){return u=_.points,u[3]?_.points=[u[3],u[2],u[1],u[0]]:_.points=[u[2],u[1],u[0]],_}).reverse();const g=l[0].points[0],b=l[a-1].points[l[a-1].points.length-1],y=c[a-1].points[c[a-1].points.length-1],v=c[0].points[0],w=ot.makeline(y,g),k=ot.makeline(b,v),S=[w].concat(l).concat([k]).concat(c);return new i0(S)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const c=ot.makeshape(s[a],s[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,o.push(c)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof jn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=TK(e.p1.x,e.p2.x),i=TK(e.p1.y,e.p2.y),s=PK(e.p1.x,e.p2.x),o=PK(e.p1.y,e.p2.y);return ot.roots(this.points,e).filter(a=>{var l=this.get(a);return ot.between(l.x,r,s)&&ot.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,c;o<i;o++)l=r.slice(o,o+1),c=r.slice(o+2),a=this.curveintersects(l,c,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=ot.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),c=ot.dist(e,r),u=ot.dist(e,a),h=ot.dist(e,l);return og(u-c)+og(h-c)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,c,u,h,d=!1,f=!1,m,g=s,b=1;do if(f=d,h=u,g=(i+s)/2,l=this.get(g),c=this.get(s),u=ot.getccenter(a,l,c),u.interval={start:i,end:s},d=this._error(u,a,i,s)<=e,m=f&&!d,m||(b=s),d){if(s>=1){if(u.interval.end=b=1,h=u,s>1){let v={x:u.x+u.r*oze(u.e),y:u.y+u.r*aze(u.e)};u.e+=ot.angle({x:u.x,y:u.y},v,this.get(1))}break}s=s+(s-i)/2}else s=g;while(!m&&o++<100);if(o>=100)break;h=h||u,r.push(h),i=b}while(s<1);return r}}function aR(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function uze(n){if(Array.isArray(n))return n}function dze(n){if(Array.isArray(n))return aR(n)}function hze(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fze(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function pze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gze(n,e){if(n==null)return{};var r,i,s=bze(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function bze(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function yze(n,e){return uze(n)||fze(n,e)||aoe(n,e)||pze()}function vze(n){return dze(n)||hze(n)||aoe(n)||mze()}function xze(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function wze(n){var e=xze(n,"string");return typeof e=="symbol"?e:e+""}function aoe(n,e){if(n){if(typeof n=="string")return aR(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aR(n,e):void 0}}var _ze=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,c){var u=l,h=c;return s.forEach(function(d,f){var m=d.keyAccessor,g=d.isProp,b;if(g){var y=h,v=y[m],w=gze(y,[m].map(wze));b=v,h=w}else b=m(h,f);f+1<s.length?(u.hasOwnProperty(b)||(u[b]={}),u=u[b]):r?(u.hasOwnProperty(b)||(u[b]=[]),u[b].push(h)):u[b]=h}),l},{});r instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===s.length?Object.keys(c).forEach(function(h){return c[h]=r(c[h])}):Object.values(c).forEach(function(h){return l(h,u+1)})}(o);var a=o;return i&&(a=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===s.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(h){var d=yze(h,2),f=d[0],m=d[1];return l(m,[].concat(vze(u),[f]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function Sze(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var kze=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Sze(kze);function lR(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Cze(n){if(Array.isArray(n))return n}function Eze(n){if(Array.isArray(n))return lR(n)}function MK(n,e,r){if(loe())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function gb(n,e,r){return(e=Ize(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function loe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(loe=function(){return!!n})()}function Tze(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pze(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(h){u=!0,s=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw s}}return l}}function Mze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DK(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function Bh(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DK(Object(r),!0).forEach(function(i){gb(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):DK(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function s0(n,e){return Cze(n)||Pze(n,e)||coe(n,e)||Mze()}function qs(n){return Eze(n)||Tze(n)||coe(n)||Dze()}function Oze(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ize(n){var e=Oze(n,"string");return typeof e=="symbol"?e:e+""}function cR(n){"@babel/helpers - typeof";return cR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cR(n)}function coe(n,e){if(n){if(typeof n=="string")return lR(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lR(n,e):void 0}}var Aze=L3(qTe);function OK(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=Aze(e(i))})}function Rze(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,c=l===void 0?function(m){throw"Invalid DAG structure! Found cycle in node path: ".concat(m.join(" -> "),".")}:l,u={};r.forEach(function(m){return u[e(m)]={data:m,out:[],depth:-1,skip:!a(m)}}),i.forEach(function(m){var g=m.source,b=m.target,y=S(g),v=S(b);if(!u.hasOwnProperty(y))throw"Missing source node with id: ".concat(y);if(!u.hasOwnProperty(v))throw"Missing target node with id: ".concat(v);var w=u[y],k=u[v];w.out.push(k);function S(_){return cR(_)==="object"?e(_):_}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(qs(Object.entries(u).filter(function(m){var g=s0(m,2),b=g[1];return!b.skip}).map(function(m){var g=s0(m,2),b=g[0],y=g[1];return gb({},b,y.depth)}))));return d;function f(m){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=function(){var S=m[v];if(g.indexOf(S)!==-1){var _=[].concat(qs(g.slice(g.indexOf(S))),[S]).map(function(C){return e(C.data)});return h.some(function(C){return C.length===_.length&&C.every(function(P,T){return P===_[T]})})||(h.push(_),c(_)),1}b>S.depth&&(S.depth=b,f(S.out,[].concat(qs(g),[S]),b+(S.skip?0:1)))},v=0,w=m.length;v<w;v++)y()}}var Nze=2,si=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},IK=function(e,r){if(!r.isShadow){var i=pn(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=qs(Array(o)).map(function(){return{}}):delete s.__photons})}},_1=ej({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,IK(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:si},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:si},nodeColor:{default:"color",triggerUpdate:!1,onChange:si},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:si},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:si},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:si},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:si},linkColor:{default:"color",triggerUpdate:!1,onChange:si},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:si},linkWidth:{default:1,triggerUpdate:!1,onChange:si},linkCurvature:{default:0,triggerUpdate:!1,onChange:si},linkCanvasObject:{triggerUpdate:!1,onChange:si},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:si},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:si},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:si},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:si},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:IK},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=pn(e.nodeVisibility),c=pn(e.nodeVal),u=pn(e.nodeColor),h=pn(e.nodeCanvasObjectMode),d=e.ctx,f=e.isShadow/e.globalScale,m=e.graphData.nodes.filter(l);d.save(),m.forEach(function(g){var b=h(g);if(e.nodeCanvasObject&&(b==="before"||b==="replace")&&(e.nodeCanvasObject(g,d,e.globalScale),b==="replace")){d.restore();return}var y=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+f;d.beginPath(),d.arc(g.x,g.y,y,0,2*Math.PI,!1),d.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",d.fill(),e.nodeCanvasObject&&b==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),d.restore()}function s(){var l=pn(e.linkVisibility),c=pn(e.linkColor),u=pn(e.linkWidth),h=pn(e.linkLineDash),d=pn(e.linkCurvature),f=pn(e.linkCanvasObjectMode),m=e.ctx,g=e.isShadow*2,b=e.graphData.links.filter(l);b.forEach(C);var y=[],v=[],w=b;if(e.linkCanvasObject){var k=[],S=[];b.forEach(function(P){return({before:y,after:v,replace:k}[f(P)]||S).push(P)}),w=[].concat(qs(y),v,S),y=y.concat(k)}m.save(),y.forEach(function(P){return e.linkCanvasObject(P,m,e.globalScale)}),m.restore();var _=_ze(w,[c,u,h]);m.save(),Object.entries(_).forEach(function(P){var T=s0(P,2),O=T[0],D=T[1],I=!O||O==="undefined"?"rgba(0,0,0,0.15)":O;Object.entries(D).forEach(function(U){var B=s0(U,2),z=B[0],j=B[1],F=(z||1)/e.globalScale+g;Object.entries(j).forEach(function(N){var R=s0(N,2);R[0];var W=R[1],Y=h(W[0]);m.beginPath(),W.forEach(function(K){var H=K.source,Q=K.target;if(!(!H||!Q||!H.hasOwnProperty("x")||!Q.hasOwnProperty("x"))){m.moveTo(H.x,H.y);var G=K.__controlPoints;G?m[G.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(m,qs(G).concat([Q.x,Q.y])):m.lineTo(Q.x,Q.y)}}),m.strokeStyle=I,m.lineWidth=F,m.setLineDash(Y||[]),m.stroke()})})}),m.restore(),m.save(),v.forEach(function(P){return e.linkCanvasObject(P,m,e.globalScale)}),m.restore();function C(P){var T=d(P);if(!T){P.__controlPoints=null;return}var O=P.source,D=P.target;if(!(!O||!D||!O.hasOwnProperty("x")||!D.hasOwnProperty("x"))){var I=Math.sqrt(Math.pow(D.x-O.x,2)+Math.pow(D.y-O.y,2));if(I>0){var U=Math.atan2(D.y-O.y,D.x-O.x),B=I*T,z={x:(O.x+D.x)/2+B*Math.cos(U-Math.PI/2),y:(O.y+D.y)/2+B*Math.sin(U-Math.PI/2)};P.__controlPoints=[z.x,z.y]}else{var j=T*70;P.__controlPoints=[D.x,D.y-j,D.x+j,D.y]}}}}function o(){var l=1.6,c=.2,u=pn(e.linkDirectionalArrowLength),h=pn(e.linkDirectionalArrowRelPos),d=pn(e.linkVisibility),f=pn(e.linkDirectionalArrowColor||e.linkColor),m=pn(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(d).forEach(function(b){var y=u(b);if(!(!y||y<0)){var v=b.source,w=b.target;if(!(!v||!w||!v.hasOwnProperty("x")||!w.hasOwnProperty("x"))){var k=Math.sqrt(Math.max(0,m(v)||1))*e.nodeRelSize,S=Math.sqrt(Math.max(0,m(w)||1))*e.nodeRelSize,_=Math.min(1,Math.max(0,h(b))),C=f(b)||"rgba(0,0,0,0.28)",P=y/l/2,T=b.__controlPoints&&MK(jn,[v.x,v.y].concat(qs(b.__controlPoints),[w.x,w.y])),O=T?function(F){return T.get(F)}:function(F){return{x:v.x+(w.x-v.x)*F||0,y:v.y+(w.y-v.y)*F||0}},D=T?T.length():Math.sqrt(Math.pow(w.x-v.x,2)+Math.pow(w.y-v.y,2)),I=k+y+(D-k-S-y)*_,U=O(I/D),B=O((I-y)/D),z=O((I-y*(1-c))/D),j=Math.atan2(U.y-B.y,U.x-B.x)-Math.PI/2;g.beginPath(),g.moveTo(U.x,U.y),g.lineTo(B.x+P*Math.cos(j),B.y+P*Math.sin(j)),g.lineTo(z.x,z.y),g.lineTo(B.x-P*Math.cos(j),B.y-P*Math.sin(j)),g.fillStyle=C,g.fill()}}}),g.restore()}function a(){var l=pn(e.linkDirectionalParticles),c=pn(e.linkDirectionalParticleSpeed),u=pn(e.linkDirectionalParticleOffset),h=pn(e.linkDirectionalParticleWidth),d=pn(e.linkVisibility),f=pn(e.linkDirectionalParticleColor||e.linkColor),m=e.ctx;m.save(),e.graphData.links.filter(d).forEach(function(g){var b=l(g);if(!(!g.hasOwnProperty("__photons")||!g.__photons.length)){var y=g.source,v=g.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var w=c(g),k=Math.abs(u(g)),S=g.__photons||[],_=Math.max(0,h(g)/2)/Math.sqrt(e.globalScale),C=f(g)||"rgba(0,0,0,0.28)";m.fillStyle=C;var P=g.__controlPoints?MK(jn,[y.x,y.y].concat(qs(g.__controlPoints),[v.x,v.y])):null,T=0,O=!1;S.forEach(function(D){var I=!!D.__singleHop;if(D.hasOwnProperty("__progressRatio")||(D.__progressRatio=I?0:(T+k)/b),!I&&T++,D.__progressRatio+=w,D.__progressRatio>=1)if(!I)D.__progressRatio=D.__progressRatio%1;else{O=!0;return}var U=D.__progressRatio,B=P?P.get(U):{x:y.x+(v.x-y.x)*U||0,y:y.y+(v.y-y.y)*U||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(B.x,B.y,g,m,e.globalScale):(m.beginPath(),m.arc(B.x,B.y,_,0,2*Math.PI,!1),m.fill())}),O&&(g.__photons=g.__photons.filter(function(D){return!D.__singleHop||D.__progressRatio<=1}))}}}),m.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:eze().force("link",V7e()).force("charge",tze()).force("center",u7e()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&OK(e.graphData.nodes,pn(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&OK(e.graphData.links,pn(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(f){f.source=f[e.linkSource],f.target=f[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(f){return f[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&Rze(e.graphData,function(f){return f[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,qs(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*Nze*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return delete f[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(m){return(s[m[e.nodeId]]-o/2)*a*(c?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(f){return f[h]=u(f)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?nze(function(f){var m=s[f[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-m:m)*a}).strength(function(f){return e.dagNodeFilter(f)?1:0}):null);for(var d=0;d<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);d++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function uoe(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,c){r.forEach(function(u){return c[u][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var h=[];return r.forEach(function(d){var f=a[d],m=f[o].apply(f,c);m!==f&&h.push(m)}),h.length?h[0]:this}}}}var jze=800,Lze=4,Fze=5,doe=uoe("forceGraph",_1),$ze=uoe(["forceGraph","shadowGraph"],_1),Bze=Object.assign.apply(Object,qs(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return gb({},n,doe.linkProp(n))})).concat(qs(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return gb({},n,$ze.linkProp(n))})))),zze=Object.assign.apply(Object,qs(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return gb({},n,doe.linkMethod(n))})));function cO(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Go(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function hoe(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function AK(n,e,r){n.save(),hoe(n),n.clearRect(0,0,e,r),n.restore()}var Uze=ej({props:Bh({width:{default:window.innerWidth,onChange:function(e,r){return cO(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return cO(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Bze),aliases:{stopAnimation:"pauseAnimation"},methods:Bh({graph2ScreenCoords:function(e,r,i){var s=Go(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Go(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new iK(a()).to(o,s).easing(Sd.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var c=Go(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,h=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,h===void 0?a().y:h),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new iK({k:s()}).to({k:r},i).easing(Sd.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Go(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=pn(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[i6(o,function(a){return a.x-a.r}),r6(o,function(a){return a.x+a.r})],y:[i6(o,function(a){return a.y-a.r}),r6(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},zze),stateInit:function(){return{lastSetZoom:1,zoom:QTe(),forceGraph:new _1,shadowGraph:new _1().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new U9e,tweenGroup:new Lse}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var d=null,f=window.devicePixelRatio,m=l.x>0&&l.y>0?a.getImageData(l.x*f,l.y*f,1,1):null;return m&&(d=r.colorTracker.lookup(m.data)),d};li(r.canvas).call(b2e().subject(function(){if(!r.enableNodeDrag)return null;var h=c();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var d=h.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},h.active||(d.fx=d.x,d.fy=d.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var d=h.subject,f=d.__initialDragPos,m=h,g=Go(r.canvas).k,b={x:f.x+(m.x-f.x)/g-d.x,y:f.y+(m.y-f.y)/g-d.y};["x","y"].forEach(function(y){return d["f".concat(y)]=d[y]=f[y]+(m[y]-f[y])/g}),!(!d.__dragged&&Fze>=Math.sqrt(_ke(["x","y"].map(function(y){return Math.pow(h[y]-f[y],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,d.__dragged=!0,r.onNodeDrag(d,b))}).on("end",function(h){var d=h.subject,f=d.__initialDragPos,m={x:d.x-f.x,y:d.y-f.y};f.fx===void 0&&(d.fx=void 0),f.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,r.onNodeDragEnd(d,m))})),r.zoom(r.zoom.__baseElem=li(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||pn(r.enableZoomInteraction)(h))&&(h.type==="wheel"||pn(r.enablePanInteraction)(h))}).on("zoom",function(h){var d=h.transform;[o,a].forEach(function(f){hoe(f),f.translate(d.x,d.y),f.scale(d.k,d.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(Bh(Bh({},d),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(Bh(Bh({},h.transform),i.centerAt()))}),cO(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Go(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Lze/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new c7e(s),["pointermove","pointerdown"].forEach(function(h){return s.addEventListener(h,function(d){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=d),!r.isPointerDragging&&d.type==="pointermove"&&r.onBackgroundClick&&(d.pressure>0||r.isPointerPressed)&&(d.pointerType==="mouse"||d.movementX===void 0||[d.movementX,d.movementY].some(function(g){return Math.abs(g)>1}))&&(r.isPointerDragging=!0);var f=m(s);l.x=d.pageX-f.left,l.y=d.pageY-f.top;function m(g){var b=g.getBoundingClientRect(),y=window.pageXOffset||document.documentElement.scrollLeft,v=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+v,left:b.left+y}}},{passive:!0})}),s.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var d=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,d);if(h.button===2)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"RightClick")];m&&m.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,d)})}},{passive:!0}),s.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var u=KBe(function(){AK(a,r.width,r.height),r.shadowGraph.linkWidth(function(d){return pn(r.linkWidth)(d)+r.linkHoverPrecision});var h=Go(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},jze);r.flushShadowCanvas=u.flush,(this._animationCycle=function h(){var d=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(k){return k.__photons&&k.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:c();if(f!==r.hoverObj){var m=r.hoverObj,g=m?m.type:null,b=f?f.type:null;if(g&&g!==b){var y=r["on".concat(g,"Hover")];y&&y(null,m.d)}if(b){var v=r["on".concat(b,"Hover")];v&&v(f.d,g===b?m.d:null)}r.tooltip.content(f&&pn(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[(f&&r["on".concat(b,"Click")]||!f&&r.onBackgroundClick)&&pn(r.showPointerCursor)(f==null?void 0:f.d)?"add":"remove"]("clickable"),r.hoverObj=f}d&&u()}if(d){AK(o,r.width,r.height);var w=Go(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,w),r.forceGraph.globalScale(w).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,w)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}});const fS={width:be.number,height:be.number,graphData:be.shape({nodes:be.arrayOf(be.object).isRequired,links:be.arrayOf(be.object).isRequired}),backgroundColor:be.string,nodeRelSize:be.number,nodeId:be.string,nodeLabel:be.oneOfType([be.string,be.func]),nodeVal:be.oneOfType([be.number,be.string,be.func]),nodeVisibility:be.oneOfType([be.bool,be.string,be.func]),nodeColor:be.oneOfType([be.string,be.func]),nodeAutoColorBy:be.oneOfType([be.string,be.func]),onNodeHover:be.func,onNodeClick:be.func,linkSource:be.string,linkTarget:be.string,linkLabel:be.oneOfType([be.string,be.func]),linkVisibility:be.oneOfType([be.bool,be.string,be.func]),linkColor:be.oneOfType([be.string,be.func]),linkAutoColorBy:be.oneOfType([be.string,be.func]),linkWidth:be.oneOfType([be.number,be.string,be.func]),linkCurvature:be.oneOfType([be.number,be.string,be.func]),linkDirectionalArrowLength:be.oneOfType([be.number,be.string,be.func]),linkDirectionalArrowColor:be.oneOfType([be.string,be.func]),linkDirectionalArrowRelPos:be.oneOfType([be.number,be.string,be.func]),linkDirectionalParticles:be.oneOfType([be.number,be.string,be.func]),linkDirectionalParticleSpeed:be.oneOfType([be.number,be.string,be.func]),linkDirectionalParticleOffset:be.oneOfType([be.number,be.string,be.func]),linkDirectionalParticleWidth:be.oneOfType([be.number,be.string,be.func]),linkDirectionalParticleColor:be.oneOfType([be.string,be.func]),onLinkHover:be.func,onLinkClick:be.func,dagMode:be.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:be.number,dagNodeFilter:be.func,onDagError:be.func,d3AlphaMin:be.number,d3AlphaDecay:be.number,d3VelocityDecay:be.number,warmupTicks:be.number,cooldownTicks:be.number,cooldownTime:be.number,onEngineTick:be.func,onEngineStop:be.func,getGraphBbox:be.func},foe={zoomToFit:be.func,onNodeRightClick:be.func,onNodeDrag:be.func,onNodeDragEnd:be.func,onLinkRightClick:be.func,linkHoverPrecision:be.number,onBackgroundClick:be.func,onBackgroundRightClick:be.func,showPointerCursor:be.oneOfType([be.bool,be.func]),enablePointerInteraction:be.bool,enableNodeDrag:be.bool},aj={showNavInfo:be.bool,nodeOpacity:be.number,nodeResolution:be.number,nodeThreeObject:be.oneOfType([be.object,be.string,be.func]),nodeThreeObjectExtend:be.oneOfType([be.bool,be.string,be.func]),nodePositionUpdate:be.func,linkOpacity:be.number,linkResolution:be.number,linkCurveRotation:be.oneOfType([be.number,be.string,be.func]),linkMaterial:be.oneOfType([be.object,be.string,be.func]),linkThreeObject:be.oneOfType([be.object,be.string,be.func]),linkThreeObjectExtend:be.oneOfType([be.bool,be.string,be.func]),linkPositionUpdate:be.func,linkDirectionalArrowResolution:be.number,linkDirectionalParticleResolution:be.number,linkDirectionalParticleThreeObject:be.oneOfType([be.object,be.string,be.func]),forceEngine:be.oneOf(["d3","ngraph"]),ngraphPhysics:be.object,numDimensions:be.oneOf([1,2,3])},Wze=Object.assign({},fS,foe,{linkLineDash:be.oneOfType([be.arrayOf(be.number),be.string,be.func]),nodeCanvasObjectMode:be.oneOfType([be.string,be.func]),nodeCanvasObject:be.func,nodePointerAreaPaint:be.func,linkCanvasObjectMode:be.oneOfType([be.string,be.func]),linkCanvasObject:be.func,linkPointerAreaPaint:be.func,linkDirectionalParticleCanvasObject:be.func,autoPauseRedraw:be.bool,minZoom:be.number,maxZoom:be.number,enableZoomInteraction:be.oneOfType([be.bool,be.func]),enablePanInteraction:be.oneOfType([be.bool,be.func]),onZoom:be.func,onZoomEnd:be.func,onRenderFramePre:be.func,onRenderFramePost:be.func});Object.assign({},fS,foe,aj,{enableNavigationControls:be.bool,controlType:be.oneOf(["trackball","orbit","fly"]),rendererConfig:be.object,extraRenderers:be.arrayOf(be.shape({render:be.func.isRequired}))});Object.assign({},fS,aj,{nodeDesc:be.oneOfType([be.string,be.func]),linkDesc:be.oneOfType([be.string,be.func])});Object.assign({},fS,aj,{markerAttrs:be.object,yOffset:be.number,glScale:be.number});const lj=_Be(Uze,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});lj.displayName="ForceGraph2D";lj.propTypes=Wze;function qze(){const[n,e]=E.useState(su),[r,i]=E.useState(()=>localStorage.getItem("authToken")||""),[s,o]=E.useState(c_),[a,l]=E.useState(""),[c,u]=E.useState(""),[h,d]=E.useState(!1),[f,m]=E.useState([]),[g,b]=E.useState(!1),[y,v]=E.useState(!1),[w,k]=E.useState(!1),[S,_]=E.useState(""),[C,P]=E.useState(""),[T,O]=E.useState(""),[D,I]=E.useState(""),[U,B]=E.useState("list"),[z,j]=E.useState(()=>fB()),[F,N]=E.useState([]),[R,W]=E.useState(null),Y=E.useRef(null),K=E.useRef(null),H=E.useRef(0),Q=E.useRef(null),G=E.useRef(null),X=E.useRef(null),de=E.useRef(!1),ye=(Ce,xe="success",L="consensus_flat")=>{const re={id:H.current++,timestamp:Date.now(),event:Ce,type:xe,eventSource:L};m(fe=>[re,...fe].slice(0,200))},se=E.useRef(new Set);E.useEffect(()=>{if(f.length===0)return;const Ce=f.filter(re=>!se.current.has(re.id));if(Ce.length===0)return;Ce.forEach(re=>se.current.add(re.id));const xe=Ce.map(re=>re.event).filter(re=>"data"in re&&re.data&&typeof re.data=="object"&&"type"in re.data),L=z;xe.length>0&&gRe(xe,L,re=>{N(fe=>{const ce=[...fe,...re].filter((he,pe,_e)=>_e.findIndex(De=>De.id===he.id)===pe),ge=Date.now()/1e3-7200,J=ce.filter(he=>he.timestamp>=ge);return J.length>5e3?J.slice(-5e3):J})})},[f]),E.useEffect(()=>()=>{pB(z),G.current&&(G.current.destroy(),G.current=null),X.current&&(clearInterval(X.current),X.current=null),se.current.clear()},[]),E.useEffect(()=>(X.current=window.setInterval(()=>{lRe(z,3e4)},3e4),()=>{X.current&&(clearInterval(X.current),X.current=null)}),[]);const ie=async()=>{if(!w){k(!0),ye({event_type:"info",data:{id:"connection",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connecting",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info");try{const Ce=new URL(n);if(Ce.protocol!=="ws:"&&Ce.protocol!=="wss:")throw new Error("URL must use ws:// or wss:// protocol")}catch{ye({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),k(!1);return}if(K.current)try{K.current.disconnect()}catch{}if(Y.current)try{Y.current.disconnect()}catch{}try{Y.current||(Y.current=new _p({url:n,authToken:r||void 0,walletAddress:void 0,deviceID:s||void 0})),K.current=new Mee(Y.current.getWebSocketClient()),K.current.onStateChange(Ce=>{Ce===kt.Connected?(d(!0),de.current&&(console.warn("[ExplorerTestPage] Reconnected - history may be incomplete"),de.current=!1),ye({event_type:"info",data:{id:"connection-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")):(Ce===kt.Disconnected||Ce===kt.Reconnecting)&&(d(!1),b(!1),v(!1),de.current=!0)}),Y.current.isConnected()?K.current.getState()===kt.Connected&&(d(!0),ye({event_type:"info",data:{id:"connection-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"connected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success")):await Y.current.connect()}catch{ye({event_type:"error",data:{id:"connection-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error"),d(!1)}finally{k(!1)}}},Pe=()=>{if(K.current)try{K.current.disconnect()}catch{}d(!1),b(!1),v(!1),ye({event_type:"info",data:{id:"disconnected",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"disconnected",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info")},ke=()=>{var xe;if(!((xe=K.current)!=null&&xe.isConnected())){ye({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error");return}const Ce=L=>{ye(L,"success","consensus_flat")};try{const L={};a&&(L.shard_id=a),c&&(L.event_type=c),K.current.subscribeConsensusFlat(Ce,Object.keys(L).length>0?L:void 0),b(!0),ye({event_type:"info",data:{id:"subscription-success",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"subscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success","consensus_flat")}catch{ye({event_type:"error",data:{id:"subscription-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error","consensus_flat")}},q=()=>{var Ce;if((Ce=K.current)!=null&&Ce.isConnected())try{K.current.unsubscribeConsensusFlat(),b(!1),ye({event_type:"info",data:{id:"unsubscribed",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"unsubscribed",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info","consensus_flat")}catch{ye({event_type:"error",data:{id:"unsubscribe-error",type:"vertex",shard_id:0,timestamp:Math.floor(Date.now()/1e3),status:"error",original_proto_hash:""},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error","consensus_flat")}},Ee=()=>{var xe;if(!((xe=K.current)!=null&&xe.isConnected())){ye({event_type:"error",data:{hash:"",status:"error"},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error","transactions");return}const Ce=L=>{ye(L,"success","transactions")};try{const L={};S&&(L.address=S),C&&(L.txhash=C),T&&(L.tx_types=T.split(",").map(re=>re.trim()).filter(Boolean)),D&&(L.event_types=D.split(",").map(re=>re.trim()).filter(Boolean)),a&&(L.shard_id=a),K.current.subscribeTransactions(Ce,Object.keys(L).length>0?L:void 0),v(!0),ye({event_type:"info",data:{hash:"subscription-success",status:"subscribed"},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"success","transactions")}catch{ye({event_type:"error",data:{hash:"subscription-error",status:"error"},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error","transactions")}},Je=()=>{var Ce;if((Ce=K.current)!=null&&Ce.isConnected())try{K.current.unsubscribeTransactions(),v(!1),ye({event_type:"info",data:{hash:"unsubscribed",status:"unsubscribed"},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"info","transactions")}catch{ye({event_type:"error",data:{hash:"unsubscribe-error",status:"error"},source_shard:"system",event_time:Math.floor(Date.now()/1e3)},"error","transactions")}},ct=()=>{m([]),N([]),pB(z),j(fB()),W(null),se.current.clear()},$e=()=>{h?Pe():ie()},ut=()=>{g?q():ke()},qe=()=>{y?Je():Ee()};E.useEffect(()=>{if(U!=="timeline"){G.current&&(G.current.destroy(),G.current=null);return}if(!Q.current||F.length===0)return;G.current&&(G.current.destroy(),G.current=null);const Ce=setTimeout(()=>{if(!Q.current)return;const xe=bRe(F),L=Array.from(new Set(xe.map(fe=>fe.group||"root"))).map(fe=>({id:fe,content:fe})),re={height:"500px",zoomable:!0,moveable:!0,selectable:!0,onSelect:fe=>{fe.items&&fe.items.length>0&&W(fe.items[0])}};G.current=new Z5(Q.current,xe,L,re)},0);return()=>{clearTimeout(Ce),G.current&&(G.current.destroy(),G.current=null)}},[U,F]);const[we,ze]=E.useState(()=>typeof window<"u"?window.innerWidth-100:800);E.useEffect(()=>{if(U!=="graph")return;const Ce=()=>{ze(window.innerWidth-100)};return window.addEventListener("resize",Ce),()=>window.removeEventListener("resize",Ce)},[U]);const Me=E.useMemo(()=>U!=="graph"?{nodes:[],links:[]}:yRe(F,R||void 0,5),[U,F,R]),Ie=E.useMemo(()=>R?F.find(Ce=>Ce.id===R):null,[R,F]);return p.jsxs("div",{className:"explorer-test-page",children:[p.jsxs("div",{className:"explorer-test-header",children:[p.jsx("h2",{children:"Consensus Explorer Test"}),p.jsx("p",{children:"Test the consensus_flat WebSocket channel to view flattened consensus events from Morpheum's DAG-based consensus system."})]}),p.jsx(YAe,{wsURL:n,setWsURL:e,authToken:r,setAuthToken:i,deviceID:s,setDeviceID:o,shardId:a,setShardId:l,eventType:c,setEventType:u,txAddress:S,setTxAddress:_,txHash:C,setTxHash:P,txTypes:T,setTxTypes:O,txEventTypes:D,setTxEventTypes:I}),p.jsxs("div",{className:"explorer-test-controls",children:[p.jsxs("div",{className:"control-buttons",children:[p.jsx(Zl,{onClick:$e,disabled:w,variant:h?"secondary":"primary",children:w?"Connecting...":h?"Disconnect":"Connect"}),p.jsx(Zl,{onClick:ut,disabled:!h,variant:g?"secondary":"primary",children:g?"Unsubscribe Consensus":"Subscribe Consensus"}),p.jsx(Zl,{onClick:qe,disabled:!h,variant:y?"secondary":"primary",children:y?"Unsubscribe Transactions":"Subscribe Transactions"}),p.jsx(Zl,{onClick:ct,variant:"secondary",children:"Clear Events"})]}),p.jsxs("div",{className:"connection-status",children:[p.jsx("span",{className:`status-indicator ${h?"connected":"disconnected"}`,children:h?" Connected":" Disconnected"}),g&&p.jsx("span",{className:"status-indicator subscribed",children:" Subscribed to consensus_flat"}),y&&p.jsx("span",{className:"status-indicator subscribed",children:" Subscribed to transactions"}),p.jsxs("span",{className:"event-count",children:["Events: ",f.length]}),p.jsxs("span",{className:"event-count",children:["DAG Nodes: ",F.length]})]})]}),p.jsxs("div",{className:"view-controls",children:[p.jsx(Zl,{onClick:()=>B("list"),variant:U==="list"?"primary":"secondary",children:"List View"}),p.jsx(Zl,{onClick:()=>B("timeline"),variant:U==="timeline"?"primary":"secondary",children:"Timeline View"}),p.jsxs(Zl,{onClick:()=>B("graph"),variant:U==="graph"?"primary":"secondary",disabled:F.length>100&&!R,children:["Graph View ",F.length>100&&!R?"(Select node first)":""]})]}),U==="timeline"&&p.jsxs("div",{className:"dag-timeline-container",children:[p.jsx("div",{ref:Q,style:{height:"500px",border:"1px solid var(--border)"}}),F.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No DAG nodes to display. Connect and subscribe to start receiving events."})})]}),U==="graph"&&p.jsx("div",{className:"dag-graph-container",children:p.jsx(E.Suspense,{fallback:p.jsx("div",{className:"loading-state",children:"Loading graph..."}),children:Me.nodes.length>0?p.jsx(lj,{graphData:Me,nodeLabel:Ce=>`${Ce.label}
Type: ${Ce.type}
Shard: ${Ce.shardId}`,nodeColor:Ce=>Ce.type==="vertex"?"#3b82f6":Ce.type==="tx"?"#10b981":"#f59e0b",linkDirectionalArrowLength:6,linkDirectionalArrowRelPos:1,linkColor:()=>"rgba(255, 255, 255, 0.3)",onNodeClick:Ce=>W(Ce.id),nodeCanvasObjectMode:()=>"after",nodeCanvasObject:(Ce,xe)=>{Ce.id===R&&(xe.beginPath(),xe.arc(Ce.x||0,Ce.y||0,8,0,2*Math.PI),xe.fillStyle="#f0f63b",xe.fill(),xe.strokeStyle="#f0f63b",xe.lineWidth=2,xe.stroke())},height:500,width:we}):p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:F.length===0?"No DAG nodes to display. Connect and subscribe to start receiving events.":F.length>100?"Graph view requires node selection for large datasets. Click a node in timeline view first.":"No graph data available."})})})}),U==="list"&&p.jsx(nRe,{events:f}),R&&Ie&&p.jsxs("div",{className:"dag-details-pane",children:[p.jsxs("h3",{children:["Node Details: ",R]}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Type:"}),p.jsx("span",{className:"detail-value",children:Ie.nodeType})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Timestamp:"}),p.jsx("span",{className:"detail-value",children:new Date(Ie.timestamp*1e3).toLocaleString()})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Shard ID:"}),p.jsx("span",{className:"detail-value",children:Ie.shardId})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Parents:"}),p.jsx("span",{className:"detail-value",children:Ie.parents.length})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Children:"}),p.jsx("span",{className:"detail-value",children:Ie.children.length})]}),p.jsxs("details",{className:"raw-data-details",children:[p.jsx("summary",{children:"View Raw Data"}),p.jsx("pre",{className:"raw-data-pre",children:JSON.stringify(Ie.data,null,2)})]})]}),p.jsx("div",{style:{marginTop:"10px"},children:p.jsx(Zl,{onClick:()=>W(null),variant:"secondary",children:"Close Details"})})]})]})}const Hze=E.createContext(void 0),lg="onboard_mnemonic",cg="onboard_wallet_address",Vze=({children:n})=>{const[e,r]=E.useState(null),[i,s]=E.useState(null);E.useEffect(()=>{const c=localStorage.getItem(cg),u=localStorage.getItem(lg),h=localStorage.getItem("generatedAddress"),d=localStorage.getItem("mnemonic");c&&u?(r(c),s(u)):h&&d&&(r(h),s(d),localStorage.setItem(cg,h),localStorage.setItem(lg,d),localStorage.removeItem("generatedAddress"),localStorage.removeItem("mnemonic"))},[]),E.useEffect(()=>{const c=u=>{u.key===cg?r(u.newValue):u.key===lg&&s(u.newValue)};return window.addEventListener("storage",c),()=>window.removeEventListener("storage",c)},[]);const o=E.useCallback((c,u)=>{r(c),s(u),localStorage.setItem(cg,c),localStorage.setItem(lg,u)},[]),a=E.useCallback(()=>{r(null),s(null),localStorage.removeItem(cg),localStorage.removeItem(lg)},[]),l=E.useMemo(()=>({generatedAddress:e,mnemonic:i,setGeneratedData:o,clearGeneratedData:a}),[e,i,o,a]);return p.jsx(Hze.Provider,{value:l,children:n})},Yze={"/":"main","/main":"main","/sdk-test":"sdk-test","/websocket-test":"websocket-test","/layout-test":"layout-test","/hooks-test":"hooks-test","/trading-test":"trading-test","/swap-test":"swap-test","/explorer-test":"explorer-test"},RK={main:"/","sdk-test":"/sdk-test","websocket-test":"/websocket-test","layout-test":"/layout-test","hooks-test":"/hooks-test","trading-test":"/trading-test","swap-test":"/swap-test","explorer-test":"/explorer-test"};function NK(){const n=window.location.pathname;return Yze[n]||"main"}const Gze=[{id:"Id8oZS95KxQ",name:"Summer Wave"},{id:"y9PTNTSpGJs",name:"Wave Ocean"},{id:"KkX9LfqeOF4",name:"Morph Lava"},{id:"bx-0YlFprqc",name:"DAG Rev."},{id:"eCHaiEjCDFM",name:"Black Swarm 1"},{id:"Tbw3w0RA0WU",name:"Lofi Leon Skyline"},{id:"tjetD2pFK4A",name:"Lofi Sinth Skyline"},{id:"aG01KIXWrbU",name:"Lofi Doom Skyline"},{id:"ZWyv_w_cFiw",name:"Deep Cybercity Japan"},{id:"wVqeChtoY_k",name:"Synthwave"},{id:"0KgxkD1u-TI",name:"City Travel"},{id:"wyxxPTFfdi8",name:"Pearl Liquid"},{id:"ytXX67Ghies",name:"Smoke Liquid"},{id:"aYEg66Egjo0",name:"Home Hollywood"},{id:"AfSWldaT-AE",name:"Mega Hollywood"},{id:"0JQkT1FxhEc",name:"GT7 Audi RS 5 Turbo DTM"},{id:"VZyzqGgEhZc",name:"Forza Fujimi Kaido"},{id:"UYJIqBZENjU",name:"RC "},{id:"BQL-CP8d1-o",name:"RC Iron Menace"},{id:"oAJLKDMihnU",name:"RC Knoebels Amusement Park"},{id:"JggE0FYV_Ys",name:"RC  "},{id:"2GVmvtVA5p8",name:"RC Unlimited"},{id:"q-70DtTlkKU",name:"RC King Kong River"},{id:"4Uq9Hk3E7hs",name:"Ballance Twilight Zone"},{id:"WCOKSsygnxM",name:"Ballance 2004 Zone"},{id:"ZP4d40DV7K0",name:"Ballance 210522 Zone"},{id:"NfxnqErfkL8",name:"Dying Light Zone"}];function Kze(){const{wasmStatus:n,isReady:e}=uye(),[r,i]=E.useState(NK()),[s,o]=E.useState(!1),[a,l]=E.useState("Id8oZS95KxQ"),c=E.useRef(null),u="/s0203.mp3";E.useEffect(()=>{const m=window.location.pathname,g=RK[r];m!==g&&window.history.replaceState({page:r},"",g)},[]),E.useEffect(()=>{const m=()=>{i(NK())};return window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)}},[]);const h=m=>{i(m);const g=RK[m];window.history.pushState({page:m},"",g)};E.useEffect(()=>{const m=()=>{h("websocket-test")};return window.addEventListener("navigateToWebSocketTest",m),()=>{window.removeEventListener("navigateToWebSocketTest",m)}},[]);const d=m=>{const g=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,b=m.match(g);return b&&b[2].length===11?b[2]:m},f=()=>{o(!s)};return E.useEffect(()=>{c.current&&(s?c.current.play().catch(m=>{console.error("Error playing background music:",m)}):c.current.pause())},[s]),p.jsxs(Vze,{children:[p.jsxs("div",{className:`App ${s?"video-background-enabled":""}`,children:[p.jsx("audio",{ref:c,src:u,loop:!0,preload:"auto",crossOrigin:"anonymous"}),s&&p.jsxs("div",{className:"video-background-container",children:[p.jsx("iframe",{className:"video-background",src:`https://www.youtube.com/embed/${d(a)}?autoplay=1&mute=1&loop=1&playlist=${d(a)}&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1`,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0,title:"Background Video"},a),p.jsx("div",{className:"video-background-overlay"})]}),p.jsxs("div",{className:"video-background-controls",children:[p.jsx("select",{className:"video-background-select",value:a,onChange:m=>l(m.target.value),disabled:!s,title:"Select Video Background",children:Gze.map(m=>p.jsx("option",{value:m.id,children:m.name},m.id))}),p.jsx("button",{className:"video-background-toggle",onClick:f,title:s?"Disable Video Background":"Enable Video Background",children:s?"":""})]}),p.jsxs("header",{className:"App-header",children:[p.jsx("h3",{children:"SDK, Testing, QA"}),p.jsxs("nav",{children:[p.jsx("button",{onClick:()=>h("main"),className:`nav-button ${r==="main"?"active":""}`,children:"Morm Signer"}),p.jsx("button",{onClick:()=>h("sdk-test"),className:`nav-button ${r==="sdk-test"?"active":""}`,children:"SDK Trade API"}),p.jsx("button",{onClick:()=>h("websocket-test"),className:`nav-button ${r==="websocket-test"?"active":""}`,children:"WebSocket Test"}),p.jsx("button",{onClick:()=>h("hooks-test"),className:`nav-button ${r==="hooks-test"?"active":""}`,children:"Hooks Test"}),p.jsx("button",{onClick:()=>h("layout-test"),className:`nav-button ${r==="layout-test"?"active":""}`,children:"Layout Test"}),p.jsx("button",{onClick:()=>h("trading-test"),className:`nav-button ${r==="trading-test"?"active":""}`,children:"Trading Test"}),p.jsx("button",{onClick:()=>h("swap-test"),className:`nav-button ${r==="swap-test"?"active":""}`,children:"Swap Test"}),p.jsx("button",{onClick:()=>h("explorer-test"),className:`nav-button ${r==="explorer-test"?"active":""}`,children:"Explorer Test"})]})]}),p.jsx("main",{className:"App-main",children:r==="sdk-test"?p.jsx($ve,{}):r==="websocket-test"?p.jsx(Gve,{}):r==="layout-test"?p.jsx(rke,{}):r==="hooks-test"?p.jsx(oPe,{}):r==="trading-test"?p.jsx(HAe,{}):r==="swap-test"?p.jsx(VAe,{}):r==="explorer-test"?p.jsx(qze,{}):p.jsxs(p.Fragment,{children:[p.jsx("h1",{children:"Morm SDK"}),p.jsx("p",{children:"Test WebAssembly integration for morm_signer with Agent Delegation"}),p.jsx(Sve,{status:n}),e&&p.jsxs("div",{className:"App-content gridarrangement",children:[p.jsx("div",{className:"App-section",children:p.jsx(fve,{})}),p.jsx("div",{className:"App-section",children:p.jsx(pve,{})}),p.jsx("div",{className:"App-section",children:p.jsx(mve,{})}),p.jsx("div",{className:"App-section",children:p.jsx(_ve,{})})]}),n.error&&p.jsxs("div",{className:"App-error",children:[p.jsx("h3",{children:"Error Loading WASM"}),p.jsx("p",{children:n.error}),p.jsx("p",{children:"Make sure the morm_signer.wasm file is available in the public directory."})]})]})})]}),p.jsx(Kve,{position:"bottom-right",toastOptions:{duration:4e3,style:{color:"var(--foreground)",border:"1px solid var(--border)"}}})]})}const jK=AJ({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),LK=AJ({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),Xze=lpe({chains:[jK,LK],connectors:[q1({})],transports:{[jK.id]:mL(),[LK.id]:mL()}}),Qze=new fhe,Jze=uO.createRoot(document.getElementById("root"));Jze.render(p.jsx(Ke.StrictMode,{children:p.jsx(dpe,{config:Xze,children:p.jsx(mhe,{client:Qze,children:p.jsx(Kze,{})})})}));
//# sourceMappingURL=index-BQFdF4c_.js.map
